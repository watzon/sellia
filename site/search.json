{"config":{"separator":"[\\s\\-_,:!=\\[\\]()\\\\\"`/]+|\\.(?!\\d)"},"items":[{"location":"","level":1,"title":"Sellia Documentation","text":"<p>Welcome to the Sellia documentation! Sellia is a self-hosted ngrok alternative written in Crystal that exposes your local development servers to the internet through secure tunnels.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#what-is-sellia","level":2,"title":"What is Sellia?","text":"<p>Sellia provides secure tunnels to localhost, perfect for:</p> <ul> <li>Webhook Development - Test Stripe, GitHub, and other webhooks locally</li> <li>Mobile Development - Test mobile apps against local APIs</li> <li>Client Demos - Share work-in-progress with clients</li> <li>OAuth Testing - Test callback URLs locally</li> </ul>","path":["Sellia Documentation"],"tags":[]},{"location":"#key-features","level":3,"title":"Key Features","text":"<ul> <li>Subdomain-based routing (<code>myapp.your-domain.com</code>)</li> <li>Real-time request inspector with web UI</li> <li>Automatic reconnection with linear backoff</li> <li>Basic auth protection for tunnels</li> <li>Rate limiting and subdomain validation</li> <li>MessagePack-based binary protocol over WebSocket</li> </ul>","path":["Sellia Documentation"],"tags":[]},{"location":"#self-hosted-or-hosted","level":3,"title":"Self-Hosted or Hosted","text":"<p>Self-Hosted: Run your own tunnel server with full control over your data and infrastructure.</p> <p>Hosted: Use the hosted service at sellia.me for a quick start without managing infrastructure.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#quick-start","level":2,"title":"Quick Start","text":"","path":["Sellia Documentation"],"tags":[]},{"location":"#hosted-service","level":3,"title":"Hosted Service","text":"<p>Use the hosted service at sellia.me to get started immediately.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#1-install","level":4,"title":"1. Install","text":"<pre><code>curl -sSL https://sellia.me/install.sh | sh\n</code></pre> <p>Alternative: Download binaries from GitHub Releases or build from source.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#2-start-a-tunnel","level":4,"title":"2. Start a Tunnel","text":"<pre><code>sellia http 8080\n</code></pre> <p>Optionally request a specific subdomain:</p> <pre><code>sellia http 8080 --subdomain myapp\n</code></pre>","path":["Sellia Documentation"],"tags":[]},{"location":"#3-access-your-server","level":4,"title":"3. Access Your Server","text":"<p>Visit the provided URL (e.g., <code>https://abc123.sellia.me</code> or <code>https://myapp.sellia.me</code>).</p> <p>The request inspector is available at <code>http://127.0.0.1:4040</code>.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#self-hosted","level":3,"title":"Self-Hosted","text":"<p>Run your own tunnel server for full control over your infrastructure.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#1-install_1","level":4,"title":"1. Install","text":"<p>Same options as above: install script, GitHub Releases, or build from source.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#2-start-the-server","level":4,"title":"2. Start the Server","text":"<pre><code>sellia-server --port 3000 --domain your-domain.com\n</code></pre>","path":["Sellia Documentation"],"tags":[]},{"location":"#3-create-a-tunnel","level":4,"title":"3. Create a Tunnel","text":"<pre><code>sellia http 8080 --server http://localhost:3000\n</code></pre>","path":["Sellia Documentation"],"tags":[]},{"location":"#4-access-your-server","level":4,"title":"4. Access Your Server","text":"<p>Visit <code>http://abc123.your-domain.com:3000</code> (port may vary).</p> <p>The request inspector is available at <code>http://127.0.0.1:4040</code>.</p>","path":["Sellia Documentation"],"tags":[]},{"location":"#documentation","level":2,"title":"Documentation","text":"","path":["Sellia Documentation"],"tags":[]},{"location":"#user-guide","level":3,"title":"User Guide","text":"<p>Complete guide for using Sellia, from installation to advanced configuration.</p> <ul> <li>Installation and setup</li> <li>Creating and managing tunnels</li> <li>Using the request inspector</li> <li>Configuration options</li> <li>Deployment guides</li> <li>Troubleshooting</li> </ul>","path":["Sellia Documentation"],"tags":[]},{"location":"#developer-guide","level":3,"title":"Developer Guide","text":"<p>For contributors and extenders:</p> <ul> <li>Architecture overview</li> <li>Project structure</li> <li>Development setup</li> <li>Contributing guidelines</li> <li>Release process</li> </ul>","path":["Sellia Documentation"],"tags":[]},{"location":"#community","level":2,"title":"Community","text":"<ul> <li>GitHub: github.com/watzon/sellia</li> <li>Issues: github.com/watzon/sellia/issues</li> <li>License: MIT</li> </ul>","path":["Sellia Documentation"],"tags":[]},{"location":"#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>New users: Start with Getting Started</li> <li>Deploying: See Deployment</li> <li>Developing: Check Development Setup</li> </ul>","path":["Sellia Documentation"],"tags":[]},{"location":"01-user/admin/","level":1,"title":"Admin Guide","text":"<p>Administrative tasks for managing your Sellia server.</p>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#overview","level":2,"title":"Overview","text":"<p>This section covers server administration, monitoring, and maintenance tasks for running a Sellia tunnel server.</p>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#server-management","level":2,"title":"Server Management","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#starting-the-server","level":3,"title":"Starting the Server","text":"<p>Basic server start:</p> <pre><code>sellia-server --port 3000 --domain your-domain.com\n</code></pre> <p>With authentication:</p> <pre><code>sellia-server \\\n  --port 3000 \\\n  --domain your-domain.com \\\n  --require-auth \\\n  --master-key your-master-key\n</code></pre> <p>With HTTPS:</p> <pre><code>sellia-server \\\n  --port 3000 \\\n  --domain your-domain.com \\\n  --https \\\n  --require-auth \\\n  --master-key your-master-key\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#environment-configuration","level":3,"title":"Environment Configuration","text":"<p>Use environment variables for production:</p> <pre><code># .env\nSELLIA_HOST=0.0.0.0\nSELLIA_PORT=3000\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=your-master-key\nSELLIA_USE_HTTPS=true\nSELLIA_RATE_LIMITING=true\nLOG_LEVEL=warn\n</code></pre> <p>Start with environment:</p> <pre><code>source .env\nsellia-server\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#monitoring","level":2,"title":"Monitoring","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#log-monitoring","level":3,"title":"Log Monitoring","text":"<p>Monitor server logs for issues:</p> <pre><code># Follow logs\nsellia-server 2&gt;&amp;1 | tee server.log\n\n# Check for errors\ngrep -i error server.log\n\n# Check for authentication attempts\ngrep -i auth server.log\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#connection-monitoring","level":3,"title":"Connection Monitoring","text":"<p>Monitor active tunnels:</p> <pre><code># View active connections (implementation varies)\n# Check server logs for tunnel registrations\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#resource-monitoring","level":3,"title":"Resource Monitoring","text":"<p>Monitor server resources:</p> <pre><code># CPU and memory\ntop -p $(pgrep sellia-server)\n\n# Network connections\nnetstat -an | grep :3000\n\n# Tunnel connections\nnetstat -an | grep ESTABLISHED | grep :3000\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#maintenance","level":2,"title":"Maintenance","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#certificate-renewal","level":3,"title":"Certificate Renewal","text":"<p>If using TLS certificates:</p> <pre><code># Check certificate expiration\nopenssl x509 -in certs/cert.pem -noout -dates\n\n# Renew with certbot (if using Let's Encrypt)\ncertbot renew\n\n# Restart server after renewal\nkill $(pgrep sellia-server)\nsellia-server\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#backup-configuration","level":3,"title":"Backup Configuration","text":"<p>Backup important files:</p> <pre><code># Backup configuration\ncp .env .env.backup\ncp sellia.yml sellia.yml.backup\n\n# Backup certificates\ntar -czf certs-backup-$(date +%Y%m%d).tar.gz certs/\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#update-server","level":3,"title":"Update Server","text":"<p>Update to latest version:</p> <pre><code># Stop server\nkill $(pgrep sellia-server)\n\n# Pull latest code\ngit pull origin main\n\n# Rebuild\nshards build --release\n\n# Restart server\nsellia-server\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#rate-limiting","level":2,"title":"Rate Limiting","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#overview_1","level":3,"title":"Overview","text":"<p>Sellia includes rate limiting to prevent abuse:</p> <ul> <li>Enabled by default</li> <li>Configurable limits per client</li> <li>Prevents brute force attacks</li> <li>Protects server resources</li> </ul>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#configure-rate-limiting","level":3,"title":"Configure Rate Limiting","text":"<p>Enable/disable rate limiting:</p> <pre><code># Disable (not recommended)\nsellia-server --no-rate-limit\n\n# Enable with environment variable\nexport SELLIA_RATE_LIMITING=true\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#custom-limits","level":3,"title":"Custom Limits","text":"<p>Configure rate limits (implementation varies):</p> <pre><code># Example: requests per minute\nRATE_LIMIT=100\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#security","level":2,"title":"Security","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#firewall-rules","level":3,"title":"Firewall Rules","text":"<p>Configure firewall to protect server:</p> <pre><code># Allow Sellia server port\nufw allow 3000/tcp\n\n# Allow SSH\nufw allow 22/tcp\n\n# Enable firewall\nufw enable\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#api-key-management","level":3,"title":"API Key Management","text":"<p>Generate and manage API keys:</p> <pre><code># Generate new key\nopenssl rand -hex 32\n\n# Set as master key\nexport SELLIA_MASTER_KEY=$(openssl rand -hex 32)\n\n# Distribute to users securely\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#audit-logs","level":3,"title":"Audit Logs","text":"<p>Enable audit logging:</p> <pre><code># Enable debug logging for audit trail\nexport LOG_LEVEL=debug\n\n# Rotate logs\nlogrotate -f /etc/logrotate.d/sellia\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#server-wont-start","level":3,"title":"Server Won't Start","text":"<p>Problem: Server fails to start</p> <p>Solutions: - Check port is available: <code>lsof -i :3000</code> - Verify configuration syntax - Check file permissions - Review error logs</p>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#high-memory-usage","level":3,"title":"High Memory Usage","text":"<p>Problem: Server using excessive memory</p> <p>Solutions: - Check number of active tunnels - Review rate limit settings - Monitor for memory leaks - Restart server periodically</p>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#connection-issues","level":3,"title":"Connection Issues","text":"<p>Problem: Clients can't connect</p> <p>Solutions: - Verify server is running - Check firewall rules - Verify DNS configuration - Check network connectivity</p>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#docker-deployment","level":2,"title":"Docker Deployment","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#using-docker-compose","level":3,"title":"Using Docker Compose","text":"<p>Easiest deployment method:</p> <pre><code># Start server\ndocker compose -f docker-compose.prod.yml up -d\n\n# View logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Stop server\ndocker compose -f docker-compose.prod.yml down\n\n# Restart\ndocker compose -f docker-compose.prod.yml restart\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#docker-management","level":3,"title":"Docker Management","text":"<pre><code># View container stats\ndocker stats\n\n# Execute command in container\ndocker exec -it sellia-server bash\n\n# View logs\ndocker logs -f sellia-server\n\n# Update container\ndocker compose pull\ndocker compose up -d\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#performance-tuning","level":2,"title":"Performance Tuning","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#connection-limits","level":3,"title":"Connection Limits","text":"<p>Adjust connection limits:</p> <pre><code># Increase file descriptor limit\nulimit -n 65536\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#caching","level":3,"title":"Caching","text":"<p>Configure HTTP caching (if applicable):</p> <pre><code># Enable HTTP caching headers\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#load-balancing","level":3,"title":"Load Balancing","text":"<p>For high-availability setups:</p> <ul> <li>Use multiple Sellia servers behind load balancer</li> <li>Configure shared storage for session state</li> <li>Use health checks for failover</li> </ul>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#disaster-recovery","level":2,"title":"Disaster Recovery","text":"","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#backup-strategy","level":3,"title":"Backup Strategy","text":"<ol> <li>Configuration - Back up <code>.env</code>, <code>sellia.yml</code></li> <li>Certificates - Back up <code>certs/</code> directory</li> <li>Data - Back up any persistent storage</li> <li>Scripts - Back up deployment scripts</li> </ol>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#restore-procedure","level":3,"title":"Restore Procedure","text":"<pre><code># Stop server\ndocker compose down\n\n# Restore configuration\ncp .env.backup .env\ncp sellia.yml.backup sellia.yml\n\n# Restore certificates\ntar -xzf certs-backup-YYYYMMDD.tar.gz\n\n# Restart server\ndocker compose up -d\n</code></pre>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Deployment - Production deployment guide</li> <li>Security - Security best practices</li> <li>Storage - Data persistence options</li> </ul>","path":["01 user","Admin","Admin Guide"],"tags":[]},{"location":"01-user/admin/admin-api/","level":1,"title":"Admin API","text":"<p>The Sellia Admin API provides HTTP endpoints for managing reserved subdomains and API keys. All endpoints require authentication with a master API key.</p>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#base-url","level":2,"title":"Base URL","text":"<p>The Admin API is served from the same host as your Sellia server:</p> <pre><code>https://your-domain.com/api/admin\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#authentication","level":2,"title":"Authentication","text":"<p>All Admin API endpoints require authentication with a master API key.</p>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#methods","level":3,"title":"Methods","text":"<p>Authorization Header:</p> <pre><code>Authorization: Bearer your-api-key-here\n</code></pre> <p>X-API-Key Header:</p> <pre><code>X-API-Key: your-api-key-here\n</code></pre> <p>Both methods are supported and checked. The client sends both headers for compatibility.</p>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#example-with-curl","level":3,"title":"Example with cURL","text":"<pre><code>export SELLIA_ADMIN_API_KEY=\"a1b2c3d4e5f6...\"\n\ncurl -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#error-response","level":3,"title":"Error Response","text":"<p>If authentication fails or key is not a master key:</p> <pre><code>HTTP/1.1 401 Unauthorized\nContent-Type: application/json\n\n{\n  \"error\": \"Unauthorized: Admin API key required\"\n}\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#response-format","level":2,"title":"Response Format","text":"<p>Success responses use appropriate HTTP status codes:</p> <ul> <li><code>200 OK</code> - Successful GET, DELETE</li> <li><code>201 Created</code> - Successful POST</li> <li><code>400 Bad Request</code> - Invalid request parameters</li> <li><code>401 Unauthorized</code> - Missing or invalid authentication</li> <li><code>403 Forbidden</code> - Operation not allowed (e.g., removing default reserved subdomain)</li> <li><code>404 Not Found</code> - Resource doesn't exist</li> <li><code>409 Conflict</code> - Resource already exists</li> <li><code>503 Service Unavailable</code> - Database not available</li> </ul>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#endpoints","level":2,"title":"Endpoints","text":"","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#list-reserved-subdomains","level":4,"title":"List Reserved Subdomains","text":"<p>Get all reserved subdomains.</p> <pre><code>GET /api/admin/reserved\n</code></pre> <p>Response: 200 OK</p> <pre><code>[\n  {\n    \"subdomain\": \"api\",\n    \"reason\": \"Default reserved subdomain\",\n    \"is_default\": true,\n    \"created_at\": \"2024-01-01T00:00:00.000000Z\"\n  },\n  {\n    \"subdomain\": \"billing\",\n    \"reason\": \"Payment processing\",\n    \"is_default\": false,\n    \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n  }\n]\n</code></pre> <p>cURL example:</p> <pre><code>curl -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#add-reserved-subdomain","level":4,"title":"Add Reserved Subdomain","text":"<p>Reserve a subdomain to prevent tunnel clients from using it.</p> <pre><code>POST /api/admin/reserved\nContent-Type: application/json\n\n{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\"\n}\n</code></pre> <p>Request body fields:</p> <ul> <li><code>subdomain</code> (required, string) - Subdomain to reserve (3-63 chars, a-z, 0-9, hyphens; must start and end with alphanumeric)</li> <li><code>reason</code> (optional, string) - Reason/documentation for the reservation</li> </ul> <p>Response: 201 Created</p> <pre><code>{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\",\n  \"is_default\": false,\n  \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li><code>400 Bad Request</code> - Invalid subdomain format</li> </ul> <pre><code>{\n  \"error\": \"Subdomain must be at least 3 characters\"\n}\n</code></pre> <pre><code>{\n  \"error\": \"Subdomain must be at most 63 characters\"\n}\n</code></pre> <pre><code>{\n  \"error\": \"Subdomain can only contain lowercase letters, numbers, and hyphens\"\n}\n</code></pre> <ul> <li><code>409 Conflict</code> - Subdomain already reserved</li> </ul> <pre><code>{\n  \"error\": \"Subdomain already reserved\"\n}\n</code></pre> <p>cURL example:</p> <pre><code>curl -X POST \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"subdomain\": \"mycompany\", \"reason\": \"Company name\"}' \\\n  https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#remove-reserved-subdomain","level":4,"title":"Remove Reserved Subdomain","text":"<p>Remove a reservation (allows the subdomain to be used again).</p> <pre><code>DELETE /api/admin/reserved/:subdomain\n</code></pre> <p>URL parameters:</p> <ul> <li><code>subdomain</code> - The subdomain to remove from reserved list</li> </ul> <p>Response: 200 OK</p> <pre><code>{\n  \"message\": \"Reserved subdomain 'mycompany' removed\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li><code>403 Forbidden</code> - Attempting to remove default reserved subdomain</li> </ul> <pre><code>{\n  \"error\": \"Cannot remove default reserved subdomain\"\n}\n</code></pre> <ul> <li><code>404 Not Found</code> - Subdomain not in reserved list</li> </ul> <pre><code>{\n  \"error\": \"Reserved subdomain not found\"\n}\n</code></pre> <p>cURL example:</p> <pre><code>curl -X DELETE \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/reserved/mycompany\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#api-keys","level":3,"title":"API Keys","text":"","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#list-api-keys","level":4,"title":"List API Keys","text":"<p>Get all API keys in the database.</p> <pre><code>GET /api/admin/api-keys\n</code></pre> <p>Response: 200 OK</p> <pre><code>[\n  {\n    \"id\": 1,\n    \"key_prefix\": \"a1b2c3d4\",\n    \"name\": \"Development Key\",\n    \"is_master\": true,\n    \"active\": true,\n    \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n    \"last_used_at\": \"2024-01-20T14:22:00.000000Z\"\n  },\n  {\n    \"id\": 2,\n    \"key_prefix\": \"e5f6g7h8\",\n    \"name\": \"Production API\",\n    \"is_master\": false,\n    \"active\": true,\n    \"created_at\": \"2024-01-20T14:22:00.000000Z\",\n    \"last_used_at\": null\n  }\n]\n</code></pre> <p>Note: The full API key is never returned in listings. Only the prefix is shown.</p> <p>cURL example:</p> <pre><code>curl -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/api-keys\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#create-api-key","level":4,"title":"Create API Key","text":"<p>Generate a new API key.</p> <pre><code>POST /api/admin/api-keys\nContent-Type: application/json\n\n{\n  \"name\": \"My Service Key\",\n  \"is_master\": false\n}\n</code></pre> <p>Request body fields:</p> <ul> <li><code>name</code> (optional, string) - Friendly name for the key</li> <li><code>is_master</code> (optional, boolean) - Create master key (default: false)</li> </ul> <p>Response: 201 Created</p> <pre><code>{\n  \"id\": 3,\n  \"key\": \"9a8b7c6d5e4f3g2h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x7y8z9a0b1c2d3e4f5g6h7i8j9k0l1m2n3o4p5q6r7s8t9u0v1w2x3y4z5\",\n  \"key_prefix\": \"9a8b7c6d\",\n  \"name\": \"My Service Key\",\n  \"is_master\": false,\n  \"active\": true,\n  \"created_at\": \"2024-01-20T15:00:00.000000Z\"\n}\n</code></pre> <p>Important: The <code>key</code> field contains the full API key and is only shown once during creation. Save it securely.</p> <p>cURL example:</p> <pre><code># Standard key\ncurl -X POST \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Service Key\"}' \\\n  https://sellia.example.com/api/admin/api-keys\n\n# Master key\ncurl -X POST \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Admin Key\", \"is_master\": true}' \\\n  https://sellia.example.com/api/admin/api-keys\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#revoke-api-key","level":4,"title":"Revoke API Key","text":"<p>Revoke an API key by its prefix.</p> <pre><code>DELETE /api/admin/api-keys/:prefix\n</code></pre> <p>URL parameters:</p> <ul> <li><code>prefix</code> - The key prefix (first 8 characters)</li> </ul> <p>Response: 200 OK</p> <pre><code>{\n  \"message\": \"API key 'a1b2c3d4' revoked\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li><code>404 Not Found</code> - Key prefix not found</li> </ul> <pre><code>{\n  \"error\": \"API key not found\"\n}\n</code></pre> <p>cURL example:</p> <pre><code>curl -X DELETE \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/api-keys/a1b2c3d4\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#using-with-different-languages","level":2,"title":"Using with Different Languages","text":"","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#python","level":3,"title":"Python","text":"<pre><code>import requests\n\nADMIN_KEY = \"your-64-char-hex-key\"\nBASE_URL = \"https://sellia.example.com/api/admin\"\n\nheaders = {\n    \"Authorization\": f\"Bearer {ADMIN_KEY}\",\n    \"Content-Type\": \"application/json\"\n}\n\n# List reserved subdomains\nresponse = requests.get(f\"{BASE_URL}/reserved\", headers=headers)\nprint(response.json())\n\n# Add reserved subdomain\ndata = {\"subdomain\": \"mycompany\", \"reason\": \"Company name\"}\nresponse = requests.post(f\"{BASE_URL}/reserved\", headers=headers, json=data)\nprint(response.json())\n\n# Create API key\ndata = {\"name\": \"Service Key\", \"is_master\": False}\nresponse = requests.post(f\"{BASE_URL}/api-keys\", headers=headers, json=data)\nkey_data = response.json()\nprint(f\"New key: {key_data['key']}\")\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#javascriptnodejs","level":3,"title":"JavaScript/Node.js","text":"<pre><code>const ADMIN_KEY = 'your-64-char-hex-key';\nconst BASE_URL = 'https://sellia.example.com/api/admin';\n\nconst headers = {\n  'Authorization': `Bearer ${ADMIN_KEY}`,\n  'Content-Type': 'application/json'\n};\n\n// List reserved subdomains\nfetch(`${BASE_URL}/reserved`, { headers })\n  .then(r =&gt; r.json())\n  .then(console.log);\n\n// Add reserved subdomain\nfetch(`${BASE_URL}/reserved`, {\n  method: 'POST',\n  headers,\n  body: JSON.stringify({\n    subdomain: 'mycompany',\n    reason: 'Company name'\n  })\n})\n  .then(r =&gt; r.json())\n  .then(console.log);\n\n// Create API key\nfetch(`${BASE_URL}/api-keys`, {\n  method: 'POST',\n  headers,\n  body: JSON.stringify({\n    name: 'Service Key',\n    is_master: false\n  })\n})\n  .then(r =&gt; r.json())\n  .then(data =&gt; console.log(`New key: ${data.key}`));\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#ruby","level":3,"title":"Ruby","text":"<pre><code>require 'net/http'\nrequire 'json'\nrequire 'uri'\n\nADMIN_KEY = 'your-64-char-hex-key'\nBASE_URL = 'https://sellia.example.com/api/admin'\n\ndef headers\n  {\n    'Authorization' =&gt; \"Bearer #{ADMIN_KEY}\",\n    'Content-Type' =&gt; 'application/json'\n  }\nend\n\n# List reserved subdomains\nuri = URI(\"#{BASE_URL}/reserved\")\nresponse = Net::HTTP.get(uri, headers)\nputs JSON.parse(response)\n\n# Add reserved subdomain\nuri = URI(\"#{BASE_URL}/reserved\")\nreq = Net::HTTP::Post.new(uri, headers)\nreq.body = { subdomain: 'mycompany', reason: 'Company name' }.to_json\nres = Net::HTTP.start(uri.hostname, uri.port, use_ssl: true) { |http| http.request(req) }\nputs res.body\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#go","level":3,"title":"Go","text":"<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"encoding/json\"\n    \"fmt\"\n    \"io\"\n    \"net/http\"\n)\n\nconst (\n    ADMIN_KEY = \"your-64-char-hex-key\"\n    BASE_URL  = \"https://sellia.example.com/api/admin\"\n)\n\nfunc main() {\n    client := &amp;http.Client{}\n\n    // List reserved subdomains\n    req, _ := http.NewRequest(\"GET\", BASE_URL+\"/reserved\", nil)\n    req.Header.Set(\"Authorization\", \"Bearer \"+ADMIN_KEY)\n    resp, _ := client.Do(req)\n    defer resp.Body.Close()\n    body, _ := io.ReadAll(resp.Body)\n    fmt.Println(string(body))\n\n    // Add reserved subdomain\n    data := map[string]string{\"subdomain\": \"mycompany\", \"reason\": \"Company name\"}\n    jsonData, _ := json.Marshal(data)\n    req, _ = http.NewRequest(\"POST\", BASE_URL+\"/reserved\", bytes.NewBuffer(jsonData))\n    req.Header.Set(\"Authorization\", \"Bearer \"+ADMIN_KEY)\n    req.Header.Set(\"Content-Type\", \"application/json\")\n    resp, _ = client.Do(req)\n    defer resp.Body.Close()\n    body, _ = io.ReadAll(resp.Body)\n    fmt.Println(string(body))\n}\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#rate-limiting","level":2,"title":"Rate Limiting","text":"<p>As of the current version, the Admin API does not enforce rate limiting. However, best practices include:</p> <ul> <li>Implementing client-side rate limiting for automation</li> <li>Using linear backoff for retries</li> <li>Monitoring API usage for abuse detection</li> </ul>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#error-handling","level":2,"title":"Error Handling","text":"<p>Always check the HTTP status code and response body:</p> <pre><code>response = requests.post(url, headers=headers, json=data)\n\nif response.status_code == 401:\n    print(\"Authentication failed - check your API key\")\nelif response.status_code == 409:\n    error = response.json()['error']\n    print(f\"Conflict: {error}\")\nelif response.status_code == 201:\n    print(\"Success!\")\nelse:\n    print(f\"Unexpected status: {response.status_code}\")\n    print(response.text)\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#webhook-support-future","level":2,"title":"Webhook Support (Future)","text":"<p>Future versions may include webhook notifications for events like:</p> <ul> <li>New tunnel created</li> <li>Tunnel disconnected</li> <li>API key created/revoked</li> <li>Reserved subdomain added/removed</li> </ul> <p>Check the server documentation for webhook capabilities.</p>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#curl-ssl-certificate-problem","level":3,"title":"cURL: SSL Certificate Problem","text":"<pre><code>SSL certificate problem: unable to get local issuer certificate\n</code></pre> <p>Solution: For development only, disable SSL verification (not recommended for production):</p> <pre><code>curl -k https://sellia.example.com/api/admin/reserved\n</code></pre> <p>Or add the CA certificate:</p> <pre><code>curl --cacert /path/to/ca.crt https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#401-unauthorized-despite-valid-key","level":3,"title":"401 Unauthorized Despite Valid Key","text":"<p>Possible causes:</p> <ol> <li>Key is not a master key</li> <li>Database not available on server</li> <li>Wrong server URL</li> </ol> <p>Debug:</p> <pre><code># Check if key is master\ncurl -H \"Authorization: Bearer $KEY\" \\\n  https://sellia.example.com/api/admin/api-keys\n\n# Should return list of keys if master\n# Should return 401 if standard key\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#503-service-unavailable","level":3,"title":"503 Service Unavailable","text":"<pre><code>{\"error\":\"Database not available\"}\n</code></pre> <p>Cause: Server started without database or database file missing.</p> <p>Solution:</p> <pre><code># Check database file\nls -la /var/lib/sellia/sellia.db\n\n# Restart server with database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server restart\n</code></pre>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/admin-api/#see-also","level":2,"title":"See Also","text":"<ul> <li>Reserved Subdomains - Managing reserved subdomains via CLI</li> <li>API Key Management - Managing API keys via CLI</li> <li>Server Auth - Authentication configuration</li> <li>Database Schema - Database table definitions</li> </ul>","path":["01 user","Admin","Admin API"],"tags":[]},{"location":"01-user/admin/api-key-management/","level":1,"title":"API Key Management","text":"<p>Create, list, and revoke API keys for tunnel access and admin operations using the <code>sellia admin api-keys</code> command.</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#overview","level":2,"title":"Overview","text":"<p>API keys control access to your Sellia server. There are two types:</p> <ol> <li>Standard keys - For tunnel creation and basic operations</li> <li>Master keys - For admin API access and key management</li> </ol> <p>All management operations require authentication with a master key.</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before managing API keys, ensure:</p> <ol> <li>Server is running with database enabled</li> <li>You have a master key for authentication</li> <li>Admin API is accessible</li> </ol> <pre><code># Check server has database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server start\n\n# Set your admin key\nexport SELLIA_ADMIN_API_KEY=\"your-master-key\"\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#commands","level":2,"title":"Commands","text":"","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#sellia-admin-api-keys-list","level":3,"title":"<code>sellia admin api-keys list</code>","text":"<p>List all API keys in the database.</p> <p>Usage:</p> <pre><code>sellia admin api-keys list\n</code></pre> <p>Optional flags:</p> <pre><code>--server URL    # Server URL (default: from config)\n</code></pre> <p>Example output:</p> <pre><code>API Keys: (3)\n\n  a1b2c3d4  Development Key                    (master)\n    Created: 2024-01-15 10:30\n  e5f6g7h8  Production API\n    Created: 2024-01-20 14:22\n  i9j0k1l2  Staging Key                        (revoked)\n    Created: 2024-01-10 09:15\n</code></pre> <p>Note: The name column is left-aligned and 20 characters wide. If a key has no name, only the prefix and flags are shown.</p> <p>Output fields:</p> <ul> <li><code>key_prefix</code> - First 8 characters of the key (for identification)</li> <li><code>name</code> - Friendly name provided when created</li> <li><code>(master)</code> - Master key with admin access</li> <li><code>(revoked)</code> - Key is no longer valid</li> <li><code>Created</code> - Timestamp when key was created</li> </ul> <p>When to use:</p> <ul> <li>Auditing who has access to your server</li> <li>Finding the prefix for revoking a key</li> <li>Checking if a key is a master key</li> <li>Verifying key status</li> </ul>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#sellia-admin-api-keys-create","level":3,"title":"<code>sellia admin api-keys create</code>","text":"<p>Create a new API key.</p> <p>Usage:</p> <pre><code># Standard key\nsellia admin api-keys create --name \"User Key\"\n\n# Master key\nsellia admin api-keys create --name \"Admin Key\" --master\n\n# With custom server\nsellia admin api-keys create --name \"Dev Key\" --server https://sellia.example.com\n</code></pre> <p>Flags:</p> <pre><code>--name NAME      # Friendly name for the key (optional)\n--master         # Create a master key with admin access (optional)\n--server URL     # Server URL (default: from config)\n</code></pre> <p>Example output:</p> <pre><code>✓ API key created\n\n  Key:    9a8b7c6d5e4f3g2h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x7y8z9a0b1c2d3\n  Prefix: 9a8b7c6d\n  Name:   Development Key\n  Type:   Master (admin access)\n\nSave this key now - it won't be shown again!\n</code></pre> <p>Important: The full key is only shown once. Save it securely immediately.</p> <p>Best practices:</p> <ol> <li>Always provide a descriptive name</li> <li>Create separate keys for different users/environments</li> <li>Create master keys only for admin users</li> <li>Save the key in a secure password manager</li> <li>Communicate the key via secure channel (encrypted email, password manager, etc.)</li> </ol> <p>Creating keys for different purposes:</p> <pre><code># Development key\nsellia admin api-keys create --name \"Dev Team Key\"\n\n# Production key\nsellia admin api-keys create --name \"Production Service Key\"\n\n# CI/CD key\nsellia admin api-keys create --name \"GitHub Actions\"\n\n# Personal admin key\nsellia admin api-keys create --name \"Alice's Admin Key\" --master\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#sellia-admin-api-keys-revoke","level":3,"title":"<code>sellia admin api-keys revoke</code>","text":"<p>Revoke an API key by its prefix.</p> <p>Usage:</p> <pre><code>sellia admin api-keys revoke a1b2c3d4\n</code></pre> <p>Flags:</p> <pre><code>--server URL    # Server URL (default: from config)\n</code></pre> <p>Example output:</p> <pre><code>✓ API key 'a1b2c3d4' revoked\n</code></pre> <p>What happens:</p> <ol> <li>Key is marked as inactive in database (<code>active = 0</code>)</li> <li>Existing tunnels continue to run until disconnected</li> <li>New tunnel creation attempts with this key fail</li> <li>Key prefix still appears in listings with <code>(revoked)</code> flag</li> </ol> <p>When to use:</p> <ul> <li>User leaves the organization</li> <li>Key is compromised or leaked</li> <li>Rotating to a new key</li> <li>Service is decommissioned</li> </ul> <p>Key rotation workflow:</p> <pre><code># Step 1: Create new key\nsellia admin api-keys create --name \"New Key\"\n# Save: key_new_key_here\n\n# Step 2: Update all clients\n# Users run: sellia auth login\n# Enter new key\n\n# Step 3: Wait for transition period (e.g., 1 week)\n# Monitor logs to ensure all clients updated\n\n# Step 4: Revoke old key\nsellia admin api-keys revoke old_prefix\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#authentication-for-admin-commands","level":2,"title":"Authentication for Admin Commands","text":"","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#environment-variable","level":3,"title":"Environment Variable","text":"<pre><code>export SELLIA_ADMIN_API_KEY=\"key_master_key\"\nsellia admin api-keys list\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#config-file","level":3,"title":"Config File","text":"<pre><code># ~/.config/sellia/sellia.yml\napi_key: key_master_key\nserver: https://sellia.me\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#command-flag","level":3,"title":"Command Flag","text":"<pre><code>sellia admin api-keys list --server https://sellia.me\n# Prompts for API key if not set\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#auth-login-recommended","level":3,"title":"Auth Login (Recommended)","text":"<pre><code>sellia auth login\n# Enter master key when prompted\n\n# Now all admin commands work\nsellia admin api-keys list\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#key-types-and-permissions","level":2,"title":"Key Types and Permissions","text":"","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#standard-api-key","level":3,"title":"Standard API Key","text":"<p>Can: - Create tunnels - Request available subdomains - Access inspector features - Connect to WebSocket endpoints</p> <p>Cannot: - Access admin API - Create/revoke API keys - Manage reserved subdomains - View other users' tunnels</p> <p>Use cases: - Individual developers - Production services - CI/CD pipelines - Testing environments</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#master-api-key","level":3,"title":"Master API Key","text":"<p>Can do everything standard keys can, plus: - Access admin API endpoints - Create new API keys - Revoke API keys - Manage reserved subdomains - View all tunnels and statistics - Access server metrics</p> <p>Use cases: - Server administrators - DevOps engineers - Security auditors - Automated admin scripts</p> <p>Security considerations: - Treat master keys like root passwords - Never log master keys - Rotate regularly (90 days recommended) - Limit to as few users as possible - Use separate master keys for different environments</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#workflows","level":2,"title":"Workflows","text":"","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#onboarding-a-new-user","level":3,"title":"Onboarding a New User","text":"<pre><code># 1. Create a key for the new user\nsellia admin api-keys create --name \"Alice's Key\"\n\n# 2. Send key securely (e.g., via password manager)\n# Key: key_generated_key_here\n\n# 3. User authenticates\n# User runs: sellia auth login\n# User enters key\n\n# 4. User creates tunnels\nsellia http 3000 --subdomain alice-app\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#offboarding-a-user","level":3,"title":"Offboarding a User","text":"<pre><code># 1. List keys to find their prefix\nsellia admin api-keys list\n\n# 2. Revoke their key\nsellia admin api-keys revoke a1b2c3d4\n\n# 3. (Optional) Create audit log entry\necho \"$(date) Revoked key for Alice (a1b2c3d4)\" &gt;&gt; /var/log/sellia/access.log\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#setting-up-cicd","level":3,"title":"Setting Up CI/CD","text":"<pre><code># 1. Create a key for the CI system\nsellia admin api-keys create --name \"GitHub Actions - Production\"\n# Save key to CI/CD secrets (e.g., GitHub Secrets)\n\n# 2. In CI/CD pipeline\n# .github/workflows/deploy.yml\n- name: Create tunnel\n  run: |\n    sellia http 3000 --subdomain myapp-${{ github.sha }}\n  env:\n    SELLIA_API_KEY: ${{ secrets.SELLIA_API_KEY }}\n\n# 3. If compromised, rotate the key\nsellia admin api-keys revoke a1b2c3d4\nsellia admin api-keys create --name \"GitHub Actions - Production\"\n# Update CI/CD secret with new key\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#environment-separation","level":3,"title":"Environment Separation","text":"<pre><code># Development\nsellia admin api-keys create --name \"Dev Key\"\n# Distribute to dev team\n\n# Staging\nsellia admin api-keys create --name \"Staging Key\"\n# Use for staging environment\n\n# Production\nsellia admin api-keys create --name \"Production Key\"\n# Strict access control, audit logging\n\n# Admin\nsellia admin api-keys create --name \"Ops Admin\" --master\n# For operations team only\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#database-schema","level":2,"title":"Database Schema","text":"<p>API keys are stored in the <code>api_keys</code> table:</p> <pre><code>CREATE TABLE api_keys (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    key_hash TEXT NOT NULL UNIQUE,\n    key_prefix TEXT NOT NULL,\n    name TEXT,\n    is_master BOOLEAN NOT NULL DEFAULT 0,\n    active BOOLEAN NOT NULL DEFAULT 1,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_used_at TEXT\n);\n</code></pre> <p>Fields:</p> <ul> <li><code>key_hash</code> - SHA-256 hash of the key (plaintext key never stored)</li> <li><code>key_prefix</code> - First 8 characters (for identification)</li> <li><code>name</code> - Friendly name</li> <li><code>is_master</code> - True if master key</li> <li><code>active</code> - False if revoked</li> <li><code>created_at</code> - Timestamp when created</li> <li><code>last_used_at</code> - Timestamp of last tunnel creation</li> </ul> <p>Indexes:</p> <pre><code>CREATE INDEX idx_api_keys_prefix ON api_keys(key_prefix);\nCREATE INDEX idx_api_keys_active ON api_keys(active) WHERE active = 1;\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#principle-of-least-privilege","level":3,"title":"Principle of Least Privilege","text":"<ul> <li>Use standard keys for tunnel operations</li> <li>Reserve master keys for admin tasks only</li> <li>Create separate keys per environment (dev/staging/prod)</li> <li>Create separate keys per service/team</li> </ul>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#key-storage","level":3,"title":"Key Storage","text":"<p>Do: - Store in password managers (1Password, LastPass, etc.) - Use secret management systems (Vault, AWS Secrets Manager) - Set file permissions: <code>chmod 600</code> on config files - Use environment variables for CI/CD</p> <p>Don't: - Commit keys to version control - Share keys in email/chat - Log keys in output - Store in plaintext files</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#key-rotation","level":3,"title":"Key Rotation","text":"<p>Rotate keys periodically:</p> <pre><code>#!/bin/bash\n# rotate-key.sh - Rotate API keys\n\n# 1. Create new key\nNEW_KEY=$(sellia admin api-keys create --name \"Rotated Key\" | grep \"Key:\" | awk '{print $2}')\n\n# 2. Update all clients\n# (This varies by your setup - update config files, env vars, etc.)\n\n# 3. Wait for confirmation\nread -p \"Press Enter after updating all clients...\"\n\n# 4. Revoke old key\nsellia admin api-keys revoke $OLD_PREFIX\n\necho \"Key rotation complete\"\n</code></pre> <p>Recommended schedule: - Master keys: Every 90 days - Standard keys: Every 180 days - After any suspected compromise - When employee leaves organization</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#audit-logging","level":3,"title":"Audit Logging","text":"<p>Maintain an audit trail:</p> <pre><code># Log all key operations\naudit() {\n  echo \"$(date) $@\" &gt;&gt; /var/log/sellia/audit.log\n}\n\nsellia admin api-keys create --name \"New Key\"\naudit \"API key created: New Key\"\n\nsellia admin api-keys revoke a1b2c3d4\naudit \"API key revoked: a1b2c3d4\"\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#database-not-available-error","level":3,"title":"\"Database Not Available\" Error","text":"<pre><code>Error: Database not available on server\n</code></pre> <p>Cause: Server started without database.</p> <p>Solution:</p> <pre><code># Start server with database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server start\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#unauthorized-admin-api-key-required","level":3,"title":"\"Unauthorized: Admin API Key Required\"","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <p>Cause: Using a standard key instead of a master key.</p> <p>Solution:</p> <pre><code># Check if your key is a master key\nsellia admin api-keys list\n\n# Create a master key if needed\nsellia admin api-keys create --master --name \"Admin Key\"\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#key-not-found","level":3,"title":"Key Not Found","text":"<pre><code>Error: API key 'a1b2c3d4' not found\n</code></pre> <p>Cause: Trying to revoke a key that doesn't exist.</p> <p>Solution:</p> <pre><code># List keys to find correct prefix\nsellia admin api-keys list\n\n# Revoke with correct prefix\nsellia admin api-keys revoke correct_prefix\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#accidentally-revoked-active-key","level":3,"title":"Accidentally Revoked Active Key","text":"<p>If you revoke the wrong key:</p> <pre><code># If you have the full key, you can re-add it\nsellia admin api-keys create --name \"Restored Key\"\n# But you'll need the original full key plaintext\n\n# Better: Create a new key and update clients\nsellia admin api-keys create --name \"Replacement Key\"\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#http-api","level":2,"title":"HTTP API","text":"<p>All CLI commands are wrappers around the HTTP API. You can call it directly:</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#list-api-keys","level":3,"title":"List API Keys","text":"<pre><code>GET /api/admin/api-keys\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#create-api-key","level":3,"title":"Create API Key","text":"<pre><code>POST /api/admin/api-keys\nAuthorization: Bearer &lt;master-key&gt;\nContent-Type: application/json\n\n{\n  \"name\": \"My Key\",\n  \"is_master\": false\n}\n</code></pre>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#revoke-api-key","level":3,"title":"Revoke API Key","text":"<pre><code>DELETE /api/admin/api-keys/:prefix\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre> <p>See Admin API for full API reference.</p>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/api-key-management/#see-also","level":2,"title":"See Also","text":"<ul> <li>API Keys - API key concepts and types</li> <li>Auth Command - Client-side key management</li> <li>Server Auth - Server-side authentication</li> <li>Admin API - Complete HTTP API reference</li> </ul>","path":["01 user","Admin","API Key Management"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/","level":1,"title":"Reserved Subdomains","text":"<p>Reserved subdomains prevent users from claiming specific subdomains for tunnels. This is useful for protecting service URLs, brand names, or system endpoints.</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#overview","level":2,"title":"Overview","text":"<p>When a subdomain is reserved, tunnel clients cannot request it. The server will reject the request with an error:</p> <pre><code>Error: Subdomain 'api' is reserved\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#default-reserved-subdomains","level":2,"title":"Default Reserved Subdomains","text":"<p>Sellia ships with a default set of reserved subdomains:</p> <p>System services: - <code>api</code>, <code>www</code>, <code>admin</code>, <code>app</code>, <code>dashboard</code>, <code>console</code> - <code>mail</code>, <code>smtp</code>, <code>imap</code>, <code>pop</code>, <code>ftp</code>, <code>ssh</code>, <code>sftp</code></p> <p>Infrastructure: - <code>cdn</code>, <code>static</code>, <code>assets</code>, <code>media</code>, <code>images</code>, <code>files</code> - <code>auth</code>, <code>login</code>, <code>oauth</code>, <code>sso</code>, <code>account</code>, <code>accounts</code></p> <p>Business: - <code>billing</code>, <code>pay</code>, <code>payment</code>, <code>payments</code>, <code>subscribe</code> - <code>help</code>, <code>support</code>, <code>docs</code>, <code>documentation</code>, <code>status</code></p> <p>Development: - <code>blog</code>, <code>news</code>, <code>forum</code>, <code>community</code>, <code>dev</code>, <code>developer</code> - <code>test</code>, <code>staging</code>, <code>demo</code>, <code>sandbox</code>, <code>preview</code></p> <p>Protocols: - <code>ws</code>, <code>wss</code>, <code>socket</code>, <code>websocket</code>, <code>stream</code></p> <p>Development tools: - <code>git</code>, <code>svn</code>, <code>repo</code>, <code>registry</code>, <code>npm</code>, <code>pypi</code></p> <p>System: - <code>internal</code>, <code>private</code>, <code>public</code>, <code>local</code>, <code>localhost</code> - <code>root</code>, <code>system</code>, <code>server</code>, <code>servers</code>, <code>node</code>, <code>nodes</code></p> <p>Sellia-specific: - <code>sellia</code>, <code>tunnel</code>, <code>tunnels</code>, <code>proxy</code></p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#managing-reserved-subdomains","level":2,"title":"Managing Reserved Subdomains","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#list-reserved-subdomains","level":3,"title":"List Reserved Subdomains","text":"<p>View all reserved subdomains:</p> <pre><code>sellia admin reserved list\n</code></pre> <p>Example output:</p> <pre><code>Reserved Subdomains: (50)\n\n  api                            Default reserved subdomain  (default)\n  admin                          Default reserved subdomain  (default)\n  cdn                            Default reserved subdomain  (default)\n  ...\n  mycompany                      Company name\n  billing                        Payment system\n</code></pre> <p>Flags: - <code>(default)</code> - Shipped with Sellia, cannot be removed</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#add-a-reserved-subdomain","level":3,"title":"Add a Reserved Subdomain","text":"<p>Prevent users from claiming a specific subdomain:</p> <pre><code>sellia admin reserved add mycompany\n</code></pre> <p>With a reason (for documentation):</p> <pre><code>sellia admin reserved add billing --reason \"Payment processing service\"\n</code></pre> <p>Requirements:</p> <ul> <li>Minimum 3 characters</li> <li>Maximum 63 characters</li> <li>Only lowercase letters, numbers, and hyphens (case-insensitive, converted to lowercase)</li> <li>Must start and end with alphanumeric character</li> <li>No consecutive hyphens enforced by pattern matching</li> </ul> <p>Valid names: - <code>my-app</code> - <code>api-v2</code> - <code>service123</code></p> <p>Invalid names: - <code>-bad</code> (starts with hyphen) - <code>bad-</code> (ends with hyphen) - <code>ab</code> (too short) - (Uppercase is converted to lowercase, but mixed case allowed in input)</p> <p>Error examples:</p> <pre><code>Error: Subdomain 'ab' must be at least 3 characters\nError: Subdomain must be at most 63 characters\nError: Subdomain can only contain lowercase letters, numbers, and hyphens\nError: Subdomain 'mycompany' is already reserved\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#remove-a-reserved-subdomain","level":3,"title":"Remove a Reserved Subdomain","text":"<p>Allow users to claim a subdomain again:</p> <pre><code>sellia admin reserved remove mycompany\n</code></pre> <p>Output:</p> <pre><code>✓ Removed reserved subdomain 'mycompany'\n</code></pre> <p>Limitations:</p> <ul> <li>Default reserved subdomains (shipped with Sellia) cannot be removed</li> <li>Attempts to remove default subdomains return an error:</li> </ul> <pre><code>Error: Cannot remove default reserved subdomain\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#use-cases","level":2,"title":"Use Cases","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#protect-service-endpoints","level":3,"title":"Protect Service Endpoints","text":"<p>Reserve subdomains for your actual services:</p> <pre><code># Reserve service URLs\nsellia admin reserved add api --reason \"API gateway\"\nsellia admin reserved add admin --reason \"Admin panel\"\nsellia admin reserved add dashboard --reason \"Analytics dashboard\"\nsellia admin reserved add billing --reason \"Payment system\"\n</code></pre> <p>Now you can safely run these services without users conflicting:</p> <ul> <li><code>api.yourdomain.com</code> - Your API gateway</li> <li><code>admin.yourdomain.com</code> - Your admin panel</li> <li><code>dashboard.yourdomain.com</code> - Your analytics</li> <li>Users cannot claim these subdomains for tunnels</li> </ul>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#brand-protection","level":3,"title":"Brand Protection","text":"<p>Prevent typosquatting and protect your brand:</p> <pre><code>sellia admin reserved add mycompany\nsellia admin reserved add myco\nsellia admin reserved add my-company\nsellia admin reserved add mycompanyapp\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#future-planning","level":3,"title":"Future Planning","text":"<p>Reserve subdomains for planned features:</p> <pre><code>sellia admin reserved add blog --reason \"Coming soon\"\nsellia admin reserved add shop --reason \"E-commerce launch Q2\"\nsellia admin reserved add community --reason \"Forum planned\"\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#department-isolation","level":3,"title":"Department Isolation","text":"<p>Reserve subdomains for different teams:</p> <pre><code>sellia admin reserved add engineering\nsellia admin reserved add marketing\nsellia admin reserved add sales\nsellia admin reserved add support\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#subdomain-validation-rules","level":2,"title":"Subdomain Validation Rules","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#format-requirements","level":3,"title":"Format Requirements","text":"<p>Subdomains must follow RFC 1035 rules:</p> <ol> <li>Length: 3-63 characters</li> <li>Characters: a-z, 0-9, hyphen (-) (case-insensitive)</li> <li>No leading/trailing hyphens: <code>-myapp</code> or <code>myapp-</code> is invalid</li> <li>Case insensitive: <code>MyApp</code> → <code>myapp</code></li> </ol>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#pattern-matching","level":3,"title":"Pattern Matching","text":"<p>Server validation uses this regex (case-insensitive):</p> <pre><code>\\A[a-z0-9][a-z0-9-]*[a-z0-9]\\z/i\n</code></pre> <p>This allows: - Letters (a-z, case-insensitive) - Numbers (0-9) - Hyphens (-) in the middle - Must start and end with alphanumeric character</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#examples","level":3,"title":"Examples","text":"<p>Valid: - <code>myapp</code> - <code>my-app</code> - <code>app-v2</code> - <code>service123</code> - <code>MYAPP</code> (converted to lowercase: <code>myapp</code>)</p> <p>Invalid: - <code>-myapp</code> (starts with hyphen) - <code>myapp-</code> (ends with hyphen) - <code>ab</code> (too short) - <code>a</code> * 64 characters (too long)</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#database-schema","level":2,"title":"Database Schema","text":"<p>Reserved subdomains are stored in the <code>reserved_subdomains</code> table:</p> <pre><code>CREATE TABLE reserved_subdomains (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    subdomain TEXT NOT NULL UNIQUE,\n    reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    is_default BOOLEAN NOT NULL DEFAULT 0\n);\n</code></pre> <p>Fields:</p> <ul> <li><code>subdomain</code> - The reserved subdomain (unique)</li> <li><code>reason</code> - Optional reason/documentation</li> <li><code>is_default</code> - True if shipped with Sellia (cannot be removed)</li> <li><code>created_at</code> - Timestamp when reserved</li> </ul>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#server-integration","level":2,"title":"Server Integration","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#tunnel-registration","level":3,"title":"Tunnel Registration","text":"<p>When a client requests a subdomain:</p> <ol> <li>Client sends <code>TunnelRegister</code> message with desired subdomain</li> <li>Server checks <code>reserved_subdomains</code> table</li> <li>If reserved → reject with error</li> <li>If available → proceed with tunnel registration</li> </ol>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#real-time-updates","level":3,"title":"Real-time Updates","text":"<p>The server reloads reserved subdomains when:</p> <ol> <li>A subdomain is added via admin API</li> <li>A subdomain is removed via admin API</li> <li>Server starts (loads from database)</li> </ol> <p>No restart required - changes take effect immediately.</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#http-api","level":2,"title":"HTTP API","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#list-reserved-subdomains_1","level":3,"title":"List Reserved Subdomains","text":"<pre><code>GET /api/admin/reserved\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre> <p>Response:</p> <pre><code>[\n  {\n    \"subdomain\": \"api\",\n    \"reason\": \"Default reserved subdomain\",\n    \"is_default\": true,\n    \"created_at\": \"2024-01-01T00:00:00.000000Z\"\n  },\n  {\n    \"subdomain\": \"billing\",\n    \"reason\": \"Payment system\",\n    \"is_default\": false,\n    \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n  }\n]\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#add-reserved-subdomain","level":3,"title":"Add Reserved Subdomain","text":"<pre><code>POST /api/admin/reserved\nAuthorization: Bearer &lt;master-key&gt;\nContent-Type: application/json\n\n{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\"\n}\n</code></pre> <p>Response: 201 Created</p> <pre><code>{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\",\n  \"is_default\": false,\n  \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li>400 Bad Request - Invalid subdomain format</li> <li>409 Conflict - Already reserved</li> <li>401 Unauthorized - Not a master key</li> <li>503 Service Unavailable - Database not available</li> </ul>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#remove-reserved-subdomain","level":3,"title":"Remove Reserved Subdomain","text":"<pre><code>DELETE /api/admin/reserved/:subdomain\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre> <p>Response: 200 OK</p> <pre><code>{\n  \"message\": \"Reserved subdomain 'mycompany' removed\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li>403 Forbidden - Attempting to remove default reserved subdomain</li> <li>404 Not Found - Subdomain not in reserved list</li> <li>401 Unauthorized - Not a master key</li> <li>503 Service Unavailable - Database not available</li> </ul>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#reserve-early","level":3,"title":"Reserve Early","text":"<p>Add reserved subdomains before opening your server to users:</p> <pre><code># Initial setup script\n#!/bin/bash\n# Reserve company domains\nsellia admin reserved add mycompany\nsellia admin reserved add myco\nsellia admin reserved add my-company\n\n# Reserve service domains\nsellia admin reserved add api\nsellia admin reserved add admin\nsellia admin reserved add dashboard\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#document-reasons","level":3,"title":"Document Reasons","text":"<p>Always include reasons for custom reservations:</p> <pre><code>sellia admin reserved add billing --reason \"Stripe integration\"\nsellia admin reserved add legacy --reason \"Old system migration\"\n</code></pre> <p>This helps future administrators understand why each subdomain is reserved.</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#regular-audits","level":3,"title":"Regular Audits","text":"<p>Periodically review reserved subdomains:</p> <pre><code># List all with reasons\nsellia admin reserved list\n\n# Ask yourself:\n# - Is this still needed?\n# - Is the reason clear?\n# - Should we add anything new?\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#dont-over-reserve","level":3,"title":"Don't Over-Reserve","text":"<p>Reserving too many subdomains frustrates users:</p> <ul> <li>Do: Reserve actual services and brand names</li> <li>Don't: Reserve every possible word</li> </ul> <p>A good rule of thumb: Keep reserved subdomains under 100 for a typical installation.</p>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#subdomain-is-reserved-error","level":3,"title":"\"Subdomain is Reserved\" Error","text":"<p>User sees this error when trying to create a tunnel:</p> <pre><code>$ sellia http 3000 --subdomain api\nError: Subdomain 'api' is reserved\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Choose a different subdomain: <pre><code>sellia http 3000 --subdomain myapi\n</code></pre></p> </li> <li> <p>Check if the reservation is necessary: <pre><code>sellia admin reserved list | grep api\n</code></pre></p> </li> <li> <p>Remove reservation if not needed (non-default only): <pre><code>sellia admin reserved remove custom-reserved\n</code></pre></p> </li> </ol>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#database-not-available","level":3,"title":"Database Not Available","text":"<p>Admin commands fail with:</p> <pre><code>Error: Database not available on server\n</code></pre> <p>Cause: Server started without database enabled.</p> <p>Solution:</p> <pre><code># Start server with database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server start\n</code></pre>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#cannot-remove-default-subdomain","level":3,"title":"Cannot Remove Default Subdomain","text":"<p>Attempting to remove a default reserved subdomain:</p> <pre><code>$ sellia admin reserved remove api\nError: Cannot remove default reserved subdomain\n</code></pre> <p>Explanation: Default subdomains are protected and cannot be removed. This prevents accidentally opening security holes.</p> <p>Workaround: If you must use a default subdomain:</p> <ol> <li>Run your service on a different subdomain</li> <li>Or modify the server code to remove the default (not recommended)</li> </ol>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/admin/reserved-subdomains/#see-also","level":2,"title":"See Also","text":"<ul> <li>Admin API - Complete HTTP API reference</li> <li>API Key Management - Managing admin access</li> <li>Server Auth - Authentication configuration</li> <li>Path-Based Routing - Advanced routing features</li> </ul>","path":["01 user","Admin","Reserved Subdomains"],"tags":[]},{"location":"01-user/authentication/api-keys/","level":1,"title":"API Keys","text":"<p>API keys are used to authenticate tunnel clients with the Sellia server. They provide secure access control and enable features like reserved subdomains and admin operations.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#overview","level":2,"title":"Overview","text":"<p>API keys in Sellia serve several purposes:</p> <ol> <li>Authentication: Verify tunnel clients are authorized</li> <li>Access Control: Restrict server usage to authorized users</li> <li>Account Association: Link tunnels to accounts for management</li> <li>Admin Operations: Enable admin API access (master keys)</li> </ol>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-types","level":2,"title":"Key Types","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#standard-api-keys","level":3,"title":"Standard API Keys","text":"<p>Standard keys allow tunnel creation and basic operations:</p> <pre><code># Create via admin CLI or API\nsellia admin api-keys create --name \"My Development Key\"\n</code></pre> <p>Capabilities: - Create tunnels - Request subdomains - Basic tunnel operations</p> <p>Limitations: - Cannot access admin API - Cannot manage reserved subdomains - Cannot create/revoke other keys</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#master-api-keys","level":3,"title":"Master API Keys","text":"<p>Master keys have full administrative access:</p> <pre><code># Create master key\nsellia admin api-keys create --name \"Admin Key\" --master\n</code></pre> <p>Capabilities: - All standard key permissions - Access admin API endpoints - Create and revoke API keys - Manage reserved subdomains - View all tunnels and metrics</p> <p>Security Note: Treat master keys like passwords. Never share them or commit them to version control.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-format","level":2,"title":"Key Format","text":"<p>API keys are 64-character hexadecimal strings:</p> <pre><code>a1b2c3d4e5f67890abcdef1234567890abcdef1234567890abcdef1234567890\n</code></pre> <p>For identification, only the first 8 characters (prefix) are displayed in listings:</p> <pre><code>a1b2c3d4  (master)\n</code></pre>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-storage","level":2,"title":"Key Storage","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#client-side","level":3,"title":"Client-Side","text":"<p>API keys are stored in <code>~/.config/sellia/sellia.yml</code>:</p> <pre><code>api_key: a1b2c3d4e5f67890abcdef1234567890abcdef1234567890abcdef1234567890\nserver: https://sellia.me\n</code></pre> <p>Security: - File permissions should be <code>0600</code> (user read/write only) - Never commit to version control - Use environment variables for CI/CD</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#server-side","level":3,"title":"Server-Side","text":"<p>Only the SHA-256 hash of the key is stored:</p> <pre><code>key_hash: 2cf24dba5fb0a30e... (SHA-256 hash)\nkey_prefix: a1b2c3d4 (first 8 chars for identification)\n</code></pre> <p>The raw API key is never stored and only shown once during creation.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#obtaining-an-api-key","level":2,"title":"Obtaining an API Key","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#from-a-server-admin","level":3,"title":"From a Server Admin","text":"<p>Contact your Sellia server administrator to request an API key. They can create one for you using the admin CLI.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#self-hosted-servers","level":3,"title":"Self-Hosted Servers","text":"<p>If you're running your own server, generate a master key:</p> <pre><code># Set master key in server config or environment\nexport SELLIA_MASTER_KEY=\"your-generated-key-here\"\n</code></pre> <p>Then use that key to create additional keys via the admin API.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#using-api-keys","level":2,"title":"Using API Keys","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#environment-variable","level":3,"title":"Environment Variable","text":"<pre><code>export SELLIA_API_KEY=\"a1b2c3d4e5f6...\"\nsellia http 3000\n</code></pre>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#config-file","level":3,"title":"Config File","text":"<pre><code># ~/.config/sellia/sellia.yml\napi_key: a1b2c3d4e5f6...\nserver: https://sellia.me\n</code></pre>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#command-line-flag","level":3,"title":"Command Line Flag","text":"<pre><code>sellia http 3000 --api-key a1b2c3d4e5f6...\n</code></pre>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#auth-login-recommended","level":3,"title":"Auth Login (Recommended)","text":"<pre><code>sellia auth login\n# Enter 64-character hex API key when prompted\n</code></pre> <p>This saves the key securely to your config file.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-management","level":2,"title":"Key Management","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#viewing-your-keys","level":3,"title":"Viewing Your Keys","text":"<p>List all API keys (requires admin access):</p> <pre><code>sellia admin api-keys list\n</code></pre> <p>Output: <pre><code>API Keys: (3)\n\n  a1b2c3d4  Development Key                    (master)\n  e5f6g7h8  Production API\n  i9j0k1l2  Staging Key        (revoked)\n</code></pre></p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#creating-keys","level":3,"title":"Creating Keys","text":"<p>Create a standard key:</p> <pre><code>sellia admin api-keys create --name \"Production API\"\n</code></pre> <p>Create a master key:</p> <pre><code>sellia admin api-keys create --name \"Admin Key\" --master\n</code></pre> <p>Important: Save the key immediately. It won't be shown again.</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#revoking-keys","level":3,"title":"Revoking Keys","text":"<p>Revoke a key by its prefix:</p> <pre><code>sellia admin api-keys revoke a1b2c3d4\n</code></pre> <p>Revoked keys cannot be used to create new tunnels (existing tunnels continue until they disconnect).</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-rotation","level":3,"title":"Key Rotation","text":"<p>Regularly rotate API keys:</p> <ol> <li>Create a new key</li> <li>Update all clients to use the new key</li> <li>Revoke the old key</li> </ol> <pre><code># Step 1: Create new key\nsellia admin api-keys create --name \"New Key\"\n# Save the key: key_newkey...\n\n# Step 2: Update clients\nsellia auth login\n# Enter new key\n\n# Step 3: Revoke old key\nsellia admin api-keys revoke a1b2c3d4\n</code></pre>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#principle-of-least-privilege","level":3,"title":"Principle of Least Privilege","text":"<ul> <li>Use standard keys for normal tunnel operations</li> <li>Reserve master keys for admin tasks only</li> <li>Create separate keys for different environments (dev, staging, prod)</li> </ul>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-storage_1","level":3,"title":"Key Storage","text":"<p>Do: - Store keys in environment variables for CI/CD - Use secret management tools (Vault, AWS Secrets Manager, etc.) - Set proper file permissions on config files (<code>chmod 600</code>)</p> <p>Don't: - Commit keys to version control - Share keys in email or chat - Log keys in output or error messages - Use keys in URLs (they may be logged)</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#detecting-compromised-keys","level":3,"title":"Detecting Compromised Keys","text":"<p>Signs a key may be compromised:</p> <ul> <li>Unexpected tunnels appearing</li> <li>Spike in traffic from unknown locations</li> <li>Failed authentication attempts in server logs</li> </ul> <p>If you suspect compromise:</p> <ol> <li>Immediately revoke the key</li> <li>Create a new key</li> <li>Update all legitimate clients</li> <li>Investigate the source of the leak</li> </ol>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#authentication-flow","level":2,"title":"Authentication Flow","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#tunnel-connection","level":3,"title":"Tunnel Connection","text":"<ol> <li>Client connects to server via WebSocket</li> <li>Client sends authentication message with API key</li> <li>Server validates key against database or master key</li> <li>Server returns account ID and tunnel registration</li> <li>Tunnel is established</li> </ol>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#admin-api","level":3,"title":"Admin API","text":"<ol> <li>Client makes HTTP request with <code>Authorization: Bearer &lt;key&gt;</code> or <code>X-API-Key: &lt;key&gt;</code></li> <li>Server validates key is a master key</li> <li>Server checks key is active (not revoked)</li> <li>Request is processed</li> </ol>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#invalid-api-key","level":3,"title":"Invalid API Key","text":"<pre><code>Error: Authentication failed: Invalid API key\n</code></pre> <p>Solutions: - Verify key is correct (check for typos) - Ensure key hasn't been revoked - Check you're using the right server URL</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#unauthorized-for-admin-operations","level":3,"title":"Unauthorized for Admin Operations","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <p>Solutions: - Verify the key is a master key (check with <code>sellia admin api-keys list</code>) - Create a new master key if needed</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#key-not-found-after-login","level":3,"title":"Key Not Found After Login","text":"<pre><code>sellia auth status\n# Status: Not logged in\n</code></pre> <p>Solutions: - Check <code>~/.config/sellia/sellia.yml</code> exists - Verify the file contains <code>api_key:</code> - Try logging in again</p>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/api-keys/#see-also","level":2,"title":"See Also","text":"<ul> <li>Auth Command - Saving and managing API keys</li> <li>Server Auth - Server-side authentication configuration</li> <li>Admin API - Admin API reference</li> <li>API Key Management - Creating and revoking keys</li> </ul>","path":["01 user","Authentication","API Keys"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/","level":1,"title":"Auth Command","text":"<p>The <code>sellia auth</code> command manages your API key authentication with Sellia servers. Use it to save, view, and remove your API credentials.</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#commands","level":2,"title":"Commands","text":"","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#sellia-auth-login","level":3,"title":"<code>sellia auth login</code>","text":"<p>Save your API key for authentication.</p> <p>Usage:</p> <pre><code>sellia auth login\n</code></pre> <p>What it does:</p> <ol> <li>Prompts you to enter your API key</li> <li>Saves the key to <code>~/.config/sellia/sellia.yml</code></li> <li>Creates the config directory if it doesn't exist</li> <li>Merges with any existing configuration</li> </ol> <p>Example:</p> <pre><code>$ sellia auth login\nAPI Key: a1b2c3d4e5f6...\n✓ API key saved to /home/user/.config/sellia/sellia.yml\n</code></pre> <p>Config file created:</p> <pre><code># ~/.config/sellia/sellia.yml\napi_key: a1b2c3d4e5f6...\nserver: https://sellia.me\n</code></pre> <p>When to use:</p> <ul> <li>Setting up Sellia for the first time</li> <li>After receiving an API key from your server admin</li> <li>Rotating to a new API key</li> </ul>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#sellia-auth-logout","level":3,"title":"<code>sellia auth logout</code>","text":"<p>Remove your saved API key.</p> <p>Usage:</p> <pre><code>sellia auth logout\n</code></pre> <p>What it does:</p> <ol> <li>Reads your config file</li> <li>Removes the <code>api_key</code> field</li> <li>Writes the updated config back to disk</li> <li>If config parsing fails, deletes the entire file</li> </ol> <p>Example:</p> <pre><code>$ sellia auth logout\n✓ Logged out (API key removed)\n</code></pre> <p>When to use:</p> <ul> <li>Revoking your old API key</li> <li>Switching to a different account</li> <li>Decommissioning a development machine</li> </ul> <p>Note: This doesn't revoke the key on the server. Use <code>sellia admin api-keys revoke</code> for that.</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#sellia-auth-status","level":3,"title":"<code>sellia auth status</code>","text":"<p>Show your current authentication status.</p> <p>Usage:</p> <pre><code>sellia auth status\n</code></pre> <p>What it shows:</p> <ul> <li>Whether you're logged in</li> <li>The server URL you're authenticated with</li> <li>A masked version of your API key (first 4 and last 4 characters)</li> </ul> <p>Examples:</p> <p>Logged in:</p> <pre><code>$ sellia auth status\nStatus: Logged in\nServer: https://sellia.me\nAPI Key: sk_l...1234\n</code></pre> <p>Not logged in:</p> <pre><code>$ sellia auth status\nStatus: Not logged in\nServer: https://sellia.me\n\nRun 'sellia auth login' to authenticate\n</code></pre> <p>When to use:</p> <ul> <li>Verifying your credentials before creating tunnels</li> <li>Troubleshooting authentication issues</li> <li>Checking which server you're configured to use</li> </ul>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#authentication-methods","level":2,"title":"Authentication Methods","text":"<p>The auth command is just one way to provide your API key. Sellia checks multiple sources in order of priority:</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#priority-order","level":3,"title":"Priority Order","text":"<ol> <li> <p>Environment variable (highest priority)    <pre><code>export SELLIA_API_KEY=\"key_...\"\nsellia http 3000\n</code></pre></p> </li> <li> <p>Command-line flag <pre><code>sellia http 3000 --api-key key_...\n</code></pre></p> </li> <li> <p>Config file (set by <code>auth login</code>)    <pre><code># ~/.config/sellia/sellia.yml\napi_key: key_...\n</code></pre></p> </li> </ol> <p>The first value found is used. Environment variables override config files.</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#recommended-approach","level":3,"title":"Recommended Approach","text":"<p>Development: Use <code>auth login</code> for convenience <pre><code>sellia auth login\nsellia http 3000  # Uses saved key\n</code></pre></p> <p>CI/CD: Use environment variables <pre><code>export SELLIA_API_KEY=\"${{ secrets.SELLIA_API_KEY }}\"\nsellia http 3000\n</code></pre></p> <p>One-off tunnels: Use command-line flag <pre><code>sellia http 3000 --api-key key_...\n</code></pre></p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#config-file-locations","level":2,"title":"Config File Locations","text":"<p>The auth command saves to <code>~/.config/sellia/sellia.yml</code>, but Sellia loads config from multiple locations:</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#load-order-low-to-high-priority","level":3,"title":"Load Order (low to high priority)","text":"<ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current directory)</li> <li>Environment variables (highest priority)</li> </ol> <p>Later configs override earlier ones. This allows for per-project overrides.</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#example-per-project-config","level":3,"title":"Example: Per-Project Config","text":"<p>Global config: <pre><code># ~/.config/sellia/sellia.yml\napi_key: key_global_key\nserver: https://sellia.me\n</code></pre></p> <p>Project override: <pre><code># ./sellia.yml\napi_key: key_project_key\ntunnels:\n  app:\n    port: 3000\n</code></pre></p> <p>Result: The project-specific key is used when running from that directory.</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#api-key-required-error","level":3,"title":"\"API key required\" Error","text":"<pre><code>Error: API key required\n</code></pre> <p>Cause: No API key found in any source.</p> <p>Solutions:</p> <ol> <li> <p>Check your auth status:    <pre><code>sellia auth status\n</code></pre></p> </li> <li> <p>Log in if needed:    <pre><code>sellia auth login\n</code></pre></p> </li> <li> <p>Or provide via environment variable:    <pre><code>export SELLIA_API_KEY=\"your-key\"\n</code></pre></p> </li> </ol>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#config-file-not-found","level":3,"title":"Config File Not Found","text":"<p>After running <code>auth login</code>, you get \"Not logged in\" from <code>auth status</code>.</p> <p>Possible causes:</p> <ol> <li>File permissions issue</li> <li>Config directory not writable</li> <li>Disk full</li> </ol> <p>Debug steps:</p> <pre><code># Check if config directory exists\nls -la ~/.config/sellia/\n\n# Check file permissions\ncat ~/.config/sellia/sellia.yml\n\n# Try manually creating directory\nmkdir -p ~/.config/sellia\nchmod 755 ~/.config/sellia\n</code></pre>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#wrong-server","level":3,"title":"Wrong Server","text":"<pre><code>$ sellia auth status\nStatus: Logged in\nServer: https://old-server.example\n</code></pre> <p>Solution: The server URL is also saved in config. You can override it:</p> <pre><code># Via environment variable\nexport SELLIA_SERVER=\"https://new-server.example\"\n\n# Or edit the config file directly\nnano ~/.config/sellia/sellia.yml\n</code></pre>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#multiple-keys-conflict","level":3,"title":"Multiple Keys Conflict","text":"<p>If you have keys in multiple sources, you might be confused about which is being used.</p> <p>Check what's being used:</p> <pre><code># Check environment variables\necho $SELLIA_API_KEY\n\n# Check global config\ncat ~/.config/sellia/sellia.yml\n\n# Check local config\ncat ./sellia.yml\n</code></pre> <p>Clear conflicting sources:</p> <pre><code># Unset environment variable\nunset SELLIA_API_KEY\n\n# Remove local config\nrm ./sellia.yml\n\n# Now only global config is used\n</code></pre>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#security-considerations","level":2,"title":"Security Considerations","text":"","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#config-file-permissions","level":3,"title":"Config File Permissions","text":"<p>The auth command creates the config with default permissions. On Unix-like systems, you should restrict access:</p> <pre><code>chmod 600 ~/.config/sellia/sellia.yml\n</code></pre> <p>This allows only you (the file owner) to read and write the file.</p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#shared-machines","level":3,"title":"Shared Machines","text":"<p>On shared or multi-user systems:</p> <ol> <li>Don't use auth login - it saves to disk</li> <li> <p>Use environment variables instead:    <pre><code>export SELLIA_API_KEY=\"your-key\"\nsellia http 3000\nunset SELLIA_API_KEY  # Clear when done\n</code></pre></p> </li> <li> <p>Or use command-line flag (not saved in shell history):    <pre><code>sellia http 3000 --api-key \"your-key\"\n</code></pre></p> </li> </ol>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#version-control","level":3,"title":"Version Control","text":"<p>Never commit the config file. Add to <code>.gitignore</code>:</p> <pre><code>echo \".config/sellia/\" &gt;&gt; ~/.gitignore\necho \"sellia.yml\" &gt;&gt; .gitignore  # For project-specific configs\n</code></pre>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#integration-with-other-tools","level":2,"title":"Integration with Other Tools","text":"","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#docker","level":3,"title":"Docker","text":"<pre><code># Don't use auth login in Docker\n# Instead, use environment variables\n\nENV SELLIA_API_KEY=${SELLIA_API_KEY}\n</code></pre> <pre><code>docker run -e SELLIA_API_KEY=\"your-key\" sellia http 3000\n</code></pre>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#systemd","level":3,"title":"Systemd","text":"<pre><code># /etc/systemd/system/sellia.service\n[Service]\nEnvironment=\"SELLIA_API_KEY=your-key\"\nExecStart=/usr/local/bin/sellia start\n</code></pre>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#cicd","level":3,"title":"CI/CD","text":"<p>GitHub Actions: <pre><code>- name: Create tunnel\n  run: sellia http 3000\n  env:\n    SELLIA_API_KEY: ${{ secrets.SELLIA_API_KEY }}\n</code></pre></p> <p>GitLab CI: <pre><code>create_tunnel:\n  script:\n    - sellia http 3000\n  variables:\n    SELLIA_API_KEY: $SELLIA_API_KEY\n</code></pre></p>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/authentication/sellia-auth-command/#see-also","level":2,"title":"See Also","text":"<ul> <li>API Keys - Understanding API key types and usage</li> <li>Server Auth - Server-side authentication</li> <li>Configuration - Full config file reference</li> </ul>","path":["01 user","Authentication","Auth Command"],"tags":[]},{"location":"01-user/cli-reference/","level":1,"title":"CLI Reference","text":"<p>Complete command-line interface reference for Sellia.</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#overview","level":2,"title":"Overview","text":"<p>Reference documentation for all Sellia CLI commands and options.</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#cli-commands","level":2,"title":"CLI Commands","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#sellia","level":3,"title":"sellia","text":"<p>Main CLI client for creating tunnels.</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#sellia-server","level":3,"title":"sellia-server","text":"<p>Tunnel server for hosting tunnels.</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#sellia-commands","level":2,"title":"sellia Commands","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#http","level":3,"title":"http","text":"<p>Create HTTP tunnel to local port.</p> <pre><code>sellia http &lt;port&gt; [options]\n</code></pre> <p>Arguments: - <code>port</code> - Local port to expose (required)</p> <p>Options:</p> Option Short Description Default <code>--subdomain NAME</code> <code>-s</code> Request specific subdomain Random <code>--auth USER:PASS</code> <code>-a</code> Enable basic auth protection None <code>--host HOST</code> <code>-H</code> Local host to forward to localhost <code>--api-key KEY</code> <code>-k</code> API key for authentication None <code>--inspector-port PORT</code> <code>-i PORT</code> Inspector UI port 4040 <code>--open</code> <code>-o</code> Open inspector in browser false <code>--no-inspector</code> Disable request inspector false <code>--server URL</code> Tunnel server URL From config or https://sellia.me <p>Examples:</p> <pre><code># Basic tunnel\nsellia http 3000\n\n# Custom subdomain\nsellia http 3000 --subdomain myapp\n\n# With authentication\nsellia http 3000 --auth admin:secret\n\n# Specify local host\nsellia http 3000 --host 127.0.0.1\n\n# Using hosted server\nsellia http 3000 --server https://sellia.me\n\n# Auto-open inspector\nsellia http 3000 --open\n\n# Custom inspector port\nsellia http 3000 --inspector-port 5000\n\n# Disable inspector\nsellia http 3000 --no-inspector\n\n# Full example\nsellia http 3000 \\\n  --subdomain myapp \\\n  --auth admin:secret123 \\\n  --server https://sellia.me \\\n  --api-key your-api-key \\\n  --open\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#start","level":3,"title":"start","text":"<p>Start tunnels from config file.</p> <pre><code>sellia start [options]\n</code></pre> <p>Options:</p> Option Description Default <code>--config PATH</code> Path to config file ./sellia.yml <p>Examples:</p> <pre><code># Start with default config\nsellia start\n\n# Start with specific config\nsellia start --config config/tunnels.yml\n\n# Start with environment-specific config\nsellia start --config sellia.prod.yml\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#auth","level":3,"title":"auth","text":"<p>Manage authentication.</p> <pre><code>sellia auth &lt;subcommand&gt; [options]\n</code></pre> <p>Subcommands:</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#auth-login","level":4,"title":"auth login","text":"<p>Store API key for server.</p> <pre><code>sellia auth login &lt;api-key&gt;\n</code></pre> <p>Example:</p> <pre><code>sellia auth login your-api-key-here\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#auth-logout","level":4,"title":"auth logout","text":"<p>Remove stored API key.</p> <pre><code>sellia auth logout\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#version","level":3,"title":"version","text":"<p>Show version information.</p> <pre><code>sellia version\n</code></pre> <p>Output:</p> <pre><code>sellia version 0.1.0\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#help","level":3,"title":"help","text":"<p>Show help information.</p> <pre><code>sellia help [command]\n</code></pre> <p>Examples:</p> <pre><code># General help\nsellia help\n\n# Command-specific help\nsellia help http\nsellia help start\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#sellia-server-commands","level":2,"title":"sellia-server Commands","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#server-options","level":3,"title":"Server Options","text":"<pre><code>sellia-server [options]\n</code></pre> <p>Options:</p> Option Description Default Environment Variable <code>--host HOST</code> Host to bind to 0.0.0.0 <code>SELLIA_HOST</code> <code>--port PORT</code> Port to listen on 3000 <code>SELLIA_PORT</code> <code>--domain DOMAIN</code> Base domain for subdomains Required <code>SELLIA_DOMAIN</code> <code>--require-auth</code> Require API key authentication false <code>SELLIA_REQUIRE_AUTH</code> <code>--master-key KEY</code> Master API key None <code>SELLIA_MASTER_KEY</code> <code>--https</code> Generate HTTPS URLs for tunnels false <code>SELLIA_USE_HTTPS</code> <code>--no-rate-limit</code> Disable rate limiting false <code>SELLIA_RATE_LIMITING</code> <p>Examples:</p> <pre><code># Basic server\nsellia-server --port 3000 --domain yourdomain.com\n\n# With authentication\nsellia-server \\\n  --port 3000 \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key your-master-key\n\n# Production server\nsellia-server \\\n  --host 0.0.0.0 \\\n  --port 3000 \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key $(openssl rand -hex 32) \\\n  --https\n\n# Development server\nLOG_LEVEL=debug sellia-server \\\n  --port 3000 \\\n  --domain localhost\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#client-variables","level":3,"title":"Client Variables","text":"<p>Variables for <code>sellia</code> CLI:</p> Variable Description Example <code>SELLIA_SERVER</code> Default tunnel server URL <code>https://sellia.me</code> <code>SELLIA_API_KEY</code> Default API key <code>your-api-key</code> <code>SELLIA_ADMIN_API_KEY</code> Admin API key for admin commands <code>sk_master_xyz</code>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#server-variables","level":3,"title":"Server Variables","text":"<p>Variables for <code>sellia-server</code>:</p> Variable Description Example <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains <code>yourdomain.com</code> <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>true</code>/<code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key <code>random-key</code> <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>true</code>/<code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code>/<code>false</code> <code>LOG_LEVEL</code> Set log level <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#configuration-files","level":2,"title":"Configuration Files","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#selliayml","level":3,"title":"sellia.yml","text":"<p>Example configuration file:</p> <pre><code># Server settings\nserver: https://sellia.me\napi_key: your-api-key\n\ninspector:\n  port: 4040\n  open: true\n\n# Tunnel definitions\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    local_host: localhost\n\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n\n  webhook:\n    port: 3000\n    subdomain: webhooks\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#exit-codes","level":2,"title":"Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Invalid usage 3 Network error 4 Authentication failed 5 Server unavailable","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#common-patterns","level":2,"title":"Common Patterns","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#webhook-development","level":3,"title":"Webhook Development","text":"<pre><code>sellia http 3000 \\\n  --subdomain webhooks \\\n  --open \\\n  --server https://sellia.me\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#api-development","level":3,"title":"API Development","text":"<pre><code>sellia http 8080 \\\n  --subdomain api \\\n  --auth api:secret123\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#client-demo","level":3,"title":"Client Demo","text":"<pre><code>sellia http 3000 \\\n  --subdomain demo \\\n  --auth client:preview456\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#multiple-services","level":3,"title":"Multiple Services","text":"<pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n  api:\n    port: 8080\n    subdomain: myapp-api\n  admin:\n    port: 3001\n    subdomain: myapp-admin\n    auth: admin:secret\n</code></pre> <pre><code>sellia start\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#tips-and-tricks","level":2,"title":"Tips and Tricks","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#aliases","level":3,"title":"Aliases","text":"<p>Create shell aliases for common commands:</p> <pre><code># ~/.bashrc or ~/.zshrc\nalias tunnel='sellia http'\nalias tunnel-dev='sellia http --subdomain dev'\nalias tunnel-prod='sellia http --server https://sellia.me'\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#auto-completion","level":3,"title":"Auto-Completion","text":"<p>Enable bash completion (coming soon):</p> <pre><code># ~/.bashrc\nsource &lt;(sellia completion bash)\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#quick-server","level":3,"title":"Quick Server","text":"<p>Quick development server:</p> <pre><code>LOG_LEVEL=debug sellia-server --port 3000 --domain localhost\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#generate-strong-keys","level":3,"title":"Generate Strong Keys","text":"<p>Generate secure authentication keys:</p> <pre><code># Master key\nopenssl rand -hex 32\n\n# Tunnel auth password\nopenssl rand -base64 16\n</code></pre>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#command-not-found","level":3,"title":"Command Not Found","text":"<p>Problem: <code>sellia: command not found</code></p> <p>Solutions: - Add to PATH: <code>export PATH=$PATH:./bin</code> - Install globally: <code>cp ./bin/sellia /usr/local/bin/</code> - Use full path: <code>./bin/sellia http 3000</code></p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<p>Problem: \"Port 3000 is already in use\"</p> <p>Solutions: - Use different port: <code>--port 3001</code> - Kill existing process: <code>kill $(lsof -ti :3000)</code> - Find and kill process: <code>lsof -i :3000</code></p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#authentication-failed","level":3,"title":"Authentication Failed","text":"<p>Problem: \"Authentication failed\"</p> <p>Solutions: - Verify API key: <code>--api-key your-key</code> - Check server requires auth - Verify master key on server</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#connection-refused","level":3,"title":"Connection Refused","text":"<p>Problem: \"Connection refused\"</p> <p>Solutions: - Verify server is running - Check server URL: <code>--server http://localhost:3000</code> - Check firewall rules - Verify network connectivity</p>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Getting Started - First tunnel setup</li> <li>Tunnels - Tunnel creation and management</li> <li>Configuration - Advanced configuration</li> </ul>","path":["01 user","Cli reference","CLI Reference"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/","level":1,"title":"<code>sellia admin</code> - Admin Commands","text":"<p>Administrative commands for managing reserved subdomains and API keys. Requires an admin API key.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia admin &lt;command&gt; [options]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#description","level":2,"title":"Description","text":"<p>Admin commands allow server administrators to manage: - Reserved subdomains (prevent users from claiming specific subdomains) - API keys (create, list, and revoke user and master keys)</p> <p>These commands require an admin API key with master privileges.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#authentication","level":2,"title":"Authentication","text":"<p>Admin commands require authentication. Provide your admin API key via:</p> <ol> <li> <p>Environment variable (recommended):    <pre><code>export SELLIA_ADMIN_API_KEY=sk_master_xyz\nsellia admin reserved list\n</code></pre></p> </li> <li> <p>Login first:    <pre><code>sellia auth login\n# Enter admin key when prompted\nsellia admin reserved list\n</code></pre></p> </li> </ol> <p>The admin API key must have master privileges to perform these operations.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#commands","level":2,"title":"Commands","text":"","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#reserved","level":3,"title":"<code>reserved</code>","text":"<p>Manage reserved subdomains.</p> <ul> <li><code>reserved list</code> - List all reserved subdomains</li> <li><code>reserved add</code> - Add a reserved subdomain</li> <li><code>reserved remove</code> - Remove a reserved subdomain</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#api-keys","level":3,"title":"<code>api-keys</code>","text":"<p>Manage API keys.</p> <ul> <li><code>api-keys list</code> - List all API keys</li> <li><code>api-keys create</code> - Create a new API key</li> <li><code>api-keys revoke</code> - Revoke an API key</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#common-options","level":2,"title":"Common Options","text":"","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#-server-url","level":3,"title":"<code>--server URL</code>","text":"<p>Specify the tunnel server URL (default: from config or <code>https://sellia.me</code>).</p> <p>Example: <pre><code>sellia admin reserved list --server https://tunnel.example.com\n</code></pre></p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#reserved-subdomain-commands","level":2,"title":"Reserved Subdomain Commands","text":"","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#sellia-admin-reserved-list","level":3,"title":"<code>sellia admin reserved list</code>","text":"<p>List all reserved subdomains on the server.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis_1","level":4,"title":"Synopsis","text":"<pre><code>sellia admin reserved list [--server URL]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#options","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage","level":4,"title":"Usage","text":"<pre><code>sellia admin reserved list\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#output","level":4,"title":"Output","text":"<pre><code>Reserved Subdomains: (3)\n\n  admin       System reserved subdomain                  (default)\n  www         Standard web subdomain                     (default)\n  myapp       Reserved for customer XYZ\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#exit-codes","level":4,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Authentication failed or server error</li> <li><code>503</code> - Database not available on server</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#sellia-admin-reserved-add","level":3,"title":"<code>sellia admin reserved add</code>","text":"<p>Add a new reserved subdomain to prevent users from claiming it.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis_2","level":4,"title":"Synopsis","text":"<pre><code>sellia admin reserved add &lt;subdomain&gt; [--reason REASON] [--server URL]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#arguments","level":4,"title":"Arguments","text":"<ul> <li><code>&lt;subdomain&gt;</code> - Subdomain name to reserve (without domain)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#options_1","level":4,"title":"Options","text":"<ul> <li><code>--reason REASON</code> - Optional reason for the reservation</li> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage_1","level":4,"title":"Usage","text":"<pre><code># Basic reservation\nsellia admin reserved add myapp\n\n# With reason\nsellia admin reserved add myapp --reason \"Reserved for customer XYZ\"\n\n# With custom server\nsellia admin reserved add admin --server https://tunnel.example.com\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#output_1","level":4,"title":"Output","text":"<pre><code>✓ Reserved subdomain 'myapp'\n  Reason: Reserved for customer XYZ\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#errors","level":4,"title":"Errors","text":"<pre><code>Error: Subdomain 'myapp' is already reserved\n</code></pre> <pre><code>Error: Invalid request\n</code></pre> <pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#sellia-admin-reserved-remove","level":3,"title":"<code>sellia admin reserved remove</code>","text":"<p>Remove a reserved subdomain, making it available for users.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis_3","level":4,"title":"Synopsis","text":"<pre><code>sellia admin reserved remove &lt;subdomain&gt; [--server URL]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#arguments_1","level":4,"title":"Arguments","text":"<ul> <li><code>&lt;subdomain&gt;</code> - Subdomain name to unreserve</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#options_2","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage_2","level":4,"title":"Usage","text":"<pre><code>sellia admin reserved remove myapp\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#output_2","level":4,"title":"Output","text":"<pre><code>✓ Removed reserved subdomain 'myapp'\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#errors_1","level":4,"title":"Errors","text":"<pre><code>Error: Cannot remove default reserved subdomain\n</code></pre> <pre><code>Error: Reserved subdomain 'myapp' not found\n</code></pre> <pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre> <p>Note: Default reserved subdomains (like <code>admin</code>, <code>www</code>) cannot be removed.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#api-key-commands","level":2,"title":"API Key Commands","text":"","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#sellia-admin-api-keys-list","level":3,"title":"<code>sellia admin api-keys list</code>","text":"<p>List all API keys in the system.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis_4","level":4,"title":"Synopsis","text":"<pre><code>sellia admin api-keys list [--server URL]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#options_3","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage_3","level":4,"title":"Usage","text":"<pre><code>sellia admin api-keys list\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#output_3","level":4,"title":"Output","text":"<pre><code>API Keys: (3)\n\n  key_abc  Production Admin      (master)\n    Created: 2025-01-15 10:30\n\n  key_def  Development Team\n    Created: 2025-01-20 14:22\n\n  key_ghi  Test Key              (revoked)\n    Created: 2025-01-10 09:15\n</code></pre> <ul> <li><code>(master)</code> - Key has admin privileges (displayed in red/bold)</li> <li><code>(revoked)</code> - Key has been revoked and is inactive (displayed in gray)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#exit-codes_1","level":4,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Authentication failed or server error</li> <li><code>503</code> - Database not available on server</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#sellia-admin-api-keys-create","level":3,"title":"<code>sellia admin api-keys create</code>","text":"<p>Create a new API key.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis_5","level":4,"title":"Synopsis","text":"<pre><code>sellia admin api-keys create [--name NAME] [--master] [--server URL]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#options_4","level":4,"title":"Options","text":"<ul> <li><code>--name NAME</code> - Friendly name for the key (optional)</li> <li><code>--master</code> - Create a master key with admin privileges</li> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage_4","level":4,"title":"Usage","text":"<pre><code># Create regular user key\nsellia admin api-keys create\n\n# Create named key\nsellia admin api-keys create --name \"Development Team\"\n\n# Create master admin key\nsellia admin api-keys create --master --name \"Admin Key\"\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#output_4","level":4,"title":"Output","text":"<pre><code>✓ API key created\n\n  Key: key_xyz123abcdef456789...\n  Prefix: key_xyz\n  Name: Development Team\n\nSave this key now - it won't be shown again!\n</code></pre> <p>For master keys, the output includes:</p> <pre><code>✓ API key created\n\n  Key: key_xyz123abcdef456789...\n  Prefix: key_xyz\n  Name: Admin Key\n  Type: Master (admin access)\n\nSave this key now - it won't be shown again!\n</code></pre> <p>Important: The full API key is only shown once. Save it securely.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#key-types","level":4,"title":"Key Types","text":"<ul> <li>Regular key - Can create tunnels, cannot perform admin operations</li> <li>Master key (<code>--master</code>) - Full admin access to reserved subdomains and API key management</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#errors_2","level":4,"title":"Errors","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#sellia-admin-api-keys-revoke","level":3,"title":"<code>sellia admin api-keys revoke</code>","text":"<p>Revoke an API key, making it inactive.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#synopsis_6","level":4,"title":"Synopsis","text":"<pre><code>sellia admin api-keys revoke &lt;key-prefix&gt; [--server URL]\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#arguments_2","level":4,"title":"Arguments","text":"<ul> <li><code>&lt;key-prefix&gt;</code> - Key prefix to revoke (e.g., <code>key_abc</code>)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#options_5","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage_5","level":4,"title":"Usage","text":"<pre><code>sellia admin api-keys revoke key_abc\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#output_5","level":4,"title":"Output","text":"<pre><code>✓ API key 'key_abc' revoked\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#errors_3","level":4,"title":"Errors","text":"<pre><code>Error: API key 'key_abc' not found\n</code></pre> <pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre> <p>Note: Revoked keys are marked as inactive but remain in the database for audit purposes.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#reserve-subdomains-for-a-customer","level":3,"title":"Reserve subdomains for a customer","text":"<pre><code># Reserve main subdomain\nsellia admin reserved add myapp --reason \"Reserved for Acme Corp\"\n\n# Reserve related subdomains\nsellia admin reserved add myapp-api --reason \"API server for Acme Corp\"\nsellia admin reserved add myapp-admin --reason \"Admin panel for Acme Corp\"\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#create-api-keys-for-different-teams","level":3,"title":"Create API keys for different teams","text":"<pre><code># Development team key\nsellia admin api-keys create --name \"Development Team\"\n\n# Staging key\nsellia admin api-keys create --name \"Staging Environment\"\n\n# Production master key\nsellia admin api-keys create --master --name \"Production Admin\"\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#audit-api-keys","level":3,"title":"Audit API keys","text":"<pre><code>$ sellia admin api-keys list\nAPI Keys: (5)\n\n  key_abc  Production Admin      (master)\n    Created: 2025-01-15 10:30\n\n  key_def  Development Team\n    Created: 2025-01-20 14:22\n\n  key_ghi  Staging Environment\n    Created: 2025-01-22 09:45\n\n  key_jkl  Old Key               (revoked)\n    Created: 2025-01-10 09:15\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#clean-up-old-keys","level":3,"title":"Clean up old keys","text":"<pre><code># List keys to find old ones\nsellia admin api-keys list\n\n# Revoke compromised or expired keys\nsellia admin api-keys revoke key_old\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#managing-multiple-servers","level":2,"title":"Managing Multiple Servers","text":"<p>If you manage multiple tunnel servers, use <code>--server</code>:</p> <pre><code># Production server\nexport SELLIA_ADMIN_API_KEY=prod_master_key\nsellia admin reserved list --server https://sellia.me\n\n# Staging server\nsellia admin reserved list --server https://staging.sellia.me\n\n# Development server\nsellia admin reserved list --server http://localhost:8080\n</code></pre>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#exit-codes_2","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Command completed successfully</li> <li><code>1</code> - Error (authentication, invalid input, server error)</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#common-error-messages","level":2,"title":"Common Error Messages","text":"","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#authentication-errors","level":3,"title":"Authentication Errors","text":"<pre><code>Error: API key required\n\nSet it with:\n  SELLIA_ADMIN_API_KEY=your-key sellia admin ...\n  sellia auth login\n</code></pre> <p>Solution: Set the <code>SELLIA_ADMIN_API_KEY</code> environment variable or run <code>sellia auth login</code> with an admin key.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#database-errors","level":3,"title":"Database Errors","text":"<pre><code>Error: Database not available on server\n</code></pre> <p>Solution: The server's database is not configured or available. Contact your server administrator.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#permission-errors","level":3,"title":"Permission Errors","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <p>Solution: Your API key doesn't have master (admin) privileges. Use a master key for admin operations.</p>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-admin/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia auth</code> - Manage API key authentication</li> <li><code>sellia http</code> - Create tunnels (regular user operation)</li> <li><code>sellia start</code> - Start multiple tunnels from config</li> </ul>","path":["01 user","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/","level":1,"title":"<code>sellia auth</code> - Manage Authentication","text":"<p>Manage Sellia API key authentication.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia auth &lt;command&gt;\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#description","level":2,"title":"Description","text":"<p>The <code>auth</code> command manages your Sellia API key for tunnel server authentication. This allows you to authenticate once and have all subsequent commands use your saved credentials.</p> <p>Authentication is required for: - Creating tunnels with reserved subdomains - Accessing admin features - Using private tunnel servers</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#commands","level":2,"title":"Commands","text":"","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#login","level":3,"title":"<code>login</code>","text":"<p>Save API key for authentication.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#logout","level":3,"title":"<code>logout</code>","text":"<p>Remove saved API key.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#status","level":3,"title":"<code>status</code>","text":"<p>Show current authentication status.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#command-details","level":2,"title":"Command Details","text":"","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#sellia-auth-login","level":3,"title":"<code>sellia auth login</code>","text":"<p>Prompts for and saves your API key to the configuration file.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#usage","level":4,"title":"Usage","text":"<pre><code>sellia auth login\n</code></pre> <p>The command will prompt:</p> <pre><code>API Key: _\n</code></pre> <p>Enter your API key and press Enter. The key is saved to <code>~/.config/sellia/sellia.yml</code>.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#configuration-file","level":4,"title":"Configuration File","text":"<p>After login, your config file contains:</p> <pre><code>api_key: key_abc123def456...\nserver: https://sellia.me\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#security","level":4,"title":"Security","text":"<ul> <li>The API key is stored in plain text in <code>~/.config/sellia/sellia.yml</code></li> <li>File permissions depend on your system's umask</li> <li>Ensure your config directory is appropriately secured</li> </ul>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#output","level":4,"title":"Output","text":"<pre><code>✓ API key saved to /home/user/.config/sellia/sellia.yml\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#error","level":4,"title":"Error","text":"<p>If no API key is provided:</p> <pre><code>Error: No API key provided\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#sellia-auth-logout","level":3,"title":"<code>sellia auth logout</code>","text":"<p>Removes the saved API key from your configuration.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#usage_1","level":4,"title":"Usage","text":"<pre><code>sellia auth logout\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#behavior","level":4,"title":"Behavior","text":"<ul> <li>Opens your config file and removes the <code>api_key</code> field</li> <li>If the config file becomes empty or invalid, it's deleted entirely</li> <li>Other configuration (server, tunnels, etc.) is preserved</li> </ul>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#output_1","level":4,"title":"Output","text":"<p>When logged in:</p> <pre><code>✓ Logged out (API key removed)\n</code></pre> <p>When not logged in:</p> <pre><code>Not logged in\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#sellia-auth-status","level":3,"title":"<code>sellia auth status</code>","text":"<p>Display your current authentication status and masked API key.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#usage_2","level":4,"title":"Usage","text":"<pre><code>sellia auth status\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#output-when-authenticated","level":4,"title":"Output When Authenticated","text":"<pre><code>Status: Logged in\nServer: https://sellia.me\nAPI Key: sk_l...ef45\n</code></pre> <p>The API key is masked for security - if the key is longer than 8 characters, only the first 4 and last 4 characters are shown. Otherwise, it shows <code>****</code>.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#output-when-not-authenticated","level":4,"title":"Output When Not Authenticated","text":"<pre><code>Status: Not logged in\nServer: https://sellia.me\n\nRun 'sellia auth login' to authenticate\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#configuration-file-location","level":2,"title":"Configuration File Location","text":"<p>The auth command stores credentials in:</p> <pre><code>~/.config/sellia/sellia.yml\n</code></pre> <p>This file is also used for other configuration settings.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#login-for-the-first-time","level":3,"title":"Login for the first time","text":"<pre><code>$ sellia auth login\nAPI Key: key_abc123def456...\n✓ API key saved to /home/user/.config/sellia/sellia.yml\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#check-authentication-status","level":3,"title":"Check authentication status","text":"<pre><code>$ sellia auth status\nStatus: Logged in\nServer: https://sellia.me\nAPI Key: sk_l...ef45\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#logout-and-clear-credentials","level":3,"title":"Logout and clear credentials","text":"<pre><code>$ sellia auth logout\n✓ Logged out (API key removed)\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#login-and-use-tunnel","level":3,"title":"Login and use tunnel","text":"<pre><code># Authenticate once\n$ sellia auth login\nAPI Key: ********\n✓ API key saved\n\n# Now all commands use the saved key\n$ sellia http 3000 --subdomain myapp\n# No need to specify --api-key\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#alternative-authentication-methods","level":2,"title":"Alternative Authentication Methods","text":"<p>You don't have to use <code>sellia auth login</code>. You can also:</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#1-use-api-key-flag","level":3,"title":"1. Use <code>--api-key</code> flag","text":"<pre><code>sellia http 3000 --api-key key_abc123\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#2-use-environment-variable","level":3,"title":"2. Use environment variable","text":"<pre><code>export SELLIA_API_KEY=key_abc123\nsellia http 3000\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#3-add-to-config-file-manually","level":3,"title":"3. Add to config file manually","text":"<p>Edit <code>~/.config/sellia/sellia.yml</code>:</p> <pre><code>api_key: key_abc123\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#admin-api-keys","level":2,"title":"Admin API Keys","text":"<p>Some admin commands require an admin API key:</p> <pre><code>SELLIA_ADMIN_API_KEY=sk_master_xyz sellia admin reserved list\n</code></pre> <p>The <code>sellia auth login</code> command saves the key to the regular <code>api_key</code> field, which works for both regular and admin operations if the key has admin privileges.</p>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#integration-with-other-commands","level":2,"title":"Integration with Other Commands","text":"<p>Once authenticated, all commands automatically use your saved API key:</p> <pre><code># Login once\n$ sellia auth login\n\n# Now all commands work without --api-key\n$ sellia http 3000\n$ sellia start\n$ sellia admin reserved list\n</code></pre>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Command completed successfully</li> <li><code>1</code> - Error occurred (no API key provided, etc.)</li> </ul>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-auth/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia http</code> - Create tunnels with automatic authentication</li> <li><code>sellia start</code> - Start tunnels from config</li> <li><code>sellia admin</code> - Admin commands requiring authentication</li> </ul>","path":["01 user","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/","level":1,"title":"<code>sellia http</code> - Create HTTP Tunnel","text":"<p>Create an HTTP tunnel to a local port with optional request inspector.</p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia http &lt;port&gt; [options]\n</code></pre>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#description","level":2,"title":"Description","text":"<p>Creates a secure HTTP tunnel from a public URL to your local development server. Includes a built-in request inspector for debugging HTTP traffic.</p> <p>The tunnel forwards all incoming HTTP requests to your local port and displays real-time request information in the terminal.</p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#arguments","level":2,"title":"Arguments","text":"","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#port","level":3,"title":"<code>&lt;port&gt;</code>","text":"<p>Local port number to forward to (required).</p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#options","level":2,"title":"Options","text":"","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-s-subdomain-name","level":3,"title":"<code>-s, --subdomain NAME</code>","text":"<p>Request a specific subdomain for the tunnel URL.</p> <p>If the subdomain is already in use or reserved, the server will assign a random subdomain instead.</p> <p>Example: <pre><code>sellia http 3000 --subdomain myapp\n# Creates: https://myapp.sellia.me\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-a-auth-userpass","level":3,"title":"<code>-a, --auth USER:PASS</code>","text":"<p>Enable basic authentication for the tunnel.</p> <p>Protects your tunnel with a username and password. Users will be prompted to authenticate before accessing.</p> <p>Example: <pre><code>sellia http 3000 --auth admin:secret123\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-h-host-host","level":3,"title":"<code>-H, --host HOST</code>","text":"<p>Local host to connect to (default: <code>localhost</code>).</p> <p>Useful when your development server is running on a different interface or Docker container.</p> <p>Examples: <pre><code># Connect to Docker container\nsellia http 3000 --host host.docker.internal\n\n# Connect to specific interface\nsellia http 8080 --host 192.168.1.100\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-server-url","level":3,"title":"<code>--server URL</code>","text":"<p>Tunnel server URL (default: from config or <code>https://sellia.me</code>).</p> <p>Override the default tunnel server. Useful for self-hosted or development servers.</p> <p>Example: <pre><code>sellia http 3000 --server https://tunnel.mycompany.com\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-k-api-key-key","level":3,"title":"<code>-k, --api-key KEY</code>","text":"<p>API key for authentication.</p> <p>Overrides the API key from config or environment. Required if the server requires authentication.</p> <p>Example: <pre><code>sellia http 3000 --api-key key_abc123\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-i-inspector-port-port","level":3,"title":"<code>-i, --inspector-port PORT</code>","text":"<p>Inspector UI port (default: <code>4040</code>).</p> <p>Change the port for the built-in request inspector web interface.</p> <p>Example: <pre><code>sellia http 3000 --inspector-port 5000\n# Access inspector at http://127.0.0.1:5000\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-o-open","level":3,"title":"<code>-o, --open</code>","text":"<p>Open inspector in browser automatically when tunnel connects.</p> <p>Automatically opens the request inspector in your default browser when the tunnel is established.</p> <p>Example: <pre><code>sellia http 3000 --open\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-no-inspector","level":3,"title":"<code>--no-inspector</code>","text":"<p>Disable the request inspector entirely.</p> <p>Disables both the inspector UI and request logging. Useful for production use or when you don't need debugging.</p> <p>Example: <pre><code>sellia http 3000 --no-inspector\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#-h-help","level":3,"title":"<code>-h, --help</code>","text":"<p>Show help message and exit.</p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#basic-tunnel-to-localhost3000","level":3,"title":"Basic tunnel to localhost:3000","text":"<pre><code>sellia http 3000\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nForwarding to localhost:3000\n\nPublic URL: https://random-name.sellia.me -&gt; localhost:3000\n\nInspector:  http://127.0.0.1:4040\n\nPress Ctrl+C to stop\n</code></pre></p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#tunnel-with-custom-subdomain","level":3,"title":"Tunnel with custom subdomain","text":"<pre><code>sellia http 3000 --subdomain myapp\n</code></pre>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#tunnel-with-basic-authentication","level":3,"title":"Tunnel with basic authentication","text":"<pre><code>sellia http 3000 --auth admin:mypassword\n</code></pre>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#tunnel-to-docker-container","level":3,"title":"Tunnel to Docker container","text":"<pre><code>sellia http 3000 --host host.docker.internal --subdomain dev\n</code></pre>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#tunnel-without-inspector","level":3,"title":"Tunnel without inspector","text":"<pre><code>sellia http 3000 --no-inspector\n</code></pre>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#tunnel-with-custom-server","level":3,"title":"Tunnel with custom server","text":"<pre><code>sellia http 3000 --server https://tunnel.example.com\n</code></pre>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#inspector-features","level":2,"title":"Inspector Features","text":"<p>When enabled (default), the request inspector provides:</p> <ul> <li>Real-time request logging in terminal</li> <li>Web interface at <code>http://127.0.0.1:4040</code></li> <li>Request/response headers and bodies</li> <li>WebSocket connection monitoring</li> <li>Request history and search</li> </ul>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#terminal-output","level":2,"title":"Terminal Output","text":"<p>The command displays real-time information about incoming requests:</p> <pre><code>[14:32:15] GET /api/users\n[14:32:16] POST /api/login\n[14:32:18] WS /websocket\n</code></pre> <p>Colors indicate HTTP methods: - <code>GET</code> - Green - <code>POST</code> - Blue - <code>PUT</code> - Yellow - <code>PATCH</code> - Yellow - <code>DELETE</code> - Red - <code>WS</code> (WebSocket) - Magenta</p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#configuration","level":2,"title":"Configuration","text":"<p>The <code>http</code> command respects configuration from:</p> <ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code></li> </ol> <p>Settings can be overridden by command-line flags or environment variables: - <code>SELLIA_SERVER</code> - Default tunnel server - <code>SELLIA_API_KEY</code> - Default API key</p>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Successful termination (via Ctrl+C)</li> <li><code>1</code> - Error occurred</li> </ul>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-http/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia start</code> - Start multiple tunnels from config file</li> <li><code>sellia auth</code> - Manage authentication</li> <li><code>sellia admin</code> - Admin commands for reserved subdomains and API keys</li> </ul>","path":["01 user","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/","level":1,"title":"<code>sellia start</code> - Start Tunnels from Config","text":"<p>Start multiple tunnels from a configuration file.</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia start [options]\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#description","level":2,"title":"Description","text":"<p>Starts multiple tunnels defined in a <code>sellia.yml</code> configuration file. This is the recommended way to manage multiple development tunnels simultaneously.</p> <p>All tunnels run in parallel and display unified request logging. Each tunnel can have different ports, subdomains, authentication, and routing rules.</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#options","level":2,"title":"Options","text":"","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#-c-config-file","level":3,"title":"<code>-c, --config FILE</code>","text":"<p>Config file path (default: <code>./sellia.yml</code>).</p> <p>Load tunnel definitions from a custom configuration file instead of the default <code>./sellia.yml</code>.</p> <p>Example: <pre><code>sellia start --config /path/to/tunnels.yml\n</code></pre></p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#-h-help","level":3,"title":"<code>-h, --help</code>","text":"<p>Show help message and exit.</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#configuration-file","level":2,"title":"Configuration File","text":"<p>The <code>sellia.yml</code> file defines multiple tunnels with individual settings:</p> <pre><code>server: https://sellia.me\napi_key: your-api-key\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    auth: user:pass\n\n  api:\n    port: 8080\n    subdomain: myapp-api\n    local_host: localhost\n\n  admin:\n    port: 9000\n    subdomain: myapp-admin\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#tunnel-configuration-options","level":3,"title":"Tunnel Configuration Options","text":"<p>Each tunnel in the <code>tunnels</code> map supports these options:</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#port-required","level":4,"title":"<code>port</code> (required)","text":"<p>Local port number to forward to.</p> <p>Type: <code>Integer</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#subdomain-optional","level":4,"title":"<code>subdomain</code> (optional)","text":"<p>Requested subdomain for the tunnel URL.</p> <p>Type: <code>String</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#auth-optional","level":4,"title":"<code>auth</code> (optional)","text":"<p>Basic authentication in <code>username:password</code> format.</p> <p>Type: <code>String</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n    auth: admin:secret123\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#local_host-optional","level":4,"title":"<code>local_host</code> (optional)","text":"<p>Local host to connect to (default: <code>localhost</code>).</p> <p>Type: <code>String</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n    local_host: host.docker.internal\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#routes-optional","level":4,"title":"<code>routes</code> (optional)","text":"<p>Array of route mappings for path-based routing to different ports.</p> <p>Type: Array of objects with <code>path</code>, <code>port</code>, and optional <code>host</code></p> <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /api\n        port: 8080\n        host: localhost\n      - path: /ws\n        port: 9000\n      - path: /static\n        port: 3001\n</code></pre> <p>Routes allow you to forward different paths to different local services: - Primary port (3000) handles all unmatched requests - <code>/api/*</code> → localhost:8080 - <code>/ws/*</code> → localhost:9000 - <code>/static/*</code> → localhost:3001</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#global-configuration-options","level":3,"title":"Global Configuration Options","text":"","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#server","level":4,"title":"<code>server</code>","text":"<p>Default tunnel server URL.</p> <p>Type: <code>String</code> (default: <code>https://sellia.me</code>)</p> <pre><code>server: https://sellia.me\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#api_key","level":4,"title":"<code>api_key</code>","text":"<p>API key for authentication.</p> <p>Type: <code>String</code></p> <pre><code>api_key: key_abc123\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#configuration-loading-order","level":2,"title":"Configuration Loading Order","text":"<p>Configuration is loaded from multiple paths and merged (later paths override earlier ones):</p> <ol> <li><code>~/.config/sellia/sellia.yml</code> (system-wide user config)</li> <li><code>~/.sellia.yml</code> (user home directory)</li> <li><code>./sellia.yml</code> (current directory)</li> <li>File specified with <code>--config</code> flag</li> </ol> <p>Environment variables override all file-based settings: - <code>SELLIA_SERVER</code> - <code>SELLIA_API_KEY</code> - <code>SELLIA_DB_PATH</code> - <code>SELLIA_NO_DB</code></p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#start-with-default-config-file","level":3,"title":"Start with default config file","text":"<pre><code>sellia start\n</code></pre> <p>Uses <code>./sellia.yml</code> in the current directory.</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#start-with-custom-config-file","level":3,"title":"Start with custom config file","text":"<pre><code>sellia start --config /path/to/production-tunnels.yml\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#example-full-stack-application","level":3,"title":"Example: Full-Stack Application","text":"<pre><code># sellia.yml\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  frontend:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 4000\n      - path: /graphql\n        port: 4000\n\n  admin:\n    port: 3001\n    subdomain: myapp-admin\n\n  websocket:\n    port: 4001\n    subdomain: myapp-ws\n</code></pre> <pre><code>sellia start\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nStarting 3 tunnel(s)...\n\n[frontend] https://myapp.sellia.me\n  /api        -&gt; localhost:4000\n  /graphql    -&gt; localhost:4000\n  /*          -&gt; localhost:3000 (fallback)\n\n[admin] https://myapp-admin.sellia.me -&gt; localhost:3001\n\n[websocket] https://myapp-ws.sellia.me -&gt; localhost:4001\n\nPress Ctrl+C to stop all tunnels\n</code></pre></p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#example-microservices-with-docker","level":3,"title":"Example: Microservices with Docker","text":"<pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n    local_host: host.docker.internal\n    subdomain: app\n    routes:\n      - path: /api/users\n        port: 8001\n        host: host.docker.internal\n      - path: /api/orders\n        port: 8002\n        host: host.docker.internal\n      - path: /api\n        port: 8000\n        host: host.docker.internal\n\n  worker:\n    port: 9000\n    local_host: host.docker.internal\n    subdomain: worker\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#terminal-output","level":2,"title":"Terminal Output","text":"<p>Each tunnel shows requests with its name:</p> <pre><code>[14:32:15] [frontend] GET /api/users\n[14:32:16] [frontend] POST /api/orders\n[14:32:18] [websocket] WS /socket\n[14:32:20] [admin] GET /dashboard\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#error-handling","level":2,"title":"Error Handling","text":"<p>If no tunnels are defined in the config:</p> <pre><code>sellia start\n</code></pre> <p>Output: <pre><code>Error: No tunnels defined in config\n\nCreate a sellia.yml with tunnel definitions:\n\n  tunnels:\n    web:\n      port: 3000\n      subdomain: myapp\n    api:\n      port: 8080\n</code></pre></p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#graceful-shutdown","level":2,"title":"Graceful Shutdown","text":"<p>Press <code>Ctrl+C</code> to gracefully shut down all tunnels:</p> <pre><code>^C\nShutting down...\n</code></pre> <p>The command waits for all tunnels to stop before exiting.</p>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#environment-variables","level":2,"title":"Environment Variables","text":"<p>You can use environment variables in your config file:</p> <pre><code>api_key: ${SELLIA_API_KEY}\nserver: ${TUNNEL_SERVER:-https://sellia.me}\n</code></pre> <p>Then run:</p> <pre><code>export SELLIA_API_KEY=key_abc123\nsellia start\n</code></pre>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Successful termination</li> <li><code>1</code> - Error occurred (missing config, no tunnels defined, etc.)</li> </ul>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-start/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia http</code> - Create a single HTTP tunnel</li> <li><code>sellia auth</code> - Manage API key authentication</li> <li><code>sellia admin</code> - Admin commands for reserved subdomains</li> </ul>","path":["01 user","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/","level":1,"title":"<code>sellia update</code> - Update to Latest Version","text":"<p>Update the Sellia CLI to the latest version or a specific version.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia update [options]\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#description","level":2,"title":"Description","text":"<p>Checks for updates and installs the latest version of Sellia. Can also check for updates without installing, force reinstall, or update to a specific version.</p> <p>The update process downloads the latest release from GitHub and replaces the current binary.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#options","level":2,"title":"Options","text":"","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#-c-check","level":3,"title":"<code>-c, --check</code>","text":"<p>Check for updates without installing.</p> <p>Displays the currently installed version and the latest available version, but doesn't perform any installation.</p> <p>Example: <pre><code>$ sellia update --check\nCurrent version: 1.0.0\nLatest version: 1.2.0\nA new version is available!\nRun 'sellia update' to install\n</code></pre></p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#-f-force","level":3,"title":"<code>-f, --force</code>","text":"<p>Force reinstall even if already up-to-date.</p> <p>Reinstalls the current version or downloads again if the latest version is already installed. Useful for troubleshooting or if the previous download was corrupted.</p> <p>Example: <pre><code>sellia update --force\n</code></pre></p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#-v-version-ver","level":3,"title":"<code>-v, --version VER</code>","text":"<p>Update to a specific version.</p> <p>Instead of updating to the latest release, install a specific version. Useful for downgrading or testing.</p> <p>Example: <pre><code># Install specific version\nsellia update --version 1.1.0\n\n# Downgrade to older version\nsellia update --version 1.0.0\n</code></pre></p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#-h-help","level":3,"title":"<code>-h, --help</code>","text":"<p>Show help message and exit.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#check-for-updates-no-install","level":3,"title":"Check for updates (no install)","text":"<pre><code>$ sellia update --check\nCurrent: v1.0.0\nLatest:  v1.2.0\n\nRun 'sellia update' to install v1.2.0\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#update-to-latest-version","level":3,"title":"Update to latest version","text":"<pre><code>$ sellia update\nCurrent: v1.0.0\nLatest:  v1.2.0\n\nUpdating... Done!\n\nUpdated to v1.2.0\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#update-to-specific-version","level":3,"title":"Update to specific version","text":"<pre><code>$ sellia update --version 1.1.0\nCurrent: v1.0.0\nLatest:  v1.1.0\n\nUpdating... Done!\n\nUpdated to v1.1.0\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#force-reinstall-current-version","level":3,"title":"Force reinstall current version","text":"<pre><code>$ sellia update --force\nCurrent: v1.2.0\nLatest:  v1.2.0\n\nUpdating... Done!\n\nUpdated to v1.2.0\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#check-with-no-updates-available","level":3,"title":"Check with no updates available","text":"<pre><code>$ sellia update --check\nCurrent: v1.2.0\nLatest:  v1.2.0\n\nAlready up to date (v1.2.0)\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#update-process","level":2,"title":"Update Process","text":"<p>The update command:</p> <ol> <li>Checks your current version</li> <li>Queries GitHub releases for the latest version</li> <li>Downloads the appropriate binary for your OS and architecture</li> <li>Replaces the current binary</li> <li>Verifies the installation</li> </ol>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#supported-platforms","level":3,"title":"Supported Platforms","text":"<p>Updates are available for: - Linux (x86_64, aarch64) - macOS (x86_64, aarch64/Apple Silicon) - Windows (x86_64)</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#binary-location","level":3,"title":"Binary Location","text":"<p>The update command replaces the binary at its current location. Common locations:</p> <ul> <li>Linux: <code>/usr/local/bin/sellia</code>, <code>~/.local/bin/sellia</code></li> <li>macOS: <code>/usr/local/bin/sellia</code>, <code>/opt/homebrew/bin/sellia</code></li> <li>Windows: <code>C:\\Users\\&lt;user&gt;\\.sellia\\bin\\sellia.exe</code></li> </ul>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#download-progress","level":2,"title":"Download Progress","text":"<p>The update command downloads the binary without showing detailed progress. It displays \"Updating...\" and shows \"Done!\" when complete.</p> <pre><code>$ sellia update\nCurrent: v1.0.0\nLatest:  v1.2.0\n\nUpdating... Done!\n\nUpdated to v1.2.0\n</code></pre>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Update successful or already up to date</li> <li><code>1</code> - Update failed (network error, permission error, etc.)</li> </ul>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#error-handling","level":2,"title":"Error Handling","text":"","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#network-error","level":3,"title":"Network Error","text":"<pre><code>Error: Failed to fetch release information\n</code></pre> <p>Solution: Check your internet connection and try again.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#permission-error","level":3,"title":"Permission Error","text":"<pre><code>Error: Cannot determine executable path\n</code></pre> <p>or</p> <pre><code>Error: [Errno 13] Permission denied\n</code></pre> <p>Solution: Ensure you have write permissions to the binary location or run with appropriate permissions.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#platform-not-supported","level":3,"title":"Platform Not Supported","text":"<pre><code>Error: No binary available for this platform\nPlatform: unknown-unknown\n</code></pre> <p>Solution: Install from source manually.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#update-check-behavior","level":2,"title":"Update Check Behavior","text":"<p>The command checks for updates by:</p> <ol> <li>Reading the current version from the binary</li> <li>Fetching the latest release information from GitHub</li> <li>Comparing version numbers</li> <li>Downloading and installing if newer</li> </ol> <p>No automatic update checks are performed. Updates are only run when you explicitly run <code>sellia update</code>.</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#version-format","level":2,"title":"Version Format","text":"<p>Sellia uses semantic versioning: <code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR - Breaking changes</li> <li>MINOR - New features, backwards compatible</li> <li>PATCH - Bug fixes</li> </ul> <p>Example versions: - <code>1.0.0</code> - Initial release - <code>1.0.1</code> - Bug fix - <code>1.1.0</code> - New feature - <code>2.0.0</code> - Breaking changes</p>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia version</code> - Show current version</li> <li><code>sellia help</code> - Show general help</li> </ul>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-update/#see-also","level":2,"title":"See Also","text":"<ul> <li>GitHub Releases - View release notes and download manually</li> <li>Installation Guide - Manual installation instructions</li> </ul>","path":["01 user","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/","level":1,"title":"<code>sellia version</code> - Show Version Information","text":"<p>Display the current version of Sellia.</p>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia version\nsellia -v\nsellia --version\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#description","level":2,"title":"Description","text":"<p>Displays the currently installed version of Sellia. Useful for: - Checking if you need to update - Providing version information in bug reports - Verifying installation</p>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#usage","level":2,"title":"Usage","text":"","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#using-the-version-command","level":3,"title":"Using the <code>version</code> command","text":"<pre><code>$ sellia version\nSellia v1.0.0\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#using-the-short-flag","level":3,"title":"Using the short flag","text":"<pre><code>$ sellia -v\nSellia v1.0.0\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#using-the-long-flag","level":3,"title":"Using the long flag","text":"<pre><code>$ sellia --version\nSellia v1.0.0\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#output-format","level":2,"title":"Output Format","text":"<p>The output format is:</p> <pre><code>Sellia v&lt;VERSION&gt;\n</code></pre> <p>Where <code>&lt;VERSION&gt;</code> is the semantic version number (e.g., <code>1.0.0</code>).</p>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#examples","level":2,"title":"Examples","text":"","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#check-current-version","level":3,"title":"Check current version","text":"<pre><code>$ sellia version\nSellia v1.2.0\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#use-in-scripts","level":3,"title":"Use in scripts","text":"<pre><code>#!/bin/bash\nVERSION=$(sellia -v | awk '{print $2}')\necho \"Running Sellia version $VERSION\"\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#compare-versions","level":3,"title":"Compare versions","text":"<pre><code>CURRENT=$(sellia -v | awk '{print $2}' | cut -d'v' -f2)\nLATEST=\"1.2.0\"\n\nif [ \"$CURRENT\" != \"$LATEST\" ]; then\n    echo \"Update available!\"\n    sellia update\nfi\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#check-if-sellia-is-installed","level":3,"title":"Check if Sellia is installed","text":"<pre><code>if command -v sellia &amp;&gt; /dev/null; then\n    echo \"Sellia version: $(sellia -v)\"\nelse\n    echo \"Sellia is not installed\"\nfi\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#version-format","level":2,"title":"Version Format","text":"<p>Sellia uses semantic versioning: <code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR - Breaking changes (e.g., <code>2.0.0</code>)</li> <li>MINOR - New features, backwards compatible (e.g., <code>1.1.0</code>)</li> <li>PATCH - Bug fixes (e.g., <code>1.0.1</code>)</li> </ul>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#pre-release-versions","level":3,"title":"Pre-release Versions","text":"<p>Pre-release versions include a suffix:</p> <pre><code>Sellia v1.2.0-beta.1\nSellia v1.2.0-rc.1\nSellia v1.2.0-dev\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#development-versions","level":3,"title":"Development Versions","text":"<p>Development builds may include commit information:</p> <pre><code>Sellia v1.2.0-dev+a1b2c3d\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#usage-in-bug-reports","level":2,"title":"Usage in Bug Reports","text":"<p>When reporting bugs, always include the version:</p> <pre><code>$ sellia version\nSellia v1.2.0\n\n$ sellia http 3000\n# ... error message ...\n</code></pre> <p>This helps developers identify fixed issues and version-specific problems.</p>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#comparison-with-update-check","level":2,"title":"Comparison with Update Check","text":"<p>The <code>version</code> command shows only the installed version:</p> <pre><code>$ sellia version\nSellia v1.0.0\n</code></pre> <p>To check for updates, use <code>sellia update --check</code>:</p> <pre><code>$ sellia update --check\nCurrent version: 1.0.0\nLatest version: 1.2.0\n\nA new version is available!\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#environment-variable","level":2,"title":"Environment Variable","text":"<p>You can also access the version programmatically:</p> <pre><code># In Crystal code\nputs Sellia::VERSION  # =&gt; \"1.0.0\"\n</code></pre>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Version displayed successfully</li> </ul>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia update</code> - Update to the latest version</li> <li><code>sellia help</code> - Show general help and usage information</li> </ul>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/cli-reference/sellia-version/#see-also","level":2,"title":"See Also","text":"<ul> <li>Changelog - Version history and changes</li> <li>GitHub Releases - Release notes and downloads</li> </ul>","path":["01 user","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"01-user/configuration/","level":1,"title":"Configuration","text":"<p>Configure Sellia through files, environment variables, and CLI flags.</p>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#overview","level":2,"title":"Overview","text":"<p>Sellia supports layered configuration from multiple sources. Later sources override earlier ones:</p> <ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current directory)</li> <li>CLI flags (highest priority)</li> </ol>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#configuration-file","level":2,"title":"Configuration File","text":"","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#location","level":3,"title":"Location","text":"<p>Place <code>sellia.yml</code> in your project directory:</p> <pre><code>cd my-project\ncat &gt; sellia.yml &lt;&lt; EOF\nserver: https://sellia.me\napi_key: your-api-key\nEOF\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#example-configuration","level":3,"title":"Example Configuration","text":"<pre><code># Server settings\nserver: https://sellia.me\napi_key: your-api-key\n\ninspector:\n  port: 4040\n  open: true\n\n# Tunnel definitions\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    local_host: localhost\n    auth: user:pass\n\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n\n  webhook:\n    port: 3000\n    subdomain: webhooks\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#client-variables","level":3,"title":"Client Variables","text":"<p>Set environment variables for the CLI client:</p> <pre><code>export SELLIA_SERVER=https://sellia.me\nexport SELLIA_API_KEY=your-api-key\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#server-variables","level":3,"title":"Server Variables","text":"<p>Configure the Sellia server:</p> <pre><code># Basic settings\nexport SELLIA_HOST=0.0.0.0\nexport SELLIA_PORT=3000\nexport SELLIA_DOMAIN=yourdomain.com\n\n# Authentication\nexport SELLIA_REQUIRE_AUTH=true\nexport SELLIA_MASTER_KEY=your-master-key\n\n# Features\nexport SELLIA_USE_HTTPS=true\nexport SELLIA_RATE_LIMITING=true\nexport SELLIA_DISABLE_LANDING=true\n\n# Database\nexport SELLIA_DB_PATH=/var/lib/sellia/sellia.db\nexport SELLIA_NO_DB=false\n\n# Debugging\nexport LOG_LEVEL=debug\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#docker-environment","level":3,"title":"Docker Environment","text":"<p>Use <code>.env</code> file with Docker:</p> <pre><code>SELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_USE_HTTPS=true\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#cli-flags","level":2,"title":"CLI Flags","text":"","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#server-flags","level":3,"title":"Server Flags","text":"<pre><code>sellia-server [options]\n\nOptions:\n  --host HOST           Host to bind to (default: 0.0.0.0)\n  --port PORT           Port to listen on (default: 3000)\n  --domain DOMAIN       Base domain for subdomains\n  --require-auth        Require API key authentication\n  --master-key KEY      Master API key\n  --https               Generate HTTPS URLs for tunnels\n  --no-rate-limit       Disable rate limiting\n  --no-landing          Disable the landing page\n  --db-path PATH        Path to SQLite database\n  --no-db               Disable database (use in-memory defaults)\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#client-flags","level":3,"title":"Client Flags","text":"<pre><code>sellia http &lt;port&gt; [options]\n\nOptions:\n  -s, --subdomain NAME    Request specific subdomain\n  -a, --auth USER:PASS    Enable basic auth protection\n  -H, --host HOST         Local host (default: localhost)\n  -k, --api-key KEY       API key for authentication\n  -i, --inspector-port    Inspector UI port (default: 4040)\n  -o, --open              Open inspector in browser\n  --no-inspector          Disable the request inspector\n  --server URL            Tunnel server URL\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#development-setup","level":3,"title":"Development Setup","text":"<pre><code># sellia.yml\nserver: http://localhost:3000\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: dev\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#production-setup","level":3,"title":"Production Setup","text":"<pre><code># sellia.yml\nserver: https://tunnel.mycompany.com\napi_key: ${SELLIA_API_KEY}  # Use environment variable\n\ntunnels:\n  webhook-receiver:\n    port: 3000\n    subdomain: webhooks-prod\n    auth: ${WEBHOOK_AUTH}\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#multiple-environments","level":3,"title":"Multiple Environments","text":"<pre><code># sellia.dev.yml\nserver: http://localhost:3000\ntunnels:\n  app:\n    port: 3000\n    subdomain: dev\n</code></pre> <pre><code># sellia.prod.yml\nserver: https://tunnel.mycompany.com\napi_key: ${PROD_API_KEY}\ntunnels:\n  app:\n    port: 3000\n    subdomain: prod\n    auth: ${PROD_AUTH}\n</code></pre> <p>Use different configs:</p> <pre><code>sellia start --config sellia.dev.yml\nsellia start --config sellia.prod.yml\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#security","level":3,"title":"Security","text":"<ol> <li>Never commit API keys - Use environment variables</li> <li>Use different keys per environment - Dev, staging, production</li> <li>Rotate keys regularly - Update configurations periodically</li> <li>Use .gitignore - Exclude <code>sellia.yml</code> with secrets</li> </ol> <pre><code># .gitignore\nsellia.yml\n.env\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#organization","level":3,"title":"Organization","text":"<ol> <li>Project-specific configs - Place <code>sellia.yml</code> in project root</li> <li>Shared settings - Use <code>~/.config/sellia/sellia.yml</code> for defaults</li> <li>Team configs - Commit example configs without secrets</li> </ol> <pre><code># sellia.example.yml\nserver: https://tunnel.mycompany.com\napi_key: YOUR_API_KEY_HERE\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#environment-variables_1","level":3,"title":"Environment Variables","text":"<p>Use environment variables for:</p> <ul> <li>API keys</li> <li>Authentication credentials</li> <li>Server URLs</li> <li>Sensitive configuration</li> </ul> <pre><code># sellia.yml\nserver: ${SELLIA_SERVER}\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: ${APP_SUBDOMAIN}\n    auth: ${APP_AUTH}\n</code></pre>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#config-not-loading","level":3,"title":"Config Not Loading","text":"<p>Problem: Configuration file not being read</p> <p>Solutions: - Verify file is named <code>sellia.yml</code> - Check file location (current directory or home) - Ensure valid YAML syntax - Check file permissions</p>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#environment-variables-ignored","level":3,"title":"Environment Variables Ignored","text":"<p>Problem: Environment variables not working</p> <p>Solutions: - Export variables: <code>export SELLIA_API_KEY=key</code> - Use <code>${VAR}</code> syntax in YAML - Check for typos in variable names - Verify variables are set in shell session</p>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#conflicting-options","level":3,"title":"Conflicting Options","text":"<p>Problem: CLI flags not overriding config</p> <p>Solutions: - CLI flags have highest priority (should override) - Check flag syntax - Verify flag is after the command - Check for multiple config files</p>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Authentication - Managing API keys</li> <li>Deployment - Production configuration</li> <li>CLI Reference - All command options</li> </ul>","path":["01 user","Configuration"],"tags":[]},{"location":"01-user/configuration/cli-flags/","level":1,"title":"CLI Flags Reference","text":"<p>Complete reference of all command-line flags for the Sellia CLI client and server. Use flags to override configuration files or for one-off commands.</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#client-commands","level":2,"title":"Client Commands","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#sellia","level":3,"title":"sellia","text":"<p>Main CLI command.</p> <pre><code>sellia &lt;command&gt; [options]\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#commands","level":3,"title":"Commands","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#http-port","level":4,"title":"<code>http &lt;port&gt;</code>","text":"<p>Create an HTTP tunnel to a local port.</p> <pre><code>sellia http &lt;port&gt; [options]\n</code></pre> <p>Positional Argument: - <code>port</code> - Local port to tunnel (required)</p> <p>Example: <pre><code>sellia http 8080\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#start","level":4,"title":"<code>start</code>","text":"<p>Start tunnels from configuration file.</p> <pre><code>sellia start [options]\n</code></pre> <p>Example: <pre><code>sellia start\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#auth","level":4,"title":"<code>auth</code>","text":"<p>Manage authentication (reserved for future use).</p> <pre><code>sellia auth &lt;subcommand&gt;\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#version","level":4,"title":"<code>version</code>","text":"<p>Show version information.</p> <pre><code>sellia version\n</code></pre> <p>Output: <pre><code>Sellia version 1.0.0\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#help","level":4,"title":"<code>help</code>","text":"<p>Show help information.</p> <pre><code>sellia help [command]\n</code></pre> <p>Show help for specific command: <pre><code>sellia help http\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#http-tunnel-options","level":2,"title":"HTTP Tunnel Options","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-subdomain-s","level":3,"title":"<code>--subdomain</code> / <code>-s</code>","text":"<p>Request a specific subdomain.</p> <pre><code>sellia http 8080 --subdomain myapp\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --subdomain myapp\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -s myapp\n</code></pre></p> <p>Requirements: - 3-63 characters - Lowercase letters, numbers, hyphens - Must start and end with letter or number</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-auth-a","level":3,"title":"<code>--auth</code> / <code>-a</code>","text":"<p>Enable basic authentication.</p> <pre><code>sellia http 8080 --auth username:password\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --auth admin:secret123\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -a admin:secret123\n</code></pre></p> <p>Format: <code>username:password</code></p> <p>Example: <pre><code>sellia http 8080 --auth webhook-tester:webhook-secret\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-host-h","level":3,"title":"<code>--host</code> / <code>-H</code>","text":"<p>Local host to tunnel to (default: localhost).</p> <pre><code>sellia http 8080 --host 192.168.1.100\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --host 192.168.1.100\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -H 192.168.1.100\n</code></pre></p> <p>Use cases: - Tunnel to service on different machine - Tunnel to container - Tunnel to VM</p> <p>Example: <pre><code># Tunnel to Docker container\nsellia http 8080 --host 172.17.0.2\n\n# Tunnel to specific network interface\nsellia http 8080 --host 0.0.0.0\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-api-key-k","level":3,"title":"<code>--api-key</code> / <code>-k</code>","text":"<p>API key for server authentication.</p> <pre><code>sellia http 8080 --api-key your-api-key\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --api-key abc123...\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -k abc123...\n</code></pre></p> <p>Alternative: Set via environment variable: <pre><code>export SELLIA_API_KEY=\"your-key\"\nsellia http 8080\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-inspector-port-i","level":3,"title":"<code>--inspector-port</code> / <code>-i</code>","text":"<p>Custom port for the inspector UI.</p> <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -i 5000\n</code></pre></p> <p>Default: <code>4040</code></p> <p>Use when: Port 4040 is already in use</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-open-o","level":3,"title":"<code>--open</code> / <code>-o</code>","text":"<p>Open inspector in browser automatically.</p> <pre><code>sellia http 8080 --open\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --open\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -o\n</code></pre></p> <p>Effect: Opens <code>http://localhost:4040</code> in default browser</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-no-inspector","level":3,"title":"<code>--no-inspector</code>","text":"<p>Disable the request inspector.</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre> <p>Use cases: - Production deployments - Resource-constrained environments - High-traffic scenarios</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-server","level":3,"title":"<code>--server</code>","text":"<p>Tunnel server URL.</p> <pre><code>sellia http 8080 --server https://sellia.me\n</code></pre> <p>Default: Uses value from <code>SELLIA_SERVER</code> environment variable or config file</p> <p>Examples: <pre><code># Use hosted service\nsellia http 8080 --server https://sellia.me\n\n# Use local server\nsellia http 8080 --server http://localhost:3000\n\n# Use custom server\nsellia http 8080 --server https://tunnels.mycompany.com\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#start-command-options","level":2,"title":"Start Command Options","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-config-c","level":3,"title":"<code>--config</code> / <code>-c</code>","text":"<p>Specify configuration file.</p> <pre><code>sellia start --config sellia.prod.yml\n</code></pre> <p>Long form: <pre><code>sellia start --config sellia.prod.yml\n</code></pre></p> <p>Short form: <pre><code>sellia start -c sellia.prod.yml\n</code></pre></p> <p>Default: Searches for: 1. <code>~/.config/sellia/sellia.yml</code> 2. <code>~/.sellia.yml</code> 3. <code>./sellia.yml</code></p> <p>Examples: <pre><code># Use specific config\nsellia start --config sellia.dev.yml\n\n# Use absolute path\nsellia start --config /etc/sellia/config.yml\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#server-commands","level":2,"title":"Server Commands","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#sellia-server","level":3,"title":"sellia-server","text":"<p>Start the tunnel server.</p> <pre><code>sellia-server [options]\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#server-options","level":2,"title":"Server Options","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-host","level":3,"title":"<code>--host</code>","text":"<p>Host to bind to.</p> <pre><code>sellia-server --host 0.0.0.0\n</code></pre> <p>Default: <code>0.0.0.0</code> (all interfaces)</p> <p>Examples: <pre><code># Listen on all interfaces\nsellia-server --host 0.0.0.0\n\n# Listen only on localhost\nsellia-server --host 127.0.0.1\n\n# Listen on specific IP\nsellia-server --host 192.168.1.10\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-port","level":3,"title":"<code>--port</code>","text":"<p>Port to listen on.</p> <pre><code>sellia-server --port 3000\n</code></pre> <p>Default: <code>3000</code></p> <p>Examples: <pre><code># Use port 8080\nsellia-server --port 8080\n\n# Use port 443 for HTTPS\nsellia-server --port 443\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-domain","level":3,"title":"<code>--domain</code>","text":"<p>Base domain for subdomains.</p> <pre><code>sellia-server --domain yourdomain.com\n</code></pre> <p>Required for subdomain routing</p> <p>Examples: <pre><code>sellia-server --domain tunnels.mycompany.com\nsellia-server --domain sellia.me\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-require-auth","level":3,"title":"<code>--require-auth</code>","text":"<p>Require API key authentication.</p> <pre><code>sellia-server --require-auth\n</code></pre> <p>Default: <code>false</code> (disabled)</p> <p>Effect: Clients must provide valid API key</p> <p>Example: <pre><code>sellia-server --require-auth --master-key abc123...\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-master-key","level":3,"title":"<code>--master-key</code>","text":"<p>Master API key (enables authentication).</p> <pre><code>sellia-server --master-key abc123...\n</code></pre> <p>Generate secure key: <pre><code>openssl rand -hex 32\n</code></pre></p> <p>Example: <pre><code># Generate and use key\nKEY=$(openssl rand -hex 32)\nsellia-server --master-key \"$KEY\" --require-auth\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-https","level":3,"title":"<code>--https</code>","text":"<p>Generate HTTPS URLs for tunnels.</p> <pre><code>sellia-server --https\n</code></pre> <p>Default: <code>false</code> (HTTP URLs)</p> <p>Requires: TLS certificates in <code>./certs/</code> directory</p> <p>Example: <pre><code>sellia-server --domain yourdomain.com --https\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-no-rate-limit","level":3,"title":"<code>--no-rate-limit</code>","text":"<p>Disable rate limiting.</p> <pre><code>sellia-server --no-rate-limit\n</code></pre> <p>Default: Rate limiting enabled</p> <p>Warning: Disabling may expose server to abuse</p> <p>Use when: You have external rate limiting (e.g., reverse proxy)</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-no-landing","level":3,"title":"<code>--no-landing</code>","text":"<p>Disable the public landing page.</p> <pre><code>sellia-server --no-landing\n</code></pre> <p>Default: Landing page enabled</p> <p>Use when: You want a pure tunnel server without web interface</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-db-path","level":3,"title":"<code>--db-path</code>","text":"<p>Path to SQLite database for reserved subdomains.</p> <pre><code>sellia-server --db-path /var/lib/sellia/sellia.db\n</code></pre> <p>Default: <code>~/.sellia/sellia.db</code></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#-no-db","level":3,"title":"<code>--no-db</code>","text":"<p>Disable database and use in-memory defaults.</p> <pre><code>sellia-server --no-db\n</code></pre> <p>Default: Database enabled</p> <p>Use when: You don't need persistent reserved subdomain storage</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#flag-precedence","level":2,"title":"Flag Precedence","text":"<p>Flags are applied in this order (later overrides earlier):</p> <ol> <li>Configuration file defaults</li> <li>Environment variables</li> <li>Command-line flags</li> </ol> <p>Example:</p> <p>Configuration file (<code>sellia.yml</code>): <pre><code>server: https://sellia.me\napi_key: default-key\n</code></pre></p> <p>Environment: <pre><code>export SELLIA_API_KEY=\"env-key\"\n</code></pre></p> <p>Command: <pre><code>sellia http 8080 --api-key cli-key\n</code></pre></p> <p>Result: <code>cli-key</code> is used (highest priority)</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#common-combinations","level":2,"title":"Common Combinations","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#development-tunnel","level":3,"title":"Development Tunnel","text":"<pre><code>sellia http 8080 \\\n  --subdomain myapp-dev \\\n  --server https://sellia.me \\\n  --open\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#production-tunnel","level":3,"title":"Production Tunnel","text":"<pre><code>sellia http 8080 \\\n  --subdomain myapp \\\n  --server https://sellia.me \\\n  --api-key $PROD_API_KEY \\\n  --no-inspector\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#protected-tunnel","level":3,"title":"Protected Tunnel","text":"<pre><code>sellia http 8080 \\\n  --subdomain webhooks \\\n  --auth webhook-tester:secret \\\n  --server https://sellia.me\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#local-server-testing","level":3,"title":"Local Server Testing","text":"<pre><code>sellia http 8080 \\\n  --server http://localhost:3000 \\\n  --subdomain test\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#multiple-options","level":3,"title":"Multiple Options","text":"<pre><code>sellia http 8080 \\\n  --subdomain myapp \\\n  --auth admin:secret123 \\\n  --host 192.168.1.100 \\\n  --api-key abc123 \\\n  --inspector-port 5000 \\\n  --open \\\n  --server https://sellia.me\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#short-flag-examples","level":2,"title":"Short Flag Examples","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#using-short-flags","level":3,"title":"Using Short Flags","text":"<pre><code># Short version of:\n# sellia http 8080 --subdomain myapp --auth user:pass --open\n\nsellia http 8080 -s myapp -a user:pass -o\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#mixed-short-and-long","level":3,"title":"Mixed Short and Long","text":"<pre><code>sellia http 8080 \\\n  -s myapp \\\n  --auth admin:secret \\\n  -o\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#help-flags","level":2,"title":"Help Flags","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#get-help","level":3,"title":"Get Help","text":"<pre><code># General help\nsellia help\n\n# Command-specific help\nsellia help http\nsellia help start\n\n# Server help\nsellia-server --help\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#version-flag","level":2,"title":"Version Flag","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#check-version","level":3,"title":"Check Version","text":"<pre><code>sellia version\n</code></pre> <p>Output: <pre><code>Sellia version 1.0.0\nCrystal 1.10.0\n</code></pre></p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#troubleshooting-flags","level":2,"title":"Troubleshooting Flags","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#debug-mode","level":3,"title":"Debug Mode","text":"<p>Enable debug logging:</p> <pre><code>export LOG_LEVEL=debug\nsellia http 8080\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#config-file-issues","level":3,"title":"Config File Issues","text":"<p>If config isn't loading:</p> <pre><code># Check which config files exist\nls -la ~/.config/sellia/sellia.yml ~/.sellia.yml ./sellia.yml\n\n# Use specific config file\nsellia start --config /path/to/config.yml\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#quick-reference-table","level":2,"title":"Quick Reference Table","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#client-flags","level":3,"title":"Client Flags","text":"Flag Short Description Example <code>--subdomain</code> <code>-s</code> Custom subdomain <code>--subdomain myapp</code> <code>--auth</code> <code>-a</code> Basic auth <code>--auth user:pass</code> <code>--host</code> <code>-H</code> Local host <code>--host 192.168.1.1</code> <code>--api-key</code> <code>-k</code> API key <code>--api-key abc123</code> <code>--inspector-port</code> <code>-i</code> Inspector port <code>--inspector-port 5000</code> <code>--open</code> <code>-o</code> Open inspector <code>--open</code> <code>--no-inspector</code> - Disable inspector <code>--no-inspector</code> <code>--server</code> - Server URL <code>--server https://sellia.me</code> <code>--config</code> <code>-c</code> Config file <code>--config sellia.yml</code>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#server-flags","level":3,"title":"Server Flags","text":"Flag Description Example Default <code>--host</code> Bind host <code>--host 0.0.0.0</code> <code>0.0.0.0</code> <code>--port</code> Bind port <code>--port 3000</code> <code>3000</code> <code>--domain</code> Base domain <code>--domain example.com</code> - <code>--require-auth</code> Require auth <code>--require-auth</code> <code>false</code> <code>--master-key</code> API key <code>--master-key abc123</code> - <code>--https</code> HTTPS URLs <code>--https</code> <code>false</code> <code>--no-rate-limit</code> Disable rate limit <code>--no-rate-limit</code> (enabled) <code>--no-landing</code> Disable landing page <code>--no-landing</code> (enabled) <code>--db-path</code> Database path <code>--db-path /path/to/db</code> <code>~/.sellia/sellia.db</code> <code>--no-db</code> Disable database <code>--no-db</code> (enabled)","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Configuration File - YAML configuration</li> <li>Environment Variables - ENV var reference</li> <li>Multiple Tunnels - Managing several tunnels</li> </ul>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#examples-repository","level":2,"title":"Examples Repository","text":"<p>See more examples in the Sellia examples repository.</p>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#command-reference","level":2,"title":"Command Reference","text":"","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/cli-flags/#quick-commands","level":3,"title":"Quick Commands","text":"<pre><code># Basic tunnel\nsellia http 8080\n\n# Custom subdomain\nsellia http 8080 -s myapp\n\n# With authentication\nsellia http 8080 -a admin:secret\n\n# Full featured\nsellia http 8080 \\\n  -s myapp \\\n  -a admin:secret \\\n  -o \\\n  --server https://sellia.me\n\n# Start from config\nsellia start\n\n# Start server\nsellia-server \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key $(openssl rand -hex 32)\n</code></pre>","path":["01 user","Configuration","CLI Flags Reference"],"tags":[]},{"location":"01-user/configuration/config-file/","level":1,"title":"Configuration File","text":"<p>Sellia uses YAML configuration files for persistent settings, multiple tunnels, and team collaboration. Configuration files are loaded in layers, allowing you to override settings at different levels.</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#configuration-file-locations","level":2,"title":"Configuration File Locations","text":"<p>Sellia searches for configuration files in this order (later overrides earlier):</p> <ol> <li><code>~/.config/sellia/sellia.yml</code> - System-wide user config</li> <li><code>~/.sellia.yml</code> - User home directory config</li> <li><code>./sellia.yml</code> - Project-specific config (current directory)</li> <li>CLI flags - Command-line arguments override all files</li> </ol>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#example-hierarchy","level":3,"title":"Example Hierarchy","text":"<pre><code>~/.config/sellia/sellia.yml  (global defaults)\n    ↓\n~/.sellia.yml                (user overrides)\n    ↓\n./sellia.yml                 (project overrides)\n    ↓\nCLI flags                    (session overrides)\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#basic-configuration-file","level":2,"title":"Basic Configuration File","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#minimal-example","level":3,"title":"Minimal Example","text":"<pre><code># sellia.yml\nserver: https://sellia.me\n</code></pre> <p>This sets the default server for all tunnels.</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#complete-example","level":3,"title":"Complete Example","text":"<pre><code># sellia.yml\nserver: https://sellia.me\napi_key: your-api-key-here\n\ninspector:\n  port: 4040\n  open: false\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#server-settings","level":3,"title":"Server Settings","text":"<pre><code># Server URL\nserver: https://sellia.me\n\n# or with custom port\nserver: https://sellia.me:8443\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#authentication","level":3,"title":"Authentication","text":"<pre><code># API key for server authentication\napi_key: your-api-key-here\n\n# or via environment variable\napi_key: ${SELLIA_API_KEY}\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#inspector-settings","level":3,"title":"Inspector Settings","text":"<p>Inspector settings apply to <code>sellia http</code>. The <code>sellia start</code> command does not run the inspector.</p> <pre><code>inspector:\n  port: 4040\n  open: true\n\ndatabase:\n  path: /var/lib/sellia/sellia.db  # Optional: custom database path\n  enabled: true                     # Optional: disable database\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#tunnel-definitions","level":3,"title":"Tunnel Definitions","text":"<pre><code>tunnels:\n  # Tunnel name (key)\n  web:\n    port: 3000              # Required: local port\n    subdomain: myapp        # Optional: custom subdomain\n    local_host: localhost   # Optional: local host (default: localhost)\n    auth: user:pass         # Optional: basic auth\n    routes:                 # Optional: advanced routing\n      - path: /api\n        port: 4000\n        host: api-service\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#multiple-tunnels","level":2,"title":"Multiple Tunnels","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#defining-multiple-tunnels","level":3,"title":"Defining Multiple Tunnels","text":"<pre><code>tunnels:\n  # Frontend application\n  web:\n    port: 3000\n    subdomain: myapp\n\n  # API backend\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  # Admin panel\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n    auth: admin:admin123\n\n  # Webhook receiver\n  webhooks:\n    port: 6000\n    subdomain: webhooks\n    auth: webhook-tester:secret\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#starting-multiple-tunnels","level":3,"title":"Starting Multiple Tunnels","text":"<pre><code># Start all configured tunnels\nsellia start\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nStarting 4 tunnel(s)...\n\n[web] https://myapp.sellia.me -&gt; localhost:3000\n[api] https://myapp-api.sellia.me -&gt; localhost:4000\n[admin] https://myapp-admin.sellia.me -&gt; localhost:5000\n[webhooks] https://webhooks.sellia.me -&gt; localhost:6000\n\nPress Ctrl+C to stop all tunnels\n</code></pre></p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#using-environment-variables","level":3,"title":"Using Environment Variables","text":"<p>IMPORTANT: Crystal's YAML parser does not support <code>${VAR}</code> syntax. Environment variables can only be set via shell/ENV and will override config file values.</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#available-environment-variables","level":3,"title":"Available Environment Variables","text":"<p>The following environment variables are read by Sellia:</p> <p>Client: - <code>SELLIA_SERVER</code> - Override server URL from config - <code>SELLIA_API_KEY</code> - Override API key from config - <code>SELLIA_DB_PATH</code> - Override database path (server only) - <code>SELLIA_NO_DB</code> - Disable database (set to \"true\" or \"1\")</p> <p>Server: - <code>SELLIA_HOST</code> - Bind host - <code>SELLIA_PORT</code> - Bind port - <code>SELLIA_DOMAIN</code> - Base domain - <code>SELLIA_REQUIRE_AUTH</code> - Require authentication - <code>SELLIA_MASTER_KEY</code> - Master API key - <code>SELLIA_USE_HTTPS</code> - Generate HTTPS URLs - <code>SELLIA_RATE_LIMITING</code> - Enable/disable rate limiting - <code>SELLIA_DISABLE_LANDING</code> - Disable landing page - <code>LOG_LEVEL</code> - Logging verbosity</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#setting-environment-variables","level":3,"title":"Setting Environment Variables","text":"<p>Set in shell:</p> <pre><code># Direct export\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"your-api-key\"\nsellia start\n</code></pre> <p>Note: Environment variables override config file values but are overridden by CLI flags.</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#environment-specific-configuration","level":3,"title":"Environment-Specific Configuration","text":"<p>Use different config files per environment:</p> <pre><code># sellia.dev.yml\nserver: http://localhost:3000\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp-dev\n</code></pre> <pre><code># sellia.prod.yml\nserver: https://sellia.me\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp-prod\n</code></pre> <p>Use the appropriate config:</p> <pre><code># Development\nsellia start --config sellia.dev.yml\n\n# Production\nexport SELLIA_API_KEY=\"prod-key\"\nsellia start --config sellia.prod.yml\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#configuration-file-examples","level":2,"title":"Configuration File Examples","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#development-configuration","level":3,"title":"Development Configuration","text":"<pre><code># sellia.yml\nserver: https://dev.sellia.me\n\ninspector:\n  port: 4040\n  open: true\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp-dev\n\n  api:\n    port: 4000\n    subdomain: myapi-dev\n\n  webhooks:\n    port: 5000\n    subdomain: webhooks-dev\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#production-configuration","level":3,"title":"Production Configuration","text":"<pre><code># sellia.prod.yml\nserver: https://sellia.me\napi_key: ${PROD_API_KEY}\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#team-collaboration","level":3,"title":"Team Collaboration","text":"<pre><code># sellia.yml (shared in repo)\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}  # Each developer sets their own\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: ${USER}-myapp  # john-myapp, jane-myapp\n\n  api:\n    port: 4000\n    subdomain: ${USER}-myapi\n</code></pre> <p>Each developer:</p> <pre><code># John's machine\nexport SELLIA_API_KEY=\"johns-key\"\nexport USER=john\nsellia start\n# Creates john-myapp.sellia.me\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#microservices-architecture","level":3,"title":"Microservices Architecture","text":"<pre><code># sellia.yml\nserver: https://sellia.me\n\ntunnels:\n  # Services\n  user-service:\n    port: 8001\n    subdomain: svc-users\n\n  auth-service:\n    port: 8002\n    subdomain: svc-auth\n\n  payment-service:\n    port: 8003\n    subdomain: svc-payments\n\n  notification-service:\n    port: 8004\n    subdomain: svc-notifications\n\n  # Frontends\n  web-app:\n    port: 3000\n    subdomain: app-web\n\n  admin-app:\n    port: 3001\n    subdomain: app-admin\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#monorepo-setup","level":3,"title":"Monorepo Setup","text":"<pre><code># sellia.yml (root of monorepo)\nserver: https://sellia.me\n\ntunnels:\n  # Package A\n  package-a-web:\n    port: 3000\n    subdomain: pkg-a-web\n\n  package-a-api:\n    port: 4000\n    subdomain: pkg-a-api\n\n  # Package B\n  package-b-web:\n    port: 3001\n    subdomain: pkg-b-web\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#advanced-configuration","level":2,"title":"Advanced Configuration","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#conditional-configuration","level":3,"title":"Conditional Configuration","text":"<p>Use different configs based on conditions:</p> <pre><code># Use different config files\nsellia start --config sellia.dev.yml\nsellia start --config sellia.prod.yml\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#include-external-configs","level":3,"title":"Include External Configs","text":"<p>While Sellia doesn't support YAML includes, you can:</p> <pre><code># Symbolic link approach\nln -s sellia.dev.yml sellia.yml\nsellia start\n\n# Or specify config file\nsellia start --config sellia.dev.yml\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#per-tunnel-override","level":3,"title":"Per-Tunnel Override","text":"<p>Per-tunnel inspector settings are not supported. The inspector is only available with <code>sellia http</code>, not <code>sellia start</code>.</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#database-configuration","level":2,"title":"Database Configuration","text":"<p>Sellia can use a SQLite database to persist reserved subdomains.</p> <pre><code>database:\n  path: /var/lib/sellia/sellia.db  # Path to database file\n  enabled: true                     # Set to false to disable\n</code></pre> <p>Defaults: - Path: <code>~/.sellia/sellia.db</code> - Enabled: <code>true</code></p> <p>Use cases: - Persist reserved subdomains across server restarts - Share reserved subdomain registry between server instances - Disable for simple deployments (uses in-memory defaults)</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#database-configuration_1","level":3,"title":"Database Configuration","text":"<pre><code># sellia.yml (server configuration)\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#configuration-best-practices","level":2,"title":"Configuration Best Practices","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#1-use-version-control","level":3,"title":"1. Use Version Control","text":"<p>Commit your config file (excluding secrets):</p> <pre><code># sellia.yml (committed)\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}  # From environment\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#2-never-commit-secrets","level":3,"title":"2. Never Commit Secrets","text":"<p>Use environment variables for sensitive data:</p> <pre><code># DON'T do this\napi_key: key_abc123...\n\n# DO this instead\napi_key: ${SELLIA_API_KEY}\n</code></pre> <p>Create <code>.env</code> file (in <code>.gitignore</code>):</p> <pre><code># .env\nSELLIA_API_KEY=key_abc123...\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#3-document-configuration","level":3,"title":"3. Document Configuration","text":"<p>Add comments to your config:</p> <pre><code># Sellia Configuration\n# Documentation: https://github.com/watzon/sellia\n\n# Server Configuration\nserver: https://sellia.me\n\n# Authentication (set via environment)\napi_key: ${SELLIA_API_KEY}\n\n# Tunnels Configuration\ntunnels:\n  # Main web application\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#4-separate-environments","level":3,"title":"4. Separate Environments","text":"<p>Use different configs per environment:</p> <pre><code>sellia.yml           # Base config\nsellia.dev.yml       # Development overrides\nsellia.staging.yml   # Staging overrides\nsellia.prod.yml      # Production overrides\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#5-use-meaningful-names","level":3,"title":"5. Use Meaningful Names","text":"<p>Choose clear tunnel names:</p> <pre><code>tunnels:\n  # Good\n  web-production:\n    port: 3000\n    subdomain: myapp\n\n  # Less clear\n  tunnel1:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#config-not-loading","level":3,"title":"Config Not Loading","text":"<p>If config isn't being applied:</p> <ol> <li> <p>Check file location:    <pre><code>pwd  # Should be project directory\nls sellia.yml\n</code></pre></p> </li> <li> <p>Verify YAML syntax:    <pre><code># Use yamllint or similar\nyamllint sellia.yml\n</code></pre></p> </li> <li> <p>Check for syntax errors:    <pre><code># Sellia will show parse errors\nsellia start\n</code></pre></p> </li> </ol>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#environment-variables-not-working","level":3,"title":"Environment Variables Not Working","text":"<p>If environment variables aren't being read:</p> <ol> <li> <p>Verify variable is set:    <pre><code>echo $SELLIA_API_KEY\n</code></pre></p> </li> <li> <p>Check variable name in config:    <pre><code># Case sensitive!\napi_key: ${SELLIA_API_KEY}  # Correct\napi_key: ${sellia_api_key}  # Wrong\n</code></pre></p> </li> <li> <p>Export the variable:    <pre><code># Make sure it's exported\nexport SELLIA_API_KEY=\"key\"\n</code></pre></p> </li> </ol>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#invalid-yaml","level":3,"title":"Invalid YAML","text":"<p>Common YAML errors:</p> <pre><code># WRONG - tabs instead of spaces\ntunnels:\n       web:  # Uses tab\n        port: 3000\n\n# CORRECT - use spaces\ntunnels:\n  web:  # Uses spaces\n    port: 3000\n</code></pre> <p>Always use spaces, not tabs.</p>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#configuration-validation","level":2,"title":"Configuration Validation","text":"<p>Sellia validates config on startup:</p> <pre><code>$ sellia start\n\n# Valid config\n[Sellia] Loading config from sellia.yml\n[Sellia] Starting tunnel: web\n[Sellia] Tunnel established at: https://myapp.sellia.me\n\n# Invalid config\n[Sellia] Error: Invalid configuration\n[Sellia] - tunnel 'web': missing required field 'port'\n</code></pre>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Multiple Tunnels - Managing several tunnels</li> <li>Environment Variables - ENV var reference</li> <li>CLI Flags - Command-line options</li> </ul>","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/config-file/#quick-reference","level":2,"title":"Quick Reference","text":"Setting Type Default Description <code>server</code> string <code>https://sellia.me</code> Tunnel server URL <code>api_key</code> string - Authentication key <code>inspector.port</code> integer 4040 Inspector UI port (used by <code>sellia http</code>) <code>inspector.open</code> boolean false Auto-open inspector (used by <code>sellia http</code>) <code>database.path</code> string <code>~/.sellia/sellia.db</code> SQLite database path (server) <code>database.enabled</code> boolean true Enable database (server) <code>tunnels</code> object - Tunnel definitions <code>tunnels.&lt;name&gt;.port</code> integer required Local port <code>tunnels.&lt;name&gt;.subdomain</code> string random Custom subdomain <code>tunnels.&lt;name&gt;.local_host</code> string localhost Local host <code>tunnels.&lt;name&gt;.auth</code> string - Basic auth (user:pass) <code>tunnels.&lt;name&gt;.routes</code> array - Advanced routing rules <code>tunnels.&lt;name&gt;.routes[].path</code> string - Route path pattern <code>tunnels.&lt;name&gt;.routes[].port</code> integer - Target port for route <code>tunnels.&lt;name&gt;.routes[].host</code> string - Target host for route","path":["01 user","Configuration","Configuration File"],"tags":[]},{"location":"01-user/configuration/environment-variables/","level":1,"title":"Environment Variables","text":"<p>Configure Sellia using environment variables for secrets, environment-specific settings, and CI/CD integration. Environment variables take precedence over config file defaults but can be overridden by CLI flags.</p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#priority-order","level":2,"title":"Priority Order","text":"<p>Settings are applied in this order (later overrides earlier):</p> <ol> <li>Config file defaults (<code>sellia.yml</code>)</li> <li>Environment variables</li> <li>CLI flags</li> </ol>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#client-environment-variables","level":2,"title":"Client Environment Variables","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#server-configuration","level":3,"title":"Server Configuration","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_server","level":4,"title":"<code>SELLIA_SERVER</code>","text":"<p>Default tunnel server URL.</p> <pre><code>export SELLIA_SERVER=\"https://sellia.me\"\n</code></pre> <p>Usage: <pre><code>sellia http 8080  # Uses SELLIA_SERVER\n</code></pre></p> <p>Override with flag: <pre><code>sellia http 8080 --server https://other-server.com\n</code></pre></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#authentication","level":3,"title":"Authentication","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_api_key","level":4,"title":"<code>SELLIA_API_KEY</code>","text":"<p>API key for server authentication.</p> <pre><code>export SELLIA_API_KEY=\"your-api-key-here\"\n</code></pre> <p>Usage: <pre><code>sellia http 8080  # Uses SELLIA_API_KEY\n</code></pre></p> <p>Note: The admin API uses the same <code>SELLIA_API_KEY</code> environment variable or <code>api_key</code> config file setting. There is no separate admin API key.</p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_db_path","level":4,"title":"<code>SELLIA_DB_PATH</code>","text":"<p>Path to SQLite database for reserved subdomains (server only).</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre> <p>Default: <code>~/.sellia/sellia.db</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_no_db","level":4,"title":"<code>SELLIA_NO_DB</code>","text":"<p>Disable database and use in-memory defaults (server only).</p> <pre><code>export SELLIA_NO_DB=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>1</code> to disable</p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#inspector-settings","level":3,"title":"Inspector Settings","text":"<p>The inspector is controlled by CLI flags (<code>--no-inspector</code>, <code>--inspector-port</code>, <code>--open</code>) and config file settings rather than environment variables.</p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#log-level","level":3,"title":"Log Level","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#log_level","level":4,"title":"<code>LOG_LEVEL</code>","text":"<p>Set logging verbosity.</p> <pre><code>export LOG_LEVEL=\"debug\"  # debug, info, warn, error\n</code></pre> <p>Default: <code>warn</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#server-environment-variables","level":2,"title":"Server Environment Variables","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#basic-settings","level":3,"title":"Basic Settings","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_host","level":4,"title":"<code>SELLIA_HOST</code>","text":"<p>Host to bind to.</p> <pre><code>export SELLIA_HOST=\"0.0.0.0\"\n</code></pre> <p>Default: <code>0.0.0.0</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_port","level":4,"title":"<code>SELLIA_PORT</code>","text":"<p>Port to listen on.</p> <pre><code>export SELLIA_PORT=\"3000\"\n</code></pre> <p>Default: <code>3000</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_domain","level":4,"title":"<code>SELLIA_DOMAIN</code>","text":"<p>Base domain for subdomains.</p> <pre><code>export SELLIA_DOMAIN=\"yourdomain.com\"\n</code></pre> <p>Required for subdomain routing.</p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#authentication_1","level":3,"title":"Authentication","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_require_auth","level":4,"title":"<code>SELLIA_REQUIRE_AUTH</code>","text":"<p>Require API key authentication.</p> <pre><code>export SELLIA_REQUIRE_AUTH=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>false</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_master_key","level":4,"title":"<code>SELLIA_MASTER_KEY</code>","text":"<p>Master API key for server authentication.</p> <pre><code>export SELLIA_MASTER_KEY=\"$(openssl rand -hex 32)\"\n</code></pre> <p>Generate secure key: <pre><code>openssl rand -hex 32\n</code></pre></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#tlshttps","level":3,"title":"TLS/HTTPS","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_use_https","level":4,"title":"<code>SELLIA_USE_HTTPS</code>","text":"<p>Generate HTTPS URLs for tunnels.</p> <pre><code>export SELLIA_USE_HTTPS=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>false</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#rate-limiting","level":3,"title":"Rate Limiting","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_rate_limiting","level":4,"title":"<code>SELLIA_RATE_LIMITING</code>","text":"<p>Enable or disable rate limiting.</p> <pre><code># Enable (default)\nexport SELLIA_RATE_LIMITING=\"true\"\n\n# Disable\nexport SELLIA_RATE_LIMITING=\"false\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>true</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#landing-page","level":3,"title":"Landing Page","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#sellia_disable_landing","level":4,"title":"<code>SELLIA_DISABLE_LANDING</code>","text":"<p>Disable the public landing page UI.</p> <pre><code>export SELLIA_DISABLE_LANDING=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>false</code></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#logging","level":3,"title":"Logging","text":"<p>Use <code>LOG_LEVEL</code> to control server logging verbosity.</p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#using-environment-variables","level":2,"title":"Using Environment Variables","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#shell-session","level":3,"title":"Shell Session","text":"<p>Set in your current shell:</p> <pre><code>export SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"your-key\"\nsellia http 8080\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#permanent-configuration","level":3,"title":"Permanent Configuration","text":"<p>Add to shell profile:</p> <pre><code># ~/.bashrc or ~/.zshrc\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"your-key\"\n</code></pre> <p>Reload: <pre><code>source ~/.bashrc\n# or\nsource ~/.zshrc\n</code></pre></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#env-file","level":3,"title":".env File","text":"<p>Create <code>.env</code> in project directory:</p> <pre><code># .env\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=your-key\n</code></pre> <p>IMPORTANT: Add <code>.env</code> to <code>.gitignore</code>: <pre><code>echo \".env\" &gt;&gt; .gitignore\n</code></pre></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#docker-compose","level":3,"title":"Docker Compose","text":"<p>Use in <code>docker-compose.yml</code>:</p> <pre><code>version: '3.8'\nservices:\n  sellia:\n    image: sellia:latest\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n      - SELLIA_REQUIRE_AUTH=true\n      - SELLIA_USE_HTTPS=true\n    env_file:\n      - .env\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#systemd-service","level":3,"title":"Systemd Service","text":"<p>Use in systemd service file:</p> <pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nEnvironment=\"SELLIA_DOMAIN=yourdomain.com\"\nEnvironment=\"SELLIA_MASTER_KEY=your-key\"\nEnvironment=\"SELLIA_REQUIRE_AUTH=true\"\nEnvironment=\"SELLIA_USE_HTTPS=true\"\nExecStart=/usr/local/bin/sellia-server\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#environment-specific-configuration","level":2,"title":"Environment-Specific Configuration","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#development","level":3,"title":"Development","text":"<pre><code># .env.development\nSELLIA_SERVER=http://localhost:3000\nLOG_LEVEL=debug\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#staging","level":3,"title":"Staging","text":"<pre><code># .env.staging\nSELLIA_SERVER=https://staging.sellia.me\nSELLIA_API_KEY=${STAGING_API_KEY}\nLOG_LEVEL=info\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#production","level":3,"title":"Production","text":"<pre><code># .env.production\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=${PROD_API_KEY}\nLOG_LEVEL=warn\n</code></pre> <p>Load environment-specific file:</p> <pre><code># Development\nexport $(cat .env.development | xargs)\nsellia start\n\n# Production\nexport $(cat .env.production | xargs)\nsellia start\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#cicd-integration","level":2,"title":"CI/CD Integration","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#github-actions","level":3,"title":"GitHub Actions","text":"<pre><code># .github/workflows/deploy.yml\nname: Deploy Tunnels\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - name: Install Sellia\n        run: |\n          wget https://github.com/watzon/sellia/releases/latest/download/sellia-linux-amd64\n          chmod +x sellia-linux-amd64\n          sudo mv sellia-linux-amd64 /usr/local/bin/sellia\n\n      - name: Start tunnels\n        env:\n          SELLIA_SERVER: ${{ secrets.SELLIA_SERVER }}\n          SELLIA_API_KEY: ${{ secrets.SELLIA_API_KEY }}\n        run: sellia start\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#gitlab-ci","level":3,"title":"GitLab CI","text":"<pre><code># .gitlab-ci.yml\ndeploy:\n  script:\n    - apt-get update &amp;&amp; apt-get install -y sellia\n    - sellia http 3000 --subdomain $CI_PROJECT_NAME\n  variables:\n    SELLIA_SERVER: \"https://sellia.me\"\n    SELLIA_API_KEY: \"$SELLIA_API_KEY\"\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#jenkins","level":3,"title":"Jenkins","text":"<pre><code>// Jenkinsfile\npipeline {\n  agent any\n  environment {\n    SELLIA_SERVER = 'https://sellia.me'\n    SELLIA_API_KEY = credentials('sellia-api-key')\n  }\n  stages {\n    stage('Deploy Tunnel') {\n      steps {\n        sh 'sellia http 3000 --subdomain myapp'\n      }\n    }\n  }\n}\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#1-never-commit-secrets","level":3,"title":"1. Never Commit Secrets","text":"<p>WRONG: <pre><code># sellia.yml (committed)\napi_key: key_abc123...\n</code></pre></p> <p>CORRECT: <pre><code># sellia.yml (committed)\napi_key: ${SELLIA_API_KEY}\n</code></pre></p> <pre><code># .env (NOT committed)\nSELLIA_API_KEY=key_abc123...\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#2-use-different-keys-per-environment","level":3,"title":"2. Use Different Keys per Environment","text":"<pre><code># Development\nexport SELLIA_API_KEY=\"dev-key-abc123\"\n\n# Staging\nexport SELLIA_API_KEY=\"staging-key-def456\"\n\n# Production\nexport SELLIA_API_KEY=\"prod-key-ghi789\"\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#3-rotate-keys-regularly","level":3,"title":"3. Rotate Keys Regularly","text":"<pre><code># Generate new key\nNEW_KEY=$(openssl rand -hex 32)\n\n# Update environment\nexport SELLIA_API_KEY=\"$NEW_KEY\"\n\n# Update server configuration\n# (restart server with new key)\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#4-use-secret-management","level":3,"title":"4. Use Secret Management","text":"<p>For production, use secret management tools:</p> <ul> <li>AWS: Parameter Store, Secrets Manager</li> <li>HashiCorp: Vault</li> <li>Cloud: Google Secret Manager, Azure Key Vault</li> <li>Tools: 1Password, Bitwarden Secrets</li> </ul> <p>Example with AWS Secrets Manager:</p> <pre><code># Load secret from AWS\nexport SELLIA_API_KEY=$(aws secretsmanager get-secret-value --secret-id sellia/api-key --query SecretString --output text)\nsellia http 8080\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#examples","level":2,"title":"Examples","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#example-1-local-development","level":3,"title":"Example 1: Local Development","text":"<pre><code># .env.local\nSELLIA_SERVER=http://localhost:3000\nLOG_LEVEL=debug\n\n# Load and run\nsource .env.local\nsellia http 8080\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#example-2-team-setup","level":3,"title":"Example 2: Team Setup","text":"<p>Each team member has their own <code>.env</code>:</p> <pre><code># John's .env\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=johns-key\n</code></pre> <pre><code># Jane's .env\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=janes-key\n</code></pre> <p>Each developer has their own <code>sellia.yml</code>: <pre><code># John's sellia.yml\nserver: https://sellia.me\napi_key: jQK8Rz2m...\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: john-dev\n</code></pre></p> <p>Or use environment-specific config files: <pre><code># John runs:\nsellia start --config sellia.john.yml\n\n# Jane runs:\nsellia start --config sellia.jane.yml\n</code></pre></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#example-3-docker-deployment","level":3,"title":"Example 3: Docker Deployment","text":"<pre><code># docker-compose.yml\nversion: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - SELLIA_SERVER=${SELLIA_SERVER}\n      - SELLIA_API_KEY=${SELLIA_API_KEY}\n    depends_on:\n      - sellia-client\n\n  sellia-client:\n    image: sellia:latest\n    environment:\n      - SELLIA_SERVER=${SELLIA_SERVER}\n      - SELLIA_API_KEY=${SELLIA_API_KEY}\n    command: http 3000\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#example-4-server-deployment","level":3,"title":"Example 4: Server Deployment","text":"<pre><code># /etc/sellia/environment\nSELLIA_DOMAIN=tunnels.mycompany.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_USE_HTTPS=true\nSELLIA_RATE_LIMITING=true\nLOG_LEVEL=warn\n</code></pre> <p>Start server: <pre><code>source /etc/sellia/environment\nsellia-server\n</code></pre></p>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#variable-not-set","level":3,"title":"Variable Not Set","text":"<p>Check if variable is set:</p> <pre><code>echo $SELLIA_API_KEY\n# Should show value or empty\n</code></pre> <p>List all Sellia variables:</p> <pre><code>env | grep SELLIA\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#variable-ignored","level":3,"title":"Variable Ignored","text":"<p>Check priority order - CLI flags override env vars:</p> <pre><code># This overrides SELLIA_SERVER\nsellia http 8080 --server https://other.com\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#special-characters","level":3,"title":"Special Characters","text":"<p>Escape special characters:</p> <pre><code># Wrong\nexport SELLIA_API_KEY=key with spaces\n\n# Right\nexport SELLIA_API_KEY='key with spaces'\n\n# Or\nexport SELLIA_API_KEY=\"key with spaces\"\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#shell-profile-not-loaded","level":3,"title":"Shell Profile Not Loaded","text":"<p>If variables aren't persistent:</p> <pre><code># For bash\necho 'export SELLIA_API_KEY=\"key\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# For zsh\necho 'export SELLIA_API_KEY=\"key\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#reference-table","level":2,"title":"Reference Table","text":"","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#client-variables","level":3,"title":"Client Variables","text":"Variable Description Default <code>SELLIA_SERVER</code> Tunnel server URL - <code>SELLIA_API_KEY</code> API key for authentication - <code>SELLIA_DB_PATH</code> SQLite database path (server) <code>~/.sellia/sellia.db</code> <code>SELLIA_NO_DB</code> Disable database (server) - <code>LOG_LEVEL</code> Logging verbosity <code>warn</code>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#server-variables","level":3,"title":"Server Variables","text":"Variable Description Default <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains - <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key - <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code> <code>SELLIA_DISABLE_LANDING</code> Disable landing page <code>false</code>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Configuration File - YAML configuration</li> <li>CLI Flags - Command-line options</li> <li>Multiple Tunnels - Managing several tunnels</li> </ul>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/environment-variables/#quick-reference","level":2,"title":"Quick Reference","text":"<pre><code># Set variable\nexport SELLIA_SERVER=\"https://sellia.me\"\n\n# Use variable\nsellia http 8080\n\n# Multiple variables\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"key\"\nexport LOG_LEVEL=\"debug\"\n\n# From .env file\nsource .env\nsellia start\n\n# In Docker\ndocker run -e SELLIA_API_KEY=\"key\" sellia\n\n# In systemd\nEnvironment=\"SELLIA_SERVER=https://sellia.me\"\n</code></pre>","path":["01 user","Configuration","Environment Variables"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/","level":1,"title":"Multiple Tunnels","text":"<p>Manage multiple tunnels simultaneously for complex applications, microservices architectures, or development workflows. Sellia makes it easy to run and manage several tunnels at once.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#why-multiple-tunnels","level":2,"title":"Why Multiple Tunnels?","text":"<p>Use multiple tunnels for:</p> <ul> <li>Microservices: Each service on its own tunnel</li> <li>Full-stack apps: Separate frontend and backend tunnels</li> <li>Environment separation: Dev, staging, and production-like tunnels</li> <li>Team collaboration: Individual tunnels per developer</li> <li>Feature branches: Dynamic tunnels per Git branch</li> <li>Webhook testing: Multiple webhook receivers</li> </ul>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#creating-multiple-tunnels","level":2,"title":"Creating Multiple Tunnels","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#command-line-multiple-terminals","level":3,"title":"Command Line (Multiple Terminals)","text":"<p>Run each tunnel in a separate terminal:</p> <pre><code># Terminal 1\nsellia http 3000 --subdomain frontend --server https://sellia.me\n\n# Terminal 2\nsellia http 4000 --subdomain backend --server https://sellia.me\n\n# Terminal 3\nsellia http 5000 --subdomain database --server https://sellia.me\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#configuration-file-recommended","level":3,"title":"Configuration File (Recommended)","text":"<p>Define all tunnels in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\n\ntunnels:\n  frontend:\n    port: 3000\n    subdomain: myapp-frontend\n\n  backend:\n    port: 4000\n    subdomain: myapp-backend\n\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#configuration-file-structure","level":2,"title":"Configuration File Structure","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#basic-multiple-tunnels","level":3,"title":"Basic Multiple Tunnels","text":"<pre><code>server: https://sellia.me\napi_key: your-api-key\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  webhooks:\n    port: 5000\n    subdomain: myapp-webhooks\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#advanced-configuration","level":3,"title":"Advanced Configuration","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  # Frontend application\n  web:\n    port: 3000\n    subdomain: myapp\n\n  # API backend\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  # Admin panel\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n    auth: admin:secret123  # Protected\n\n  # Webhook receiver\n  webhooks:\n    port: 6000\n    subdomain: myapp-webhooks\n    auth: webhook-tester:webhook-secret\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#common-patterns","level":2,"title":"Common Patterns","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#1-full-stack-application","level":3,"title":"1. Full-Stack Application","text":"<p>Frontend and backend tunnels:</p> <pre><code>tunnels:\n  frontend:\n    port: 3000  # React/Vue/Angular dev server\n    subdomain: myapp\n\n  api:\n    port: 4000  # Express/Rails/Django API\n    subdomain: myapp-api\n</code></pre> <p>Frontend can call API at <code>https://myapp-api.sellia.me</code>.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#2-microservices-architecture","level":3,"title":"2. Microservices Architecture","text":"<p>Multiple independent services:</p> <pre><code>tunnels:\n  # Services\n  user-service:\n    port: 8001\n    subdomain: svc-users\n\n  auth-service:\n    port: 8002\n    subdomain: svc-auth\n\n  payment-service:\n    port: 8003\n    subdomain: svc-payments\n\n  notification-service:\n    port: 8004\n    subdomain: svc-notifications\n\n  # Frontends\n  web-app:\n    port: 3000\n    subdomain: app-web\n\n  admin-app:\n    port: 3001\n    subdomain: app-admin\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#3-environment-separation","level":3,"title":"3. Environment Separation","text":"<p>Multiple environments for testing:</p> <pre><code>tunnels:\n  # Development\n  app-dev:\n    port: 3000\n    subdomain: myapp-dev\n\n  # Staging\n  app-staging:\n    port: 3001\n    subdomain: myapp-staging\n\n  # Production mirror\n  app-prod-mirror:\n    port: 3002\n    subdomain: myapp-prod-like\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#4-team-development","level":3,"title":"4. Team Development","text":"<p>Individual developer tunnels:</p> <pre><code>server: https://sellia.me\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  # Uses developer's username\n  web:\n    port: 3000\n    subdomain: ${USER}-myapp\n\n  api:\n    port: 4000\n    subdomain: ${USER}-myapi\n</code></pre> <p>Each developer: <pre><code># John's machine\n# Creates: john-myapp.sellia.me\n# Creates: john-myapi.sellia.me\n</code></pre></p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#5-feature-branch-tunnels","level":3,"title":"5. Feature Branch Tunnels","text":"<p>Dynamic subdomains based on Git branch:</p> <pre><code># In your development workflow\nBRANCH=$(git rev-parse --abbrev-ref HEAD | sed 's/sl_/g/' | tr '/' '-')\nSUBDOMAIN=\"myapp-$BRANCH\"\n\nsellia http 3000 --subdomain \"$SUBDOMAIN\"\n</code></pre> <p>Or create a script:</p> <pre><code>#!/bin/bash\n# tunnel-branch.sh\n\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nSAFE_NAME=$(echo \"$BRANCH\" | tr '[:upper:]' '[:lower:]' | tr '/' '-')\nSUBDOMAIN=\"myapp-$SAFE_NAME\"\n\necho \"Creating tunnel for branch: $BRANCH\"\necho \"Subdomain: $SUBDOMAIN\"\n\nsellia http 3000 \\\n  --subdomain \"$SUBDOMAIN\" \\\n  --server https://sellia.me\n</code></pre> <p>Usage: <pre><code>git checkout feature/new-ui\n./tunnel-branch.sh\n# Creates: myapp-feature-new-ui.sellia.me\n</code></pre></p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#6-webhook-testing","level":3,"title":"6. Webhook Testing","text":"<p>Multiple webhook receivers:</p> <pre><code>tunnels:\n  stripe-webhooks:\n    port: 3000\n    subdomain: stripe-test\n    auth: stripe-tester:secret\n\n  github-webhooks:\n    port: 3001\n    subdomain: github-test\n    auth: github-tester:secret\n\n  slack-webhooks:\n    port: 3002\n    subdomain: slack-test\n    auth: slack-tester:secret\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#managing-multiple-tunnels","level":2,"title":"Managing Multiple Tunnels","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#starting-all-tunnels","level":3,"title":"Starting All Tunnels","text":"<pre><code>sellia start\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nStarting 3 tunnel(s)...\n\n[frontend] https://myapp.sellia.me -&gt; localhost:3000\n[api] https://myapp-api.sellia.me -&gt; localhost:4000\n[admin] https://myapp-admin.sellia.me -&gt; localhost:5000\n\nPress Ctrl+C to stop all tunnels\n</code></pre></p> <p>Note: The inspector is not available with <code>sellia start</code>. Use <code>sellia http</code> for individual tunnels with inspector functionality.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#stopping-all-tunnels","level":3,"title":"Stopping All Tunnels","text":"<p>Press <code>Ctrl+C</code> in the terminal where <code>sellia start</code> is running.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#selective-tunnel-start","level":3,"title":"Selective Tunnel Start","text":"<p>If you need to start only specific tunnels, create multiple config files:</p> <pre><code># sellia.dev.yml - Only development tunnels\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp-dev\n\n# sellia.prod.yml - Only production tunnels\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre> <p>Start selectively: <pre><code>sellia start --config sellia.dev.yml\nsellia start --config sellia.prod.yml\n</code></pre></p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#inspector-and-sellia-start","level":2,"title":"Inspector and <code>sellia start</code>","text":"<p>The request inspector is only available for <code>sellia http</code>. The <code>sellia start</code> command does not run the inspector for any tunnels.</p> <p>If you need inspector functionality for development: - Use <code>sellia http &lt;port&gt;</code> for single tunnels with inspector - The inspector provides HTTP request/response inspection at <code>http://localhost:4040</code> - Use <code>--no-inspector</code> flag to disable it when not needed</p> <p>For production deployments with multiple tunnels, <code>sellia start</code> is preferred as it's lighter weight without the inspector overhead.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#example-1-e-commerce-platform","level":3,"title":"Example 1: E-Commerce Platform","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  # Frontend stores\n  store-web:\n    port: 3000\n    subdomain: store\n\n  store-admin:\n    port: 3001\n    subdomain: store-admin\n    auth: admin:secret\n\n  # Microservices\n  users-api:\n    port: 8001\n    subdomain: svc-users\n\n  products-api:\n    port: 8002\n    subdomain: svc-products\n\n  orders-api:\n    port: 8003\n    subdomain: svc-orders\n\n  payments-api:\n    port: 8004\n    subdomain: svc-payments\n\n  # Webhooks\n  stripe-webhooks:\n    port: 5000\n    subdomain: stripe-hooks\n    auth: webhook:secret\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#example-2-monorepo-with-multiple-apps","level":3,"title":"Example 2. Monorepo with Multiple Apps","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  # App A\n  app-a-web:\n    port: 3000\n    subdomain: app-a\n\n  app-a-api:\n    port: 4000\n    subdomain: app-a-api\n\n  # App B\n  app-b-web:\n    port: 3001\n    subdomain: app-b\n\n  app-b-api:\n    port: 4001\n    subdomain: app-b-api\n\n  # Shared services\n  shared-auth:\n    port: 8000\n    subdomain: shared-auth\n\n  shared-notifications:\n    port: 8001\n    subdomain: shared-notify\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#example-3-cicd-environment","level":3,"title":"Example 3: CI/CD Environment","text":"<pre><code># sellia.ci.yml\nserver: ${SELLIA_SERVER}\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  # Pull request preview\n  pr-preview:\n    port: 3000\n    subdomain: pr-${PR_NUMBER}\n\n  # API testing\n  api-test:\n    port: 4000\n    subdomain: api-test-${PR_NUMBER}\n</code></pre> <p>Usage in CI: <pre><code>export PR_NUMBER=123\nsellia start --config sellia.ci.yml\n# Creates: pr-123.sellia.me\n</code></pre></p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#port-management","level":2,"title":"Port Management","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#port-conflicts","level":3,"title":"Port Conflicts","text":"<p>If multiple tunnels try to use the same local port, you'll get an error:</p> <pre><code>[Sellia] Error: Port 3000 already in use\n</code></pre> <p>Solution: Use different ports or stop conflicting services.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#port-ranges","level":3,"title":"Port Ranges","text":"<p>Organize tunnels by port ranges:</p> <pre><code>tunnels:\n  # Frontends: 3000-3099\n  web:\n    port: 3000\n    subdomain: web\n\n  admin:\n    port: 3001\n    subdomain: admin\n\n  # APIs: 4000-4099\n  api:\n    port: 4000\n    subdomain: api\n\n  # Services: 8000-8999\n  svc-users:\n    port: 8001\n    subdomain: svc-users\n\n  svc-payments:\n    port: 8002\n    subdomain: svc-payments\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#health-checking","level":2,"title":"Health Checking","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#verify-all-tunnels","level":3,"title":"Verify All Tunnels","text":"<p>Script to check all tunnels:</p> <pre><code>#!/bin/bash\n# check-tunnels.sh\n\nTUNNELS=(\n  \"https://myapp.sellia.me\"\n  \"https://myapp-api.sellia.me\"\n  \"https://myapp-admin.sellia.me\"\n)\n\nfor tunnel in \"${TUNNELS[@]}\"; do\n  echo \"Checking $tunnel...\"\n  if curl -s -o /dev/null -w \"%{http_code}\" \"$tunnel\" | grep -q \"200\"; then\n    echo \"✓ $tunnel is up\"\n  else\n    echo \"✗ $tunnel is down\"\n  fi\ndone\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#automation","level":2,"title":"Automation","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#start-on-system-boot","level":3,"title":"Start on System Boot","text":"<p>Linux systemd service:</p> <pre><code># /etc/systemd/system/sellia-tunnels.service\n[Unit]\nDescription=Sellia Tunnels\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nWorkingDirectory=/opt/sellia\nExecStart=/usr/local/bin/sellia start\nRestart=always\nEnvironmentFile=/opt/sellia/.env\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable: <pre><code>sudo systemctl enable sellia-tunnels\nsudo systemctl start sellia-tunnels\n</code></pre></p> <p>Note: The <code>Restart=always</code> directive provides automatic restart on failure. No additional flags are needed.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#1-use-meaningful-names","level":3,"title":"1. Use Meaningful Names","text":"<p>Choose clear, descriptive tunnel names:</p> <pre><code>tunnels:\n  # Good\n  frontend-production:\n    port: 3000\n    subdomain: myapp\n\n  # Less clear\n  tunnel1:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#2-group-related-tunnels","level":3,"title":"2. Group Related Tunnels","text":"<pre><code>tunnels:\n  # App A tunnels\n  app-a-web:\n    port: 3000\n    subdomain: app-a\n\n  app-a-api:\n    port: 4000\n    subdomain: app-a-api\n\n  # App B tunnels\n  app-b-web:\n    port: 3001\n    subdomain: app-b\n\n  app-b-api:\n    port: 4001\n    subdomain: app-b-api\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#3-use-consistent-naming","level":3,"title":"3. Use Consistent Naming","text":"<pre><code>tunnels:\n  # Pattern: &lt;app&gt;-&lt;env&gt;-&lt;type&gt;\n  shopify-staging-webhook:\n    port: 3000\n    subdomain: shopify-staging-webhook\n\n  shopify-production-webhook:\n    port: 3001\n    subdomain: shopify-prod-webhook\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#4-document-tunnel-purpose","level":3,"title":"4. Document Tunnel Purpose","text":"<p>Add comments to config:</p> <pre><code>tunnels:\n  # Main web application\n  web:\n    port: 3000\n    subdomain: myapp\n\n  # REST API backend\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  # Admin panel (protected)\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n    auth: admin:secret123\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#5-separate-configs-per-environment","level":3,"title":"5. Separate Configs per Environment","text":"<pre><code>sellia.dev.yml       # Development tunnels\nsellia.staging.yml   # Staging tunnels\nsellia.prod.yml      # Production tunnels\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#tunnel-wont-start","level":3,"title":"Tunnel Won't Start","text":"<p>Check port availability:</p> <pre><code>lsof -i :3000\n</code></pre> <p>Stop conflicting services or use different ports.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#subdomain-conflicts","level":3,"title":"Subdomain Conflicts","text":"<p>If subdomain is already in use:</p> <pre><code>[Sellia] Error: Subdomain 'myapp' already in use\n</code></pre> <p>Solution: Use different subdomains or stop conflicting tunnels.</p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#too-many-inspectors","level":3,"title":"Too Many Inspectors","text":"<p>The <code>sellia start</code> command does not launch any inspectors. If you need inspector functionality:</p> <p>Option 1: Use <code>sellia http</code> for individual tunnels <pre><code># Terminal 1\nsellia http 3000 --subdomain web\n\n# Terminal 2\nsellia http 4000 --subdomain api --no-inspector  # Disable inspector for this one\n</code></pre></p> <p>Option 2: Use <code>sellia start</code> without inspector (production) <pre><code>sellia start  # No inspector, lighter weight\n</code></pre></p>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Configuration File - YAML configuration</li> <li>Subdomain Management - Custom subdomains</li> <li>CLI Flags - Command-line options</li> </ul>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#quick-reference","level":2,"title":"Quick Reference","text":"Task Command Start all tunnels <code>sellia start</code> Start specific config <code>sellia start --config sellia.dev.yml</code> Stop all tunnels <code>Ctrl+C</code> Check tunnel status <code>ps aux \\| grep sellia</code> View all tunnels Use CLI output and logs","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#example-configurations","level":2,"title":"Example Configurations","text":"","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#minimal-setup","level":3,"title":"Minimal Setup","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#production-setup","level":3,"title":"Production Setup","text":"<pre><code>server: https://sellia.me\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/configuration/multiple-tunnels/#development-setup","level":3,"title":"Development Setup","text":"<pre><code>server: https://dev.sellia.me\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp-dev\n  api:\n    port: 4000\n    subdomain: myapi-dev\n</code></pre>","path":["01 user","Configuration","Multiple Tunnels"],"tags":[]},{"location":"01-user/deployment/","level":1,"title":"Deployment","text":"<p>Deploy Sellia to production environments.</p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#overview","level":2,"title":"Overview","text":"<p>This section covers deploying Sellia to production, from simple Docker setups to cloud deployments.</p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#quick-start-docker-compose","level":2,"title":"Quick Start (Docker Compose)","text":"<p>The easiest way to deploy Sellia is with Docker Compose:</p> <pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Create environment file\ncat &gt; .env &lt;&lt; EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nEOF\n\n# Create certs directory and add your certificates\nmkdir -p certs\n# Place cert.pem and key.pem in the certs directory\n\n# Start server\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#prerequisites","level":2,"title":"Prerequisites","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#domain-requirements","level":3,"title":"Domain Requirements","text":"<p>You need a domain (or subdomain) for Sellia:</p> <ul> <li>Option 1: Use Cloudflare (recommended, free)</li> <li>Option 2: Use any domain with DNS control</li> <li>Option 3: Use subdomain: <code>tunnel.yourdomain.com</code></li> </ul>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#tls-certificates","level":3,"title":"TLS Certificates","text":"<p>Sellia requires TLS certificates for HTTPS tunnels.</p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#cloudflare-origin-certificate-recommended","level":4,"title":"Cloudflare Origin Certificate (Recommended)","text":"<ol> <li>Add domain to Cloudflare (free tier works)</li> <li>Go to SSL/TLS → Origin Server → Create Certificate</li> <li>Select:</li> <li>Hostnames: <code>*.yourdomain.com</code> and <code>yourdomain.com</code></li> <li>Validity: 15 years</li> <li>Key format: PEM (default)</li> <li>Click Create and download certificate and key</li> <li>Place in <code>./certs/</code> directory:    <pre><code>certs/\n├── cert.pem  # Origin certificate\n└── key.pem   # Private key\n</code></pre></li> </ol>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#lets-encrypt","level":4,"title":"Let's Encrypt","text":"<pre><code># Install certbot\nsudo apt-get install certbot\n\n# Generate certificate\ncertbot certonly --standalone -d yourdomain.com -d *.yourdomain.com\n\n# Copy certificates\ncp /etc/letsencrypt/live/yourdomain.com/fullchain.pem certs/cert.pem\ncp /etc/letsencrypt/live/yourdomain.com/privkey.pem certs/key.pem\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#self-signed-testing-only","level":4,"title":"Self-Signed (Testing Only)","text":"<pre><code># Generate self-signed certificate\nopenssl req -x509 -newkey rsa:4096 -keyout certs/key.pem -out certs/cert.pem -days 365 -nodes\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#docker-deployment","level":2,"title":"Docker Deployment","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#environment-file","level":3,"title":"Environment File","text":"<p>Create <code>.env</code> file:</p> <pre><code># Domain\nSELLIA_DOMAIN=yourdomain.com\n\n# Authentication\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#docker-compose","level":3,"title":"Docker Compose","text":"<p>Use provided production compose file:</p> <pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#manual-docker","level":3,"title":"Manual Docker","text":"<pre><code># Build image\ndocker build -t sellia-server .\n\n# Run container (without reverse proxy)\ndocker run -d \\\n  --name sellia-server \\\n  --env-file .env \\\n  -p 3000:3000 \\\n  sellia-server\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#cloud-deployment","level":2,"title":"Cloud Deployment","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#digitalocean","level":3,"title":"DigitalOcean","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#create-droplet","level":4,"title":"Create Droplet","text":"<pre><code># Create droplet with Docker\ndoctl compute droplet create sellia-server \\\n  --region nyc1 \\\n  --size s-2vcpu-4gb \\\n  --image docker-20-04 \\\n  --ssh-keys &lt;your-ssh-key-fingerprint&gt;\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#deploy","level":4,"title":"Deploy","text":"<pre><code># SSH into droplet\nssh root@your-droplet-ip\n\n# Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Setup as above\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#aws","level":3,"title":"AWS","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#ec2-instance","level":4,"title":"EC2 Instance","text":"<ol> <li>Launch EC2 instance with Ubuntu</li> <li>Install Docker</li> <li>Configure security groups (port 3000)</li> <li>Deploy as above</li> </ol>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#elastic-beanstalk","level":4,"title":"Elastic Beanstalk","text":"<p>Create <code>Dockerrun.aws.json</code>:</p> <pre><code>{\n  \"AWSEBDockerrunVersion\": \"1\",\n  \"Image\": {\n    \"Name\": \"sellia-server\",\n    \"Update\": \"true\"\n  },\n  \"Ports\": [\n    {\n      \"ContainerPort\": \"3000\"\n    }\n  ],\n  \"Environment\": [\n    {\n      \"Name\": \"SELLIA_DOMAIN\",\n      \"Value\": \"yourdomain.com\"\n    },\n    {\n      \"Name\": \"SELLIA_REQUIRE_AUTH\",\n      \"Value\": \"true\"\n    },\n    {\n      \"Name\": \"SELLIA_MASTER_KEY\",\n      \"Value\": \"your-master-key\"\n    }\n  ]\n}\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#google-cloud-platform","level":3,"title":"Google Cloud Platform","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#cloud-run","level":4,"title":"Cloud Run","text":"<pre><code># Build image\ngcloud builds submit --tag gcr.io/PROJECT-ID/sellia-server\n\n# Deploy\ngcloud run deploy sellia-server \\\n  --image gcr.io/PROJECT-ID/sellia-server \\\n  --platform managed \\\n  --region us-central1 \\\n  --allow-unauthenticated\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#heroku","level":3,"title":"Heroku","text":"<pre><code># Create app\nheroku create sellia-server\n\n# Set environment variables\nheroku config:set SELLIA_DOMAIN=yourdomain.com\nheroku config:set SELLIA_MASTER_KEY=$(openssl rand -hex 32)\nheroku config:set SELLIA_REQUIRE_AUTH=true\n\n# Deploy\ngit push heroku main\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#dns-configuration","level":2,"title":"DNS Configuration","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#cloudflare-recommended","level":3,"title":"Cloudflare (Recommended)","text":"<ol> <li>Add domain to Cloudflare</li> <li>Point DNS to your server IP</li> <li>Enable proxy (orange cloud)</li> <li>SSL/TLS → Full (strict)</li> <li>Disable \"Universal SSL\" if using origin certificates</li> </ol>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#traditional-dns","level":3,"title":"Traditional DNS","text":"<pre><code>Type: A\nName: tunnel (or your subdomain)\nValue: your-server-ip\nTTL: 300\n</code></pre> <p>For wildcard subdomains:</p> <pre><code>Type: CNAME\nName: *\nValue: tunnel.yourdomain.com\nTTL: 300\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#reverse-proxy","level":2,"title":"Reverse Proxy","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#nginx","level":3,"title":"Nginx","text":"<pre><code>server {\n    listen 80;\n    server_name tunnel.yourdomain.com *.tunnel.yourdomain.com;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#caddy","level":3,"title":"Caddy","text":"<pre><code>tunnel.yourdomain.com, *.tunnel.yourdomain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#monitoring","level":2,"title":"Monitoring","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#health-checks","level":3,"title":"Health Checks","text":"<p>Configure health checks:</p> <pre><code># Check if server is responding\ncurl -f http://localhost:3000/health || echo \"Server down\"\n</code></pre> <p>Or via Caddy/Nginx reverse proxy: <pre><code>curl -f https://yourdomain.com/health || echo \"Server down\"\n</code></pre></p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#logging","level":3,"title":"Logging","text":"<pre><code># View logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Rotate logs\nlogrotate /etc/logrotate.d/sellia\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#metrics","level":3,"title":"Metrics","text":"<p>Consider integrating with:</p> <ul> <li>Prometheus + Grafana</li> <li>DataDog</li> <li>New Relic</li> <li>CloudWatch (AWS)</li> </ul>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#security","level":2,"title":"Security","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#firewall","level":3,"title":"Firewall","text":"<pre><code># Configure UFW\nufw default deny incoming\nufw default allow outgoing\nufw allow ssh\nufw allow 3000/tcp\nufw enable\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#ssltls","level":3,"title":"SSL/TLS","text":"<ul> <li>Always use HTTPS in production</li> <li>Keep certificates up to date</li> <li>Use strong ciphers</li> <li>Enable HSTS</li> </ul>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#authentication","level":3,"title":"Authentication","text":"<ul> <li>Always require authentication</li> <li>Use strong master key</li> <li>Rotate API keys regularly</li> <li>Monitor authentication attempts</li> </ul>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#backup","level":2,"title":"Backup","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#configuration-backup","level":3,"title":"Configuration Backup","text":"<pre><code># Backup script\n#!/bin/bash\nDATE=$(date +%Y%m%d)\ntar -czf sellia-backup-$DATE.tar.gz \\\n  .env \\\n  sellia.yml \\\n  certs/\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#automated-backup","level":3,"title":"Automated Backup","text":"<pre><code># Add to crontab\n0 2 * * * /path/to/backup-script.sh\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#scaling","level":2,"title":"Scaling","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#multiple-servers","level":3,"title":"Multiple Servers","text":"<p>For high availability:</p> <ol> <li>Deploy multiple Sellia servers</li> <li>Use load balancer (nginx, HAProxy)</li> <li>Configure shared storage</li> <li>Health checks for failover</li> </ol>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#load-balancer-example-nginx","level":3,"title":"Load Balancer Example (Nginx)","text":"<pre><code>upstream sellia_backend {\n    server sellia1.example.com:3000;\n    server sellia2.example.com:3000;\n    server sellia3.example.com:3000;\n}\n\nserver {\n    listen 80;\n    server_name tunnel.yourdomain.com;\n\n    location / {\n        proxy_pass http://sellia_backend;\n    }\n}\n</code></pre>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#certificate-issues","level":3,"title":"Certificate Issues","text":"<p>Problem: Certificate not loading</p> <p>Solutions: - Verify certificate files exist - Check file permissions (644) - Verify file format (PEM) - Check certificate expiration</p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#dns-issues","level":3,"title":"DNS Issues","text":"<p>Problem: Subdomains not resolving</p> <p>Solutions: - Verify DNS configuration - Check for wildcard DNS record - Wait for DNS propagation (up to 48 hours) - Use <code>dig</code> to verify DNS</p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#connection-issues","level":3,"title":"Connection Issues","text":"<p>Problem: Clients can't connect</p> <p>Solutions: - Check firewall rules - Verify server is running - Check DNS resolution - Verify port is accessible</p>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Admin Guide - Ongoing server administration</li> <li>Configuration - Detailed configuration options</li> <li>Security - Security best practices</li> </ul>","path":["01 user","Deployment"],"tags":[]},{"location":"01-user/deployment/caddy/","level":1,"title":"Caddy Reverse Proxy","text":"<p>Caddy is a modern, HTTPS-by-default reverse proxy that works well with Sellia. This guide covers configuring Caddy for production deployments.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#overview","level":2,"title":"Overview","text":"<p>Caddy handles:</p> <ul> <li>TLS termination - Automatic HTTPS with Let's Encrypt</li> <li>HTTP/2 to HTTP/1.1 - Downgrade for WebSocket compatibility</li> <li>Reverse proxy - Forward requests to Sellia server</li> <li>Wildcard subdomains - Handle all tunnel subdomains</li> <li>Static file serving - Health checks and status endpoints</li> </ul>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#quick-start","level":2,"title":"Quick Start","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#using-docker-compose-recommended","level":3,"title":"Using Docker Compose (Recommended)","text":"<p>The easiest way to deploy Sellia with Caddy:</p> <pre><code># docker-compose.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    environment:\n      - SELLIA_USE_HTTPS=true\n      - SELLIA_REQUIRE_AUTH=true\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n    env_file: .env\n    networks:\n      - sellia-internal\n    restart: unless-stopped\n\n  caddy:\n    image: caddy:2-alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/Caddyfile:/etc/caddy/Caddyfile:ro\n      - ./certs:/certs:ro\n      - caddy-data:/data\n      - caddy-config:/config\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN}\n    networks:\n      - sellia-internal\n    depends_on:\n      - sellia-server\n    restart: unless-stopped\n\nvolumes:\n  caddy-data:\n  caddy_config:\n\nnetworks:\n  sellia-internal:\n    driver: bridge\n</code></pre> <p>Run:</p> <pre><code># Create .env file\ncat &gt; .env &lt;&lt;EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=your-master-key\nEOF\n\n# Create certs directory and add certificates\nmkdir -p certs\n# Place cert.pem and key.pem in certs/\n\n# Start\ndocker compose up -d\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#caddyfile-configuration","level":2,"title":"Caddyfile Configuration","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#with-custom-certificates","level":3,"title":"With Custom Certificates","text":"<p>Use this when you have your own TLS certificates (e.g., Cloudflare Origin Certificate):</p> <pre><code># /path/to/Caddyfile\n{\n    # Disable HTTP/3 - it can cause request cancellation issues with tunneled traffic\n    servers {\n        protocols h1 h2\n    }\n}\n\n# HTTP to HTTPS redirect\n:80 {\n    respond /health 200\n\n    # Redir all other HTTP requests to HTTPS\n    @host {\n        host {args.0}\n        not {args.0} :8080\n    }\n    redir @host https://{host}{uri}\n}\n\n# Wildcard for all tunnel subdomains\n*.{$SELLIA_DOMAIN} {\n    reverse_proxy sellia-server:3000 {\n        # Force HTTP/1.1 for backend connection (required for WebSocket)\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    tls /certs/cert.pem /certs/key.pem\n\n    log {\n        output file /var/log/caddy/tunnels.log\n        format json\n    }\n}\n\n# Base domain for WebSocket connections and health checks\n{$SELLIA_DOMAIN} {\n    reverse_proxy sellia-server:3000 {\n        # Force HTTP/1.1 for backend connection (required for WebSocket)\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    tls /certs/cert.pem /certs/key.pem\n\n    log {\n        output file /var/log/caddy/sellia.log\n        format json\n    }\n}\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#with-lets-encrypt-automatic-https","level":3,"title":"With Let's Encrypt (Automatic HTTPS)","text":"<p>For automatic TLS certificate management:</p> <pre><code>{\n    # Disable HTTP/3\n    servers {\n        protocols h1 h2\n    }\n\n    # Email for Let's Encrypt notifications\n    email admin@yourdomain.com\n}\n\n# HTTP to HTTPS redirect\n:80 {\n    respond /health 200\n\n    @host {\n        host {args.0}\n        not {args.0} :8080\n    }\n    redir @host https://{host}{uri}\n}\n\n# Base domain\nyourdomain.com {\n    reverse_proxy sellia-server:3000 {\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    log {\n        output file /var/log/caddy/sellia.log\n        format json\n    }\n}\n\n# Wildcard subdomains\n*.yourdomain.com {\n    reverse_proxy sellia-server:3000 {\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    log {\n        output file /var/log/caddy/tunnels.log\n        format json\n    }\n}\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#certificate-setup","level":2,"title":"Certificate Setup","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#cloudflare-origin-certificate","level":3,"title":"Cloudflare Origin Certificate","text":"<p>Recommended for use with Cloudflare CDN:</p> <ol> <li>Generate certificate in Cloudflare:</li> <li>Go to SSL/TLS &gt; Origin Server &gt; Create Certificate</li> <li>Select wildcard: <code>*.yourdomain.com</code></li> <li> <p>Copy certificate and key</p> </li> <li> <p>Save certificate files:</p> </li> </ol> <pre><code>mkdir -p certs\nnano certs/cert.pem   # Paste certificate\nnano certs/key.pem    # Paste private key\n</code></pre> <ol> <li>Set permissions:</li> </ol> <pre><code>chmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre> <ol> <li>Update Caddyfile:</li> </ol> <pre><code>tls /certs/cert.pem /certs/key.pem\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#lets-encrypt-automatic-certificates","level":3,"title":"Let's Encrypt Automatic Certificates","text":"<p>Caddy will automatically obtain and renew certificates from Let's Encrypt:</p> <p>Requirements: - DNS A record for <code>yourdomain.com</code> → your server IP - DNS A record for <code>*.yourdomain.com</code> → your server IP (if supported) - Port 80 and 443 accessible from internet</p> <p>No configuration needed - Caddy handles everything.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#http3-disabled","level":3,"title":"HTTP/3 Disabled","text":"<pre><code>servers {\n    protocols h1 h2\n}\n</code></pre> <p>Why: HTTP/3 (QUIC) can cause WebSocket connection issues with tunneled traffic.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#http11-backend","level":3,"title":"HTTP/1.1 Backend","text":"<pre><code>transport http {\n    versions h1c1\n}\n</code></pre> <p>Why: Sellia's WebSocket server uses HTTP/1.1. HTTP/2 can cause issues with WebSocket upgrades.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#headers","level":3,"title":"Headers","text":"<pre><code>header_up Host {host}\nheader_up X-Real-IP {remote_host}\nheader_up X-Forwarded-For {remote_host}\nheader_up X-Forwarded-Proto {scheme}\n</code></pre> <p>Why: Pass original client information to Sellia server for logging and authentication.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#no-buffering","level":3,"title":"No Buffering","text":"<pre><code>flush_interval -1\n</code></pre> <p>Why: Disable buffering for real-time WebSocket traffic and large file uploads.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#logging","level":2,"title":"Logging","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#json-format","level":3,"title":"JSON Format","text":"<pre><code>log {\n    output file /var/log/caddy/tunnels.log\n    format json\n}\n</code></pre> <p>Benefits: - Structured logs for parsing - Easy integration with log aggregators (ELK, Splunk, etc.) - Includes timestamps, status codes, response times</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#log-rotation","level":3,"title":"Log Rotation","text":"<p>Configure logrotate:</p> <pre><code># /etc/logrotate.d/caddy\n/var/log/caddy/*.log {\n    daily\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 caddy caddy\n    sharedscripts\n    postrotate\n        systemctl reload caddy &gt; /dev/null 2&gt;&amp;1 || true\n    endscript\n}\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#health-checks","level":2,"title":"Health Checks","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#simple-health-check","level":3,"title":"Simple Health Check","text":"<pre><code>:80 {\n    respond /health 200\n}\n</code></pre> <p>Returns 200 OK at <code>http://your-domain.com/health</code>.</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#docker-healthcheck","level":3,"title":"Docker Healthcheck","text":"<pre><code># docker-compose.yml\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--spider\", \"-q\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 5s\n      retries: 3\n      start_period: 5s\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#performance-tuning","level":2,"title":"Performance Tuning","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#connection-limits","level":3,"title":"Connection Limits","text":"<pre><code>{\n    servers {\n        protocols h1 h2\n        max_conns 1000\n    }\n}\n</code></pre>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#timeouts","level":3,"title":"Timeouts","text":"<pre><code>reverse_proxy sellia-server:3000 {\n    transport http {\n        read_timeout 300s\n        write_timeout 300s\n        dial_timeout 10s\n    }\n}\n</code></pre> <p>Recommended for Sellia: - <code>read_timeout</code>: 300s (5 minutes) - For long-lived WebSocket connections - <code>write_timeout</code>: 300s (5 minutes) - For large uploads - <code>dial_timeout</code>: 10s - Backend connection timeout</p>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#websocket-connection-failures","level":3,"title":"WebSocket Connection Failures","text":"<p>Symptoms: Tunnels connect but immediately disconnect.</p> <p>Solutions:</p> <ol> <li> <p>Verify HTTP/1.1 transport: <pre><code>transport http {\n    versions h1c1\n}\n</code></pre></p> </li> <li> <p>Disable HTTP/3: <pre><code>servers {\n    protocols h1 h2\n}\n</code></pre></p> </li> <li> <p>Check for buffering: <pre><code>flush_interval -1\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#tls-certificate-errors","level":3,"title":"TLS Certificate Errors","text":"<p>Symptoms: <code>502 Bad Gateway</code> or certificate warnings.</p> <p>Solutions:</p> <ol> <li> <p>Verify certificate files exist: <pre><code>ls -la certs/\n</code></pre></p> </li> <li> <p>Check certificate validity: <pre><code>openssl x509 -in certs/cert.pem -text -noout\n</code></pre></p> </li> <li> <p>Check Caddy logs: <pre><code>docker-compose logs caddy\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#dns-issues","level":3,"title":"DNS Issues","text":"<p>Symptoms: Tunnels not accessible via subdomain.</p> <p>Solutions:</p> <ol> <li> <p>Verify DNS A record: <pre><code>dig yourdomain.com\ndig myapp.yourdomain.com\n</code></pre></p> </li> <li> <p>For wildcard DNS:</p> </li> <li>Add A record: <code>*.yourdomain.com</code> → your server IP</li> <li> <p>Or use CNAME: <code>*.yourdomain.com</code> → <code>yourdomain.com</code></p> </li> <li> <p>Check Cloudflare proxy (orange cloud):</p> </li> <li>Disable for Sellia subdomains if using WebSocket</li> <li>Or use \"DNS only\" (grey cloud)</li> </ol>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#port-conflicts","level":3,"title":"Port Conflicts","text":"<p>Symptoms: Caddy fails to start.</p> <p>Solutions:</p> <ol> <li> <p>Check ports in use: <pre><code>sudo lsof -i :80\nsudo lsof -i :443\n</code></pre></p> </li> <li> <p>Stop conflicting services: <pre><code>sudo systemctl stop nginx\nsudo systemctl stop apache\n</code></pre></p> </li> <li> <p>Use different ports (not recommended): <pre><code>:8080 {\n    # ...\n}\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#production-checklist","level":2,"title":"Production Checklist","text":"<ul> <li> TLS certificates configured (Let's Encrypt or custom)</li> <li> DNS records pointing to server (A records)</li> <li> Wildcard DNS for subdomains (or individual records)</li> <li> HTTP/3 disabled in Caddyfile</li> <li> HTTP/1.1 transport for backend</li> <li> Log rotation configured</li> <li> Health check endpoint accessible</li> <li> Firewall allows ports 80 and 443</li> <li> SELinux/AppArmor configured (if applicable)</li> <li> Caddy service auto-start on boot</li> <li> Backup strategy for Caddy data</li> </ul>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/caddy/#see-also","level":2,"title":"See Also","text":"<ul> <li>Nginx Configuration - Alternative to Caddy</li> <li>Production Checklist - Complete production guide</li> <li>Server Auth - Authentication setup</li> <li>Database Configuration - Database setup</li> </ul>","path":["01 user","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/docker/","level":1,"title":"Docker Deployment","text":"<p>Deploy Sellia using Docker or Docker Compose for production. Containerization provides isolation, easy deployment, and consistent environments across development, staging, and production.</p>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#prerequisites","level":2,"title":"Prerequisites","text":"<ul> <li>Docker &gt;= 20.10</li> <li>Docker Compose &gt;= 2.0</li> <li>Domain name with DNS configured</li> <li>TLS certificates (see TLS Certificates guide)</li> </ul>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#quick-start","level":2,"title":"Quick Start","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#using-docker-compose-recommended","level":3,"title":"Using Docker Compose (Recommended)","text":"<p>The fastest way to deploy Sellia:</p> <pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Create environment file\ncat &gt; .env &lt;&lt; EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nEOF\n\n# Create certs directory and add your certificates\nmkdir -p certs\n# Place cert.pem and key.pem in the certs directory\n\n# Start the server\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#verify-deployment","level":3,"title":"Verify Deployment","text":"<pre><code># Check logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Check status\ndocker compose -f docker-compose.prod.yml ps\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#docker-compose-configuration","level":2,"title":"Docker Compose Configuration","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#production-docker-compose","level":3,"title":"Production Docker Compose","text":"<p>The <code>docker-compose.prod.yml</code> file:</p> <pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    container_name: sellia-server\n    restart: unless-stopped\n    env_file: .env\n    networks:\n      - sellia-internal\n    environment:\n      - SELLIA_USE_HTTPS=true\n      - SELLIA_REQUIRE_AUTH=true\n\n  caddy:\n    image: caddy:2-alpine\n    container_name: sellia-caddy\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/Caddyfile:/etc/caddy/Caddyfile:ro\n      - ./certs:/certs:ro\n      - caddy_data:/data\n      - caddy_config:/config\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN:-localhost}\n    networks:\n      - sellia-internal\n    depends_on:\n      - sellia-server\n\nnetworks:\n  sellia-internal:\n    driver: bridge\n\nvolumes:\n  caddy_data:\n  caddy_config:\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#environment-file","level":3,"title":"Environment File","text":"<p>Create <code>.env</code> file:</p> <pre><code># .env\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#building-the-docker-image","level":2,"title":"Building the Docker Image","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#build-from-source","level":3,"title":"Build from Source","text":"<pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Build image\ndocker build -t sellia:latest .\n\n# Or with build arguments\ndocker build \\\n  --build-arg VERSION=1.0.0 \\\n  --build-arg BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ') \\\n  -t sellia:latest .\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#dockerfile","level":3,"title":"Dockerfile","text":"<p>The official Dockerfile:</p> <pre><code># Sellia Server - Multi-stage Docker build for minimal production image\n\n# =============================================================================\n# Stage 1: Build Crystal server binary\n# =============================================================================\nFROM 84codes/crystal:1.18.2-alpine AS builder\n\n# Install build dependencies\nRUN apk add --no-cache --update \\\n    yaml-static \\\n    openssl-libs-static \\\n    openssl-dev \\\n    zlib-static \\\n    sqlite-dev \\\n    sqlite-static \\\n    pcre-dev \\\n    gc-dev \\\n    libevent-static \\\n    libxml2-dev\n\nWORKDIR /app\n\n# Copy shard files first for layer caching\nCOPY shard.yml shard.lock ./\nRUN shards install --production\n\n# Copy source code\nCOPY src/ src/\n\n# Build server binary (static for Alpine)\nRUN mkdir -p bin &amp;&amp; crystal build src/server/main.cr -o bin/sellia-server \\\n    --release --static --no-debug\n\n# =============================================================================\n# Stage 2: Minimal runtime image\n# =============================================================================\nFROM alpine:3.20 AS runtime\n\n# Add CA certificates for HTTPS and create non-root user\nRUN apk add --no-cache ca-certificates tzdata \\\n    &amp;&amp; addgroup -g 1000 sellia \\\n    &amp;&amp; adduser -u 1000 -G sellia -s /bin/sh -D sellia\n\nWORKDIR /app\n\n# Copy server binary from builder\nCOPY --from=builder /app/bin/sellia-server /usr/local/bin/sellia-server\n\n# Set ownership\nRUN chown -R sellia:sellia /app\n\nUSER sellia\n\n# Default environment variables\nENV SELLIA_HOST=0.0.0.0 \\\n    SELLIA_PORT=3000 \\\n    SELLIA_DOMAIN=localhost\n\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=5s --start-period=5s --retries=3 \\\n    CMD wget --no-verbose --tries=1 --spider http://localhost:${SELLIA_PORT}/health || exit 1\n\nENTRYPOINT [\"sellia-server\"]\nCMD [\"--host\", \"0.0.0.0\"]\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#docker-run-commands","level":2,"title":"Docker Run Commands","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#basic-server","level":3,"title":"Basic Server","text":"<pre><code>docker run -d \\\n  --name sellia-server \\\n  -p 3000:3000 \\\n  -e SELLIA_DOMAIN=yourdomain.com \\\n  -e SELLIA_MASTER_KEY=$(openssl rand -hex 32) \\\n  -e SELLIA_REQUIRE_AUTH=true \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#with-environment-file","level":3,"title":"With Environment File","text":"<pre><code>docker run -d \\\n  --name sellia-server \\\n  --env-file .env \\\n  -p 3000:3000 \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#interactive-testing","level":3,"title":"Interactive Testing","text":"<pre><code>docker run -it \\\n  --rm \\\n  -p 3000:3000 \\\n  -e SELLIA_DOMAIN=yourdomain.com \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#docker-compose-workflows","level":2,"title":"Docker Compose Workflows","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#start-server","level":3,"title":"Start Server","text":"<pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#stop-server","level":3,"title":"Stop Server","text":"<pre><code>docker compose -f docker-compose.prod.yml down\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#view-logs","level":3,"title":"View Logs","text":"<pre><code># Follow logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Last 100 lines\ndocker compose -f docker-compose.prod.yml logs --tail 100\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#restart-server","level":3,"title":"Restart Server","text":"<pre><code>docker compose -f docker-compose.prod.yml restart\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#update-deployment","level":3,"title":"Update Deployment","text":"<pre><code># Pull latest changes\ngit pull\n\n# Rebuild image\ndocker compose -f docker-compose.prod.yml build\n\n# Restart with new image\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#multi-stage-deployment","level":2,"title":"Multi-Stage Deployment","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#development-staging-production","level":3,"title":"Development, Staging, Production","text":"<p>Create multiple compose files:</p> <pre><code># docker-compose.dev.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - SELLIA_DOMAIN=localhost\n      - SELLIA_USE_HTTPS=false\n      - LOG_LEVEL=debug\n</code></pre> <pre><code># docker-compose.staging.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    environment:\n      - SELLIA_DOMAIN=staging.yourdomain.com\n      - SELLIA_USE_HTTPS=true\n      - LOG_LEVEL=debug\n</code></pre> <pre><code># docker-compose.prod.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n      - SELLIA_USE_HTTPS=true\n      - LOG_LEVEL=warn\n</code></pre> <p>Deploy to each environment:</p> <pre><code># Development\ndocker compose -f docker-compose.dev.yml up -d\n\n# Staging\ndocker compose -f docker-compose.staging.yml up -d\n\n# Production\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#reverse-proxy-setup","level":2,"title":"Reverse Proxy Setup","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#with-nginx","level":3,"title":"With Nginx","text":"<pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    expose:\n      - \"3000\"\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n    restart: unless-stopped\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./certs:/etc/nginx/certs:ro\n    depends_on:\n      - sellia-server\n    restart: unless-stopped\n</code></pre> <p>Nginx configuration (<code>nginx.conf</code>):</p> <pre><code>events {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream sellia {\n        server sellia-server:3000;\n    }\n\n    server {\n        listen 80;\n        server_name yourdomain.com *.yourdomain.com;\n        return 301 https://$server_name$request_uri;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name yourdomain.com *.yourdomain.com;\n\n        ssl_certificate /etc/nginx/certs/cert.pem;\n        ssl_certificate_key /etc/nginx/certs/key.pem;\n\n        location / {\n            proxy_pass http://sellia;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"upgrade\";\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n    }\n}\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#with-traefik","level":3,"title":"With Traefik","text":"<pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    expose:\n      - \"3000\"\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.sellia.rule=HostRegexp(`{subdomain:.+}.yourdomain.com`)\"\n      - \"traefik.http.routers.sellia.entrypoints=websecure\"\n      - \"traefik.http.routers.sellia.tls.certresolver=letsencrypt\"\n    networks:\n      - traefik-network\n\n  traefik:\n    image: traefik:v2.10\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./traefik.yml:/etc/traefik/traefik.yml\n      - ./acme.json:/acme.json\n    networks:\n      - traefik-network\n\nnetworks:\n  traefik-network:\n    external: true\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#health-checks","level":2,"title":"Health Checks","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#docker-healthcheck","level":3,"title":"Docker Healthcheck","text":"<pre><code>services:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--spider\", \"-q\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 5s\n      retries: 3\n      start_period: 5s\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#manual-health-check","level":3,"title":"Manual Health Check","text":"<pre><code># Check if container is healthy\ndocker inspect --format='{{.State.Health.Status}}' sellia-server\n\n# Check health endpoint\ncurl http://localhost:3000/health\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#volume-management","level":2,"title":"Volume Management","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#tls-certificates","level":3,"title":"TLS Certificates","text":"<p>In production with Caddy/Nginx reverse proxy, certificates are mounted to the reverse proxy container, not Sellia:</p> <pre><code># For Caddy (docker-compose.prod.yml)\nvolumes:\n  - ./certs:/certs:ro\n\n# For Nginx\nvolumes:\n  - ./certs:/etc/nginx/certs:ro\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#persistent-data","level":3,"title":"Persistent Data","text":"<p>Sellia uses SQLite for tunnel registry and reserved subdomains. Persist the database:</p> <pre><code>volumes:\n  - sellia-data:/var/lib/sellia\n\nvolumes:\n  sellia-data:\n    driver: local\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#resource-limits","level":2,"title":"Resource Limits","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#cpu-and-memory-limits","level":3,"title":"CPU and Memory Limits","text":"<pre><code>services:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    deploy:\n      resources:\n        limits:\n          cpus: '1.0'\n          memory: 1G\n        reservations:\n          cpus: '0.5'\n          memory: 512M\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#logging","level":2,"title":"Logging","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#view-logs_1","level":3,"title":"View Logs","text":"<pre><code># All logs\ndocker compose logs -f\n\n# Specific service\ndocker compose logs -f sellia-server\n\n# Last 100 lines\ndocker compose logs --tail 100 sellia-server\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#log-rotation","level":3,"title":"Log Rotation","text":"<p>Configure Docker daemon for log rotation (<code>/etc/docker/daemon.json</code>):</p> <pre><code>{\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\n</code></pre> <p>Restart Docker:</p> <pre><code>sudo systemctl restart docker\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#1-read-only-certificates","level":3,"title":"1. Read-Only Certificates","text":"<p>Mount certificates as read-only:</p> <pre><code>volumes:\n  - ./certs:/app/certs:ro\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#2-non-root-user","level":3,"title":"2. Non-Root User","text":"<p>Run as non-root user (if supported by image):</p> <pre><code>services:\n  sellia-server:\n    user: \"1000:1000\"\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#3-drop-capabilities","level":3,"title":"3. Drop Capabilities","text":"<pre><code>services:\n  sellia-server:\n    cap_drop:\n      - ALL\n    cap_add:\n      - NET_BIND_SERVICE\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#4-network-isolation","level":3,"title":"4. Network Isolation","text":"<p>Use dedicated network:</p> <pre><code>services:\n  sellia-server:\n    networks:\n      - sellia-net\n\nnetworks:\n  sellia-net:\n    driver: bridge\n    internal: false\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#5-secrets-management","level":3,"title":"5. Secrets Management","text":"<p>Use Docker secrets (Swarm mode):</p> <pre><code>version: '3.8'\n\nsecrets:\n  master_key:\n    external: true\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    secrets:\n      - master_key\n    environment:\n      - SELLIA_MASTER_KEY_FILE=/run/secrets/master_key\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#cicd-integration","level":2,"title":"CI/CD Integration","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#github-actions","level":3,"title":"GitHub Actions","text":"<pre><code>name: Deploy Sellia\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Deploy to server\n        uses: appleboy/ssh-action@master\n        with:\n          host: ${{ secrets.HOST }}\n          username: ${{ secrets.USERNAME }}\n          key: ${{ secrets.SSH_KEY }}\n          script: |\n            cd /opt/sellia\n            git pull\n            docker compose -f docker-compose.prod.yml up -d --build\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#gitlab-ci","level":3,"title":"GitLab CI","text":"<pre><code>deploy:\n  stage: deploy\n  script:\n    - ssh user@server \"cd /opt/sellia &amp;&amp; docker compose -f docker-compose.prod.yml up -d --build\"\n  only:\n    - main\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#monitoring","level":2,"title":"Monitoring","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#metrics-endpoint","level":3,"title":"Metrics Endpoint","text":"<p>Sellia may expose metrics (future feature):</p> <pre><code>services:\n  sellia-server:\n    ports:\n      - \"9090:9090\"  # Metrics port\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#prometheus-integration","level":3,"title":"Prometheus Integration","text":"<pre><code>services:\n  prometheus:\n    image: prom/prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n    ports:\n      - \"9091:9090\"\n</code></pre> <p>Prometheus config:</p> <pre><code>scrape_configs:\n  - job_name: 'sellia'\n    static_configs:\n      - targets: ['sellia-server:9090']\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#container-wont-start","level":3,"title":"Container Won't Start","text":"<pre><code># Check logs\ndocker compose logs sellia-server\n\n# Check container status\ndocker compose ps\n\n# Inspect container\ndocker inspect sellia-server\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#permission-issues","level":3,"title":"Permission Issues","text":"<pre><code># Check file permissions\nls -la certs/\n\n# Fix permissions\nchmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<pre><code># Check what's using the port\nlsof -i :80\nlsof -i :443\n\n# Stop conflicting service\nsudo systemctl stop nginx\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#dns-issues","level":3,"title":"DNS Issues","text":"<pre><code># Verify DNS configuration\ndig yourdomain.com\ndig *.yourdomain.com\n\n# Check Cloudflare/SaaS DNS settings\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#backup-and-restore","level":2,"title":"Backup and Restore","text":"","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#backup","level":3,"title":"Backup","text":"<pre><code># Backup certificates and configuration\ntar -czf sellia-backup-$(date +%Y%m%d).tar.gz \\\n  .env \\\n  docker-compose.prod.yml \\\n  certs/\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#restore","level":3,"title":"Restore","text":"<pre><code># Extract backup\ntar -xzf sellia-backup-20241230.tar.gz\n\n# Restart server\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>TLS Certificates - Certificate setup</li> <li>Configuration - Configuration files</li> <li>Self-Hosting - Server setup</li> </ul>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/docker/#quick-reference","level":2,"title":"Quick Reference","text":"Task Command Start server <code>docker compose up -d</code> Stop server <code>docker compose down</code> View logs <code>docker compose logs -f</code> Rebuild <code>docker compose build</code> Update <code>git pull &amp;&amp; docker compose up -d --build</code> Status <code>docker compose ps</code> Health check <code>curl http://localhost/health</code>","path":["01 user","Deployment","Docker Deployment"],"tags":[]},{"location":"01-user/deployment/nginx/","level":1,"title":"Nginx Reverse Proxy","text":"<p>Nginx is a high-performance reverse proxy that works well with Sellia. This guide covers configuring Nginx for production deployments.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#overview","level":2,"title":"Overview","text":"<p>Nginx handles:</p> <ul> <li>TLS termination - HTTPS with your certificates</li> <li>HTTP/2 to HTTP/1.1 - Downgrade for WebSocket compatibility</li> <li>Reverse proxy - Forward requests to Sellia server</li> <li>Wildcard subdomains - Handle all tunnel subdomains</li> <li>Static file serving - Health checks and status endpoints</li> </ul>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#quick-start","level":2,"title":"Quick Start","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#prerequisites","level":3,"title":"Prerequisites","text":"<pre><code># Install Nginx\nsudo apt update\nsudo apt install nginx\n\n# Install Certbot for Let's Encrypt\nsudo apt install certbot python3-certbot-nginx\n\n# Ensure Nginx is running\nsudo systemctl enable nginx\nsudo systemctl start nginx\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#configuration","level":2,"title":"Configuration","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#full-configuration-file","level":3,"title":"Full Configuration File","text":"<p>This configuration is available at <code>/deploy/nginx.conf</code> in the Sellia repository. Replace <code>YOUR_DOMAIN</code> with your actual domain:</p> <pre><code># Upstream for Sellia server\nupstream sellia_backend {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name yourdomain.com *.yourdomain.com;\n\n    location /.well-known/acme-challenge/ {\n        root /var/www/certbot;\n    }\n\n    location / {\n        return 301 https://$host$request_uri;\n    }\n}\n\n# HTTPS server - handles both main domain and subdomains\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name yourdomain.com *.yourdomain.com;\n\n    # SSL Configuration\n    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;\n    ssl_session_timeout 1d;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_tickets off;\n\n    # Modern TLS configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # HSTS (uncomment after testing)\n    # add_header Strict-Transport-Security \"max-age=63072000\" always;\n\n    # Proxy settings\n    proxy_http_version 1.1;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n\n    # WebSocket support\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n\n    # Timeouts for long-lived connections\n    proxy_connect_timeout 60s;\n    proxy_send_timeout 300s;\n    proxy_read_timeout 300s;\n\n    # Buffering settings\n    proxy_buffering off;\n    proxy_request_buffering off;\n\n    # Main location\n    location / {\n        proxy_pass http://sellia_backend;\n    }\n\n    # Health check endpoint\n    location /health {\n        proxy_pass http://sellia_backend;\n        access_log off;\n    }\n\n    # WebSocket endpoint for tunnels\n    location /ws {\n        proxy_pass http://sellia_backend;\n\n        # Extended timeout for WebSocket connections\n        proxy_read_timeout 86400s;\n        proxy_send_timeout 86400s;\n    }\n}\n\n# Optional: Status endpoint for monitoring\nserver {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n\n    location /nginx_status {\n        stub_status on;\n        access_log off;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#deploying-configuration","level":3,"title":"Deploying Configuration","text":"<ol> <li>Copy and modify configuration:</li> </ol> <pre><code>sudo cp deploy/nginx.conf /etc/nginx/sites-available/sellia\nsudo nano /etc/nginx/sites-available/sellia\n\n# Replace 'YOUR_DOMAIN' with your actual domain (e.g., sellia.me)\n</code></pre> <ol> <li>Enable site:</li> </ol> <pre><code>sudo ln -s /etc/nginx/sites-available/sellia /etc/nginx/sites-enabled/\n</code></pre> <ol> <li>Test configuration:</li> </ol> <pre><code>sudo nginx -t\n</code></pre> <ol> <li>Reload Nginx:</li> </ol> <pre><code>sudo systemctl reload nginx\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#certificate-setup","level":2,"title":"Certificate Setup","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#lets-encrypt-certificates","level":3,"title":"Let's Encrypt Certificates","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#obtain-wildcard-certificate","level":4,"title":"Obtain Wildcard Certificate","text":"<pre><code># Obtain wildcard certificate (requires DNS challenge)\nsudo certbot certonly --manual --preferred-challenges dns -d yourdomain.com -d *.yourdomain.com\n\n# Follow instructions to add DNS TXT record\n# Wait for DNS propagation, then press Enter\n</code></pre> <p>Alternative: HTTP validation (no wildcard)</p> <pre><code>sudo certbot --nginx -d yourdomain.com\n</code></pre> <p>Note: HTTP validation only works for the base domain, not wildcard subdomains.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#auto-renewal","level":4,"title":"Auto-Renewal","text":"<p>Certbot sets up auto-renewal automatically. Verify:</p> <pre><code>sudo certbot renew --dry-run\n</code></pre> <p>Cron job is created at <code>/etc/cron.d/certbot</code>.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#custom-certificates","level":3,"title":"Custom Certificates","text":"<p>For Cloudflare Origin Certificate or other custom certificates:</p> <ol> <li>Place certificate files:</li> </ol> <pre><code>sudo cp cert.pem /etc/ssl/certs/sellia.crt\nsudo cp key.pem /etc/ssl/private/sellia.key\nsudo chmod 644 /etc/ssl/certs/sellia.crt\nsudo chmod 600 /etc/ssl/private/sellia.key\n</code></pre> <ol> <li>Update Nginx config:</li> </ol> <pre><code>ssl_certificate /etc/ssl/certs/sellia.crt;\nssl_certificate_key /etc/ssl/private/sellia.key;\n</code></pre> <ol> <li>Reload Nginx:</li> </ol> <pre><code>sudo systemctl reload nginx\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#configuration-options-explained","level":2,"title":"Configuration Options Explained","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#upstream-configuration","level":3,"title":"Upstream Configuration","text":"<pre><code>upstream sellia_backend {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n</code></pre> <p>Why: - <code>keepalive 64</code> - Keep 64 connections open to backend for better performance - Reduces TCP handshake overhead</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#http2","level":3,"title":"HTTP/2","text":"<pre><code>listen 443 ssl http2;\n</code></pre> <p>Why: - HTTP/2 is faster for clients - Nginx handles HTTP/2 to backend - Backend still uses HTTP/1.1 for WebSocket compatibility</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#websocket-support","level":3,"title":"WebSocket Support","text":"<pre><code>proxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\n</code></pre> <p>Why: - Required for WebSocket protocol upgrade - Without this, tunnel connections fail</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#timeouts","level":3,"title":"Timeouts","text":"<pre><code>proxy_connect_timeout 60s;\nproxy_send_timeout 300s;\nproxy_read_timeout 300s;\n</code></pre> <p>For <code>/ws</code> endpoint:</p> <pre><code>proxy_read_timeout 86400s;\nproxy_send_timeout 86400s;\n</code></pre> <p>Why: - Tunnel WebSocket connections are long-lived - 86400s = 24 hours (practically unlimited) - Prevents premature disconnection</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#no-buffering","level":3,"title":"No Buffering","text":"<pre><code>proxy_buffering off;\nproxy_request_buffering off;\n</code></pre> <p>Why: - Real-time data flow for WebSocket - Large file uploads don't consume memory - Lower latency</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#http11-to-backend","level":3,"title":"HTTP/1.1 to Backend","text":"<pre><code>proxy_http_version 1.1;\n</code></pre> <p>Why: - Required for WebSocket support - Backend server speaks HTTP/1.1</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#performance-tuning","level":2,"title":"Performance Tuning","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#worker-processes","level":3,"title":"Worker Processes","text":"<pre><code># /etc/nginx/nginx.conf\nworker_processes auto;\n\nevents {\n    worker_connections 1024;\n}\n</code></pre> <p>Recommendations: - <code>worker_processes auto</code> - One worker per CPU core - <code>worker_connections 1024</code> - Adjust based on load</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#connection-limits","level":3,"title":"Connection Limits","text":"<pre><code># /etc/nginx/nginx.conf\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\n    limit_conn addr 10;\n}\n</code></pre> <p>Why: Prevent abuse from single IP addresses.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#rate-limiting","level":3,"title":"Rate Limiting","text":"<pre><code># /etc/nginx/nginx.conf\nlimit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;\n\nserver {\n    location /api/ {\n        limit_req zone=api burst=20;\n    }\n}\n</code></pre> <p>Why: Protect API endpoints from abuse.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#gzip-compression","level":3,"title":"Gzip Compression","text":"<pre><code># /etc/nginx/nginx.conf\ngzip on;\ngzip_vary on;\ngzip_min_length 1024;\ngzip_types text/plain text/css text/xml text/javascript application/json application/javascript application/xml+rss application/rss+xml font/truetype font/opentype application/vnd.ms-fontobject image/svg+xml;\n</code></pre> <p>Why: Reduce bandwidth usage for text-based responses.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#logging","level":2,"title":"Logging","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#access-logs","level":3,"title":"Access Logs","text":"<pre><code>access_log /var/log/nginx/sellia-access.log;\n</code></pre> <p>JSON format for log aggregation:</p> <pre><code>log_format json_combined escape=json '{'\n    '\"time_local\":\"$time_local\",'\n    '\"remote_addr\":\"$remote_addr\",'\n    '\"remote_user\":\"$remote_user\",'\n    '\"request\":\"$request\",'\n    '\"status\": \"$status\",'\n    '\"body_bytes_sent\":\"$body_bytes_sent\",'\n    '\"request_time\":\"$request_time\",'\n    '\"http_referrer\":\"$http_referer\",'\n    '\"http_user_agent\":\"$http_user_agent\"'\n'}';\n\naccess_log /var/log/nginx/sellia-access.log json_combined;\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#error-logs","level":3,"title":"Error Logs","text":"<pre><code>error_log /var/log/nginx/sellia-error.log warn;\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#log-rotation","level":3,"title":"Log Rotation","text":"<pre><code># /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 www-data adm\n    sharedscripts\n    prerotate\n        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\\n            run-parts /etc/logrotate.d/httpd-prerotate; \\\n        fi\n    endscript\n    postrotate\n        invoke-rc.d nginx rotate &gt;/dev/null 2&gt;&amp;1 || true\n    endscript\n}\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#monitoring","level":2,"title":"Monitoring","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#nginx-status-module","level":3,"title":"Nginx Status Module","text":"<pre><code>server {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n\n    location /nginx_status {\n        stub_status on;\n        access_log off;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\n</code></pre> <p>Check status:</p> <pre><code>curl http://127.0.0.1:8080/nginx_status\n</code></pre> <p>Output:</p> <pre><code>Active connections: 10\nserver accepts handled requests\n 1000 1000 5000\nReading: 0 Writing: 2 Waiting: 8\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#security-hardening","level":2,"title":"Security Hardening","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#hsts","level":3,"title":"HSTS","text":"<pre><code>add_header Strict-Transport-Security \"max-age=63072000\" always;\n</code></pre> <p>Enable only after: - TLS is working correctly - No mixed content issues - Tested thoroughly</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#disable-server-tokens","level":3,"title":"Disable Server Tokens","text":"<pre><code># /etc/nginx/nginx.conf\nserver_tokens off;\n</code></pre> <p>Why: Hide Nginx version from HTTP headers.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#limit-request-size","level":3,"title":"Limit Request Size","text":"<pre><code>client_max_body_size 100M;\n</code></pre> <p>Adjust based on your needs.</p>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#ip-whitelisting-optional","level":3,"title":"IP Whitelisting (Optional)","text":"<p>For admin endpoints:</p> <pre><code>location /api/admin {\n    allow 192.168.1.0/24;\n    deny all;\n    proxy_pass http://sellia_backend;\n}\n</code></pre>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#websocket-disconnections","level":3,"title":"WebSocket Disconnections","text":"<p>Symptoms: Tunnels connect but immediately disconnect.</p> <p>Solutions:</p> <ol> <li> <p>Verify WebSocket headers: <pre><code>proxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\n</code></pre></p> </li> <li> <p>Check timeouts: <pre><code>proxy_read_timeout 86400s;\nproxy_send_timeout 86400s;\n</code></pre></p> </li> <li> <p>Verify HTTP/1.1: <pre><code>proxy_http_version 1.1;\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#502-bad-gateway","level":3,"title":"502 Bad Gateway","text":"<p>Symptoms: Nginx can't connect to Sellia server.</p> <p>Solutions:</p> <ol> <li> <p>Check Sellia server is running: <pre><code>sudo systemctl status sellia-server\n</code></pre></p> </li> <li> <p>Verify upstream address: <pre><code>curl http://127.0.0.1:3000/health\n</code></pre></p> </li> <li> <p>Check SELinux: <pre><code>sudo setsebool -P httpd_can_network_connect 1\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#certificate-errors","level":3,"title":"Certificate Errors","text":"<p>Symptoms: Browser warnings or connection failures.</p> <p>Solutions:</p> <ol> <li> <p>Verify certificate files exist: <pre><code>ls -la /etc/letsencrypt/live/yourdomain.com/\n</code></pre></p> </li> <li> <p>Check certificate validity: <pre><code>sudo certbot certificates\n</code></pre></p> </li> <li> <p>Reload Nginx after renewal: <pre><code>sudo systemctl reload nginx\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#dns-configuration","level":3,"title":"DNS Configuration","text":"<p>Symptoms: Subdomains not accessible.</p> <p>Solutions:</p> <ol> <li> <p>Verify DNS records: <pre><code>dig yourdomain.com\ndig myapp.yourdomain.com\n</code></pre></p> </li> <li> <p>For wildcard subdomains:</p> </li> <li>Add A record: <code>*.yourdomain.com</code> → your server IP</li> <li> <p>Or use CNAME: <code>*.yourdomain.com</code> → <code>yourdomain.com</code></p> </li> <li> <p>Check Nginx server_name: <pre><code>server_name yourdomain.com *.yourdomain.com;\n</code></pre></p> </li> </ol>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#production-checklist","level":2,"title":"Production Checklist","text":"<ul> <li> TLS certificates installed and valid</li> <li> DNS records configured (A records for base and wildcard)</li> <li> Nginx configuration tested (<code>nginx -t</code>)</li> <li> HTTP to HTTPS redirect working</li> <li> WebSocket connections successful</li> <li> Log rotation configured</li> <li> HSTS enabled (after testing)</li> <li> Server tokens disabled</li> <li> Firewall allows ports 80 and 443</li> <li> SELinux/AppArmor configured</li> <li> Monitor Nginx status endpoint</li> <li> Backup Nginx configuration</li> <li> Auto-renewal of Let's Encrypt certificates verified</li> </ul>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/nginx/#see-also","level":2,"title":"See Also","text":"<ul> <li>Caddy Configuration - Alternative to Nginx</li> <li>Production Checklist - Complete production guide</li> <li>Server Auth - Authentication setup</li> <li>Database Configuration - Database setup</li> </ul>","path":["01 user","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"01-user/deployment/production-checklist/","level":1,"title":"Production Deployment Checklist","text":"<p>A comprehensive security and production hardening checklist for deploying Sellia servers.</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#pre-deployment-planning","level":2,"title":"Pre-Deployment Planning","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#requirements-gathering","level":3,"title":"Requirements Gathering","text":"<ul> <li> Define expected concurrent tunnel count</li> <li> Estimate bandwidth requirements</li> <li> Identify authentication requirements (public vs private)</li> <li> Determine backup and recovery strategy</li> <li> Plan for monitoring and alerting</li> <li> Define disaster recovery procedures</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#resource-planning","level":3,"title":"Resource Planning","text":"<p>Minimum Requirements (Small Deployment): - [ ] CPU: 2 cores - [ ] RAM: 2 GB - [ ] Storage: 20 GB SSD - [ ] Network: 100 Mbps - [ ] Concurrent tunnels: Up to 50</p> <p>Recommended (Production): - [ ] CPU: 4+ cores - [ ] RAM: 4+ GB - [ ] Storage: 50+ GB SSD - [ ] Network: 1+ Gbps - [ ] Concurrent tunnels: 100+</p> <p>High Availability: - [ ] Load balancer (HAProxy, ALB, etc.) - [ ] Multiple Sellia server instances - [ ] Shared database (PostgreSQL instead of SQLite) - [ ] Health checks and failover</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#server-configuration","level":2,"title":"Server Configuration","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#operating-system","level":3,"title":"Operating System","text":"<p>Linux Distribution: - [ ] Ubuntu 22.04 LTS or 24.04 LTS - [ ] Debian 12 (Bookworm) - [ ] Rocky Linux 9 or AlmaLinux 9</p> <p>System Updates:</p> <pre><code># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Enable automatic security updates\nsudo apt install unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#firewall-configuration","level":3,"title":"Firewall Configuration","text":"<pre><code># UFW (Ubuntu/Debian)\nsudo ufw default deny incoming\nsudo ufw default allow outgoing\nsudo ufw allow 22/tcp    # SSH\nsudo ufw allow 80/tcp    # HTTP\nsudo ufw allow 443/tcp   # HTTPS\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Rocky)\nsudo firewall-cmd --permanent --add-service=ssh\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n</code></pre> <p>Additional hardening: - [ ] Disable password authentication for SSH (use keys only) - [ ] Change default SSH port (optional, security through obscurity) - [ ] Install fail2ban for SSH protection - [ ] Limit SSH access to specific IP ranges (if possible)</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#time-synchronization","level":3,"title":"Time Synchronization","text":"<pre><code># Install and configure NTP\nsudo apt install chrony\nsudo systemctl enable chrony\nsudo systemctl start chrony\n\n# Verify time sync\ntimedatectl\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#ssltls-configuration","level":2,"title":"SSL/TLS Configuration","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#certificate-setup","level":3,"title":"Certificate Setup","text":"<p>Option 1: Let's Encrypt (Automated) - [ ] Certbot installed - [ ] DNS A records configured - [ ] Wildcard DNS for subdomains (optional) - [ ] Auto-renewal configured - [ ] Test renewal: <code>sudo certbot renew --dry-run</code></p> <p>Option 2: Custom Certificates - [ ] Certificate files in <code>/etc/ssl/certs/</code> - [ ] Private key files in <code>/etc/ssl/private/</code> - [ ] Permissions: 644 for certs, 600 for keys - [ ] Certificate chain complete - [ ] Expiry monitoring configured</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#tls-configuration","level":3,"title":"TLS Configuration","text":"<p>Reverse Proxy (Caddy or Nginx): - [ ] HTTP/2 enabled - [ ] Strong cipher suites - [ ] TLS 1.2 and 1.3 only (no SSLv3, TLS 1.0, 1.1) - [ ] HSTS enabled (after testing) - [ ] OCSP stapling (optional) - [ ] Perfect Forward Secrecy (Ephemeral Diffie-Hellman)</p> <p>Test TLS configuration:</p> <pre><code># Test SSL configuration\nopenssl s_client -connect yourdomain.com:443 -tls1_2\nopenssl s_client -connect yourdomain.com:443 -tls1_3\n\n# Online test\n# Visit: https://www.ssllabs.com/ssltest/\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#authentication-setup","level":2,"title":"Authentication Setup","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#server-side-authentication","level":3,"title":"Server-Side Authentication","text":"<p>Enable Authentication: - [ ] <code>SELLIA_REQUIRE_AUTH=true</code> set - [ ] <code>SELLIA_MASTER_KEY</code> configured (cryptographically random, use <code>openssl rand -hex 32</code>) - [ ] Database enabled by default (disabled with <code>SELLIA_NO_DB=true</code>) - [ ] Optional: <code>SELLIA_DB_PATH=/var/lib/sellia/sellia.db</code> for custom database location - [ ] Database directory created with proper permissions - [ ] Initial admin API key created (using master key)</p> <p>Generate Master Key:</p> <pre><code># Generate secure 32-byte key\nopenssl rand -hex 32\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#api-key-management","level":3,"title":"API Key Management","text":"<p>Initial Setup: - [ ] Master key stored in secure password manager - [ ] Master key not committed to version control - [ ] Separate keys for dev/staging/production - [ ] Key rotation policy documented - [ ] Key revocation process tested</p> <p>Environment Variables: <pre><code>SELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=\"your-generated-key\"\n# Optional - defaults are shown\n# SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n# SELLIA_NO_DB=false  # Set to true to disable database\n</code></pre></p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#database-configuration","level":2,"title":"Database Configuration","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#sqlite-setup","level":3,"title":"SQLite Setup","text":"<p>Directory Structure: - [ ] Database directory: <code>/var/lib/sellia/</code> - [ ] Directory owned by <code>sellia</code> user - [ ] Directory permissions: <code>755</code> - [ ] Database file permissions: <code>640</code> - [ ] Automatic backups configured</p> <p>Backup Script:</p> <pre><code>#!/bin/bash\n# /opt/sellia/scripts/backup.sh\n\nBACKUP_DIR=\"/backup/sellia\"\nDATE=$(date +%Y%m%d_%H%M%S)\nmkdir -p \"$BACKUP_DIR\"\n\n# Online backup\nsqlite3 /var/lib/sellia/sellia.db \".backup $BACKUP_DIR/sellia.db.$DATE\"\n\n# Compress older backups\nfind \"$BACKUP_DIR\" -name \"sellia.db.*\" -mtime +7 -exec gzip {} \\;\n\n# Delete backups older than 30 days\nfind \"$BACKUP_DIR\" -name \"sellia.db.*.gz\" -mtime +30 -delete\n</code></pre> <p>Add to crontab:</p> <pre><code># Daily backup at 2 AM\n0 2 * * * /opt/sellia/scripts/backup.sh\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#reserved-subdomains","level":2,"title":"Reserved Subdomains","text":"<p>Initial Setup: - [ ] Server started successfully (seeds default reserved subdomains) - [ ] Company-specific subdomains reserved - [ ] Service subdomains reserved (api, admin, dashboard, etc.) - [ ] Document reasons for custom reservations</p> <p>Example:</p> <pre><code>sellia admin reserved add mycompany --reason \"Company brand\"\nsellia admin reserved add api --reason \"API gateway\"\nsellia admin reserved add billing --reason \"Payment system\"\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#application-configuration","level":2,"title":"Application Configuration","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#environment-variables","level":3,"title":"Environment Variables","text":"<p>Required: <pre><code>SELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=\"generated-key\"\n</code></pre></p> <p>Optional (with defaults shown): <pre><code># Host configuration\nSELLIA_HOST=0.0.0.0\nSELLIA_PORT=3000\nSELLIA_DOMAIN=localhost\n\n# HTTPS configuration (set by reverse proxy automatically)\nSELLIA_USE_HTTPS=true\n\n# Database (defaults to ~/.sellia/sellia.db)\nSELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nSELLIA_NO_DB=false  # Set to true to disable database\n\n# Feature flags\nSELLIA_RATE_LIMITING=true  # Set to false to disable\nSELLIA_DISABLE_LANDING=false  # Set to true to disable landing page\n</code></pre></p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#config-file-optional","level":3,"title":"Config File (Optional)","text":"<p>Create <code>/opt/sellia/sellia-server.yml</code>:</p> <pre><code>server:\n  require_auth: true\n  master_key: ${SELLIA_MASTER_KEY}\n  host: 0.0.0.0\n  port: 3000\n  domain: yourdomain.com\n  use_https: true\n  rate_limiting: true\n  landing_enabled: true\n\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#service-configuration","level":3,"title":"Service Configuration","text":"<p>Systemd Service:</p> <pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nGroup=sellia\nWorkingDirectory=/opt/sellia\nEnvironment=\"SELLIA_REQUIRE_AUTH=true\"\nEnvironment=\"SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\"\nEnvironment=\"SELLIA_USE_HTTPS=true\"\nExecStart=/opt/sellia/bin/sellia-server\nRestart=always\nRestartSec=10\n\n# Security\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/var/lib/sellia\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable and start:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable sellia\nsudo systemctl start sellia\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#reverse-proxy-configuration","level":2,"title":"Reverse Proxy Configuration","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#choose-your-proxy","level":3,"title":"Choose Your Proxy","text":"<ul> <li> Caddy (automatic HTTPS, easier setup)</li> <li> Nginx (more configurable, widely used)</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#caddy-configuration","level":3,"title":"Caddy Configuration","text":"<ul> <li> Caddyfile configured with your domain</li> <li> TLS certificates (Let's Encrypt or custom)</li> <li> HTTP/3 disabled (for WebSocket compatibility)</li> <li> HTTP/1.1 transport to backend</li> <li> Wildcard subdomain handling</li> <li> Logging configured</li> </ul> <p>Reference: Caddy Deployment Guide</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#nginx-configuration","level":3,"title":"Nginx Configuration","text":"<ul> <li> Nginx installed and enabled</li> <li> Virtual host configured for your domain</li> <li> TLS certificates configured</li> <li> HTTP/2 enabled</li> <li> WebSocket headers configured</li> <li> Proper timeouts for long-lived connections</li> <li> Logging configured</li> <li> Log rotation configured</li> </ul> <p>Reference: Nginx Deployment Guide</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#monitoring-and-logging","level":2,"title":"Monitoring and Logging","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#application-logs","level":3,"title":"Application Logs","text":"<p>Log Locations: - [ ] Sellia server logs: <code>/var/log/sellia/server.log</code> - [ ] Reverse proxy logs: <code>/var/log/nginx/</code> or <code>/var/log/caddy/</code> - [ ] System logs: <code>journalctl -u sellia</code></p> <p>Log Rotation: - [ ] logrotate configured for Sellia logs - [ ] Retention policy defined (e.g., 30 days) - [ ] Compress old logs - [ ] Regular cleanup</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#monitoring-setup","level":3,"title":"Monitoring Setup","text":"<p>Basic Monitoring: - [ ] Server process monitoring (systemd) - [ ] Disk space monitoring - [ ] Memory usage monitoring - [ ] CPU usage monitoring - [ ] Network traffic monitoring</p> <p>Advanced Monitoring (Optional): - [ ] Prometheus metrics exporter - [ ] Grafana dashboards - [ ] Alertmanager alerts - [ ] Uptime monitoring (Pingdom, UptimeRobot, etc.)</p> <p>Health Checks:</p> <pre><code># Simple health check script\n#!/bin/bash\n# /opt/sellia/scripts/health-check.sh\n\n# Check Sellia server\ncurl -f http://localhost:3000/health || exit 1\n\n# Check database\nsqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\" | grep -q \"ok\" || exit 1\n\n# Check disk space\ndf /var/lib/sellia | tail -1 | awk '{ if ($5+0 &gt; 90) exit 1; }'\n\necho \"All checks passed\"\n</code></pre> <p>Add to crontab:</p> <pre><code># Run every 5 minutes\n*/5 * * * * /opt/sellia/scripts/health-check.sh\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#security-hardening","level":2,"title":"Security Hardening","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#selinux-configuration-rhelcentosfedora","level":3,"title":"SELinux Configuration (RHEL/CentOS/Fedora)","text":"<pre><code># Check SELinux status\nsestatus\n\n# Allow Sellia to connect to network\nsudo setsebool -P httpd_can_network_connect 1\n\n# Context for database directory\nsudo semanage fcontext -a -t httpd_sys_rw_content_t \"/var/lib/sellia(/.*)?\"\nsudo restorecon -Rv /var/lib/sellia\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#apparmor-configuration-ubuntudebian","level":3,"title":"AppArmor Configuration (Ubuntu/Debian)","text":"<pre><code># Check AppArmor status\nsudo aa-status\n\n# Create Sellia profile\nsudo nano /etc/apparmor.d/opt.sellia.bin.sellia-server\n\n# Reload profiles\nsudo apparmor_parser -r /etc/apparmor.d/opt.sellia.bin.sellia-server\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#file-permissions","level":3,"title":"File Permissions","text":"<pre><code># Sellia user and group\nsudo adduser --system --group --home /opt/sellia sellia\n\n# Directory permissions\nsudo chown -R sellia:sellia /opt/sellia\nsudo chmod 755 /opt/sellia\n\n# Database permissions\nsudo chown -R sellia:sellia /var/lib/sellia\nsudo chmod 755 /var/lib/sellia\nsudo chmod 640 /var/lib/sellia/sellia.db\n\n# Log permissions\nsudo chown -R sellia:adm /var/log/sellia\nsudo chmod 750 /var/log/sellia\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#system-hardening","level":3,"title":"System Hardening","text":"<pre><code># Disable unused services\nsudo systemctl disable bluetooth\nsudo systemctl disable cups\n\n# Install security updates automatically\nsudo apt install unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\n# Install fail2ban\nsudo apt install fail2ban\nsudo systemctl enable fail2ban\nsudo systemctl start fail2ban\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#dns-configuration","level":2,"title":"DNS Configuration","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#required-dns-records","level":3,"title":"Required DNS Records","text":"<pre><code># Base domain\nA     yourdomain.com          →  your-server-ip\n\n# Wildcard for subdomains\nA     *.yourdomain.com        →  your-server-ip\n\n# Optional: WWW\nCNAME www.yourdomain.com      →  yourdomain.com\n</code></pre> <p>Cloudflare-Specific: - [ ] If using Cloudflare proxy (orange cloud), set WebSocket to \"Full\" or \"Off\" - [ ] Or use DNS-only (grey cloud) for Sellia subdomains - [ ] Create Cloudflare Origin Certificate for better security</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#dns-verification","level":3,"title":"DNS Verification","text":"<pre><code># Check DNS propagation\ndig yourdomain.com\ndig *.yourdomain.com\ndig myapp.yourdomain.com\n\n# Check from multiple locations\n# Visit: https://www.whatsmydns.net/\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#testing","level":2,"title":"Testing","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#pre-launch-testing","level":3,"title":"Pre-Launch Testing","text":"<p>Functionality Tests: - [ ] Create tunnel with API key - [ ] Verify tunnel is accessible via HTTPS - [ ] Test WebSocket connection - [ ] Create tunnel with reserved subdomain (should fail) - [ ] Create tunnel with path routing - [ ] Test inspector UI</p> <p>Load Testing: - [ ] Test with expected concurrent tunnel count - [ ] Monitor CPU and memory usage - [ ] Check database performance - [ ] Verify no connection drops</p> <p>Security Tests: - [ ] Test without API key (should fail) - [ ] Test with invalid API key (should fail) - [ ] Test with standard key (should work for tunnels) - [ ] Test admin API with standard key (should fail) - [ ] Test admin API with master key (should work) - [ ] Verify TLS configuration (SSL Labs)</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#monitoring-verification","level":3,"title":"Monitoring Verification","text":"<ul> <li> Check logs are being written</li> <li> Verify log rotation works</li> <li> Test health check script</li> <li> Verify backup script runs</li> <li> Test monitoring alerts (if configured)</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#disaster-recovery","level":2,"title":"Disaster Recovery","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#backup-strategy","level":3,"title":"Backup Strategy","text":"<p>What to Backup: - [ ] Database: <code>/var/lib/sellia/sellia.db</code> - [ ] Configuration: <code>/opt/sellia/sellia-server.yml</code> - [ ] Environment variables - [ ] TLS certificates (if not using Let's Encrypt) - [ ] Nginx/Caddy configuration</p> <p>Backup Locations: - [ ] Local backup directory - [ ] Off-site backup (S3, GCS, etc.) - [ ] Backup encryption (for off-site)</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#restore-procedure","level":3,"title":"Restore Procedure","text":"<p>Document restore process:</p> <pre><code>#!/bin/bash\n# /opt/sellia/scripts/restore.sh\n\nBACKUP_FILE=$1\n\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"Usage: $0 &lt;backup-file&gt;\"\n    exit 1\nfi\n\n# Stop Sellia\nsudo systemctl stop sellia\n\n# Restore database\ncp \"$BACKUP_FILE\" /var/lib/sellia/sellia.db\nchown sellia:sellia /var/lib/sellia/sellia.db\nchmod 640 /var/lib/sellia/sellia.db\n\n# Start Sellia\nsudo systemctl start sellia\n\necho \"Restore complete\"\n</code></pre>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#failover-planning","level":3,"title":"Failover Planning","text":"<p>For High Availability: - [ ] Document failover procedure - [ ] Test failover procedure - [ ] DNS failover configured (if using multiple servers) - [ ] Load balancer health checks configured - [ ] Data replication configured (if using PostgreSQL)</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#documentation","level":2,"title":"Documentation","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#runbook","level":3,"title":"Runbook","text":"<p>Create and maintain runbook with: - [ ] Common issues and solutions - [ ] Escalation procedures - [ ] Contact information for team members - [ ] Vendor contacts (DNS provider, hosting provider, etc.) - [ ] Login credentials stored securely (password manager) - [ ] Diagrams of architecture</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#change-management","level":3,"title":"Change Management","text":"<ul> <li> Document all configuration changes</li> <li> Use version control for configuration files</li> <li> Test changes in staging first</li> <li> Rollback procedure documented</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#post-deployment","level":2,"title":"Post-Deployment","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#performance-tuning","level":3,"title":"Performance Tuning","text":"<ul> <li> Monitor resource usage for first week</li> <li> Adjust worker connections if needed</li> <li> Tune database cache size</li> <li> Adjust reverse proxy timeouts based on usage</li> <li> Set up alerts for resource thresholds</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#regular-maintenance","level":3,"title":"Regular Maintenance","text":"<p>Weekly: - [ ] Review logs for errors - [ ] Check disk space - [ ] Verify backups are running</p> <p>Monthly: - [ ] Review and update reserved subdomains - [ ] Audit API keys (revoke unused) - [ ] Review security updates - [ ] Test restore procedure</p> <p>Quarterly: - [ ] Security audit - [ ] Performance review - [ ] Capacity planning - [ ] Disaster recovery test</p>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#compliance","level":2,"title":"Compliance","text":"","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#data-protection","level":3,"title":"Data Protection","text":"<ul> <li> GDPR compliance (if storing EU data)</li> <li> CCPA compliance (if storing California data)</li> <li> Data retention policy documented</li> <li> Data deletion procedure documented</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#audit-trail","level":3,"title":"Audit Trail","text":"<ul> <li> Enable audit logging</li> <li> Log all admin operations</li> <li> Log all tunnel creations</li> <li> Protect logs from tampering</li> <li> Regular log reviews</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#final-verification","level":2,"title":"Final Verification","text":"<p>Before going live:</p> <ul> <li> All tests passed</li> <li> Monitoring configured and verified</li> <li> Backups running successfully</li> <li> Documentation complete</li> <li> Team trained on operations</li> <li> Incident response plan created</li> <li> Communication plan for outages</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/production-checklist/#see-also","level":2,"title":"See Also","text":"<ul> <li>Caddy Deployment - Caddy reverse proxy setup</li> <li>Nginx Deployment - Nginx reverse proxy setup</li> <li>Server Auth - Authentication configuration</li> <li>Database Configuration - Database setup</li> </ul>","path":["01 user","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"01-user/deployment/tls-certificates/","level":1,"title":"TLS Certificates","text":"<p>Sellia requires TLS certificates to serve HTTPS tunnels. This guide covers certificate setup for production deployments.</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#why-tls-certificates","level":2,"title":"Why TLS Certificates?","text":"<p>HTTPS tunnels require valid TLS certificates to: - Encrypt traffic between clients and the tunnel server - Enable secure WebSocket connections - Provide trust to browsers and API clients - Meet modern security standards</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#certificate-sources","level":2,"title":"Certificate Sources","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#1-cloudflare-origin-certificate-recommended","level":3,"title":"1. Cloudflare Origin Certificate (Recommended)","text":"<p>Free, long-lasting certificates from Cloudflare.</p> <p>Pros: - Free for Cloudflare customers - 15-year validity - Wildcard certificates supported - Easy generation</p> <p>Cons: - Requires Cloudflare account - Only works with Cloudflare proxy</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#2-lets-encrypt","level":3,"title":"2. Let's Encrypt","text":"<p>Free, automated certificates via ACME.</p> <p>Pros: - Free - Automated renewal - Publicly trusted - Works with any setup</p> <p>Cons: - 90-day validity (requires automation) - Rate limited - Requires domain validation</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#3-self-signed-certificates","level":3,"title":"3. Self-Signed Certificates","text":"<p>Generated by you for testing.</p> <p>Pros: - Quick to generate - No external dependencies - Good for local testing</p> <p>Cons: - Not publicly trusted - Browser warnings - Not suitable for production</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#4-commercial-ca","level":3,"title":"4. Commercial CA","text":"<p>Purchased certificates from authorities.</p> <p>Pros: - Publicly trusted - Various validation levels - Insurance options</p> <p>Cons: - Cost (annual fees) - Shorter validity (1-2 years) - Manual renewal process</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#cloudflare-origin-certificate","level":2,"title":"Cloudflare Origin Certificate","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-1-add-domain-to-cloudflare","level":3,"title":"Step 1: Add Domain to Cloudflare","text":"<ol> <li>Sign up for Cloudflare (free tier works)</li> <li>Add your domain: *Sites* → Add a Site</li> <li>Follow instructions to update nameservers</li> <li>Wait for DNS propagation (usually &lt;24 hours)</li> </ol>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-2-generate-origin-certificate","level":3,"title":"Step 2: Generate Origin Certificate","text":"<ol> <li>Go to SSL/TLS → Origin Server → Create Certificate</li> <li>Select options:</li> <li>Hostnames: <code>*.yourdomain.com</code> and <code>yourdomain.com</code></li> <li>Validity: 15 years</li> <li>Key format: PEM (default)</li> <li>Click Create</li> </ol>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-3-download-certificates","level":3,"title":"Step 3: Download Certificates","text":"<ol> <li>Click Download Certificate to get <code>origin.pem</code></li> <li>Click Download Private Key to get <code>origin.key</code></li> </ol>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-4-place-certificates","level":3,"title":"Step 4: Place Certificates","text":"<p>Create <code>certs/</code> directory and place certificates:</p> <pre><code>mkdir -p certs\nmv ~/Downloads/origin.pem certs/cert.pem\nmv ~/Downloads/origin.key certs/key.pem\n</code></pre> <p>Structure: <pre><code>certs/\n├── cert.pem  # Origin certificate\n└── key.pem   # Private key\n</code></pre></p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-5-set-permissions","level":3,"title":"Step 5: Set Permissions","text":"<p>Secure the private key:</p> <pre><code>chmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-6-start-server","level":3,"title":"Step 6: Start Server","text":"<pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre> <p>The docker-compose.prod.yml file automatically sets <code>SELLIA_USE_HTTPS=true</code> for the Sellia server.</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#lets-encrypt-certificates","level":2,"title":"Let's Encrypt Certificates","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#using-certbot","level":3,"title":"Using Certbot","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-1-install-certbot","level":4,"title":"Step 1: Install Certbot","text":"<pre><code># Ubuntu/Debian\nsudo apt-get install certbot\n\n# macOS\nbrew install certbot\n\n# Docker\ndocker run -it --rm \\\n  -v /etc/letsencrypt:/etc/letsencrypt \\\n  certbot/certbot certonly --manual\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-2-generate-certificate","level":4,"title":"Step 2: Generate Certificate","text":"<p>HTTP-01 Challenge (requires port 80):</p> <pre><code>sudo certbot certonly \\\n  --standalone \\\n  -d yourdomain.com \\\n  -d *.yourdomain.com\n</code></pre> <p>DNS-01 Challenge (wildcard):</p> <pre><code>sudo certbot certonly \\\n  --manual \\\n  --preferred-challenges dns \\\n  -d yourdomain.com \\\n  -d *.yourdomain.com\n</code></pre> <p>Follow prompts for DNS validation.</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-3-copy-certificates","level":4,"title":"Step 3: Copy Certificates","text":"<pre><code>mkdir -p certs\nsudo cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem certs/cert.pem\nsudo cp /etc/letsencrypt/live/yourdomain.com/privkey.pem certs/key.pem\nsudo chown $USER:$USER certs/*.pem\nchmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-4-set-up-auto-renewal","level":4,"title":"Step 4: Set Up Auto-Renewal","text":"<p>Certbot automatically sets up renewal:</p> <pre><code># Test renewal\nsudo certbot renew --dry-run\n\n# Renewal runs automatically via cron/systemd\n</code></pre> <p>For Docker, mount certificates:</p> <pre><code>volumes:\n  - /etc/letsencrypt:/etc/letsencrypt:ro\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#using-caddy","level":3,"title":"Using Caddy","text":"<p>Caddy can automatically obtain and renew certificates:</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-1-create-caddyfile","level":4,"title":"Step 1: Create Caddyfile","text":"<pre><code># Caddyfile\nyourdomain.com, *.yourdomain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#step-2-run-caddy","level":4,"title":"Step 2: Run Caddy","text":"<pre><code>docker run -d \\\n  --name caddy \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v $(pwd)/Caddyfile:/etc/caddy/Caddyfile \\\n  caddy:latest\n</code></pre> <p>Caddy automatically handles HTTPS.</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#self-signed-certificates-testing","level":2,"title":"Self-Signed Certificates (Testing)","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#generate-with-openssl","level":3,"title":"Generate with OpenSSL","text":"<pre><code>mkdir -p certs\n\n# Generate private key\nopenssl genrsa -out certs/key.pem 2048\n\n# Generate certificate\nopenssl req -new -x509 \\\n  -key certs/key.pem \\\n  -out certs/cert.pem \\\n  -days 365 \\\n  -subj \"/CN=*.yourdomain.com\"\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#generate-with-one-command","level":3,"title":"Generate with One Command","text":"<pre><code>openssl req -x509 -newkey rsa:2048 \\\n  -keyout certs/key.pem \\\n  -out certs/cert.pem \\\n  -days 365 \\\n  -nodes \\\n  -subj \"/CN=*.yourdomain.com\"\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#use-for-testing","level":3,"title":"Use for Testing","text":"<pre><code># .env\nSELLIA_DOMAIN=localhost\nSELLIA_USE_HTTPS=true\n</code></pre> <p>Warning: Browsers will show security warnings. Only for local testing.</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#docker-deployment-with-certificates","level":2,"title":"Docker Deployment with Certificates","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#directory-structure","level":3,"title":"Directory Structure","text":"<pre><code>project/\n├── docker-compose.prod.yml\n├── .env\n└── certs/\n    ├── cert.pem\n    └── key.pem\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#docker-compose-configuration","level":3,"title":"Docker Compose Configuration","text":"<pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN}\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n      - SELLIA_REQUIRE_AUTH=true\n    env_file: .env\n    restart: unless-stopped\n    networks:\n      - sellia-internal\n\n  caddy:\n    image: caddy:2-alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/Caddyfile:/etc/caddy/Caddyfile:ro\n      - ./certs:/certs:ro\n      - caddy_data:/data\n      - caddy_config:/config\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN}\n    networks:\n      - sellia-internal\n    depends_on:\n      - sellia-server\n    restart: unless-stopped\n\nnetworks:\n  sellia-internal:\n    driver: bridge\n\nvolumes:\n  caddy_data:\n  caddy_config:\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#environment-file","level":3,"title":"Environment File","text":"<pre><code># .env\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#certificate-validation","level":2,"title":"Certificate Validation","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#check-certificate","level":3,"title":"Check Certificate","text":"<pre><code># View certificate details\nopenssl x509 -in certs/cert.pem -text -noout\n\n# Check validity\nopenssl x509 -in certs/cert.pem -noout -dates\n\n# Verify certificate matches key\nopenssl x509 -noout -modulus -in certs/cert.pem | openssl md5\nopenssl rsa -noout -modulus -in certs/key.pem | openssl md5\n# Both MD5 hashes should match\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#test-https-connection","level":3,"title":"Test HTTPS Connection","text":"<pre><code># Test with curl\ncurl -I https://yourdomain.com\n\n# Test with OpenSSL\nopenssl s_client -connect yourdomain.com:443 -servername yourdomain.com\n\n# Check certificate chain\nopenssl s_client -connect yourdomain.com:443 -showcerts\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#reverse-proxy-setup","level":2,"title":"Reverse Proxy Setup","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#nginx-with-tls","level":3,"title":"Nginx with TLS","text":"<pre><code>server {\n    listen 80;\n    server_name yourdomain.com *.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name yourdomain.com *.yourdomain.com;\n\n    ssl_certificate /path/to/certs/cert.pem;\n    ssl_certificate_key /path/to/certs/key.pem;\n\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#caddy-with-tls","level":3,"title":"Caddy with TLS","text":"<p>Caddy handles TLS automatically:</p> <pre><code>yourdomain.com, *.yourdomain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#certificate-renewal","level":2,"title":"Certificate Renewal","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#lets-encrypt-renewal","level":3,"title":"Let's Encrypt Renewal","text":"<p>Automatic via cron/systemd:</p> <pre><code># Test renewal\nsudo certbot renew --dry-run\n\n# View renewal timer\nsudo systemctl status certbot.timer\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#cloudflare-renewal","level":3,"title":"Cloudflare Renewal","text":"<p>Cloudflare Origin certificates are valid for 15 years - no renewal needed.</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#manual-renewal","level":3,"title":"Manual Renewal","text":"<p>For other certificates:</p> <pre><code># Generate new certificates\n# Copy to certs directory\n# Restart Sellia\ndocker compose restart\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#certificate-not-found","level":3,"title":"Certificate Not Found","text":"<p>Error: <code>Failed to load certificate</code></p> <p>Solution: <pre><code># Verify files exist\nls -la certs/\n\n# Check permissions\nchmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n\n# Verify file content\ncat certs/cert.pem\ncat certs/key.pem\n</code></pre></p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#domain-mismatch","level":3,"title":"Domain Mismatch","text":"<p>Error: <code>Certificate does not match domain</code></p> <p>Solution: <pre><code># Check certificate domain\nopenssl x509 -in certs/cert.pem -noout -subject\n\n# Should show: CN = *.yourdomain.com\n</code></pre></p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#browser-warnings","level":3,"title":"Browser Warnings","text":"<p>Self-signed certificates: - Expected for local testing - Add exception in browser - Not for production use</p> <p>Cloudflare certificates: - Ensure Cloudflare proxy is enabled (orange cloud) - Check DNS propagation</p>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<pre><code># Check what's using port 443\nlsof -i :443\n\n# Stop conflicting service\nsudo systemctl stop nginx\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#1-file-permissions","level":3,"title":"1. File Permissions","text":"<pre><code># Certificate: readable by all\nchmod 644 certs/cert.pem\n\n# Private key: readable only by owner\nchmod 600 certs/key.pem\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#2-dont-commit-certificates","level":3,"title":"2. Don't Commit Certificates","text":"<p>Add to <code>.gitignore</code>:</p> <pre><code># .gitignore\ncerts/\n*.pem\n*.key\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#3-use-strong-keys","level":3,"title":"3. Use Strong Keys","text":"<pre><code># Generate 2048-bit or 4096-bit keys\nopenssl genrsa -out certs/key.pem 4096\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#4-monitor-expiration","level":3,"title":"4. Monitor Expiration","text":"<pre><code># Check expiration\nopenssl x509 -in certs/cert.pem -noout -enddate\n\n# Set up expiration alerts\n# (monitoring system integration)\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#5-separate-environments","level":3,"title":"5. Separate Environments","text":"<p>Use different certificates per environment:</p> <pre><code>certs/dev/cert.pem\ncerts/dev/key.pem\n\ncerts/staging/cert.pem\ncerts/staging/key.pem\n\ncerts/prod/cert.pem\ncerts/prod/key.pem\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#certificate-comparison","level":2,"title":"Certificate Comparison","text":"Method Cost Validity Automation Trust Best For Cloudflare Origin Free 15 years No Cloudflare only Production with Cloudflare Let's Encrypt Free 90 days Yes Public Production (any setup) Self-Signed Free Custom No None Local testing only Commercial CA $$ 1-2 years Partial Public Enterprise requirements","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Docker Deployment - Full Docker setup</li> <li>Self-Hosting - Server configuration</li> <li>Configuration - Config files</li> </ul>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#quick-reference","level":2,"title":"Quick Reference","text":"","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#generate-self-signed-cert","level":3,"title":"Generate Self-Signed Cert","text":"<pre><code>openssl req -x509 -newkey rsa:2048 \\\n  -keyout certs/key.pem \\\n  -out certs/cert.pem \\\n  -days 365 \\\n  -nodes \\\n  -subj \"/CN=*.yourdomain.com\"\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#check-certificate_1","level":3,"title":"Check Certificate","text":"<pre><code>openssl x509 -in certs/cert.pem -text -noout\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#verify-key-match","level":3,"title":"Verify Key Match","text":"<pre><code>openssl x509 -noout -modulus -in certs/cert.pem | openssl md5\nopenssl rsa -noout -modulus -in certs/key.pem | openssl md5\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#test-https","level":3,"title":"Test HTTPS","text":"<pre><code>curl -I https://yourdomain.com\nopenssl s_client -connect yourdomain.com:443\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/deployment/tls-certificates/#permissions","level":3,"title":"Permissions","text":"<pre><code>chmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["01 user","Deployment","TLS Certificates"],"tags":[]},{"location":"01-user/getting-started/","level":1,"title":"Getting Started","text":"<p>Get up and running with Sellia in minutes.</p>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#overview","level":2,"title":"Overview","text":"<p>This section guides you through installing Sellia and creating your first tunnel.</p>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#installation","level":2,"title":"Installation","text":"","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#from-source","level":3,"title":"From Source","text":"<p>Requires Crystal &gt;= 1.10.0.</p> <pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\nshards build --release\n</code></pre> <p>Binaries will be in <code>./bin/</code>:</p> <ul> <li><code>sellia</code> - CLI client for creating tunnels</li> <li><code>sellia-server</code> - Tunnel server</li> </ul>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#pre-built-binaries","level":3,"title":"Pre-built Binaries","text":"<p>Coming soon.</p>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#quick-start","level":2,"title":"Quick Start","text":"","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#1-start-the-server","level":3,"title":"1. Start the Server","text":"<p>Or use a hosted instance at sellia.me.</p> <pre><code>./bin/sellia-server --port 3000 --domain your-domain.com\n</code></pre>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#2-create-a-tunnel","level":3,"title":"2. Create a Tunnel","text":"<p>Expose your local server on port 8080:</p> <pre><code>./bin/sellia http 8080 --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#3-access-your-server","level":3,"title":"3. Access Your Server","text":"<p>Sellia will provide a URL like <code>http://abc123.your-domain.com</code>.</p>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Quick Start - Common tunnel creation patterns</li> <li>Configuration - Set up config files</li> <li>Authentication - Secure your tunnels</li> <li>Inspector - Debug requests in real-time</li> </ul>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#example-workflows","level":2,"title":"Example Workflows","text":"","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#webhook-development","level":3,"title":"Webhook Development","text":"<pre><code># Start your webhook receiver\n./bin/sellia http 3000 --subdomain webhooks --open --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#mobile-development","level":3,"title":"Mobile Development","text":"<pre><code># Expose your API with authentication\n./bin/sellia http 8080 --auth api:secret --subdomain myapp-api --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#multiple-services","level":3,"title":"Multiple Services","text":"<pre><code># Terminal 1: Web app\n./bin/sellia http 3000 --subdomain myapp --server http://localhost:3000\n\n# Terminal 2: API\n./bin/sellia http 8080 --subdomain myapp-api --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/#help","level":2,"title":"Help","text":"<ul> <li>CLI Reference - Complete command documentation</li> <li>Troubleshooting - Common issues and solutions</li> <li>GitHub Issues - Report bugs</li> </ul>","path":["01 user","Getting started","Getting Started"],"tags":[]},{"location":"01-user/getting-started/installation/","level":1,"title":"Installing Sellia","text":"<p>Sellia can be installed from source or using pre-built binaries. Choose the method that best fits your workflow.</p>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before installing Sellia, ensure you have the following dependencies:</p> <ul> <li>Crystal &gt;= 1.10.0 - Install Crystal</li> <li>Git (for building from source)</li> </ul>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#installation-from-source","level":2,"title":"Installation from Source","text":"<p>Building from source gives you the latest features and allows you to modify the code.</p>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#step-1-clone-the-repository","level":3,"title":"Step 1: Clone the Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#step-2-install-dependencies","level":3,"title":"Step 2: Install Dependencies","text":"<p>Sellia uses Shards, Crystal's built-in dependency manager.</p> <pre><code>shards install\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#step-3-build-binaries","level":3,"title":"Step 3: Build Binaries","text":"<p>For development/testing (faster compilation):</p> <pre><code>shards build\n</code></pre> <p>For production use (optimized binaries):</p> <pre><code>shards build --release\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#step-4-verify-installation","level":3,"title":"Step 4: Verify Installation","text":"<p>The build process creates two binaries in the <code>./bin/</code> directory:</p> <ul> <li><code>sellia</code> - CLI client for creating tunnels</li> <li><code>sellia-server</code> - Tunnel server for self-hosting</li> </ul> <p>Check that the binaries are built:</p> <pre><code>ls -lh ./bin/\n</code></pre> <p>You should see: <pre><code>sellia\nsellia-server\n</code></pre></p>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#step-5-make-binaries-available-optional","level":3,"title":"Step 5: Make Binaries Available (Optional)","text":"<p>To use <code>sellia</code> from anywhere, add the binaries to your PATH:</p> <pre><code># Temporary (current session only)\nexport PATH=\"$PATH:$(pwd)/bin\"\n\n# Permanent (add to ~/.bashrc, ~/.zshrc, or equivalent)\necho 'export PATH=\"$PATH:'$(pwd)'/bin\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> <p>Verify the installation:</p> <pre><code>sellia version\nsellia-server --help\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#pre-built-binaries","level":2,"title":"Pre-built Binaries","text":"<p>Pre-built binaries are coming soon. This will allow you to download and install Sellia without needing to compile from source.</p>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#planned-availability","level":3,"title":"Planned Availability","text":"<ul> <li>macOS (Intel and Apple Silicon)</li> <li>Linux (x86_64, ARM64)</li> <li>Windows (x86_64)</li> </ul>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#installation-via-package-manager","level":2,"title":"Installation via Package Manager","text":"<p>Package manager installation is planned for future releases:</p> <ul> <li>Homebrew (macOS/Linux)</li> <li>AUR (Arch Linux)</li> <li>Snap Store (Linux)</li> <li>Chocolatey (Windows)</li> </ul>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#verifying-your-installation","level":2,"title":"Verifying Your Installation","text":"<p>After installing Sellia, verify that everything is working correctly:</p> <pre><code># Check CLI version\nsellia version\n\n# View CLI help\nsellia help\n\n# View server help\nsellia-server --help\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#next-steps","level":2,"title":"Next Steps","text":"<p>After installation, you can:</p> <ol> <li>Quick Start Guide - Get up and running in 5 minutes</li> <li>Self-Hosting Quick Start - Set up your own tunnel server</li> <li>Configuration Guide - Configure Sellia for your needs</li> </ol>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#crystal-version-issues","level":3,"title":"Crystal Version Issues","text":"<p>If you encounter issues with Crystal version, ensure you're using Crystal &gt;= 1.10.0:</p> <pre><code>crystal --version\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#build-failures","level":3,"title":"Build Failures","text":"<p>If the build fails, try:</p> <pre><code># Clean build directory\nrm -rf ./bin\n\n# Try again\nshards build --release\n\n# Or update dependencies first\nshards update\nshards build --release\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#permission-issues","level":3,"title":"Permission Issues","text":"<p>If you get permission errors when running binaries:</p> <pre><code># Make binaries executable\nchmod +x ./bin/sellia\nchmod +x ./bin/sellia-server\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#system-requirements","level":2,"title":"System Requirements","text":"","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#minimum-requirements","level":3,"title":"Minimum Requirements","text":"<ul> <li>CPU: x86_64 or ARM64</li> <li>RAM: 512 MB</li> <li>Disk: 50 MB for binaries</li> </ul>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#recommended-for-server","level":3,"title":"Recommended for Server","text":"<ul> <li>CPU: 2+ cores</li> <li>RAM: 2 GB+</li> <li>Disk: 100 MB+</li> <li>Network: Stable internet connection with sufficient bandwidth</li> </ul>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/installation/#development-installation","level":2,"title":"Development Installation","text":"<p>If you're planning to contribute to Sellia or modify the code:</p> <ol> <li>Follow the \"Installation from Source\" steps above</li> <li>Install Node.js &gt;= 18 for inspector UI development</li> <li>See the Development Guide</li> </ol> <p>For inspector UI development:</p> <pre><code>cd web\nnpm install\nnpm run dev\n</code></pre>","path":["01 user","Getting started","Installing Sellia"],"tags":[]},{"location":"01-user/getting-started/quickstart/","level":1,"title":"Quick Start Guide","text":"<p>Get up and running with Sellia in 5 minutes. This guide will show you how to expose a local server to the internet using secure tunnels.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#what-youll-learn","level":2,"title":"What You'll Learn","text":"<p>By the end of this guide, you'll be able to: - Create a secure tunnel to a local web server - Access your local server from the internet - Monitor incoming requests in real-time - Use custom subdomains for your tunnels</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before starting, ensure you have: - Sellia installed (Installation Guide) - A local web server running (or create a simple one for testing) - Terminal access</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#step-1-start-a-local-server","level":2,"title":"Step 1: Start a Local Server","text":"<p>First, let's create a simple local server to tunnel. If you already have a server running, skip to Step 2.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#example-python-http-server","level":3,"title":"Example: Python HTTP Server","text":"<pre><code># Create a test directory\nmkdir sellia-test\ncd sellia-test\n\n# Start a simple HTTP server on port 8080\npython3 -m http.server 8080\n</code></pre> <p>Or with Node.js:</p> <pre><code># Create a simple server\necho \"const http = require('http'); http.createServer((req, res) =&gt; res.end('Hello from Sellia!')).listen(8080);\" &gt; server.js\nnode server.js\n</code></pre> <p>Keep this server running in a terminal window.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#step-2-create-a-tunnel","level":2,"title":"Step 2: Create a Tunnel","text":"<p>Open a new terminal window and create a tunnel to your local server:</p> <pre><code>sellia http 8080 --server http://localhost:3000\n</code></pre> <p>You'll see output like:</p> <pre><code>Sellia v0.4.0\nForwarding to localhost:8080\n\nPublic URL: http://abc123.your-domain.com -&gt; localhost:8080\n\nInspector:  http://127.0.0.1:4040\n\nPress Ctrl+C to stop\n</code></pre> <p>That's it! Your local server is now accessible from the internet.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#step-3-test-your-tunnel","level":2,"title":"Step 3: Test Your Tunnel","text":"<p>Open the tunnel URL in your browser or use curl:</p> <pre><code>curl http://abc123.your-domain.com\n</code></pre> <p>You should see the response from your local server.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#step-4-monitor-requests","level":2,"title":"Step 4: Monitor Requests","text":"<p>Sellia includes a real-time request inspector. Open your browser and navigate to:</p> <pre><code>http://localhost:4040\n</code></pre> <p>Make a few requests to your tunnel URL and watch them appear in the inspector in real-time.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#inspector-features","level":3,"title":"Inspector Features","text":"<ul> <li>Live request streaming - See requests as they arrive</li> <li>Request details - View headers, body, and timing information</li> <li>Copy as cURL - Reproduce requests with one click</li> <li>Clear history - Reset the request log</li> </ul>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#step-5-use-a-custom-subdomain","level":2,"title":"Step 5: Use a Custom Subdomain","text":"<p>Instead of a random subdomain, you can request a specific one:</p> <pre><code>sellia http 8080 --subdomain myapp --server http://localhost:3000\n</code></pre> <p>Now your tunnel is accessible at:</p> <pre><code>http://myapp.your-domain.com\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#common-use-cases","level":2,"title":"Common Use Cases","text":"","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#webhook-development","level":3,"title":"Webhook Development","text":"<p>Test webhooks from services like Stripe, GitHub, or Slack:</p> <pre><code># Start your webhook handler\nnode webhook-handler.js &amp;\n\n# Create a tunnel\nsellia http 3000 --subdomain webhooks --server http://localhost:3000\n\n# Use the provided URL in your webhook configuration\n# http://webhooks.your-domain.com/webhook\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#mobile-app-development","level":3,"title":"Mobile App Development","text":"<p>Test mobile apps against a local API:</p> <pre><code># Start your API server\nrails server -p 4000 &amp;\n\n# Create a tunnel\nsellia http 4000 --subdomain api-dev --server http://localhost:3000\n\n# Point your mobile app to http://api-dev.your-domain.com\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#client-demos","level":3,"title":"Client Demos","text":"<p>Share work-in-progress with clients:</p> <pre><code># Start your frontend dev server\nnpm run dev &amp;\n\n# Create a tunnel with a memorable subdomain\nsellia http 5173 --subdomain demo-acme --server http://localhost:3000\n\n# Share http://demo-acme.your-domain.com with your client\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#oauth-callback-testing","level":3,"title":"OAuth Callback Testing","text":"<p>Test OAuth callbacks locally:</p> <pre><code># Start your OAuth callback handler\nnode oauth-server.js &amp;\n\n# Create a tunnel\nsellia http 5000 --subdomain oauth-test --server http://localhost:3000\n\n# Use http://oauth-test.your-domain.com/callback in your OAuth app settings\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#advanced-options","level":2,"title":"Advanced Options","text":"","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#basic-authentication","level":3,"title":"Basic Authentication","text":"<p>Protect your tunnel with basic auth:</p> <pre><code>sellia http 8080 --auth admin:secret123 --server http://localhost:3000\n</code></pre> <p>Users will be prompted for credentials when accessing the tunnel.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#disable-inspector","level":3,"title":"Disable Inspector","text":"<p>If you don't need the request inspector:</p> <pre><code>sellia http 8080 --no-inspector --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#custom-inspector-port","level":3,"title":"Custom Inspector Port","text":"<p>Change the inspector port if 4040 is in use:</p> <pre><code>sellia http 8080 --inspector-port 5000 --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#open-inspector-automatically","level":3,"title":"Open Inspector Automatically","text":"<p>Open the inspector in your browser when the tunnel starts:</p> <pre><code>sellia http 8080 --open --server http://localhost:3000\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#configuration-file","level":2,"title":"Configuration File","text":"<p>For multiple tunnels or persistent settings, use a configuration file:</p> <p>Create <code>sellia.yml</code> in your project directory:</p> <pre><code>server: http://localhost:3000\n\ntunnels:\n  web:\n    port: 8080\n    subdomain: myapp\n  api:\n    port: 3000\n    subdomain: myapp-api\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#stopping-tunnels","level":2,"title":"Stopping Tunnels","text":"<p>To stop a tunnel, press <code>Ctrl+C</code> in the terminal where it's running.</p> <p>All tunnels will be automatically closed when you stop the Sellia client.</p>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#connection-refused-error","level":3,"title":"\"Connection Refused\" Error","text":"<p>Ensure your local server is running:</p> <pre><code># Check if port is in use\nlsof -i :8080\n\n# Or with netstat\nnetstat -an | grep 8080\n</code></pre>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#tunnel-url-not-accessible","level":3,"title":"Tunnel URL Not Accessible","text":"<ol> <li>Verify the server is running</li> <li>Check your network connection</li> <li>Ensure the server URL is correct</li> </ol>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#inspector-not-loading","level":3,"title":"Inspector Not Loading","text":"<ol> <li>Check if the inspector port is already in use</li> <li>Try disabling the inspector with <code>--no-inspector</code></li> <li>Verify the tunnel is running</li> </ol>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#whats-next","level":2,"title":"What's Next?","text":"<p>Now that you've got the basics down, explore more features:</p> <ul> <li>Self-Hosting - Run your own tunnel server</li> <li>Configuration Guide - Set up config files</li> <li>Authentication - Secure your tunnels</li> <li>Docker Deployment - Deploy Sellia with Docker</li> </ul>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/quickstart/#need-help","level":2,"title":"Need Help?","text":"<ul> <li>Check the main README</li> <li>Open an issue on GitHub</li> <li>Join the community discussions</li> </ul>","path":["01 user","Getting started","Quick Start Guide"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/","level":1,"title":"Self-Hosting Quick Start","text":"<p>Run your own Sellia tunnel server for full control, privacy, and customization. This guide will get you up and running in 10 minutes.</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#why-self-host","level":2,"title":"Why Self-Host?","text":"<p>Self-hosting gives you: - Privacy: Full control over your data - Customization: Configure domains, auth, and features - Cost savings: No subscription fees - Reliability: No dependencies on external services - Security: Manage your own TLS certificates</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before starting, ensure you have: - Sellia installed (Installation Guide) - A domain name (or subdomain) with DNS configured - A server with public IP (VPS, cloud server, or local machine with port forwarding) - Basic knowledge of DNS and networking</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#quick-start-docker-compose-recommended","level":2,"title":"Quick Start: Docker Compose (Recommended)","text":"<p>The fastest way to self-host Sellia is with Docker Compose.</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-1-clone-the-repository","level":3,"title":"Step 1: Clone the Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-2-configure-environment-variables","level":3,"title":"Step 2: Configure Environment Variables","text":"<p>Create a <code>.env</code> file:</p> <pre><code>cat &gt; .env &lt;&lt; EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_USE_HTTPS=true\nEOF\n</code></pre> <p>Replace <code>yourdomain.com</code> with your actual domain.</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-3-prepare-tls-certificates","level":3,"title":"Step 3: Prepare TLS Certificates","text":"<p>Sellia requires TLS certificates. The quickest option is using Cloudflare Origin Certificates (free):</p> <ol> <li>Add your domain to Cloudflare</li> <li>Go to SSL/TLS → Origin Server → Create Certificate</li> <li>Select:</li> <li>Hostnames: <code>*.yourdomain.com</code> and <code>yourdomain.com</code></li> <li>Validity: 15 years</li> <li>Download the certificate and key</li> <li>Place them in <code>./certs/</code>:    <pre><code>certs/\n├── cert.pem\n└── key.pem\n</code></pre></li> </ol>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-4-start-the-server","level":3,"title":"Step 4: Start the Server","text":"<pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-5-verify-deployment","level":3,"title":"Step 5: Verify Deployment","text":"<p>Check that the server is running:</p> <pre><code>docker compose -f docker-compose.prod.yml ps\ndocker compose -f docker-compose.prod.yml logs -f\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-6-create-your-first-tunnel","level":3,"title":"Step 6: Create Your First Tunnel","text":"<p>On your local machine:</p> <pre><code>sellia http 8080 --server https://yourdomain.com --api-key YOUR_MASTER_KEY\n</code></pre> <p>Your tunnel is now accessible at: <pre><code>https://abc123.yourdomain.com\n</code></pre></p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#manual-setup-running-from-source","level":2,"title":"Manual Setup: Running from Source","text":"<p>If you prefer to run Sellia directly without Docker:</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-1-build-sellia","level":3,"title":"Step 1: Build Sellia","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\nshards build --release\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-2-prepare-tls-certificates","level":3,"title":"Step 2: Prepare TLS Certificates","text":"<p>As with Docker, you need TLS certificates. Place them in <code>./certs/</code>: <pre><code>certs/\n├── cert.pem\n└── key.pem\n</code></pre></p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-3-start-the-server","level":3,"title":"Step 3: Start the Server","text":"<pre><code>./bin/sellia-server \\\n  --port 3000 \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key $(openssl rand -hex 32) \\\n  --https\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-4-configure-reverse-proxy-recommended","level":3,"title":"Step 4: Configure Reverse Proxy (Recommended)","text":"<p>For production, use a reverse proxy like Nginx or Caddy. Here's a basic Nginx config:</p> <pre><code>server {\n    listen 80;\n    server_name yourdomain.com *.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl;\n    server_name yourdomain.com *.yourdomain.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#step-5-create-tunnels","level":3,"title":"Step 5: Create Tunnels","text":"<pre><code>sellia http 8080 --server https://yourdomain.com --api-key YOUR_MASTER_KEY\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#server-configuration-options","level":2,"title":"Server Configuration Options","text":"<p>The <code>sellia-server</code> binary supports several options:</p> <pre><code>sellia-server [options]\n\nOptions:\n  --host HOST           Host to bind to (default: 0.0.0.0)\n  --port PORT           Port to listen on (default: 3000)\n  --domain DOMAIN       Base domain for subdomains (default: localhost)\n  --require-auth        Require API key authentication\n  --master-key KEY      Master API key (enables auth)\n  --https               Generate HTTPS URLs for tunnels\n  --no-rate-limit       Disable rate limiting\n  --no-landing          Disable the landing page\n  --db-path PATH        Path to SQLite database\n  --no-db               Disable database (use in-memory defaults)\n  -h, --help            Show help\n  -v, --version         Show version\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#environment-variables","level":3,"title":"Environment Variables","text":"<p>You can also configure the server using environment variables:</p> Variable Description Default <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains <code>localhost</code> <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key - <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code> <code>SELLIA_DISABLE_LANDING</code> Disable the landing page <code>false</code> <code>SELLIA_DB_PATH</code> Path to SQLite database <code>~/.sellia/sellia.db</code> <code>SELLIA_NO_DB</code> Disable database (use in-memory defaults) <code>false</code>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#dns-configuration","level":2,"title":"DNS Configuration","text":"<p>Your domain's DNS should point to your server:</p> <pre><code>A    yourdomain.com        -&gt; YOUR_SERVER_IP\nA    *.yourdomain.com      -&gt; YOUR_SERVER_IP\n</code></pre> <p>If using Cloudflare, enable proxy mode (orange cloud icon) for DDoS protection.</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#1-use-strong-api-keys","level":3,"title":"1. Use Strong API Keys","text":"<p>Generate secure random keys:</p> <pre><code>openssl rand -hex 32\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#2-enable-authentication","level":3,"title":"2. Enable Authentication","text":"<p>Always require authentication in production:</p> <pre><code>sellia-server --require-auth --master-key $(openssl rand -hex 32)\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#3-use-https","level":3,"title":"3. Use HTTPS","text":"<p>Enable HTTPS for secure tunnel URLs:</p> <pre><code>sellia-server --https\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#4-enable-rate-limiting","level":3,"title":"4. Enable Rate Limiting","text":"<p>Keep rate limiting enabled (default) to prevent abuse:</p> <pre><code># Default: enabled\nsellia-server\n\n# Disable only if needed\nsellia-server --no-rate-limit\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#5-monitor-logs","level":3,"title":"5. Monitor Logs","text":"<p>Regularly check server logs for suspicious activity:</p> <pre><code># With Docker\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Manual\n./bin/sellia-server\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#managing-api-keys","level":2,"title":"Managing API Keys","text":"<p>The master API key created during setup can be used to create tunnels. For better security, create individual keys for each user or application.</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#using-api-keys","level":3,"title":"Using API Keys","text":"<p>Store your API key securely:</p> <pre><code># In environment variable\nexport SELLIA_API_KEY=\"your-api-key\"\n\n# Use with tunnel\nsellia http 8080 --server https://yourdomain.com\n</code></pre> <p>Or in <code>sellia.yml</code>:</p> <pre><code>server: https://yourdomain.com\napi_key: your-api-key\n</code></pre> <p>Then use:</p> <pre><code>sellia http 8080\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#production-deployment","level":2,"title":"Production Deployment","text":"<p>For production deployment, consider:</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#1-use-a-process-manager","level":3,"title":"1. Use a Process Manager","text":"<p>Keep the server running with systemd, supervisord, or Docker:</p> <pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nWorkingDirectory=/opt/sellia\nExecStart=/opt/sellia/bin/sellia-server --port 3000 --domain yourdomain.com\nRestart=always\nEnvironmentFile=/opt/sellia/.env\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#2-configure-firewall","level":3,"title":"2. Configure Firewall","text":"<p>Open necessary ports:</p> <pre><code># Allow HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Allow Sellia server port (if not behind reverse proxy)\nsudo ufw allow 3000/tcp\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#3-set-up-monitoring","level":3,"title":"3. Set Up Monitoring","text":"<p>Monitor server health with tools like: - Prometheus + Grafana - Datadog - New Relic - Custom health checks</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#4-configure-backups","level":3,"title":"4. Configure Backups","text":"<p>Back up your configuration and TLS certificates:</p> <pre><code># Backup script\ntar -czf sellia-backup-$(date +%Y%m%d).tar.gz \\\n  /opt/sellia/.env \\\n  /opt/sellia/certs/ \\\n  /opt/sellia/sellia.yml\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#scaling-considerations","level":2,"title":"Scaling Considerations","text":"<p>For high-traffic deployments:</p> <ol> <li>Load Balancing: Run multiple Sellia instances behind a load balancer</li> <li>Caching: Add caching for static content</li> <li>Database: For persistent tunnel registry, consider adding a database backend</li> <li>Monitoring: Implement comprehensive monitoring and alerting</li> </ol>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#server-wont-start","level":3,"title":"Server Won't Start","text":"<p>Check port availability:</p> <pre><code>lsof -i :3000\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#tls-certificate-errors","level":3,"title":"TLS Certificate Errors","text":"<p>Verify certificate paths and permissions:</p> <pre><code>ls -la ./certs/\ncat ./certs/cert.pem\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#dns-not-resolving","level":3,"title":"DNS Not Resolving","text":"<p>Check DNS propagation:</p> <pre><code>dig yourdomain.com\ndig *.yourdomain.com\n</code></pre>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#tunnel-connection-failures","level":3,"title":"Tunnel Connection Failures","text":"<p>Verify: 1. Server is running 2. API key is correct 3. Network connectivity 4. Firewall rules</p>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#next-steps","level":2,"title":"Next Steps","text":"<p>Now that your server is running:</p> <ul> <li>Configuration Guide - Advanced configuration</li> <li>TLS Certificates - Certificate management</li> <li>Docker Deployment - Container deployment</li> <li>Multiple Tunnels - Manage multiple tunnels</li> </ul>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/getting-started/self-hosting-quickstart/#support","level":2,"title":"Support","text":"<ul> <li>Documentation</li> <li>GitHub Issues</li> <li>Community Discussions</li> </ul>","path":["01 user","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/","level":1,"title":"Disabling the Inspector","text":"<p>The Sellia Inspector is enabled by default for debugging, but you can disable it to save resources or for production deployments. This guide explains when and how to disable the inspector.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#why-disable-the-inspector","level":2,"title":"Why Disable the Inspector?","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#resource-usage","level":3,"title":"Resource Usage","text":"<p>The inspector uses: - Memory: ~1-5 KB per request for history - CPU: Minimal overhead for request logging - File Descriptor: One for the inspector UI</p> <p>For high-traffic scenarios, this can add up.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#production-deployments","level":3,"title":"Production Deployments","text":"<p>In production, you typically: - Use application-level logging instead - Don't need real-time request inspection - Want minimal resource overhead - Have centralized monitoring</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#security-considerations","level":3,"title":"Security Considerations","text":"<p>The inspector exposes: - All request headers including auth tokens - Request/response bodies - Sensitive data in transit</p> <p>Disable to prevent accidental exposure.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#performance-optimization","level":3,"title":"Performance Optimization","text":"<p>For maximum tunnel performance: - Eliminate any overhead - Reduce memory footprint - Minimize CPU usage</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#how-to-disable-the-inspector","level":2,"title":"How to Disable the Inspector","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#command-line-flag","level":3,"title":"Command Line Flag","text":"<p>Use the <code>--no-inspector</code> flag:</p> <pre><code>sellia http 8080 --no-inspector --server https://sellia.me\n</code></pre> <p>Output: <pre><code>[Sellia] Tunnel established at: https://abc123.sellia.me\n# No inspector URL shown\n</code></pre></p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#configuration-and-environment","level":3,"title":"Configuration and Environment","text":"<p>There is no config or environment variable to toggle the inspector. Use <code>--no-inspector</code> with <code>sellia http</code>. The <code>sellia start</code> command does not run the inspector.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#when-to-disable","level":2,"title":"When to Disable","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#1-production-tunnels","level":3,"title":"1. Production Tunnels","text":"<p>Always disable in production:</p> <pre><code>sellia http 8080 --no-inspector --server https://prod.sellia.me\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#2-high-traffic-scenarios","level":3,"title":"2. High-Traffic Scenarios","text":"<p>For expected high load:</p> <pre><code>sellia http 8080 --no-inspector --server https://sellia.me\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#3-sensitive-data","level":3,"title":"3. Sensitive Data","text":"<p>When handling sensitive information:</p> <pre><code>sellia http 8080 --no-inspector --auth secure:secret\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#4-resource-constrained-environments","level":3,"title":"4. Resource-Constrained Environments","text":"<p>Limited memory/CPU:</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#5-backgroundservice-tunnels","level":3,"title":"5. Background/Service Tunnels","text":"<p>If you run a long-lived tunnel, use <code>sellia http --no-inspector</code> to avoid inspector overhead.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#when-to-keep-inspector-enabled","level":2,"title":"When to Keep Inspector Enabled","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#1-development","level":3,"title":"1. Development","text":"<p>Always enable during development:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#2-debugging","level":3,"title":"2. Debugging","text":"<p>When troubleshooting issues:</p> <pre><code>sellia http 8080  # Inspector enabled by default\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#3-testing","level":3,"title":"3. Testing","text":"<p>During API testing:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#4-webhook-development","level":3,"title":"4. Webhook Development","text":"<p>For webhook testing:</p> <pre><code>sellia http 3000 --subdomain webhooks --open\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#5-low-traffic-personal-tunnels","level":3,"title":"5. Low-Traffic Personal Tunnels","text":"<p>Personal use with low traffic:</p> <pre><code>sellia http 8080  # Fine to keep enabled\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#alternatives-to-inspector","level":2,"title":"Alternatives to Inspector","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#application-logging","level":3,"title":"Application Logging","text":"<p>Use your application's logging instead:</p> <pre><code>// Express example\napp.use((req, res, next) =&gt; {\n  console.log({\n    method: req.method,\n    path: req.path,\n    headers: req.headers,\n    body: req.body\n  });\n  next();\n});\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#http-logging-libraries","level":3,"title":"HTTP Logging Libraries","text":"<p>Use dedicated logging middleware:</p> <pre><code>// Node.js - morgan\nconst morgan = require('morgan');\napp.use(morgan('combined'));\n\n// Python - logging\nimport logging\nlogging.basicConfig(level=logging.INFO)\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#centralized-logging","level":3,"title":"Centralized Logging","text":"<p>Send logs to logging services:</p> <pre><code>// Send to Datadog, Loggly, etc.\nconst winston = require('winston');\nrequire('winston-datadog-logs-transport');\n\nconst logger = winston.createLogger({\n  transports: [\n    new DatadogLogsTransport({\n      apiKey: process.env.DD_API_KEY\n    })\n  ]\n});\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#apm-tools","level":3,"title":"APM Tools","text":"<p>Use Application Performance Monitoring:</p> <ul> <li>Datadog: Full request tracing</li> <li>New Relic: Performance monitoring</li> <li>Prometheus + Grafana: Metrics and dashboards</li> <li>CloudWatch: AWS integrated monitoring</li> </ul>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#performance-impact","level":2,"title":"Performance Impact","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#memory-usage","level":3,"title":"Memory Usage","text":"<p>With inspector (1000 requests): <pre><code>Memory: ~5 MB\n  - Request history: ~3 MB\n  - UI overhead: ~2 MB\n</code></pre></p> <p>Without inspector: <pre><code>Memory: ~0 MB (no additional overhead)\n</code></pre></p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#cpu-overhead","level":3,"title":"CPU Overhead","text":"<p>With inspector: <pre><code>CPU: +1-2% per 1000 req/min\n</code></pre></p> <p>Without inspector: <pre><code>CPU: No overhead\n</code></pre></p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#request-latency","level":3,"title":"Request Latency","text":"<p>Inspector adds minimal latency: <pre><code>Without inspector: 50ms average\nWith inspector: 51ms average (+1ms)\n</code></pre></p> <p>Disable to eliminate this overhead.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#cli-examples","level":2,"title":"CLI Examples","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#development-inspector-on","level":3,"title":"Development (inspector on)","text":"<pre><code>sellia http 3000 --open --server https://dev.sellia.me\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#production-inspector-off","level":3,"title":"Production (inspector off)","text":"<pre><code>sellia http 3000 --no-inspector --server https://prod.sellia.me\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#temporary-debugging","level":3,"title":"Temporary debugging","text":"<pre><code>sellia http 3000 --open\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#inspector-still-running","level":3,"title":"Inspector Still Running","text":"<p>If the inspector appears when you expect it to be disabled:</p> <ol> <li>Confirm the command includes <code>--no-inspector</code>.</li> <li>Ensure you are running <code>sellia http</code> (the inspector is not used by <code>sellia start</code>).</li> <li>Check that an older <code>sellia http</code> process isn’t still running.</li> </ol>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#need-inspector-temporarily","level":3,"title":"Need Inspector Temporarily","text":"<p>If inspector is disabled but you need it:</p> <ol> <li> <p>Enable temporarily:    <pre><code>sellia http 8080  # Remove --no-inspector flag\n</code></pre></p> </li> <li> <p>Use different tunnel for debugging:    <pre><code># Main tunnel (no inspector)\nsellia http 3000 --subdomain app-prod --no-inspector &amp;\n\n# Debug tunnel (with inspector)\nsellia http 3001 --subdomain app-debug --open\n</code></pre></p> </li> <li> <p>If you need the inspector temporarily, run <code>sellia http</code> without <code>--no-inspector</code>.</p> </li> </ol>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<p>If inspector port (4040) is in use:</p> <ol> <li> <p>Use custom port:    <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre></p> </li> <li> <p>Disable inspector:    <pre><code>sellia http 8080 --no-inspector\n</code></pre></p> </li> </ol>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#1-environment-based-commands","level":3,"title":"1. Environment-Based Commands","text":"<p>Use shell aliases or scripts for consistent behavior:</p> <pre><code># Development\nalias sellia-dev='sellia http 3000 --open'\n\n# Production\nalias sellia-prod='sellia http 3000 --no-inspector'\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#2-explicit-in-production","level":3,"title":"2. Explicit in Production","text":"<p>Always include <code>--no-inspector</code> in production commands or service definitions.</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#3-document-decision","level":3,"title":"3. Document Decision","text":"<p>Note in runbooks or deployment scripts why the inspector is disabled (e.g., security or performance).</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#4-use-alternatives","level":3,"title":"4. Use Alternatives","text":"<p>Set up proper monitoring before disabling (e.g., centralized logging and APM).</p>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#migration-guide","level":2,"title":"Migration Guide","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#from-inspector-to-logging","level":3,"title":"From Inspector to Logging","text":"<ol> <li> <p>Keep inspector during development <pre><code>sellia http 8080 --open\n</code></pre></p> </li> <li> <p>Add application logging <pre><code>app.use(morgan('combined'));\n</code></pre></p> </li> <li> <p>Test with both enabled <pre><code># Compare inspector vs. application logs\n</code></pre></p> </li> <li> <p>Deploy with logging only    Use <code>sellia http --no-inspector</code> in production.</p> </li> <li> <p>Monitor logs in production <pre><code>tail -f /var/log/app.log\n</code></pre></p> </li> </ol>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#verification","level":2,"title":"Verification","text":"","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#verify-inspector-is-disabled","level":3,"title":"Verify Inspector is Disabled","text":"<pre><code># Start tunnel with --no-inspector\nsellia http 8080 --no-inspector\n\n# Output should NOT show:\n# [Sellia] Inspector available at: http://localhost:4040\n\n# Verify port not in use\nlsof -i :4040\n# Should return nothing\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#verify-inspector-is-enabled","level":3,"title":"Verify Inspector is Enabled","text":"<pre><code># Start tunnel without flag\nsellia http 8080\n\n# Output should show:\n# [Sellia] Inspector available at: http://localhost:4040\n\n# Verify port is in use\nlsof -i :4040\n# Should show sellia process\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#decision-tree","level":2,"title":"Decision Tree","text":"<pre><code>Is this a production tunnel?\n├─ Yes → Disable inspector (--no-inspector)\n│        Use application logging instead\n│\n└─ No (development/testing)\n    ├─ Need to debug requests?\n    │  ├─ Yes → Enable inspector (--open)\n    │  └─ No → Optional (enabled by default)\n    │\n    └─ High traffic expected (&gt;1000 req/min)?\n       ├─ Yes → Consider disabling\n       └─ No → Keep enabled\n</code></pre>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Live Monitoring - Using the inspector</li> <li>Application Logging - Alternative logging</li> <li>Production Deployment - Production setup</li> </ul>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#quick-reference","level":2,"title":"Quick Reference","text":"Scenario Command Disable inspector <code>sellia http 8080 --no-inspector</code> Enable inspector <code>sellia http 8080</code> (default) Auto-open inspector <code>sellia http 8080 --open</code> Custom inspector port <code>sellia http 8080 --inspector-port 5000</code>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/disabling-inspector/#checklist","level":2,"title":"Checklist","text":"<p>Before disabling inspector in production:</p> <ul> <li> Application logging configured</li> <li> Centralized logging set up (optional)</li> <li> Team knows how to access logs</li> <li> Monitoring/alerting configured</li> <li> Debug procedures documented</li> <li> Can reproduce issues with logs only</li> <li> Performance metrics being collected</li> <li> Tested without inspector in staging</li> </ul>","path":["01 user","Inspector","Disabling the Inspector"],"tags":[]},{"location":"01-user/inspector/live-monitoring/","level":1,"title":"Live Request Monitoring","text":"<p>The Sellia Inspector provides real-time visibility into all HTTP requests flowing through your tunnels. Debug issues, analyze traffic, and understand your application's behavior without adding any logging code.</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#what-is-the-inspector","level":2,"title":"What is the Inspector?","text":"<p>The inspector is a web-based UI that shows: - All incoming requests to your tunnels - Request details (headers, body, timing) - Response information (status, headers, body) - Real-time streaming of new requests - Request history and search</p> <p>Access it at <code>http://localhost:4040</code> when a tunnel is running.</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#starting-the-inspector","level":2,"title":"Starting the Inspector","text":"<p>The inspector starts automatically when you create a tunnel:</p> <pre><code>sellia http 8080 --server https://sellia.me\n</code></pre> <p>Output: <pre><code>[Sellia] Tunnel established at: https://abc123.sellia.me\n[Sellia] Inspector available at: http://localhost:4040\n</code></pre></p> <p>Open <code>http://localhost:4040</code> in your browser to see the inspector.</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-interface","level":2,"title":"Inspector Interface","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#main-view","level":3,"title":"Main View","text":"<p>The main inspector interface shows:</p> <ol> <li>Request List - Stream of incoming requests</li> <li>Request Details - Click any request to see full details</li> <li>Status Bar - Active tunnel info and connection status</li> <li>Toolbar - Search, filter, and clear options</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#request-entry","level":3,"title":"Request Entry","text":"<p>Each request in the list shows: - Method - GET, POST, PUT, DELETE, etc. - Path - Request path and query string - Status - HTTP status code with color coding - Time - Timestamp of request - Duration - Request processing time - Source IP - Client IP address</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#status-code-colors","level":3,"title":"Status Code Colors","text":"<ul> <li>2xx (Green) - Successful responses</li> <li>3xx (Yellow) - Redirects</li> <li>4xx (Orange) - Client errors</li> <li>5xx (Red) - Server errors</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#real-time-streaming","level":2,"title":"Real-Time Streaming","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#automatic-updates","level":3,"title":"Automatic Updates","text":"<p>Requests appear in the inspector as they arrive:</p> <ol> <li>Make a request to your tunnel</li> <li>Request appears instantly in the inspector</li> <li>No page refresh needed</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#example","level":3,"title":"Example","text":"<pre><code># Terminal 1: Start tunnel\nsellia http 8080 --open\n\n# Terminal 2: Make requests\ncurl https://abc123.sellia.me/api/users\ncurl https://abc123.sellia.me/api/products\ncurl -X POST https://abc123.sellia.me/api/data\n</code></pre> <p>Watch all three requests appear in real-time in the inspector.</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-features","level":2,"title":"Inspector Features","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#1-live-streaming","level":3,"title":"1. Live Streaming","text":"<p>Watch requests as they happen:</p> <pre><code>10:23:45  GET    /api/users          200  45ms\n10:23:47  POST   /api/data           201  123ms\n10:23:50  GET    /api/products       200  38ms\n10:23:55  DELETE /api/users/123      204  52ms\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#2-request-details","level":3,"title":"2. Request Details","text":"<p>Click any request to see full details:</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#request-information","level":4,"title":"Request Information","text":"<ul> <li>Full URL</li> <li>Method and path</li> <li>Query parameters</li> <li>Request headers</li> <li>Request body (if present)</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#response-information","level":4,"title":"Response Information","text":"<ul> <li>Status code and message</li> <li>Response headers</li> <li>Response body (if present)</li> <li>Response size</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#timing-information","level":4,"title":"Timing Information","text":"<ul> <li>Total duration</li> <li>Time to first byte</li> <li>Processing time</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#3-search-and-filter","level":3,"title":"3. Search and Filter","text":"<p>Find specific requests:</p> <pre><code># In the inspector UI\n# Search box in top right\n\n# Search by path\n/api/users\n\n# Search by method\nPOST\n\n# Search by status\n404\n\n# Search by content type\napplication/json\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#4-clear-history","level":3,"title":"4. Clear History","text":"<p>Reset the request log:</p> <pre><code># Click \"Clear\" button in toolbar\n# Or use keyboard shortcut (Ctrl/Cmd + K)\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#5-copy-as-curl","level":3,"title":"5. Copy as cURL","text":"<p>Reproduce any request:</p> <pre><code># Click on a request\n# Click \"Copy as cURL\" button\n# Paste in terminal to reproduce\n</code></pre> <p>See Copy as cURL for details.</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-options","level":2,"title":"Inspector Options","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#automatic-browser-opening","level":3,"title":"Automatic Browser Opening","text":"<p>Open inspector automatically when tunnel starts:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#custom-inspector-port","level":3,"title":"Custom Inspector Port","text":"<p>Change the default port (4040) if needed:</p> <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre> <p>Access at <code>http://localhost:5000</code></p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#disable-inspector","level":3,"title":"Disable Inspector","text":"<p>If you don't need the inspector:</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre> <p>This saves resources and is useful for production tunnels.</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#use-cases","level":2,"title":"Use Cases","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#1-debugging-webhooks","level":3,"title":"1. Debugging Webhooks","text":"<p>See exactly what webhook payloads you're receiving:</p> <pre><code># Start tunnel with inspector\nsellia http 3000 --subdomain webhooks --open\n\n# Configure webhook URL in service\n# https://webhooks.sellia.me/callback\n\n# Watch webhook requests appear in real-time\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#2-api-development","level":3,"title":"2. API Development","text":"<p>Monitor API calls during development:</p> <pre><code>sellia http 4000 --subdomain api-dev --open\n\n# Test your API from frontend\n# See all requests in inspector\n# Debug authentication, headers, responses\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#3-performance-analysis","level":3,"title":"3. Performance Analysis","text":"<p>Identify slow requests:</p> <pre><code>sellia http 3000 --open\n\n# Use your application\n# Watch for requests with high duration\n# Optimize slow endpoints\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#4-testing-integrations","level":3,"title":"4. Testing Integrations","text":"<p>Verify third-party service integrations:</p> <pre><code>sellia http 5000 --subdomain stripe-test --open\n\n# Configure Stripe webhook\n# Make a test payment\n# Inspect the webhook payload\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#5-mobile-app-development","level":3,"title":"5. Mobile App Development","text":"<p>Debug mobile app API calls:</p> <pre><code>sellia http 4000 --subdomain mobile-api --open\n\n# Point mobile app to tunnel URL\n# See all API requests from app\n# Debug headers, auth, payloads\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-vs-application-logging","level":2,"title":"Inspector vs. Application Logging","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-advantages","level":3,"title":"Inspector Advantages","text":"<ul> <li>No code changes needed</li> <li>See all requests, including ones your app doesn't log</li> <li>Real-time streaming</li> <li>Easy search and filtering</li> <li>Visual request details</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#application-logging-advantages","level":3,"title":"Application Logging Advantages","text":"<ul> <li>Persistent across restarts</li> <li>Can log application-specific data</li> <li>Can log to files/services</li> <li>Custom formatting</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#best-practice","level":3,"title":"Best Practice","text":"<p>Use both: - Inspector for real-time debugging - Application logs for persistent records and production</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#performance-impact","level":2,"title":"Performance Impact","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#minimal-overhead","level":3,"title":"Minimal Overhead","text":"<p>The inspector adds negligible overhead: - ~1-2ms per request - No impact on tunnel performance - Can be disabled with <code>--no-inspector</code></p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#memory-usage","level":3,"title":"Memory Usage","text":"<p>Inspector maintains request history in memory: - Each request: ~1-5 KB depending on size - Typical usage: &lt;100 MB for thousands of requests - Clear history to free memory</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#disabling-for-production","level":3,"title":"Disabling for Production","text":"<p>For high-traffic production tunnels, consider disabling:</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-workflows","level":2,"title":"Inspector Workflows","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#debugging-a-404-error","level":3,"title":"Debugging a 404 Error","text":"<ol> <li>Start inspector: <code>sellia http 8080 --open</code></li> <li>Make request that returns 404</li> <li>Click request in inspector</li> <li>Check:</li> <li>Request path is correct</li> <li>Query parameters are present</li> <li>Headers are correct</li> <li>Compare to working requests</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#debugging-authentication","level":3,"title":"Debugging Authentication","text":"<ol> <li>Start inspector</li> <li>Make authenticated request</li> <li>Click request in inspector</li> <li>Check headers:</li> <li>Authorization header format</li> <li>Cookie values</li> <li>Custom auth headers</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#debugging-postput-data","level":3,"title":"Debugging POST/PUT Data","text":"<ol> <li>Start inspector</li> <li>Make POST/PUT request</li> <li>Click request in inspector</li> <li>Check request body:</li> <li>JSON format</li> <li>Form data</li> <li>File uploads</li> <li>Content-Type header</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#performance-debugging","level":3,"title":"Performance Debugging","text":"<ol> <li>Start inspector</li> <li>Use your application</li> <li>Sort requests by duration</li> <li>Investigate slowest requests:</li> <li>Check response size</li> <li>Look at database queries</li> <li>Profile application code</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#tips-and-tricks","level":2,"title":"Tips and Tricks","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#1-keep-inspector-open","level":3,"title":"1. Keep Inspector Open","text":"<p>Leave the inspector open while developing: - See all requests in real-time - No need to refresh - Instant feedback</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#2-use-multiple-monitors","level":3,"title":"2. Use Multiple Monitors","text":"<p>If you have multiple monitors: - Monitor 1: Your application - Monitor 2: Inspector - Watch requests as you interact with app</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#3-search-by-status-code","level":3,"title":"3. Search by Status Code","text":"<p>Quickly find errors:</p> <pre><code># Search for server errors\n500\n\n# Search for client errors\n404\n\n# Search for redirects\n302\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#4-compare-requests","level":3,"title":"4. Compare Requests","text":"<p>Open multiple requests in tabs: - Compare working vs. broken requests - Spot differences in headers/body - Identify what changed</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#5-clear-before-testing","level":3,"title":"5. Clear Before Testing","text":"<p>Clear history before specific test:</p> <pre><code># Click \"Clear\" button\n# Run specific test scenario\n# Only see test requests\n</code></pre>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#limitations","level":2,"title":"Limitations","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#request-history","level":3,"title":"Request History","text":"<ul> <li>Stored in memory only</li> <li>Lost when tunnel stops</li> <li>Use application logging for persistence</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#large-bodies","level":3,"title":"Large Bodies","text":"<p>Very large request/response bodies may be truncated: - Maximum display size: ~1 MB - Full data still forwarded through tunnel - Check application logs for complete data</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#concurrent-tunnels","level":3,"title":"Concurrent Tunnels","text":"<p>Each <code>sellia http</code> process has its own inspector: - Use different <code>--inspector-port</code> values when running multiple processes - There is no single view that aggregates multiple tunnels</p>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-not-loading","level":3,"title":"Inspector Not Loading","text":"<p>If inspector won't load:</p> <ol> <li> <p>Verify tunnel is running:    <pre><code>ps aux | grep sellia\n</code></pre></p> </li> <li> <p>Check inspector port:    <pre><code>lsof -i :4040\n</code></pre></p> </li> <li> <p>Try different port:    <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre></p> </li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#no-requests-showing","level":3,"title":"No Requests Showing","text":"<p>If inspector is empty:</p> <ol> <li> <p>Make a test request:    <pre><code>curl https://your-tunnel.sellia.me\n</code></pre></p> </li> <li> <p>Check tunnel is active:    <pre><code># Should see \"Tunnel established\"\n</code></pre></p> </li> <li> <p>Verify browser console for errors</p> </li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#inspector-slow","level":3,"title":"Inspector Slow","text":"<p>If inspector is slow:</p> <ol> <li>Clear request history</li> <li>Close other browser tabs</li> <li>Check system resources</li> <li>Consider disabling for high-traffic scenarios</li> </ol>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Request Details - Deep dive into request information</li> <li>Copy as cURL - Reproduce requests</li> <li>Disabling Inspector - When to disable</li> <li>HTTP Tunnels - Tunnel basics</li> </ul>","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/inspector/live-monitoring/#keyboard-shortcuts","level":2,"title":"Keyboard Shortcuts","text":"Shortcut Action <code>Ctrl/Cmd + K</code> Clear history <code>Ctrl/Cmd + F</code> Focus search <code>Escape</code> Close request details <code>↑</code> / <code>↓</code> Navigate requests <code>Enter</code> Open request details","path":["01 user","Inspector","Live Request Monitoring"],"tags":[]},{"location":"01-user/storage/","level":1,"title":"Storage","text":"<p>Data persistence and storage options for Sellia.</p>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#overview","level":2,"title":"Overview","text":"<p>Sellia can store various types of data including tunnel registrations, authentication information, and request logs. This section covers storage configuration and options.</p>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#storage-types","level":2,"title":"Storage Types","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#in-memory-default","level":3,"title":"In-Memory (Default)","text":"<p>By default, Sellia stores data in memory:</p> <ul> <li>Pros: Fast, no setup required</li> <li>Cons: Data lost on restart, limited by available memory</li> <li>Use Case: Development, testing, temporary deployments</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#sqlite","level":3,"title":"SQLite","text":"<p>Persistent storage using SQLite database:</p> <ul> <li>Pros: Persistent, lightweight, single file</li> <li>Cons: Single-server only</li> <li>Use Case: Production deployments with single server</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#postgresql-future","level":3,"title":"PostgreSQL (Future)","text":"<p>PostgreSQL support planned for:</p> <ul> <li>Pros: Scalable, concurrent access, backups</li> <li>Cons: Requires separate database server</li> <li>Use Case: Multi-server deployments, high-availability</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#configuration","level":2,"title":"Configuration","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#sqlite-setup","level":3,"title":"SQLite Setup","text":"<p>Enable SQLite storage:</p> <pre><code># Environment variable\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n\n# Or disable database\nexport SELLIA_NO_DB=\"true\"\n\n# Or in configuration (note: database.enabled=false disables the database)\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#postgresql-setup-future","level":3,"title":"PostgreSQL Setup (Future)","text":"<pre><code># Connection string\nexport SELLIA_DATABASE=postgresql://user:password@localhost:5432/sellia\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#data-stored","level":2,"title":"Data Stored","text":"<p>Sellia stores the following data:</p>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<ul> <li>Subdomain names that cannot be claimed by tunnel clients</li> <li>Reasons/documentation for reservations</li> <li>Default vs. custom reservations</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#authentication-data","level":3,"title":"Authentication Data","text":"<ul> <li>API keys (hashed)</li> <li>Key prefix for identification</li> <li>Master key designation</li> <li>Active/inactive status</li> <li>Creation and last-used timestamps</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#storage-paths","level":2,"title":"Storage Paths","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#default-locations","level":3,"title":"Default Locations","text":"<pre><code>/var/lib/sellia/\n├── sellia.db           # SQLite database\n├── tunnels/            # Tunnel data\n└── logs/               # Request logs\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#custom-paths","level":3,"title":"Custom Paths","text":"<p>Configure custom storage paths:</p> <pre><code># Environment variable\nexport SELLIA_STORAGE_PATH=/custom/path\n\n# Or in configuration\nstorage:\n  path: /custom/path\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#docker-volumes","level":2,"title":"Docker Volumes","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#named-volume","level":3,"title":"Named Volume","text":"<pre><code>services:\n  sellia-server:\n    volumes:\n      - sellia-data:/var/lib/sellia\n\nvolumes:\n  sellia-data:\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#bind-mount","level":3,"title":"Bind Mount","text":"<pre><code>services:\n  sellia-server:\n    volumes:\n      - ./data:/var/lib/sellia\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#docker-compose-example","level":3,"title":"Docker Compose Example","text":"<pre><code>version: '3.8'\nservices:\n  sellia-server:\n    image: sellia-server\n    environment:\n      - SELLIA_DATABASE=sqlite:///var/lib/sellia/sellia.db\n    volumes:\n      - sellia-data:/var/lib/sellia\n    ports:\n      - \"3000:3000\"\n\nvolumes:\n  sellia-data:\n    driver: local\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#backup","level":2,"title":"Backup","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#sqlite-backup","level":3,"title":"SQLite Backup","text":"<pre><code># Backup database\ncp /var/lib/sellia/sellia.db /backup/sellia-$(date +%Y%m%d).db\n\n# Or using sqlite3\nsqlite3 /var/lib/sellia/sellia.db \".backup /backup/sellia.db\"\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#automated-backup","level":3,"title":"Automated Backup","text":"<pre><code>#!/bin/bash\n# backup-sellia.sh\n\nBACKUP_DIR=\"/backup/sellia\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \"$BACKUP_DIR\"\n\n# Backup database\ncp /var/lib/sellia/sellia.db \"$BACKUP_DIR/sellia-$DATE.db\"\n\n# Backup configuration\ntar -czf \"$BACKUP_DIR/config-$DATE.tar.gz\" /etc/sellia/\n\n# Remove old backups (keep last 30 days)\nfind \"$BACKUP_DIR\" -name \"sellia-*.db\" -mtime +30 -delete\nfind \"$BACKUP_DIR\" -name \"config-*.tar.gz\" -mtime +30 -delete\n</code></pre> <p>Add to crontab:</p> <pre><code># Daily backup at 2 AM\n0 2 * * * /path/to/backup-sellia.sh\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#docker-volume-backup","level":3,"title":"Docker Volume Backup","text":"<pre><code># Backup volume\ndocker run --rm \\\n  -v sellia-data:/data \\\n  -v $(pwd):/backup \\\n  alpine tar czf /backup/sellia-backup-$(date +%Y%m%d).tar.gz /data\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#restore","level":2,"title":"Restore","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#sqlite-restore","level":3,"title":"SQLite Restore","text":"<pre><code># Stop server\ndocker compose down\n\n# Restore database\ncp /backup/sellia-20250130.db /var/lib/sellia/sellia.db\n\n# Restart server\ndocker compose up -d\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#docker-volume-restore","level":3,"title":"Docker Volume Restore","text":"<pre><code># Restore volume\ndocker run --rm \\\n  -v sellia-data:/data \\\n  -v $(pwd):/backup \\\n  alpine tar xzf /backup/sellia-backup-20250130.tar.gz -C /\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#performance","level":2,"title":"Performance","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#sqlite-optimization","level":3,"title":"SQLite Optimization","text":"<pre><code># Optimize database\nsqlite3 /var/lib/sellia/sellia.db \"VACUUM;\"\n\n# Analyze for query optimization\nsqlite3 /var/lib/sellia/sellia.db \"ANALYZE;\"\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#storage-maintenance","level":3,"title":"Storage Maintenance","text":"<p>Regular maintenance tasks:</p> <pre><code># Rebuild database\nsqlite3 /var/lib/sellia/sellia.db \"VACUUM;\"\n\n# Analyze for query optimization\nsqlite3 /var/lib/sellia/sellia.db \"ANALYZE;\"\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#monitoring","level":2,"title":"Monitoring","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#disk-space","level":3,"title":"Disk Space","text":"<p>Monitor storage usage:</p> <pre><code># Check database size\nls -lh /var/lib/sellia/sellia.db\n\n# Check disk usage\ndu -sh /var/lib/sellia/\n\n# Alert if low on space\nDISK_USAGE=$(df /var/lib/sellia | tail -1 | awk '{print $5}' | sed 's/%//')\nif [ $DISK_USAGE -gt 80 ]; then\n    echo \"Warning: Disk usage is ${DISK_USAGE}%\"\nfi\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#database-statistics","level":3,"title":"Database Statistics","text":"<pre><code># API keys in database\nsqlite3 /var/lib/sellia/sellia.db \"SELECT COUNT(*) FROM api_keys WHERE active = 1;\"\n\n# Reserved subdomains\nsqlite3 /var/lib/sellia/sellia.db \"SELECT COUNT(*) FROM reserved_subdomains;\"\n\n# Database version\nsqlite3 /var/lib/sellia/sellia.db \"SELECT MAX(version) FROM schema_migrations;\"\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#security","level":2,"title":"Security","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#file-permissions","level":3,"title":"File Permissions","text":"<p>Set appropriate permissions:</p> <pre><code># Database directory\nchmod 750 /var/lib/sellia/\nchown sellia:sellia /var/lib/sellia/\n\n# Database file\nchmod 640 /var/lib/sellia/sellia.db\nchown sellia:sellia /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#encryption","level":3,"title":"Encryption","text":"<p>For sensitive data, consider:</p> <ul> <li>Full disk encryption (LUKS)</li> <li>Encrypted backup archives</li> <li>Secure backup storage (S3 with encryption, etc.)</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#scaling","level":2,"title":"Scaling","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#when-to-upgrade-storage","level":3,"title":"When to Upgrade Storage","text":"<p>Consider upgrading when:</p> <ul> <li>Database size &gt; 1GB</li> <li>High request volume</li> <li>Multiple servers needed</li> <li>Complex queries needed</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#migration-path","level":3,"title":"Migration Path","text":"<p>SQLite → PostgreSQL migration (when supported):</p> <ol> <li>Export SQLite data</li> <li>Import to PostgreSQL</li> <li>Update configuration</li> <li>Test thoroughly</li> <li>Switch over</li> </ol>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#development","level":3,"title":"Development","text":"<ul> <li>Use in-memory storage</li> <li>No backup needed</li> <li>Fast iteration</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#production","level":3,"title":"Production","text":"<ul> <li>Always use persistent storage</li> <li>Regular automated backups</li> <li>Monitor disk usage</li> <li>Test restore procedure</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#high-availability","level":3,"title":"High Availability","text":"<ul> <li>Use PostgreSQL with replication</li> <li>Regular backups</li> <li>Failover procedures</li> <li>Monitoring and alerts</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#database-locked","level":3,"title":"Database Locked","text":"<p>Problem: \"Database is locked\" error</p> <p>Solutions: - Check for multiple instances - Restart server - Check file permissions - Enable WAL mode</p>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#disk-full","level":3,"title":"Disk Full","text":"<p>Problem: Out of disk space</p> <p>Solutions: - Clean old logs - Archive old data - Expand disk capacity - Implement log rotation</p>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#slow-queries","level":3,"title":"Slow Queries","text":"<p>Problem: Database operations slow</p> <p>Solutions: - Run <code>VACUUM</code> and <code>ANALYZE</code> - Check database size - Consider upgrading to PostgreSQL - Optimize queries</p>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Deployment - Production deployment with storage</li> <li>Admin Guide - Ongoing maintenance</li> <li>Configuration - Storage configuration options</li> </ul>","path":["01 user","Storage"],"tags":[]},{"location":"01-user/storage/database-config/","level":1,"title":"Database Configuration","text":"<p>Configure SQLite database settings for your Sellia server including path, enable/disable, and connection options.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#environment-variables","level":3,"title":"Environment Variables","text":"<p>The primary way to configure the database is via environment variables:</p> <pre><code># Enable/disable database (default: auto-detect based on path)\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n\n# Explicitly disable database\nexport SELLIA_NO_DB=\"true\"\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#config-file","level":3,"title":"Config File","text":"<p>Alternatively, use a YAML config file:</p> <pre><code># sellia-server.yml\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#command-line","level":3,"title":"Command Line","text":"<p>When starting the server:</p> <pre><code>sellia-server start --db-path /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#enabledisable-database","level":2,"title":"Enable/Disable Database","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#enable-database","level":3,"title":"Enable Database","text":"<p>Method 1: Set path (enables automatically):</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server\n</code></pre> <p>Method 2: Config file:</p> <pre><code>database:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre> <p>Method 3: Command line:</p> <pre><code>sellia-server --db-path /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#disable-database","level":3,"title":"Disable Database","text":"<p>Method 1: Environment variable:</p> <pre><code>export SELLIA_NO_DB=\"true\"\nsellia-server\n</code></pre> <p>Method 2: Config file:</p> <pre><code>database:\n  enabled: false\n</code></pre> <p>Method 3: Command line flag:</p> <pre><code>sellia-server --no-db\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#priority-order","level":3,"title":"Priority Order","text":"<p>When multiple sources are set, priority is:</p> <ol> <li><code>SELLIA_NO_DB=\"true\"</code> (explicit disable)</li> <li><code>SELLIA_DB_PATH</code> (explicit enable)</li> <li>Config file <code>database.enabled</code></li> <li>Config file <code>database.path</code></li> </ol>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#path-configuration","level":2,"title":"Path Configuration","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#absolute-path","level":3,"title":"Absolute Path","text":"<p>Recommended for production:</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#relative-path","level":3,"title":"Relative Path","text":"<p>Resolved relative to server's working directory:</p> <pre><code>export SELLIA_DB_PATH=\"./data/sellia.db\"\n</code></pre> <p>Note: Relative paths can be confusing. Use absolute paths in production.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#in-memory-database","level":3,"title":"In-Memory Database","text":"<p>For testing only:</p> <pre><code>export SELLIA_DB_PATH=\":memory:\"\n</code></pre> <p>Warning: Data is lost when server stops. Only for development/testing.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#shared-cache-in-memory","level":3,"title":"Shared-Cache In-Memory","text":"<p>For tests that need multiple connections:</p> <pre><code>export SELLIA_DB_PATH=\":memory:?mode=memory&amp;cache=shared\"\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#connection-options","level":2,"title":"Connection Options","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#sqlite-configuration-string","level":3,"title":"SQLite Configuration String","text":"<p>The server uses this connection string:</p> <pre><code>sqlite3://&lt;path&gt;?journal_mode=WAL&amp;synchronous=NORMAL&amp;cache_size=-64000&amp;foreign_keys=true&amp;max_pool_size=1\n</code></pre> <p>These options are hardcoded and optimal for Sellia's workload.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#wal-mode-write-ahead-logging","level":3,"title":"WAL Mode (Write-Ahead Logging)","text":"<p>What it does: - Allows concurrent reads and writes - Better performance for authentication queries - Multiple readers don't block writers</p> <p>Cannot be changed - hardcoded to WAL mode.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#synchronous-mode","level":3,"title":"Synchronous Mode","text":"<p>What it does: - Controls how often data is flushed to disk - <code>NORMAL</code> = Safe but faster - Full durability risk: Low (acceptable for this use case)</p> <p>Cannot be changed - hardcoded to NORMAL.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#cache-size","level":3,"title":"Cache Size","text":"<p>What it does: - <code>-64000</code> = 64MB cache - Reduces disk I/O for frequent queries</p> <p>Cannot be changed - hardcoded to 64MB.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#connection-pool","level":3,"title":"Connection Pool","text":"<p>What it does: - <code>max_pool_size=1</code> = Single connection for all queries - Required for SQLite (multiple connections can cause locks)</p> <p>Cannot be changed - hardcoded to 1.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#directory-permissions","level":2,"title":"Directory Permissions","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#creating-directory","level":3,"title":"Creating Directory","text":"<pre><code># Create directory\nsudo mkdir -p /var/lib/sellia\n\n# Set ownership\nsudo chown sellia:sellia /var/lib/sellia\n\n# Set permissions\nsudo chmod 755 /var/lib/sellia\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#database-file-permissions","level":3,"title":"Database File Permissions","text":"<p>The server creates the database with <code>0640</code> permissions:</p> <ul> <li>Owner (sellia): read/write</li> <li>Group (sellia): read</li> <li>Others: no access</li> </ul> <p>Manual permission fix:</p> <pre><code>sudo chmod 640 /var/lib/sellia/sellia.db\nsudo chown sellia:sellia /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#selinux-configuration","level":3,"title":"SELinux Configuration","text":"<p>If using SELinux, may need to label the database:</p> <pre><code># Check current context\nls -Z /var/lib/sellia/sellia.db\n\n# Set context (adjust as needed)\nsudo semanage fcontext -a -t httpd_sys_rw_content_t \"/var/lib/sellia(/.*)?\"\nsudo restorecon -Rv /var/lib/sellia\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#development","level":3,"title":"Development","text":"<pre><code># Use local file for development\nexport SELLIA_DB_PATH=\"$HOME/dev/sellia/sellia.db\"\nsellia-server\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#production","level":3,"title":"Production","text":"<pre><code># Use system directory with proper permissions\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsudo mkdir -p /var/lib/sellia\nsudo chown sellia:sellia /var/lib/sellia\nsudo chmod 755 /var/lib/sellia\nsellia-server\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#docker","level":3,"title":"Docker","text":"<pre><code># docker-compose.yml\nversion: '3'\nservices:\n  sellia-server:\n    image: sellia/server:latest\n    environment:\n      - SELLIA_DB_PATH=/data/sellia.db\n    volumes:\n      - sellia-data:/data\n    ports:\n      - \"3000:3000\"\n\nvolumes:\n  sellia-data:\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#kubernetes","level":3,"title":"Kubernetes","text":"<pre><code># deployment.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: sellia-config\ndata:\n  SELLIA_DB_PATH: \"/data/sellia.db\"\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: sellia-data\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: sellia-server\nspec:\n  template:\n    spec:\n      containers:\n      - name: sellia\n        image: sellia/server:latest\n        envFrom:\n          - configMapRef:\n              name: sellia-config\n        volumeMounts:\n          - name: data\n            mountPath: /data\n      volumes:\n        - name: data\n          persistentVolumeClaim:\n            claimName: sellia-data\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#systemd-service","level":3,"title":"Systemd Service","text":"<pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nGroup=sellia\nWorkingDirectory=/opt/sellia\nEnvironment=\"SELLIA_DB_PATH=/var/lib/sellia/sellia.db\"\nEnvironment=\"SELLIA_REQUIRE_AUTH=true\"\nEnvironment=\"SELLIA_MASTER_KEY=your-master-key\"\nExecStart=/opt/sellia/bin/sellia-server start\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable and start:</p> <pre><code>sudo systemctl enable sellia\nsudo systemctl start sellia\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#environment-variables-reference","level":2,"title":"Environment Variables Reference","text":"Variable Type Default Description <code>SELLIA_DB_PATH</code> string (none) Path to SQLite database file <code>SELLIA_NO_DB</code> boolean false Explicitly disable database","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#config-file-reference","level":2,"title":"Config File Reference","text":"<pre><code>database:\n  enabled: true          # Enable/disable database\n  path: /var/lib/sellia/sellia.db  # Database file path\n</code></pre> <p>Priority: Environment variables override config file.</p>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#database-not-created","level":3,"title":"Database Not Created","text":"<p>Server starts but no database file exists.</p> <p>Cause: Database path not set or invalid.</p> <p>Solution:</p> <pre><code># Check if path is set\necho $SELLIA_DB_PATH\n\n# Set path and restart\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n# Stop and restart the server\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#permission-denied","level":3,"title":"Permission Denied","text":"<pre><code>Error: Permission denied: /var/lib/sellia/sellia.db\n</code></pre> <p>Cause: Wrong permissions on directory or file.</p> <p>Solution:</p> <pre><code># Fix directory permissions\nsudo chmod 755 /var/lib/sellia\n\n# Fix file permissions\nsudo chmod 640 /var/lib/sellia/sellia.db\nsudo chown sellia:sellia /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#database-in-read-only-mode","level":3,"title":"Database in Read-Only Mode","text":"<pre><code>Error: attempt to write a readonly database\n</code></pre> <p>Cause: File or directory is read-only, or disk is full.</p> <p>Solution:</p> <pre><code># Check disk space\ndf -h /var/lib/sellia\n\n# Check file permissions\nls -la /var/lib/sellia/sellia.db\n\n# Remount read-write if necessary\nsudo mount -o remount,rw /var\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#database-locked","level":3,"title":"Database Locked","text":"<pre><code>Error: database is locked\n</code></pre> <p>Cause: Multiple server instances running.</p> <p>Solution:</p> <pre><code># Check for running servers\nps aux | grep sellia-server\n\n# Kill duplicate instances\npkill sellia-server\n\n# Start single instance\nsellia-server\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#path-contains-spaces","level":3,"title":"Path Contains Spaces","text":"<p>If database path has spaces, quote it:</p> <pre><code># Wrong\nexport SELLIA_DB_PATH=/path/with spaces/sellia.db\n\n# Right\nexport SELLIA_DB_PATH=\"/path/with spaces/sellia.db\"\n</code></pre>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#production_1","level":3,"title":"Production","text":"<ol> <li> <p>Use absolute paths <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre></p> </li> <li> <p>Dedicated directory <pre><code>/var/lib/sellia/\n</code></pre></p> </li> <li> <p>Proper permissions <pre><code>sudo chown sellia:sellia /var/lib/sellia/sellia.db\nsudo chmod 640 /var/lib/sellia/sellia.db\n</code></pre></p> </li> <li> <p>Persistent storage</p> </li> <li>Use Docker volumes</li> <li>Use Kubernetes PVCs</li> <li>Don't store in ephemeral locations</li> </ol>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#development_1","level":3,"title":"Development","text":"<ol> <li> <p>Use relative path in project directory <pre><code>export SELLIA_DB_PATH=\"./dev/sellia.db\"\n</code></pre></p> </li> <li> <p>Add to .gitignore <pre><code>echo \"dev/*.db\" &gt;&gt; .gitignore\necho \"dev/*.db-wal\" &gt;&gt; .gitignore\n</code></pre></p> </li> <li> <p>Clean slate testing <pre><code>rm ./dev/sellia.db\nsellia-server  # Creates fresh database\n</code></pre></p> </li> </ol>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#testing","level":3,"title":"Testing","text":"<ol> <li> <p>Use in-memory database <pre><code>export SELLIA_DB_PATH=\":memory:\"\n</code></pre></p> </li> <li> <p>Each test gets fresh database</p> </li> <li>No cleanup required</li> <li>Fast initialization</li> <li>Isolated tests</li> </ol>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/database-config/#see-also","level":2,"title":"See Also","text":"<ul> <li>SQLite Persistence - Database overview and operations</li> <li>Migrations - Schema versions</li> <li>Server Auth - Authentication setup</li> </ul>","path":["01 user","Storage","Database Configuration"],"tags":[]},{"location":"01-user/storage/migrations/","level":1,"title":"Database Migrations","text":"<p>Database migrations define and evolve the Sellia database schema over time. Migrations are applied automatically when the server starts.</p>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#overview","level":2,"title":"Overview","text":"<p>Sellia uses a versioned migration system:</p> <ul> <li>Each migration has a version number and name</li> <li>Migrations are applied in order when the server starts</li> <li>Applied migrations are tracked in <code>schema_migrations</code> table</li> <li>Rollback support is available (manual operation)</li> </ul>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#current-migrations","level":2,"title":"Current Migrations","text":"","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#migration-1-initial-schema","level":3,"title":"Migration 1: Initial Schema","text":"<p>Version: 1 Name: <code>initial_schema</code></p> <p>Creates:</p> <ol> <li><code>schema_migrations</code> table - Track migration history</li> <li><code>reserved_subdomains</code> table - Reserved subdomain list</li> <li><code>api_keys</code> table - API key storage</li> <li>Indexes for performance</li> </ol> <p>SQL:</p> <pre><code>CREATE TABLE IF NOT EXISTS schema_migrations (\n    version INTEGER PRIMARY KEY,\n    applied_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\nCREATE TABLE IF NOT EXISTS reserved_subdomains (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    subdomain TEXT NOT NULL UNIQUE,\n    reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    is_default BOOLEAN NOT NULL DEFAULT 0\n);\n\nCREATE TABLE IF NOT EXISTS api_keys (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    key_hash TEXT NOT NULL UNIQUE,\n    key_prefix TEXT NOT NULL,\n    name TEXT,\n    is_master BOOLEAN NOT NULL DEFAULT 0,\n    active BOOLEAN NOT NULL DEFAULT 1,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_used_at TEXT\n);\n\nCREATE INDEX IF NOT EXISTS idx_api_keys_prefix ON api_keys(key_prefix);\nCREATE INDEX IF NOT EXISTS idx_api_keys_active ON api_keys(active) WHERE active = 1;\n</code></pre> <p>Rollback SQL:</p> <pre><code>DROP INDEX IF EXISTS idx_api_keys_active;\nDROP INDEX IF EXISTS idx_api_keys_prefix;\nDROP TABLE IF EXISTS api_keys;\nDROP TABLE IF EXISTS reserved_subdomains;\nDROP TABLE IF EXISTS schema_migrations;\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#default-data-seeding","level":2,"title":"Default Data Seeding","text":"","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<p>Along with the initial schema, 50 default reserved subdomains are seeded:</p> <pre><code>api, www, admin, app, dashboard, console,\nmail, smtp, imap, pop, ftp, ssh, sftp,\ncdn, static, assets, media, images, files,\nauth, login, oauth, sso, account, accounts,\nbilling, pay, payment, payments, subscribe,\nhelp, support, docs, documentation, status,\nblog, news, forum, community, dev, developer,\ntest, staging, demo, sandbox, preview,\nws, wss, socket, websocket, stream,\ngit, svn, repo, registry, npm, pypi,\ninternal, private, public, local, localhost,\nroot, system, server, servers, node, nodes,\nsellia, tunnel, tunnels, proxy\n</code></pre> <p>These are marked with <code>is_default = true</code> and cannot be removed.</p>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#migration-system","level":2,"title":"Migration System","text":"","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#automatic-migration","level":3,"title":"Automatic Migration","text":"<p>Migrations run automatically when the server starts:</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server\n\n# Output:\n# [INFO] Database opened: /var/lib/sellia/sellia.db\n# [INFO] Current version: 0\n# [INFO] Pending migrations: [1]\n# [INFO] Running 1 migration(s)\n# [INFO] Applying migration 1: initial_schema\n# [INFO] Seeded 50 default reserved subdomains\n# [INFO] Migrations complete. Current version: 1\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#checking-migration-status","level":3,"title":"Checking Migration Status","text":"<pre><code># Query schema_migrations table\nsqlite3 /var/lib/sellia/sellia.db \"SELECT * FROM schema_migrations;\"\n\n# Output:\n# 1|2024-01-15 10:30:00\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#pending-migrations","level":3,"title":"Pending Migrations","text":"<p>Pending migrations are those not yet applied:</p> <pre><code>-- Get current version\nSELECT COALESCE(MAX(version), 0) FROM schema_migrations;\n\n-- Get pending migrations\n-- (Any migration with version &gt; current version)\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#manual-migration-operations","level":2,"title":"Manual Migration Operations","text":"","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#check-current-version","level":3,"title":"Check Current Version","text":"<pre><code>sqlite3 /var/lib/sellia/sellia.db \"SELECT COALESCE(MAX(version), 0) FROM schema_migrations;\"\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#list-applied-migrations","level":3,"title":"List Applied Migrations","text":"<pre><code>sqlite3 /var/lib/sellia/sellia.db \"SELECT version, applied_at FROM schema_migrations ORDER BY version;\"\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#rollback-migrations","level":3,"title":"Rollback Migrations","text":"<p>Warning: Rollback is a manual operation and not exposed via CLI. Only use this if you know what you're doing.</p> <pre><code># Open database\nsqlite3 /var/lib/sellia/sellia.db\n\n# Inside SQLite CLI\nBEGIN TRANSACTION;\n\n-- Rollback migration 1\nDROP INDEX IF EXISTS idx_api_keys_active;\nDROP INDEX IF EXISTS idx_api_keys_prefix;\nDROP TABLE IF EXISTS api_keys;\nDROP TABLE IF EXISTS reserved_subdomains;\nDELETE FROM schema_migrations WHERE version = 1;\n\nCOMMIT;\n\n-- Verify\nSELECT * FROM schema_migrations;\n-- Should be empty\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#future-migrations","level":2,"title":"Future Migrations","text":"<p>When adding new features, new migrations will be added to the migrations list.</p>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#example-adding-a-table","level":3,"title":"Example: Adding a Table","text":"<p>Hypothetical migration for tunnel tracking:</p> <pre><code>-- Migration 2: add_tunnel_tracking\nCREATE TABLE IF NOT EXISTS tunnels (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    api_key_id INTEGER,\n    subdomain TEXT NOT NULL,\n    connected_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_ping_at TEXT,\n    FOREIGN KEY (api_key_id) REFERENCES api_keys(id)\n);\n\nCREATE INDEX IF NOT EXISTS idx_tunnels_subdomain ON tunnels(subdomain);\nCREATE INDEX IF NOT EXISTS idx_tunnels_api_key ON tunnels(api_key_id);\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#migration-guidelines","level":3,"title":"Migration Guidelines","text":"<p>When writing new migrations:</p> <ol> <li>Version numbers - Increment by 1</li> <li>Up SQL - DDL statements (CREATE, ALTER)</li> <li>Down SQL - Reverse operations (DROP)</li> <li>Idempotent - Use <code>IF NOT EXISTS</code>, <code>IF EXISTS</code></li> <li>Indexes - Create after tables</li> <li>Foreign keys - Add after all tables exist</li> <li>Data migrations - Separate from schema changes</li> </ol>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#migration-failed-during-start","level":3,"title":"Migration Failed During Start","text":"<p>Server fails to start with migration error.</p> <p>Symptoms:</p> <pre><code>[ERROR] Migration failed: database disk image is malformed\n</code></pre> <p>Solutions:</p> <ol> <li>Check database integrity:</li> </ol> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\"\n</code></pre> <ol> <li>Restore from backup:</li> </ol> <pre><code>cp /backup/sellia.db.latest /var/lib/sellia/sellia.db\nsellia-server\n</code></pre> <ol> <li>Delete and reinitialize (last resort):</li> </ol> <pre><code>rm /var/lib/sellia/sellia.db\nsellia-server  # Creates fresh database\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#migration-already-applied","level":3,"title":"Migration Already Applied","text":"<p>Attempt to apply already-applied migration.</p> <p>Symptoms:</p> <pre><code>[WARN] Migration 1 already applied, skipping\n</code></pre> <p>Cause: Normal behavior - migrations are idempotent.</p> <p>Solution: No action needed. Server continues normally.</p>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#schema-migrations-table-missing","level":3,"title":"Schema Migrations Table Missing","text":"<p><code>schema_migrations</code> table doesn't exist.</p> <p>Cause: Database created manually without migrations.</p> <p>Solution:</p> <pre><code># Re-run migrations\nsqlite3 /var/lib/sellia/sellia.db &lt;&lt;EOF\nCREATE TABLE IF NOT EXISTS schema_migrations (\n    version INTEGER PRIMARY KEY,\n    applied_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\nEOF\n\n# Restart server\n# (Stop and restart the server process)\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#wrong-migration-version","level":3,"title":"Wrong Migration Version","text":"<p>Database shows unexpected migration version.</p> <p>Cause: Manual schema changes outside migration system.</p> <p>Solution:</p> <pre><code># Check what migrations are applied\nsqlite3 /var/lib/sellia/sellia.db \"SELECT * FROM schema_migrations;\"\n\n# If version is wrong, update manually\nsqlite3 /var/lib/sellia/sellia.db \"UPDATE schema_migrations SET version = 1 WHERE version = 2;\"\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#database-schema-reference","level":2,"title":"Database Schema Reference","text":"","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#schema-migrations-table","level":3,"title":"Schema Migrations Table","text":"Column Type Description <code>version</code> INTEGER Migration version number (primary key) <code>applied_at</code> TEXT Timestamp when migration was applied","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#reserved-subdomains-table","level":3,"title":"Reserved Subdomains Table","text":"Column Type Description <code>id</code> INTEGER Auto-increment primary key <code>subdomain</code> TEXT Reserved subdomain (unique) <code>reason</code> TEXT Optional reason/documentation <code>created_at</code> TEXT Timestamp when reserved <code>is_default</code> BOOLEAN True if seeded by default (cannot remove)","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#api-keys-table","level":3,"title":"API Keys Table","text":"Column Type Description <code>id</code> INTEGER Auto-increment primary key <code>key_hash</code> TEXT SHA-256 hash of API key (unique) <code>key_prefix</code> TEXT First 8 characters (for identification) <code>name</code> TEXT Optional friendly name <code>is_master</code> BOOLEAN True if master key (admin access) <code>active</code> BOOLEAN False if revoked <code>created_at</code> TEXT Timestamp when created <code>last_used_at</code> TEXT Timestamp of last tunnel creation","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#exporting-schema","level":2,"title":"Exporting Schema","text":"<p>To export the current database schema:</p> <pre><code># Full schema with indexes\nsqlite3 /var/lib/sellia/sellia.db \".schema\"\n\n# Specific table schema\nsqlite3 /var/lib/sellia/sellia.db \".schema api_keys\"\n\n# Schema with CREATE statements only\nsqlite3 /var/lib/sellia/sellia.db \".schema\" | grep \"^CREATE\"\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#backup-before-migrations","level":2,"title":"Backup Before Migrations","text":"<p>Always backup before manual schema changes:</p> <pre><code># Backup before migration\ncp /var/lib/sellia/sellia.db /var/lib/sellia/sellia.db.pre-migration\n\n# Apply migration\n# ... migration operations ...\n\n# Verify\nsqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\"\n\n# Rollback if needed\ncp /var/lib/sellia/sellia.db.pre-migration /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/migrations/#see-also","level":2,"title":"See Also","text":"<ul> <li>SQLite Persistence - Database operations</li> <li>Database Configuration - Configuration options</li> <li>API Key Management - Managing API keys</li> </ul>","path":["01 user","Storage","Database Migrations"],"tags":[]},{"location":"01-user/storage/sqlite/","level":1,"title":"SQLite Persistence","text":"<p>Sellia uses SQLite for persistent storage of API keys, reserved subdomains, and schema migrations. This enables features like per-user authentication, admin operations, and subdomain reservations.</p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#overview","level":2,"title":"Overview","text":"<p>SQLite is ideal for Sellia because:</p> <ul> <li>Zero configuration - No separate database server required</li> <li>Embedded - Database is just a file</li> <li>Fast - Optimized for the read-heavy workload of tunnel authentication</li> <li>Reliable - ACID compliant, atomic writes</li> <li>Portable - Single file backup/restore</li> <li>Cross-platform - Works everywhere Sellia runs</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#when-to-enable-sqlite","level":2,"title":"When to Enable SQLite","text":"<p>Enable SQLite persistence when you need:</p> <ol> <li>Per-user authentication - Multiple users with their own API keys</li> <li>Admin operations - Create/revoke API keys, manage reserved subdomains</li> <li>Usage tracking - Track when keys were last used</li> <li>Accountability - Audit trail of who created tunnels</li> <li>Production deployment - Anything beyond personal use</li> </ol> <p>You don't need SQLite if:</p> <ul> <li>Single-user development server</li> <li>Testing locally without authentication</li> <li>Short-lived tunnels behind a firewall</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#database-location","level":2,"title":"Database Location","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#default-path","level":3,"title":"Default Path","text":"<pre><code>/var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#configuring-path","level":3,"title":"Configuring Path","text":"<p>Environment variable:</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre> <p>Config file:</p> <pre><code># sellia-server.yml\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre> <p>Command line:</p> <pre><code>sellia-server start --db-path /custom/path/sellia.db\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#directory-permissions","level":3,"title":"Directory Permissions","text":"<p>The database directory must be writable by the server process:</p> <pre><code># Create directory\nsudo mkdir -p /var/lib/sellia\n\n# Set ownership\nsudo chown sellia:sellia /var/lib/sellia\n\n# Set permissions\nsudo chmod 755 /var/lib/sellia\n</code></pre> <p>The database file will be created with mode <code>0640</code> (owner read/write, group read).</p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#database-initialization","level":2,"title":"Database Initialization","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#automatic-initialization","level":3,"title":"Automatic Initialization","text":"<p>When you start the server with database enabled:</p> <ol> <li>Database file is created if it doesn't exist</li> <li>Migrations are run automatically</li> <li>Default reserved subdomains are seeded</li> <li>Server starts accepting connections</li> </ol> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server\n\n# Output:\n# [INFO] Database opened: /var/lib/sellia/sellia.db\n# [INFO] Running 1 migration(s)\n# [INFO] Applying migration 1: initial_schema\n# [INFO] Migrations complete. Current version: 1\n# [INFO] Seeded 50 default reserved subdomains\n# [INFO] Server started on port 3000\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#manual-initialization","level":3,"title":"Manual Initialization","text":"<p>If you need to initialize the database separately (not recommended - server does this automatically):</p> <pre><code># This is handled by the server\n# No manual initialization needed\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#schema","level":2,"title":"Schema","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#tables","level":3,"title":"Tables","text":"<p>schema_migrations</p> <p>Tracks which database migrations have been applied.</p> <pre><code>CREATE TABLE schema_migrations (\n    version INTEGER PRIMARY KEY,\n    applied_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n</code></pre> <p>reserved_subdomains</p> <p>Subdomains that cannot be claimed by tunnel clients.</p> <pre><code>CREATE TABLE reserved_subdomains (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    subdomain TEXT NOT NULL UNIQUE,\n    reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    is_default BOOLEAN NOT NULL DEFAULT 0\n);\n</code></pre> <p>api_keys</p> <p>API keys for tunnel authentication and admin operations.</p> <pre><code>CREATE TABLE api_keys (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    key_hash TEXT NOT NULL UNIQUE,\n    key_prefix TEXT NOT NULL,\n    name TEXT,\n    is_master BOOLEAN NOT NULL DEFAULT 0,\n    active BOOLEAN NOT NULL DEFAULT 1,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_used_at TEXT\n);\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#indexes","level":3,"title":"Indexes","text":"<pre><code>CREATE INDEX idx_api_keys_prefix ON api_keys(key_prefix);\nCREATE INDEX idx_api_keys_active ON api_keys(active) WHERE active = 1;\n</code></pre> <p>These indexes optimize common queries: - Finding a key by prefix during authentication - Listing only active keys</p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#performance","level":2,"title":"Performance","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#optimization-settings","level":3,"title":"Optimization Settings","text":"<p>Sellia configures SQLite with these optimizations:</p> <pre><code>-- WAL mode for better concurrency\nPRAGMA journal_mode=WAL;\n\n-- Faster writes with acceptable safety\nPRAGMA synchronous=NORMAL;\n\n-- Larger cache (64MB)\nPRAGMA cache_size=-64000;\n\n-- Foreign key constraints\nPRAGMA foreign_keys=true;\n</code></pre> <p>Why these settings:</p> <ul> <li>WAL mode - Readers don't block writers, better for concurrent tunnel auth</li> <li>synchronous=NORMAL - Faster than FULL, safe enough for this workload</li> <li>64MB cache - Reduces disk I/O for frequent auth lookups</li> <li>foreign_keys - Ensures referential integrity (for future schema additions)</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#expected-performance","level":3,"title":"Expected Performance","text":"<p>On typical hardware:</p> <ul> <li>Authentication query: &lt; 1ms</li> <li>Tunnel registration: &lt; 5ms</li> <li>API key creation: &lt; 10ms</li> <li>Concurrent connections: 100+ without issues</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#monitoring-performance","level":3,"title":"Monitoring Performance","text":"<pre><code># Check database file size\nls -lh /var/lib/sellia/sellia.db\n\n# Monitor locks\nlsof /var/lib/sellia/sellia.db\n\n# Check WAL files\nls -lh /var/lib/sellia/sellia.db-wal\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#backup-and-restore","level":2,"title":"Backup and Restore","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#backup","level":3,"title":"Backup","text":"<p>Simple file copy:</p> <pre><code># Stop server first (to ensure consistency)\n# (Stop the server process manually)\n\n# Copy database file\ncp /var/lib/sellia/sellia.db /backup/sellia.db.$(date +%Y%m%d)\n\n# Restart server\nsellia-server\n</code></pre> <p>Online backup with SQLite (no downtime):</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \".backup /backup/sellia.db.$(date +%Y%m%d)\"\n</code></pre> <p>Automated backup script:</p> <pre><code>#!/bin/bash\n# /etc/cron.daily/sellia-backup\n\nBACKUP_DIR=\"/backup/sellia\"\nDATE=$(date +%Y%m%d)\n\nmkdir -p \"$BACKUP_DIR\"\n\n# Online backup\nsqlite3 /var/lib/sellia/sellia.db \".backup $BACKUP_DIR/sellia.db.$DATE\"\n\n# Compress older backups\nfind \"$BACKUP_DIR\" -name \"sellia.db.*\" -mtime +7 -exec gzip {} \\;\n\n# Delete backups older than 30 days\nfind \"$BACKUP_DIR\" -name \"sellia.db.*.gz\" -mtime +30 -delete\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#restore","level":3,"title":"Restore","text":"<pre><code># Stop server\n# (Stop the server process manually)\n\n# Restore from backup\ncp /backup/sellia.db.20240115 /var/lib/sellia/sellia.db\n\n# Fix permissions\nchown sellia:sellia /var/lib/sellia/sellia.db\nchmod 640 /var/lib/sellia/sellia.db\n\n# Restart server\nsellia-server\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#maintenance","level":2,"title":"Maintenance","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#vacuum","level":3,"title":"Vacuum","text":"<p>Reclaim space and optimize database:</p> <pre><code># Stop server\n# (Stop the server process manually)\n\n# Vacuum database\nsqlite3 /var/lib/sellia/sellia.db \"VACUUM;\"\n\n# Restart server\nsellia-server\n</code></pre> <p>When to vacuum:</p> <ul> <li>After revoking many API keys</li> <li>Database file grew significantly</li> <li>Scheduled maintenance (monthly recommended)</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#wal-checkpoint","level":3,"title":"WAL Checkpoint","text":"<p>Manually checkpoint WAL to main database:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA wal_checkpoint(TRUNCATE);\"\n</code></pre> <p>Note: SQLite auto-checkpoints during normal operation. Manual checkpointing is rarely needed.</p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#integrity-check","level":3,"title":"Integrity Check","text":"<p>Verify database integrity:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\"\n</code></pre> <p>Expected output: <code>ok</code></p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#analyze","level":3,"title":"Analyze","text":"<p>Update query planner statistics:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"ANALYZE;\"\n</code></pre> <p>Run this after: - Large data changes (bulk inserts/deletes) - Database restore - Every few months for maintenance</p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#database-locked","level":3,"title":"Database Locked","text":"<pre><code>Error: database is locked\n</code></pre> <p>Causes: - Multiple server instances running - Another process has the database open - Insufficient permissions</p> <p>Solutions:</p> <pre><code># Check for multiple servers\nps aux | grep sellia-server\n\n# Check file locks\nlsof /var/lib/sellia/sellia.db\n\n# Check permissions\nls -la /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#database-disk-image-malformed","level":3,"title":"Database Disk Image Malformed","text":"<pre><code>Error: database disk image is malformed\n</code></pre> <p>Causes: - Disk corruption - Incomplete write - Hardware failure</p> <p>Solutions:</p> <ol> <li>Attempt recovery:</li> </ol> <pre><code>sqlite3 /var/lib/sellia/sellia.db \".recover\" | sqlite3 /var/lib/sellia/sellia-recovered.db\n</code></pre> <ol> <li>Restore from backup:</li> </ol> <pre><code># Stop server manually\ncp /backup/sellia.db.latest /var/lib/sellia/sellia.db\nsellia-server\n</code></pre> <ol> <li>If all else fails, reinitialize:</li> </ol> <pre><code>rm /var/lib/sellia/sellia.db\nsellia-server\n# Will create fresh database\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#wal-file-too-large","level":3,"title":"WAL File Too Large","text":"<pre><code># Check WAL size\nls -lh /var/lib/sellia/sellia.db-wal\n</code></pre> <p>If WAL is &gt; 100MB, force checkpoint:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA wal_checkpoint(TRUNCATE);\"\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#slow-queries","level":3,"title":"Slow Queries","text":"<p>Enable query logging:</p> <pre><code>export SQLITE_DEBUG=1\nsellia-server start\n</code></pre> <p>Check for slow queries in logs. Common causes: - Missing indexes (unlikely in Sellia's schema) - Very large api_keys table (&gt; 100,000 rows) - Disk I/O bottleneck</p>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#security","level":2,"title":"Security","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#file-permissions","level":3,"title":"File Permissions","text":"<p>Recommended permissions:</p> <pre><code># Directory\ndrwxr-xr-x  sellia  sellia  /var/lib/sellia/\n\n# Database file\n-rw-r-----  sellia  sellia  /var/lib/sellia/sellia.db\n</code></pre> <p>Set permissions:</p> <pre><code>sudo chown -R sellia:sellia /var/lib/sellia/\nsudo chmod 755 /var/lib/sellia/\nsudo chmod 640 /var/lib/sellia/sellia.db\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#encryption","level":3,"title":"Encryption","text":"<p>SQLite database is not encrypted by default. For sensitive deployments:</p> <ol> <li>Full disk encryption - Encrypt the entire disk/partition</li> <li>SQLCipher extension - Compile with SQLCipher for database-level encryption</li> <li>File system encryption - Use encrypted filesystems (eCryptfs, EncFS)</li> </ol>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#access-control","level":3,"title":"Access Control","text":"<p>Only the Sellia server process should access the database:</p> <pre><code># Check who can read the database\nnamei -l /var/lib/sellia/sellia.db\n\n# Should show only owner (sellia) has read access\n</code></pre>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#scaling-considerations","level":2,"title":"Scaling Considerations","text":"","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#when-to-outgrow-sqlite","level":3,"title":"When to Outgrow SQLite","text":"<p>Consider PostgreSQL or MySQL if:</p> <ul> <li>More than 1000 API keys</li> <li>More than 10,000 reserved subdomains</li> <li>More than 1000 concurrent tunnel authentications per second</li> <li>Need for distributed/replicated databases</li> <li>Need for complex queries/JOINS not supported by SQLite</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#migration-path","level":3,"title":"Migration Path","text":"<p>Sellia doesn't currently support other databases, but the schema is simple enough to migrate manually:</p> <ol> <li>Dump SQLite database</li> <li>Transform schema for target database</li> <li>Load data</li> <li>Modify Sellia code to use different DB driver</li> </ol>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/storage/sqlite/#see-also","level":2,"title":"See Also","text":"<ul> <li>Database Configuration - Configuration options</li> <li>Migrations - Schema versions and changes</li> <li>Server Auth - Authentication with database</li> </ul>","path":["01 user","Storage","SQLite Persistence"],"tags":[]},{"location":"01-user/troubleshooting/","level":1,"title":"Troubleshooting","text":"<p>Solutions to common issues when using Sellia.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#overview","level":2,"title":"Overview","text":"<p>This section covers common problems and their solutions when working with Sellia.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#installation-issues","level":2,"title":"Installation Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#build-failures","level":3,"title":"Build Failures","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#crystal-version-too-old","level":4,"title":"Crystal Version Too Old","text":"<p>Problem: \"Crystal version &gt;= 1.10.0 required\"</p> <p>Solution: <pre><code># Check Crystal version\ncrystal --version\n\n# Update Crystal\n# See https://crystal-lang.org/install/\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#dependency-errors","level":4,"title":"Dependency Errors","text":"<p>Problem: \"Could not find dependency\"</p> <p>Solution: <pre><code># Update shards\nshards update\n\n# Clear cache and reinstall\nrm -rf lib/\nshards install\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#compilation-errors","level":4,"title":"Compilation Errors","text":"<p>Problem: Compilation fails with errors</p> <p>Solutions: - Ensure Crystal &gt;= 1.10.0 - Run <code>shards update</code> - Check for conflicting shard versions - Try <code>shards build --release</code> for production build</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#connection-issues","level":2,"title":"Connection Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#cant-connect-to-server","level":3,"title":"Can't Connect to Server","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#server-not-running","level":4,"title":"Server Not Running","text":"<p>Problem: \"Connection refused\" when creating tunnel</p> <p>Solutions: <pre><code># Check if server is running\nps aux | grep sellia\n\n# Start server\nsellia server --port 3000 --domain yourdomain.com\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#wrong-server-address","level":4,"title":"Wrong Server Address","text":"<p>Problem: Can't connect to tunnel server</p> <p>Solutions: <pre><code># Verify server URL\nsellia http 3000 --server ws://localhost:3000\n\n# Check server is listening\nnetstat -an | grep :3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#firewall-blocking","level":4,"title":"Firewall Blocking","text":"<p>Problem: Connection times out</p> <p>Solutions: <pre><code># Check firewall status\nsudo ufw status\n\n# Allow port (Ubuntu/Debian)\nsudo ufw allow 3000/tcp\n\n# Check firewall (CentOS/RHEL)\nsudo firewall-cmd --list-all\nsudo firewall-cmd --add-port=3000/tcp --permanent\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#tunnel-connection-drops","level":3,"title":"Tunnel Connection Drops","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#automatic-reconnection","level":4,"title":"Automatic Reconnection","text":"<p>Problem: Tunnel disconnects intermittently</p> <p>Solution: Sellia auto-reconnects with linear backoff (3s, 6s, 9s... up to 30s max, 10 attempts). If it doesn't reconnect:</p> <pre><code># Check server logs for errors\n# Verify network stability\n# Check for rate limiting\n# Note: Client gives up after 10 failed attempts\n</code></pre>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#network-changes","level":4,"title":"Network Changes","text":"<p>Problem: Tunnel drops when network changes</p> <p>Solutions: - Sellia should auto-reconnect - If not, restart the tunnel - Check for IP changes</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#tunnel-issues","level":2,"title":"Tunnel Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#subdomain-already-taken","level":3,"title":"Subdomain Already Taken","text":"<p>Problem: \"Subdomain already in use\"</p> <p>Solutions: <pre><code># Use a different subdomain\nsellia http 3000 --subdomain myapp2\n\n# Let Sellia assign random subdomain\nsellia http 3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#local-service-not-accessible","level":3,"title":"Local Service Not Accessible","text":"<p>Problem: Tunnel works but returns connection errors</p> <p>Solutions: <pre><code># Verify local service is running\nlsof -i :3000\n\n# Check correct host (default: localhost)\nsellia http 3000 --host 127.0.0.1\n\n# Test local access\ncurl http://localhost:3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#wrong-local-port","level":3,"title":"Wrong Local Port","text":"<p>Problem: Tunnel created but can't reach service</p> <p>Solutions: <pre><code># Verify port number\nsellia http 8080  # correct port\n\n# Check what's listening\nnetstat -an | grep LISTEN\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#authentication-issues","level":2,"title":"Authentication Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#api-key-authentication-failed","level":3,"title":"API Key Authentication Failed","text":"<p>Problem: \"Authentication failed\" error</p> <p>Solutions: <pre><code># Verify API key\nsellia http 3000 --api-key your-key\n\n# Check server requires auth\nsellia-server --require-auth --master-key your-key\n\n# Regenerate key if needed\nopenssl rand -hex 32\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#basic-auth-not-working","level":3,"title":"Basic Auth Not Working","text":"<p>Problem: \"Unauthorized\" when accessing tunnel</p> <p>Solutions: <pre><code># Verify auth format (username:password)\nsellia http 3000 --auth admin:secret\n\n# Test with curl\ncurl -u admin:secret http://abc123.yourdomain.com\n\n# Check for special characters (use quotes)\nsellia http 3000 --auth \"admin:p@ssw0rd\"\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#inspector-issues","level":2,"title":"Inspector Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#inspector-not-loading","level":3,"title":"Inspector Not Loading","text":"<p>Problem: Can't access inspector at localhost:4040</p> <p>Solutions: <pre><code># Check if inspector is enabled\nsellia http 3000  # inspector enabled by default\n\n# Check firewall\nsudo ufw allow 4040/tcp\n\n# Try different port\nsellia http 3000 --inspector-port 5000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#inspector-shows-no-requests","level":3,"title":"Inspector Shows No Requests","text":"<p>Problem: Inspector loads but no requests appear</p> <p>Solutions: <pre><code># Verify tunnel is working\ncurl http://your-subdomain.yourdomain.com\n\n# Check tunnel is still running\n# Look for errors in terminal\n\n# Try disabling and re-enabling\nsellia http 3000 --no-inspector\nsellia http 3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#performance-issues","level":2,"title":"Performance Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#slow-connection","level":3,"title":"Slow Connection","text":"<p>Problem: Tunnels are slow</p> <p>Solutions: - Check network bandwidth - Verify server resources - Check for rate limiting - Try different server region</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#high-memory-usage","level":3,"title":"High Memory Usage","text":"<p>Problem: CLI or server using too much memory</p> <p>Solutions: <pre><code># Disable inspector\nsellia http 3000 --no-inspector\n\n# Clear request history regularly\n# Restart tunnel periodically\n\n# Check memory usage\nps aux | grep sellia\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#tlsssl-issues","level":2,"title":"TLS/SSL Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#certificate-errors","level":3,"title":"Certificate Errors","text":"<p>Problem: \"SSL certificate error\"</p> <p>Solutions: <pre><code># Verify certificate files exist\nls -l certs/cert.pem certs/key.pem\n\n# Check certificate not expired\nopenssl x509 -in certs/cert.pem -noout -dates\n\n# Verify certificate matches domain\nopenssl x509 -in certs/cert.pem -noout -text | grep DNS\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#https-not-working","level":3,"title":"HTTPS Not Working","text":"<p>Problem: HTTPS URLs not generated</p> <p>Solutions: <pre><code># Enable HTTPS on server\nsellia-server --https --domain yourdomain.com\n\n# Set environment variable\nexport SELLIA_USE_HTTPS=true\n\n# Verify certificates are in place\nls certs/\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#docker-issues","level":2,"title":"Docker Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#container-wont-start","level":3,"title":"Container Won't Start","text":"<p>Problem: Docker container fails to start</p> <p>Solutions: <pre><code># Check logs\ndocker compose -f docker-compose.prod.yml logs\n\n# Verify environment variables\ncat .env\n\n# Check port conflicts\ndocker ps\nnetstat -an | grep :3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#volume-mount-issues","level":3,"title":"Volume Mount Issues","text":"<p>Problem: Can't access files in container</p> <p>Solutions: <pre><code># Verify volume configuration\ndocker compose config\n\n# Check volume exists\ndocker volume ls\n\n# Inspect volume\ndocker volume inspect sellia-data\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#dns-issues","level":2,"title":"DNS Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#subdomain-not-resolving","level":3,"title":"Subdomain Not Resolving","text":"<p>Problem: Tunnel URL doesn't resolve</p> <p>Solutions: <pre><code># Check DNS configuration\ndig yoursubdomain.yourdomain.com\n\n# Verify DNS has propagated (can take 48 hours)\n# Check for wildcard DNS record\n\n# Test with IP directly\ncurl http://your-server-ip:3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#cloudflare-dns","level":3,"title":"Cloudflare DNS","text":"<p>Problem: Cloudflare DNS not working</p> <p>Solutions: - Verify DNS record in Cloudflare dashboard - Check proxy status (orange cloud) - Verify SSL/TLS mode - Wait for propagation</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#development-issues","level":2,"title":"Development Issues","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#changes-not-reflected","level":3,"title":"Changes Not Reflected","text":"<p>Problem: Code changes don't affect running Sellia</p> <p>Solutions: <pre><code># Rebuild\nshards build --release\n\n# Restart server\nkill $(pgrep sellia-server)\nsellia-server\n\n# Clear cache if needed\nrm -rf .crystal/\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#inspector-ui-not-updating","level":3,"title":"Inspector UI Not Updating","text":"<p>Problem: UI changes not showing</p> <p>Solutions: <pre><code># For development\ncd web\nnpm run dev\n\n# Rebuild embedded assets\ncd web\nnpm run build\ncd ..\nshards build --release\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#debug-mode","level":2,"title":"Debug Mode","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#enable-debug-logging","level":3,"title":"Enable Debug Logging","text":"<p>Problem: Need more information to diagnose issue</p> <p>Solution: <pre><code># Enable debug logging\nLOG_LEVEL=debug sellia-server --port 3000 --domain localhost\n\n# Or for client\nLOG_LEVEL=debug sellia http 3000\n</code></pre></p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#check-logs","level":3,"title":"Check Logs","text":"<pre><code># Docker logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# System logs\njournalctl -u sellia -f\n\n# Server logs to file\nsellia-server 2&gt;&amp;1 | tee server.log\n</code></pre>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#getting-help","level":2,"title":"Getting Help","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#report-issues","level":3,"title":"Report Issues","text":"<p>If you can't solve your issue:</p> <ol> <li>Check GitHub Issues</li> <li>Search for similar problems</li> <li>Create new issue with:</li> <li>Sellia version</li> <li>OS and version</li> <li>Crystal version</li> <li>Full error message</li> <li>Steps to reproduce</li> </ol>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#useful-information-for-bug-reports","level":3,"title":"Useful Information for Bug Reports","text":"<pre><code># Sellia version\nsellia version\n\n# Crystal version\ncrystal --version\n\n# OS version\nuname -a\n\n# Docker version (if applicable)\ndocker --version\n\n# Copy exact error message\n</code></pre>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#community-resources","level":3,"title":"Community Resources","text":"<ul> <li>GitHub Issues</li> <li>GitHub Discussions</li> <li>Documentation</li> </ul>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#common-error-messages","level":2,"title":"Common Error Messages","text":"","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#address-already-in-use","level":3,"title":"\"Address already in use\"","text":"<p>Port is already in use by another process.</p> <p>Solution: Kill existing process or use different port.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#connection-refused","level":3,"title":"\"Connection refused\"","text":"<p>Server is not running or not accessible.</p> <p>Solution: Start server or check firewall.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#authentication-failed","level":3,"title":"\"Authentication failed\"","text":"<p>Invalid or missing API key.</p> <p>Solution: Verify API key or check server auth settings.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#subdomain-already-taken_1","level":3,"title":"\"Subdomain already taken\"","text":"<p>Requested subdomain is in use.</p> <p>Solution: Use different subdomain or random one.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#certificate-not-found","level":3,"title":"\"Certificate not found\"","text":"<p>TLS certificate files missing.</p> <p>Solution: Place <code>cert.pem</code> and <code>key.pem</code> in <code>certs/</code> directory.</p>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Getting Started - Setup verification</li> <li>Configuration - Configuration help</li> <li>GitHub Issues - Report bugs</li> </ul>","path":["01 user","Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/","level":1,"title":"Connection Issues Troubleshooting","text":"<p>Guide to diagnosing and fixing connection problems with Sellia tunnels.</p>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#common-problems","level":2,"title":"Common Problems","text":"","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#failed-to-connect-to-server","level":3,"title":"\"Failed to Connect to Server\"","text":"<p>Symptoms: - Error: \"Connection refused\" - Error: \"Connection timeout\" - Client exits immediately</p> <p>Diagnosis:</p> <ol> <li> <p>Check server is running: <pre><code># Check if server process is running\nps aux | grep sellia\n\n# Check server port is listening\nnetstat -an | grep 3000  # Replace with your server port\n</code></pre></p> </li> <li> <p>Test server connectivity: <pre><code># Test HTTP endpoint\ncurl http://your-server.com/health\n\n# Expected output:\n# {\"status\":\"ok\",\"tunnels\":0}\n</code></pre></p> </li> <li> <p>Check firewall rules: <pre><code># Server - check firewall allows connections\nsudo ufw status\nsudo firewall-cmd --list-all\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Start the server: <pre><code>sellia server\n</code></pre></p> </li> <li> <p>Check server URL: <pre><code># Wrong\nsellia http --server ws://localhost:3000\n\n# Correct (if server is remote)\nsellia http --server wss://your-server.com\n</code></pre></p> </li> <li> <p>Configure firewall: <pre><code># UFW (Ubuntu)\nsudo ufw allow 3000/tcp\n\n# firewalld (CentOS/RHEL)\nsudo firewall-cmd --add-port=3000/tcp --permanent\nsudo firewall-cmd --reload\n</code></pre></p> </li> <li> <p>Check reverse proxy (if using Caddy/Nginx): <pre><code># Caddy\ncurl http://localhost/health\n\n# Nginx\ncurl http://localhost:8080/health\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#authentication-failed","level":3,"title":"\"Authentication Failed\"","text":"<p>Symptoms: - Error: \"Authentication failed: Invalid API key\" - Server immediately closes connection</p> <p>Diagnosis:</p> <ol> <li> <p>Check if auth is required: <pre><code># Check server config\nsellia server --help\n</code></pre></p> </li> <li> <p>Verify API key: <pre><code># List keys (if using database)\nsellia admin api-keys list\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Don't require auth (development): <pre><code>sellia server --no-auth\n</code></pre></p> </li> <li> <p>Provide correct API key: <pre><code>sellia http --api-key key_abc123...\n</code></pre></p> </li> <li> <p>Create new API key: <pre><code>sellia admin api-keys create --name \"My Key\"\n\n# Output: Created API key: key_abc123...\n</code></pre></p> </li> <li> <p>Set master key (simple deployment): <pre><code>export SELLIA_MASTER_KEY=\"your-secret-key\"\nsellia server\n\n# Client\nsellia http --api-key \"your-secret-key\"\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#tunnel-client-disconnected","level":3,"title":"\"Tunnel Client Disconnected\"","text":"<p>Symptoms: - Tunnel works initially then stops - Error: \"Tunnel client disconnected\" - Intermittent 502 errors</p> <p>Diagnosis:</p> <ol> <li> <p>Check client logs: <pre><code>sellia http --verbose\n</code></pre></p> </li> <li> <p>Check for network instability: <pre><code># Ping server\nping -c 100 your-server.com\n\n# Check for packet loss\n# Look for \"packet loss\" percentage\n</code></pre></p> </li> <li> <p>Check keep-alive settings: <pre><code># Check ping interval (default 30s)\n# Check timeout (default 60s)\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Auto-reconnect is enabled by default:</li> <li>Linear backoff: 3s, 6s, 9s, ... up to 30s</li> <li>Max attempts: 10 (configurable in code)</li> <li> <p>Client will automatically reconnect if connection drops</p> </li> <li> <p>Check network stability: <pre><code># Use wired connection instead of WiFi\n# Check router logs for drops\n# Contact ISP if issues persist\n</code></pre></p> </li> <li> <p>Default timeout settings (WSGateway):</p> </li> <li>PING_INTERVAL = 30 seconds (server sends ping)</li> <li>PING_TIMEOUT = 60 seconds (server marks client stale)</li> <li> <p>Request timeout = 30 seconds (HTTPIngress)</p> </li> <li> <p>Check for NAT timeouts: <pre><code># Some routers kill idle connections after 5 minutes\n# Solution: Keep-alive should prevent this\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#max-reconnection-attempts-exceeded","level":3,"title":"\"Max Reconnection Attempts Exceeded\"","text":"<p>Symptoms: - Error: \"Max reconnection attempts exceeded\" - Client gives up trying to reconnect</p> <p>Diagnosis:</p> <ol> <li> <p>Check if server is down: <pre><code>curl http://your-server.com/health\n</code></pre></p> </li> <li> <p>Check for IP blocks: <pre><code># Check server logs for ban messages\ntail -f /var/log/sellia/server.log\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Fix server issues: <pre><code># Start/restart server\nsystemctl restart sellia\n</code></pre></p> </li> <li> <p>Wait and retry: <pre><code># Linear backoff means delays increase by a fixed step\n# Just wait a few minutes and try again\n</code></pre></p> </li> <li> <p>Increase max attempts: <pre><code>client.max_reconnect_attempts = 20  # Default is 10\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#connection-intermittently-drops","level":3,"title":"Connection Intermittently Drops","text":"<p>Symptoms: - Connection works, drops, reconnects - Pattern repeats every few minutes</p> <p>Diagnosis:</p> <ol> <li> <p>Check for NAT issues: <pre><code># Many routers have 5-minute timeout for idle connections\n# Sellia sends ping every 30s to prevent this\n</code></pre></p> </li> <li> <p>Check for ISP interference: <pre><code># Some ISPs reset connections periodically\n# Check with ISP for connection stability\n</code></pre></p> </li> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep \"timeout\"\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Understanding keep-alive:</li> <li>Server sends ping every 30 seconds (PING_INTERVAL)</li> <li>Server marks client stale after 60 seconds of no activity (PING_TIMEOUT)</li> <li> <p>This prevents NAT timeout issues automatically</p> </li> <li> <p>Use wired connection: <pre><code>WiFi is more prone to interference and drops\n</code></pre></p> </li> <li> <p>Check router settings: <pre><code>Disable: SIP ALG, Flood Protection, Port Scan Detection\nEnable: Keep-alive, NAT Loopback\n</code></pre></p> </li> <li> <p>Use stable network: <pre><code>Avoid: Public WiFi, cellular data\nPrefer: Wired ethernet, stable WiFi\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#websocket-connection-fails","level":3,"title":"WebSocket Connection Fails","text":"<p>Symptoms: - HTTP works but WebSocket fails - Error: \"WebSocket handshake failed\" - HMR not working in development</p> <p>Diagnosis:</p> <ol> <li> <p>Check WebSocket upgrade headers: <pre><code># Should see:\n# Upgrade: websocket\n# Connection: upgrade\n</code></pre></p> </li> <li> <p>Check reverse proxy configuration: <pre><code># Caddy Caddyfile\nyour-domain.com {\n    reverse_proxy localhost:3000 {\n        # WebSocket support is automatic\n    }\n}\n</code></pre></p> </li> <li> <p>Test WebSocket directly: <pre><code># Bypass proxy and test directly\ncurl -i -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  http://localhost:3000/ws\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Configure reverse proxy for WebSocket:</li> </ol> <p>Caddy (automatic): <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> <p>Nginx: <pre><code>location / {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $host;\n    proxy_read_timeout 86400;\n}\n</code></pre></p> <ol> <li> <p>Check firewall allows WebSocket: <pre><code># Should allow established connections\nsudo iptables -L -n | grep ESTABLISHED\n</code></pre></p> </li> <li> <p>Increase timeouts: <pre><code># In TunnelClient\nclient.connect_timeout = 10.seconds\nclient.request_timeout = 60.seconds\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#connection-refused-immediately","level":3,"title":"\"Connection Refused\" Immediately","text":"<p>Symptoms: - Error occurs instantly (&lt; 1 second) - No delay before error</p> <p>Diagnosis:</p> <pre><code># This confirms nothing is listening\nnc -zv localhost 3000\n\n# Output: Connection refused\n</code></pre> <p>Causes: 1. Server not running 2. Wrong port 3. Server bound to different interface</p> <p>Solutions:</p> <ol> <li> <p>Start server: <pre><code>sellia server --port 3000\n</code></pre></p> </li> <li> <p>Check correct port: <pre><code># Server\nsellia server --port 3000\n\n# Client\nsellia http --server ws://localhost:3000\n</code></pre></p> </li> <li> <p>Check binding address: <pre><code># Server binds to 127.0.0.1 - localhost only\nsellia server --bind 127.0.0.1\n\n# Server binds to 0.0.0.0 - all interfaces\nsellia server --bind 0.0.0.0\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#connection-timeout","level":3,"title":"\"Connection Timeout\"","text":"<p>Symptoms: - Error after 30+ seconds - Network request hangs</p> <p>Diagnosis:</p> <pre><code># Test TCP connectivity\ntelnet your-server.com 3000\n\n# Or with nc\nnc -zv your-server.com 3000\n</code></pre> <p>Causes: 1. Firewall blocking 2. Server overloaded 3. Network routing issue</p> <p>Solutions:</p> <ol> <li> <p>Check firewall: <pre><code># Server\nsudo ufw allow 3000/tcp\n\n# Client (if outgoing blocked)\nsudo ufw allow out 3000/tcp\n</code></pre></p> </li> <li> <p>Check server health: <pre><code># Check CPU/memory\nhtop\n\n# Check connection count\nnetstat -an | grep 3000 | wc -l\n</code></pre></p> </li> <li> <p>Test from different network: <pre><code># Try from mobile hotspot\n# Try from different location\n# If works: ISP or local network issue\n</code></pre></p> </li> <li> <p>Check reverse proxy: <pre><code># If behind proxy, check proxy is running\nsystemctl status caddy\nsystemctl status nginx\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#diagnostic-commands","level":2,"title":"Diagnostic Commands","text":"","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#test-server-health","level":3,"title":"Test Server Health","text":"<pre><code># Health endpoint\ncurl http://your-server.com/health\n\n# Expected output\n{\"status\":\"ok\",\"tunnels\":5}\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#test-websocket","level":3,"title":"Test WebSocket","text":"<pre><code># Using websocat\nwebsocat ws://your-server.com/ws\n\n# Or with wscat\nwscat -c ws://your-server.com/ws\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#check-network-path","level":3,"title":"Check Network Path","text":"<pre><code># Trace route to server\ntraceroute your-server.com\n\n# Check DNS\nnslookup your-server.com\ndig your-server.com\n\n# Check MTU\nping -c 1 -M do -s 1472 your-server.com\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#monitor-connection","level":3,"title":"Monitor Connection","text":"<pre><code># Watch connection count\nwatch 'netstat -an | grep :3000 | wc -l'\n\n# Monitor with tcpdump\nsudo tcpdump -i any -n host your-server.com\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#prevention","level":2,"title":"Prevention","text":"","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#use-stable-network","level":3,"title":"Use Stable Network","text":"<ul> <li>Prefer wired ethernet over WiFi</li> <li>Avoid public WiFi</li> <li>Check router logs for drops</li> </ul>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#configure-timeouts-appropriately","level":3,"title":"Configure Timeouts Appropriately","text":"<pre><code># Server\nPING_INTERVAL = 30.seconds   # Keep-alive frequency\nPING_TIMEOUT = 60.seconds    # Time before disconnect\n\n# Client\nclient.auto_reconnect = true\nclient.reconnect_delay = 3.seconds\nclient.max_reconnect_attempts = 10\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#monitor-health","level":3,"title":"Monitor Health","text":"<pre><code># Use health endpoint in monitoring\ncurl http://your-server.com/health\n\n# Set up alerting\n# Alert if status != \"ok\"\n# Alert if tunnels drop unexpectedly\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#use-reverse-proxy","level":3,"title":"Use Reverse Proxy","text":"<p>For production, use Caddy or Nginx: - Handles TLS termination - Better connection management - Built-in retry logic</p>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/connection-issues/#log-everything","level":3,"title":"Log Everything","text":"<pre><code># Enable verbose logging\nsellia server --log-level debug\nsellia http --verbose\n\n# Send to log file\nsellia server 2&gt;&amp;1 | tee /var/log/sellia/server.log\n</code></pre>","path":["01 user","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/","level":1,"title":"Subdomain Conflicts Troubleshooting","text":"<p>Guide to resolving \"subdomain already in use\" errors.</p>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#common-problems","level":2,"title":"Common Problems","text":"","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#subdomain-already-in-use","level":3,"title":"\"Subdomain Already in Use\"","text":"<p>Symptoms: - Error: \"Subdomain 'myapp' is not available\" - Tunnel creation fails - Server sends <code>TunnelClose</code> with \"not available\" reason</p> <p>Diagnosis:</p> <ol> <li> <p>Check if tunnel exists: <pre><code>curl http://your-server.com/health\n\n# Expected output:\n# {\"status\":\"ok\",\"tunnels\":5}\n</code></pre></p> </li> <li> <p>Try to access subdomain: <pre><code>curl http://myapp.your-domain.com\n</code></pre></p> </li> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep \"myapp\"\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Use different subdomain: <pre><code>sellia http 8080 --subdomain myapp2\n</code></pre></p> </li> <li> <p>Wait for existing tunnel to close: <pre><code># Tunnels automatically close when client disconnects\n# Press Ctrl+C to close the tunnel client\n</code></pre></p> </li> <li> <p>Check for zombie tunnels: <pre><code># If client crashed, tunnel may still be registered\n# Restart server to clear all tunnels\nsystemctl restart sellia\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#subdomain-is-reserved","level":3,"title":"\"Subdomain is Reserved\"","text":"<p>Symptoms: - Error: \"Subdomain 'www' is reserved\" - Cannot use certain subdomains</p> <p>Diagnosis:</p> <ol> <li>Check reserved subdomains: <pre><code>sellia admin reserved-subdomains list\n</code></pre></li> </ol> <p>Default Reserved Subdomains (from storage/migrations.cr): - <code>www</code> - Common web server subdomain - <code>api</code> - API endpoints - <code>admin</code> - Admin panel - <code>mail</code> - Email services - <code>ftp</code> - File transfer - <code>localhost</code> - Localhost</p> <p>Note: These defaults are seeded into the database and can be managed via <code>sellia admin reserved</code> commands.</p> <p>Solutions:</p> <ol> <li> <p>Use different subdomain: <pre><code># Instead of\nsellia http --subdomain www\n\n# Use\nsellia http --subdomain myapp\n</code></pre></p> </li> <li> <p>Remove reservation (if you control server): <pre><code>sellia admin reserved-subdomains delete www\n</code></pre></p> </li> <li> <p>Check reserved list: <pre><code>sellia admin reserved-subdomains list\n\n# Output:\n# Reserved Subdomains:\n# - www (System)\n# - api (System: API endpoints)\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#subdomain-format-validation-errors","level":3,"title":"Subdomain Format Validation Errors","text":"<p>Symptoms: - Error: \"Subdomain must be at least 3 characters\" - Error: \"Subdomain can only contain lowercase letters, numbers, and hyphens\" - Error: \"Subdomain cannot start or end with a hyphen\"</p> <p>Diagnosis:</p> <pre><code># Check your subdomain\necho \"myapp\" | grep -E '^[a-z0-9][a-z0-9-]*[a-z0-9]$'\n</code></pre> <p>Validation Rules (from tunnel_registry.cr): 1. Length: 3-63 characters 2. Characters: lowercase letters, numbers, hyphens only 3. Must start and end with alphanumeric character 4. Cannot contain consecutive hyphens 5. Cannot be a reserved subdomain 6. Must not already be in use</p> <p>Solutions:</p> <ol> <li> <p>Fix subdomain format: <pre><code># BAD - too short\nsellia http --subdomain ab\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - uppercase\nsellia http --subdomain MyApp\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - starts with hyphen\nsellia http --subdomain -myapp\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - ends with hyphen\nsellia http --subdomain myapp-\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - consecutive hyphens\nsellia http --subdomain my--app\n\n# GOOD\nsellia http --subdomain my-app\n</code></pre></p> </li> <li> <p>Use generated subdomain: <pre><code># Let server generate random subdomain\nsellia http\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#race-condition-subdomain-taken","level":3,"title":"Race Condition - Subdomain Taken","text":"<p>Symptoms: - Multiple clients trying to get same subdomain - One succeeds, others fail - Error intermittent</p> <p>Diagnosis:</p> <ol> <li> <p>Check if multiple clients are using same config: <pre><code># Multiple processes with same subdomain\nps aux | grep \"sellia.*myapp\"\n</code></pre></p> </li> <li> <p>Check timing: <pre><code># If clients start at same time (e.g., system reboot)\n# They may race for the same subdomain\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Use unique subdomains per client: <pre><code># Client 1\nsellia http --subdomain myapp-client1\n\n# Client 2\nsellia http --subdomain myapp-client2\n</code></pre></p> </li> <li> <p>Add identifier: <pre><code># Use hostname or identifier\nHOST=$(hostname)\nsellia http --subdomain \"myapp-${HOST}\"\n</code></pre></p> </li> <li> <p>Use random subdomain: <pre><code># No conflicts possible\nsellia http\n</code></pre></p> </li> <li> <p>Implement retry logic: <pre><code># In client code\nmax_attempts = 3\nattempt = 0\n\nwhile attempt &lt; max_attempts\n  result = try_open_tunnel(subdomain)\n  if result.success?\n    break\n  elsif result.error.includes?(\"not available\")\n    attempt += 1\n    sleep 1\n    subdomain = \"#{subdomain}#{attempt}\"\n  else\n    break\n  end\nend\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#zombie-tunnel-holding-subdomain","level":3,"title":"Zombie Tunnel Holding Subdomain","text":"<p>Symptoms: - Client disconnected but tunnel still registered - Cannot reuse subdomain - Server shows tunnel active</p> <p>Diagnosis:</p> <ol> <li> <p>Check server health: <pre><code>curl http://your-server.com/health\n\n# Note: tunnels count includes zombies\n</code></pre></p> </li> <li> <p>Try to access subdomain: <pre><code># If returns 502 \"Tunnel client disconnected\"\n# Tunnel is registered but client is gone\ncurl http://myapp.your-domain.com\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Wait for cleanup: <pre><code># Server may have stale connection detection\n# Waits 60 seconds before marking as stale\n</code></pre></p> </li> <li> <p>Restart server: <pre><code># Clears all tunnels\nsystemctl restart sellia\n</code></pre></p> </li> <li> <p>Implement server-side cleanup: <pre><code># In WSGateway#check_connections\nif client.stale?(PING_TIMEOUT)\n  Log.warn { \"Client #{client.id} timed out\" }\n  client.close(\"Connection timeout\")\n  handle_disconnect(client)\nend\n</code></pre></p> </li> <li> <p>Add keep-alive: <pre><code># Ensure ping/pong is working\n# Server sends ping every 30s\n# Client responds with pong\n# If no pong for 60s, client is stale\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#subdomain-management","level":2,"title":"Subdomain Management","text":"","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#list-active-tunnels","level":3,"title":"List Active Tunnels","text":"<pre><code># Via health endpoint\ncurl http://your-server.com/health\n\n# Via admin API\ncurl -u admin:password http://your-server.com/admin/tunnels\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#force-close-tunnel","level":3,"title":"Force Close Tunnel","text":"<pre><code># Via admin API\ncurl -X POST \\\n  -u admin:password \\\n  http://your-server.com/admin/tunnels/{tunnel_id}/close\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#clear-all-tunnels","level":3,"title":"Clear All Tunnels","text":"<pre><code># Restart server\nsystemctl restart sellia\n\n# Or via admin API (if implemented)\ncurl -X POST \\\n  -u admin:password \\\n  http://your-server.com/admin/tunnels/clear-all\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#add-reserved-subdomain","level":3,"title":"Add Reserved Subdomain","text":"<pre><code># Prevent subdomain from being used\nsellia admin reserved-subdomains create myapp --reason \"Reserved for production\"\n\n# Make it default (system)\nsellia admin reserved-subdomains create www --reason \"Web server\" --default\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#remove-reserved-subdomain","level":3,"title":"Remove Reserved Subdomain","text":"<pre><code>sellia admin reserved-subdomains delete myapp\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#use-descriptive-subdomains","level":3,"title":"Use Descriptive Subdomains","text":"<pre><code># GOOD - descriptive\nsellia http --subdomain dev-myapp\nsellia http --subdomain staging-myapp\nsellia http --subdomain prod-myapp\n\n# BAD - random, hard to remember\nsellia http --subdomain a1b2c3d4\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#use-environment-suffix","level":3,"title":"Use Environment Suffix","text":"<pre><code># Development\nENV=dev\nsellia http --subdomain \"myapp-${ENV}\"\n\n# Staging\nENV=staging\nsellia http --subdomain \"myapp-${ENV}\"\n\n# Production\nENV=prod\nsellia http --subdomain \"myapp-${ENV}\"\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#use-consistent-naming","level":3,"title":"Use Consistent Naming","text":"<pre><code># Pattern: {app}-{service}-{env}\n# Examples:\nsellia http --subdomain myapp-api-dev\nsellia http --subdomain myapp-web-prod\nsellia http --subdomain myapp-admin-staging\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#avoid-reserved-words","level":3,"title":"Avoid Reserved Words","text":"<p>Avoid these subdomains: - <code>www</code>, <code>api</code>, <code>admin</code>, <code>mail</code>, <code>ftp</code>, <code>localhost</code>, <code>smtp</code>, <code>pop</code>, <code>imap</code> - Any system service you might run</p>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#document-subdomain-usage","level":3,"title":"Document Subdomain Usage","text":"<pre><code># Keep track of subdomain assignments\n# Subdomain | Purpose | Owner | Date\n# myapp-dev | Development | Alice | 2024-01-15\n# myapp-prod | Production | Bob | 2024-01-16\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#testing","level":2,"title":"Testing","text":"","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#test-subdomain-availability","level":3,"title":"Test Subdomain Availability","text":"<pre><code># Check if subdomain is taken\ncurl -I http://myapp.your-domain.com\n\n# 404 = Available (no tunnel)\n# 200/502 = Taken (tunnel exists or zombie)\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#test-subdomain-format","level":3,"title":"Test Subdomain Format","text":"<pre><code># Validation function\nvalidate_subdomain() {\n  local subdomain=\"$1\"\n\n  if [[ ${#subdomain} -lt 3 ]]; then\n    echo \"Error: Subdomain must be at least 3 characters\"\n    return 1\n  fi\n\n  if [[ ${#subdomain} -gt 63 ]]; then\n    echo \"Error: Subdomain must be at most 63 characters\"\n    return 1\n  fi\n\n  if [[ ! \"$subdomain\" =~ ^[a-z0-9]([a-z0-9-]*[a-z0-9])?$ ]]; then\n    echo \"Error: Invalid subdomain format\"\n    return 1\n  fi\n\n  echo \"Subdomain '$subdomain' is valid\"\n}\n\n# Test\nvalidate_subdomain \"myapp\"  # Valid\nvalidate_subdomain \"ab\"     # Too short\nvalidate_subdomain \"MyApp\"  # Uppercase\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#test-race-conditions","level":3,"title":"Test Race Conditions","text":"<pre><code># Test multiple clients trying same subdomain\nfor i in {1..5}; do\n  sellia http --subdomain race-test &amp;\ndone\n\n# Wait and check results\nsleep 5\ncurl http://race-test.your-domain.com\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#prevention","level":2,"title":"Prevention","text":"","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#reserve-system-subdomains-early","level":3,"title":"Reserve System Subdomains Early","text":"<pre><code># During setup\nsellia admin reserved-subdomains create www --reason \"Web server\" --default\nsellia admin reserved-subdomains create api --reason \"API server\" --default\nsellia admin reserved-subdomains create admin --reason \"Admin panel\" --default\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#use-unique-identifiers","level":3,"title":"Use Unique Identifiers","text":"<pre><code># Include hostname/user in subdomain\nsellia http --subdomain \"myapp-${USER}\"\nsellia http --subdomain \"myapp-$(hostname)\"\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#implement-cleanup-logic","level":3,"title":"Implement Cleanup Logic","text":"<pre><code># Server-side cleanup\n# 1. Detect stale connections\n# 2. Close stale connections\n# 3. Clean up tunnels\n# 4. Reset rate limits\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/subdomain-conflicts/#monitor-subdomain-usage","level":3,"title":"Monitor Subdomain Usage","text":"<pre><code># Regularly check for stale tunnels\nwhile true; do\n  tunnels=$(curl -s http://your-server.com/health | jq '.tunnels')\n  echo \"Active tunnels: $tunnels\"\n  sleep 60\ndone\n</code></pre>","path":["01 user","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/","level":1,"title":"TLS and Certificate Errors Troubleshooting","text":"<p>Guide to fixing HTTPS/TLS issues with Sellia tunnels.</p>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#common-problems","level":2,"title":"Common Problems","text":"","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#certificate-not-found-error","level":3,"title":"\"Certificate Not Found\" Error","text":"<p>Symptoms: - Browser shows \"NET::ERR_CERT_AUTHORITY_INVALID\" - Error: \"certificate not found for domain\" - Caddy fails to get certificate</p> <p>Diagnosis:</p> <ol> <li> <p>Check Caddy TLS verification endpoint: <pre><code>curl \"http://your-server.com/tunnel/verify?domain=myapp.your-domain.com\"\n</code></pre></p> </li> <li> <p>Check Caddy logs: <pre><code>journalctl -u caddy -f\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Ensure tunnel is active: <pre><code># Certificate is only issued for active tunnels\nsellia http --subdomain myapp\n\n# Then test verification\ncurl \"http://your-server.com/tunnel/verify?domain=myapp.your-domain.com\"\n</code></pre></p> </li> <li> <p>Check DNS is pointing correctly: <pre><code># Should be CNAME or A record to your server\ndig myapp.your-domain.com\n\n# Expected: points to your server IP\n</code></pre></p> </li> <li> <p>Wait for DNS propagation: <pre><code># DNS can take up to 24 hours to propagate\n# But usually takes 5-10 minutes\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#cannot-verify-domain-error","level":3,"title":"\"Cannot Verify Domain\" Error","text":"<p>Symptoms: - Caddy log: \"verifying domain availability\" - Certificate issuance fails - HTTP works but HTTPS doesn't</p> <p>Diagnosis:</p> <ol> <li>Check <code>/tunnel/verify</code> endpoint: <pre><code>curl -v \"http://your-server.com/tunnel/verify?domain=test.your-domain.com\"\n</code></pre></li> </ol> <p>Expected response: - <code>200 OK</code> if tunnel active - <code>404 Not Found</code> if no tunnel</p> <p>Solutions:</p> <ol> <li> <p>Check base domain is allowed: <pre><code># In HTTPIngress#verify_tunnel_for_tls (actual implementation)\n# Returns 200 if:\n# 1. domain_param == base domain (for WebSocket connections from clients)\n# 2. subdomain exists and has an active tunnel\n# Otherwise returns 404\n</code></pre></p> </li> <li> <p>Ensure tunnel is created before HTTPS request: <pre><code># Start tunnel\nsellia http --subdomain myapp &amp;\n\n# Wait for \"Tunnel ready\" message\n# Then access via HTTPS\ncurl https://myapp.your-domain.com\n</code></pre></p> </li> <li> <p>Check Caddy on-demand TLS config: <pre><code># Caddyfile\n{\n  # Enable on-demand TLS\n  on_demand_tls {\n    ask http://localhost:3000/tunnel/verify\n  }\n}\n\nyour-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#mixed-content-warnings","level":3,"title":"Mixed Content Warnings","text":"<p>Symptoms: - Browser console shows \"Mixed Content\" errors - Some resources fail to load - Error: \"was loaded over HTTPS, but requested an insecure resource\"</p> <p>Diagnosis:</p> <p>Check browser console for: <pre><code>The page at 'https://myapp.your-domain.com' was loaded over HTTPS, \nbut requested an insecure resource 'http://myapp.your-domain.com/api'.\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Fix absolute URLs in your app: <pre><code>&lt;!-- BAD --&gt;\n&lt;script src=\"http://myapp.your-domain.com/app.js\"&gt;&lt;/script&gt;\n\n&lt;!-- GOOD --&gt;\n&lt;script src=\"/app.js\"&gt;&lt;/script&gt;\n\n&lt;!-- GOOD --&gt;\n&lt;script src=\"https://myapp.your-domain.com/app.js\"&gt;&lt;/script&gt;\n</code></pre></p> </li> <li> <p>Use protocol-relative URLs (deprecated): <pre><code>&lt;script src=\"//myapp.your-domain.com/app.js\"&gt;&lt;/script&gt;\n</code></pre></p> </li> <li> <p>Update API calls: <pre><code>// BAD\nfetch('http://api.example.com/data')\n\n// GOOD - use relative path\nfetch('/api/data')\n\n// GOOD - use HTTPS\nfetch('https://api.example.com/data')\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#ssl_error_bad_cert_domain","level":3,"title":"\"SSL_ERROR_BAD_CERT_DOMAIN\"","text":"<p>Symptoms: - Browser error: \"SSL_ERROR_BAD_CERT_DOMAIN\" - Error: \"certificate does not match domain name\"</p> <p>Diagnosis:</p> <ol> <li> <p>Check certificate: <pre><code>openssl s_client -connect myapp.your-domain.com:443 -servername myapp.your-domain.com\n</code></pre></p> </li> <li> <p>Check certificate CN/SAN: <pre><code># Look for:\n# subject=CN = myapp.your-domain.com\n# subjectAltName=DNS:myapp.your-domain.com\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Clear browser cache: <pre><code>Sometimes browsers cache old certificates\n</code></pre></p> </li> <li> <p>Wait for certificate renewal: <pre><code># Caddy will retry every few minutes\n# Check logs for progress\njournalctl -u caddy -f | grep certificate\n</code></pre></p> </li> <li> <p>Force certificate renewal: <pre><code># Restart Caddy\nsystemctl restart caddy\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#hsts-pkix-errors","level":3,"title":"HSTS / PKIX Errors","text":"<p>Symptoms: - Browser: \"HSTS policy\" - Error: \"PKIX path building failed\" - Cannot access even after fixing certificate</p> <p>Diagnosis:</p> <p>Check if site has HSTS: <pre><code>curl -I https://myapp.your-domain.com | grep Strict-Transport-Security\n</code></pre></p> <p>Solutions:</p> <ol> <li>Clear HSTS in browser:</li> </ol> <p>Chrome: 1. Go to chrome://net-internals/#hsts 2. Enter domain under \"Delete domain security policies\" 3. Click Delete</p> <p>Firefox: 1. Clear browser history 2. Or wait for HSTS to expire (max-age)</p> <ol> <li> <p>Use private/incognito window: <pre><code>HSTS not enforced in private browsing\n</code></pre></p> </li> <li> <p>Check HSTS header: <pre><code># Your app should not set HSTS if using dynamic certificates\n# Or set max-age appropriately\nresponse.headers[\"Strict-Transport-Security\"] = \"max-age=31536000\"\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#caddy-cannot-obtain-certificate","level":3,"title":"Caddy Cannot Obtain Certificate","text":"<p>Symptoms: - Caddy log: \"obtaining certificate\" - Caddy log: \"no solution found\" - HTTPS works after delay (1-2 minutes)</p> <p>Diagnosis:</p> <ol> <li> <p>Check Caddy logs: <pre><code>journalctl -u caddy -n 50 | grep -i certificate\n</code></pre></p> </li> <li> <p>Check Let's Encrypt rate limits: <pre><code># Check if you hit rate limits\n# https://letsencrypt.net/docs/rate-limits/\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Wait for rate limit reset: <pre><code>Let's Encrypt limit: 50 certificates per domain per week\n</code></pre></p> </li> <li> <p>Use staging environment for testing: <pre><code>{\n  acme_ca https://acme-staging-v02.api.letsencrypt.org/directory\n}\n</code></pre></p> </li> <li> <p>Reduce certificate requests: <pre><code># Don't recreate tunnels frequently\n# Use same subdomain for testing\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#certificate-expired-error","level":3,"title":"\"Certificate Expired\" Error","text":"<p>Symptoms: - Browser: \"certificate has expired\" - Connection refused</p> <p>Diagnosis:</p> <pre><code># Check certificate expiration\necho | openssl s_client -servername myapp.your-domain.com -connect myapp.your-domain.com:443 2&gt;/dev/null | openssl x509 -noout -dates\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Caddy auto-renews: <pre><code>Certificates are automatically renewed 30 days before expiration\n</code></pre></p> </li> <li> <p>Force renewal if needed: <pre><code>systemctl restart caddy\n</code></pre></p> </li> <li> <p>Check system time: <pre><code># Wrong system time can cause certificate validation to fail\ntimedatectl status\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#tls-handshake-timeout","level":3,"title":"TLS Handshake Timeout","text":"<p>Symptoms: - Connection hangs - Error: \"TLS handshake timeout\" - No response from server</p> <p>Diagnosis:</p> <pre><code># Test TLS handshake\ntimeout 10 openssl s_client -connect myapp.your-domain.com:443\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Check firewall allows port 443: <pre><code>sudo ufw allow 443/tcp\nsudo firewall-cmd --add-port=443/tcp --permanent\n</code></pre></p> </li> <li> <p>Check reverse proxy is running: <pre><code>systemctl status caddy\nsystemctl status nginx\n</code></pre></p> </li> <li> <p>Increase timeout: <pre><code>your-domain.com {\n    reverse_proxy localhost:3000 {\n        transport http {\n            read_timeout 30s\n            write_timeout 30s\n        }\n    }\n}\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#caddy-with-on-demand-tls","level":3,"title":"Caddy with On-Demand TLS","text":"<pre><code># Caddyfile\n{\n    # On-demand TLS configuration\n    on_demand_tls {\n        # Ask Sellia server if domain should get certificate\n        ask http://localhost:3000/tunnel/verify\n    }\n}\n\nyour-domain.com {\n    # Reverse proxy to Sellia server\n    reverse_proxy localhost:3000 {\n        # WebSocket support (automatic in Caddy)\n    }\n}\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#caddy-with-rate-limiting","level":3,"title":"Caddy with Rate Limiting","text":"<pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n\n    # Rate limit certificate issuance\n    @on_demand_tls {\n        rate_limit {\n            zone tls {\n                key {tls_on_demand}\n                events 100\n                window 1m\n            }\n        }\n    }\n}\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#nginx-with-ssl","level":3,"title":"Nginx with SSL","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    # SSL certificate (use Let's Encrypt/Certbot)\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n\n    # Reverse proxy\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name your-domain.com;\n    return 301 https://$server_name$request_uri;\n}\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#prevention","level":2,"title":"Prevention","text":"","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#use-stable-subdomains","level":3,"title":"Use Stable Subdomains","text":"<pre><code># In production, don't use random subdomains\n# They change each time, requiring new certificates\n\n# BAD - random subdomain\nsellia http\n\n# GOOD - fixed subdomain\nsellia http --subdomain myapp-prod\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#monitor-certificate-expiration","level":3,"title":"Monitor Certificate Expiration","text":"<pre><code># Check certificate expiration\necho | openssl s_client -servername myapp.your-domain.com -connect myapp.your-domain.com:443 2&gt;/dev/null | openssl x509 -noout -dates\n\n# Set up monitoring to alert at 30 days\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#test-certificate-configuration","level":3,"title":"Test Certificate Configuration","text":"<pre><code># Use SSL Labs to test configuration\n# https://www.ssllabs.com/ssltest/analyze.html?d=myapp.your-domain.com\n\n# Should get A or A+ grade\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#use-proper-dns","level":3,"title":"Use Proper DNS","text":"<pre><code># Wildcard DNS (simple)\n*.your-domain.com A 1.2.3.4\n\n# Or individual subdomains\nmyapp.your-domain.com A 1.2.3.4\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#lets-encrypt-limits","level":2,"title":"Let's Encrypt Limits","text":"","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#rate-limits","level":3,"title":"Rate Limits","text":"<ul> <li>Certificates per Registered Domain: 50 per week</li> <li>Certificates per Certificate Name: 5 per week</li> <li>Duplicate Certificate limit: 1 per 3 days</li> </ul>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#check-limits","level":3,"title":"Check Limits","text":"<pre><code># Check staging environment first\n{\n  acme_ca https://acme-staging-v02.api.letsencrypt.org/directory\n}\n\n# Use production after testing\n{\n  acme_ca https://acme-v02.api.letsencrypt.org/directory\n}\n</code></pre>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/tls-errors/#failed-attempts-count","level":3,"title":"Failed Attempts Count","text":"<p>Failed validation attempts count against rate limits. Ensure: - DNS is correct - Server is accessible - Firewall allows connections</p>","path":["01 user","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/","level":1,"title":"WebSocket Issues Troubleshooting","text":"<p>Guide to fixing WebSocket and HMR (Hot Module Replacement) problems.</p>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#common-problems","level":2,"title":"Common Problems","text":"","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#websocket-connection-fails","level":3,"title":"WebSocket Connection Fails","text":"<p>Symptoms: - Error: \"WebSocket upgrade failed\" - Error: \"502 Bad Gateway\" - HMR not working in development</p> <p>Diagnosis:</p> <ol> <li>Check WebSocket upgrade headers: <pre><code>curl -I -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  http://myapp.your-domain.com/socket\n</code></pre></li> </ol> <p>Expected: <pre><code>HTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\n</code></pre></p> <ol> <li> <p>Check browser console: <pre><code>// Look for WebSocket errors\n// \"WebSocket connection to 'ws://...' failed\"\n</code></pre></p> </li> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep -i websocket\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Configure reverse proxy for WebSocket:</li> </ol> <p>Caddy (automatic): <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> <p>Nginx: <pre><code>location / {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $host;\n}\n</code></pre></p> <ol> <li> <p>Check local service supports WebSocket: <pre><code># Test direct connection\nwscat -c ws://localhost:3000/socket\n\n# If this fails, issue is with local service, not Sellia\n</code></pre></p> </li> <li> <p>Check WebSocket frame forwarding: <pre><code>// In TunnelClient\n@on_websocket do |path, request_id|\n  puts \"WebSocket connected: #{path} (#{request_id})\"\nend\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#hmr-not-working-in-development","level":3,"title":"HMR Not Working in Development","text":"<p>Symptoms: - File changes not reflected in browser - Error: \"WebSocket connection closed\" - Dev server shows disconnected client</p> <p>Diagnosis:</p> <ol> <li> <p>Check Vite/Webpack dev server is running: <pre><code># Vite\ncd web\nnpm run dev\n\n# Should see: \"Local: http://localhost:5173\"\n</code></pre></p> </li> <li> <p>Check WebSocket connection in browser: <pre><code>// Browser console\n// Look for: \"[HMR] Connected\" or \"[HMR] Waiting for update signal...\"\n</code></pre></p> </li> <li> <p>Test WebSocket directly: <pre><code># Test Vite HMR endpoint\nwscat -c ws://localhost:5173\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Start Vite dev server: <pre><code>cd web\nnpm run dev\n</code></pre></p> </li> <li> <p>Check Vite configuration: <pre><code>// vite.config.js\nexport default {\n  server: {\n    hmr: {\n      protocol: 'ws',\n      host: 'localhost',\n    },\n    ws: {\n      port: 5173,\n    },\n  },\n}\n</code></pre></p> </li> <li> <p>Configure inspector proxy: <pre><code># In Inspector#proxy_to_vite\n# Vite HMR WebSocket proxying is NOT supported\n# Use direct connection to Vite instead\n</code></pre></p> </li> <li> <p>Use production build instead: <pre><code># Build frontend\ncd web\nnpm run build\n\n# Build Sellia with baked assets\nshards build --release\n\n# HMR not needed in production\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#websocket-frame-dropping","level":3,"title":"WebSocket Frame Dropping","text":"<p>Symptoms: - WebSocket connects but messages lost - Intermittent communication - Frames arrive out of order</p> <p>Diagnosis:</p> <ol> <li> <p>Check for buffer overflows: <pre><code># Check message sizes\n# Large messages may be dropped\n</code></pre></p> </li> <li> <p>Check for congestion: <pre><code># Too many concurrent WebSocket connections\nnetstat -an | grep :3000 | grep ESTABLISHED | wc -l\n</code></pre></p> </li> <li> <p>Monitor frame loop: <pre><code>// In HTTPIngress#run_websocket_frame_loop\nLog.debug { \"WebSocket #{request_id}: received frame opcode=#{info.opcode}, size=#{info.size}\" }\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Increase buffer size: <pre><code>// In HTTPIngress\nbuffer = Bytes.new(16384)  # Increase from 8192\n</code></pre></p> </li> <li> <p>Implement backpressure: <pre><code>// Don't send frames if congestion detected\nif pending_ws.congestion?\n  // Queue or drop frames\n  next\nend\n</code></pre></p> </li> <li> <p>Use multiple tunnels: <pre><code># Spread WebSocket connections across tunnels\n# One tunnel for HTTP, one for WebSocket\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#websocket-timeout-errors","level":3,"title":"WebSocket Timeout Errors","text":"<p>Symptoms: - Error: \"WebSocket upgrade timeout\" - Connection closes after 30 seconds - Intermittent failures</p> <p>Diagnosis:</p> <ol> <li> <p>Check timeout settings: <pre><code>// In HTTPIngress\n@property request_timeout : Time::Span = 30.seconds\n</code></pre></p> </li> <li> <p>Check for slow local service: <pre><code># Time WebSocket connection\ntime curl -i -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  http://localhost:3000/socket\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>WebSocket timeout settings:</li> <li>HTTPIngress request_timeout: 30 seconds (default)</li> <li>WSGateway PING_INTERVAL: 30 seconds</li> <li>WSGateway PING_TIMEOUT: 60 seconds</li> <li> <p>These are hardcoded in the server implementation</p> </li> <li> <p>Optimize local service: <pre><code># Reduce WebSocket handshake time\n# Optimize database queries\n# Use connection pooling\n</code></pre></p> </li> <li> <p>Check for blocking operations: <pre><code>// Ensure handshake is non-blocking\n// Don't block in WebSocket frame loop\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#websocket-close-errors","level":3,"title":"WebSocket Close Errors","text":"<p>Symptoms: - Error: \"WebSocket closed unexpectedly\" - Error code: 1006 (abnormal closure) - Connection drops randomly</p> <p>Diagnosis:</p> <ol> <li>Check close codes: <pre><code>// Browser console\nwebsocket.onclose = (event) =&gt; {\n  console.log('Close code:', event.code);\n  console.log('Close reason:', event.reason);\n};\n</code></pre></li> </ol> <p>Common codes: - <code>1000</code> - Normal closure - <code>1001</code> - Endpoint going away - <code>1006</code> - Abnormal closure (network issue) - <code>1008</code> - Policy violation - <code>1011</code> - Internal error</p> <ol> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep -i \"websocket.*close\"\n</code></pre></p> </li> <li> <p>Test network stability: <pre><code># Ping server\nping -c 100 your-server.com\n\n# Look for packet loss\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Fix network issues: <pre><code># Use wired connection\n# Check router logs\n# Contact ISP if issues persist\n</code></pre></p> </li> <li> <p>Implement graceful close: <pre><code>// Send close frame before closing\nws_protocol.close\n\n// Then close connection\npending_ws.close\n</code></pre></p> </li> <li> <p>Handle close in client: <pre><code>websocket.onclose = (event) =&gt; {\n  if (event.code === 1006) {\n    // Abnormal closure - reconnect\n    setTimeout(() =&gt; reconnect(), 1000);\n  }\n};\n</code></pre></p> </li> <li> <p>Increase ping interval: <pre><code>// More frequent keep-alive\nPING_INTERVAL = 15.seconds  // Reduce from 30s\n</code></pre></p> </li> </ol>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#mixed-content-with-websocket","level":3,"title":"Mixed Content with WebSocket","text":"<p>Symptoms: - Error: \"Mixed Content: WebSocket connection from HTTPS page\" - Browser blocks WebSocket</p> <p>Diagnosis:</p> <p>Check browser console: <pre><code>Mixed Content: The page at 'https://myapp.your-domain.com' \nwas loaded over HTTPS, but attempted to connect to \nws://myapp.your-domain.com/socket (insecure WebSocket)\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Use WSS instead of WS: <pre><code>// BAD\nconst ws = new WebSocket('ws://myapp.your-domain.com/socket');\n\n// GOOD\nconst ws = new WebSocket('wss://myapp.your-domain.com/socket');\n</code></pre></p> </li> <li> <p>Let browser choose: <pre><code>// Use protocol-relative URL\nconst ws = new WebSocket(`//${window.location.host}/socket`);\n\n// Or use current protocol\nconst protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\nconst ws = new WebSocket(`${protocol}//${window.location.host}/socket`);\n</code></pre></p> </li> <li> <p>Configure reverse proxy for WSS:</p> </li> </ol> <p>Caddy (automatic): <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> <p>Nginx: <pre><code>location /socket {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n\n    # WSS support\n    proxy_set_header X-Forwarded-Proto $scheme;\n}\n</code></pre></p>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#reverse-proxy-configuration","level":2,"title":"Reverse Proxy Configuration","text":"","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#caddy-recommended","level":3,"title":"Caddy (Recommended)","text":"<pre><code>your-domain.com {\n    # WebSocket support is automatic\n    reverse_proxy localhost:3000 {\n        # Increase timeouts for long-running connections\n        transport http {\n            read_timeout 120s\n            write_timeout 120s\n            dial_timeout 10s\n        }\n    }\n}\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#nginx","level":3,"title":"Nginx","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    # SSL certificates\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n\n    # WebSocket upgrade\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # Timeouts for long-running WebSockets\n        proxy_read_timeout 86400;\n        proxy_send_timeout 86400;\n    }\n\n    # For specific WebSocket path\n    location /socket {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_read_timeout 86400;\n    }\n}\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#testing","level":2,"title":"Testing","text":"","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#test-websocket-connection","level":3,"title":"Test WebSocket Connection","text":"<pre><code># Using wscat\nwscat -c ws://myapp.your-domain.com/socket\n\n# Using websocat\nwebsocat ws://myapp.your-domain.com/socket\n\n# Send message\necho \"hello\" | websocat ws://myapp.your-domain.com/socket\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#test-with-script","level":3,"title":"Test with Script","text":"<pre><code>// test-websocket.js\nconst WebSocket = require('ws');\n\nconst ws = new WebSocket('ws://localhost:3000/socket');\n\nws.on('open', () =&gt; {\n  console.log('Connected');\n  ws.send('Hello from test');\n});\n\nws.on('message', (data) =&gt; {\n  console.log('Received:', data.toString());\n  ws.close();\n});\n\nws.on('close', () =&gt; {\n  console.log('Disconnected');\n});\n\nws.on('error', (error) =&gt; {\n  console.error('Error:', error.message);\n});\n</code></pre> <p>Run: <pre><code>node test-websocket.js\n</code></pre></p>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#monitor-websocket-traffic","level":3,"title":"Monitor WebSocket Traffic","text":"<pre><code># Using tcpdump\nsudo tcpdump -i any -A -s 0 'tcp port 3000 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'\n\n# Or use tshark\ntshark -f \"tcp port 3000\" -V\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#prevention","level":2,"title":"Prevention","text":"","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#use-caddy-for-automatic-websocket-support","level":3,"title":"Use Caddy for Automatic WebSocket Support","text":"<p>Caddy automatically handles WebSocket upgrades: <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#set-appropriate-timeouts","level":3,"title":"Set Appropriate Timeouts","text":"<pre><code>// Server\nPING_INTERVAL = 30.seconds\nPING_TIMEOUT = 60.seconds\n\n// Client\nclient.request_timeout = 60.seconds\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#monitor-websocket-connections","level":3,"title":"Monitor WebSocket Connections","text":"<pre><code># Track active WebSocket connections\nwatch 'netstat -an | grep :3000 | grep ESTABLISHED | wc -l'\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#implement-heartbeat","level":3,"title":"Implement Heartbeat","text":"<pre><code>// Client-side heartbeat\nsetInterval(() =&gt; {\n  if (ws.readyState === WebSocket.OPEN) {\n    ws.ping();\n  }\n}, 30000); // Every 30 seconds\n</code></pre>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#use-connection-pooling","level":3,"title":"Use Connection Pooling","text":"<p>For applications with many WebSocket connections: <pre><code># Use multiple tunnels\n# Distribute connections across tunnels\n</code></pre></p>","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/troubleshooting/websocket-issues/#common-error-codes","level":2,"title":"Common Error Codes","text":"Code Name Meaning Solution 1000 Normal Normal closure None expected 1001 Going Away Server shutting down Reconnect when server back 1006 Abnormal Network issue Check network, reconnect 1008 Policy Violation of policy Check authentication 1009 Too Big Message too large Reduce message size 1010 Missing Extension Required extension missing Check client configuration 1011 Internal Server error Check server logs 1012 Service Restart Server restarting Reconnect when ready","path":["01 user","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"01-user/tunnels/","level":1,"title":"Tunnels","text":"<p>Everything about creating and managing tunnels with Sellia.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#overview","level":2,"title":"Overview","text":"<p>Tunnels are secure connections from the public internet to your local development server. Sellia makes it easy to expose local services through custom subdomains.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#creating-tunnels","level":2,"title":"Creating Tunnels","text":"","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#basic-tunnel","level":3,"title":"Basic Tunnel","text":"<p>Expose a local service on port 3000:</p> <pre><code>sellia http 3000\n</code></pre>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#custom-subdomain","level":3,"title":"Custom Subdomain","text":"<p>Reserve a specific subdomain:</p> <pre><code>sellia http 3000 --subdomain myapp\n</code></pre> <p>Access at <code>http://myapp.your-domain.com</code></p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#basic-authentication","level":3,"title":"Basic Authentication","text":"<p>Protect your tunnel with username/password:</p> <pre><code>sellia http 3000 --auth admin:secret\n</code></pre>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#advanced-options","level":3,"title":"Advanced Options","text":"<pre><code># Specify local host\nsellia http 3000 --host 127.0.0.1\n\n# Use specific server\nsellia http 3000 --server https://sellia.me\n\n# Auto-open inspector\nsellia http 3000 --open\n\n# Custom inspector port\nsellia http 3000 --inspector-port 5000\n\n# Disable inspector\nsellia http 3000 --no-inspector\n</code></pre>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#managing-tunnels","level":2,"title":"Managing Tunnels","text":"","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#configuration-file","level":3,"title":"Configuration File","text":"<p>Define multiple tunnels in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\napi_key: your-api-key\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#tunnel-features","level":2,"title":"Tunnel Features","text":"","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#subdomain-routing","level":3,"title":"Subdomain Routing","text":"<p>Each tunnel gets a unique subdomain for easy access:</p> <ul> <li>Random: <code>abc123.your-domain.com</code></li> <li>Custom: <code>myapp.your-domain.com</code></li> </ul>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#automatic-reconnection","level":3,"title":"Automatic Reconnection","text":"<p>Sellia automatically reconnects with linear backoff if the connection drops.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#basic-auth-protection","level":3,"title":"Basic Auth Protection","text":"<p>Secure tunnels with HTTP basic authentication:</p> <pre><code>sellia http 3000 --auth user:pass\n</code></pre>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Server-side rate limiting prevents abuse (configurable on server).</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#use-cases","level":2,"title":"Use Cases","text":"","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#webhook-development","level":3,"title":"Webhook Development","text":"<pre><code>sellia http 3000 --subdomain webhooks --open\n</code></pre> <p>Use the inspector to debug webhook payloads in real-time.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#api-development","level":3,"title":"API Development","text":"<pre><code>sellia http 8080 --subdomain api --auth api:secret\n</code></pre> <p>Secure your API endpoint with authentication.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#mobile-development","level":3,"title":"Mobile Development","text":"<pre><code>sellia http 3000 --subdomain mobile-app\n</code></pre> <p>Test mobile apps against your local development server.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#client-demos","level":3,"title":"Client Demos","text":"<pre><code>sellia http 3000 --subdomain demo --auth client:preview123\n</code></pre> <p>Share password-protected previews with clients.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#use-configuration-files","level":3,"title":"Use Configuration Files","text":"<p>For multiple tunnels, use <code>sellia.yml</code> instead of CLI flags.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#reserve-subdomains","level":3,"title":"Reserve Subdomains","text":"<p>Use consistent subdomains in config to avoid conflicts.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#add-authentication","level":3,"title":"Add Authentication","text":"<p>Always use <code>--auth</code> for sensitive development work.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#monitor-with-inspector","level":3,"title":"Monitor with Inspector","text":"<p>Use <code>--open</code> to automatically open the inspector UI.</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#subdomain-taken","level":3,"title":"Subdomain Taken","text":"<p>If your custom subdomain is taken:</p> <ul> <li>Use a different subdomain</li> <li>Let Sellia assign a random one</li> </ul>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#connection-refused","level":3,"title":"Connection Refused","text":"<p>Check: - Local server is running - Correct port specified - Server is accessible</p>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#inspector-not-working","level":3,"title":"Inspector Not Working","text":"<ul> <li>Check firewall rules for inspector port</li> <li>Try <code>--inspector-port</code> with a different port</li> <li>Verify no other service is using the port</li> </ul>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Inspector - Debug your tunnels</li> <li>Configuration - Set up tunnel configs</li> <li>Authentication - Secure your tunnels</li> </ul>","path":["01 user","Tunnels"],"tags":[]},{"location":"01-user/tunnels/basic-auth/","level":1,"title":"Basic Authentication","text":"<p>Protect your tunnels with username and password authentication using basic auth. This ensures only authorized users can access your tunneled services.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#what-is-basic-authentication","level":2,"title":"What is Basic Authentication?","text":"<p>Basic authentication adds a username/password requirement to your tunnel. When someone tries to access your tunnel URL, they're prompted for credentials before the request is forwarded to your local server.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#how-it-works","level":3,"title":"How It Works","text":"<pre><code>User Request → Sellia Server → Check Credentials → If Valid: Forward to Local Server\n                                                       → If Invalid: Return 401 Unauthorized\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#enabling-basic-authentication","level":2,"title":"Enabling Basic Authentication","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#command-line","level":3,"title":"Command Line","text":"<p>Use the <code>--auth</code> flag when creating a tunnel:</p> <pre><code>sellia http 8080 --auth username:password\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#example-protected-webhook-endpoint","level":3,"title":"Example: Protected Webhook Endpoint","text":"<pre><code># Start your webhook handler\nnode webhook-server.js &amp;\n\n# Create protected tunnel\nsellia http 3000 --subdomain webhooks --auth admin:webhook-secret\n</code></pre> <p>Now anyone accessing your tunnel URL must provide credentials. The URL depends on your server configuration.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#authentication-flow","level":2,"title":"Authentication Flow","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#1-client-access-attempt","level":3,"title":"1. Client Access Attempt","text":"<p>When a client (browser, curl, API client) tries to access the tunnel:</p> <pre><code>curl https://webhooks.sellia.me\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#2-server-challenges","level":3,"title":"2. Server Challenges","text":"<p>Sellia responds with <code>401 Unauthorized</code> and a <code>WWW-Authenticate</code> header:</p> <pre><code>HTTP/1.1 401 Unauthorized\nWWW-Authenticate: Basic realm=\"Sellia Tunnel\"\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#3-client-provides-credentials","level":3,"title":"3. Client Provides Credentials","text":"<p>The client resends the request with credentials:</p> <pre><code>curl -u admin:webhook-secret https://webhooks.sellia.me\n</code></pre> <p>Or in a browser, a dialog prompts for username and password.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#4-request-forwarded","level":3,"title":"4. Request Forwarded","text":"<p>If credentials match, the request is forwarded to your local server.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#using-basic-auth-with-different-clients","level":2,"title":"Using Basic Auth with Different Clients","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#browser-access","level":3,"title":"Browser Access","text":"<p>When accessing via browser: 1. Navigate to the tunnel URL 2. Browser shows authentication dialog 3. Enter username and password 4. Browser caches credentials for the session</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#curl","level":3,"title":"cURL","text":"<pre><code># With -u flag\ncurl -u username:password https://tunnel.sellia.me\n\n# Or include in URL (not recommended for production)\ncurl https://username:password@tunnel.sellia.me\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#wget","level":3,"title":"wget","text":"<pre><code>wget --user=username --password=password https://tunnel.sellia.me\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#javascript-fetch-api","level":3,"title":"JavaScript (Fetch API)","text":"<pre><code>fetch('https://tunnel.sellia.me', {\n  headers: {\n    'Authorization': 'Basic ' + btoa('username:password')\n  }\n})\n.then(response =&gt; response.json())\n.then(data =&gt; console.log(data));\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#javascript-axios","level":3,"title":"JavaScript (Axios)","text":"<pre><code>axios.get('https://tunnel.sellia.me', {\n  auth: {\n    username: 'username',\n    password: 'password'\n  }\n})\n.then(response =&gt; console.log(response.data));\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#python-requests","level":3,"title":"Python (requests)","text":"<pre><code>import requests\n\nresponse = requests.get('https://tunnel.sellia.me', auth=('username', 'password'))\nprint(response.text)\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#python-urllib","level":3,"title":"Python (urllib)","text":"<pre><code>import urllib.request\nimport base64\n\nurl = 'https://tunnel.sellia.me'\ncredentials = base64.b64encode(b'username:password').decode('utf-8')\n\nrequest = urllib.request.Request(url)\nrequest.add_header('Authorization', f'Basic {credentials}')\n\nwith urllib.request.urlopen(request) as response:\n    print(response.read().decode())\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#nodejs-https","level":3,"title":"Node.js (https)","text":"<pre><code>const https = require('https');\nconst auth = 'Basic ' + Buffer.from('username:password').toString('base64');\n\nconst options = {\n  hostname: 'tunnel.sellia.me',\n  path: '/',\n  headers: { 'Authorization': auth }\n};\n\nhttps.get(options, (res) =&gt; {\n  let data = '';\n  res.on('data', (chunk) =&gt; data += chunk);\n  res.on('end', () =&gt; console.log(data));\n});\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#configuration-file","level":2,"title":"Configuration File","text":"<p>Set basic auth in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    auth: admin:secret123\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n    auth: apiuser:apipass\n\n  public:\n    port: 5000\n    subdomain: public-site\n    # No auth - public tunnel\n</code></pre> <p>Start tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#1-use-strong-passwords","level":3,"title":"1. Use Strong Passwords","text":"<p>Generate secure random passwords:</p> <pre><code># Generate 32-character random password\nopenssl rand -base64 32\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#2-unique-credentials-per-tunnel","level":3,"title":"2. Unique Credentials per Tunnel","text":"<p>Don't reuse credentials:</p> <pre><code>tunnels:\n  staging:\n    port: 3000\n    auth: staging-user:$(openssl rand -base64 32)\n\n  production:\n    port: 3001\n    auth: prod-user:$(openssl rand -base64 32)\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#3-environment-variables","level":3,"title":"3. Environment Variables","text":"<p>Store credentials in environment variables, not in config files:</p> <pre><code># .env\nSELLIA_WEB_AUTH=user:pass\nSELLIA_API_AUTH=apiuser:apipass\n</code></pre> <pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n    auth: ${SELLIA_WEB_AUTH}\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#4-rotate-credentials-regularly","level":3,"title":"4. Rotate Credentials Regularly","text":"<p>Change passwords periodically, especially after: - Team member changes - Suspected unauthorized access - Regular security cycles</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#5-use-https","level":3,"title":"5. Use HTTPS","text":"<p>Always use a tunnel server with HTTPS enabled for production to prevent credentials from being sent in plaintext:</p> <pre><code># The server should be configured with --https flag\nsellia server --https --domain yourdomain.com\n\n# Client will automatically use HTTPS URLs\nsellia http 3000 --auth user:pass --server https://yourdomain.com\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#6-log-access-attempts","level":3,"title":"6. Log Access Attempts","text":"<p>Monitor your server logs for authentication failures:</p> <pre><code># Check for failed auth attempts\ngrep \"401\" /var/log/sellia/access.log\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#use-cases","level":2,"title":"Use Cases","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#1-protected-webhook-testing","level":3,"title":"1. Protected Webhook Testing","text":"<p>Test webhooks without exposing them publicly:</p> <pre><code>sellia http 3000 --subdomain stripe-webhooks --auth stripe-test:secret-key\n</code></pre> <p>Only you can access the webhook endpoint for testing.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#2-private-api-development","level":3,"title":"2. Private API Development","text":"<p>Work on private APIs securely:</p> <pre><code>sellia http 4000 --subdomain private-api --auth dev-team:team-secret\n</code></pre> <p>Share credentials only with authorized team members.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#3-client-demos-with-access-control","level":3,"title":"3. Client Demos with Access Control","text":"<p>Give clients access to demos with control:</p> <pre><code>sellia http 5000 --subdomain demo-acme --auth acme-client:demo-pass\n</code></pre> <p>Provide unique credentials for each client.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#4-staging-environment-protection","level":3,"title":"4. Staging Environment Protection","text":"<p>Protect staging environments:</p> <pre><code>sellia http 3000 --subdomain staging-app --auth staging:staging-pass\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#5-internal-tools-access","level":3,"title":"5. Internal Tools Access","text":"<p>Securely access internal tools remotely:</p> <pre><code>sellia http 8080 --subdomain admin-tools --auth admin:admin-pass\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#401-unauthorized-error","level":3,"title":"\"401 Unauthorized\" Error","text":"<p>Check that: 1. Username and password are correct 2. No extra spaces in credentials: <code>user:pass</code> (not <code>user: pass</code>) 3. Credentials are properly URL-encoded if in URL</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#credentials-not-working","level":3,"title":"Credentials Not Working","text":"<p>Verify the auth string format:</p> <pre><code># Correct\nsellia http 8080 --auth user:pass\n\n# Incorrect (missing colon)\nsellia http 8080 --auth userpass\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#browser-keeps-prompting","level":3,"title":"Browser Keeps Prompting","text":"<p>If browser repeatedly prompts for credentials: 1. Check username/password are correct 2. Try in incognito/private mode 3. Clear browser cache for that site</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#api-clients-cant-authenticate","level":3,"title":"API Clients Can't Authenticate","text":"<p>Ensure credentials are base64-encoded in Authorization header:</p> <pre><code>// Correct\n'Authorization': 'Basic ' + btoa('user:pass')\n\n// Incorrect\n'Authorization': 'user:pass'\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#limitations","level":2,"title":"Limitations","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#security-considerations","level":3,"title":"Security Considerations","text":"<p>Basic authentication: - Sends credentials with every request (base64 encoded) - Should only be used over HTTPS - Credentials can be intercepted if not using TLS - No built-in session management</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#when-not-to-use-basic-auth","level":3,"title":"When Not to Use Basic Auth","text":"<p>Consider alternatives for: - High-security applications (use OAuth2, JWT) - Complex permission systems (use application-level auth) - Public APIs (use API keys instead) - Mobile apps (use token-based auth)</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#alternatives","level":2,"title":"Alternatives","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#application-level-authentication","level":3,"title":"Application-Level Authentication","text":"<p>Instead of tunnel auth, implement auth in your application:</p> <pre><code>// Express middleware\napp.use((req, res, next) =&gt; {\n  const auth = req.headers['authorization'];\n  if (!auth || !validateAuth(auth)) {\n    return res.status(401).send('Unauthorized');\n  }\n  next();\n});\n</code></pre> <p>This gives you more control but requires application changes.</p>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#token-based-authentication","level":3,"title":"Token-Based Authentication","text":"<p>Use API tokens or JWT:</p> <pre><code>const token = 'your-api-token';\nfetch('https://tunnel.sellia.me', {\n  headers: { 'X-API-Token': token }\n});\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#ip-whitelisting","level":3,"title":"IP Whitelisting","text":"<p>Restrict access by IP at the server level (configure in reverse proxy):</p> <pre><code># Nginx example\nallow 1.2.3.4;\ndeny all;\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#advanced-examples","level":2,"title":"Advanced Examples","text":"","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#example-1-multiple-authenticated-environments","level":3,"title":"Example 1: Multiple Authenticated Environments","text":"<pre><code>tunnels:\n  dev:\n    port: 3000\n    subdomain: dev-app\n    auth: dev-team:dev-pass\n\n  staging:\n    port: 3001\n    subdomain: staging-app\n    auth: qa-team:qa-pass\n\n  prod-mirror:\n    port: 3002\n    subdomain: prod-mirror\n    auth: admins:admin-pass\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#example-2-webhook-testing-with-services","level":3,"title":"Example 2: Webhook Testing with Services","text":"<pre><code># Test webhooks from multiple services\ntunnels:\n  stripe:\n    port: 3000\n    subdomain: stripe-test\n    auth: stripe-test:${STRIPE_TEST_TOKEN}\n\n  github:\n    port: 3001\n    subdomain: github-test\n    auth: github-test:${GITHUB_TEST_TOKEN}\n\n  slack:\n    port: 3002\n    subdomain: slack-test\n    auth: slack-test:${SLACK_TEST_TOKEN}\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#example-3-client-specific-credentials","level":3,"title":"Example 3: Client-Specific Credentials","text":"<pre><code># Generate unique credentials per client\nfor client in acme corp startup; do\n  password=$(openssl rand -base64 16)\n  echo \"$client:$password\" &gt;&gt; clients.txt\ndone\n\n# Use in config or CLI\nwhile read client pass; do\n  sellia http 3000 --subdomain demo-$client --auth $client:$pass &amp;\ndone &lt; clients.txt\n</code></pre>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Subdomain Management - Custom URLs</li> <li>HTTP Tunnels - Basic tunnel usage</li> <li>Configuration File - Persistent config</li> <li>Deployment - Production deployment</li> </ul>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/basic-auth/#security-checklist","level":2,"title":"Security Checklist","text":"<p>Before using basic auth in production:</p> <ul> <li> Using HTTPS for all tunnels</li> <li> Strong, unique passwords (16+ characters)</li> <li> Credentials stored in environment variables</li> <li> Regular credential rotation</li> <li> Monitoring authentication logs</li> <li> Team knows security procedures</li> <li> Alternative auth methods considered</li> <li> Documented credential recovery process</li> </ul>","path":["01 user","Tunnels","Basic Authentication"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/","level":1,"title":"HTTP Tunnels","text":"<p>HTTP tunnels are the primary way to expose local web servers to the internet through Sellia. This guide covers the basics of creating and managing HTTP tunnels.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#what-are-http-tunnels","level":2,"title":"What are HTTP Tunnels?","text":"<p>HTTP tunnels create a secure pathway from a public URL to your local development server. When requests come to your tunnel URL, Sellia forwards them to your local machine and returns the response to the requester.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#how-it-works","level":3,"title":"How It Works","text":"<pre><code>Internet Request → Sellia Server → Your Local Sellia Client → Your Local Server → Response → Back Through Tunnel\n</code></pre> <ol> <li>You create a tunnel from port 8080 on your machine</li> <li>Sellia provides a public URL like <code>http://abc123.domain.com</code></li> <li>When someone requests that URL, Sellia forwards the request to your local port 8080</li> <li>Your application responds, and Sellia sends it back</li> </ol>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#creating-your-first-http-tunnel","level":2,"title":"Creating Your First HTTP Tunnel","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#basic-tunnel","level":3,"title":"Basic Tunnel","text":"<p>The simplest tunnel forwards a local port to a random subdomain:</p> <pre><code>sellia http 8080\n</code></pre> <p>This will output: <pre><code>Sellia v0.x.x\nForwarding to localhost:8080\n\nPublic URL: http://xyz789.your-domain.com:3000 -&gt; localhost:8080\n\nInspector:  http://127.0.0.1:4040\n\nPress Ctrl+C to stop\n</code></pre></p> <p>Your local server on port 8080 is now accessible via the provided URL.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#tunnel-to-specific-server","level":3,"title":"Tunnel to Specific Server","text":"<p>By default, Sellia connects to the server configured in your config file (or <code>https://sellia.me</code>). To specify a different server:</p> <pre><code>sellia http 8080 --server ws://localhost:3000\n\n# Or for a remote server with HTTPS\nsellia http 8080 --server https://your-server.com\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#custom-local-host","level":3,"title":"Custom Local Host","text":"<p>If your local server is running on a different host (not localhost):</p> <pre><code>sellia http 8080 --host 192.168.1.100\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#common-use-cases","level":2,"title":"Common Use Cases","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#webhook-development","level":3,"title":"Webhook Development","text":"<p>Test webhooks from Stripe, GitHub, Slack, etc.:</p> <pre><code># Start your webhook handler\npython webhook_server.py &amp;\n\n# Create tunnel\nsellia http 5000 --subdomain webhooks\n\n# Use the URL in your webhook configuration\n# The URL format depends on your server configuration\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#api-development","level":3,"title":"API Development","text":"<p>Test mobile apps or frontend against a local API:</p> <pre><code># Start your API\nrails server -p 4000 &amp;\n\n# Create tunnel\nsellia http 4000 --subdomain api-dev\n\n# Your mobile app can now access the tunnel URL\n# URL format depends on server configuration\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#frontend-development","level":3,"title":"Frontend Development","text":"<p>Share your frontend work with clients or team members:</p> <pre><code># Start your dev server\nnpm run dev &amp;\n\n# Create tunnel\nsellia http 5173 --subdomain preview\n\n# Share the tunnel URL for review\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#microservices-testing","level":3,"title":"Microservices Testing","text":"<p>Test multiple services at once:</p> <pre><code># Terminal 1 - Service A\nsellia http 8001 --subdomain service-a &amp;\n\n# Terminal 2 - Service B\nsellia http 8002 --subdomain service-b &amp;\n\n# Terminal 3 - Service C\nsellia http 8003 --subdomain service-c &amp;\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#request-and-response-behavior","level":2,"title":"Request and Response Behavior","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#preserving-headers","level":3,"title":"Preserving Headers","text":"<p>Sellia preserves most HTTP headers through the tunnel, including: - <code>Content-Type</code> - <code>User-Agent</code> - <code>Authorization</code> - Custom headers</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#websocket-support","level":3,"title":"WebSocket Support","text":"<p>HTTP tunnels automatically support WebSocket connections. The tunnel upgrades connections seamlessly:</p> <pre><code># Your WebSocket server on port 8080\nsellia http 8080 --subdomain ws-server\n\n# Clients can connect to wss://ws-server.your-domain.com:3000\n</code></pre> <p>See WebSocket Support for more details.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#httpstls","level":3,"title":"HTTPS/TLS","text":"<p>The tunnel itself is encrypted using WebSocket over TLS. Your application can use HTTP or HTTPS locally - Sellia handles the secure connection to the server.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#connection-management","level":2,"title":"Connection Management","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#automatic-reconnection","level":3,"title":"Automatic Reconnection","text":"<p>Sellia automatically reconnects to the tunnel server if the connection drops, using linear backoff:</p> <ul> <li>Initial retry: 3 seconds</li> <li>Maximum retry: 30 seconds (after 10 attempts)</li> <li>Max attempts: 10</li> <li>Delay formula: <code>3s × attempt_number</code> (3s, 6s, 9s, 12s...)</li> </ul> <p>You'll see log messages like: <pre><code>[Sellia] Connection lost, reconnecting in 1s...\n[Sellia] Reconnected successfully\n</code></pre></p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#manual-reconnection","level":3,"title":"Manual Reconnection","text":"<p>If you need to force a reconnection, press <code>Ctrl+C</code> to stop the tunnel and restart it.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#connection-health","level":3,"title":"Connection Health","text":"<p>Monitor your connection status:</p> <pre><code># Watch the tunnel logs\nsellia http 8080 --server https://sellia.me\n</code></pre> <p>Healthy connections show: <pre><code>[Sellia] Tunnel established at: http://xyz789.your-domain.com:3000\n[Sellia] Connection active\n</code></pre></p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#url-formats","level":2,"title":"URL Formats","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#http-urls","level":3,"title":"HTTP URLs","text":"<pre><code>sellia http 8080 --server http://localhost:3000\n# Output: http://xyz789.localhost:3000\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#https-urls","level":3,"title":"HTTPS URLs","text":"<p>When using a server with HTTPS:</p> <pre><code>sellia http 8080 --server https://sellia.me\n# Output: https://xyz789.sellia.me\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#port-specification","level":3,"title":"Port Specification","text":"<p>The tunnel URL port depends on the server configuration: - Default: Port 3000 or 443 (for HTTPS) - Custom: Whatever port your server uses</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#tunnel-options","level":2,"title":"Tunnel Options","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#subdomain","level":3,"title":"Subdomain","text":"<p>Request a specific subdomain (if available):</p> <pre><code>sellia http 8080 --subdomain myapp\n# Output: http://myapp.your-domain.com:3000 (or https:// with --https server)\n</code></pre> <p>See Subdomain Management for details.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#basic-authentication","level":3,"title":"Basic Authentication","text":"<p>Protect your tunnel with username/password:</p> <pre><code>sellia http 8080 --auth admin:secret123\n</code></pre> <p>See Basic Auth for details.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#inspector-control","level":3,"title":"Inspector Control","text":"<p>Enable or disable the request inspector:</p> <pre><code># Enable inspector (default)\nsellia http 8080\n\n# Disable inspector\nsellia http 8080 --no-inspector\n\n# Custom inspector port\nsellia http 8080 --inspector-port 5000\n\n# Open inspector in browser\nsellia http 8080 --open\n</code></pre> <p>See Request Inspector for details.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#bandwidth","level":3,"title":"Bandwidth","text":"<p>Tunnel speed depends on: - Your local internet upload speed - Server bandwidth - Distance between you and the server - Number of concurrent connections</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#latency","level":3,"title":"Latency","text":"<p>Typical tunnel latency: - Same server: 5-15ms - Different regions: 50-200ms - International: 200-500ms</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#concurrent-connections","level":3,"title":"Concurrent Connections","text":"<p>Sellia handles multiple concurrent connections efficiently. For high-traffic scenarios: - Use a server close to your users - Enable server-side caching if applicable - Monitor performance using the inspector</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#connection-refused","level":3,"title":"\"Connection Refused\"","text":"<p>Your local server isn't running:</p> <pre><code># Check if port is in use\nlsof -i :8080\n\n# Start your server\npython -m http.server 8080\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#tunnel-not-accessible","level":3,"title":"Tunnel Not Accessible","text":"<ol> <li>Verify the tunnel is running</li> <li>Check the tunnel URL is correct</li> <li>Ensure your local server is responding</li> <li>Check firewall settings</li> </ol>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#slow-response-times","level":3,"title":"Slow Response Times","text":"<ol> <li>Check your internet connection</li> <li>Verify server location (use a closer server)</li> <li>Check if your local server is slow</li> <li>Monitor using the inspector</li> </ol>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#intermittent-connections","level":3,"title":"Intermittent Connections","text":"<ol> <li>Check your network stability</li> <li>Verify server uptime</li> <li>Check for rate limiting</li> <li>Review server logs</li> </ol>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#1-use-meaningful-subdomains","level":3,"title":"1. Use Meaningful Subdomains","text":"<p>Choose subdomains that identify your project:</p> <pre><code># Good\nsellia http 8080 --subdomain acme-webhooks\nsellia http 8080 --subdomain feature-auth-test\n\n# Avoid\nsellia http 8080 --subdomain test\nsellia http 8080 --subdomain temp\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#2-protect-sensitive-tunnels","level":3,"title":"2. Protect Sensitive Tunnels","text":"<p>Use basic authentication for sensitive applications:</p> <pre><code>sellia http 8080 --auth user:secure-password\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#3-monitor-requests","level":3,"title":"3. Monitor Requests","text":"<p>Use the inspector to debug issues:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#4-clean-up","level":3,"title":"4. Clean Up","text":"<p>Stop tunnels when not needed to free server resources:</p> <pre><code># Press Ctrl+C to stop the tunnel\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#5-use-configuration-files","level":3,"title":"5. Use Configuration Files","text":"<p>For persistent setups, use a configuration file:</p> <pre><code># sellia.yml\nserver: https://sellia.me\n\ntunnels:\n  web:\n    port: 8080\n    subdomain: myapp\n  api:\n    port: 4000\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre> <p>Start with:</p> <pre><code>sellia start\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>WebSocket Support - Real-time connections</li> <li>Basic Authentication - Secure your tunnels</li> <li>Subdomain Management - Custom URLs</li> <li>Request Inspector - Debug requests</li> <li>Multiple Tunnels - Manage several tunnels</li> </ul>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#examples","level":2,"title":"Examples","text":"","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#example-1-development-workflow","level":3,"title":"Example 1: Development Workflow","text":"<pre><code># Terminal 1: Start your app\nnpm run dev\n\n# Terminal 2: Create tunnel\nsellia http 5173 --subdomain dev-$(git rev-parse --short HEAD) --open\n\n# Share the URL with your team\n# Output: https://dev-abc1234.sellia.me\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#example-2-testing-multiple-environments","level":3,"title":"Example 2: Testing Multiple Environments","text":"<pre><code># Staging\nsellia http 3000 --subdomain myapp-staging &amp;\n\n# Production (local)\nsellia http 3000 --subdomain myapp-prod &amp;\n</code></pre>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/http-tunnels/#example-3-api-and-frontend","level":3,"title":"Example 3: API and Frontend","text":"<pre><code># API tunnel\nsellia http 4000 --subdomain api &amp;\n\n# Frontend tunnel\nsellia http 5173 --subdomain app &amp;\n</code></pre> <p>Now your frontend at <code>https://app.sellia.me</code> can talk to your API at <code>https://api.sellia.me</code>.</p>","path":["01 user","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"01-user/tunnels/path-routing/","level":1,"title":"Path-Based Routing","text":"<p>Path-based routing is a Tier 2 feature that allows you to route multiple paths from a single tunnel URL to different local ports. This is useful for serving multiple services from a single subdomain.</p>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#overview","level":2,"title":"Overview","text":"<p>Path-based routing allows you to route multiple paths from a single tunnel URL to different local ports. This is useful for serving multiple services from a single subdomain.</p> <p>Important: This feature is only available via configuration file (<code>sellia.yml</code>), not via command-line flags.</p> <p>Instead of creating multiple tunnels (one for each service), you can define routes that forward requests based on the request path. For example:</p> <ul> <li><code>https://myapp.sellia.me/api</code> -&gt; localhost:8080</li> <li><code>https://myapp.sellia.me/web</code> -&gt; localhost:3000</li> <li><code>https://myapp.sellia.me/*</code> -&gt; localhost:3000 (fallback)</li> </ul>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#how-it-works","level":2,"title":"How It Works","text":"<p>The router matches paths in the order defined in your configuration:</p> <ol> <li>Exact matches: <code>/api</code> matches only <code>/api</code></li> <li>Prefix matches: <code>/api/*</code> matches <code>/api</code>, <code>/api/users</code>, <code>/api/v1/resources</code>, etc.</li> <li>Glob patterns: <code>/static/*</code> matches any path starting with <code>/static/</code></li> <li>Wildcard fallback: <code>/*</code> matches everything (usually defined last as a catch-all)</li> </ol>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#configuration","level":2,"title":"Configuration","text":"","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#command-line","level":3,"title":"Command Line","text":"<p>Note: Path routing is only available via configuration file, not command-line flags.</p> <p>To use path routing, define routes in <code>sellia.yml</code>:</p>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#config-file","level":3,"title":"Config File","text":"<p>Create a <code>sellia.yml</code> with route definitions:</p> <pre><code>tunnels:\n  myapp:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 8080\n        host: localhost\n      - path: /admin\n        port: 9000\n      - path: /static/*\n        port: 3001\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#examples","level":2,"title":"Examples","text":"","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#multi-service-application","level":3,"title":"Multi-Service Application","text":"<p>Route API and frontend from a single URL:</p> <pre><code>tunnels:\n  fullstack:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 8080  # Backend API\n      - path: /graphql\n        port: 8080  # GraphQL endpoint\n      - path: /*\n        port: 3000  # Frontend (fallback)\n</code></pre> <p>Result: - <code>https://myapp.sellia.me/api/users</code> -&gt; localhost:8080 - <code>https://myapp.sellia.me/graphql</code> -&gt; localhost:8080 - <code>https://myapp.sellia.me/</code> -&gt; localhost:3000</p>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#microservices-architecture","level":3,"title":"Microservices Architecture","text":"<p>Route to multiple microservices:</p> <pre><code>tunnels:\n  gateway:\n    port: 3000\n    subdomain: gateway\n    routes:\n      - path: /users\n        port: 8001\n      - path: /orders\n        port: 8002\n      - path: /payments\n        port: 8003\n      - path: /auth\n        port: 8004\n      - path: /*\n        port: 3000\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#static-assets-server","level":3,"title":"Static Assets Server","text":"<p>Offload static files to a dedicated server:</p> <pre><code>tunnels:\n  app:\n    port: 3000\n    subdomain: app\n    routes:\n      - path: /static/*\n        port: 3001  # nginx or CDN\n      - path: /uploads/*\n        port: 3001\n      - path: /*\n        port: 3000  # Application server\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#pattern-matching","level":2,"title":"Pattern Matching","text":"","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#exact-match","level":3,"title":"Exact Match","text":"<pre><code>routes:\n  - path: /health\n    port: 9090\n</code></pre> <p>Matches only: <code>https://myapp.sellia.me/health</code></p>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#prefix-match","level":3,"title":"Prefix Match","text":"<pre><code>routes:\n  - path: /api/*\n  ```\nMatches:\n- `https://myapp.sellia.me/api`\n- `https://myapp.sellia.me/api/users`\n- `https://myapp.sellia.me/api/v1/resources`\n\n### Wildcard (Catch-All)\n\n```yaml\nroutes:\n  - path: /*\n    port: 3000\n</code></pre> <p>Matches all paths not matched by previous routes.</p>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#advanced-usage","level":2,"title":"Advanced Usage","text":"","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#custom-host-per-route","level":3,"title":"Custom Host per Route","text":"<p>Route to different hosts:</p> <pre><code>tunnels:\n  multi-host:\n    port: 3000\n    subdomain: app\n    routes:\n      - path: /api\n        port: 8080\n        host: api-server.local  # Custom host\n      - path: /admin\n        port: 9000\n        host: admin.local\n      - path: /*\n        port: 3000\n        host: localhost  # Default\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#path-based-microfrontends","level":3,"title":"Path-Based Microfrontends","text":"<pre><code>tunnels:\n  microfrontends:\n    port: 3000\n    subdomain: app\n    routes:\n      - path: /dashboard\n        port: 3001  # Dashboard app\n      - path: /settings\n        port: 3002  # Settings app\n      - path: /billing\n        port: 3003  # Billing app\n      - path: /*\n        port: 3000  # Shell app\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#route-order-matters","level":3,"title":"Route Order Matters","text":"<p>Define more specific routes before general ones:</p> <pre><code>routes:\n  - path: /api/v2\n    port: 8081  # Must be first\n  - path: /api/*\n    port: 8080  # Catches everything else under /api\n  - path: /*\n    port: 3000  # Catch-all fallback\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#use-fallback-for-root","level":3,"title":"Use Fallback for Root","text":"<p>Always define a catch-all route for unmatched paths:</p> <pre><code>routes:\n  - path: /api\n    port: 8080\n  - path: /admin\n    port: 9000\n  - path: /*\n    port: 3000  # Default fallback\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#test-your-routes","level":3,"title":"Test Your Routes","text":"<p>Use curl to verify routing:</p> <pre><code># Test API route\ncurl https://myapp.sellia.me/api/users\n\n# Test admin route\ncurl https://myapp.sellia.me/admin/settings\n\n# Test fallback\ncurl https://myapp.sellia.me/\n</code></pre>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#limitations","level":2,"title":"Limitations","text":"<ul> <li>Routes are evaluated in order (first match wins)</li> <li>Path matching is prefix-based with glob patterns (<code>/api/*</code> matches <code>/api</code> and anything under <code>/api</code>)</li> <li>No regex support</li> <li>WebSocket connections work with path routing</li> <li>Headers and query strings don't affect routing</li> <li>Only available via configuration file (not CLI flags)</li> <li>Routes match exact path or prefix pattern:</li> <li>Exact: <code>/api</code> matches only <code>/api</code></li> <li>Glob: <code>/api/*</code> matches <code>/api</code>, <code>/api/users</code>, <code>/api/v1/resources</code>, etc.</li> <li>If no routes match and no fallback port exists, returns 502 \"No route matched path\"</li> </ul>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#route-not-matching","level":3,"title":"Route Not Matching","text":"<p>If a route isn't working:</p> <ol> <li>Check the route order (specific routes first)</li> <li>Verify the path includes leading slash: <code>/api</code> not <code>api</code></li> <li>Check for trailing slashes (they matter): <code>/api/</code> != <code>/api</code></li> <li>Use the inspector to see which route matched</li> </ol>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#all-requests-go-to-fallback","level":3,"title":"All Requests Go to Fallback","text":"<p>This usually means:</p> <ol> <li>A catch-all (<code>/*</code>) is defined before specific routes</li> <li>Path doesn't match any pattern (check typos)</li> <li>Missing leading slash in path definition</li> </ol>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#websocket-issues","level":3,"title":"WebSocket Issues","text":"<p>WebSocket connections work with path routing, but ensure:</p> <ol> <li>The backend handles the WebSocket upgrade</li> <li>No HTTP/2 interference between proxy and backend</li> <li>Long-lived connection timeouts are configured</li> </ol>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/path-routing/#see-also","level":2,"title":"See Also","text":"<ul> <li>Configuration - Full config reference</li> <li>Inspector - Debug routing issues</li> <li>API Keys - Secure your tunnels</li> </ul>","path":["01 user","Tunnels","Path-Based Routing"],"tags":[]},{"location":"01-user/tunnels/subdomains/","level":1,"title":"Subdomain Management","text":"<p>Custom subdomains make your tunnel URLs memorable and professional. Instead of random subdomains like <code>abc123.sellia.me</code>, use meaningful names like <code>myapp.sellia.me</code> or <code>project-staging.sellia.me</code>.</p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#what-are-subdomains","level":2,"title":"What are Subdomains?","text":"<p>Sellia routes tunnels using subdomains. When you create a tunnel, you get:</p> <pre><code>&lt;SUBDOMAIN&gt;.&lt;DOMAIN&gt;.&lt;PORT&gt;\n</code></pre> <p>For example: <code>myapp.sellia.me</code> or <code>api-staging.localhost:3000</code></p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#default-behavior","level":3,"title":"Default Behavior","text":"<p>Without specifying a subdomain, Sellia assigns a random 8-character hex string:</p> <pre><code>sellia http 8080\n# Output: https://a1b2c3d4.your-domain.com\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#requesting-custom-subdomains","level":2,"title":"Requesting Custom Subdomains","text":"<p>Use the <code>--subdomain</code> flag to request a specific subdomain:</p> <pre><code>sellia http 8080 --subdomain myapp\n# Output: http://myapp.your-domain.com:3000 (or https://myapp.your-domain.com if server has --https)\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-requirements","level":3,"title":"Subdomain Requirements","text":"<p>Valid subdomains: - Length: 3-63 characters - Characters: Lowercase letters, numbers, hyphens - Format: Must start and end with letter or number - No: Spaces, special characters, or consecutive hyphens</p> <p>Examples: <pre><code>✅ myapp\n✅ api-v2\n✅ project123\n✅ test-environment\n\n❌ MyApp (uppercase)\n❡ api_v2 (underscores)\n❡ -test (starts with hyphen)\n❡ test- (ends with hyphen)\n❡ api--v2 (consecutive hyphens)\n</code></pre></p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-availability","level":2,"title":"Subdomain Availability","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#first-come-first-served","level":3,"title":"First-Come, First-Served","text":"<p>Subdomains are assigned on a first-come, first-served basis:</p> <pre><code># User 1 creates tunnel\nsellia http 8080 --subdomain myapp\n# Success: http://myapp.your-domain.com:3000\n\n# User 2 tries same subdomain\nsellia http 8080 --subdomain myapp\n# Error: Subdomain 'myapp' is not available\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#conflict-resolution","level":3,"title":"Conflict Resolution","text":"<p>If your requested subdomain is taken: 1. Sellia returns an error and closes the connection 2. Client will not reconnect (to prevent infinite loops) 3. Try a different subdomain or use a naming convention</p> <pre><code># Try variations\nsellia http 8080 --subdomain myapp-backup\nsellia http 8080 --subdomain myapp-v2\nsellia http 8080 --subdomain myapp-test\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#naming-strategies","level":2,"title":"Naming Strategies","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#1-project-based","level":3,"title":"1. Project-Based","text":"<p>Name subdomains after your project:</p> <pre><code>sellia http 3000 --subdomain blog-cms\nsellia http 4000 --subdomain blog-api\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#2-environment-based","level":3,"title":"2. Environment-Based","text":"<p>Include the environment:</p> <pre><code>sellia http 3000 --subdomain app-dev\nsellia http 3000 --subdomain app-staging\nsellia http 3000 --subdomain app-prod-like\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#3-feature-based","level":3,"title":"3. Feature-Based","text":"<p>Name after specific features:</p> <pre><code>sellia http 3000 --subdomain auth-service\nsellia http 4000 --subdomain payment-gateway\nsellia http 5000 --subdomain notification-system\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#4-user-based","level":3,"title":"4. User-Based","text":"<p>For personal tunnels:</p> <pre><code>sellia http 3000 --subdomain john-dev\nsellia http 3000 --subdomain sarah-test\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#5-branch-based","level":3,"title":"5. Branch-Based","text":"<p>For Git branch workflows:</p> <pre><code># Current git branch as subdomain\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nsellia http 3000 --subdomain \"app-$BRANCH\"\n\n# Or short commit hash\nHASH=$(git rev-parse --short HEAD)\nsellia http 3000 --subdomain \"app-$HASH\"\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#configuration-file","level":2,"title":"Configuration File","text":"<p>Define subdomains in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\n\ntunnels:\n  # Multiple services\n  web:\n    port: 3000\n    subdomain: myapp\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n\n  # Multiple environments\n  staging:\n    port: 3000\n    subdomain: app-staging\n\n  dev:\n    port: 3001\n    subdomain: app-dev\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#multiple-tunnels-with-subdomains","level":2,"title":"Multiple Tunnels with Subdomains","text":"<p>Run multiple tunnels simultaneously, each with its own subdomain:</p> <pre><code># Terminal 1\nsellia http 3000 --subdomain frontend --server https://sellia.me &amp;\n\n# Terminal 2\nsellia http 4000 --subdomain backend --server https://sellia.me &amp;\n\n# Terminal 3\nsellia http 5000 --subdatabase --server https://sellia.me &amp;\n</code></pre> <p>Now you have: - <code>https://frontend.sellia.me</code> → Frontend app - <code>https://backend.sellia.me</code> → API backend - <code>https://database.sellia.me</code> → Database interface</p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#wildcard-subdomains","level":2,"title":"Wildcard Subdomains","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#for-self-hosted-servers","level":3,"title":"For Self-Hosted Servers","text":"<p>When running your own server, configure DNS to accept all subdomains:</p> <pre><code>*.yourdomain.com  →  YOUR_SERVER_IP\n</code></pre> <p>Now any subdomain works: - <code>app1.yourdomain.com</code> - <code>app2.yourdomain.com</code> - <code>test-environment.yourdomain.com</code></p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#cloudflare-configuration","level":3,"title":"Cloudflare Configuration","text":"<p>For Cloudflare-hosted domains:</p> <ol> <li>Add domain to Cloudflare</li> <li>Go to DNS → Records</li> <li>Add CNAME record:</li> <li>Name: <code>*</code></li> <li>Target: <code>your-server.com</code></li> <li>Proxy: Enabled (orange cloud)</li> </ol>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#url-formats","level":2,"title":"URL Formats","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#http-urls","level":3,"title":"HTTP URLs","text":"<pre><code>sellia http 8080 --subdomain myapp --server http://localhost:3000\n# Output: http://myapp.localhost:3000\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#https-urls","level":3,"title":"HTTPS URLs","text":"<pre><code>sellia http 8080 --subdomain myapp --server https://sellia.me\n# Output: https://myapp.sellia.me\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#with-custom-ports","level":3,"title":"With Custom Ports","text":"<p>If your server uses a non-standard port:</p> <pre><code>sellia http 8080 --subdomain myapp --server https://sellia.me:8443\n# Output: https://myapp.sellia.me:8443\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-best-practices","level":2,"title":"Subdomain Best Practices","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#1-use-meaningful-names","level":3,"title":"1. Use Meaningful Names","text":"<p>Choose subdomains that identify the purpose:</p> <pre><code># Good\nsellia http 3000 --subdomain stripe-webhook-test\nsellia http 4000 --subdomain github-integration-dev\n\n# Less clear\nsellia http 3000 --subdomain test1\nsellia http 4000 --subdomain temp\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#2-consistent-naming-convention","level":3,"title":"2. Consistent Naming Convention","text":"<p>Use a consistent pattern:</p> <pre><code># Pattern: &lt;app&gt;-&lt;environment&gt;-&lt;type&gt;\nsellia http 3000 --subdomain shopify-staging-webhook\nsellia http 4000 --subdomain shopify-staging-api\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#3-include-environment","level":3,"title":"3. Include Environment","text":"<p>Always specify the environment:</p> <pre><code># Production-like\nsellia http 3000 --subdomain app-staging\nsellia http 3000 --subdomain app-dev\n\n# Avoid confusion\nsellia http 3000 --subdomain app  # Which environment?\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#4-avoid-reserved-words","level":3,"title":"4. Avoid Reserved Words","text":"<p>Some words might be reserved for system use:</p> <pre><code># Potentially problematic\nwww\nmail\nftp\nlocalhost\napi (if reserved for main API)\nadmin (if reserved)\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#5-use-hyphens-for-readability","level":3,"title":"5. Use Hyphens for Readability","text":"<p>Separate words with hyphens:</p> <pre><code># Good\nmyapp-staging-api\nwebhook-tester-v2\n\n# Harder to read\nmyappstagingapi\nwebhooktesterv2\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#6-keep-it-short","level":3,"title":"6. Keep It Short","text":"<p>Shorter subdomains are easier to remember:</p> <pre><code># Good\napp-dev\napi-test\n\n# Long\napplication-development-environment\napi-testing-server\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#dynamic-subdomains","level":2,"title":"Dynamic Subdomains","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#based-on-git-branch","level":3,"title":"Based on Git Branch","text":"<pre><code># Automatically use current branch\nBRANCH=$(git rev-parse --abbrev-ref HEAD | sed 's/sl_/g/' | tr '/' '-')\nsellia http 3000 --subdomain \"app-$BRANCH\"\n\n# Examples:\n# feature/new-ui → app-feature-new-ui\n# bugfix/login-issue → app-bugfix-login-issue\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#based-on-environment-variable","level":3,"title":"Based on Environment Variable","text":"<pre><code># Use environment-specific subdomain\nsellia http 3000 --subdomain \"app-${RAILS_ENV:-development}\"\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#based-on-timestamp","level":3,"title":"Based on Timestamp","text":"<pre><code># Include date or timestamp\nDATE=$(date +%Y%m%d)\nsellia http 3000 --subdomain \"deploy-$DATE\"\n# Output: deploy-20241230\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-validation","level":2,"title":"Subdomain Validation","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#check-subdomain-availability","level":3,"title":"Check Subdomain Availability","text":"<p>Before creating a tunnel, check if the subdomain is available:</p> <pre><code># Try to access the subdomain\ncurl -I https://myapp.sellia.me\n\n# If 404 or connection refused, likely available\n# If 200 or similar, subdomain is in use\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#dns-verification","level":3,"title":"DNS Verification","text":"<p>Verify DNS is configured correctly:</p> <pre><code>dig myapp.yourdomain.com\nnslookup myapp.yourdomain.com\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-already-taken","level":3,"title":"Subdomain Already Taken","text":"<p>Error: \"Subdomain already in use\"</p> <p>Solutions: 1. Use a different subdomain 2. Add a suffix: <code>-v2</code>, <code>-backup</code>, <code>-alt</code> 3. Include your name/initials</p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-not-resolving","level":3,"title":"Subdomain Not Resolving","text":"<p>If your subdomain doesn't work:</p> <ol> <li> <p>Verify DNS is configured:    <pre><code>dig yourdomain.com\ndig *.yourdomain.com\n</code></pre></p> </li> <li> <p>Check server is running:    <pre><code>sellia-server --domain yourdomain.com\n</code></pre></p> </li> <li> <p>Ensure wildcard DNS is set up</p> </li> </ol>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#mixed-case-issues","level":3,"title":"Mixed Case Issues","text":"<p>Subdomains are case-insensitive but should be lowercase:</p> <pre><code># Sellia converts to lowercase\nsellia http 3000 --subdomain MyApp\n# Actually creates: myapp.sellia.me\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#examples","level":2,"title":"Examples","text":"","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#example-1-full-stack-application","level":3,"title":"Example 1: Full-Stack Application","text":"<pre><code>tunnels:\n  # Frontend\n  web:\n    port: 3000\n    subdomain: shopify-staging-web\n\n  # API\n  api:\n    port: 4000\n    subdomain: shopify-staging-api\n\n  # Webhook receiver\n  webhooks:\n    port: 5000\n    subdomain: shopify-staging-webhooks\n    auth: webhook-tester:secret\n</code></pre> <p>Access: - <code>https://shopify-staging-web.sellia.me</code> - Frontend - <code>https://shopify-staging-api.sellia.me</code> - API - <code>https://shopify-staging-webhooks.sellia.me</code> - Webhooks</p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#example-2-developer-workflow","level":3,"title":"Example 2: Developer Workflow","text":"<pre><code># Automatically use branch name\ncreate_tunnel() {\n  BRANCH=$(git rev-parse --abbrev-ref HEAD)\n  SAFE_NAME=$(echo \"$BRANCH\" | tr '/' '-' | tr '[:upper:]' '[:lower:]')\n  sellia http 3000 --subdomain \"app-$SAFE_NAME\" --server https://sellia.me\n}\n\n# Usage\ngit checkout feature/new-dashboard\ncreate_tunnel\n# Creates: app-feature-new-dashboard.sellia.me\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#example-3-client-demos","level":3,"title":"Example 3: Client Demos","text":"<pre><code># Unique subdomain per client\nCLIENTS=(\"acme\" \"globex\" \"initech\")\n\nfor client in \"${CLIENTS[@]}\"; do\n  sellia http 3000 \\\n    --subdomain \"demo-$client\" \\\n    --auth \"$client-client:$(openssl rand -base64 16)\" \\\n    --server https://sellia.me &amp;\ndone\n</code></pre> <p>Creates: - <code>demo-acme.sellia.me</code> (with client-specific auth) - <code>demo-globex.sellia.me</code> - <code>demo-initech.sellia.me</code></p>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#example-4-microservices","level":3,"title":"Example 4: Microservices","text":"<pre><code># Microservice architecture\ntunnels:\n  # Services\n  user-service:\n    port: 8001\n    subdomain: svc-users\n\n  auth-service:\n    port: 8002\n    subdomain: svc-auth\n\n  payment-service:\n    port: 8003\n    subdomain: svc-payments\n\n  notification-service:\n    port: 8004\n    subdomain: svc-notifications\n\n  # Frontends\n  web-app:\n    port: 3000\n    subdomain: app-web\n\n  admin-app:\n    port: 3001\n    subdomain: app-admin\n</code></pre>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>HTTP Tunnels - Basic tunnel usage</li> <li>Basic Authentication - Secure tunnels</li> <li>Configuration File - Multiple tunnels</li> <li>Self-Hosting - Your own server</li> </ul>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#quick-reference","level":2,"title":"Quick Reference","text":"Command Description <code>sellia http 8080</code> Random subdomain <code>sellia http 8080 --subdomain myapp</code> Custom subdomain <code>--subdomain app-dev</code> Environment-specific <code>--subdomain svc-name</code> Service naming <code>--subdomain demo-client</code> Client-specific","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/subdomains/#subdomain-checklist","level":2,"title":"Subdomain Checklist","text":"<p>Before creating a production tunnel:</p> <ul> <li> Subdomain is meaningful and descriptive</li> <li> Follows naming convention</li> <li> Includes environment identifier</li> <li> Checked for availability</li> <li> DNS is properly configured</li> <li> Documented in team wiki</li> <li> Added to monitoring/config</li> <li> Considered future conflicts</li> </ul>","path":["01 user","Tunnels","Subdomain Management"],"tags":[]},{"location":"01-user/tunnels/websockets/","level":1,"title":"WebSocket Support","text":"<p>Sellia provides full WebSocket support through HTTP tunnels, allowing real-time bidirectional communication between clients and your local WebSocket servers.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#how-websocket-tunnels-work","level":2,"title":"How WebSocket Tunnels Work","text":"<p>When a client initiates a WebSocket connection through a Sellia tunnel:</p> <pre><code>Client → Sellia Server → WebSocket Upgrade → Your Local WebSocket Server\n</code></pre> <ol> <li>Client sends HTTP request with <code>Upgrade: websocket</code> header</li> <li>Sellia forwards the upgrade request to your local server</li> <li>Your server accepts the WebSocket connection</li> <li>Bidirectional communication flows through the tunnel</li> </ol>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#creating-websocket-tunnels","level":2,"title":"Creating WebSocket Tunnels","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#basic-websocket-tunnel","level":3,"title":"Basic WebSocket Tunnel","text":"<p>Create a tunnel to your WebSocket server just like any HTTP tunnel:</p> <pre><code>sellia http 8080 --subdomain ws-app\n</code></pre> <p>Your WebSocket server is now accessible at the tunnel URL (format depends on server configuration): <pre><code>wss://ws-app.your-domain.com  (if server has --https)\nws://ws-app.your-domain.com:3000  (otherwise)\n</code></pre></p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#example-nodejs-websocket-server","level":3,"title":"Example: Node.js WebSocket Server","text":"<pre><code>// ws-server.js\nconst WebSocket = require('ws');\n\nconst wss = new WebSocket.Server({ port: 8080 });\n\nwss.on('connection', (ws) =&gt; {\n  console.log('Client connected');\n\n  ws.on('message', (message) =&gt; {\n    console.log('Received:', message.toString());\n    ws.send(`Echo: ${message}`);\n  });\n\n  ws.on('close', () =&gt; {\n    console.log('Client disconnected');\n  });\n});\n\nconsole.log('WebSocket server running on port 8080');\n</code></pre> <p>Start the server:</p> <pre><code>node ws-server.js\n</code></pre> <p>Create the tunnel:</p> <pre><code>sellia http 8080 --subdomain ws-app\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#example-python-websocket-server","level":3,"title":"Example: Python WebSocket Server","text":"<pre><code># ws-server.py\nimport asyncio\nimport websockets\n\nasync def echo(websocket):\n    print(\"Client connected\")\n    try:\n        async for message in websocket:\n            print(f\"Received: {message}\")\n            await websocket.send(f\"Echo: {message}\")\n    finally:\n        print(\"Client disconnected\")\n\nasync def main():\n    async with websockets.serve(echo, \"localhost\", 8080):\n        print(\"WebSocket server running on port 8080\")\n        await asyncio.Future()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>Start the server:</p> <pre><code>python ws-server.py\n</code></pre> <p>Create the tunnel:</p> <pre><code>sellia http 8080 --subdomain ws-app\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#connecting-to-websocket-tunnels","level":2,"title":"Connecting to WebSocket Tunnels","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#javascript-client","level":3,"title":"JavaScript Client","text":"<pre><code>const ws = new WebSocket('wss://ws-app.sellia.me');\n\nws.onopen = () =&gt; {\n  console.log('Connected to WebSocket server');\n  ws.send('Hello, Server!');\n};\n\nws.onmessage = (event) =&gt; {\n  console.log('Received:', event.data);\n};\n\nws.onerror = (error) =&gt; {\n  console.error('WebSocket error:', error);\n};\n\nws.onclose = () =&gt; {\n  console.log('WebSocket connection closed');\n};\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#python-client","level":3,"title":"Python Client","text":"<pre><code>import asyncio\nimport websockets\n\nasync def test_websocket():\n    uri = \"wss://ws-app.sellia.me\"\n    async with websockets.connect(uri) as websocket:\n        print(\"Connected to WebSocket server\")\n\n        await websocket.send(\"Hello, Server!\")\n        response = await websocket.recv()\n        print(f\"Received: {response}\")\n\nasyncio.run(test_websocket())\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#browser-client","level":3,"title":"Browser Client","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;WebSocket Test&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;WebSocket Test&lt;/h1&gt;\n    &lt;button onclick=\"connect()\"&gt;Connect&lt;/button&gt;\n    &lt;button onclick=\"sendMessage()\"&gt;Send Message&lt;/button&gt;\n    &lt;div id=\"output\"&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n        let ws;\n\n        function connect() {\n            ws = new WebSocket('wss://ws-app.sellia.me');\n\n            ws.onopen = () =&gt; {\n                log('Connected to WebSocket server');\n            };\n\n            ws.onmessage = (event) =&gt; {\n                log(`Received: ${event.data}`);\n            };\n\n            ws.onerror = (error) =&gt; {\n                log(`Error: ${error}`);\n            };\n\n            ws.onclose = () =&gt; {\n                log('WebSocket connection closed');\n            };\n        }\n\n        function sendMessage() {\n            if (ws &amp;&amp; ws.readyState === WebSocket.OPEN) {\n                ws.send('Hello, Server!');\n            }\n        }\n\n        function log(message) {\n            const output = document.getElementById('output');\n            output.innerHTML += `&lt;p&gt;${message}&lt;/p&gt;`;\n        }\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#websocket-features","level":2,"title":"WebSocket Features","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#automatic-upgrade-handling","level":3,"title":"Automatic Upgrade Handling","text":"<p>Sellia automatically handles the WebSocket upgrade protocol:</p> <ul> <li>Properly forwards <code>Upgrade: websocket</code> headers</li> <li>Maintains the <code>Connection: Upgrade</code> header</li> <li>Passes through <code>Sec-WebSocket-Key</code> and other handshake headers</li> <li>Supports WebSocket subprotocols</li> </ul>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#full-duplex-communication","level":3,"title":"Full-Duplex Communication","text":"<p>Both client and server can send messages at any time:</p> <pre><code>// Server can push messages anytime\nsetInterval(() =&gt; {\n  ws.send(`Server time: ${new Date().toISOString()}`);\n}, 1000);\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#connection-persistence","level":3,"title":"Connection Persistence","text":"<p>WebSocket connections remain open as long as: - The client maintains the connection - Your local server is running - The Sellia tunnel is active</p> <p>If the connection drops, the client should reconnect:</p> <pre><code>let reconnectAttempts = 0;\nconst maxReconnectAttempts = 5;\n\nfunction connect() {\n  ws = new WebSocket('wss://ws-app.sellia.me');\n\n  ws.onclose = () =&gt; {\n    if (reconnectAttempts &lt; maxReconnectAttempts) {\n      reconnectAttempts++;\n      setTimeout(() =&gt; connect(), 1000 * reconnectAttempts);\n    }\n  };\n\n  ws.onopen = () =&gt; {\n    reconnectAttempts = 0;\n  };\n}\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#use-cases","level":2,"title":"Use Cases","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#1-real-time-chat","level":3,"title":"1. Real-Time Chat","text":"<pre><code># Start chat server\nnode chat-server.js\n\n# Create tunnel\nsellia http 3000 --subdomain chat-app\n</code></pre> <p>Now users can connect via WebSocket to your local chat server from anywhere.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#2-live-collaboration","level":3,"title":"2. Live Collaboration","text":"<pre><code># Start collaborative editing server\nnode collab-server.js\n\n# Create tunnel\nsellia http 4000 --subdomain collab-edit\n</code></pre> <p>Multiple users can collaborate in real-time through the tunnel.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#3-live-data-streaming","level":3,"title":"3. Live Data Streaming","text":"<pre><code># Start data streaming server\npython stream-server.py\n\n# Create tunnel\nsellia http 5000 --subdomain live-data\n</code></pre> <p>Stream real-time data (sensor readings, stock prices, etc.) to clients.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#4-online-gaming","level":3,"title":"4. Online Gaming","text":"<pre><code># Start game server\nnode game-server.js\n\n# Create tunnel\nsellia http 8080 --subdomain multiplayer-game\n</code></pre> <p>Enable multiplayer gameplay with WebSocket-based game server.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#5-real-time-notifications","level":3,"title":"5. Real-Time Notifications","text":"<pre><code># Start notification server\nnode notify-server.js\n\n# Create tunnel\nsellia http 6000 --subdomain push-notifications\n</code></pre> <p>Push real-time notifications to connected clients.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#websocket-inspector","level":2,"title":"WebSocket Inspector","text":"<p>The Sellia inspector can monitor WebSocket connections:</p> <pre><code>sellia http 8080 --open --server https://sellia.me\n</code></pre> <p>View at <code>http://localhost:4040</code>: - See WebSocket upgrade requests - Monitor connection lifecycle - View message count and timing</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#monitoring-websocket-messages","level":3,"title":"Monitoring WebSocket Messages","text":"<p>While Sellia shows connection details, actual WebSocket message content isn't logged (to avoid overhead). Use your server's logging for message debugging.</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#subprotocols","level":3,"title":"Subprotocols","text":"<p>Specify WebSocket subprotocols if needed:</p> <pre><code>const ws = new WebSocket('wss://ws-app.sellia.me', ['chat', 'superchat']);\n</code></pre> <p>Your server will receive the protocol in the handshake:</p> <pre><code>wss.on('connection', (ws, request) =&gt; {\n  const protocol = request.headers['sec-websocket-protocol'];\n  console.log('Subprotocol:', protocol);\n});\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#custom-headers","level":3,"title":"Custom Headers","text":"<p>WebSocket doesn't support custom headers in the initial request, but you can send them in the first message:</p> <pre><code>ws.onopen = () =&gt; {\n  ws.send(JSON.stringify({\n    type: 'auth',\n    token: 'your-token'\n  }));\n};\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#connection-limits","level":3,"title":"Connection Limits","text":"<ul> <li>Each WebSocket connection uses a persistent connection</li> <li>Monitor active connections in the inspector</li> <li>Consider connection pooling for many clients</li> </ul>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#bandwidth-usage","level":3,"title":"Bandwidth Usage","text":"<p>WebSocket tunnels use minimal overhead: - No HTTP headers per message - Binary message framing is efficient - Compression can be enabled at application level</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#latency","level":3,"title":"Latency","text":"<p>WebSocket tunnel latency is typically: - Same as HTTP: 5-200ms depending on location - No additional overhead for established connections - Suitable for real-time applications</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#connection-not-upgrading","level":3,"title":"Connection Not Upgrading","text":"<p>If WebSocket connections don't upgrade:</p> <ol> <li>Check your server logs for errors</li> <li>Verify the tunnel is running:    <pre><code>sellia http 8080 --open\n</code></pre></li> <li>Inspect the upgrade request in the inspector</li> <li>Ensure no intermediate proxy blocks WebSocket</li> </ol>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#frequent-disconnections","level":3,"title":"Frequent Disconnections","text":"<p>If connections drop frequently:</p> <ol> <li>Check your internet connection stability</li> <li>Verify server uptime and logs</li> <li>Implement client-side reconnection logic</li> <li>Check for rate limiting</li> </ol>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#messages-not-arriving","level":3,"title":"Messages Not Arriving","text":"<p>If messages don't reach their destination:</p> <ol> <li>Verify both ends are connected</li> <li>Check server logs for errors</li> <li>Ensure message format is correct</li> <li>Test with a simple echo server first</li> </ol>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#high-latency","level":3,"title":"High Latency","text":"<p>If WebSocket latency is high:</p> <ol> <li>Use a geographically closer server</li> <li>Check your network speed</li> <li>Monitor server performance</li> <li>Consider message batching if appropriate</li> </ol>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#best-practices","level":2,"title":"Best Practices","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#1-implement-heartbeats","level":3,"title":"1. Implement Heartbeats","text":"<p>Keep connections alive and detect dead connections:</p> <pre><code>// Server\nconst heartbeatInterval = setInterval(() =&gt; {\n  ws.isAlive = false;\n  ws.ping();\n}, 30000);\n\nws.on('pong', () =&gt; {\n  ws.isAlive = true;\n});\n\n// Client\nsetInterval(() =&gt; {\n  if (ws.readyState === WebSocket.OPEN) {\n    ws.send(JSON.stringify({ type: 'ping' }));\n  }\n}, 30000);\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#2-handle-reconnection","level":3,"title":"2. Handle Reconnection","text":"<p>Always implement reconnection logic:</p> <pre><code>let ws;\nconst connect = () =&gt; {\n  ws = new WebSocket('wss://ws-app.sellia.me');\n  ws.onclose = () =&gt; setTimeout(connect, 1000);\n};\nconnect();\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#3-use-message-queues","level":3,"title":"3. Use Message Queues","text":"<p>Buffer messages when disconnected:</p> <pre><code>const messageQueue = [];\n\nfunction sendOrQueue(message) {\n  if (ws &amp;&amp; ws.readyState === WebSocket.OPEN) {\n    ws.send(message);\n  } else {\n    messageQueue.push(message);\n  }\n}\n\nws.onopen = () =&gt; {\n  messageQueue.forEach(msg =&gt; ws.send(msg));\n  messageQueue.length = 0;\n};\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#4-monitor-connections","level":3,"title":"4. Monitor Connections","text":"<p>Use the inspector to monitor connection health:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#5-graceful-shutdown","level":3,"title":"5. Graceful Shutdown","text":"<p>Handle connection closure properly:</p> <pre><code>window.addEventListener('beforeunload', () =&gt; {\n  if (ws) {\n    ws.close(1000, 'Page closing');\n  }\n});\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#security-considerations","level":2,"title":"Security Considerations","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#authentication","level":3,"title":"Authentication","text":"<p>Implement authentication after connection:</p> <pre><code>ws.onopen = () =&gt; {\n  ws.send(JSON.stringify({\n    type: 'auth',\n    token: getUserToken()\n  }));\n};\n\n// Server\nws.on('message', (data) =&gt; {\n  const msg = JSON.parse(data);\n  if (msg.type === 'auth') {\n    if (validateToken(msg.token)) {\n      ws.authenticated = true;\n    } else {\n      ws.close(4001, 'Authentication failed');\n    }\n  }\n});\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#origin-validation","level":3,"title":"Origin Validation","text":"<p>Validate the <code>Origin</code> header on the server:</p> <pre><code>const allowedOrigins = ['https://yourdomain.com'];\n\nwss.on('connection', (ws, request) =&gt; {\n  const origin = request.headers['origin'];\n  if (!allowedOrigins.includes(origin)) {\n    ws.close(4003, 'Origin not allowed');\n    return;\n  }\n  // ... rest of connection logic\n});\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Implement message rate limiting to prevent abuse:</p> <pre><code>const rateLimiter = new Map();\n\nwss.on('connection', (ws) =&gt; {\n  const clientId = generateId();\n  rateLimiter.set(clientId, { count: 0, lastReset: Date.now() });\n\n  ws.on('message', () =&gt; {\n    const client = rateLimiter.get(clientId);\n    if (Date.now() - client.lastReset &gt; 60000) {\n      client.count = 0;\n      client.lastReset = Date.now();\n    }\n    client.count++;\n\n    if (client.count &gt; 100) {\n      ws.close(4002, 'Rate limit exceeded');\n      return;\n    }\n    // ... process message\n  });\n});\n</code></pre>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>HTTP Tunnels - Basic tunnel usage</li> <li>Basic Authentication - Secure your tunnels</li> <li>Request Inspector - Monitor connections</li> <li>Advanced Configuration - Multiple tunnels</li> </ul>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#examples","level":2,"title":"Examples","text":"","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"01-user/tunnels/websockets/#complete-example-real-time-dashboard","level":3,"title":"Complete Example: Real-Time Dashboard","text":"<p>Server:</p> <pre><code>const WebSocket = require('ws');\nconst express = require('express');\nconst http = require('http');\n\nconst app = express();\nconst server = http.createServer(app);\nconst wss = new WebSocket.Server({ server });\n\n// Serve static files\napp.use(express.static('public'));\n\n// Broadcast to all clients\nconst broadcast = (data) =&gt; {\n  wss.clients.forEach((client) =&gt; {\n    if (client.readyState === WebSocket.OPEN) {\n      client.send(JSON.stringify(data));\n    }\n  });\n};\n\n// Generate random metrics\nsetInterval(() =&gt; {\n  broadcast({\n    type: 'metrics',\n    cpu: Math.random() * 100,\n    memory: Math.random() * 100,\n    timestamp: Date.now()\n  });\n}, 1000);\n\nserver.listen(3000, () =&gt; {\n  console.log('Server running on port 3000');\n});\n</code></pre> <p>Client (<code>public/index.html</code>):</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Real-Time Dashboard&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Live Metrics&lt;/h1&gt;\n    &lt;div&gt;\n        &lt;p&gt;CPU: &lt;span id=\"cpu\"&gt;0&lt;/span&gt;%&lt;/p&gt;\n        &lt;p&gt;Memory: &lt;span id=\"memory\"&gt;0&lt;/span&gt;%&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;script&gt;\n        const ws = new WebSocket(`wss://metrics.${window.location.hostname}`);\n\n        ws.onmessage = (event) =&gt; {\n            const data = JSON.parse(event.data);\n            if (data.type === 'metrics') {\n                document.getElementById('cpu').textContent = data.cpu.toFixed(2);\n                document.getElementById('memory').textContent = data.memory.toFixed(2);\n            }\n        };\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Create tunnel:</p> <pre><code>sellia http 3000 --subdomain metrics --server https://sellia.me\n</code></pre> <p>Now you have a real-time dashboard accessible from anywhere!</p>","path":["01 user","Tunnels","WebSocket Support"],"tags":[]},{"location":"02-developer/","level":1,"title":"Developer Guide","text":"<p>Guide for contributing to and extending Sellia.</p>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#overview","level":2,"title":"Overview","text":"<p>This section is for developers who want to contribute to Sellia, understand its architecture, or extend its functionality.</p>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#getting-started","level":2,"title":"Getting Started","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#prerequisites","level":3,"title":"Prerequisites","text":"<ul> <li>Crystal &gt;= 1.10.0</li> <li>Node.js &gt;= 18 (for inspector UI)</li> <li>Git</li> <li>Basic familiarity with WebSocket and HTTP protocols</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#setup-development-environment","level":3,"title":"Setup Development Environment","text":"<pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Install Crystal dependencies\nshards install\n\n# Install Node dependencies (for inspector UI)\ncd web\nnpm install\ncd ..\n\n# Build debug binaries\nshards build\n\n# Run tests\ncrystal spec\n</code></pre>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#making-changes","level":3,"title":"Making Changes","text":"<ol> <li>Create feature branch</li> <li>Make changes</li> <li>Add tests</li> <li>Run tests</li> <li>Submit pull request</li> </ol> <pre><code># Create feature branch\ngit checkout -b feature/amazing-feature\n\n# Make changes and test\ncrystal spec\n\n# Commit changes\ngit commit -m \"feat: add amazing feature\"\n\n# Push and create PR\ngit push origin feature/amazing-feature\n</code></pre>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#documentation-sections","level":2,"title":"Documentation Sections","text":"<ul> <li>Architecture - System design and components</li> <li>Project Structure - Code organization</li> <li>Development - Development setup and workflow</li> <li>Inspector UI - Web interface development</li> <li>Server Components - Server-side code</li> <li>CLI Components - Client-side code</li> <li>Contributing - Contribution guidelines</li> <li>Release Process - How releases are made</li> <li>Security - Security considerations</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#quick-reference","level":2,"title":"Quick Reference","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#build-commands","level":3,"title":"Build Commands","text":"<pre><code># Debug build\nshards build\n\n# Release build (optimized)\nshards build --release\n\n# Run tests\ncrystal spec\n\n# Run specific test\ncrystal spec spec/server_spec.cr\n</code></pre>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#inspector-ui-development","level":3,"title":"Inspector UI Development","text":"<pre><code>cd web\n\n# Development server\nnpm run dev\n\n# Build for production\nnpm run build\n\n# Run tests\nnpm test\n\n# Lint code\nnpm run lint\n</code></pre>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#running-locally","level":3,"title":"Running Locally","text":"<pre><code># Terminal 1: Start server\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain localhost\n\n# Terminal 2: Start inspector UI dev server\ncd web &amp;&amp; npm run dev\n\n# Terminal 3: Create tunnel\n./bin/sellia http 3000 --open\n</code></pre>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#code-quality","level":2,"title":"Code Quality","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#style-guide","level":3,"title":"Style Guide","text":"<ul> <li>Follow Crystal style guide</li> <li>Use meaningful variable names</li> <li>Add comments for complex logic</li> <li>Keep methods focused and small</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#testing","level":3,"title":"Testing","text":"<ul> <li>Write tests for new features</li> <li>Maintain test coverage</li> <li>Test edge cases</li> <li>Use descriptive test names</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#documentation","level":3,"title":"Documentation","text":"<ul> <li>Document public APIs</li> <li>Update README for user-facing changes</li> <li>Add inline comments for complex code</li> <li>Keep documentation in sync with code</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#architecture-overview","level":2,"title":"Architecture Overview","text":"<p>Sellia consists of three main components:</p>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#server-sellia-server","level":3,"title":"Server (<code>sellia-server</code>)","text":"<ul> <li>WebSocket gateway for tunnel connections</li> <li>HTTP ingress for external requests</li> <li>Tunnel registry for active tunnels</li> <li>Rate limiting and authentication</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#cli-client-sellia","level":3,"title":"CLI Client (<code>sellia</code>)","text":"<ul> <li>Tunnel client connecting to server</li> <li>WebSocket connection management</li> <li>Local HTTP proxy</li> <li>Request inspector server</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#inspector-ui-react","level":3,"title":"Inspector UI (React)","text":"<ul> <li>Real-time request visualization</li> <li>WebSocket connection to CLI</li> <li>Request/response details</li> <li>Interactive debugging</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#communication-protocol","level":2,"title":"Communication Protocol","text":"<p>Sellia uses MessagePack over WebSocket for efficient binary communication:</p> <ul> <li>Connection: WebSocket handshake</li> <li>Messages: MessagePack-encoded binary data</li> <li>Types: Requests, responses, heartbeat, etc.</li> </ul> <p>See Architecture for details.</p>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#contributing","level":2,"title":"Contributing","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#types-of-contributions","level":3,"title":"Types of Contributions","text":"<ul> <li>Bug fixes: Always welcome</li> <li>Features: Open an issue first to discuss</li> <li>Documentation: Improvements welcome</li> <li>Tests: Help improve coverage</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#pull-request-process","level":3,"title":"Pull Request Process","text":"<ol> <li>Fork the repository</li> <li>Create your feature branch</li> <li>Write tests for your changes</li> <li>Ensure all tests pass</li> <li>Update documentation if needed</li> <li>Submit pull request</li> </ol> <p>See Contributing for detailed guidelines.</p>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#getting-help","level":2,"title":"Getting Help","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#resources","level":3,"title":"Resources","text":"<ul> <li>Crystal Documentation</li> <li>MessagePack Spec</li> <li>WebSocket Protocol</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#community","level":3,"title":"Community","text":"<ul> <li>GitHub Issues</li> <li>GitHub Discussions</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#development-topics","level":2,"title":"Development Topics","text":"","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#want-to-add-a-feature","level":3,"title":"Want to add a feature?","text":"<ol> <li>Check Architecture to understand system design</li> <li>Review Project Structure for code organization</li> <li>Read Development for setup and workflow</li> <li>Follow Contributing guidelines</li> </ol>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#want-to-improve-the-ui","level":3,"title":"Want to improve the UI?","text":"<ol> <li>See Inspector UI for frontend development</li> <li>UI is built with React + Vite</li> <li>Uses WebSocket for real-time updates</li> </ol>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#want-to-understand-the-protocol","level":3,"title":"Want to understand the protocol?","text":"<ol> <li>Check Architecture for protocol overview</li> <li>See <code>src/core/protocol/</code> for message definitions</li> <li>MessagePack over WebSocket</li> </ol>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>New Contributors: Start with Contributing</li> <li>Architecture: See Architecture</li> <li>Setup: Follow Development</li> <li>UI Work: Check Inspector UI</li> </ul>","path":["02 developer","Developer Guide"],"tags":[]},{"location":"02-developer/architecture/","level":1,"title":"Architecture","text":"<p>System architecture and design of Sellia.</p>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#overview","level":2,"title":"Overview","text":"<p>Sellia is a tunneling system that exposes local servers to the internet through a secure WebSocket-based protocol. The architecture consists of three main components:</p> <ol> <li>Tunnel Server - Public-facing server that receives external requests</li> <li>CLI Client - Local client that connects to server and forwards requests</li> <li>Inspector UI - Web interface for debugging requests</li> </ol>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#high-level-architecture","level":2,"title":"High-Level Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────────┐\n│                         Internet                            │\n└────────────────────────┬────────────────────────────────────┘\n                         │\n                         ▼\n┌─────────────────────────────────────────────────────────────┐\n│                    Sellia Server                             │\n│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │\n│  │ HTTP Ingress │──│   Tunnel     │──│   WebSocket  │     │\n│  │              │  │   Registry   │  │   Gateway    │     │\n│  └──────────────┘  └──────────────┘  └──────────────┘     │\n└────────────────────────┬────────────────────────────────────┘\n                         │ WebSocket\n                         ▼\n┌─────────────────────────────────────────────────────────────┐\n│                    Sellia CLI Client                         │\n│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │\n│  │   Tunnel     │──│   Local      │  │  Inspector   │     │\n│  │   Client     │  │   HTTP       │  │   Server     │     │\n│  │              │  │   Proxy      │  │              │     │\n│  └──────────────┘  └──────────────┘  └──────────────┘     │\n└────────────────────────┬────────────────────────────────────┘\n                         │\n                         ▼\n┌─────────────────────────────────────────────────────────────┐\n│                  Local Development Server                    │\n│                  (your application)                          │\n└─────────────────────────────────────────────────────────────┘\n</code></pre>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#components","level":2,"title":"Components","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#tunnel-server","level":3,"title":"Tunnel Server","text":"<p>The server is responsible for:</p> <ul> <li>HTTP Ingress - Receives external HTTP requests</li> <li>WebSocket Gateway - Manages WebSocket connections from clients</li> <li>Tunnel Registry - Tracks active tunnels and their subdomains</li> <li>Authentication - Validates API keys and credentials (no auth, master key, or database modes)</li> <li>Rate Limiting - Prevents abuse (token bucket algorithm)</li> <li>Admin API - Administrative endpoints for server management</li> </ul> <p>Request Flow:</p> <ol> <li>External request arrives at <code>http://subdomain.domain.com</code></li> <li>Server looks up tunnel in registry</li> <li>Server forwards request through WebSocket to client</li> <li>Client processes request and sends response back through WebSocket</li> <li>Server returns response to external caller</li> </ol>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#cli-client","level":3,"title":"CLI Client","text":"<p>The client is responsible for:</p> <ul> <li>WebSocket Connection - Maintains persistent connection to server</li> <li>Tunnel Registration - Registers tunnels with unique subdomains</li> <li>Router - Routes requests to local services based on path patterns</li> <li>LocalProxy - Forwards HTTP requests to local services</li> <li>WebSocketProxy - Forwards WebSocket connections to local services</li> <li>Inspector Server - Serves web UI for debugging</li> <li>RequestStore - Stores request/response history for inspector</li> <li>Auto-Reconnection - Reconnects with linear backoff (3s × attempt number, max 10 attempts)</li> </ul> <p>Request Flow:</p> <ol> <li>Client connects to server via WebSocket</li> <li>Client registers tunnel with requested subdomain</li> <li>Client receives requests from server through WebSocket</li> <li>Client forwards requests to local service</li> <li>Client receives response from local service</li> <li>Client sends response back through WebSocket</li> </ol>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#inspector-ui","level":3,"title":"Inspector UI","text":"<p>The inspector provides:</p> <ul> <li>Real-time Updates - WebSocket connection to CLI client (Channel-based subscriptions)</li> <li>Request Visualization - Display all requests/responses (circular buffer, max 1000)</li> <li>Debugging Tools - Copy as cURL, view headers/bodies</li> <li>Interactive UI - React-based interface with TypeScript and Vite</li> <li>Live Updates - Subscribe to request stream via WebSocket</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#communication-protocol","level":2,"title":"Communication Protocol","text":"<p>Sellia uses MessagePack over WebSocket for efficient binary communication.</p>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#why-messagepack","level":3,"title":"Why MessagePack?","text":"<ul> <li>Binary Format - More efficient than JSON</li> <li>Type Preservation - Maintains data types</li> <li>Compact - Smaller payload sizes</li> <li>Fast - Quick serialization/deserialization</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#message-types","level":3,"title":"Message Types","text":"<p>Defined in <code>src/core/protocol/</code>:</p> <pre><code># Request from server to client\nclass TunnelRequest\n  property request_id : String\n  property method : String\n  property headers : Hash(String, String)\n  property body : Bytes?\nend\n\n# Response from client to server\nclass TunnelResponse\n  property request_id : String\n  property status_code : Int32\n  property headers : Hash(String, String)\n  property body : Bytes?\nend\n\n# Tunnel registration\nclass RegisterTunnel\n  property subdomain : String\n  property auth : String?\nend\n</code></pre>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#websocket-flow","level":3,"title":"WebSocket Flow","text":"<pre><code>Client                                      Server\n  │                                           │\n  ├─── WebSocket Handshake ──────────────────&gt;│\n  │                                           │\n  ├─── RegisterTunnel (MessagePack) ─────────&gt;│\n  │&lt;─── TunnelRegistered (MessagePack) ───────┤\n  │                                           │\n  │&lt;─── TunnelRequest (MessagePack) ──────────┤\n  │    (forward to local service)             │\n  ├─── TunnelResponse (MessagePack) ─────────&gt;│\n  │                                           │\n  │        (repeat for each request)          │\n</code></pre>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#data-flow","level":2,"title":"Data Flow","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#incoming-request","level":3,"title":"Incoming Request","text":"<pre><code>1. External HTTP Request\n   ↓\n2. Server HTTP Ingress\n   ↓\n3. Tunnel Registry Lookup\n   ↓\n4. Find WebSocket Connection\n   ↓\n5. MessagePack Encode Request\n   ↓\n6. Send via WebSocket\n   ↓\n7. Client Receives Request\n   ↓\n8. Forward to Local Service\n   ↓\n9. Local Service Processes\n   ↓\n10. Response Received\n   ↓\n11. MessagePack Encode Response\n   ↓\n12. Send via WebSocket\n   ↓\n13. Server Receives Response\n   ↓\n14. Return HTTP Response\n</code></pre>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#inspector-data-flow","level":3,"title":"Inspector Data Flow","text":"<pre><code>1. Client Receives Request\n   ↓\n2. Send to Inspector (local WebSocket)\n   ↓\n3. Inspector UI Displays\n   ↓\n4. User Interacts\n   ↓\n5. Inspector Sends Commands\n   ↓\n6. Client Executes Commands\n</code></pre>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#security-architecture","level":2,"title":"Security Architecture","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#authentication-layers","level":3,"title":"Authentication Layers","text":"<ol> <li>Server Authentication - API key validation</li> <li>Tunnel Authentication - HTTP basic auth per tunnel</li> <li>Rate Limiting - Prevent abuse</li> <li>Subdomain Validation - Prevent conflicts</li> </ol>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#tlsssl","level":3,"title":"TLS/SSL","text":"<ul> <li>Server can require HTTPS</li> <li>TLS certificates managed externally</li> <li>Certificates loaded from <code>certs/</code> directory</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#data-security","level":3,"title":"Data Security","text":"<ul> <li>WebSocket connections can be secured with WSS</li> <li>API keys stored securely (environment variables)</li> <li>Basic auth passwords never logged</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#concurrency-model","level":2,"title":"Concurrency Model","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#server","level":3,"title":"Server","text":"<ul> <li>Fiber-based concurrency - Crystal's lightweight threads</li> <li>Per-connection fibers - Each WebSocket connection runs in fiber</li> <li>Shared state - Tunnel registry with synchronization</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#client","level":3,"title":"Client","text":"<ul> <li>Multi-fiber design - Separate fibers for:</li> <li>WebSocket connection</li> <li>HTTP proxy</li> <li>Inspector server</li> <li>Heartbeat/reconnection</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#error-handling","level":2,"title":"Error Handling","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#connection-errors","level":3,"title":"Connection Errors","text":"<ul> <li>Auto-reconnection - Linear backoff</li> <li>Heartbeat - Detect stale connections</li> <li>Graceful degradation - Continue on non-critical errors</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#request-errors","level":3,"title":"Request Errors","text":"<ul> <li>Timeout handling - Configurable timeouts</li> <li>Error responses - Proper HTTP error codes</li> <li>Logging - All errors logged for debugging</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#memory","level":3,"title":"Memory","text":"<ul> <li>MessagePack - Efficient binary format reduces memory</li> <li>Streaming - Large bodies streamed when possible</li> <li>Inspector limits - Configurable history size</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#network","level":3,"title":"Network","text":"<ul> <li>Connection pooling - Reuse WebSocket connections</li> <li>Compression - Optional compression support</li> <li>Keep-alive - Maintain persistent connections</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#scalability","level":3,"title":"Scalability","text":"<ul> <li>Stateless design - Server can be scaled (with shared storage)</li> <li>Fiber-based - Handle many concurrent connections</li> <li>Efficient protocol - MessagePack minimizes bandwidth</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#extension-points","level":2,"title":"Extension Points","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#custom-protocols","level":3,"title":"Custom Protocols","text":"<p>Message types defined in <code>src/core/protocol/</code> can be extended for new features.</p>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#middleware","level":3,"title":"Middleware","text":"<p>Server and client support middleware for: - Authentication - Logging - Rate limiting - Custom processing</p>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#storage","level":3,"title":"Storage","text":"<p>Storage backend abstracted to support: - In-memory (default) - SQLite (planned) - PostgreSQL (future)</p>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#design-decisions","level":2,"title":"Design Decisions","text":"","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#why-websocket","level":3,"title":"Why WebSocket?","text":"<ul> <li>Bidirectional - Server can push requests to client</li> <li>Efficient - Single connection for multiple requests</li> <li>Real-time - Low latency communication</li> <li>Widely supported - Available in most languages/browsers</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#why-messagepack_1","level":3,"title":"Why MessagePack?","text":"<ul> <li>Binary - More efficient than text-based protocols</li> <li>Schema-less - Flexible data structures</li> <li>Fast - Quick serialization/deserialization</li> <li>Cross-language - Available in most languages</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#why-crystal","level":3,"title":"Why Crystal?","text":"<ul> <li>Performance - Compiled, fast execution</li> <li>Concurrency - Excellent fiber-based concurrency</li> <li>Type safety - Compile-time type checking</li> <li>Ease of use - Ruby-like syntax</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Project Structure - Code organization</li> <li>Server Components - Server implementation</li> <li>CLI Components - Client implementation</li> </ul>","path":["02 developer","Architecture"],"tags":[]},{"location":"02-developer/architecture/client-flow/","level":1,"title":"Client Connection and Request Flow","text":"<p>This document describes how the Sellia client establishes connections and proxies incoming requests to local services.</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#overview","level":2,"title":"Overview","text":"<p>The Sellia client (<code>TunnelClient</code>) runs on the user's machine, establishes a WebSocket connection to the Sellia server, and forwards incoming HTTP/WebSocket requests to local services.</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#connection-lifecycle","level":2,"title":"Connection Lifecycle","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#1-initialization","level":3,"title":"1. Initialization","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  api_key: \"key_...\",\n  subdomain: \"myapp\",      # optional\n  auth: \"user:pass\"        # optional basic auth\n)\n</code></pre> <p>Configuration includes: - server_url: WebSocket server URL - local_port: Default local service port - api_key: Optional authentication key - subdomain: Optional custom subdomain - auth: Optional basic auth for tunnel</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#2-websocket-connection","level":3,"title":"2. WebSocket Connection","text":"<pre><code>Client                      Server\n  |                           |\n  |--- WebSocket Connect ---&gt; |\n  |                           |\n  |&lt;----- Connected ----------|\n</code></pre> <p>The client: 1. Parses the server URL to extract host and port 2. Creates a WebSocket connection to <code>/ws</code> 3. Sets up message handlers 4. Spawns a fiber to run the socket</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#3-authentication-flow","level":3,"title":"3. Authentication Flow","text":"<pre><code>Client                      Server\n  |                           |\n  |--- Auth (api_key) ------&gt; |\n  |                           |\n  |&lt;---- AuthOk --------------|\n  |     (account_id, limits)  |\n</code></pre> <p>If auth is disabled, client skips to <code>TunnelOpen</code>.</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#4-tunnel-opening","level":3,"title":"4. Tunnel Opening","text":"<pre><code>Client                      Server\n  |                           |\n  |-- TunnelOpen -----------&gt; |\n  |   (subdomain, auth)       |\n  |                           |\n  |&lt;--- TunnelReady ----------|\n  |     (tunnel_id, url)      |\n</code></pre> <p>The client: 1. Sends <code>TunnelOpen</code> with desired configuration 2. Receives <code>TunnelReady</code> with tunnel details 3. Stores <code>tunnel_id</code> and <code>public_url</code> 4. Triggers <code>on_connect</code> callback</p> <p>If the subdomain is unavailable: <pre><code>Client                      Server\n  |                           |\n  |-- TunnelOpen -----------&gt; |\n  |   (subdomain: \"taken\")    |\n  |                           |\n  |&lt;--- TunnelClose ----------|\n  |     (reason: \"not available\") |\n</code></pre></p> <p>The client will disable auto-reconnect and stop if the tunnel was closed due to subdomain conflict.</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#5-keep-alive","level":3,"title":"5. Keep-Alive","text":"<pre><code>Client                      Server\n  |                           |\n  |&lt;---- Ping ----------------|\n  |                           |\n  |--- Pong -----------------&gt;|\n  |                           |\n  |      (every 30s)          |\n</code></pre> <ul> <li>Server sends <code>Ping</code> every 30 seconds</li> <li>Client responds with <code>Pong</code></li> <li>If no activity for 60 seconds, server closes connection</li> </ul>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#6-reconnection","level":3,"title":"6. Reconnection","text":"<pre><code>Client                      Server\n  |                           |\n  |--- Disconnection --------&gt;|\n  |                           |\n  | [wait: 3s * attempts]     |\n  |                           |\n  |--- Reconnect ------------&gt;|\n  |                           |\n</code></pre> <p>On disconnect: 1. Clear all in-flight requests 2. Close all active WebSocket connections 3. Trigger <code>on_disconnect</code> callback 4. Wait with linear backoff (3s × attempt number) 5. Attempt reconnection up to 10 times</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#http-request-flow","level":2,"title":"HTTP Request Flow","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#request-reception","level":3,"title":"Request Reception","text":"<pre><code>External User               Server                    Client                   Local Service\n     |                         |                          |                          |\n     |-- HTTP Request ------&gt;  |                          |                          |\n     |  (myapp.sellia.dev)     |                          |                          |\n     |                         |                          |                          |\n     |                         |-- RequestStart --------&gt; |                          |\n     |                         |   (method, path,         |                          |\n     |                         |    headers)              |                          |\n     |                         |                          |                          |\n     |                         |-- RequestBody ---------&gt; |                          |\n     |                         |   (chunk, final=false)  |                          |\n     |                         |                          |                          |\n     |                         |-- RequestBody ---------&gt; |                          |\n     |                         |   (chunk, final=true)   |                          |\n     |                         |                          |                          |\n     |                         |                          |-- [Router] -------------&gt;|\n     |                         |                          |  (match route)           |\n     |                         |                          |                          |\n     |                         |                          |-- HTTP Request --------&gt;|\n     |                         |                          |  (filtered headers)      |\n     |                         |                          |                          |\n     |                         |                          |&lt;-- HTTP Response --------|\n     |                         |                          |  (status, headers, body) |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseStart --------|                          |\n     |                         |   (status, headers)      |                          |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseBody ---------|                          |\n     |                         |   (chunk)                |                          |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseBody ---------|                          |\n     |                         |   (chunk)                |                          |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseEnd ----------|                          |\n     |                         |                          |                          |\n     |&lt;-- HTTP Response -------|                          |                          |\n     |  (reassembled body)     |                          |                          |\n</code></pre>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#step-by-step","level":3,"title":"Step-by-Step","text":"<ol> <li> <p>Server receives request from external user to <code>myapp.sellia.dev</code></p> </li> <li> <p>Server sends <code>RequestStart</code> with:</p> </li> <li><code>request_id</code>: Unique identifier</li> <li><code>tunnel_id</code>: Tunnel identifier</li> <li><code>method</code>: HTTP method</li> <li><code>path</code>: Full path with query string</li> <li> <p><code>headers</code>: All HTTP headers (multi-value)</p> </li> <li> <p>Client stores request metadata:    <pre><code>@pending_requests[request_id] = message\n@request_bodies[request_id] = IO::Memory.new\n@request_start_times[request_id] = Time.monotonic\n</code></pre></p> </li> <li> <p>Server sends <code>RequestBody</code> chunks:</p> </li> <li>Multiple chunks for large bodies</li> <li> <p><code>final=true</code> on last chunk</p> </li> <li> <p>Client buffers body chunks:    <pre><code>@request_bodies[request_id].write(message.chunk)\n</code></pre></p> </li> <li> <p>On final chunk, client spawns fiber to forward request:    <pre><code>spawn { forward_request(request_id) }\n</code></pre></p> </li> <li> <p>Router matches path to route configuration:    <pre><code>match_result = @router.match(path)\n\n# Returns target host:port or nil\n# Examples:\n# \"/api/*\" -&gt; api:8080\n# \"/socket\" -&gt; ws:3000 (fallback)\n</code></pre></p> </li> <li> <p>LocalProxy forwards to local service:</p> </li> <li>Filters hop-by-hop headers</li> <li>Opens HTTP connection to target</li> <li>Streams request body</li> <li> <p>Reads response</p> </li> <li> <p>Client sends response back to server:</p> </li> <li><code>ResponseStart</code>: Status code and headers</li> <li><code>ResponseBody</code>: Body chunks (8KB each)</li> <li> <p><code>ResponseEnd</code>: Signals completion</p> </li> <li> <p>Server reassembles and responds to external user</p> </li> </ol>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#error-handling","level":3,"title":"Error Handling","text":"<p>If local service is unavailable: <pre><code>Client -&gt; ResponseStart (502)\nClient -&gt; ResponseBody (\"Local service unavailable\")\nClient -&gt; ResponseEnd\n</code></pre></p> <p>If no route matches: <pre><code>Client -&gt; ResponseStart (502)\nClient -&gt; ResponseBody (\"No route matched path: /path\")\nClient -&gt; ResponseEnd\n</code></pre></p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#websocket-request-flow","level":2,"title":"WebSocket Request Flow","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#websocket-upgrade","level":3,"title":"WebSocket Upgrade","text":"<pre><code>External User               Server                    Client                   Local Service\n     |                         |                          |                          |\n     |-- WS Upgrade --------&gt; |                          |                          |\n     |  (myapp.sellia.dev)     |                          |                          |\n     |                         |                          |                          |\n     |                         |-- WebSocketUpgrade ----&gt; |                          |\n     |                         |   (path, headers)        |                          |\n     |                         |                          |                          |\n     |                         |                          |-- [Router] -------------&gt;|\n     |                         |                          |                          |\n     |                         |                          |-- WS Connect ---------&gt;|\n     |                         |                          |  (to local service)     |\n     |                         |                          |                          |\n     |                         |                          |&lt;-- Connected ------------|\n     |                         |                          |                          |\n     |                         |&lt;-- WebSocketUpgradeOk ---|                          |\n     |                         |   (headers)              |                          |\n     |                         |                          |                          |\n     |&lt;-- Switching Protocols -|                          |                          |\n     |  (101 status)           |                          |                          |\n</code></pre>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#frame-forwarding-bidirectional","level":3,"title":"Frame Forwarding (Bidirectional)","text":"<pre><code>External User    Server    Client    Local Service\n    |              |          |            |\n    |-- Frame ---&gt; |          |            |\n    |  (text)      |          |            |\n    |              |          |            |\n    |              |-- Frame &gt;|            |\n    |              |          |            |\n    |              |          |-- Frame -&gt;|\n    |              |          |            |\n    |              |          |&lt;- Frame --|\n    |              |          |            |\n    |              |&lt;- Frame --|            |\n    |              |          |            |\n    |&lt;- Frame -----|          |            |\n</code></pre>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#step-by-step_1","level":3,"title":"Step-by-Step","text":"<ol> <li> <p>Server receives WebSocket upgrade request</p> </li> <li> <p>Server sends <code>WebSocketUpgrade</code> with:</p> </li> <li><code>request_id</code>: Unique identifier</li> <li><code>path</code>: WebSocket path</li> <li> <p><code>headers</code>: All headers including <code>Sec-WebSocket-*</code></p> </li> <li> <p>Client routes to local service via router</p> </li> <li> <p>WebSocketProxy connects to local service:    <pre><code>ws_proxy = WebSocketProxy.new(request_id, target_host, target_port)\nresponse_headers = ws_proxy.connect(path, headers)\n</code></pre></p> </li> <li> <p>On success, client sends <code>WebSocketUpgradeOk</code></p> </li> <li> <p>Server completes handshake with external user</p> </li> <li> <p>Frame forwarding begins:</p> </li> <li>External → Server → Client → Local Service</li> <li> <p>Local Service → Client → Server → External</p> </li> <li> <p>On close:    <pre><code>WebSocketClose (bidirectional)\n</code></pre></p> </li> </ol>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#websocket-error-handling","level":3,"title":"WebSocket Error Handling","text":"<p>If local service rejects WebSocket: <pre><code>Client -&gt; WebSocketUpgradeError (502, \"Failed to connect\")\nServer -&gt; 502 response to external user\n</code></pre></p> <p>If no route matches: <pre><code>Client -&gt; WebSocketUpgradeError (502, \"No route matched path: /socket\")\n</code></pre></p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#inspector-integration","level":2,"title":"Inspector Integration","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#request-storage","level":3,"title":"Request Storage","text":"<p>If <code>RequestStore</code> is configured, the client stores:</p> <pre><code>StoredRequest.new(\n  id: request_id,\n  method: \"GET\",\n  path: \"/api/users\",\n  status_code: 200,\n  duration: 45_i64,  # milliseconds\n  timestamp: Time.utc,\n  request_headers: {...},\n  request_body: \"...\",      # truncated to 100KB\n  response_headers: {...},\n  response_body: \"...\",     # truncated to 100KB\n  matched_route: \"/api/*\",\n  matched_target: \"api:8080\"\n)\n</code></pre> <p>The inspector UI: - Subscribes to <code>RequestStore</code> via WebSocket - Receives real-time request updates - Displays request/response details</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#routing","level":2,"title":"Routing","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#route-configuration","level":3,"title":"Route Configuration","text":"<pre><code>routes = [\n  RouteConfig.new(path: \"/api/*\", host: \"api\", port: 8080),\n  RouteConfig.new(path: \"/socket\", host: nil, port: 3000),  # uses default host\n  RouteConfig.new(path: \"/admin/*\", host: \"admin\", port: 8000)\n]\n\nclient = TunnelClient.new(..., routes: routes)\n</code></pre>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#route-matching","level":3,"title":"Route Matching","text":"<p>The router matches paths in order (first match wins):</p> <pre><code>def match(path : String) : MatchResult?\n  @routes.each do |route|\n    if pattern_matches?(route.path, path)\n      return MatchResult.new(target, route.path)\n    end\n  end\n\n  # Try fallback port if configured\n  if port = @fallback_port\n    return MatchResult.new(Target.new(@default_host, port), \"(fallback)\")\n  end\n\n  nil  # No match\nend\n</code></pre> <p>Pattern matching: - Exact match: <code>/socket</code> matches only <code>/socket</code> - Glob match: <code>/api/*</code> matches <code>/api/users</code>, <code>/api/posts/123</code>, etc.</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#example-routes","level":3,"title":"Example Routes","text":"<pre><code>GET /api/users     -&gt; api:8080  (matches /api/*)\nGET /socket        -&gt; localhost:3000  (fallback)\nGET /admin/dashboard -&gt; admin:8000  (matches /admin/*)\nGET /other         -&gt; 502 No route matched\n</code></pre>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each request spawns a fiber for forwarding</li> <li>Multiple requests handled in parallel</li> <li>Mutex protects WebSocket writes (no concurrent sends)</li> </ul>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#memory","level":3,"title":"Memory","text":"<ul> <li>Request bodies buffered in memory</li> <li>Chunks limited to 8KB</li> <li>Inspector truncates bodies to 100KB</li> </ul>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#timeouts","level":3,"title":"Timeouts","text":"<ul> <li>Local proxy: 5s connect timeout, 30s read timeout</li> <li>Server request timeout: 30s (configurable)</li> <li>WebSocket frame loop: No timeout (relies on connection close)</li> </ul>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#error-recovery","level":2,"title":"Error Recovery","text":"","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#local-service-restart","level":3,"title":"Local Service Restart","text":"<p>If local service restarts: 1. In-flight requests fail with 502/504 2. New requests succeed once service is back 3. WebSocket connections close and reconnect</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#network-interruption","level":3,"title":"Network Interruption","text":"<ol> <li>WebSocket connection closes</li> <li>Client attempts reconnection with backoff</li> <li>Tunnel reopens after reconnection</li> <li>Existing tunnels receive new <code>tunnel_id</code></li> </ol>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/client-flow/#subdomain-conflicts","level":3,"title":"Subdomain Conflicts","text":"<p>If subdomain is taken: 1. Server sends <code>TunnelClose</code> with \"not available\" 2. Client disables auto-reconnect 3. User must choose different subdomain</p>","path":["02 developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"02-developer/architecture/components/","level":1,"title":"Core Component Overview","text":"<p>This document provides a high-level overview of Sellia's core components and their interactions.</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#system-architecture","level":2,"title":"System Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────────────┐\n│                          Sellia Server                           │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                   │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │\n│  │ HTTP Server  │    │ WS Endpoint  │    │ Admin API    │      │\n│  │  (public)    │    │   (/ws)      │    │   (admin)    │      │\n│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘      │\n│         │                   │                   │               │\n│         ▼                   ▼                   ▼               │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │\n│  │ HTTPIngress  │    │  WSGateway   │    │ AdminAPI     │      │\n│  │  - Routing   │◄───│  - Message   │    │  - Mgmt      │      │\n│  │  - Proxying  │    │    handling  │    │  - Stats     │      │\n│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘      │\n│         │                   │                   │               │\n│         └─────────┬─────────┘                   │               │\n│                   │                             │               │\n│                   ▼                             │               │\n│          ┌────────────────┐                    │               │\n│          │ ConnectionMgr  │                    │               │\n│          │  - Track clients│                    │               │\n│          └────────┬───────┘                    │               │\n│                   │                             │               │\n│    ┌──────────────┼──────────────┐             │               │\n│    ▼              ▼              ▼             │               │\n│ ┌────────┐  ┌──────────┐  ┌──────────┐         │               │\n│ │Tunnel  │  │ Pending  │  │ Pending  │         │               │\n│ │Registry│  │ Request  │  │ WebSocket│         │               │\n│ └────────┘  └──────────┘  └──────────┘         │               │\n│                                            ▲    │               │\n│                                            │    │               │\n│                                    ┌───────┴────┴───────┐      │\n│                                    │   Storage Layer     │      │\n│                                    │  - SQLite DB        │      │\n│                                    │  - Reserved subdoms │      │\n│                                    │  - API keys         │      │\n│                                    └─────────────────────┘      │\n│                                                                   │\n└─────────────────────────────────────────────────────────────────┘\n\n┌─────────────────────────────────────────────────────────────────┐\n│                          Sellia CLI                              │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                   │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │\n│  │ TunnelClient │    │  Inspector   │    │   Updater    │      │\n│  │  - Connect   │    │  - Web UI    │    │  - Self-upd  │      │\n│  │  - Proxy     │    │  - Debug     │    │              │      │\n│  └──────┬───────┘    └──────┬───────┘    └──────────────┘      │\n│         │                   │                                   │\n│         ▼                   ▼                                   │\n│  ┌──────────────┐    ┌──────────────┐                          │\n│  │  Router     │    │ RequestStore │                          │\n│  │  - Paths    │    │  - History   │                          │\n│  │  - Routes   │    │  - Inspection│                          │\n│  └──────┬───────┘    └──────────────┘                          │\n│         │                                                        │\n│    ┌────┴────┐                                                   │\n│    ▼         ▼                                                   │\n│ ┌────────┐ ┌──────────┐                                         │\n│ │ Local  │ │   WS     │                                         │\n│ │ Proxy  │ │   Proxy  │                                         │\n│ └────────┘ └──────────┘                                         │\n│                                                                   │\n└─────────────────────────────────────────────────────────────────┘\n</code></pre>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#server-components","level":2,"title":"Server Components","text":"","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#httpingress","level":3,"title":"HTTPIngress","text":"<p>Purpose: Handles incoming HTTP requests from the public internet</p> <p>Responsibilities: - Extract subdomain from <code>Host</code> header - Find tunnel in registry - Validate basic auth (if configured) - Check rate limits - Detect WebSocket upgrades - Proxy HTTP requests to clients - Proxy WebSocket connections to clients - Serve root domain endpoints (health, TLS verification) - Serve landing page</p> <p>Key Methods: - <code>handle(context)</code> - Main request handler - <code>proxy_request()</code> - Forward HTTP to client - <code>proxy_websocket()</code> - Forward WebSocket to client - <code>extract_subdomain()</code> - Parse subdomain from host - <code>serve_root()</code> - Handle root domain requests</p> <p>Dependencies: - <code>TunnelRegistry</code> - Find tunnels by subdomain - <code>ConnectionManager</code> - Get client connections - <code>PendingRequestStore</code> - Track in-flight requests - <code>PendingWebSocketStore</code> - Track WebSocket connections - <code>CompositeRateLimiter</code> - Enforce rate limits</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#wsgateway","level":3,"title":"WSGateway","text":"<p>Purpose: Manages WebSocket connections from tunnel clients</p> <p>Responsibilities: - Accept WebSocket connections from clients - Handle authentication flow - Process tunnel open/close requests - Forward responses from clients to HTTP handlers - Forward WebSocket frames bidirectionally - Send ping/pong for keep-alive - Detect stale connections - Clean up on disconnect</p> <p>Key Methods: - <code>handle(socket)</code> - Accept new WebSocket connection - <code>handle_message()</code> - Route message to handler - <code>handle_auth()</code> - Validate API key - <code>handle_tunnel_open()</code> - Create new tunnel - <code>handle_response_*()</code> - Forward response to HTTP handler - <code>check_connections()</code> - Ping/pong and timeout stale connections - <code>handle_disconnect()</code> - Cleanup on client disconnect</p> <p>Dependencies: - <code>ConnectionManager</code> - Track client connections - <code>TunnelRegistry</code> - Register tunnels - <code>AuthProvider</code> - Validate API keys - <code>PendingRequestStore</code> - Match responses to requests - <code>PendingWebSocketStore</code> - Track WebSocket connections - <code>CompositeRateLimiter</code> - Rate limit tunnel creation</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#tunnelregistry","level":3,"title":"TunnelRegistry","text":"<p>Purpose: In-memory registry of active tunnels</p> <p>Responsibilities: - Register tunnels by ID - Find tunnels by ID, subdomain, or client - Validate subdomain format and availability - Generate random subdomains - Unregister tunnels on close - Unregister all tunnels for a client - Reload reserved subdomains from database</p> <p>Data Structures: <pre><code>@tunnels = {} of String =&gt; Tunnel          # id -&gt; tunnel\n@by_subdomain = {} of String =&gt; Tunnel     # subdomain -&gt; tunnel\n@by_client = {} of String =&gt; Array(Tunnel) # client_id -&gt; tunnels\n@reserved_subdomains = Set(String)         # Reserved names\n</code></pre></p> <p>Validation Rules: - Length: 3-63 characters - Characters: alphanumeric, hyphens - Cannot start/end with hyphen - No consecutive hyphens - Cannot be reserved</p> <p>Thread Safety: All operations protected by <code>Mutex</code></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#connectionmanager","level":3,"title":"ConnectionManager","text":"<p>Purpose: Track active WebSocket client connections</p> <p>Responsibilities: - Add new client connections - Find client by ID - Remove client connections - Iterate over all clients</p> <p>Use Cases: - HTTP ingress finds client to forward requests - Cleanup on disconnect - Broadcasting (future)</p> <p>Thread Safety: Uses concurrent data structures</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#authprovider","level":3,"title":"AuthProvider","text":"<p>Purpose: Validate API keys and provide account information</p> <p>Modes: 1. No Auth: Accept any connection (self-hosted mode) 2. Master Key: Single shared key (simple mode) 3. Database: Validate against stored API keys (production mode)</p> <p>Key Methods: - <code>validate(api_key)</code> - Check if key is valid - <code>account_id_for(api_key)</code> - Get account identifier</p> <p>Database Integration: <pre><code>if @use_database &amp;&amp; Storage::Database.instance?\n  if key_record = Storage::Repositories::ApiKeys.validate(api_key)\n    return true\n  end\nend\n</code></pre></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#pendingrequeststore","level":3,"title":"PendingRequestStore","text":"<p>Purpose: Track in-flight HTTP requests waiting for client response</p> <p>Flow: 1. HTTPIngress creates <code>PendingRequest</code> before sending to client 2. WSGateway receives response and looks up by <code>request_id</code> 3. Response written to HTTP context 4. Request removed from store</p> <p>Implementation: <pre><code>@pending : Hash(String, PendingRequest)\n@mutex = Mutex.new\n\nclass PendingRequest\n  property request_id : String\n  property context : HTTP::Server::Context\n  property tunnel_id : String\n  property response_started : Bool = false\n  @channel : Channel(Nil) = Channel(Nil).new\n\n  def wait(timeout : Time::Span) : Bool\n    @channel.receive(timeout: timeout)\n    true\n  rescue Channel::TimeoutError\n    false\n  end\nend\n</code></pre></p> <p>Timeout Handling: - Wait with timeout (default 30s) - Remove on timeout or completion - Send 504 on timeout if no response started</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/server/pending_request.cr</code></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#pendingwebsocketstore","level":3,"title":"PendingWebSocketStore","text":"<p>Purpose: Track WebSocket upgrade handshakes</p> <p>Flow: 1. HTTPIngress creates <code>PendingWebSocket</code> 2. Sends <code>WebSocketUpgrade</code> to client 3. Waits for <code>WebSocketUpgradeOk</code> or <code>WebSocketUpgradeError</code> 4. Once confirmed, stores <code>ws_protocol</code> for frame forwarding</p> <p>Implementation: <pre><code>@pending : Hash(String, PendingWebSocket)\n@mutex = Mutex.new\n\nclass PendingWebSocket\n  property request_id : String\n  property context : HTTP::Server::Context\n  property tunnel_id : String\n  property ws_protocol : HTTP::WebSocket::Protocol?\n  property closed : Bool = false\n  @on_frame : Proc(UInt8, Bytes, Nil)?\n  @on_close : Proc(UInt16?, String?, Nil)?\n\n  def wait_for_upgrade(timeout : Time::Span) : Bool\n    # Wait for client to confirm WebSocket connection\n  end\nend\n</code></pre></p> <p>Key Methods: - <code>add(pending_ws)</code> - Add new pending WebSocket - <code>get(request_id)</code> - Look up pending WebSocket - <code>remove(request_id)</code> - Remove from store - <code>remove_by_tunnel(tunnel_id)</code> - Cleanup on tunnel close</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/server/pending_websocket.cr</code></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#compositeratelimiter","level":3,"title":"CompositeRateLimiter","text":"<p>Purpose: Enforce rate limits for connections, tunnels, and requests</p> <p>Rate Limiters: 1. Connection Limiter - Connections per IP 2. Tunnel Limiter - Tunnel creation per client 3. Request Limiter - Requests per tunnel</p> <p>Algorithm: Token bucket - Max tokens (burst capacity) - Refill rate (tokens per second) - Consume token on action</p> <p>Default Limits: - Connections: 10 burst, 1/s refill - Tunnels: 5 burst, 0.1/s (1 per 10s) refill - Requests: 100 burst, 50/s refill</p> <p>Key Methods: - <code>allow_connection?(ip)</code> - Check if new connection allowed - <code>allow_tunnel?(client_id)</code> - Check if tunnel creation allowed - <code>allow_request?(tunnel_id)</code> - Check if request allowed - <code>reset_client(client_id)</code> - Clear limits on disconnect - <code>reset_tunnel(tunnel_id)</code> - Clear limits on tunnel close</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#adminapi","level":3,"title":"AdminAPI","text":"<p>Purpose: Administrative endpoints for server management</p> <p>Endpoints: - <code>GET /admin/tunnels</code> - List active tunnels - <code>GET /admin/tunnels/:id</code> - Get tunnel details - <code>POST /admin/tunnels/:id/close</code> - Force close tunnel - <code>GET /admin/stats</code> - Server statistics - <code>POST /admin/reserved-subdomains</code> - Add reserved subdomain - <code>DELETE /admin/reserved-subdomains/:subdomain</code> - Remove reserved subdomain - <code>GET /admin/api-keys</code> - List API keys - <code>POST /admin/api-keys</code> - Create API key - <code>DELETE /admin/api-keys/:prefix</code> - Revoke API key</p> <p>Authentication: Basic auth with configured admin credentials</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#cli-components","level":2,"title":"CLI Components","text":"","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#tunnelclient","level":3,"title":"TunnelClient","text":"<p>Purpose: Main client that connects to server and forwards requests</p> <p>Responsibilities: - Establish WebSocket connection to server - Authenticate with API key - Open tunnels - Receive incoming requests - Route requests to local services - Forward responses back to server - Handle WebSocket upgrades - Auto-reconnect on disconnect</p> <p>Key Methods: - <code>start()</code> - Start connection and message loop - <code>connect()</code> - Establish WebSocket connection - <code>authenticate()</code> - Send auth message - <code>open_tunnel()</code> - Request tunnel creation - <code>handle_message()</code> - Route incoming messages - <code>forward_request()</code> - Proxy HTTP to local service - <code>handle_websocket_upgrade()</code> - Proxy WebSocket to local service</p> <p>State: <pre><code>@connected : Bool = false\n@authenticated : Bool = false\n@tunnel_id : String?\n@public_url : String?\n</code></pre></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#router","level":3,"title":"Router","text":"<p>Purpose: Match incoming paths to local service targets</p> <p>Route Configuration: <pre><code>RouteConfig.new(\n  path: \"/api/*\",      # Glob pattern\n  host: \"api\",         # Target host (nil = default)\n  port: 8080           # Target port\n)\n</code></pre></p> <p>Matching: - First match wins - Glob patterns: <code>/api/*</code> matches <code>/api/users</code>, <code>/api/posts/123</code> - Exact patterns: <code>/socket</code> matches only <code>/socket</code> - Fallback: If no match, use default port</p> <p>Example: <pre><code>routes = [\n  RouteConfig.new(\"/api/*\", \"api\", 8080),\n  RouteConfig.new(\"/socket\", nil, 3000),\n  RouteConfig.new(\"/admin/*\", \"admin\", 8000)\n]\n\n# /api/users -&gt; api:8080\n# /socket -&gt; localhost:3000\n# /admin/dashboard -&gt; admin:8000\n# /other -&gt; localhost:3000 (fallback)\n</code></pre></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#localproxy","level":3,"title":"LocalProxy","text":"<p>Purpose: Make HTTP requests to local services</p> <p>Responsibilities: - Open HTTP connection to target - Filter hop-by-hop headers - Forward request body - Read response - Handle timeouts</p> <p>Timeouts: - Connect: 5 seconds - Read: 30 seconds</p> <p>Error Handling: - <code>Socket::ConnectError</code> → 502 Bad Gateway - <code>IO::TimeoutError</code> → 504 Gateway Timeout - Other errors → 500 Internal Server Error</p> <p>Hop-by-Hop Headers Filtered: - Connection - Keep-Alive - Transfer-Encoding - TE - Trailer - Upgrade - Proxy-Authorization - Proxy-Authenticate</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#websocketproxy","level":3,"title":"WebSocketProxy","text":"<p>Purpose: Proxy WebSocket connections to local services</p> <p>Responsibilities: - Connect to local WebSocket service - Forward frames bidirectionally - Handle close frames - Notify on connection close</p> <p>Frame Flow: <pre><code>External WS ←→ Server ←→ Client ←→ WebSocketProxy ←→ Local WS\n</code></pre></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#inspector","level":3,"title":"Inspector","text":"<p>Purpose: Web UI for debugging tunneled requests</p> <p>Components: 1. HTTP Server - Serves UI and API 2. RequestStore - Stores request/response history 3. WebSocket - Pushes real-time updates to UI</p> <p>Endpoints: - <code>/</code> - Serve React UI (baked in release, proxied to Vite in dev) - <code>/api/live</code> - WebSocket for real-time updates - <code>/api/requests</code> - Get all stored requests - <code>/api/requests/clear</code> - Clear history</p> <p>Request Storage: <pre><code>StoredRequest.new(\n  id: request_id,\n  method: \"GET\",\n  path: \"/api/users\",\n  status_code: 200,\n  duration: 45_i64,\n  timestamp: Time.utc,\n  request_headers: {...},\n  request_body: \"...\",\n  response_headers: {...},\n  response_body: \"...\",\n  matched_route: \"/api/*\",\n  matched_target: \"api:8080\"\n)\n</code></pre></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#updater","level":3,"title":"Updater","text":"<p>Purpose: Self-update mechanism for CLI</p> <p>Flow: 1. Fetch latest release from GitHub API 2. Compare versions 3. Download binary for current platform 4. Replace executable 5. Clean up old binary</p> <p>Update Sources: - Latest release: <code>https://api.github.com/repos/watzon/sellia/releases/latest</code> - Specific version: <code>https://api.github.com/repos/watzon/sellia/releases/tags/v{version}</code></p> <p>Platform Detection: - OS: darwin, linux, windows - Arch: amd64, arm64</p> <p>Binary Naming: - <code>sellia-darwin-amd64</code> - <code>sellia-linux-arm64</code> - <code>sellia-windows-amd64.exe</code></p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#storage-layer","level":2,"title":"Storage Layer","text":"","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#database","level":3,"title":"Database","text":"<p>Purpose: SQLite database for persistent data</p> <p>Features: - Singleton pattern (one connection per process) - WAL mode for better concurrency - Shared cache for in-memory mode - Connection pooling</p> <p>Configuration: - File-based: <code>sqlite3://path?journal_mode=WAL&amp;synchronous=NORMAL</code> - In-memory: <code>sqlite3://:memory:?mode=memory&amp;cache=shared</code></p> <p>Models: - <code>ReservedSubdomain</code> - Reserved subdomain names - <code>ApiKey</code> - API keys for authentication</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#repositories","level":3,"title":"Repositories","text":"<p>ReservedSubdomains: - <code>all()</code> - Get all reserved subdomains - <code>exists?(subdomain)</code> - Check if subdomain is reserved - <code>create(subdomain, reason)</code> - Add reserved subdomain - <code>delete(subdomain)</code> - Remove reserved subdomain - <code>to_set()</code> - Convert to Set for fast lookup</p> <p>ApiKeys: - <code>find_by_hash(key_hash)</code> - Find by key hash - <code>find_by_prefix(prefix)</code> - Find by key prefix (for listing) - <code>validate(plaintext_key)</code> - Validate and update last_used_at - <code>create(plaintext_key, name)</code> - Create new API key - <code>revoke(prefix)</code> - Revoke API key (set active=0) - <code>count_active()</code> - Count active API keys - <code>all()</code> - Get all API keys</p>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#data-flow-summary","level":2,"title":"Data Flow Summary","text":"","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#http-request-flow","level":3,"title":"HTTP Request Flow","text":"<pre><code>User → HTTPIngress → TunnelRegistry → ConnectionManager\n     ↓\nPendingRequestStore → WSGateway → Client\n     ↓\nRouter → LocalProxy → Local Service\n     ↓\nResponseStart → ResponseBody* → ResponseEnd\n     ↓\nPendingRequestStore → HTTPIngress → User\n</code></pre>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#websocket-flow","level":3,"title":"WebSocket Flow","text":"<pre><code>User → HTTPIngress → PendingWebSocketStore → WSGateway → Client\n     ↓\nRouter → WebSocketProxy → Local WS Service\n     ↓\nWebSocketUpgradeOk\n     ↓\nFrame Loop: Frames ↔ WSGateway ↔ Client ↔ WebSocketProxy ↔ Local WS\n</code></pre>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#security-architecture","level":2,"title":"Security Architecture","text":"","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#authentication","level":3,"title":"Authentication","text":"<ol> <li>Client → Server: API key in <code>Auth</code> message</li> <li>Server: Validates against database or master key</li> <li>Tunnel Auth: Optional basic auth per tunnel</li> </ol>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#tlsssl","level":3,"title":"TLS/SSL","text":"<ol> <li>Server: Terminates TLS (Caddy/reverse proxy)</li> <li>Client → Server: WSS (WebSocket Secure)</li> <li>Public → Server: HTTPS</li> </ol>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#rate-limiting","level":3,"title":"Rate Limiting","text":"<ol> <li>Per-IP: Connection limits</li> <li>Per-Client: Tunnel creation limits</li> <li>Per-Tunnel: Request limits</li> <li>Token bucket algorithm</li> </ol>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/architecture/components/#subdomain-validation","level":3,"title":"Subdomain Validation","text":"<ol> <li>Format checks: Length, characters, pattern</li> <li>Availability check: Not already in use</li> <li>Reserved check: Not in reserved list</li> <li>Database persistence: Reserved subdomains stored in DB</li> </ol>","path":["02 developer","Architecture","Core Component Overview"],"tags":[]},{"location":"02-developer/cli-components/","level":1,"title":"CLI Components","text":"<p>Client-side implementation details for the Sellia CLI.</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#overview","level":2,"title":"Overview","text":"<p>The Sellia CLI (<code>sellia</code>) is responsible for creating tunnels to the local server, managing connections, and providing the request inspector. This section covers the client architecture and key components.</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#architecture","level":2,"title":"Architecture","text":"<pre><code>User Command\n     ↓\n   OptionParser\n     ↓\n Tunnel Client\n     ↓\nWebSocket to Server ←→ Local Service\n     ↓\n Inspector Server\n     ↓\n  Web UI\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#key-components","level":2,"title":"Key Components","text":"","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#tunnel-client","level":3,"title":"Tunnel Client","text":"<p>Location: <code>src/cli/tunnel_client.cr</code></p> <p>Core client that connects to the Sellia server.</p> <pre><code>class Sellia::CLI::TunnelClient\n  def initialize(\n    @server_url : String,\n    @local_port : Int32,\n    @api_key : String? = nil,\n    @local_host : String = \"localhost\",\n    @subdomain : String? = nil,\n    @auth : String? = nil,\n    @request_store : RequestStore? = nil,\n    routes : Array(RouteConfig) = [] of RouteConfig,\n  )\n    @proxy = LocalProxy.new(@local_host, @local_port)\n    @router = Router.new(routes, @local_host, @local_port &gt; 0 ? @local_port : nil)\n  end\n\n  def start\n    @running = true\n    @reconnect_attempts = 0\n    connect\n  end\n\n  def stop\n    @running = false\n    @connected = false\n    @authenticated = false\n    @socket.try(&amp;.close)\n    # ... cleanup\n  end\n\n  # Callbacks\n  def on_connect(&amp;block : String -&gt;)\n    @on_connect = block\n  end\n\n  def on_request(&amp;block : Protocol::Messages::RequestStart -&gt;)\n    @on_request = block\n  end\nend\n</code></pre> <p>Responsibilities: - Connect to server via WebSocket - Authenticate with API key if provided - Open tunnel and handle incoming requests - Route requests to local services - Forward responses back to server - Handle WebSocket upgrade requests - Auto-reconnect on disconnect</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#local-proxy","level":3,"title":"Local Proxy","text":"<p>Location: <code>src/cli/local_proxy.cr</code></p> <p>HTTP proxy that forwards requests to local service.</p> <pre><code>class Sellia::CLI::LocalProxy\n  def initialize(@host : String, @port : Int32)\n  end\n\n  def forward(request : TunnelRequest) : TunnelResponse\n    # Build HTTP request\n    uri = URI.parse(\"http://#{@host}:#{@port}#{request.url}\")\n\n    client = HTTP::Client.new(uri)\n    client.before_request do |req|\n      req.method = request.method\n      request.headers.each do |key, value|\n        req.headers[key] = value\n      end\n      req.body = request.body if request.body\n    end\n\n    # Execute request\n    response = client.exec(request.method, request.url)\n\n    # Build tunnel response\n    TunnelResponse.new(\n      request_id: request.request_id,\n      status_code: response.status_code,\n      headers: response.headers.to_h,\n      body: response.body?\n    )\n  end\nend\n</code></pre> <p>Responsibilities: - Receive requests from tunnel client - Forward to local service - Return responses to tunnel client - Handle connection errors</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#inspector-server","level":3,"title":"Inspector Server","text":"<p>Location: <code>src/cli/inspector.cr</code></p> <p>Local HTTP server for the inspector UI.</p> <pre><code>class Sellia::CLI::Inspector\n  property port : Int32\n  property store : RequestStore\n\n  def initialize(@port : Int32, @store : RequestStore)\n  end\n\n  def start\n    @running = true\n    server = HTTP::Server.new do |context|\n      handle_request(context)\n    end\n\n    @server = server\n    address = server.bind_tcp(\"127.0.0.1\", @port)\n    Log.info { \"Inspector running at http://#{address}\" }\n    server.listen\n  end\n\n  def stop\n    @running = false\n    @server.try(&amp;.close)\n  end\n\n  def running? : Bool\n    @running\n  end\nend\n</code></pre> <p>Responsibilities: - Serve inspector UI (React SPA) - WebSocket endpoint for real-time updates - REST API for request history - Broadcast requests to connected clients - Support development mode (Vite proxy) and production mode (baked assets)</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#configuration","level":3,"title":"Configuration","text":"<p>Location: <code>src/cli/config.cr</code></p> <p>Loads and manages configuration.</p> <pre><code>class Sellia::CLI::Config\n  include YAML::Serializable\n\n  property server : String = \"https://sellia.me\"\n  property api_key : String?\n  property inspector : Inspector = Inspector.new\n  property database : DatabaseConfig = DatabaseConfig.new\n  property tunnels : Hash(String, TunnelConfig) = {} of String =&gt; TunnelConfig\n\n  def self.load : Config\n    config = Config.new\n\n    # Load in order of increasing priority\n    paths = [\n      Path.home / \".config\" / \"sellia\" / \"sellia.yml\",\n      Path.home / \".sellia.yml\",\n      Path.new(\"sellia.yml\"),\n    ]\n\n    paths.each do |path|\n      if File.exists?(path)\n        file_config = from_yaml(File.read(path))\n        config = config.merge(file_config)\n      end\n    end\n\n    # Environment variables override (highest priority)\n    if env_server = ENV[\"SELLIA_SERVER\"]?\n      config.server = env_server\n    end\n    if env_key = ENV[\"SELLIA_API_KEY\"]?\n      config.api_key = env_key\n    end\n\n    config\n  end\nend\n</code></pre> <p>Responsibilities: - Load configuration from multiple sources with proper merging - Support YAML config files - Support environment variable overrides - Validate configuration</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#commands","level":2,"title":"Commands","text":"<p>Location: <code>src/cli/main.cr</code></p> <p>The CLI uses OptionParser directly for command parsing, not a separate command library.</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#main-entry-point","level":3,"title":"Main Entry Point","text":"<pre><code>module Sellia::CLI\n  def self.run\n    ::Log.setup_from_env(default_level: :warn)\n\n    command = ARGV.shift?\n\n    case command\n    when \"http\"\n      run_http_tunnel\n    when \"start\"\n      run_start\n    when \"auth\"\n      run_auth\n    when \"admin\"\n      run_admin\n    when \"update\"\n      run_update\n    when \"version\", \"-v\", \"--version\"\n      puts \"Sellia v#{Sellia::VERSION}\"\n    else\n      # Show help\n    end\n  end\nend\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#http-command","level":3,"title":"HTTP Command","text":"<p>Create HTTP tunnel to local port.</p> <p>Options: - <code>--subdomain NAME, -s NAME</code> - Request specific subdomain - <code>--auth USER:PASS, -a USER:PASS</code> - Enable basic auth protection - <code>--host HOST, -H HOST</code> - Local host (default: localhost) - <code>--server URL</code> - Tunnel server URL - <code>--api-key KEY, -k KEY</code> - API key for authentication - <code>--inspector-port PORT, -i PORT</code> - Inspector UI port (default: 4040) - <code>--open, -o</code> - Open inspector in browser on connect - <code>--no-inspector</code> - Disable the request inspector</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#start-command","level":3,"title":"Start Command","text":"<p>Start tunnels from config file.</p> <p>Options: - <code>--config FILE, -c FILE</code> - Config file path</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#auth-command","level":3,"title":"Auth Command","text":"<p>Manage authentication.</p> <p>Subcommands: - <code>login</code> - Save API key for authentication - <code>logout</code> - Remove saved API key - <code>status</code> - Show current authentication status</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#reconnection-logic","level":2,"title":"Reconnection Logic","text":"","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#linear-backoff","level":3,"title":"Linear Backoff","text":"<pre><code>class Sellia::CLI::TunnelClient\n  property auto_reconnect : Bool = true\n  property reconnect_delay : Time::Span = 3.seconds\n  property max_reconnect_attempts : Int32 = 10\n\n  private def handle_reconnect\n    return unless @running &amp;&amp; @auto_reconnect\n\n    @reconnect_attempts += 1\n\n    if @reconnect_attempts &gt; @max_reconnect_attempts\n      Log.error { \"Max reconnection attempts exceeded\" }\n      @running = false\n      return\n    end\n\n    delay = @reconnect_delay * @reconnect_attempts  # Linear backoff\n    Log.info { \"Reconnecting in #{delay.total_seconds.to_i}s...\" }\n\n    sleep delay\n    connect if @running\n  end\nend\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#message-handling","level":2,"title":"Message Handling","text":"","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#binary-websocket-messages","level":3,"title":"Binary WebSocket Messages","text":"<p>The client uses MessagePack for binary message serialization:</p> <pre><code>private def handle_message(bytes : Bytes)\n  message = Protocol::Message.from_msgpack(bytes)\n\n  case message\n  when Protocol::Messages::AuthOk\n    handle_auth_ok(message)\n  when Protocol::Messages::AuthError\n    handle_auth_error(message)\n  when Protocol::Messages::TunnelReady\n    handle_tunnel_ready(message)\n  when Protocol::Messages::TunnelClose\n    handle_tunnel_close(message)\n  when Protocol::Messages::RequestStart\n    handle_request_start(message)\n  when Protocol::Messages::RequestBody\n    handle_request_body(message)\n  when Protocol::Messages::Ping\n    send_message(Protocol::Messages::Pong.new(message.timestamp))\n  when Protocol::Messages::WebSocketUpgrade\n    handle_websocket_upgrade(message)\n  # ... more message types\n  end\nend\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#sending-messages","level":3,"title":"Sending Messages","text":"<pre><code>private def send_message(message : Protocol::Message)\n  socket = @socket\n  return unless socket &amp;&amp; @running\n\n  @send_mutex.synchronize do\n    socket.send(message.to_msgpack)\n  end\nend\n</code></pre> <p>The mutex prevents concurrent writes from multiple request handler fibers.</p>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#performance","level":2,"title":"Performance","text":"","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#concurrent-request-handling","level":3,"title":"Concurrent Request Handling","text":"<p>Each incoming request spawns a fiber for parallel processing:</p> <pre><code>private def handle_request_body(message : Protocol::Messages::RequestBody)\n  body_io = @request_bodies[message.request_id]?\n  return unless body_io\n\n  body_io.write(message.chunk) unless message.chunk.empty?\n\n  if message.final\n    # Request body complete - forward to local service\n    spawn do\n      forward_request(message.request_id)\n    end\n  end\nend\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#memory","level":3,"title":"Memory","text":"<ul> <li>Per pending request: ~10KB (headers + body buffer)</li> <li>Per WebSocket: ~10KB (frame buffer)</li> <li>Inspector storage: Configurable (default 1000 requests)</li> </ul>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#debugging","level":2,"title":"Debugging","text":"","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#logging","level":3,"title":"Logging","text":"<pre><code>Log.setup_from_env(default_level: :warn)\n\nLog.debug { \"Connecting to #{@server_url}\" }\nLog.info { \"Tunnel ready: #{url}\" }\nLog.warn { \"Tunnel closed by server: #{reason}\" }\nLog.error { \"Connection failed: #{ex.message}\" }\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#debug-mode","level":3,"title":"Debug Mode","text":"<pre><code># Enable debug logging\nLOG_LEVEL=debug sellia http 3000\n\n# Enable trace logging\nLOG_LEVEL=trace sellia http 3000\n</code></pre>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/#see-also","level":2,"title":"See Also","text":"<ul> <li>TunnelClient Details - Detailed TunnelClient documentation</li> <li>Inspector Documentation - Inspector component details</li> <li>LocalProxy Documentation - Local proxy implementation</li> <li>Router Documentation - Request routing</li> <li>Updater Documentation - Self-update functionality</li> </ul>","path":["02 developer","Cli components","CLI Components"],"tags":[]},{"location":"02-developer/cli-components/inspector/","level":1,"title":"Inspector Class Documentation","text":"<p>The <code>Inspector</code> provides a web UI for debugging tunneled HTTP requests in real-time.</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#overview","level":2,"title":"Overview","text":"<p><code>Inspector</code> consists of: - HTTP server serving React UI - WebSocket endpoint for real-time updates - REST API for request history - Integration with <code>RequestStore</code> - Development mode (Vite proxy) and production mode (baked assets)</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#class-definition","level":2,"title":"Class Definition","text":"<pre><code>class Sellia::CLI::Inspector\n  property port : Int32\n  property store : RequestStore\n\n  @server : HTTP::Server?\n  @running : Bool = false\n\n  def initialize(@port : Int32, @store : RequestStore)\n  end\nend\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#methods","level":2,"title":"Methods","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#start","level":3,"title":"<code>start</code>","text":"<pre><code>def start\n</code></pre> <p>Start the inspector HTTP server.</p> <p>Flow: <pre><code>@running = true\n\nserver = HTTP::Server.new do |context|\n  handle_request(context)\nend\n\n@server = server\n\nbegin\n  address = server.bind_tcp(\"127.0.0.1\", @port)\n  Log.info { \"Inspector running at http://#{address}\" }\n  server.listen\nrescue ex : Socket::BindError\n  Log.error { \"Failed to bind inspector to port #{@port}: #{ex.message}\" }\n  @running = false\nend\n</code></pre></p> <p>Binds to: 127.0.0.1 (localhost only)</p> <p>Default Port: 4040</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#stop","level":3,"title":"<code>stop</code>","text":"<pre><code>def stop\n</code></pre> <p>Stop the inspector server.</p> <pre><code>@running = false\n@server.try(&amp;.close)\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#running","level":3,"title":"<code>running?</code>","text":"<pre><code>def running? : Bool\n</code></pre> <p>Check if inspector is running.</p> <p>Returns: <code>true</code> if server is listening</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#endpoints","level":2,"title":"Endpoints","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#-serve-ui","level":3,"title":"<code>/</code> - Serve UI","text":"<p>Serve React UI (index.html)</p> <p>Development Mode: Proxies to Vite dev server (localhost:5173)</p> <p>Production Mode: Serves baked assets from compiled binary</p> <pre><code>when \"/\"\n  serve_file(context, \"/index.html\")\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#apilive-websocket-endpoint","level":3,"title":"<code>/api/live</code> - WebSocket Endpoint","text":"<p>WebSocket connection for real-time request updates.</p> <pre><code>when \"/api/live\"\n  handle_websocket(context)\n</code></pre> <p>WebSocket Messages: <pre><code>{\n  \"type\": \"request\",\n  \"request\": {\n    \"id\": \"req_123\",\n    \"method\": \"GET\",\n    \"path\": \"/api/users\",\n    \"statusCode\": 200,\n    \"duration\": 45,\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"requestHeaders\": {...},\n    \"requestBody\": \"...\",\n    \"responseHeaders\": {...},\n    \"responseBody\": \"...\",\n    \"matchedRoute\": \"/api/*\",\n    \"matchedTarget\": \"api:8080\"\n  }\n}\n</code></pre></p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#apirequests-get-all-requests","level":3,"title":"<code>/api/requests</code> - Get All Requests","text":"<p>Get all stored requests.</p> <pre><code>when \"/api/requests\"\n  context.response.content_type = \"application/json\"\n  context.response.print(@store.all.to_json)\n</code></pre> <p>Response: <pre><code>[\n  {\n    \"id\": \"req_123\",\n    \"method\": \"GET\",\n    \"path\": \"/api/users\",\n    \"statusCode\": 200,\n    \"duration\": 45,\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"requestHeaders\": {\"Host\": [\"myapp.sellia.dev\"]},\n    \"requestBody\": null,\n    \"responseHeaders\": {\"Content-Type\": [\"application/json\"]},\n    \"responseBody\": \"[{\\\"id\\\":1}]\",\n    \"matchedRoute\": \"/api/*\",\n    \"matchedTarget\": \"api:8080\"\n  }\n]\n</code></pre></p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#apirequestsclear-clear-history","level":3,"title":"<code>/api/requests/clear</code> - Clear History","text":"<p>Clear all stored requests.</p> <pre><code>when \"/api/requests/clear\"\n  if context.request.method == \"POST\"\n    @store.clear\n    context.response.content_type = \"application/json\"\n    context.response.print(%({\"status\":\"ok\"}))\n  else\n    context.response.status_code = 405\n    context.response.print(\"Method not allowed\")\n  end\n</code></pre> <p>Method: POST only</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#websocket-implementation","level":2,"title":"WebSocket Implementation","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#connection-handler","level":3,"title":"Connection Handler","text":"<pre><code>def handle_websocket(context)\n  if context.request.headers[\"Upgrade\"]?.try(&amp;.downcase) == \"websocket\"\n    ws_handler = HTTP::WebSocketHandler.new do |socket, ctx|\n      handle_websocket_connection(socket)\n    end\n    ws_handler.call(context)\n  else\n    context.response.status_code = 400\n    context.response.print(\"WebSocket connection required\")\n  end\nend\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#message-loop","level":3,"title":"Message Loop","text":"<pre><code>def handle_websocket_connection(socket)\n  channel = @store.subscribe\n  closed = Atomic(Bool).new(false)\n\n  # Send updates to WebSocket client\n  spawn do\n    loop do\n      break if closed.get\n      begin\n        select\n        when request = channel.receive?\n          break if request.nil?\n          message = {type: \"request\", request: request}.to_json\n          socket.send(message)\n        when timeout(1.second)\n          next\n        end\n      rescue Channel::ClosedError\n        break\n      end\n    end\n  end\n\n  socket.on_close do\n    closed.set(true)\n    @store.unsubscribe(channel)\n  end\n\n  socket.run\nend\n</code></pre> <p>Flow: 1. Subscribe to RequestStore channel 2. Spawn fiber to receive updates 3. Send each request as JSON message 4. On close, unsubscribe from channel</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#asset-serving","level":2,"title":"Asset Serving","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#production-mode-release-build","level":3,"title":"Production Mode (Release Build)","text":"<p>Assets are baked into binary using <code>baked_file_system</code>:</p> <pre><code>{% if flag?(:release) %}\n  class InspectorAssets\n    extend BakedFileSystem\n    bake_folder \"../../web/dist\", __DIR__\n  end\n{% end %}\n</code></pre> <p>Serving: <pre><code>private def serve_baked_file(context, path)\n  file = InspectorAssets.get?(path)\n\n  # SPA fallback\n  if file.nil? &amp;&amp; path != \"/index.html\" &amp;&amp; !path.starts_with?(\"/assets/\")\n    file = InspectorAssets.get?(\"/index.html\")\n  end\n\n  if file\n    content_type = mime_type_for(path)\n    context.response.content_type = content_type\n\n    # Cache static assets\n    if path.starts_with?(\"/assets/\")\n      context.response.headers[\"Cache-Control\"] = \"public, max-age=31536000, immutable\"\n    end\n\n    context.response.print(file.gets_to_end)\n  else\n    context.response.status_code = 404\n    context.response.print(\"Not found: #{path}\")\n  end\nend\n</code></pre></p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#development-mode","level":3,"title":"Development Mode","text":"<p>Proxies to Vite dev server (localhost:5173):</p> <pre><code>private def proxy_to_vite(context, path)\n  vite_url = \"http://localhost:5173#{path}\"\n\n  # WebSocket upgrade not supported for HMR\n  if context.request.headers[\"Upgrade\"]?.try(&amp;.downcase) == \"websocket\"\n    context.response.status_code = 502\n    context.response.print(\"WebSocket proxying not supported\")\n    return\n  end\n\n  response = HTTP::Client.get(vite_url)\n  context.response.status_code = response.status_code\n\n  # Forward headers\n  response.headers.each do |key, values|\n    next if key.downcase.in?(\"transfer-encoding\", \"connection\", \"content-length\")\n    context.response.headers[key] = values.first\n  end\n\n  context.response.print(response.body)\nend\n</code></pre> <p>Vite Not Running: Returns friendly error page</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#mime-types","level":2,"title":"MIME Types","text":"<pre><code>private def mime_type_for(path) : String\n  case path\n  when .ends_with?(\".html\") then \"text/html; charset=utf-8\"\n  when .ends_with?(\".js\") then \"application/javascript; charset=utf-8\"\n  when .ends_with?(\".css\") then \"text/css; charset=utf-8\"\n  when .ends_with?(\".svg\") then \"image/svg+xml\"\n  when .ends_with?(\".png\") then \"image/png\"\n  when .ends_with?(\".json\") then \"application/json\"\n  else \"application/octet-stream\"\n  end\nend\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#usage-example","level":2,"title":"Usage Example","text":"<pre><code># Create request store\nstore = RequestStore.new(max_size: 1000)\n\n# Start inspector\ninspector = Inspector.new(port: 4000, store: store)\nspawn { inspector.start }\n\n# Configure tunnel client to use store\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  request_store: store\n)\n\n# Start client\nclient.on_connect do |url|\n  puts \"Tunnel: #{url}\"\n  puts \"Inspector: http://localhost:4000\"\nend\n\nclient.start\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#request-storage","level":2,"title":"Request Storage","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#storedrequest-structure","level":3,"title":"StoredRequest Structure","text":"<pre><code>struct StoredRequest\n  include JSON::Serializable\n\n  property id : String\n  property method : String\n  property path : String\n  property status_code : Int32\n  property duration : Int64\n  property timestamp : Time\n  property request_headers : Hash(String, Array(String))\n  property request_body : String?\n  property response_headers : Hash(String, Array(String))\n  property response_body : String?\n  property matched_route : String?\n  property matched_target : String?\nend\n</code></pre> <p>JSON Field Names (camelCase in JSON): - <code>id</code> - <code>method</code> - <code>path</code> - <code>statusCode</code> (not <code>status_code</code>) - <code>duration</code> - <code>timestamp</code> - <code>requestHeaders</code> (not <code>request_headers</code>) - <code>requestBody</code> (not <code>request_body</code>) - <code>responseHeaders</code> (not <code>response_headers</code>) - <code>responseBody</code> (not <code>response_body</code>) - <code>matchedRoute</code> (not <code>matched_route</code>) - <code>matchedTarget</code> (not <code>matched_target</code>)</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#body-truncation","level":3,"title":"Body Truncation","text":"<p>Bodies are truncated to 100KB for display:</p> <pre><code>max_body_size = 100_000\nif request_body_content &amp;&amp; request_body_content.size &gt; max_body_size\n  request_body_content = request_body_content[0, max_body_size] + \"\\n... (truncated)\"\nend\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#performance","level":2,"title":"Performance","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#memory","level":3,"title":"Memory","text":"<p>Per stored request: ~10-100KB (depending on body size)</p> <p>Default max size: 1000 requests</p> <p>For 1000 avg requests (50KB each): ~50 MB</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#cpu","level":3,"title":"CPU","text":"<ul> <li>WebSocket send: ~100μs per request</li> <li>JSON serialization: ~50μs per request</li> <li>Asset serving: ~1ms per file</li> </ul>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each WebSocket connection in separate fiber</li> <li>Channel-based pub/sub for updates</li> <li>Thread-safe store operations</li> </ul>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#set-reasonable-max-size","level":3,"title":"Set Reasonable Max Size","text":"<pre><code># For development: keep all requests\nstore = RequestStore.new(max_size: 10_000)\n\n# For production: limit memory\nstore = RequestStore.new(max_size: 1000)\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#bind-to-localhost-only","level":3,"title":"Bind to Localhost Only","text":"<pre><code># GOOD - only accessible from this machine\nserver.bind_tcp(\"127.0.0.1\", @port)\n\n# BAD - accessible from network\nserver.bind_tcp(\"0.0.0.0\", @port)\n</code></pre>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#use-in-development-only","level":3,"title":"Use in Development Only","text":"<p>Inspector adds overhead: - Memory for storing requests - CPU for JSON serialization - WebSocket connections</p> <p>Don't use in production unless needed for debugging.</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#inspector-not-accessible","level":3,"title":"Inspector Not Accessible","text":"<p>Symptom: Can't connect to http://localhost:4040</p> <p>Causes: 1. Inspector not started 2. Port already in use 3. Firewall blocking</p> <p>Solutions: 1. Check inspector is running: <code>inspector.running?</code> 2. Check port is available: <code>lsof -i :4040</code> 3. Try different port: <code>Inspector.new(port: 4041, store)</code></p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#vite-dev-server-not-running","level":3,"title":"Vite Dev Server Not Running","text":"<p>Symptom: \"Vite Dev Server Not Running\" page</p> <p>Cause: Vite dev server not started</p> <p>Solution: Start Vite dev server <pre><code>cd web\nnpm run dev\n</code></pre></p> <p>Or build for production: <pre><code>npm run build\nshards build --release\n</code></pre></p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#requests-not-showing","level":3,"title":"Requests Not Showing","text":"<p>Symptom: No requests in inspector</p> <p>Causes: 1. Request store not configured 2. Tunnel client not using store 3. WebSocket not connected</p> <p>Solutions: 1. Create store: <code>RequestStore.new</code> 2. Pass to client: <code>TunnelClient.new(..., request_store: store)</code> 3. Check browser console for WebSocket errors</p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/inspector/#memory-usage-growing","level":3,"title":"Memory Usage Growing","text":"<p>Symptom: Memory increases over time</p> <p>Cause: Store not limiting size</p> <p>Solution: Set max_size: <pre><code>store = RequestStore.new(max_size: 1000)  # Max 1000 requests\n</code></pre></p>","path":["02 developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/","level":1,"title":"TunnelClient Class Documentation","text":"<p>The <code>TunnelClient</code> is the main client class that connects to the Sellia server and forwards requests to local services.</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#overview","level":2,"title":"Overview","text":"<p><code>TunnelClient</code> manages: - WebSocket connection to server - Authentication flow - Tunnel creation - HTTP request forwarding - WebSocket connection forwarding - Auto-reconnection on disconnect - Optional routing to multiple local services</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#class-definition","level":2,"title":"Class Definition","text":"<pre><code>class TunnelClient\n  # Configuration\n  property server_url : String\n  property api_key : String?\n  property local_port : Int32\n  property local_host : String\n  property subdomain : String?\n  property auth : String?\n\n  # State\n  property public_url : String?\n  property tunnel_id : String?\n  getter connected : Bool = false\n  getter authenticated : Bool = false\n\n  # Auto-reconnect settings\n  property auto_reconnect : Bool = true\n  property reconnect_delay : Time::Span = 3.seconds\n  property max_reconnect_attempts : Int32 = 10\n\n  # Request store for inspector (optional)\n  property request_store : RequestStore?\n\n  def initialize(\n    @server_url : String,\n    @local_port : Int32,\n    @api_key : String? = nil,\n    @local_host : String = \"localhost\",\n    @subdomain : String? = nil,\n    @auth : String? = nil,\n    @request_store : RequestStore? = nil,\n    routes : Array(RouteConfig) = [] of RouteConfig,\n  )\n  end\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#lifecycle","level":2,"title":"Lifecycle","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#starting-the-client","level":3,"title":"Starting the Client","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  api_key: \"key_...\",\n  subdomain: \"myapp\"\n)\n\nclient.on_connect do |url|\n  puts \"Tunnel ready: #{url}\"\nend\n\nclient.on_request do |request|\n  puts \"#{request.method} #{request.path}\"\nend\n\nclient.on_disconnect do\n  puts \"Disconnected\"\nend\n\nclient.on_error do |error|\n  puts \"Error: #{error}\"\nend\n\nclient.start  # Blocking\nsleep         # Or run in fiber\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#stopping-the-client","level":3,"title":"Stopping the Client","text":"<pre><code>client.stop\n</code></pre> <p>Cleanup: - Closes WebSocket connection - Clears in-flight requests - Closes all WebSocket connections - Stops auto-reconnect</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#callbacks","level":2,"title":"Callbacks","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#on_connect","level":3,"title":"<code>on_connect</code>","text":"<pre><code>def on_connect(&amp;block : String -&gt;)\n</code></pre> <p>Called when tunnel is ready.</p> <p>Parameter: <code>public_url</code> (e.g., \"https://myapp.sellia.dev\")</p> <p>Use Case: Display URL to user</p> <pre><code>client.on_connect do |url|\n  puts \"=\" * 50\n  puts \"Tunnel established!\"\n  puts \"Public URL: #{url}\"\n  puts \"=\" * 50\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#on_request","level":3,"title":"<code>on_request</code>","text":"<pre><code>def on_request(&amp;block : Protocol::Messages::RequestStart -&gt;)\n</code></pre> <p>Called for each incoming request.</p> <p>Parameter: <code>RequestStart</code> message</p> <p>Use Case: Logging, debugging</p> <pre><code>client.on_request do |request|\n  puts \"[#{Time.now}] #{request.method} #{request.path}\"\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#on_websocket","level":3,"title":"<code>on_websocket</code>","text":"<pre><code>def on_websocket(&amp;block : String, String -&gt;)\n</code></pre> <p>Called when WebSocket connection is established.</p> <p>Parameters: 1. <code>path</code> - WebSocket path 2. <code>request_id</code> - Request identifier</p> <p>Use Case: Track active WebSockets</p> <pre><code>client.on_websocket do |path, request_id|\n  puts \"WebSocket connected: #{path} (#{request_id})\"\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#on_disconnect","level":3,"title":"<code>on_disconnect</code>","text":"<pre><code>def on_disconnect(&amp;block : -&gt;)\n</code></pre> <p>Called when disconnected from server.</p> <p>Use Case: Notify user, trigger cleanup</p> <pre><code>client.on_disconnect do\n  puts \"Disconnected from server\"\n  puts \"Attempting to reconnect...\"\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#on_error","level":3,"title":"<code>on_error</code>","text":"<pre><code>def on_error(&amp;block : String -&gt;)\n</code></pre> <p>Called on error.</p> <p>Parameter: Error message</p> <p>Use Case: Display errors to user</p> <pre><code>client.on_error do |error|\n  STDERR.puts \"Error: #{error}\"\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#message-handlers","level":2,"title":"Message Handlers","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_auth_ok","level":3,"title":"<code>handle_auth_ok</code>","text":"<pre><code>private def handle_auth_ok(message : Protocol::Messages::AuthOk)\n</code></pre> <p>Authentication successful.</p> <p>Flow: <pre><code>Log.info { \"Authenticated successfully (account: #{message.account_id})\" }\n@authenticated = true\nopen_tunnel\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_auth_error","level":3,"title":"<code>handle_auth_error</code>","text":"<pre><code>private def handle_auth_error(message : Protocol::Messages::AuthError)\n</code></pre> <p>Authentication failed.</p> <p>Flow: <pre><code>Log.error { \"Authentication failed: #{message.error}\" }\n@on_error.try(&amp;.call(\"Authentication failed: #{message.error}\"))\n@auto_reconnect = false  # Don't retry with bad credentials\nstop\n</code></pre></p> <p>Important: Disables auto-reconnect (bad credentials won't work on retry)</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_tunnel_ready","level":3,"title":"<code>handle_tunnel_ready</code>","text":"<pre><code>private def handle_tunnel_ready(message : Protocol::Messages::TunnelReady)\n</code></pre> <p>Tunnel created successfully.</p> <p>Flow: <pre><code>@tunnel_id = message.tunnel_id\n@public_url = message.url\nLog.info { \"Tunnel ready: #{message.url}\" }\n@on_connect.try(&amp;.call(message.url))\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_tunnel_close","level":3,"title":"<code>handle_tunnel_close</code>","text":"<pre><code>private def handle_tunnel_close(message : Protocol::Messages::TunnelClose)\n</code></pre> <p>Tunnel closed by server.</p> <p>Flow: <pre><code>reason = message.reason || \"No reason provided\"\nLog.warn { \"Tunnel closed by server: #{reason}\" }\n@on_error.try(&amp;.call(\"Tunnel closed: #{reason}\"))\n\n@tunnel_id = nil\n@public_url = nil\n\n# Don't reconnect if subdomain taken\nif reason.includes?(\"not available\")\n  @auto_reconnect = false\n  stop\nend\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_request_start","level":3,"title":"<code>handle_request_start</code>","text":"<pre><code>private def handle_request_start(message : Protocol::Messages::RequestStart)\n</code></pre> <p>Start of incoming HTTP request.</p> <p>Flow: <pre><code>Log.debug { \"Request start: #{message.method} #{message.path}\" }\n@on_request.try(&amp;.call(message))\n\n# Store request metadata\n@pending_requests[message.request_id] = message\n@request_bodies[message.request_id] = IO::Memory.new\n@request_start_times[message.request_id] = Time.monotonic\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_request_body","level":3,"title":"<code>handle_request_body</code>","text":"<pre><code>private def handle_request_body(message : Protocol::Messages::RequestBody)\n</code></pre> <p>Request body chunk received.</p> <p>Flow: <pre><code>body_io = @request_bodies[message.request_id]?\nreturn unless body_io\n\nbody_io.write(message.chunk) unless message.chunk.empty?\n\nif message.final\n  # Request complete - forward to local service\n  spawn { forward_request(message.request_id) }\nend\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#forward_request","level":3,"title":"<code>forward_request</code>","text":"<pre><code>private def forward_request(request_id : String)\n</code></pre> <p>Forward request to local service.</p> <p>Flow: <pre><code>start_msg = @pending_requests.delete(request_id)\nbody_io = @request_bodies.delete(request_id)\nstart_time = @request_start_times.delete(request_id) || Time.monotonic\n\nreturn unless start_msg &amp;&amp; body_io\n\n# Route the request\nmatch_result = @router.match(start_msg.path)\n\nif match = match_result\n  target_host = match.target.host\n  target_port = match.target.port\nelse\n  # No route matched\n  send_error_response(request_id, start_msg, 502, \"No route matched\")\n  return\nend\n\n# Forward to local service\nstatus_code, headers, response_body = @proxy.forward(\n  start_msg.method,\n  start_msg.path,\n  start_msg.headers,\n  body,\n  target_host,\n  target_port\n)\n\n# Send response back\nsend_response(request_id, status_code, headers, response_body)\n\n# Store in inspector if configured\nif store = @request_store\n  store.add(build_stored_request(...))\nend\n</code></pre></p> <p>Error Handling: - Local service unavailable → 502 - Timeout → 504 - Other errors → 500</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_websocket_upgrade","level":3,"title":"<code>handle_websocket_upgrade</code>","text":"<pre><code>private def handle_websocket_upgrade(message : Protocol::Messages::WebSocketUpgrade)\n</code></pre> <p>WebSocket upgrade request received.</p> <p>Flow: <pre><code>Log.debug { \"WebSocket upgrade request: #{message.path}\" }\n\n# Route the request\nmatch_result = @router.match(message.path)\n\nif match = match_result\n  target_host = match.target.host\n  target_port = match.target.port\nelse\n  # No route matched\n  send_message(WebSocketUpgradeError.new(\n    request_id: message.request_id,\n    status_code: 502,\n    message: \"No route matched path: #{message.path}\"\n  ))\n  return\nend\n\n# Create WebSocket proxy\nws_proxy = WebSocketProxy.new(message.request_id, target_host, target_port)\n\n# Set up frame forwarding\nws_proxy.on_frame do |opcode, payload|\n  send_message(WebSocketFrame.new(\n    request_id: message.request_id,\n    opcode: opcode,\n    payload: payload\n  ))\nend\n\nws_proxy.on_close do |code, reason|\n  send_message(WebSocketClose.new(\n    request_id: message.request_id,\n    code: code,\n    reason: reason\n  ))\n  @active_websockets.delete(message.request_id)\nend\n\n# Connect to local service\nresponse_headers = ws_proxy.connect(message.path, message.headers)\n\nif response_headers\n  # Success\n  @active_websockets[message.request_id] = ws_proxy\n  send_message(WebSocketUpgradeOk.new(\n    request_id: message.request_id,\n    headers: response_headers\n  ))\n  @on_websocket.try(&amp;.call(message.path, message.request_id))\nelse\n  # Connection failed\n  send_message(WebSocketUpgradeError.new(\n    request_id: message.request_id,\n    status_code: 502,\n    message: \"Failed to connect to local WebSocket service\"\n  ))\nend\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle_websocket_frame-handle_websocket_close","level":3,"title":"<code>handle_websocket_frame</code> / <code>handle_websocket_close</code>","text":"<pre><code>private def handle_websocket_frame(message : Protocol::Messages::WebSocketFrame)\n  if ws_proxy = @active_websockets[message.request_id]?\n    ws_proxy.send_frame(message.opcode, message.payload)\n  end\nend\n\nprivate def handle_websocket_close(message : Protocol::Messages::WebSocketClose)\n  if ws_proxy = @active_websockets.delete(message.request_id)\n    ws_proxy.close(message.code, message.reason)\n  end\nend\n</code></pre> <p>Frame forwarding for WebSocket connections.</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#auto-reconnection","level":2,"title":"Auto-Reconnection","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#reconnect-logic","level":3,"title":"Reconnect Logic","text":"<pre><code>private def handle_reconnect\n  return unless @running &amp;&amp; @auto_reconnect\n\n  @reconnect_attempts += 1\n\n  if @reconnect_attempts &gt; @max_reconnect_attempts\n    Log.error { \"Max reconnection attempts exceeded\" }\n    @on_error.try(&amp;.call(\"Max reconnection attempts exceeded\"))\n    @running = false\n    return\n  end\n\n  delay = @reconnect_delay * @reconnect_attempts  # Linear backoff\n  Log.info { \"Reconnecting in #{delay.total_seconds.to_i}s (attempt #{@reconnect_attempts}/#{@max_reconnect_attempts})\" }\n\n  sleep delay\n  connect if @running\nend\n</code></pre> <p>Exponential Backoff: - Attempt 1: 3 seconds - Attempt 2: 6 seconds - Attempt 3: 9 seconds - ... - Maximum: 10 attempts (30 seconds for last)</p> <p>Disable Conditions: - Authentication failed (bad credentials) - Subdomain conflict (won't resolve) - Explicit <code>stop()</code> call</p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#routing","level":2,"title":"Routing","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#route-configuration","level":3,"title":"Route Configuration","text":"<pre><code>routes = [\n  RouteConfig.new(path: \"/api/*\", host: \"api\", port: 8080),\n  RouteConfig.new(path: \"/socket\", host: nil, port: 3000),  # default host\n  RouteConfig.new(path: \"/admin/*\", host: \"admin\", port: 8000)\n]\n\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  routes: routes\n)\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#route-matching","level":3,"title":"Route Matching","text":"<pre><code>def match(path : String) : MatchResult?\n  @routes.each do |route|\n    if pattern_matches?(route.path, path)\n      host = route.host || @default_host\n      target = Target.new(host, route.port)\n      return MatchResult.new(target, route.path)\n    end\n  end\n\n  # Fallback\n  if port = @fallback_port\n    target = Target.new(@default_host, port)\n    return MatchResult.new(target, \"(fallback)\")\n  end\n\n  nil\nend\n</code></pre> <p>Examples: <pre><code>GET /api/users     -&gt; api:8080  (matches /api/*)\nGET /socket        -&gt; localhost:3000  (fallback)\nGET /admin/dashboard -&gt; admin:8000  (matches /admin/*)\nGET /other         -&gt; 502 No route matched\n</code></pre></p>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#basic-tunnel","level":3,"title":"Basic Tunnel","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000\n)\n\nclient.start\nsleep\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#custom-subdomain","level":3,"title":"Custom Subdomain","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  subdomain: \"myapp\"\n)\n\nclient.start\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#with-authentication","level":3,"title":"With Authentication","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  api_key: \"key_...\"\n)\n\nclient.start\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#with-routing","level":3,"title":"With Routing","text":"<pre><code>routes = [\n  RouteConfig.new(\"/api/*\", \"api\", 8080),\n  RouteConfig.new(\"/socket\", nil, 4000),\n  RouteConfig.new(\"/admin/*\", \"admin\", 8000)\n]\n\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  routes: routes\n)\n\nclient.start\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#with-inspector","level":3,"title":"With Inspector","text":"<pre><code>store = RequestStore.new(max_size: 1000)\n\ninspector = Inspector.new(port: 4000, store: store)\nspawn { inspector.start }\n\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  request_store: store\n)\n\nclient.start\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#error-handling","level":2,"title":"Error Handling","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#connection-failed","level":3,"title":"Connection Failed","text":"<pre><code>rescue ex\n  Log.error { \"Connection failed: #{ex.message}\" }\n  @on_error.try(&amp;.call(\"Connection failed: #{ex.message}\"))\n  handle_reconnect\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#local-service-unavailable","level":3,"title":"Local Service Unavailable","text":"<pre><code>rescue ex : Socket::ConnectError\n  error_body = IO::Memory.new(\"Local service unavailable\")\n  {502, {\"Content-Type\" =&gt; [\"text/plain\"]}, error_body}\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#request-timeout","level":3,"title":"Request Timeout","text":"<pre><code>rescue ex : IO::TimeoutError\n  error_body = IO::Memory.new(\"Request to local service timed out\")\n  {504, {\"Content-Type\" =&gt; [\"text/plain\"]}, error_body}\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#performance","level":2,"title":"Performance","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each request spawns a fiber</li> <li>Multiple requests handled in parallel</li> <li>WebSocket frames forwarded directly</li> </ul>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#memory","level":3,"title":"Memory","text":"<ul> <li>Per pending request: ~10KB (headers + body buffer)</li> <li>Per WebSocket: ~10KB (frame buffer)</li> <li>Inspector storage: Configurable (default 1000 requests)</li> </ul>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#cpu","level":3,"title":"CPU","text":"<ul> <li>Message handling: ~10μs per message</li> <li>Request forwarding: ~100μs (excluding local service time)</li> </ul>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#always-set-callbacks","level":3,"title":"Always Set Callbacks","text":"<pre><code>client.on_connect do |url|\n  puts \"Connected: #{url}\"\nend\n\nclient.on_error do |error|\n  STDERR.puts \"Error: #{error}\"\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#handle-subdomain-conflicts","level":3,"title":"Handle Subdomain Conflicts","text":"<pre><code>client.on_error do |error|\n  if error.includes?(\"not available\")\n    puts \"Subdomain is taken. Try a different subdomain.\"\n    client.stop\n  end\nend\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#use-explicit-subdomains-in-production","level":3,"title":"Use Explicit Subdomains in Production","text":"<pre><code># Don't rely on random subdomains in production\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  subdomain: \"myapp-prod\"  # Explicit\n)\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#set-reasonable-timeouts","level":3,"title":"Set Reasonable Timeouts","text":"<pre><code># In LocalProxy\nclient.connect_timeout = 5.seconds\nclient.read_timeout = 30.seconds\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#testing","level":2,"title":"Testing","text":"","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/cli-components/tunnel-client/#integration-test","level":3,"title":"Integration Test","text":"<pre><code># Start local service\nspawn do\n  HTTP::Server.new do |context|\n    context.response.print(\"Hello from local service\")\n  end.bind(\"127.0.0.1\", 3000).listen\nend\n\n# Start tunnel client\nclient = TunnelClient.new(\n  server_url: \"ws://localhost:8080\",\n  local_port: 3000\n)\n\nclient.start\n\n# Wait for connection\nsleep 1.second\n\n# Make request through tunnel\nresponse = HTTP::Client.get(\"http://localhost:8080/test\")\nputs response.body  # =&gt; \"Hello from local service\"\n</code></pre>","path":["02 developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"02-developer/contributing/","level":1,"title":"Contributing","text":"<p>How to contribute to Sellia.</p>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#overview","level":2,"title":"Overview","text":"<p>Thank you for your interest in contributing to Sellia! This document provides guidelines and instructions for contributing.</p>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#ways-to-contribute","level":2,"title":"Ways to Contribute","text":"","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#code-contributions","level":3,"title":"Code Contributions","text":"<ul> <li>Bug fixes - Fix reported issues</li> <li>New features - Add functionality (discuss first)</li> <li>Performance - Improve performance</li> <li>Tests - Increase test coverage</li> <li>Documentation - Improve documentation</li> </ul>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#non-code-contributions","level":3,"title":"Non-Code Contributions","text":"<ul> <li>Bug reports - Report issues with details</li> <li>Feature requests - Suggest improvements</li> <li>Documentation - Improve docs</li> <li>Code review - Review pull requests</li> </ul>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#getting-started","level":2,"title":"Getting Started","text":"","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#1-fork-and-clone","level":3,"title":"1. Fork and Clone","text":"<pre><code># Fork the repository on GitHub\n# Clone your fork\ngit clone https://github.com/your-username/sellia.git\ncd sellia\n\n# Add upstream remote\ngit remote add upstream https://github.com/watzon/sellia.git\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#2-set-up-development-environment","level":3,"title":"2. Set Up Development Environment","text":"<p>See Development for complete setup instructions.</p> <pre><code># Install dependencies\nshards install\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n\n# Build\nshards build\n\n# Run tests\ncrystal spec\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#3-create-branch","level":3,"title":"3. Create Branch","text":"<pre><code># Update from upstream\ngit fetch upstream\ngit checkout main\ngit merge upstream/main\n\n# Create feature branch\ngit checkout -b feature/amazing-feature\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#code-style","level":2,"title":"Code Style","text":"","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#crystal-code","level":3,"title":"Crystal Code","text":"<p>Follow Crystal style guide:</p> <ul> <li>Two-space indentation</li> <li>Snake_case for methods and variables</li> <li>CamelCase for classes and modules</li> <li>Meaningful names</li> <li>Comments for complex logic</li> </ul> <p>Example:</p> <pre><code># Good\nmodule Sellia::Server\n  class TunnelRegistry\n    def register(tunnel : Tunnel) : Nil\n      @mutex.synchronize do\n        @tunnels[tunnel.id] = tunnel\n        @by_subdomain[tunnel.subdomain] = tunnel\n\n        @by_client[tunnel.client_id] ||= [] of Tunnel\n        @by_client[tunnel.client_id] &lt;&lt; tunnel\n      end\n    end\n\n    def find_by_subdomain(subdomain : String) : Tunnel?\n      @mutex.synchronize { @by_subdomain[subdomain]? }\n    end\n  end\nend\n\n# Bad\nclass tunnelRegistry\n  def Register(s, t)\n    return false if @tunnels.has_key?(s)\n    @tunnels[s] = t\n  end\nend\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#typescriptreact-code","level":3,"title":"TypeScript/React Code","text":"<ul> <li>Use functional components with hooks</li> <li>TypeScript for all files</li> <li>Props interfaces</li> <li>Meaningful component names</li> </ul> <p>Example:</p> <pre><code>// Good\ninterface RequestListProps {\n  requests: Request[];\n  onSelect: (id: string) =&gt; void;\n}\n\nexport function RequestList({ requests, onSelect }: RequestListProps) {\n  return (\n    &lt;div className=\"request-list\"&gt;\n      {requests.map(req =&gt; (\n        &lt;RequestItem key={req.id} request={req} onClick={onSelect} /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n\n// Bad\nexport const RL = ({ r, o }) =&gt; (\n  &lt;div&gt;\n    {r.map(x =&gt; &lt;Item k={x.id} r={x} c={o} /&gt;)}\n  &lt;/div&gt;\n);\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#commit-messages","level":2,"title":"Commit Messages","text":"<p>Use conventional commits:</p>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#format","level":3,"title":"Format","text":"<pre><code>&lt;type&gt;: &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#types","level":3,"title":"Types","text":"<ul> <li><code>feat:</code> - New feature</li> <li><code>fix:</code> - Bug fix</li> <li><code>docs:</code> - Documentation changes</li> <li><code>style:</code> - Code style changes (formatting)</li> <li><code>refactor:</code> - Code refactoring</li> <li><code>test:</code> - Adding or updating tests</li> <li><code>chore:</code> - Maintenance tasks</li> <li><code>perf:</code> - Performance improvements</li> </ul>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#examples","level":3,"title":"Examples","text":"<pre><code># Good\nfeat: add custom subdomain support\nfix: prevent duplicate tunnel registrations\ndocs: update installation instructions\ntest: add tunnel registry tests\nrefactor: simplify message handling\n\n# Bad\nadded stuff\nfixed bug\nupdate\nchanges\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/#multi-line-commits","level":3,"title":"Multi-Line Commits","text":"<pre><code>feat(cli): add tunnel authentication\n\nAdd basic auth protection for tunnels.\n\n- Add --auth flag to http command\n- Require credentials for protected tunnels\n- Update documentation\n\nCloses #123\n</code></pre>","path":["02 developer","Contributing"],"tags":[]},{"location":"02-developer/contributing/code-style/","level":1,"title":"Code Style","text":"<p>This document outlines the code style conventions for Sellia, covering both Crystal and TypeScript/React code.</p>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>General Principles</li> <li>Crystal Style Guide</li> <li>TypeScript/React Style Guide</li> <li>Documentation</li> <li>File Organization</li> </ul>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#general-principles","level":2,"title":"General Principles","text":"","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#self-documenting-code","level":3,"title":"Self-Documenting Code","text":"<p>Write code that explains itself:</p> <pre><code># Good: Clear intent\ndef find_available_tunnel(subdomain : String) : Tunnel?\n  @tunnels.find { |t| t.subdomain == subdomain &amp;&amp; t.available? }\nend\n\n# Bad: Unclear purpose\ndef get(sub) : Tunnel?\n  @t.find { |x| x.s == sub &amp;&amp; x.a }\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#single-responsibility","level":3,"title":"Single Responsibility","text":"<p>Each function, class, and module should have one clear purpose:</p> <pre><code># Good: Single responsibility\nclass TunnelRegistry\n  def register(tunnel : Tunnel)\n    # Only handles registration\n  end\nend\n\nclass TunnelValidator\n  def validate_subdomain(subdomain : String) : ValidationResult\n    # Only handles validation\n  end\nend\n\n# Bad: Multiple responsibilities\nclass TunnelHandler\n  def register_and_validate_and_notify(subdomain, client_id)\n    # Too many concerns\n  end\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#keep-functions-short","level":3,"title":"Keep Functions Short","text":"<p>Aim for functions that do one thing well:</p> <pre><code># Good: Focused\ndef register(tunnel : Tunnel) : Nil\n  @mutex.synchronize do\n    @tunnels[tunnel.id] = tunnel\n    @by_subdomain[tunnel.subdomain] = tunnel\n\n    @by_client[tunnel.client_id] ||= [] of Tunnel\n    @by_client[tunnel.client_id] &lt;&lt; tunnel\n  end\nend\n\n# Bad: Too long, doing too much\ndef register(tunnel : Tunnel) : Nil\n  # 100 lines of logic...\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#crystal-style-guide","level":2,"title":"Crystal Style Guide","text":"","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#follow-official-conventions","level":3,"title":"Follow Official Conventions","text":"<p>Sellia follows the official Crystal style guide.</p> <p>Key conventions:</p>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#indentation-and-formatting","level":3,"title":"Indentation and Formatting","text":"<p>Use 2 spaces for indentation (no tabs):</p> <pre><code>def process_request(request : HTTP::Request) : HTTP::Response\n  if request.path == \"/health\"\n    return health_response\n  end\n\n  # ... more code ...\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#naming-conventions","level":3,"title":"Naming Conventions","text":"<p>Classes and Modules: PascalCase</p> <pre><code>class TunnelRegistry\n  module Protocol\n    class Message\n    end\n  end\nend\n\n# Actual code structure\nmodule Sellia::Server\n  class TunnelRegistry\n    # ...\n  end\nend\n</code></pre> <p>Methods and Variables: snake_case</p> <pre><code>def register(tunnel : Tunnel) : Nil\n  tunnel_id = tunnel.id\n  # ...\nend\n\ndef find_by_subdomain(subdomain : String) : Tunnel?\n  @mutex.synchronize { @by_subdomain[subdomain]? }\nend\n</code></pre> <p>Constants: SCREAMING_SNAKE_CASE</p> <pre><code>MAX_TUNNELS = 1000\nDEFAULT_TIMEOUT = 30\n</code></pre> <p>Type Variables: PascalCase</p> <pre><code>class Registry(T)\n  def add(item : T)\n    # ...\n  end\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#type-annotations","level":3,"title":"Type Annotations","text":"<p>Public APIs: Always include type annotations</p> <pre><code># Good: Clear types\ndef register(tunnel : Tunnel) : Nil\n  # ...\nend\n\ndef find_by_id(id : String) : Tunnel?\n  # ...\nend\n\n# Bad: Unclear types\ndef register(tunnel)\n  # ...\nend\n</code></pre> <p>Private Methods: Can omit obvious types</p> <pre><code># Acceptable: Type is obvious\nprivate def generate_id : String\n  Random::Secure.hex(16)\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#method-definitions","level":3,"title":"Method Definitions","text":"<p>Use parentheses for method definitions with arguments:</p> <pre><code># Good\ndef register(tunnel : Tunnel) : Nil\nend\n\ndef find_by_subdomain(subdomain : String) : Tunnel?\nend\n\n# Good: No arguments, no parentheses\ndef size : Int32\n  @mutex.synchronize { @tunnels.size }\nend\n</code></pre> <p>Method chaining: Use block syntax for multi-line chains:</p> <pre><code># Good: Block syntax\nresult = tunnels\n  .select { |t| t.active? }\n  .map { |t| t.subdomain }\n  .first?\n\n# Avoid: Single-line chains that are too long\nresult = tunnels.select { |t| t.active? }.map { |t| t.subdomain }.first?\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#conditional-expressions","level":3,"title":"Conditional Expressions","text":"<p>Use <code>if</code> as an expression when it returns a value:</p> <pre><code># Good\nstatus = if tunnel.active?\n  \"active\"\nelse\n  \"inactive\"\nend\n\n# Also good for simple cases\nstatus = tunnel.active? ? \"active\" : \"inactive\"\n\n# Bad: Unnecessary ternary\nresult = some_condition ? true : false\n# Use: result = some_condition\n</code></pre> <p>Guard clauses are preferred over deep nesting:</p> <pre><code># Good: Guard clause\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # Length check (DNS label: 1-63 chars, we require 3+ for usability)\n  return ValidationResult.new(false, \"Subdomain must be at least 3 characters\") if subdomain.size &lt; 3\n\n  # Character validation\n  return ValidationResult.new(false, \"Subdomain can only contain lowercase letters, numbers, and hyphens\") unless subdomain.matches?(/\\A[a-z0-9][a-z0-9-]*[a-z0-9]\\z/i)\n\n  # Main validation logic\n  ValidationResult.new(true)\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#string-interpolation","level":3,"title":"String Interpolation","text":"<p>Use double quotes and interpolation:</p> <pre><code># Good\nmessage = \"Tunnel #{subdomain} registered for client #{client_id}\"\n\n# Good with method calls\nLog.info { \"Tunnel ready: #{message.url}\" }\n</code></pre> <p>Use single quotes for literal strings:</p> <pre><code># Good\nprotocol = \"MessagePack\"\nversion = '1.0'\n\n# Bad\nprotocol = \"MessagePack\"\nversion = \"1.0\"\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#exception-handling","level":3,"title":"Exception Handling","text":"<p>Specific exceptions: Use specific exception types</p> <pre><code># Good\nbegin\n  register_tunnel(subdomain, client_id)\nrescue ex : TunnelExistsError\n  handle_duplicate(ex)\nrescue ex : ValidationError\n  handle_invalid(ex)\nend\n\n# Acceptable: Generic exception when specific type doesn't matter\nbegin\n  risky_operation\nrescue ex : Exception\n  log_error(ex)\n  raise\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#comments","level":3,"title":"Comments","text":"<p>When to add comments:</p> <pre><code># Good: Explaining why\n# We use a custom hash function here because the built-in\n# hash doesn't handle Unicode subdomains correctly\ndef hash_subdomain(subdomain : String) : UInt64\n  custom_hash(subdomain)\nend\n\n# Good: Documenting public APIs\n# Validate subdomain according to DNS label rules and security constraints\n#\n# Parameters:\n#   `subdomain`: The subdomain to validate\n#\n# Returns: A ValidationResult indicating success or containing an error message\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # ...\nend\n\n# Bad: Stating the obvious\n# Increment the counter\ncounter += 1\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#structs-vs-classes","level":3,"title":"Structs vs Classes","text":"<p>Use Struct for data objects:</p> <pre><code># Good: Struct for immutable data\nstruct Tunnel\n  property id : String\n  property subdomain : String\n  property client_id : String\n  property created_at : Time\n  property auth : String?\n\n  def initialize(@id : String, @subdomain : String, @client_id : String, @auth : String? = nil)\n    @created_at = Time.utc\n  end\nend\n\n# Good: Struct for validation result\nstruct ValidationResult\n  property valid : Bool\n  property error : String?\n\n  def initialize(@valid : Bool, @error : String? = nil)\n  end\nend\n\n# Use Class for objects with identity/lifecycle\nclass TunnelRegistry\n  # ... manages tunnel lifecycle\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#typescriptreact-style-guide","level":2,"title":"TypeScript/React Style Guide","text":"","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#functional-components-with-hooks","level":3,"title":"Functional Components with Hooks","text":"<p>Prefer functional components over class components:</p> <pre><code>// Good: Functional component with hooks\ninterface TunnelProps {\n  subdomain: string;\n  status: string;\n}\n\nexport const TunnelCard: React.FC&lt;TunnelProps&gt; = ({ subdomain, status }) =&gt; {\n  const [isActive, setIsActive] = useState(false);\n\n  useEffect(() =&gt; {\n    setIsActive(status === 'active');\n  }, [status]);\n\n  return (\n    &lt;div className={`tunnel-card ${isActive ? 'active' : ''}`}&gt;\n      &lt;h3&gt;{subdomain}&lt;/h3&gt;\n      &lt;p&gt;{status}&lt;/p&gt;\n    &lt;/div&gt;\n  );\n};\n\n// Avoid: Class components\nclass TunnelCard extends React.Component&lt;TunnelProps, TunnelState&gt; {\n  // ...\n}\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#typescript-strict-mode","level":3,"title":"TypeScript Strict Mode","text":"<p>Use TypeScript strict mode:</p> <pre><code>// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true\n  }\n}\n\n// Good: Explicit types\ninterface Tunnel {\n  subdomain: string;\n  client_id: string;\n  created_at: Date;\n}\n\n// Bad: Implicit any\nfunction processTunnel(tunnel: any) {\n  // ...\n}\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#component-structure","level":3,"title":"Component Structure","text":"<p>Follow this order:</p> <ol> <li>Imports</li> <li>Type definitions</li> <li>Component declaration</li> <li>Hooks</li> <li>Event handlers</li> <li>Helper functions</li> <li>Render</li> </ol> <pre><code>// 1. Imports\nimport { useState, useEffect } from 'react';\nimport { Tunnel } from '../types';\n\n// 2. Types\ninterface TunnelListProps {\n  tunnels: Tunnel[];\n  onSelect: (tunnel: Tunnel) =&gt; void;\n}\n\n// 3. Component\nexport const TunnelList: React.FC&lt;TunnelListProps&gt; = ({ tunnels, onSelect }) =&gt; {\n  // 4. Hooks\n  const [filter, setFilter] = useState('');\n\n  // 5. Event handlers\n  const handleSelect = (tunnel: Tunnel) =&gt; {\n    onSelect(tunnel);\n  };\n\n  // 6. Helper functions\n  const filteredTunnels = tunnels.filter(t =&gt;\n    t.subdomain.includes(filter)\n  );\n\n  // 7. Render\n  return (\n    &lt;div className=\"tunnel-list\"&gt;\n      {filteredTunnels.map(tunnel =&gt; (\n        &lt;TunnelCard\n          key={tunnel.subdomain}\n          tunnel={tunnel}\n          onSelect={handleSelect}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n};\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#naming-conventions_1","level":3,"title":"Naming Conventions","text":"<p>Components: PascalCase</p> <pre><code>// Good\nexport const TunnelCard: React.FC&lt;TunnelCardProps&gt; = ({ ... }) =&gt; {\n  // ...\n};\n\n// Bad\nexport const tunnelCard = ({ ... }) =&gt; {\n  // ...\n};\n</code></pre> <p>Props interfaces: PascalCase + \"Props\" suffix</p> <pre><code>// Good\ninterface TunnelCardProps {\n  subdomain: string;\n}\n\n// Bad\ninterface tunnelCard {\n  subdomain: string;\n}\n</code></pre> <p>Event handlers: \"handle\" prefix</p> <pre><code>// Good\nconst handleClick = () =&gt; { };\nconst handleSubmit = () =&gt; { };\nconst handleTunnelSelect = (tunnel: Tunnel) =&gt; { };\n\n// Bad\nconst click = () =&gt; { };\nconst submit = () =&gt; { };\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#hooks","level":3,"title":"Hooks","text":"<p>Custom hooks: \"use\" prefix</p> <pre><code>// Good: Custom hook\nexport const useTunnels = () =&gt; {\n  const [tunnels, setTunnels] = useState&lt;Tunnel[]&gt;([]);\n\n  useEffect(() =&gt; {\n    fetchTunnels().then(setTunnels);\n  }, []);\n\n  return tunnels;\n};\n\n// Usage\nconst tunnels = useTunnels();\n</code></pre> <p>Hook rules: - Only call hooks at the top level - Don't call hooks inside loops, conditions, or nested functions - Custom hooks should start with \"use\"</p>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#error-handling","level":3,"title":"Error Handling","text":"<p>Use error boundaries for React errors:</p> <pre><code>class ErrorBoundary extends React.Component&lt;\n  { children: React.ReactNode },\n  { hasError: boolean }\n&gt; {\n  constructor(props: { children: React.ReactNode }) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return &lt;div&gt;Something went wrong&lt;/div&gt;;\n    }\n    return this.props.children;\n  }\n}\n</code></pre> <p>Handle async errors properly:</p> <pre><code>// Good: Handle async errors\nuseEffect(() =&gt; {\n  const fetchTunnels = async () =&gt; {\n    try {\n      const data = await api.getTunnels();\n      setTunnels(data);\n    } catch (error) {\n      console.error('Failed to fetch tunnels:', error);\n      setError(error.message);\n    }\n  };\n\n  fetchTunnels();\n}, []);\n\n// Bad: Ignore errors\nuseEffect(() =&gt; {\n  api.getTunnels().then(setTunnels);\n}, []);\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#documentation","level":2,"title":"Documentation","text":"","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#crystal-documentation","level":3,"title":"Crystal Documentation","text":"<p>Public APIs must be documented:</p> <pre><code># Validate subdomain according to DNS label rules and security constraints\n#\n# Performs validation including:\n# - Length checks (3-63 characters)\n# - Character validation (alphanumeric and hyphens only)\n# - Reserved subdomain checks\n# - Availability checks\n#\n# Parameters:\n#   `subdomain`: The subdomain to validate\n#\n# Returns: A ValidationResult indicating success or containing an error message\n#\n# Example:\n# ```\n# result = registry.validate_subdomain(\"myapp\")\n# result.valid? # =&gt; true\n#\n# result = registry.validate_subdomain(\"ab\")\n# result.error # =&gt; \"Subdomain must be at least 3 characters\"\n# ```\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # ...\nend\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#typescript-documentation","level":3,"title":"TypeScript Documentation","text":"<p>Use JSDoc comments:</p> <pre><code>/**\n * Handles incoming WebSocket messages from the server\n *\n * @param event - Message event containing JSON data\n * @returns void\n *\n * @example\n * ```typescript\n * ws.onmessage = (event) =&gt; {\n *   const data = JSON.parse(event.data);\n *   if (data.type === 'request') {\n *     setRequests(prev =&gt; [data.request, ...prev]);\n *   }\n * };\n * ```\n */\nws.onmessage = (event: MessageEvent) =&gt; {\n  const data = JSON.parse(event.data);\n  if (data.type === 'request') {\n    setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000));\n  }\n}\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#file-organization","level":2,"title":"File Organization","text":"","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#crystal-files","level":3,"title":"Crystal Files","text":"<p>One public class per file:</p> <pre><code>src/server/\n├── tunnel_registry.cr   # TunnelRegistry class\n├── ws_gateway.cr        # WSGateway class\n├── http_ingress.cr      # HTTPIngress class\n├── connection_manager.cr # ConnectionManager class\n└── storage/\n    ├── database.cr      # Database class\n    └── repositories.cr  # Repository classes\n</code></pre> <p>File name matches class name: - <code>tunnel_registry.cr</code> contains <code>class TunnelRegistry</code> - <code>ws_gateway.cr</code> contains <code>class WSGateway</code> - Files are organized by module under <code>src/server/</code>, <code>src/cli/</code>, and <code>src/core/</code></p>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#typescript-files","level":3,"title":"TypeScript Files","text":"<p>One component per file:</p> <pre><code>web/src/\n├── App.tsx                 # Main App component\n├── main.tsx                # Entry point\n└── components/\n    ├── RequestList.tsx     # RequestList component (if extracted)\n    └── [More components as the UI grows]\n</code></pre> <p>Current structure (single-file components): The inspector UI currently uses a simple single-file structure with the main component in <code>App.tsx</code>. As the UI grows, consider extracting components:</p> <pre><code>web/src/\n├── App.tsx                 # Main app component\n├── components/\n│   ├── RequestList.tsx\n│   ├── RequestDetail.tsx\n│   └── StatusIndicator.tsx\n└── types.ts                # Shared types\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#formatting-tools","level":2,"title":"Formatting Tools","text":"","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#crystal-formatter","level":3,"title":"Crystal Formatter","text":"<p>Format all Crystal code:</p> <pre><code># Format all files\ncrystal tool format ./src\n\n# Check formatting (CI will do this)\ncrystal tool format --check ./src\n\n# Format specific file\ncrystal tool format ./src/server/tunnel_registry.cr\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#typescriptreact-formatter","level":3,"title":"TypeScript/React Formatter","text":"<p>Use ESLint and Prettier:</p> <pre><code># Format all files\ncd web\nnpm run format\n\n# Check formatting\nnpm run format:check\n\n# Format specific file\nnpm run format -- src/components/TunnelCard.tsx\n</code></pre>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#code-review-checklist","level":2,"title":"Code Review Checklist","text":"<p>Before submitting code, review:</p> <ul> <li> Code follows style guide</li> <li> Code is formatted (<code>crystal tool format --check</code>)</li> <li> Public APIs have documentation</li> <li> Tests are included and passing</li> <li> Complex logic has comments explaining \"why\"</li> <li> No commented-out code</li> <li> No console.log statements left in production code</li> <li> Error handling is appropriate</li> <li> No unnecessary complexity</li> </ul>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#additional-resources","level":2,"title":"Additional Resources","text":"<ul> <li>Crystal Style Guide</li> <li>TypeScript Handbook</li> <li>React Documentation</li> <li>Airbnb JavaScript Style Guide</li> </ul>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/code-style/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Commit Messages - Write better commit messages</li> <li>Testing - Test your code</li> <li>Workflow - Understand the contribution process</li> </ul>","path":["02 developer","Contributing","Code Style"],"tags":[]},{"location":"02-developer/contributing/commit-messages/","level":1,"title":"Commit Messages","text":"<p>This document outlines the commit message conventions used in Sellia, based on Conventional Commits.</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Format</li> <li>Types</li> <li>Scopes</li> <li>Examples</li> <li>Best Practices</li> <li>Reverting Commits</li> </ul>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#overview","level":2,"title":"Overview","text":"<p>Sellia uses Conventional Commits to provide: - Structured commit history - Automated changelog generation - Easier code review - Clear intent of changes</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#why-conventional-commits","level":3,"title":"Why Conventional Commits?","text":"<ul> <li>Automated Versioning: Commit types determine version bumps (major/minor/patch)</li> <li>Changelog Generation: Automatic changelog from commit history</li> <li>Code Review: Easier to understand changes at a glance</li> <li>Git Hooks: Can enforce commit message format</li> </ul>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#format","level":2,"title":"Format","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#basic-structure","level":3,"title":"Basic Structure","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#example","level":3,"title":"Example","text":"<pre><code>feat(cli): add custom timeout flag for connections\n\nAdd a new --timeout flag that allows users to specify a custom\nconnection timeout in seconds. The default timeout remains 30 seconds.\n\nCloses #123\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#components-explained","level":3,"title":"Components Explained","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#type-required","level":4,"title":"Type (Required)","text":"<p>The type of change. See Types below.</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#scope-optional","level":4,"title":"Scope (Optional)","text":"<p>The component/module affected. See Scopes below.</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#description-required","level":4,"title":"Description (Required)","text":"<p>A brief summary of the change: - Use imperative mood (\"add\" not \"added\" or \"adds\") - Lowercase first letter - No period at the end - Max 72 characters</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#body-optional","level":4,"title":"Body (Optional)","text":"<p>Additional context: - What was changed and why - Motivation for the change - Contrasts with previous behavior - Wrap at 72 characters per line</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#footer-optional","level":4,"title":"Footer (Optional)","text":"<p>Metadata: - Breaking changes: \"BREAKING CHANGE: description\" - Closes issues: \"Closes #123\" - References issues: \"Refs #456\"</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#types","level":2,"title":"Types","text":"Type Description Version Bump <code>feat</code> New feature Minor <code>fix</code> Bug fix Patch <code>docs</code> Documentation only Patch <code>style</code> Code style (formatting, etc.) Patch <code>refactor</code> Code change that neither fixes a bug nor adds a feature Patch <code>perf</code> Performance improvement Patch <code>test</code> Adding or updating tests Patch <code>chore</code> Maintenance tasks Patch <code>ci</code> CI/CD changes Patch <code>build</code> Build system changes Patch <code>revert</code> Revert a previous commit Patch","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#when-to-use-each-type","level":3,"title":"When to Use Each Type","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#feat-new-feature","level":4,"title":"<code>feat</code>: New Feature","text":"<p>New user-facing functionality:</p> <pre><code>feat(cli): add --timeout flag for connection timeout\nfeat(server): implement custom domain support\nfeat(web): add request replay functionality\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#fix-bug-fix","level":4,"title":"<code>fix</code>: Bug Fix","text":"<p>Fixes for bugs or unexpected behavior:</p> <pre><code>fix(server): handle WebSocket close during request processing\nfix(cli): prevent memory leak in tunnel client\nfix(web): correct timestamp display in inspector\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#docs-documentation-only","level":4,"title":"<code>docs</code>: Documentation Only","text":"<p>Changes to documentation only:</p> <pre><code>docs: update installation instructions for macOS\ndocs(api): add protocol message examples\ndocs: clarify usage of --auth flag\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#style-code-style","level":4,"title":"<code>style</code>: Code Style","text":"<p>Code style changes (formatting, missing semicolons, etc.):</p> <pre><code>style: format Crystal code with crystal tool format\nstyle(web): fix indentation in RequestInspector component\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#refactor-code-refactoring","level":4,"title":"<code>refactor</code>: Code Refactoring","text":"<p>Code changes that neither fix bugs nor add features:</p> <pre><code>refactor(server): simplify tunnel registry logic\nrefactor(cli): extract validation into separate module\nrefactor(core): consolidate protocol message types\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#perf-performance-improvement","level":4,"title":"<code>perf</code>: Performance Improvement","text":"<p>Performance improvements:</p> <pre><code>perf(server): optimize message serialization\nperf(cli): reduce memory allocations in tunnel client\nperf(web): improve rendering performance for large request lists\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#test-tests","level":4,"title":"<code>test</code>: Tests","text":"<p>Adding or updating tests:</p> <pre><code>test(server): add tunnel registry duplicate detection tests\ntest(ws): add WebSocket reconnection tests\ntest(core): increase test coverage for protocol messages\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#chore-maintenance","level":4,"title":"<code>chore</code>: Maintenance","text":"<p>Maintenance tasks, dependency updates, etc.:</p> <pre><code>chore: upgrade Crystal to 1.10.0\nchore: update dependencies to latest versions\nchore: remove watchtower and add HTTP-to-HTTPS redirect\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#ci-cicd","level":4,"title":"<code>ci</code>: CI/CD","text":"<p>Changes to CI configuration:</p> <pre><code>ci: add automated testing workflow\nci: upgrade GitHub Actions to latest versions\nci: fix broken build configuration\nci: require approval environment for PR CI\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#build-build-system","level":4,"title":"<code>build</code>: Build System","text":"<p>Changes to build system or dependencies:</p> <pre><code>build: add SQLite development dependency\nbuild: update shard.lock for latest dependencies\nbuild: add Vite configuration for inspector UI\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#scopes","level":2,"title":"Scopes","text":"<p>Scopes indicate which component/module is affected.</p>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#defined-scopes","level":3,"title":"Defined Scopes","text":"Scope Description <code>server</code> Tunnel server components <code>cli</code> CLI client components <code>core</code> Shared protocol/types <code>web</code> Inspector UI <code>ws</code> WebSocket protocol/handling <code>db</code> Database/storage layer <code>protocol</code> Protocol message handling <code>registry</code> Tunnel registry <code>gateway</code> WebSocket gateway <code>ingress</code> HTTP ingress handler <code>client</code> Tunnel client logic <code>inspector</code> Request inspector <code>caddy</code> Caddy integration","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#scope-examples","level":3,"title":"Scope Examples","text":"<pre><code>feat(server): add custom domain validation\nfeat(cli): implement auto-reconnect with backoff\nfeat(core): add WebSocket frame serialization\nfeat(web): add request/response filters\nfix(ws): handle malformed WebSocket frames\nfix(server): prevent race condition in tunnel registration\nfeat(cli): display route table on tunnel connect\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#examples","level":2,"title":"Examples","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#simple-commit-no-body","level":3,"title":"Simple Commit (No Body)","text":"<pre><code>feat(cli): add --timeout flag for connection timeout\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#commit-with-body","level":3,"title":"Commit with Body","text":"<pre><code>feat(server): implement reserved subdomain persistence\n\nReserved subdomains are now persisted to SQLite and survive\nserver restarts. This prevents race conditions where clients\ncould claim previously reserved subdomains.\n\nThe implementation adds a new Storage module that handles all\ndatabase operations, keeping the registry logic clean.\n\nCloses #78\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#bug-fix","level":3,"title":"Bug Fix","text":"<pre><code>fix(server): handle WebSocket disconnection gracefully\n\nPreviously, when a WebSocket connection closed unexpectedly,\npending requests would hang indefinitely. Now, all pending\nrequests are cleaned up and return 502 Bad Gateway.\n\nFixes #102\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#breaking-change","level":3,"title":"Breaking Change","text":"<pre><code>feat(server): change tunnel registration API format\n\nThe tunnel registration message format has changed to include\nadditional metadata. Old clients will not be compatible with\nnew servers.\n\nBREAKING CHANGE: Tunnel registration now requires `metadata` field\nin RegisterTunnel message. Clients must be updated to include this\nfield.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#documentation","level":3,"title":"Documentation","text":"<pre><code>docs: clarify usage of --auth flag\n\nThe --auth flag now includes better examples and explains\nthe difference between tunnel authentication and API key\nauthentication.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#refactoring","level":3,"title":"Refactoring","text":"<pre><code>refactor(server): extract tunnel registry into separate module\n\nThe tunnel registry logic has been extracted from the main\nserver class into a dedicated TunnelRegistry module. This improves\ntestability and makes the code easier to understand.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#performance","level":3,"title":"Performance","text":"<pre><code>perf(server): optimize MessagePack serialization for protocol messages\n\nMessagePack serialization is now 2x faster by reusing buffers and\nreducing allocations. This is especially noticeable under high load\nwith many concurrent tunnels.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#testing","level":3,"title":"Testing","text":"<pre><code>test(core): add comprehensive protocol message serialization tests\n\nAdded tests for all protocol message types, including edge cases\nlike empty strings, large payloads, and malformed data.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#chores","level":3,"title":"Chores","text":"<pre><code>chore: upgrade to Crystal 1.10.0\n\nThis upgrade includes bug fixes and performance improvements.\nAll tests pass with the new version.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#1-use-imperative-mood","level":3,"title":"1. Use Imperative Mood","text":"<pre><code># Good\nfeat(cli): add timeout flag\n\n# Bad\nfeat(cli): added timeout flag\nfeat(cli): adding timeout flag\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#2-keep-description-short","level":3,"title":"2. Keep Description Short","text":"<pre><code># Good\nfix(server): handle WebSocket close during request\n\n# Bad\nfix(server): handle the case where WebSocket connection closes\nduring an active HTTP request\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#3-explain-what-and-why-in-body","level":3,"title":"3. Explain What and Why in Body","text":"<pre><code># Good\nfeat(server): add rate limiting for tunnel registration\n\nTo prevent abuse, tunnel registration is now rate-limited to\n10 registrations per minute per IP address. This prevents\na single client from exhausting available subdomains.\n\n# Bad\nfeat(server): add rate limiting\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#4-reference-issues","level":3,"title":"4. Reference Issues","text":"<pre><code># Good\nfeat(cli): add custom timeout flag\n\nCloses #123\nRefs #456\n\n# Bad\nfeat(cli): add custom timeout flag\n# See issue 123\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#5-one-commit-per-logical-change","level":3,"title":"5. One Commit Per Logical Change","text":"<pre><code># Good: Separate commits\nfeat(cli): add timeout flag\ntest(cli): add timeout flag tests\ndocs: document timeout flag usage\n\n# Bad: All in one commit\nfeat(cli): add timeout flag, tests, and documentation\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#6-make-commits-atomic","level":3,"title":"6. Make Commits Atomic","text":"<p>Each commit should be a self-contained unit that can be reverted if needed:</p> <pre><code># Good: Atomic commit\nfeat(server): add tunnel registration rate limiting\n\n# Bad: Non-atomic (changes multiple things)\nfeat(server): add rate limiting and fix formatting bug\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#7-limit-line-length","level":3,"title":"7. Limit Line Length","text":"<pre><code># Good: Lines wrapped at 72 characters\nfeat(server): add rate limiting for tunnel registration\n\nTo prevent abuse, tunnel registration is now rate-limited to\n10 registrations per minute per IP address. This prevents\na single client from exhausting available subdomains.\n\n# Bad: Long lines\nfeat(server): add rate limiting for tunnel registration\n\nTo prevent abuse, tunnel registration is now rate-limited to 10 registrations per minute per IP address. This prevents a single client from exhausting available subdomains.\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#reverting-commits","level":2,"title":"Reverting Commits","text":"<p>Use the <code>revert</code> type to revert previous commits:</p> <pre><code>revert: feat(cli): add custom timeout flag\n\nThis reverts commit abc123 which introduced the timeout flag\ndue to compatibility issues with older servers.\n\nRefs #150\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#commit-message-template","level":2,"title":"Commit Message Template","text":"<p>Use this template for writing commit messages:</p> <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#example-template-filled-out","level":3,"title":"Example Template Filled Out","text":"<pre><code>feat(cli): add custom timeout flag for connections\n\nAdd a new --timeout flag that allows users to specify a custom\nconnection timeout in seconds. The default timeout remains 30 seconds.\n\nThe timeout applies to:\n- Initial connection to the server\n- WebSocket handshake\n- Tunnel registration\n\nCloses #123\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#tools-and-automation","level":2,"title":"Tools and Automation","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#commit-linting","level":3,"title":"Commit Linting","text":"<p>The project may use commitlint to enforce commit message format:</p> <pre><code># .commitlintrc.json\n{\n  \"extends\": [\n    \"@commitlint/config-conventional\"\n  ],\n  \"rules\": {\n    \"type-enum\": [2, \"always\", [\"feat\", \"fix\", \"docs\", \"style\", \"refactor\", \"perf\", \"test\", \"chore\", \"ci\", \"build\", \"revert\"]],\n    \"scope-enum\": [2, \"always\", [\"server\", \"cli\", \"core\", \"web\", \"db\", \"protocol\"]]\n  }\n}\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#commit-message-hooks","level":3,"title":"Commit Message Hooks","text":"<p>Install git hooks to validate commit messages:</p> <pre><code>#!/bin/bash\n# .git/hooks/commit-msg\n\ncommit_regex='^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)(\\(.+\\))?: .{1,72}$'\n\nif ! grep -qE \"$commit_regex\" \"$1\"; then\n  echo \"Invalid commit message format. Please use conventional commits.\"\n  echo \"Example: feat(cli): add timeout flag\"\n  exit 1\nfi\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#common-mistakes","level":2,"title":"Common Mistakes","text":"","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#mistake-1-too-general","level":3,"title":"Mistake 1: Too General","text":"<pre><code># Bad\nfix: fix bug\n\n# Good\nfix(server): handle WebSocket close during request\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#mistake-2-missing-context","level":3,"title":"Mistake 2: Missing Context","text":"<pre><code># Bad\nfeat: add flag\n\n# Good\nfeat(cli): add --timeout flag for connection timeout\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#mistake-3-mixing-types","level":3,"title":"Mistake 3: Mixing Types","text":"<pre><code># Bad\nfeat/fix: add flag and fix bug\n\n# Good (split into two commits)\nfeat(cli): add --timeout flag\nfix(cli): handle timeout error correctly\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#mistake-4-not-following-format","level":3,"title":"Mistake 4: Not Following Format","text":"<pre><code># Bad\nAdded timeout flag to CLI\n\n# Good\nfeat(cli): add --timeout flag for connection timeout\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#changelog-generation","level":2,"title":"Changelog Generation","text":"<p>Conventional commits enable automatic changelog generation using tools like conventional-changelog:</p> <pre><code># Generate changelog\nnpx conventional-changelog -p angular -i CHANGELOG.md -s\n\n# Output:\n## Features\n* **cli:** add --timeout flag for connection timeout (abc123)\n\n## Bug Fixes\n* **server:** handle WebSocket close during request (def456)\n</code></pre>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#further-reading","level":2,"title":"Further Reading","text":"<ul> <li>Conventional Commits Specification</li> <li>Conventional Changelog</li> <li>Commitlint</li> <li>How to Write a Git Commit Message</li> </ul>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/commit-messages/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Code Style - Write clean code</li> <li>Workflow - Submit your changes</li> <li>Testing - Test your changes</li> </ul>","path":["02 developer","Contributing","Commit Messages"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/","level":1,"title":"Reporting Bugs","text":"<p>This guide explains how to report bugs effectively to help us fix them quickly.</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Before Reporting</li> <li>How to Report</li> <li>Bug Report Template</li> <li>What to Include</li> <li>After Reporting</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#before-reporting","level":2,"title":"Before Reporting","text":"","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#check-for-existing-issues","level":3,"title":"Check for Existing Issues","text":"<p>Search existing issues to avoid duplicates:</p> <ol> <li>Use the search bar at the top of the Issues page</li> <li>Try different keywords related to your problem</li> <li>Check both open and closed issues</li> </ol> <p>Search terms to try: - Error message text - Component name (e.g., \"WebSocket\", \"tunnel\", \"inspector\") - Action you were performing (e.g., \"connecting\", \"registering\")</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#verify-youre-using-the-latest-version","level":3,"title":"Verify You're Using the Latest Version","text":"<p>Bugs may already be fixed in newer versions:</p> <pre><code># Check your version\n./bin/sellia version\n\n# Or\n./bin/sellia-server --help\n</code></pre> <p>If you're not using the latest version:</p> <pre><code># Update your installation\ngit pull origin main\nshards build --release\n\n# Verify version\n./bin/sellia version\n</code></pre>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#try-to-reproduce-the-issue","level":3,"title":"Try to Reproduce the Issue","text":"<p>Before reporting, try to reproduce the bug consistently:</p> <ol> <li>Write down the exact steps you took</li> <li>Note when the bug occurs (every time? sometimes?)</li> <li>Try on a fresh installation</li> <li>Try with minimal configuration</li> </ol>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#check-for-common-issues","level":3,"title":"Check for Common Issues","text":"<p>Review common issues and solutions to see if your problem is already documented.</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#how-to-report","level":2,"title":"How to Report","text":"","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#create-a-github-issue","level":3,"title":"Create a GitHub Issue","text":"<ol> <li>Go to github.com/watzon/sellia/issues</li> <li>Click \"New Issue\"</li> <li>Choose \"Bug Report\" template (if available)</li> <li>Fill in the required information</li> <li>Submit the issue</li> </ol>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#use-a-clear-title","level":3,"title":"Use a Clear Title","text":"<p>A good title helps us understand the problem immediately:</p> <p>Good titles: - \"WebSocket connection fails after 30 seconds on macOS\" - \"Tunnel registration throws 'subdomain exists' error for unique subdomain\" - \"Inspector UI shows corrupted response body for binary data\"</p> <p>Poor titles: - \"Bug\" - \"Help me\" - \"Not working\" - \"Sellia is broken\"</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#bug-report-template","level":2,"title":"Bug Report Template","text":"<p>Use this template when reporting bugs:</p> <p><pre><code>### Description\n\nA clear and concise description of what the bug is.\n\n### Reproduction Steps\n\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n**Expected Behavior:**\n\nA clear description of what you expected to happen.\n\n**Actual Behavior:**\n\nA clear description of what actually happened.\n\n### Environment\n\n- **OS:** [e.g., macOS 14.0, Ubuntu 22.04]\n- **Crystal Version:** [e.g., 1.10.0]\n- **Node.js Version:** [e.g., 18.17.0]\n- **Sellia Version:** [e.g., 0.1.0]\n- **Browser (if applicable):** [e.g., Chrome 118, Safari 17]\n\n### Logs/Error Messages\n</code></pre> Paste error messages or logs here <pre><code>### Screenshots\n\nIf applicable, add screenshots to help explain your problem.\n\n### Additional Context\n\nAdd any other context about the problem here.\n\n- Configuration files (redact sensitive data)\n- Network setup\n- Proxy/firewall configuration\n- Related issues or PRs\n</code></pre></p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#what-to-include","level":2,"title":"What to Include","text":"","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#1-clear-description","level":3,"title":"1. Clear Description","text":"<p>Explain the bug in plain language:</p> <pre><code>### Description\n\nWhen creating a tunnel with a custom subdomain using the --subdomain flag,\nthe tunnel is created but requests to the tunnel URL return 404 Not Found.\nThis happens every time, regardless of the subdomain used.\n</code></pre>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#2-reproduction-steps","level":3,"title":"2. Reproduction Steps","text":"<p>Provide detailed, numbered steps to reproduce:</p> <pre><code>### Reproduction Steps\n\n1. Start the server:\n   `./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io`\n\n2. Start a simple HTTP server on port 8080:\n   `python3 -m http.server 8080`\n\n3. Create a tunnel with custom subdomain:\n   `./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain myapp`\n\n4. Try to access the tunnel:\n   `curl http://myapp.127.0.0.1.nip.io:3000`\n\n5. Observe 404 error instead of expected response\n</code></pre>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#3-expected-vs-actual-behavior","level":3,"title":"3. Expected vs Actual Behavior","text":"<p>Clearly state what should happen vs. what does happen:</p> <pre><code>**Expected Behavior:**\n\nThe curl request should return the directory listing from the Python HTTP\nserver running on port 8080.\n\n**Actual Behavior:**\n\nThe request returns \"404 Not Found\" with no response body.\n</code></pre>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#4-environment-details","level":3,"title":"4. Environment Details","text":"<p>Include your system information:</p> <pre><code>### Environment\n\n- **OS:** macOS 14.0 (Sonoma)\n- **Crystal Version:** 1.10.1\n- **Node.js Version:** 18.17.0\n- **Sellia Version:** 0.1.2 (built from source at commit abc123)\n- **Architecture:** arm64 (Apple Silicon)\n</code></pre>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#5-error-messages-and-logs","level":3,"title":"5. Error Messages and Logs","text":"<p>Include complete error messages and relevant logs:</p> <p><pre><code>### Logs/Error Messages\n\n**Server logs:**\n</code></pre> [INFO] [Sellia Server] Listening on http://0.0.0.0:3000 [INFO] [Sellia Server] Domain: 127.0.0.1.nip.io [DEBUG] [WSGateway] Client connecting from 127.0.0.1:54321 [DEBUG] [Registry] Registering tunnel: myapp -&gt; client-123 [DEBUG] [HTTPIngress] Incoming request: GET / HTTP/1.1 [ERROR] [HTTPIngress] Tunnel not found: myapp <pre><code>**CLI logs:**\n</code></pre> [INFO] [Sellia] Connecting to server: http://127.0.0.1:3000 [INFO] [Sellia] Tunnel registered: myapp.127.0.0.1.nip.io:3000 [DEBUG] [TunnelClient] Waiting for requests... <pre><code>\n</code></pre></p> <p>Tips for logs: - Use debug logging: <code>LOG_LEVEL=debug</code> - Redact sensitive information (API keys, passwords) - Include timestamps if relevant - Show both server and client logs if applicable</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#6-screenshots","level":3,"title":"6. Screenshots","text":"<p>For UI issues, screenshots are very helpful:</p> <pre><code>### Screenshots\n\n**Inspector UI showing corrupted response:**\n![inspector-bug](https://i.imgur.com/...)\n\n**Expected display:**\n![expected](https://i.imgur.com/...)\n</code></pre> <p>Tips for screenshots: - Show the entire window when relevant - Highlight the problematic area - Include before/after when applicable - Keep file sizes reasonable (&lt; 2MB)</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#7-configuration-files","level":3,"title":"7. Configuration Files","text":"<p>If the bug is configuration-related, include sanitized config:</p> <p><pre><code>### Configuration\n\n**sellia.yml:**\n```yaml\nserver: http://127.0.0.1:3000\napi_key: &lt;redacted&gt;\n\ntunnels:\n  myapp:\n    port: 3000\n    subdomain: myapp\n</code></pre> <pre><code>**Important:** Redact sensitive information before sharing!\n\n### 8. Minimal Reproduction Case\n\nIf possible, provide a minimal example that reproduces the bug:\n\n```markdown\n### Minimal Reproduction\n\nI've created a minimal example that reproduces the issue:\n\n```bash\n# Start server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Create simple echo server\necho 'require \"http/server\"; server = HTTP::Server.new { |ctx| ctx.response.print(\"OK\") }; server.bind(8080); server.listen' &gt; echo_server.cr\ncrystal run echo_server.cr\n\n# Create tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain test\n\n# Test\ncurl http://test.127.0.0.1.nip.io:3000\n# Returns: 404 Not Found (expected: \"OK\")\n</code></pre> <pre><code>## Bug Categories\n\n### Connection Issues\n\nWhen reporting connection problems:\n\n```markdown\n### Category: Connection Issue\n\n**Problem:** Tunnel connects but immediately disconnects\n\n**Network Setup:**\n- Direct connection (no proxy)\n- Firewall: macOS built-in firewall enabled\n- Network: Home WiFi\n\n**Connection Test:**\n</code></pre> ping 127.0.0.1.nip.io - OK telnet 127.0.0.1 3000 - OK <pre><code>\n</code></pre></p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#performance-issues","level":3,"title":"Performance Issues","text":"<p>When reporting slow performance:</p> <p><pre><code>### Category: Performance\n\n**Problem:** Requests take &gt; 5 seconds to complete\n\n**Expected:** &lt; 100ms response time\n**Actual:** 5-10 seconds\n\n**Load:** ~10 concurrent tunnels, ~100 requests/second\n\n**Profiling Data:**\n</code></pre> Request timing breakdown: - WebSocket receive: 10ms - Processing: 4950ms - Response send: 40ms <pre><code>\n</code></pre></p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#security-issues","level":3,"title":"Security Issues","text":"<p>Do NOT report security vulnerabilities through public issues!</p> <p>See Security Disclosure for reporting security issues privately.</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#documentation-issues","level":3,"title":"Documentation Issues","text":"<p>For documentation bugs or unclear documentation:</p> <pre><code>### Category: Documentation\n\n**Page:** https://github.com/watzon/sellia/blob/main/README.md\n**Section:** Installation\n**Problem:** Step 3 mentions running `shards build` but doesn't explain where shards comes from\n\n**Suggested Fix:**\nAdd note that shards is installed with Crystal, or add to prerequisites section.\n</code></pre>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#after-reporting","level":2,"title":"After Reporting","text":"","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#what-to-expect","level":3,"title":"What to Expect","text":"<ol> <li>Confirmation: We'll respond within 48 hours</li> <li>Clarification: We may ask for more information</li> <li>Triaging: The issue will be tagged and prioritized</li> <li>Updates: We'll provide updates on progress</li> </ol>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#stay-engaged","level":3,"title":"Stay Engaged","text":"<ul> <li>Respond to follow-up questions promptly</li> <li>Test proposed fixes if asked</li> <li>Provide additional information as needed</li> <li>Confirm if the issue is resolved</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#issue-labels","level":3,"title":"Issue Labels","text":"<p>We use labels to track issue status:</p> <ul> <li><code>bug</code>: Confirmed bug</li> <li><code>confirmed</code>: Reproduced by maintainers</li> <li><code>needs-info</code>: Needs more information</li> <li><code>in-progress</code>: Being worked on</li> <li><code>good first issue</code>: Good for new contributors</li> <li><code>help wanted</code>: Contributions welcome</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#do","level":3,"title":"DO:","text":"<ul> <li>Search before reporting - Avoid duplicates</li> <li>Be specific - Provide exact steps and details</li> <li>Use debug mode - Enable <code>LOG_LEVEL=debug</code></li> <li>Redact sensitive data - Remove API keys, passwords</li> <li>Test on latest version - Ensure bug still exists</li> <li>Provide minimal reproduction - Help us isolate the issue</li> <li>Use appropriate template - Fill out all required fields</li> <li>One bug per issue - Don't report multiple bugs in one issue</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#dont","level":3,"title":"DON'T:","text":"<ul> <li>Report sensitive issues publicly - Security vulnerabilities go to email</li> <li>Use vague titles - \"Help me\" or \"Broken\" are not helpful</li> <li>Forget environment details - OS, version, etc. are essential</li> <li>Include irrelevant logs - Don't paste entire log files</li> <li>Demand immediate fixes - We're volunteers with limited time</li> <li>Submit the same issue multiple times - Bumping doesn't help</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#examples-of-good-bug-reports","level":2,"title":"Examples of Good Bug Reports","text":"","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#example-1-clear-and-complete","level":3,"title":"Example 1: Clear and Complete","text":"<p><pre><code>### WebSocket connection fails after server running for &gt; 1 hour\n\n**Description:**\nAfter the server runs for approximately 1 hour, new tunnel connections\nfail with \"WebSocket handshake timeout\" error. Existing tunnels continue\nto work.\n\n**Reproduction Steps:**\n1. Start server: `./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io`\n2. Wait ~1 hour (no tunnels active during this time)\n3. Try to create tunnel: `./bin/sellia http 8080 --server http://127.0.0.1:3000`\n4. Observe error\n\n**Expected Behavior:** Tunnel should connect successfully\n\n**Actual Behavior:**\n</code></pre> [ERROR] [TunnelClient] WebSocket handshake timeout after 30s <pre><code>**Environment:**\n- OS: Ubuntu 22.04 LTS\n- Crystal: 1.10.1\n- Sellia: 0.1.2 (commit: abc123)\n\n**Additional Context:**\nRestarting the server fixes the issue temporarily. Happens consistently\nafter ~1 hour of idle time.\n</code></pre></p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#example-2-minimal-reproduction","level":3,"title":"Example 2: Minimal Reproduction","text":"<pre><code>### Tunnel subdomain allows invalid characters\n\n**Description:**\nThe CLI accepts subdomains with invalid characters like @ and !, but\nthe server then rejects them with unclear error message.\n\n**Minimal Reproduction:**\n```bash\n./bin/sellia http 8080 --subdomain \"test@domain\"\n# Returns: \"Tunnel registered\" but tunnel doesn't work\n\ncurl http://test@domain.127.0.0.1.nip.io:3000\n# Returns: \"Bad Request\" from server\n</code></pre> <p>Expected Behavior: CLI should reject invalid subdomains with clear error</p> <p>Actual Behavior: CLI accepts but server fails later</p> <p>Suggested Fix: Validate subdomain format in CLI before sending to server ```</p>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#getting-help","level":2,"title":"Getting Help","text":"<p>If you're not sure if something is a bug:</p> <ol> <li>Check the docs - Ensure you're using it correctly</li> <li>Search issues - See if others have reported it</li> <li>Join discussions - Comment on relevant issues</li> <li>Ask a question - Open an issue with the \"question\" label</li> </ol>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#related-resources","level":2,"title":"Related Resources","text":"<ul> <li>Contributing Guidelines</li> <li>Debugging Guide</li> <li>Security Disclosure</li> <li>Existing Issues</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/reporting-bugs/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Feature Requests - Suggest new features</li> <li>Contributing Workflow - Submit a fix</li> <li>Development Setup - Start contributing</li> </ul>","path":["02 developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/","level":1,"title":"Suggesting Features","text":"<p>This guide explains how to suggest new features for Sellia effectively.</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Before Suggesting</li> <li>How to Suggest</li> <li>Feature Request Template</li> <li>What Makes a Good Request</li> <li>Feature Categories</li> <li>After Submitting</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#before-suggesting","level":2,"title":"Before Suggesting","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#check-for-existing-requests","level":3,"title":"Check for Existing Requests","text":"<p>Search existing issues to avoid duplicates:</p> <ol> <li>Use the search bar with keywords</li> <li>Check both open and closed issues</li> <li>Review the ROADMAP for planned features</li> </ol> <p>Search terms to try: - Feature name or concept - Related component (e.g., \"TCP tunnel\", \"custom domain\") - Use case (e.g., \"database access\", \"SSH tunneling\")</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#review-the-roadmap","level":3,"title":"Review the Roadmap","text":"<p>Check the ROADMAP to see: - What's already planned - Current development priorities - What's in scope for the open-source project</p> <p>Note: Multi-tenancy, billing, and enterprise SaaS features are explicitly out of scope for the open-source version.</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#consider-self-hosting","level":3,"title":"Consider Self-Hosting","text":"<p>Some requests may be better addressed by self-hosting:</p> <ul> <li>Custom configuration - May be possible with config files</li> <li>Integrations - May be achievable with custom scripts</li> <li>Deployment - May be solved with Docker or custom orchestration</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#think-through-the-problem","level":3,"title":"Think Through the Problem","text":"<p>Before requesting, consider: - What problem are you trying to solve? - How would this feature help? - Who would benefit from this feature? - Are there alternative solutions?</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#how-to-suggest","level":2,"title":"How to Suggest","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#create-a-github-issue","level":3,"title":"Create a GitHub Issue","text":"<ol> <li>Go to github.com/watzon/sellia/issues</li> <li>Click \"New Issue\"</li> <li>Choose \"Feature Request\" template (if available)</li> <li>Fill in the required information</li> <li>Submit the issue</li> </ol>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#use-a-clear-title","level":3,"title":"Use a Clear Title","text":"<p>A good title explains the feature and its benefit:</p> <p>Good titles: - \"Add TCP tunnel support for database connections\" - \"Implement custom domain support for production deployments\" - \"Add request replay functionality to inspector UI\"</p> <p>Poor titles: - \"Feature request\" - \"Please add this\" - \"I need help with...\"</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#feature-request-template","level":2,"title":"Feature Request Template","text":"<p>Use this template when suggesting features:</p> <pre><code>### Feature Description\n\nA clear and concise description of the feature you'd like to see added.\n\n### Problem Statement\n\nWhat problem does this feature solve? What limitation does it address?\n\n### Proposed Solution\n\nHow do you envision this feature working? Provide details about:\n- User-facing behavior\n- Configuration options\n- API changes (if applicable)\n\n### Alternatives Considered\n\nWhat alternative solutions or workarounds have you considered?\nWhy are they insufficient?\n\n### Use Cases\n\nDescribe specific scenarios where this feature would be useful:\n- Use case 1: ...\n- Use case 2: ...\n\n### Benefits\n\nWho would benefit from this feature and how?\n- End users\n- Developers\n- Operators\n\n### Drawbacks/Risks\n\nAny potential downsides, risks, or concerns:\n- Performance impact\n- Complexity increase\n- Breaking changes\n\n### Implementation Details (Optional)\n\nIf you have thoughts on implementation:\n- Technical approach\n- Areas of codebase affected\n- Dependencies required\n- Rough effort estimate\n\n### Examples/Mockups (Optional)\n\nScreenshots, mockups, or examples:\n- UI mockups\n- Example config files\n- API usage examples\n\n### Additional Context\n\nAdd any other context, screenshots, or examples about the feature request.\n</code></pre>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#what-makes-a-good-request","level":2,"title":"What Makes a Good Request","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#1-clear-problem-statement","level":3,"title":"1. Clear Problem Statement","text":"<p>Explain what problem you're trying to solve:</p> <pre><code>### Problem Statement\n\nI need to expose my PostgreSQL database to remote developers for\ncollaboration and debugging. Currently, I can only tunnel HTTP services,\nwhich doesn't work for database connections that use the PostgreSQL protocol.\n</code></pre>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#2-proposed-solution","level":3,"title":"2. Proposed Solution","text":"<p>Describe how the feature should work:</p> <pre><code>### Proposed Solution\n\nAdd a new command similar to `sellia http` for TCP tunnels:\n\n```bash\nsellia tcp 5432 --subdomain my-db\n</code></pre> <p>This would: - Create a TCP tunnel to the local PostgreSQL database - Assign a subdomain:port combo (e.g., my-db.127.0.0.1.nip.io:3000) - Forward raw TCP traffic (not HTTP) <pre><code>### 3. Use Cases\n\nProvide **concrete examples** of how you'd use it:\n\n```markdown\n### Use Cases\n\n**Use Case 1: Remote Database Access**\nDevelopers working remotely need direct access to the development database.\nWith TCP tunnels, they can connect using standard PostgreSQL tools:\n\n```bash\npsql -h myapp-db.127.0.0.1.nip.io -p 3000 -U devuser -d myapp_dev\n</code></pre></p> <p>Use Case 2: Redis Debugging When debugging Redis caching issues, I need to connect to the local Redis instance from remote machines for inspection.</p> <p>Use Case 3: SSH Tunneling For maintenance tasks, I need to SSH into servers behind NAT/firewalls. <pre><code>### 4. Alternatives Considered\n\nShow you've **thought about alternatives**:\n\n```markdown\n### Alternatives Considered\n\n**Alternative 1: VPN**\n- Pros: Full network access\n- Cons: Complex setup, requires client software, not portable\n- Why insufficient: Overkill for simple database access\n\n**Alternative 2: ngrok's TCP tunnels**\n- Pros: Already supports TCP\n- Cons: Not self-hosted, usage limits, cost\n- Why insufficient: We need to self-host for compliance reasons\n\n**Alternative 3: SSH tunneling**\n- Pros: Built into SSH\n- Cons: Requires SSH access, manual setup per developer\n- Why insufficient: Want something more user-friendly\n</code></pre></p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#5-implementation-ideas","level":3,"title":"5. Implementation Ideas","text":"<p>If you have technical thoughts, share them:</p> <pre><code>### Implementation Details\n\n**Protocol:**\nThe protocol already supports arbitrary byte streams over WebSocket.\nWould need to add:\n- `RegisterTcpTunnel` message type\n- TCP port allocation in server\n- TCP forwarding handler (similar to HTTP ingress)\n\n**Port Allocation:**\n- Suggest configurable port ranges (e.g., 5000-6000 for TCP tunnels)\n- Track allocations in tunnel registry\n\n**Complexity:**\n- Medium complexity\n- Similar to existing HTTP tunnel flow\n- Main risk: port exhaustion\n</code></pre>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#feature-categories","level":2,"title":"Feature Categories","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#core-tunneling-features","level":3,"title":"Core Tunneling Features","text":"<p>For enhancements to tunneling capabilities:</p> <pre><code>### Feature: UDP Protocol Support\n\n**Problem:**\nNeed to tunnel UDP-based services like DNS, syslog, or game servers.\n\n**Proposed Solution:**\nAdd UDP tunnel support similar to TCP/HTTP tunnels.\n\n**Use Cases:**\n- DNS server debugging\n- Log aggregation\n- Real-time game development\n</code></pre>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#inspector-ui-features","level":3,"title":"Inspector UI Features","text":"<p>For improvements to the web inspector:</p> <pre><code>### Feature: Request/Response Modification\n\n**Problem:**\nWhen debugging webhook handlers, I need to test different payloads\nwithout modifying the sending application.\n\n**Proposed Solution:**\nAdd \"Edit &amp; Resend\" feature in inspector UI that allows modifying\nrequest body/headers and replaying the request.\n\n**Use Cases:**\n- Testing webhook handlers with different payloads\n- Trying different authentication headers\n- Debugging API edge cases\n</code></pre>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#cli-features","level":3,"title":"CLI Features","text":"<p>For command-line interface improvements:</p> <pre><code>### Feature: Tunnels Profile Management\n\n**Problem:**\nI work on multiple projects and constantly switch between different\ntunnel configurations. Typing all the flags each time is tedious.\n\n**Proposed Solution:**\nAdd profile management:\n\n```bash\nsellia profile save project1 --port 3000 --subdomain myapp\nsellia profile use project1  # Starts tunnel with saved config\nsellia profile list          # Lists all profiles\n</code></pre> <p>Use Cases: - Quick switching between projects - Sharing tunnel configs with team - Version control tunnel configurations <pre><code>### Server Features\n\nFor server-side functionality:\n\n```markdown\n### Feature: IP Allowlisting\n\n**Problem:**\nI want to expose internal tools to specific office locations but\nkeep them private from the rest of the internet.\n\n**Proposed Solution:**\nAdd IP allowlisting per tunnel or globally:\n\n```bash\nsellia http 3000 --allow 192.168.1.0/24 --allow 10.0.0.0/8\n</code></pre></p> <p>Use Cases: - Restricting internal tools to office networks - Compliance requirements for data access - Multi-tenant deployments with access controls <pre><code>### DevOps/Deployment\n\nFor deployment and operations improvements:\n\n```markdown\n### Feature: Kubernetes Deployment Manifests\n\n**Problem:**\nWe deploy everything on Kubernetes and would like to run Sellia\nin our cluster.\n\n**Proposed Solution:**\nProvide Helm charts or Kubernetes manifests for deployment.\n\n**Use Cases:**\n- Self-hosting in Kubernetes\n- Horizontal scaling of tunnel servers\n- Integration with existing K8s infrastructure\n</code></pre></p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#developer-experience","level":3,"title":"Developer Experience","text":"<p>For improvements to developer workflows:</p> <pre><code>### Feature: Language Client Libraries\n\n**Problem:**\nIntegrating Sellia into applications requires implementing the\nWebSocket protocol manually.\n\n**Proposed Solution:**\nProvide official client libraries for popular languages (Python, Go, Rust).\n\n**Use Cases:**\n- Programmatic tunnel creation from applications\n- Testing frameworks that need temporary tunnels\n- Custom tooling\n</code></pre>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#evaluation-criteria","level":2,"title":"Evaluation Criteria","text":"<p>Features are evaluated based on:</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#1-alignment-with-project-goals","level":3,"title":"1. Alignment with Project Goals","text":"<ul> <li>Does it fit the self-hosted ngrok alternative use case?</li> <li>Is it within scope (not enterprise/SaaS features)?</li> <li>Does it benefit the target audience?</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#2-demand-and-use-cases","level":3,"title":"2. Demand and Use Cases","text":"<ul> <li>How many people would use it?</li> <li>Are the use cases compelling and realistic?</li> <li>Is there significant community interest?</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#3-implementation-feasibility","level":3,"title":"3. Implementation Feasibility","text":"<ul> <li>Can it be implemented reasonably?</li> <li>What's the complexity and effort required?</li> <li>Are there technical blockers?</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#4-maintenance-burden","level":3,"title":"4. Maintenance Burden","text":"<ul> <li>Will it significantly increase maintenance?</li> <li>Does it add dependencies or complexity?</li> <li>Can it be tested effectively?</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#5-breaking-changes","level":3,"title":"5. Breaking Changes","text":"<ul> <li>Does it require breaking existing functionality?</li> <li>Is migration possible for existing users?</li> <li>What's the impact on the ecosystem?</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#what-happens-next","level":2,"title":"What Happens Next","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#issue-triage","level":3,"title":"Issue Triage","text":"<p>After submission:</p> <ol> <li>Labeling - Issue will be tagged (enhancement, needs-discussion, etc.)</li> <li>Discussion - Community and maintainers will discuss</li> <li>Evaluation - We'll evaluate against criteria above</li> <li>Decision - Accepted, deferred, or rejected</li> </ol>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#possible-outcomes","level":3,"title":"Possible Outcomes","text":"<p>Accepted: - Added to roadmap - Prioritized for upcoming milestone - Assigned to a milestone</p> <p>Needs Discussion: - Community discussion encouraged - Clarifying questions asked - May result in refined proposal</p> <p>Deferred: - Good idea but not right now - May be reconsidered later - Added to \"Future Considerations\"</p> <p>Rejected: - Doesn't align with project goals - Out of scope (e.g., enterprise features) - Technical blockers - You'll receive explanation</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#contributing-the-feature","level":2,"title":"Contributing the Feature","text":"<p>If your feature request is accepted:</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#1-design-discussion","level":3,"title":"1. Design Discussion","text":"<p>We'll work through the design together: - API surface - Configuration options - User experience - Implementation approach</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#2-implementation","level":3,"title":"2. Implementation","text":"<p>You can contribute the implementation: - See Contributing Workflow - Follow Code Style - Write Tests</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#3-review-and-merge","level":3,"title":"3. Review and Merge","text":"<ul> <li>Submit as a PR when ready</li> <li>We'll review together</li> <li>Iterate based on feedback</li> <li>Merge when complete</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#examples-of-good-feature-requests","level":2,"title":"Examples of Good Feature Requests","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#example-1-complete-and-thoughtful","level":3,"title":"Example 1: Complete and Thoughtful","text":"<pre><code>### Add TCP tunnel support for database and SSH connections\n\n**Problem Statement:**\nOur team needs to access development databases and internal servers\nthat are behind NAT/firewalls. HTTP-only tunneling doesn't work for\nPostgreSQL, MySQL, SSH, or other TCP-based protocols.\n\n**Proposed Solution:**\nImplement TCP tunneling similar to `ngrok tcp`:\n\n```bash\nsellia tcp 5432 --subdomain my-db\n# Returns: TCP tunnel available at my-db.127.0.0.1.nip.io:5000\n</code></pre> <p>Protocol Design: 1. Client opens WebSocket to server 2. Sends <code>RegisterTcpTunnel</code> message with requested port 3. Server allocates port from configured range (e.g., 5000-6000) 4. Server listens on allocated port 5. Incoming TCP connections on server port are forwarded via WebSocket 6. Client forwards to local TCP service</p> <p>Configuration: <pre><code># sellia-server config\ntcp_port_range: \"5000-6000\"\nmax_tcp_tunnels: 100\n</code></pre></p> <p>Use Cases: - Database Access: Remote PostgreSQL/MySQL access for developers - SSH Tunneling: Access servers behind NAT - Redis Debugging: Connect to local Redis from remote - Custom Protocols: Any TCP-based service (LDAP, RDP, etc.)</p> <p>Alternatives Considered: - VPN: Too complex, requires client software - SSH port forwarding: Manual, not user-friendly - ngrok: Not self-hosted, usage limits</p> <p>Benefits: - Expands Sellia beyond HTTP/HTTPS - Enables new use cases (databases, SSH) - Competitive feature with ngrok</p> <p>Drawbacks: - Increases complexity - Port management challenges - Security considerations (exposing raw TCP)</p> <p>Implementation Effort: - Medium complexity (~2-3 weeks) - Requires:   - Protocol message for TCP registration   - TCP server component   - Port allocation logic   - TCP forwarding over WebSocket</p> <p>References: - ngrok's TCP implementation - SSH tunneling as reference <pre><code>### Example 2: Focused and Specific\n\n```markdown\n### Add `--log-level` flag to control verbosity\n\n**Problem:**\nDebug logging is all-or-nothing with `LOG_LEVEL=debug`. There's no\nway to get warnings/errors without verbose debug output.\n\n**Proposed Solution:**\nAdd log level flag:\n\n```bash\nsellia http 3000 --log-level warn\n</code></pre></p> <p>Levels: error, warn, info, debug</p> <p>Use Cases: - Production deployments want only errors - Development wants debug - Testing wants info</p> <p>Benefits: - Better production logs - Reduced log volume - Industry-standard approach</p> <p>Simple Implementation: Just add standard log levels to existing logger. ```</p>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#do","level":3,"title":"DO:","text":"<ul> <li>Search first - Check for duplicates and roadmap</li> <li>Be specific - Provide concrete use cases and examples</li> <li>Think big picture - Consider the broader ecosystem</li> <li>Consider alternatives - Show you've thought of other approaches</li> <li>Stay engaged - Participate in the discussion</li> <li>Be open to feedback - Your idea may evolve</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#dont","level":3,"title":"DON'T:","text":"<ul> <li>Demand immediate implementation - We're volunteers</li> <li>Request enterprise features - Billing, multi-tenancy, etc. are out of scope</li> <li>Be vague - \"Make it better\" isn't helpful</li> <li>Ignore the roadmap - Check what's already planned</li> <li>Forget the why - Explain the problem, not just the solution</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#after-submitting","level":2,"title":"After Submitting","text":"<p>What to expect after you open a feature request:</p> <ul> <li>Maintainers may ask clarifying questions</li> <li>The request may be tagged and triaged against the roadmap</li> <li>If accepted, it may be scheduled for a future milestone</li> <li>You are welcome to contribute an implementation</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#related-resources","level":2,"title":"Related Resources","text":"<ul> <li>Roadmap - See what's planned</li> <li>Contributing Workflow - Implement the feature</li> <li>Reporting Bugs - Report issues instead</li> <li>Existing Issues - Search and discuss</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/suggesting-features/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Contributing Workflow - Start implementing</li> <li>Development Setup - Set up environment</li> <li>Code Style - Write clean code</li> </ul>","path":["02 developer","Contributing","Suggesting Features"],"tags":[]},{"location":"02-developer/contributing/workflow/","level":1,"title":"Contribution Workflow","text":"<p>This document outlines the complete workflow for contributing to Sellia, from forking to merging.</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Getting Started</li> <li>Setting Up Your Fork</li> <li>Branching Strategy</li> <li>Making Changes</li> <li>Submitting a Pull Request</li> <li>Code Review Process</li> <li>Addressing Feedback</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#getting-started","level":2,"title":"Getting Started","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#prerequisites","level":3,"title":"Prerequisites","text":"<p>Before contributing, ensure you have: - Read and understood the Code of Conduct - Set up the development environment - Familiarized yourself with the codebase - Reviewed the code style guidelines</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#create-your-fork","level":3,"title":"Create Your Fork","text":"<ol> <li>Fork the repository</li> <li>Go to github.com/watzon/sellia</li> <li>Click the \"Fork\" button in the top-right corner</li> <li> <p>Choose your GitHub account as the destination</p> </li> <li> <p>Clone your fork locally</p> </li> </ol> <pre><code>git clone https://github.com/YOUR_USERNAME/sellia.git\ncd sellia\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#setting-up-your-fork","level":2,"title":"Setting Up Your Fork","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#add-upstream-remote","level":3,"title":"Add Upstream Remote","text":"<p>Add the original repository as an upstream remote to keep your fork synchronized:</p> <pre><code>cd sellia\ngit remote add upstream https://github.com/watzon/sellia.git\n\n# Verify remotes\ngit remote -v\n# Should show:\n# origin    https://github.com/YOUR_USERNAME/sellia.git (fetch)\n# origin    https://github.com/YOUR_USERNAME/sellia.git (push)\n# upstream  https://github.com/watzon/sellia.git (fetch)\n# upstream  https://github.com/watzon/sellia.git (push)\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#install-dependencies","level":3,"title":"Install Dependencies","text":"<pre><code># Install Crystal dependencies\nshards install\n\n# Install inspector UI dependencies\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n\n# Build the project\nshards build\n\n# Run tests to verify setup\ncrystal spec\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#configure-git","level":3,"title":"Configure Git","text":"<p>Ensure your git identity is configured:</p> <pre><code>git config user.name \"Your Name\"\ngit config user.email \"your-email@example.com\"\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#branching-strategy","level":2,"title":"Branching Strategy","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#main-branch","level":3,"title":"Main Branch","text":"<ul> <li><code>main</code>: The stable, production-ready branch</li> <li>Protected from direct pushes</li> <li>All changes go through pull requests</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#your-branches","level":3,"title":"Your Branches","text":"<p>Create branches from <code>main</code> for your work:</p> <pre><code># Ensure your main is up to date\ngit checkout main\ngit fetch upstream\ngit rebase upstream/main\n\n# Create a new branch for your work\ngit checkout -b feature/your-feature-name\n# or\ngit checkout -b fix/your-bug-fix\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#branch-naming-conventions","level":3,"title":"Branch Naming Conventions","text":"<p>Use descriptive branch names:</p> <ul> <li><code>feature/add-tcp-tunnels</code> - New features</li> <li><code>fix/websocket-timeout</code> - Bug fixes</li> <li><code>docs/update-api-guide</code> - Documentation updates</li> <li><code>refactor/tunnel-registry</code> - Code refactoring</li> <li><code>test/add-protocol-tests</code> - Adding tests</li> <li><code>chore/update-dependencies</code> - Maintenance tasks</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#making-changes","level":2,"title":"Making Changes","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#1-make-your-changes","level":3,"title":"1. Make Your Changes","text":"<p>Edit files and implement your feature or fix.</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#2-follow-code-style","level":3,"title":"2. Follow Code Style","text":"<p>Ensure your code follows the code style guidelines:</p> <pre><code># Format Crystal code\ncrystal tool format ./src\n\n# Check formatting (CI will check this)\ncrystal tool format --check ./src\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#3-write-tests","level":3,"title":"3. Write Tests","text":"<p>Add tests for new functionality or bug fixes:</p> <pre><code># Run tests\ncrystal spec\n\n# Run specific test file\ncrystal spec spec/core/protocol/message_spec.cr\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#4-test-your-changes","level":3,"title":"4. Test Your Changes","text":"<p>Test locally before pushing:</p> <pre><code># Run full test suite\ncrystal spec\n\n# Build the project\nshards build\n\n# Test manually if applicable\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#5-commit-your-changes","level":3,"title":"5. Commit Your Changes","text":"<p>Use conventional commits:</p> <pre><code># Stage changes\ngit add .\n\n# Commit with conventional commit message\ngit commit -m \"feat(cli): add custom timeout flag for connections\"\n</code></pre> <p>Example commits: <pre><code># Feature\ngit commit -m \"feat(cli): add --timeout flag for connection timeout\"\n\n# Bug fix\ngit commit -m \"fix(server): handle WebSocket close during request processing\"\n\n# Documentation\ngit commit -m \"docs: update installation instructions for macOS\"\n\n# Test\ngit commit -m \"test(core): add protocol message serialization tests\"\n\n# Refactor\ngit commit -m \"refactor(server): simplify tunnel registry logic\"\n</code></pre></p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#6-sync-with-upstream","level":3,"title":"6. Sync with Upstream","text":"<p>Keep your branch up to date with upstream:</p> <pre><code># Fetch upstream changes\ngit fetch upstream\n\n# Rebase your branch on top of upstream/main\ngit rebase upstream/main\n\n# If there are conflicts, resolve them and continue:\n# Edit files to resolve conflicts\ngit add &lt;resolved-files&gt;\ngit rebase --continue\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#7-push-to-your-fork","level":3,"title":"7. Push to Your Fork","text":"<p>Push your branch to your fork:</p> <pre><code>git push origin feature/your-feature-name\n</code></pre> <p>For force pushing after rebasing (careful!):</p> <pre><code>git push origin feature/your-feature-name --force-with-lease\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#submitting-a-pull-request","level":2,"title":"Submitting a Pull Request","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#1-create-pull-request","level":3,"title":"1. Create Pull Request","text":"<ul> <li>Go to your fork on GitHub</li> <li>Click \"Compare &amp; pull request\" next to your branch</li> <li>Or go to \"Pull requests\" → \"New pull request\"</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#2-fill-in-the-pr-template","level":3,"title":"2. Fill in the PR Template","text":"<p>GitHub will provide a template. Fill in:</p> <p>Title: <pre><code>feat(cli): add custom timeout flag for connections\n</code></pre></p> <p>Description: <pre><code>## Summary\n- Add `--timeout` flag to CLI for custom connection timeout\n- Default timeout is 30 seconds\n- Closes #123\n\n## Changes\n- Added timeout parameter to CLI options\n- Updated tunnel client to use custom timeout\n- Added tests for timeout handling\n\n## Test Plan\n- [x] Unit tests pass\n- [x] Manual testing with various timeout values\n- [x] Tested with `--timeout 5` and `--timeout 60`\n</code></pre></p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#3-link-issues","level":3,"title":"3. Link Issues","text":"<p>Reference related issues:</p> <pre><code>Closes #123\nFixes #456\nRelated to #789\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#4-request-review","level":3,"title":"4. Request Review","text":"<ul> <li>Request review from maintainers</li> <li>Assign relevant reviewers based on changed components</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#code-review-process","level":2,"title":"Code Review Process","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#what-reviewers-look-for","level":3,"title":"What Reviewers Look For","text":"<ol> <li>Correctness: Does the code work as intended?</li> <li>Testing: Are tests adequate and passing?</li> <li>Code Style: Does it follow the style guide?</li> <li>Documentation: Is the code well-documented?</li> <li>Performance: Are there any performance concerns?</li> <li>Security: Are there any security implications?</li> <li>Breaking Changes: Does this break existing functionality?</li> </ol>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#review-timeline","level":3,"title":"Review Timeline","text":"<ul> <li>Initial review typically within 48 hours</li> <li>Complex changes may take longer</li> <li>Follow up politely if no response after 1 week</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#review-outcomes","level":3,"title":"Review Outcomes","text":"<p>Approved: Changes look good, ready to merge (after any CI checks pass)</p> <p>Changes Requested: Address reviewer feedback and push updates</p> <p>Commented: Questions or suggestions, but not blocking merge</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#addressing-feedback","level":2,"title":"Addressing Feedback","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#1-make-requested-changes","level":3,"title":"1. Make Requested Changes","text":"<p>Implement the feedback from reviewers:</p> <pre><code># Make changes\nvim src/some_file.cr\n\n# Test the changes\ncrystal spec\n\n# Commit the changes\ngit commit -m \"fix(server): address review feedback on timeout handling\"\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#2-push-updates","level":3,"title":"2. Push Updates","text":"<p>Push new commits to your branch:</p> <pre><code>git push origin feature/your-feature-name\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#3-respond-to-comments","level":3,"title":"3. Respond to Comments","text":"<p>On GitHub, reply to review comments: - Explain how you addressed the issue - Ask clarifying questions if needed - Mark resolved comments as done</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#squashing-commits-optional","level":3,"title":"Squashing Commits (Optional)","text":"<p>Maintainers may ask you to squash multiple commits:</p> <pre><code># Interactive rebase\ngit rebase -i HEAD~5  # For last 5 commits\n\n# Mark commits to squash (change \"pick\" to \"s\")\n# Save and close\n# Edit the combined commit message\n\n# Force push (careful!)\ngit push origin feature/your-feature-name --force-with-lease\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#after-merge","level":2,"title":"After Merge","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#update-your-fork","level":3,"title":"Update Your Fork","text":"<p>After your PR is merged, update your fork's main branch:</p> <pre><code>git checkout main\ngit fetch upstream\ngit rebase upstream/main\ngit push origin main\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#delete-your-branch","level":3,"title":"Delete Your Branch","text":"<p>Optional: Delete the feature branch locally and remotely:</p> <pre><code># Delete local branch\ngit branch -d feature/your-feature-name\n\n# Delete remote branch\ngit push origin --delete feature/your-feature-name\n</code></pre>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#continuous-integration","level":2,"title":"Continuous Integration","text":"<p>All pull requests run CI checks:</p> <ul> <li>Crystal Tests: <code>crystal spec</code></li> <li>Code Formatting: <code>crystal tool format --check</code></li> <li>Build Verification: Ensure the project builds</li> <li>Linting: Code quality checks</li> </ul> <p>If CI fails: 1. Check the failure logs 2. Fix the issue locally 3. Push a new commit 4. CI will re-run automatically</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#code-of-conduct","level":2,"title":"Code of Conduct","text":"","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#our-pledge","level":3,"title":"Our Pledge","text":"<p>In the interest of fostering an open and welcoming environment, we pledge to make participation in our project and our community a harassment-free experience for everyone.</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#our-standards","level":3,"title":"Our Standards","text":"<p>Examples of behavior that contributes to a positive environment: - Using welcoming and inclusive language - Being respectful of differing viewpoints and experiences - Gracefully accepting constructive criticism - Focusing on what is best for the community - Showing empathy towards other community members</p> <p>Examples of unacceptable behavior: - Use of sexualized language or imagery - Personal attacks or insulting comments - Trolling or insulting/derogatory comments - Public or private harassment - Publishing others' private information without permission - Other unethical or unprofessional conduct</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#responsibilities","level":3,"title":"Responsibilities","text":"<p>Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#scope","level":3,"title":"Scope","text":"<p>This code of conduct applies both within project spaces and in public spaces when an individual is representing the project or its community.</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#reporting-issues","level":3,"title":"Reporting Issues","text":"<p>If you encounter or witness unacceptable behavior, please contact the project team at: - Email: chris@watzon.tech - GitHub: Report via GitHub Issues</p> <p>All reports will be reviewed and investigated.</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#getting-help","level":2,"title":"Getting Help","text":"<p>If you need help at any point:</p> <ol> <li>Check existing issues - Your question may already be answered</li> <li>Read the documentation - Start with README</li> <li>Join discussions - Comment on relevant issues</li> <li>Ask a question - Open a new issue with the \"question\" label</li> </ol>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#recognition","level":2,"title":"Recognition","text":"<p>Contributors are recognized in: - Release notes for significant contributions - The project's README for major contributors</p> <p>Thank you for contributing to Sellia!</p>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/contributing/workflow/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Code Style Guidelines - Write clean code</li> <li>Commit Messages - Write great commit messages</li> <li>Testing - Test your changes</li> </ul>","path":["02 developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"02-developer/development/","level":1,"title":"Development","text":"<p>Setting up and working with the Sellia development environment.</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#overview","level":2,"title":"Overview","text":"<p>This section covers setting up a development environment, building the project, running tests, and workflow for contributing to Sellia.</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#prerequisites","level":2,"title":"Prerequisites","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#required","level":3,"title":"Required","text":"<ul> <li>Crystal &gt;= 1.10.0 - Install Crystal</li> <li>Git - Version control</li> <li>Node.js &gt;= 18 - For inspector UI development</li> <li>npm or yarn - Node package manager</li> </ul>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#optional","level":3,"title":"Optional","text":"<ul> <li>Docker - For containerized development</li> <li>Docker Compose - For multi-container setups</li> <li>Make - For using Makefile commands</li> </ul>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#initial-setup","level":2,"title":"Initial Setup","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#1-clone-repository","level":3,"title":"1. Clone Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#2-install-crystal-dependencies","level":3,"title":"2. Install Crystal Dependencies","text":"<pre><code># Install shards\nshards install\n\n# Verify installation\ncrystal --version\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#3-install-node-dependencies","level":3,"title":"3. Install Node Dependencies","text":"<pre><code>cd web\nnpm install\ncd ..\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#4-build-binaries","level":3,"title":"4. Build Binaries","text":"<pre><code># Debug build (faster compilation)\nshards build\n\n# Release build (optimized)\nshards build --release\n</code></pre> <p>Binaries will be in <code>./bin/</code>: - <code>sellia</code> - CLI client - <code>sellia-server</code> - Tunnel server</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#5-run-tests","level":3,"title":"5. Run Tests","text":"<pre><code># Run all tests\ncrystal spec\n\n# Run with verbose output\ncrystal spec --verbose\n\n# Run specific test file\ncrystal spec spec/server/tunnel_registry_spec.cr\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#running-locally","level":3,"title":"Running Locally","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#terminal-1-start-server","level":4,"title":"Terminal 1: Start Server","text":"<pre><code>LOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain localhost\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#terminal-2-start-inspector-ui-dev-mode","level":4,"title":"Terminal 2: Start Inspector UI (Dev Mode)","text":"<pre><code>cd web\nnpm run dev\n</code></pre> <p>The CLI will proxy to Vite's dev server at <code>localhost:5173</code>.</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#terminal-3-create-tunnel","level":4,"title":"Terminal 3: Create Tunnel","text":"<pre><code>./bin/sellia http 3000 --open\n</code></pre> <p>Now access your local service at the tunnel URL and the inspector at <code>http://localhost:4040</code>.</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#making-changes","level":3,"title":"Making Changes","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#1-create-feature-branch","level":4,"title":"1. Create Feature Branch","text":"<pre><code>git checkout -b feature/amazing-feature\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#2-make-changes","level":4,"title":"2. Make Changes","text":"<p>Edit source files in: - <code>src/server/</code> for server changes - <code>src/cli/</code> for client changes - <code>src/core/</code> for shared code - <code>web/src/</code> for inspector UI changes</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#3-rebuild","level":4,"title":"3. Rebuild","text":"<pre><code># Crystal code\nshards build\n\n# Or for release\nshards build --release\n\n# Inspector UI (if changed)\ncd web &amp;&amp; npm run build\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#4-test-changes","level":4,"title":"4. Test Changes","text":"<pre><code># Run tests\ncrystal spec\n\n# Test manually\n./bin/sellia http 3000\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#5-commit-changes","level":4,"title":"5. Commit Changes","text":"<pre><code>git add .\ngit commit -m \"feat: add amazing feature\"\n</code></pre> <p>Use conventional commits: - <code>feat:</code> - New feature - <code>fix:</code> - Bug fix - <code>docs:</code> - Documentation - <code>refactor:</code> - Code refactoring - <code>test:</code> - Adding tests - <code>chore:</code> - Maintenance tasks</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#6-push-and-create-pr","level":4,"title":"6. Push and Create PR","text":"<pre><code>git push origin feature/amazing-feature\n</code></pre> <p>Create pull request on GitHub.</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#development-tools","level":2,"title":"Development Tools","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#code-formatting","level":3,"title":"Code Formatting","text":"<pre><code># Format Crystal code\ncrystal tool format src/\n\n# Check formatting\ncrystal tool format --check src/\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#linting","level":3,"title":"Linting","text":"<pre><code># Inspector UI linting\ncd web\nnpm run lint\n\n# Fix linting issues\nnpm run lint:fix\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#type-checking","level":3,"title":"Type Checking","text":"<pre><code># Crystal type checking (automatic during compilation)\ncrystal build src/sellia.cr\n\n# TypeScript type checking\ncd web\nnpm run type-check\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#testing","level":2,"title":"Testing","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#crystal-tests","level":3,"title":"Crystal Tests","text":"<pre><code># All tests\ncrystal spec\n\n# Verbose output\ncrystal spec --verbose\n\n# Specific test file\ncrystal spec spec/server/tunnel_registry_spec.cr\n\n# With line numbers\ncrystal spec --error-trace\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#writing-tests","level":3,"title":"Writing Tests","text":"<p>Tests are in <code>spec/</code> directory:</p> <pre><code># spec/server/my_component_spec.cr\nrequire \"spec_helper\"\nrequire \"../../src/server/my_component\"\n\ndescribe Sellia::MyComponent do\n  it \"does something\" do\n    component = Sellia::MyComponent.new\n    component.do_something.should eq \"expected result\"\n  end\nend\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#inspector-ui-tests","level":3,"title":"Inspector UI Tests","text":"<pre><code>cd web\n\n# Run tests\nnpm test\n\n# Run in watch mode\nnpm test -- --watch\n\n# Coverage\nnpm run test:coverage\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#debugging","level":2,"title":"Debugging","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#crystal-debugging","level":3,"title":"Crystal Debugging","text":"<pre><code># Enable debug output\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain localhost\n\n# Use error trace\ncrystal spec --error-trace\n\n# Add debug output\nputs \"Debug: #{variable.inspect}\"\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#inspector-ui-debugging","level":3,"title":"Inspector UI Debugging","text":"<pre><code>cd web\n\n# Start dev server with debugging\nnpm run dev\n\n# Browser DevTools\n# - React DevTools extension\n# - Network tab for WebSocket\n# - Console for errors\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#websocket-debugging","level":3,"title":"WebSocket Debugging","text":"<p>Use browser DevTools or WebSocket clients:</p> <pre><code># Install wscat\nnpm install -g wscat\n\n# Connect to inspector WebSocket\nwscat -c ws://localhost:4040\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#performance-profiling","level":2,"title":"Performance Profiling","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#crystal-profiling","level":3,"title":"Crystal Profiling","text":"<pre><code># Build with profiling\ncrystal build --profile src/sellia-server.cr -o sellia-server-prof\n\n# Run and generate profile\n./sellia-server-prof\n# ... use the application ...\n# Kill with INT\n\n# Analyze profile\ncrystal tool profile sellia-server-prof\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#memory-profiling","level":3,"title":"Memory Profiling","text":"<pre><code># Monitor memory usage\ntop -p $(pgrep sellia-server)\n\n# Or with ps\nps aux | grep sellia\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#common-development-tasks","level":2,"title":"Common Development Tasks","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#adding-a-new-cli-command","level":3,"title":"Adding a New CLI Command","text":"<p>CLI commands are handled directly in <code>src/cli/main.cr</code>. To add a new command:</p> <ol> <li>Add a new <code>when</code> clause in the <code>run</code> method:</li> </ol> <pre><code># In src/cli/main.cr\ncase command\nwhen \"mycommand\"\n  run_mycommand\n# ... other commands\nend\n</code></pre> <ol> <li>Implement the command method:</li> </ol> <pre><code>private def self.run_mycommand\n  # Command implementation\n  puts \"My custom command\"\nend\n</code></pre> <ol> <li>Add tests in <code>spec/cli/mycommand_spec.cr</code></li> </ol>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#adding-a-new-protocol-message","level":3,"title":"Adding a New Protocol Message","text":"<ol> <li>Define in <code>src/core/protocol/messages/</code>:</li> </ol> <pre><code># src/core/protocol/messages/my_message.cr\nmodule Sellia\n  module Protocol\n    class MyMessage\n      include MessagePack::Serializable\n\n      property field1 : String\n      property field2 : Int32\n    end\n  end\nend\n</code></pre> <ol> <li> <p>Require it in <code>src/core/protocol.cr</code></p> </li> <li> <p>Handle in server and client</p> </li> <li> <p>Add tests in <code>spec/core/protocol/message_spec.cr</code></p> </li> </ol>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#adding-ui-components","level":3,"title":"Adding UI Components","text":"<ol> <li>Create in <code>web/src/components/</code>:</li> </ol> <pre><code>// web/src/components/MyComponent.tsx\nexport function MyComponent() {\n  return &lt;div&gt;My Component&lt;/div&gt;;\n}\n</code></pre> <ol> <li> <p>Add to routing in <code>web/src/main.tsx</code></p> </li> <li> <p>Add styles in <code>web/src/styles/</code> or use Tailwind CSS classes</p> </li> </ol>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#troubleshooting-development-issues","level":2,"title":"Troubleshooting Development Issues","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#build-failures","level":3,"title":"Build Failures","text":"<p>Problem: Compilation errors</p> <p>Solutions: - Run <code>shards update</code> - Clear cache: <code>rm -rf .crystal/</code> - Check Crystal version: <code>crystal --version</code></p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#test-failures","level":3,"title":"Test Failures","text":"<p>Problem: Tests failing locally</p> <p>Solutions: - Ensure server is not using test ports - Check for leftover processes: <code>lsof -i :3000</code> - Run with <code>--error-trace</code> for details</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#inspector-not-working","level":3,"title":"Inspector Not Working","text":"<p>Problem: Inspector UI not loading</p> <p>Solutions: - Ensure <code>npm install</code> was run - Check Vite dev server is running - Verify WebSocket connection in browser DevTools</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#continuous-integration","level":2,"title":"Continuous Integration","text":"<p>Sellia uses GitHub Actions for CI:</p> <ul> <li>Runs tests on every push</li> <li>Tests against multiple Crystal versions</li> <li>Lints code</li> <li>Runs on Linux and macOS</li> </ul> <p>See <code>.github/workflows/</code> for CI configuration.</p>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#running-ci-locally","level":3,"title":"Running CI Locally","text":"<pre><code># Install act (run GitHub Actions locally)\nbrew install act  # macOS\n\n# Run CI\nact push\n</code></pre>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#code-style","level":3,"title":"Code Style","text":"<ul> <li>Follow Crystal style guide</li> <li>Use meaningful variable names</li> <li>Keep methods focused and small</li> <li>Add comments for complex logic</li> </ul>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#testing_1","level":3,"title":"Testing","text":"<ul> <li>Write tests for new features</li> <li>Maintain test coverage</li> <li>Test edge cases</li> <li>Use descriptive test names</li> </ul>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#git-workflow","level":3,"title":"Git Workflow","text":"<ul> <li>Create feature branches</li> <li>Write meaningful commit messages</li> <li>Keep PRs focused</li> <li>Update documentation</li> </ul>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Project Structure - Understanding the codebase</li> <li>Architecture - System design</li> <li>Contributing - Contribution guidelines</li> </ul>","path":["02 developer","Development"],"tags":[]},{"location":"02-developer/development/building/","level":1,"title":"Building from Source","text":"<p>This guide covers building Sellia binaries from source code, including both debug and release builds.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#quick-build","level":2,"title":"Quick Build","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#prerequisites","level":3,"title":"Prerequisites","text":"<p>Ensure you have installed all prerequisites:</p> <ul> <li>Crystal &gt;= 1.10.0</li> <li>Node.js &gt;= 18</li> <li>Shards (included with Crystal)</li> <li>npm (included with Node.js)</li> </ul>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#build-steps","level":3,"title":"Build Steps","text":"<pre><code># Clone the repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Install Crystal dependencies\nshards install\n\n# Install inspector UI dependencies\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n\n# Build the binaries\nshards build\n</code></pre> <p>The built binaries will be in <code>./bin/</code>: - <code>sellia</code> - CLI client for creating tunnels - <code>sellia-server</code> - Tunnel server</p> <p>Note: If the <code>bin/</code> directory doesn't exist yet, <code>shards build</code> will create it automatically.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#build-types","level":2,"title":"Build Types","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#debug-build","level":3,"title":"Debug Build","text":"<p>Debug builds include debugging symbols and no optimizations. Useful for development.</p> <pre><code>shards build\n</code></pre> <p>Characteristics: - Faster compilation - Larger binary size - Includes debug symbols - No optimization passes - Suitable for development and testing</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#release-build","level":3,"title":"Release Build","text":"<p>Release builds are optimized for performance and size. Use these for production deployments.</p> <pre><code>shards build --release\n</code></pre> <p>Characteristics: - Slower compilation - Smaller binary size - No debug symbols - Full optimization (<code>--release</code> flag) - Suitable for production use</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#build-artifacts","level":2,"title":"Build Artifacts","text":"<p>After building, you'll find the following binaries in <code>./bin/</code>:</p> Binary Description <code>sellia</code> CLI client that creates tunnels to local services <code>sellia-server</code> Server that accepts tunnel connections and routes traffic","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#building-individual-components","level":2,"title":"Building Individual Components","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#cli-client-only","level":3,"title":"CLI Client Only","text":"<p>To build only the CLI client:</p> <pre><code>crystal build src/cli/main.cr -o bin/sellia\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#server-only","level":3,"title":"Server Only","text":"<p>To build only the server:</p> <pre><code>crystal build src/server/main.cr -o bin/sellia-server\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#inspector-ui-development","level":3,"title":"Inspector UI (Development)","text":"<p>The inspector UI is a React application that runs during development via Vite's dev server:</p> <pre><code>cd web\nnpm run dev\n</code></pre> <p>For production, the UI is embedded into the Crystal binary during the build process automatically.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#inspector-ui-assets","level":2,"title":"Inspector UI Assets","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#development-mode","level":3,"title":"Development Mode","text":"<p>During development, the CLI proxies to Vite's dev server:</p> <pre><code>cd web\nnpm run dev\n# Runs on http://localhost:5173\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#production-assets","level":3,"title":"Production Assets","text":"<p>For release builds, the UI must be built first:</p> <pre><code>cd web\nnpm run build\n# Outputs to web/dist/\n</code></pre> <p>The Crystal build process automatically embeds these assets. When built assets are present at <code>web/dist/</code>, they are compiled into the binary. Otherwise, the CLI proxies to the Vite dev server.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#asset-embedding","level":3,"title":"Asset Embedding","text":"<p>The Crystal code checks for the presence of built assets:</p> <pre><code># If web/dist/ exists, assets are embedded\n# Otherwise, proxy to Vite dev server at localhost:5173\n</code></pre> <p>This allows for rapid development without rebuilding the Crystal binary.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#build-options","level":2,"title":"Build Options","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#static-linking-optional","level":3,"title":"Static Linking (Optional)","text":"<p>For creating fully self-contained binaries:</p> <pre><code>crystal build src/cli.cr --static -o bin/sellia-static\n</code></pre> <p>Note: Static linking may require additional system libraries.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#custom-output-path","level":3,"title":"Custom Output Path","text":"<p>To specify a custom output directory:</p> <pre><code>crystal build src/cli/main.cr -o /custom/path/sellia\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#parallel-compilation","level":3,"title":"Parallel Compilation","text":"<p>Crystal compiles modules in parallel by default. To limit parallelism:</p> <pre><code>crystal build src/cli.cr --threads 4\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#build-verification","level":2,"title":"Build Verification","text":"<p>After building, verify the binaries work correctly:</p> <pre><code># Check CLI version\n./bin/sellia version\n\n# Check server help\n./bin/sellia-server --help\n\n# Run tests\ncrystal spec\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#cross-compilation","level":2,"title":"Cross-Compilation","text":"<p>Cross-compiling Crystal binaries is possible but challenging due to the need for target-specific libraries.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#linux-to-macos","level":3,"title":"Linux to macOS","text":"<p>Not recommended due to library differences.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#macos-to-linux","level":3,"title":"macOS to Linux","text":"<p>Possible with Docker or a Linux VM:</p> <pre><code># Using Docker\ndocker run --rm -v $(pwd):/workspace -w /workspace crystallang/crystal:latest shards build --release\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#using-github-actions","level":3,"title":"Using GitHub Actions","text":"<p>The project uses GitHub Actions for automated builds across multiple platforms. See <code>.github/workflows/</code> for build configurations.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#clean-build","level":2,"title":"Clean Build","text":"<p>To start fresh and remove all build artifacts:</p> <pre><code># Remove build artifacts\nrm -rf bin/\n\n# Remove Crystal dependencies\nrm -rf lib/\nrm shard.lock\n\n# Remove Node.js dependencies\ncd web &amp;&amp; rm -rf node_modules/ package-lock.json\n\n# Reinstall and rebuild\nshards install\ncd web &amp;&amp; npm install &amp;&amp; cd ..\nshards build --release\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#build-troubleshooting","level":2,"title":"Build Troubleshooting","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#compilation-errors","level":3,"title":"Compilation Errors","text":"<p>Issue: Type errors or missing dependencies</p> <p>Solution: <pre><code># Update dependencies\nshards update\n\n# Check for missing dependencies\nshards check\n\n# Verify formatting\ncrystal tool format --check\n</code></pre></p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#missing-openssl","level":3,"title":"Missing OpenSSL","text":"<p>Issue: Error about OpenSSL not found</p> <p>Solution: <pre><code># macOS (Homebrew)\nbrew install openssl\n\n# Ubuntu/Debian\nsudo apt-get install libssl-dev\n</code></pre></p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#inspector-ui-build-failures","level":3,"title":"Inspector UI Build Failures","text":"<p>Issue: npm install or npm run build fails</p> <p>Solution: <pre><code>cd web\nrm -rf node_modules package-lock.json\nnpm cache clean --force\nnpm install\n</code></pre></p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#permission-denied-on-binary","level":3,"title":"Permission Denied on Binary","text":"<p>Issue: Cannot execute <code>./bin/sellia</code></p> <p>Solution: <pre><code>chmod +x bin/sellia bin/sellia-server\n</code></pre></p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#optimizing-build-performance","level":2,"title":"Optimizing Build Performance","text":"","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#use-project-specific-compilation-flags","level":3,"title":"Use Project-Specific Compilation Flags","text":"<p>Create a <code>.crystal</code> config file in your home directory:</p> <pre><code># ~/.crystal\ncrystal_path: /usr/lib/crystal\n</code></pre>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#cache-dependencies","level":3,"title":"Cache Dependencies","text":"<p>Dependencies are cached in <code>lib/</code> after the first <code>shards install</code>. Subsequent builds are faster.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#incremental-compilation","level":3,"title":"Incremental Compilation","text":"<p>Crystal only recompiles changed files, making rebuilds fast during development.</p>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#continuous-integration-builds","level":2,"title":"Continuous Integration Builds","text":"<p>The project includes CI/CD configuration for automated builds:</p> <ul> <li>GitHub Actions: <code>.github/workflows/ci.yml</code></li> <li>Platforms: Linux, macOS</li> <li>Build types: Debug and release</li> <li>Artifact storage: Build artifacts are stored as CI artifacts</li> </ul>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/building/#next-steps","level":2,"title":"Next Steps","text":"<p>After building Sellia:</p> <ul> <li>Run Locally - Test your build</li> <li>Run Tests - Verify everything works</li> <li>Development Workflow - Start contributing</li> </ul>","path":["02 developer","Development","Building from Source"],"tags":[]},{"location":"02-developer/development/debugging/","level":1,"title":"Debugging","text":"<p>This guide covers debugging techniques and tools for Sellia development.</p>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Debug Logging</li> <li>Crystal Debugger</li> <li>Common Debugging Scenarios</li> <li>Debugging Tools</li> <li>Performance Profiling</li> <li>Network Debugging</li> </ul>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debug-logging","level":2,"title":"Debug Logging","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#enable-debug-output","level":3,"title":"Enable Debug Output","text":"<p>Set the <code>LOG_LEVEL</code> environment variable:</p> <pre><code># Server\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# CLI\nLOG_LEVEL=debug ./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre> <p>Note: The <code>LOG_LEVEL</code> environment variable accepts: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>, <code>fatal</code>. Default is <code>warn</code>.</p>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debug-output-levels","level":3,"title":"Debug Output Levels","text":"<p>Debug logs include: - Connection lifecycle events - Message serialization/deserialization - Request/response details - Error stack traces - Performance metrics</p> <p>Example debug output: <pre><code>[DEBUG] [sellia.server.ws_gateway] Client connecting: ws://127.0.0.1:45678\n[DEBUG] [sellia.server.ws_gateway] Received message: RegisterTunnel(subdomain: \"myapp\")\n[DEBUG] [sellia.server.tunnel_registry] Registered tunnel: myapp -&gt; client-123\n[DEBUG] [sellia.server.http_ingress] Incoming request: GET /api/test\n[DEBUG] [sellia.server.http_ingress] Forwarding to client: client-123\n[DEBUG] [sellia.server.http_ingress] Response received: 200 OK (45ms)\n</code></pre></p>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#selective-debugging","level":3,"title":"Selective Debugging","text":"<p>Modify the code temporarily to add specific debug output using the Log module:</p> <pre><code># In src/server/http_ingress.cr\nLog = ::Log.for(\"sellia.server.http_ingress\")\n\ndef handle_request(request)\n  # Temporary debug output\n  Log.debug { \"Request headers: #{request.headers.inspect}\" }\n  Log.debug { \"Request body size: #{request.body.size}\" }\n\n  # ... rest of code\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#crystal-debugger","level":2,"title":"Crystal Debugger","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#using-the-built-in-debugger","level":3,"title":"Using the Built-in Debugger","text":"<p>Crystal includes a command-line debugger:</p> <pre><code>require \"debug\"\n\ndef some_function(x : Int32)\n  y = x * 2\n  breakpoint  # Execution pauses here\n  y + 10\nend\n</code></pre> <p>Run with debugging enabled:</p> <pre><code>crystal build src/debug_me.cr --debug\n./debug_me\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugger-commands","level":3,"title":"Debugger Commands","text":"<p>When the debugger stops at a breakpoint: - <code>step</code> or <code>s</code>: Step to next line - <code>next</code> or <code>n</code>: Next line (step over function calls) - <code>continue</code> or <code>c</code>: Continue execution - <code>break &lt;file&gt;:&lt;line&gt;</code>: Set breakpoint - <code>break &lt;function&gt;</code>: Set breakpoint at function - <code>delete &lt;n&gt;</code>: Delete breakpoint n - <code>backtrace</code> or <code>bt</code>: Show stack trace - <code>locals</code>: Show local variables - <code>help</code>: Show all commands</p>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#example-debugging-session","level":3,"title":"Example Debugging Session","text":"<pre><code># src/server/tunnel_registry.cr\ndef register_tunnel(subdomain : String, client_id : String) : Tunnel\n  validate_subdomain(subdomain)\n  breakpoint  # Add this for debugging\n\n  if @tunnels.has_key?(subdomain)\n    raise TunnelExistsError.new(\"Subdomain #{subdomain} already registered\")\n  end\n\n  tunnel = Tunnel.new(subdomain, client_id)\n  @tunnels[subdomain] = tunnel\n  tunnel\nend\n</code></pre> <pre><code># Run with debugger\ncrystal build src/server/main.cr --debug -o bin/sellia-server-debug\n./bin/sellia-server-debug\n\n# When breakpoint hits:\n[1] breakpoint at src/server/tunnel_registry.cr:42\nstep\n[2] step at src/server/tunnel_registry.cr:43\nlocals\n  subdomain =&gt; \"myapp\"\n  client_id =&gt; \"client-123\"\ncontinue\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#common-debugging-scenarios","level":2,"title":"Common Debugging Scenarios","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugging-connection-issues","level":3,"title":"Debugging Connection Issues","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#scenario-tunnel-not-connecting","level":4,"title":"Scenario: Tunnel Not Connecting","text":"<pre><code># 1. Enable debug logging\nLOG_LEVEL=debug ./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# 2. Check server logs\n# Look for: \"Client connecting\" messages\n\n# 3. Verify WebSocket connection\n# Use websocat or similar tool:\nwebsocat ws://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#scenario-requests-not-reaching-tunnel","level":4,"title":"Scenario: Requests Not Reaching Tunnel","text":"<pre><code># 1. Verify tunnel is registered\nLOG_LEVEL=debug ./bin/sellia-server | grep \"Registered tunnel\"\n\n# 2. Check HTTP ingress logs\nLOG_LEVEL=debug ./bin/sellia-server 2&gt;&amp;1 | grep \"http_ingress\"\n\n# 3. Test direct connection to local service\ncurl http://localhost:8080\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugging-protocol-issues","level":3,"title":"Debugging Protocol Issues","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#scenario-message-serialization-failures","level":4,"title":"Scenario: Message Serialization Failures","text":"<pre><code># Add debug output in protocol handler\nLog = ::Log.for(\"sellia.protocol\")\n\ndef serialize_message(message : Message) : Bytes\n  Log.debug { \"Serializing: #{message.class}\" }\n  Log.debug { \"Message fields: #{message.inspect}\" }\n\n  MessagePack.pack(message)\nrescue ex : Exception\n  Log.error { \"Serialization failed: #{ex.message}\" }\n  Log.error { \"Message: #{message.inspect}\" }\n  raise ex\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugging-memory-issues","level":3,"title":"Debugging Memory Issues","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#check-for-memory-leaks","level":4,"title":"Check for Memory Leaks","text":"<pre><code># Run with memory tracking\ncrystal spec --time\n\n# Use external tools\nvalgrind --leak-check=full ./bin/sellia-server\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#monitor-memory-usage","level":4,"title":"Monitor Memory Usage","text":"<pre><code># Add memory monitoring\nrequire \"system\"\n\ndef print_memory_usage\n  usage = System.memory_usage\n  puts \"[DEBUG] Memory: #{usage.used_mb}MB used / #{usage.total_mb}MB total\"\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugging-tools","level":2,"title":"Debugging Tools","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#logging-tools","level":3,"title":"Logging Tools","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#custom-logger","level":4,"title":"Custom Logger","text":"<p>Create a custom logger for specific components:</p> <pre><code># src/utils/logger.cr\nclass DebugLogger\n  INSTANCE = new\n\n  def log(component : String, message : String)\n    puts \"[DEBUG] [#{component}] #{message}\"\n  end\n\n  def log_request(request : HTTP::Request)\n    log(\"HTTP\", \"#{request.method} #{request.path}\")\n    request.headers.each do |key, values|\n      log(\"HTTP\", \"  #{key}: #{values.join(\", \")}\")\n    end\n  end\nend\n\n# Usage\nDebugLogger::INSTANCE.log(\"Tunnel\", \"Connection established\")\nDebugLogger::INSTANCE.log_request(request)\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#network-debugging-tools","level":3,"title":"Network Debugging Tools","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#curl-with-verbose-output","level":4,"title":"curl with Verbose Output","text":"<pre><code>curl -v http://myapp.127.0.0.1.nip.io:3000/api/test\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#websocat-for-websocket-testing","level":4,"title":"websocat for WebSocket Testing","text":"<pre><code># Install websocat\ncargo install websocat\n\n# Connect to WebSocket\nwebsocat ws://127.0.0.1:3000\n\n# Send MessagePack message\necho -e '\\x81\\xa7message\\xahello' | websocat ws://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#tcpdump-for-packet-inspection","level":4,"title":"tcpdump for Packet Inspection","text":"<pre><code># Capture WebSocket traffic\nsudo tcpdump -i lo -s 0 -w capture.pcap port 3000\n\n# Analyze with Wireshark\nwireshark capture.pcap\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugging-inspector-ui","level":3,"title":"Debugging Inspector UI","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#browser-devtools","level":4,"title":"Browser DevTools","text":"<ol> <li>Open browser DevTools (F12)</li> <li>Go to Network tab</li> <li>Filter by WS (WebSocket)</li> <li>Inspect WebSocket frames</li> <li>View MessagePack payloads</li> </ol>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#react-devtools","level":4,"title":"React DevTools","text":"<pre><code>cd web\nnpm install --save-dev @types/react\n\n# Add to dev server\nnpm run dev\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#performance-profiling","level":2,"title":"Performance Profiling","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#crystal-built-in-profiling","level":3,"title":"Crystal Built-in Profiling","text":"<pre><code># Run with timing\ncrystal spec --time\n\n# Run with profiling\ncrystal build src/server.cr --release\ntime ./bin/sellia-server --port 3000\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#benchmark-critical-paths","level":3,"title":"Benchmark Critical Paths","text":"<pre><code>require \"benchmark\"\n\n# Benchmark message serialization\nmessage = create_test_message\n\nBenchmark.bm do |x|\n  x.report(\"serialize:\") do\n    10000.times { message.serialize }\n  end\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#profile-memory-allocations","level":3,"title":"Profile Memory Allocations","text":"<pre><code># Track allocations\nGC.stats\n\n# Before operation\nbefore = GC.stats.heap_size\n\n# ... perform operation ...\n\n# After operation\nafter = GC.stats.heap_size\nputs \"[DEBUG] Allocated: #{after - before} bytes\"\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#network-debugging","level":2,"title":"Network Debugging","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#test-websocket-connection","level":3,"title":"Test WebSocket Connection","text":"<pre><code># Using websocat\nwebsocat -v ws://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#inspect-http-headers","level":3,"title":"Inspect HTTP Headers","text":"<pre><code># View full headers\ncurl -v http://myapp.127.0.0.1.nip.io:3000/test\n\n# View specific headers\ncurl -I http://myapp.127.0.0.1.nip.io:3000/test\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#monitor-tcp-connections","level":3,"title":"Monitor TCP Connections","text":"<pre><code># List all connections\nlsof -i :3000\n\n# Monitor connections in real-time\nwatch 'lsof -i :3000'\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#debugging-tips","level":2,"title":"Debugging Tips","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#1-isolate-the-problem","level":3,"title":"1. Isolate the Problem","text":"<ul> <li>Reproduce the issue consistently</li> <li>Simplify the scenario</li> <li>Test components in isolation</li> </ul>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#2-add-strategic-logging","level":3,"title":"2. Add Strategic Logging","text":"<pre><code># Log entry/exit of functions\ndef process_request(request)\n  log_debug \"Entering process_request\"\n\n  # ... code ...\n\n  log_debug \"Exiting process_request\"\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#3-use-assertions","level":3,"title":"3. Use Assertions","text":"<pre><code># Add temporary assertions\ndef validate_subdomain(subdomain : String)\n  # Temporary: Catch invalid input early\n  raise \"Invalid subdomain: #{subdomain}\" if subdomain.empty?\n\n  # ... normal validation ...\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#4-binary-search-for-bugs","level":3,"title":"4. Binary Search for Bugs","text":"<p>If you're not sure where the bug is: 1. Add logging at multiple points 2. Narrow down the location 3. Focus on that area</p>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#5-check-external-dependencies","level":3,"title":"5. Check External Dependencies","text":"<pre><code># Verify external service is working\nbegin\n  response = HTTP::Client.get(\"http://localhost:8080\")\n  log_debug \"External service reachable: #{response.status_code}\"\nrescue ex : Exception\n  log_debug \"External service error: #{ex.message}\"\nend\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#common-issues-and-solutions","level":2,"title":"Common Issues and Solutions","text":"","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#issue-address-already-in-use","level":3,"title":"Issue: \"Address already in use\"","text":"<pre><code># Find process using the port\nlsof -i :3000\n\n# Kill the process\nkill -9 &lt;PID&gt;\n\n# Or use a different port\n./bin/sellia-server --port 3001\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#issue-connection-refused","level":3,"title":"Issue: \"Connection refused\"","text":"<pre><code># Verify server is running\nlsof -i :3000\n\n# Check firewall\nsudo ufw status  # Linux\n# System Preferences &gt; Security &gt; Firewall  # macOS\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#issue-websocket-handshake-fails","level":3,"title":"Issue: WebSocket handshake fails","text":"<pre><code># Check server logs for errors\nLOG_LEVEL=debug ./bin/sellia-server\n\n# Verify WebSocket upgrade headers\ncurl -v -H \"Upgrade: websocket\" \\\n     -H \"Connection: Upgrade\" \\\n     -H \"Sec-WebSocket-Key: test\" \\\n     http://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#issue-subdomain-not-resolving","level":3,"title":"Issue: Subdomain not resolving","text":"<pre><code># Test DNS resolution\nnslookup myapp.127.0.0.1.nip.io\n\n# For nip.io, should resolve to 127.0.0.1\n# If not, try using localhost as domain\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#remote-debugging","level":2,"title":"Remote Debugging","text":"<p>For production issues:</p>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#enable-remote-debugging-caution","level":3,"title":"Enable Remote Debugging (Caution)","text":"<pre><code># Only do this in a trusted environment\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain example.com\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#collect-debug-information","level":3,"title":"Collect Debug Information","text":"<pre><code># Server info\n./bin/sellia-server --version\n\n# System info\nuname -a\ncrystal --version\nnode --version\n\n# Network info\nnetstat -an | grep 3000\n</code></pre>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#getting-help","level":2,"title":"Getting Help","text":"<p>When unable to resolve an issue:</p> <ol> <li>Check existing GitHub Issues</li> <li>Enable debug logging and capture output</li> <li>Create a minimal reproduction case</li> <li>File a new issue with:</li> <li>Clear description of the problem</li> <li>Steps to reproduce</li> <li>Debug logs</li> <li>Environment details (OS, Crystal version, etc.)</li> </ol>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/debugging/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Testing - Write tests to prevent bugs</li> <li>Contributing Workflow - Submit fixes</li> <li>Project Structure - Understand the codebase</li> </ul>","path":["02 developer","Development","Debugging"],"tags":[]},{"location":"02-developer/development/prerequisites/","level":1,"title":"Prerequisites","text":"<p>This document outlines the requirements and dependencies needed to develop and build Sellia from source.</p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#core-requirements","level":2,"title":"Core Requirements","text":"","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#crystal-language","level":3,"title":"Crystal Language","text":"<p>Sellia is written in Crystal and requires Crystal &gt;= 1.10.0. (Tested with Crystal 1.18.2)</p> <p>Installation:</p> <p>Visit crystal-lang.org/install for platform-specific instructions.</p> <p>Common installation methods:</p> <ul> <li> <p>macOS (Homebrew): <pre><code>brew install crystal\n</code></pre></p> </li> <li> <p>Ubuntu/Debian: <pre><code>curl -fsSL https://crystal-lang.org/install.sh | sudo bash\n</code></pre></p> </li> <li> <p>Arch Linux: <pre><code>sudo pacman -S crystal\n</code></pre></p> </li> </ul> <p>Verification:</p> <pre><code>crystal --version\n# Should output: Crystal 1.10.0 or higher\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#nodejs","level":3,"title":"Node.js","text":"<p>Node.js is required for the inspector UI (React application built with Vite).</p> <p>Required version: Node.js &gt;= 18 (Tested with Node.js 20+)</p> <p>Installation:</p> <ul> <li> <p>macOS (Homebrew): <pre><code>brew install node\n</code></pre></p> </li> <li> <p>Ubuntu/Debian: <pre><code>curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -\nsudo apt-get install -y nodejs\n</code></pre></p> </li> <li> <p>Using nvm (recommended): <pre><code>nvm install --lts\nnvm use lts\n</code></pre></p> </li> </ul> <p>Verification:</p> <pre><code>node --version\n# Should output: v18.0.0 or higher\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#package-managers","level":3,"title":"Package Managers","text":"","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#shards-crystal-dependencies","level":4,"title":"Shards (Crystal Dependencies)","text":"<p>Shards is included with Crystal and manages Crystal library dependencies.</p> <p>Verification:</p> <pre><code>shards --version\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#npm-nodejs-dependencies","level":4,"title":"npm (Node.js Dependencies)","text":"<p>npm is included with Node.js and manages the inspector UI dependencies.</p> <p>Verification:</p> <pre><code>npm --version\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#git","level":3,"title":"Git","text":"<p>Git is required for cloning the repository and managing version control.</p> <p>Installation:</p> <ul> <li>macOS: Included with Xcode Command Line Tools: <code>xcode-select --install</code></li> <li>Ubuntu/Debian: <code>sudo apt-get install git</code></li> <li>Windows: git-scm.com</li> </ul> <p>Verification:</p> <pre><code>git --version\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#optional-dependencies","level":2,"title":"Optional Dependencies","text":"","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#openssl-for-ssltls-support","level":3,"title":"OpenSSL (for SSL/TLS support)","text":"<p>OpenSSL development headers are required for SSL support in Crystal.</p> <p>macOS: Usually included with the system.</p> <p>Ubuntu/Debian: <pre><code>sudo apt-get install libssl-dev\n</code></pre></p> <p>Arch Linux: <pre><code>sudo pacman -S openssl\n</code></pre></p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#sqlite-development-libraries","level":3,"title":"SQLite Development Libraries","text":"<p>Required for SQLite storage backend (API keys, reserved subdomains).</p> <p>Ubuntu/Debian: <pre><code>sudo apt-get install sqlite3 libsqlite3-dev\n</code></pre></p> <p>macOS: Usually included with the system.</p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#docker-for-containerized-development","level":3,"title":"Docker (for containerized development)","text":"<p>Optional, for testing Docker deployments locally.</p> <p>Installation: docker.com</p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#development-environment-setup","level":2,"title":"Development Environment Setup","text":"","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#1-clone-the-repository","level":3,"title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#2-add-upstream-remote","level":3,"title":"2. Add Upstream Remote","text":"<p>If you're planning to contribute, add the upstream repository:</p> <pre><code>git remote add upstream https://github.com/watzon/sellia.git\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#3-install-dependencies","level":3,"title":"3. Install Dependencies","text":"<pre><code># Install Crystal dependencies\nshards install\n\n# Install inspector UI dependencies\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#4-build-the-project","level":3,"title":"4. Build the Project","text":"<pre><code># Build debug binaries\nshards build\n\n# Or build release binaries (optimized)\nshards build --release\n</code></pre> <p>Binaries will be output to <code>./bin/</code>: - <code>sellia</code> - CLI client - <code>sellia-server</code> - Tunnel server</p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#5-run-tests","level":3,"title":"5. Run Tests","text":"<p>Verify your environment is correctly set up:</p> <pre><code>crystal spec\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#platform-specific-notes","level":2,"title":"Platform-Specific Notes","text":"","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#macos","level":3,"title":"macOS","text":"<ul> <li>Ensure you have Xcode Command Line Tools installed: <code>xcode-select --install</code></li> <li>Homebrew is the recommended package manager</li> </ul>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#linux","level":3,"title":"Linux","text":"<ul> <li>Ensure you have build essentials: <code>sudo apt-get install build-essential</code> (Debian/Ubuntu)</li> <li>Some distributions may require additional development headers for Crystal</li> </ul>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#windows","level":3,"title":"Windows","text":"<p>Sellia is primarily developed and tested on Unix-like systems. Windows support via WSL2 is recommended.</p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#version-compatibility","level":2,"title":"Version Compatibility","text":"Component Minimum Version Tested Version Crystal 1.10.0 1.18.2 Node.js 18 20+ npm 9 Latest bundled with Node.js","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#crystal-compilation-errors","level":3,"title":"Crystal compilation errors","text":"<p>Ensure you have the latest Crystal version and all development headers installed:</p> <pre><code>crystal --version\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#nodejs-module-build-failures","level":3,"title":"Node.js module build failures","text":"<p>Try clearing the npm cache and reinstalling:</p> <pre><code>cd web\nrm -rf node_modules package-lock.json\nnpm cache clean --force\nnpm install\n</code></pre>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#shards-installation-failures","level":3,"title":"Shards installation failures","text":"<p>If <code>shards install</code> fails, try:</p> <pre><code>shards update\n</code></pre> <p>This updates <code>shard.lock</code> to the latest compatible versions.</p>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/prerequisites/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Building from Source</li> <li>Running Locally</li> <li>Testing</li> </ul>","path":["02 developer","Development","Prerequisites"],"tags":[]},{"location":"02-developer/development/running-locally/","level":1,"title":"Running Locally","text":"<p>This guide covers running Sellia locally for development and testing purposes.</p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#quick-start","level":2,"title":"Quick Start","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#prerequisites","level":3,"title":"Prerequisites","text":"<ul> <li>Build Sellia from source or have binaries available</li> <li>Three terminal windows (or use a terminal multiplexer like tmux)</li> </ul>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#basic-local-setup","level":3,"title":"Basic Local Setup","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#terminal-1-start-the-server","level":4,"title":"Terminal 1: Start the Server","text":"<pre><code>./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n</code></pre> <p>What this does: - Starts the tunnel server on port 3000 - Uses <code>127.0.0.1.nip.io</code> as the base domain (resolves to 127.0.0.1) - Enables local testing without a real domain</p> <p>Expected output: <pre><code>[Sellia Server] Starting server on 0.0.0.0:3000\n[Sellia Server] Domain: 127.0.0.1.nip.io\n</code></pre></p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#terminal-2-start-a-tunnel","level":4,"title":"Terminal 2: Start a Tunnel","text":"<p>First, create a simple local server to tunnel:</p> <pre><code># Example: Python HTTP server\npython3 -m http.server 8080\n\n# Or: Node.js http-server\nnpx http-server -p 8080\n\n# Or: Any other service on port 8080\n</code></pre> <p>Then create the tunnel in a new terminal:</p> <pre><code>./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre> <p>Expected output: <pre><code>Sellia v0.4.0\nForwarding to localhost:8080\n\nPublic URL: http://random-string.127.0.0.1.nip.io:3000 -&gt; localhost:8080\n\nPress Ctrl+C to stop\n</code></pre></p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#terminal-3-start-the-inspector-ui-optional","level":4,"title":"Terminal 3: Start the Inspector UI (Optional)","text":"<p>For inspector UI development:</p> <pre><code>cd web\nnpm run dev\n</code></pre> <p>The inspector will be available at <code>http://localhost:4040</code> automatically when the tunnel is running.</p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#test-your-tunnel","level":3,"title":"Test Your Tunnel","text":"<pre><code># Access your local service through the tunnel\ncurl http://random-string.127.0.0.1.nip.io:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#full-development-environment","level":3,"title":"Full Development Environment","text":"<p>For active development, run all three components:</p> <pre><code># Terminal 1: Server with debug logging\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Tunnel with inspector enabled\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --open\n\n# Terminal 3: Inspector UI dev server (for UI development)\ncd web &amp;&amp; npm run dev\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#using-configuration-files","level":3,"title":"Using Configuration Files","text":"<p>Create <code>sellia.yml</code> for persistent configuration:</p> <pre><code>server: http://127.0.0.1:3000\n\ntunnels:\n  webapp:\n    port: 3000\n    subdomain: myapp\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre> <p>Start all tunnels:</p> <pre><code>./bin/sellia start\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#development-features","level":2,"title":"Development Features","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#debug-logging","level":3,"title":"Debug Logging","text":"<p>Enable verbose logging for debugging:</p> <pre><code>LOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n</code></pre> <p>Or for the CLI:</p> <pre><code>LOG_LEVEL=debug ./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Disable rate limiting for easier testing (not recommended for production):</p> <pre><code>./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io --no-rate-limit\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#authentication-testing","level":3,"title":"Authentication Testing","text":"<p>Test with API key authentication:</p> <pre><code># Terminal 1: Server with auth required\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io --require-auth --master-key test-key-123\n\n# Terminal 2: Tunnel with API key\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --api-key test-key-123\n</code></pre> <p>Note: You can also use environment variables for authentication: <pre><code># Set API key via environment\nexport SELLIA_API_KEY=test-key-123\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre></p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<p>Test reserved subdomain persistence:</p> <pre><code># Server with SQLite storage at custom path\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io --db-path ./sellia.db\n\n# Try to reserve a subdomain\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain myapp\n</code></pre> <p>Restart the server and try again - the subdomain should still be reserved.</p> <p>Note: By default, the database is stored at <code>~/.sellia/sellia.db</code>. Use <code>--db-path</code> to specify a custom location.</p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#testing-scenarios","level":2,"title":"Testing Scenarios","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#test-1-basic-http-tunnel","level":3,"title":"Test 1: Basic HTTP Tunnel","text":"<pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Local service\npython3 -m http.server 8080\n\n# Terminal 3: Tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# Test\ncurl http://&lt;assigned-subdomain&gt;.127.0.0.1.nip.io:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#test-2-websocket-tunnel","level":3,"title":"Test 2: WebSocket Tunnel","text":"<pre><code># Create a simple WebSocket server\n# Save as ws_server.rb:\nrequire 'websocket/server'\n# (Or use any WebSocket server)\n\n# Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: WebSocket server on port 8080\nruby ws_server.rb\n\n# Terminal 3: Tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# Test with websocat or a browser\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#test-3-basic-auth-tunnel","level":3,"title":"Test 3: Basic Auth Tunnel","text":"<pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Protected tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --auth user:password\n\n# Test without auth (should fail)\ncurl http://&lt;assigned-subdomain&gt;.127.0.0.1.nip.io:3000\n\n# Test with auth (should succeed)\ncurl -u user:password http://&lt;assigned-subdomain&gt;.127.0.0.1.nip.io:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#test-4-multiple-tunnels","level":3,"title":"Test 4: Multiple Tunnels","text":"<pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Tunnel 1\n./bin/sellia http 3000 --server http://127.0.0.1:3000 --subdomain app1\n\n# Terminal 3: Tunnel 2\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain app2\n\n# Test both\ncurl http://app1.127.0.0.1.nip.io:3000\ncurl http://app2.127.0.0.1.nip.io:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#inspector-ui-development","level":2,"title":"Inspector UI Development","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#running-in-dev-mode","level":3,"title":"Running in Dev Mode","text":"<p>The inspector UI runs via Vite's dev server during development:</p> <pre><code>cd web\nnpm run dev\n# Available at http://localhost:5173\n</code></pre> <p>When the Crystal binary doesn't find embedded assets at <code>web/dist/</code>, it automatically proxies to the Vite dev server.</p>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#building-production-assets","level":3,"title":"Building Production Assets","text":"<p>When ready to test with embedded assets:</p> <pre><code>cd web\nnpm run build\n\n# The Crystal binary will now use embedded assets\n# instead of proxying to Vite\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#inspector-features","level":3,"title":"Inspector Features","text":"<ul> <li>Live Request Stream: See requests in real-time</li> <li>Request Details: View headers, body, timing</li> <li>Response Details: View response status, headers, body</li> <li>Copy as cURL: Copy any request as a cURL command</li> <li>Clear History: Clear the inspector history</li> <li>Filter: Filter requests by various criteria</li> </ul>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#common-development-tasks","level":2,"title":"Common Development Tasks","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#auto-restart-on-file-changes","level":3,"title":"Auto-Restart on File Changes","text":"<p>For server development:</p> <pre><code># Install nodemon (or similar)\nnpm install -g nodemon\n\n# Use nodemon to restart the server on changes\nnodemon --exec ./bin/sellia-server -- --port 3000 --domain 127.0.0.1.nip.io\n</code></pre> <p>For CLI development, you'll need to restart the CLI manually after rebuilding:</p> <pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: After code changes\nshards build\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#testing-protocol-messages","level":3,"title":"Testing Protocol Messages","text":"<p>For testing protocol message serialization:</p> <pre><code># Run protocol tests\ncrystal spec spec/core/protocol/\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#testing-connection-scenarios","level":3,"title":"Testing Connection Scenarios","text":"<pre><code># Test reconnection behavior\n# 1. Start tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# 2. Kill server and restart\n# 3. Observe automatic reconnection\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#server-variables","level":3,"title":"Server Variables","text":"Variable Description Default <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains <code>localhost</code> <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key (none) <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code> <code>SELLIA_DISABLE_LANDING</code> Disable landing page <code>false</code> <code>SELLIA_DB_PATH</code> SQLite database path <code>~/.sellia/sellia.db</code> <code>SELLIA_NO_DB</code> Disable database <code>false</code> <code>LOG_LEVEL</code> Minimum log level <code>warn</code>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#cli-variables","level":3,"title":"CLI Variables","text":"Variable Description Default <code>SELLIA_SERVER</code> Tunnel server URL <code>http://localhost:3000</code> <code>SELLIA_API_KEY</code> API key for authentication (none) <code>LOG_LEVEL</code> Minimum log level <code>warn</code>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<pre><code># Find process using port 3000\nlsof -i :3000\n\n# Kill the process\nkill -9 &lt;PID&gt;\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#connection-refused","level":3,"title":"Connection Refused","text":"<p>Ensure the server is running and accessible:</p> <pre><code># Check if server is listening\nlsof -i :3000\n\n# Test server health\ncurl http://localhost:3000/health\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#subdomain-not-resolving","level":3,"title":"Subdomain Not Resolving","text":"<p>When using <code>127.0.0.1.nip.io</code>:</p> <pre><code># Test DNS resolution\nnslookup test.127.0.0.1.nip.io\n# Should resolve to 127.0.0.1\n</code></pre>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#tunnel-not-working","level":3,"title":"Tunnel Not Working","text":"<ol> <li>Check server logs for errors</li> <li>Verify the tunnel is registered: <code>LOG_LEVEL=debug ./bin/sellia http 8080</code></li> <li>Check firewall settings</li> <li>Ensure local service is running: <code>curl http://localhost:8080</code></li> </ol>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/running-locally/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Running Tests - Verify your changes</li> <li>Debugging - Debug techniques</li> <li>Contributing Workflow - Submit your changes</li> </ul>","path":["02 developer","Development","Running Locally"],"tags":[]},{"location":"02-developer/development/testing/","level":1,"title":"Testing","text":"<p>This guide covers running and writing tests for Sellia, including the test framework, test structure, and best practices.</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#running-tests","level":2,"title":"Running Tests","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#run-all-tests","level":3,"title":"Run All Tests","text":"<pre><code>crystal spec\n</code></pre> <p>This runs all tests in the <code>spec/</code> directory.</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#run-specific-test-file","level":3,"title":"Run Specific Test File","text":"<pre><code>crystal spec spec/server/tunnel_registry_spec.cr\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#run-with-verbose-output","level":3,"title":"Run with Verbose Output","text":"<pre><code>crystal spec --verbose\n</code></pre> <p>This shows detailed output for each test, including passing tests.</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#run-with-error-details","level":3,"title":"Run with Error Details","text":"<pre><code>crystal spec --error-trace\n</code></pre> <p>This shows full stack traces for errors, useful for debugging.</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#run-specific-test-by-name","level":3,"title":"Run Specific Test by Name","text":"<pre><code>crystal spec spec/core/protocol/message_spec.cr -e \"serialize\"\n</code></pre> <p>Runs only tests matching the pattern \"serialize\".</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#test-structure","level":2,"title":"Test Structure","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#directory-layout","level":3,"title":"Directory Layout","text":"<p>Tests mirror the source structure:</p> <pre><code>spec/\n├── core/                    # Tests for src/core/\n│   └── protocol/\n│       └── message_spec.cr # Protocol message tests\n├── server/                 # Tests for src/server/\n│   ├── admin_api_spec.cr\n│   ├── auth_provider_spec.cr\n│   ├── connection_manager_spec.cr\n│   ├── pending_request_spec.cr\n│   ├── rate_limiter_spec.cr\n│   ├── storage/\n│   │   └── repositories_spec.cr\n│   ├── tunnel_registry_spec.cr\n│   └── ws_gateway_spec.cr\n├── cli/                    # Tests for src/cli/\n│   ├── config_spec.cr\n│   ├── router_spec.cr\n│   └── routing_integration_spec.cr\n├── integration/            # Integration tests\n│   ├── tunnel_spec.cr\n│   └── websocket_spec.cr\n├── spec_helper.cr          # Test configuration\n└── sellia_spec.cr          # Basic tests\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#test-file-naming","level":3,"title":"Test File Naming","text":"<ul> <li>Test files use the <code>_spec.cr</code> suffix</li> <li>Test files mirror the source file structure</li> <li>Example: <code>src/server/tunnel_registry.cr</code> → <code>spec/server/tunnel_registry_spec.cr</code></li> </ul>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#writing-tests","level":2,"title":"Writing Tests","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#basic-test-structure","level":3,"title":"Basic Test Structure","text":"<pre><code>require \"spec\"\nrequire \"../../src/server/tunnel_registry\"\n\ndescribe Sellia::Server::TunnelRegistry do\n  describe \"#register_tunnel\" do\n    it \"registers a new tunnel\" do\n      registry = Sellia::Server::TunnelRegistry.new\n      tunnel = registry.register_tunnel(\"my-subdomain\", \"client-id\")\n\n      tunnel.subdomain.should eq(\"my-subdomain\")\n      tunnel.client_id.should eq(\"client-id\")\n    end\n  end\n\n  describe \"#get_tunnel\" do\n    it \"returns existing tunnel\" do\n      registry = Sellia::Server::TunnelRegistry.new\n      registry.register_tunnel(\"my-subdomain\", \"client-id\")\n\n      tunnel = registry.get_tunnel(\"my-subdomain\")\n      tunnel.should_not be_nil\n      tunnel.subdomain.should eq(\"my-subdomain\")\n    end\n\n    it \"returns nil for non-existent tunnel\" do\n      registry = Sellia::Server::TunnelRegistry.new\n      tunnel = registry.get_tunnel(\"non-existent\")\n\n      tunnel.should be_nil\n    end\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#test-context-and-setup","level":3,"title":"Test Context and Setup","text":"<p>Use <code>before_each</code> for setup. Note that <code>spec_helper.cr</code> automatically handles database setup and cleanup:</p> <pre><code>require \"spec\"\nrequire \"../../src/server/tunnel_registry\"\n\ndescribe Sellia::Server::TunnelRegistry do\n  # The spec_helper already sets up the test database\n  # and resets it before each test\n\n  it \"has no tunnels initially\" do\n    registry = Sellia::Server::TunnelRegistry.new\n    registry.tunnel_count.should eq(0)\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#testing-async-code","level":3,"title":"Testing Async Code","text":"<p>For testing WebSocket connections and async operations:</p> <pre><code>describe Sellia::Server::WSGateway do\n  it \"handles client connection\" do\n    gateway = Sellia::Server::WSGateway.new(\n      connection_manager: Sellia::Server::ConnectionManager.new,\n      tunnel_registry: Sellia::Server::TunnelRegistry.new,\n      auth_provider: Sellia::Server::AuthProvider.new(false, nil),\n      pending_requests: Sellia::Server::PendingRequestStore.new,\n      pending_websockets: Sellia::Server::PendingWebSocketStore.new,\n      rate_limiter: Sellia::Server::CompositeRateLimiter.new(enabled: false),\n      domain: \"localhost\",\n      port: 3000,\n      use_https: false\n    )\n\n    # Spawn server in background\n    spawn do\n      gateway.start(\"127.0.0.1\", 0) # Port 0 = random available port\n    end\n\n    # Wait for server to start\n    sleep 0.1\n\n    # Connect client and test\n    # ...\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#testing-error-cases","level":3,"title":"Testing Error Cases","text":"<pre><code>describe Sellia::Server::TunnelRegistry do\n  it \"raises error for duplicate subdomain\" do\n    registry = Sellia::Server::TunnelRegistry.new\n    registry.register_tunnel(\"my-subdomain\", \"client-1\")\n\n    expect_raises(Sellia::Server::TunnelExistsError) do\n      registry.register_tunnel(\"my-subdomain\", \"client-2\")\n    end\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#mocking-and-stubs","level":3,"title":"Mocking and Stubs","text":"<p>Crystal doesn't have built-in mocking, but you can use simple test doubles:</p> <pre><code># Test double for HTTP client\nclass FakeHTTPClient\n  property responses = Hash(String, String).new\n\n  def get(url : String) : String\n    responses[url] || \"default response\"\n  end\nend\n\ndescribe Sellia::Server::HTTPIngress do\n  it \"forwards request to tunnel\" do\n    fake_client = FakeHTTPClient.new\n    fake_client.responses[\"http://localhost:8080\"] = \"tunnel response\"\n\n    ingress = Sellia::Server::HTTPIngress.new(\n      tunnel_registry: Sellia::Server::TunnelRegistry.new,\n      connection_manager: Sellia::Server::ConnectionManager.new,\n      pending_requests: Sellia::Server::PendingRequestStore.new,\n      pending_websockets: Sellia::Server::PendingWebSocketStore.new,\n      rate_limiter: Sellia::Server::CompositeRateLimiter.new(enabled: false),\n      domain: \"localhost\",\n      landing_enabled: false\n    )\n\n    # Test forwarding logic\n    # ...\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#test-coverage","level":2,"title":"Test Coverage","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#currently-tested-areas","level":3,"title":"Currently Tested Areas","text":"<ul> <li>Protocol Message Serialization</li> <li>MessagePack encoding/decoding</li> <li>All message types (register, request, response, etc.)</li> <li> <p>Protocol version compatibility</p> </li> <li> <p>Tunnel Registry</p> </li> <li>Tunnel registration and removal</li> <li>Subdomain validation</li> <li>Duplicate detection</li> <li> <p>Client tracking</p> </li> <li> <p>Connection Management</p> </li> <li>WebSocket connection lifecycle</li> <li>Client registration/deregistration</li> <li> <p>Heartbeat/timeout handling</p> </li> <li> <p>HTTP Ingress</p> </li> <li>Request routing to tunnels</li> <li>Header forwarding</li> <li> <p>Response proxying</p> </li> <li> <p>End-to-End Tunnel Flow</p> </li> <li>Complete request/response cycle</li> <li>WebSocket communication</li> <li>Error handling</li> </ul>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#coverage-goals","level":3,"title":"Coverage Goals","text":"<p>Aim to maintain or improve test coverage with new changes:</p> <ul> <li>Core Protocol: 100% coverage (critical)</li> <li>Server Components: &gt;80% coverage</li> <li>CLI Components: &gt;70% coverage</li> <li>Edge Cases: Always test error paths</li> </ul>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#running-specific-test-suites","level":2,"title":"Running Specific Test Suites","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#protocol-tests","level":3,"title":"Protocol Tests","text":"<pre><code>crystal spec spec/core/protocol/\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#server-tests","level":3,"title":"Server Tests","text":"<pre><code>crystal spec spec/server/\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#cli-tests","level":3,"title":"CLI Tests","text":"<pre><code>crystal spec spec/cli/\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#integration-tests","level":3,"title":"Integration Tests","text":"<pre><code># End-to-end tunnel tests\ncrystal spec spec/integration/tunnel_spec.cr\n\n# WebSocket integration tests\ncrystal spec spec/integration/websocket_spec.cr\n</code></pre> <p>Integration tests typically: 1. Start a test server 2. Create a tunnel client 3. Make HTTP requests 4. Verify complete flow 5. Clean up resources</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#test-best-practices","level":2,"title":"Test Best Practices","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#1-descriptive-test-names","level":3,"title":"1. Descriptive Test Names","text":"<pre><code># Good\nit \"returns existing tunnel for valid subdomain\"\n\n# Bad\nit \"works\"\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#2-test-both-success-and-failure-cases","level":3,"title":"2. Test Both Success and Failure Cases","text":"<pre><code>describe \"#get_tunnel\" do\n  context \"with existing tunnel\" do\n    it \"returns the tunnel\"\n  end\n\n  context \"with non-existent tunnel\" do\n    it \"returns nil\"\n    it \"does not raise error\"\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#3-use-context-for-related-tests","level":3,"title":"3. Use Context for Related Tests","text":"<pre><code>describe \"subdomain validation\" do\n  context \"with valid subdomain\" do\n    it \"accepts alphanumeric characters\"\n    it \"accepts hyphens\"\n  end\n\n  context \"with invalid subdomain\" do\n    it \"rejects special characters\"\n    it \"rejects spaces\"\n    it \"rejects reserved names\"\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#4-keep-tests-focused","level":3,"title":"4. Keep Tests Focused","text":"<pre><code># Good: One behavior per test\nit \"returns tunnel for existing subdomain\"\n\n# Bad: Testing multiple things\nit \"registers, retrieves, and deletes tunnel\" # Split into 3 tests\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#5-use-matchers-appropriately","level":3,"title":"5. Use Matchers Appropriately","text":"<pre><code># Equality\ntunnel.subdomain.should eq(\"my-subdomain\")\n\n# Nil checks\ntunnel.should be_nil\ntunnel.should_not be_nil\n\n# Truthiness\nresult.should be_true\nresult.should be_false\n\n# Collections\ntunnels.size.should eq(5)\ntunnels.should contain(tunnel)\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#6-clean-up-resources","level":3,"title":"6. Clean Up Resources","text":"<pre><code>describe Sellia::Server::TunnelRegistry do\n  # Note: The spec_helper automatically handles database cleanup\n  # between tests, so you don't need to manually clear resources\n\n  it \"cleans up after itself\" do\n    registry = Sellia::Server::TunnelRegistry.new\n    # The database will be reset before the next test\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#performance-testing","level":2,"title":"Performance Testing","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#benchmarking","level":3,"title":"Benchmarking","text":"<p>For performance-critical code:</p> <pre><code>require \"benchmark\"\n\ndescribe \"message serialization\" do\n  it \"serializes messages quickly\" do\n    message = create_test_message\n\n    time = Benchmark.measure do\n      1000.times do\n        message.serialize\n      end\n    end\n\n    # Should serialize &lt; 1ms per message\n    (time.total * 1000).should be &lt; 1000\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#continuous-integration","level":2,"title":"Continuous Integration","text":"<p>Tests run automatically on: - Every pull request - Every push to main branch - Before release deployment</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#ci-configuration","level":3,"title":"CI Configuration","text":"<p>See <code>.github/workflows/ci.yml</code> for the complete CI configuration.</p> <p>Note: The CI workflow runs both Crystal tests (<code>crystal spec</code>) and web tests (<code>npm test</code> in the <code>web/</code> directory).</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#debugging-tests","level":2,"title":"Debugging Tests","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#using-verbose","level":3,"title":"Using --verbose","text":"<pre><code>crystal spec --verbose\n</code></pre> <p>Shows all passing and failing tests with details.</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#using-error-trace","level":3,"title":"Using --error-trace","text":"<pre><code>crystal spec --error-trace\n</code></pre> <p>Shows full stack traces for debugging failures.</p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#printf-debugging","level":3,"title":"printf Debugging","text":"<pre><code>it \"debugs something\" do\n  result = some_function\n\n  # Temporary debug output\n  puts \"Result: #{result.inspect}\"\n\n  result.should eq(expected)\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#using-debugger","level":3,"title":"Using debugger","text":"<p>Crystal has a built-in debugger:</p> <pre><code>require \"debug\"\n\nit \"debugs with breakpoint\" do\n  result = some_function\n\n  breakpoint  # Execution pauses here\n\n  result.should eq(expected)\nend\n</code></pre> <p>Run with: <pre><code>crystal spec spec/some_spec.cr --debug\n</code></pre></p>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#writing-testable-code","level":2,"title":"Writing Testable Code","text":"","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#dependency-injection","level":3,"title":"Dependency Injection","text":"<pre><code># Hard to test\nclass TunnelClient\n  def initialize\n    @http = HTTP::Client.new\n  end\nend\n\n# Easy to test\nclass TunnelClient\n  def initialize(@http : HTTP::Client)\n  end\nend\n\n# In tests\nfake_http = FakeHTTPClient.new\nclient = TunnelClient.new(fake_http)\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#avoid-global-state","level":3,"title":"Avoid Global State","text":"<pre><code># Hard to test\nclass Config\n  @@instance = Config.new\n\n  def self.instance\n    @@instance\n  end\nend\n\n# Easy to test\nclass Config\n  def self.new(file_path : String)\n    # Load from file\n  end\nend\n</code></pre>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/development/testing/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Debugging - Debug techniques</li> <li>Contributing Workflow - Submit your changes</li> </ul>","path":["02 developer","Development","Testing"],"tags":[]},{"location":"02-developer/inspector-ui/","level":1,"title":"Inspector UI","text":"<p>Development guide for the Sellia Inspector web interface.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is a React-based web application that provides real-time visualization of HTTP traffic through Sellia tunnels. It connects to the local CLI client via WebSocket and displays requests and responses as they occur.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#technology-stack","level":2,"title":"Technology Stack","text":"<ul> <li>React 18 - UI framework</li> <li>TypeScript - Type safety</li> <li>Vite - Build tool and dev server</li> <li>Tailwind CSS - Styling (optional)</li> <li>WebSocket API - Real-time communication</li> </ul>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#project-structure","level":2,"title":"Project Structure","text":"<pre><code>web/\n├── src/\n│   ├── App.tsx            # Root component (contains all UI logic)\n│   ├── main.tsx           # Application entry point\n│   └── index.css          # Global styles (Tailwind)\n├── public/                # Static assets\n├── index.html             # HTML template\n├── package.json\n├── tsconfig.json\n├── tsconfig.app.json\n├── tsconfig.node.json\n└── vite.config.ts\n</code></pre> <p>Note: Currently the entire UI is contained in a single <code>App.tsx</code> file. As the UI grows, consider splitting into multiple components.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#getting-started","level":2,"title":"Getting Started","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#development-setup","level":3,"title":"Development Setup","text":"<pre><code>cd web\n\n# Install dependencies\nnpm install\n\n# Start dev server\nnpm run dev\n</code></pre> <p>The CLI will proxy to Vite's dev server at <code>localhost:5173</code> when not built with embedded assets.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#build-for-production","level":3,"title":"Build for Production","text":"<pre><code>cd web\n\n# Build\nnpm run build\n\n# Preview build\nnpm run preview\n</code></pre> <p>Built assets are embedded in the Crystal binary for distribution.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#core-concepts","level":2,"title":"Core Concepts","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#websocket-connection","level":3,"title":"WebSocket Connection","text":"<p>The inspector connects to the local CLI client via WebSocket:</p> <pre><code>const ws = new WebSocket(`ws://${window.location.host}/api/live`);\n\nws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data);\n  if (data.type === 'request') {\n    setRequests(prev =&gt; [data.request, ...prev]);\n  }\n};\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#message-types","level":3,"title":"Message Types","text":"<p>Messages sent over WebSocket:</p> <pre><code>interface RequestMessage {\n  type: 'request';\n  request: {\n    id: string;\n    method: string;\n    path: string;\n    statusCode: number;\n    duration: number;\n    timestamp: Date;\n    requestHeaders: Record&lt;string, string&gt;;\n    requestBody?: string;\n    responseHeaders: Record&lt;string, string&gt;;\n    responseBody?: string;\n    matchedRoute?: string;\n    matchedTarget?: string;\n  };\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#state-management","level":3,"title":"State Management","text":"<p>React state for managing requests:</p> <pre><code>const [requests, setRequests] = useState&lt;Request[]&gt;([]);\nconst [selected, setSelected] = useState&lt;Request | null&gt;(null);\nconst [connected, setConnected] = useState(false);\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#components","level":2,"title":"Components","text":"<p>Current Implementation: All components are currently implemented inline in <code>App.tsx</code>. The examples below show the suggested structure for future refactoring.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#requestlist-planned","level":3,"title":"RequestList (Planned)","text":"<p>Displays list of all requests.</p> <p>Planned Location: <code>src/components/RequestList.tsx</code></p> <pre><code>interface RequestListProps {\n  requests: Request[];\n  selected: Request | null;\n  onSelect: (request: Request) =&gt; void;\n}\n\nexport function RequestList({ requests, selected, onSelect }: RequestListProps) {\n  return (\n    &lt;div className=\"w-1/2 border-r border-gray-700 overflow-y-auto\"&gt;\n      {requests.map(request =&gt; (\n        &lt;RequestItem\n          key={request.id}\n          request={request}\n          selected={selected?.id === request.id}\n          onClick={() =&gt; onSelect(request)}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#requestdetail-planned","level":3,"title":"RequestDetail (Planned)","text":"<p>Shows details of selected request.</p> <p>Planned Location: <code>src/components/RequestDetail.tsx</code></p> <pre><code>interface RequestDetailProps {\n  request: Request;\n}\n\nexport function RequestDetail({ request }: RequestDetailProps) {\n  return (\n    &lt;div className=\"w-1/2 overflow-y-auto p-4\"&gt;\n      &lt;h2&gt;{request.method} {request.path}&lt;/h2&gt;\n      &lt;RequestHeaders headers={request.requestHeaders} /&gt;\n      {request.requestBody &amp;&amp; &lt;RequestBody body={request.requestBody} /&gt;}\n      &lt;RequestHeaders headers={request.responseHeaders} /&gt;\n      {request.responseBody &amp;&amp; &lt;ResponseBody body={request.responseBody} /&gt;}\n    &lt;/div&gt;\n  );\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#typescript-types","level":2,"title":"TypeScript Types","text":"<p>Location: <code>src/App.tsx</code> (defined inline)</p> <pre><code>interface Request {\n  id: string;\n  method: string;\n  path: string;\n  statusCode: number;\n  duration: number;\n  timestamp: Date;\n  requestHeaders: Record&lt;string, string&gt;;\n  requestBody?: string;\n  responseHeaders: Record&lt;string, string&gt;;\n  responseBody?: string;\n  matchedRoute?: string;\n  matchedTarget?: string;\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#styling","level":2,"title":"Styling","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#tailwind-css","level":3,"title":"Tailwind CSS","text":"<p>The inspector uses Tailwind CSS v4 for styling.</p> <pre><code>export function Component() {\n  return (\n    &lt;div className=\"bg-gray-900 text-white p-4\"&gt;\n      {/* Content */}\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>Location: <code>src/index.css</code> imports Tailwind: <pre><code>@import \"tailwindcss\";\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#configuration","level":3,"title":"Configuration","text":"<p>Tailwind is configured via Vite plugin in <code>vite.config.ts</code>: <pre><code>import tailwindcss from '@tailwindcss/vite'\n\nexport default defineConfig({\n  plugins: [react(), tailwindcss()],\n})\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#current-implementation","level":3,"title":"Current Implementation","text":"<ul> <li>All UI logic is in a single <code>App.tsx</code> file for simplicity</li> <li>Uses React hooks for state management (no external state library)</li> <li>Direct WebSocket integration</li> <li>Tailwind CSS v4 for styling</li> </ul>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#future-improvements","level":3,"title":"Future Improvements","text":"<p>When refactoring into multiple components:</p> <ul> <li>Keep components focused and single-purpose</li> <li>Use TypeScript for all components</li> <li>Extract reusable logic into hooks</li> <li>Use memoization for expensive operations</li> <li>Virtualize long lists if they grow beyond 100 items</li> </ul>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#performance-considerations","level":3,"title":"Performance Considerations","text":"<ul> <li>Request list is limited to 1000 items</li> <li>New requests are added to the beginning of the list</li> <li>Immutable state updates for efficient re-rendering</li> <li>Conditional rendering of detail panel</li> </ul>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#error-handling","level":3,"title":"Error Handling","text":"<pre><code>useEffect(() =&gt; {\n  const ws = new WebSocket(`ws://${window.location.host}/api/live`);\n\n  ws.onmessage = (event) =&gt; {\n    try {\n      const data = JSON.parse(event.data);\n      if (data.type === 'request') {\n        setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000));\n      }\n    } catch (e) {\n      console.error('Failed to parse message:', e);\n    }\n  };\n\n  ws.onclose = () =&gt; {\n    setConnected(false);\n    setTimeout(() =&gt; {\n      setReconnectCounter(prev =&gt; prev + 1);\n    }, 3000);\n  };\n\n  return () =&gt; ws.close();\n}, [reconnectCounter]);\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#testing","level":2,"title":"Testing","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#current-status","level":3,"title":"Current Status","text":"<p>No automated tests are currently set up. Testing is manual:</p> <ol> <li> <p>Start a tunnel:    <pre><code>./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Make requests to public URL</p> </li> <li> <p>Open inspector: <code>http://127.0.0.1:4040</code></p> </li> <li> <p>Verify requests appear in real-time</p> </li> </ol>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#building-for-production","level":2,"title":"Building for Production","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#embed-in-crystal-binary","level":3,"title":"Embed in Crystal Binary","text":"<ol> <li> <p>Build UI:    <pre><code>cd web\nnpm run build\n</code></pre></p> </li> <li> <p>Build Crystal binary with assets:    <pre><code>cd ..\nshards build --release\n</code></pre></p> </li> </ol> <p>The <code>--release</code> flag causes Crystal to bake the <code>web/dist/</code> folder into the binary using the <code>baked_file_system</code> shard.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#development-mode","level":3,"title":"Development Mode","text":"<p>For development, simply run:</p> <pre><code>cd web\nnpm run dev\n</code></pre> <p>And start Sellia without the <code>--release</code> flag. The inspector will proxy requests to the Vite dev server.</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#websocket-connection-issues","level":3,"title":"WebSocket Connection Issues","text":"<p>Problem: Can't connect to WebSocket</p> <p>Solutions: - Verify CLI is running with inspector enabled - Check firewall allows port 4040 - Verify using correct WebSocket URL: <code>ws://${window.location.host}/api/live</code></p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#dev-server-issues","level":3,"title":"Dev Server Issues","text":"<p>Problem: Vite dev server not working</p> <p>Solutions: - Ensure <code>npm install</code> was run - Check port 5173 is available - Clear node_modules and reinstall</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#build-errors","level":3,"title":"Build Errors","text":"<p>Problem: Production build fails</p> <p>Solutions: - Check TypeScript errors: <code>npx tsc --noEmit</code> - Fix linting errors: <code>npm run lint</code> - Check for missing dependencies</p>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Component Architecture - Detailed component structure</li> <li>State Management - State management patterns</li> <li>Setup Guide - Development environment setup</li> <li>Embedding in Binary - Production deployment details</li> </ul>","path":["02 developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/","level":1,"title":"Inspector UI Component Architecture","text":"<p>Overview of the React component structure and architecture of the Sellia Inspector UI.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is a single-page React application built with TypeScript and Tailwind CSS. It follows a functional component pattern with hooks for state management and side effects.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#file-structure","level":2,"title":"File Structure","text":"<pre><code>web/src/\n├── main.tsx          # Application entry point\n├── App.tsx           # Root component with all UI logic\n└── index.css         # Global styles (Tailwind)\n</code></pre> <p>Note: Currently the entire UI is contained in a single <code>App.tsx</code> file. As the UI grows, consider splitting into multiple components.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#component-hierarchy","level":2,"title":"Component Hierarchy","text":"<pre><code>App (Root Component)\n├── Header\n│   ├── Title\n│   ├── Connection Status Badge\n│   └── Clear All Button\n├── Main Content Area\n│   ├── Request List (Left Panel)\n│   │   └── Request Item (repeated)\n│   └── Request Detail (Right Panel)\n│       ├── Request Header\n│       ├── Copy as curl Button\n│       ├── Request Headers\n│       ├── Route Info (if routed)\n│       ├── Request Body (if present)\n│       ├── Response Headers\n│       └── Response Body (if present)\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#root-component-app","level":2,"title":"Root Component: App","text":"<p>Location: <code>web/src/App.tsx</code></p> <p>The <code>App</code> component is the main and only component in the current implementation.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#responsibilities","level":3,"title":"Responsibilities","text":"<ol> <li>State Management</li> <li>Request list</li> <li>Selected request</li> <li>WebSocket connection status</li> <li> <p>Reconnection handling</p> </li> <li> <p>Data Fetching</p> </li> <li>Load historical requests on mount</li> <li> <p>Subscribe to live WebSocket updates</p> </li> <li> <p>UI Rendering</p> </li> <li>Request list panel</li> <li>Request detail panel</li> <li>Connection status indicator</li> </ol>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#data-models","level":2,"title":"Data Models","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#request-interface","level":3,"title":"Request Interface","text":"<pre><code>interface Request {\n  id: string                      // Unique request ID\n  method: string                  // HTTP method (GET, POST, etc.)\n  path: string                    // Request path\n  statusCode: number              // HTTP status code\n  duration: number                // Request duration in ms\n  timestamp: Date                 // Request timestamp\n  requestHeaders: Record&lt;string, string&gt;\n  requestBody?: string            // Optional request body\n  responseHeaders: Record&lt;string, string&gt;\n  responseBody?: string           // Optional response body\n  matchedRoute?: string           // Matched route pattern\n  matchedTarget?: string          // Target host:port\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#state-management","level":2,"title":"State Management","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#component-state","level":3,"title":"Component State","text":"<pre><code>const [requests, setRequests] = useState&lt;Request[]&gt;([])\nconst [selected, setSelected] = useState&lt;Request | null&gt;(null)\nconst [connected, setConnected] = useState(false)\nconst [reconnectCounter, setReconnectCounter] = useState(0)\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#state-variables","level":4,"title":"State Variables","text":"State Type Purpose <code>requests</code> <code>Request[]</code> List of all captured requests (max 1000) <code>selected</code> <code>Request \\| null</code> Currently selected request for detail view <code>connected</code> <code>boolean</code> WebSocket connection status <code>reconnectCounter</code> <code>number</code> Incremented to trigger WebSocket reconnect","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#lifecycle-effects","level":2,"title":"Lifecycle Effects","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#1-load-historical-requests","level":3,"title":"1. Load Historical Requests","text":"<pre><code>useEffect(() =&gt; {\n  fetch('/api/requests')\n    .then(r =&gt; r.json())\n    .then(data =&gt; setRequests(data))\n    .catch(console.error)\n}, [])\n</code></pre> <p>Purpose: Load previously captured requests on page load.</p> <p>Endpoint: <code>GET /api/requests</code></p> <p>Dependencies: Runs once on mount (empty dependency array).</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#2-websocket-connection","level":3,"title":"2. WebSocket Connection","text":"<pre><code>useEffect(() =&gt; {\n  const ws = new WebSocket(`ws://${window.location.host}/api/live`)\n\n  ws.onopen = () =&gt; setConnected(true)\n\n  ws.onclose = () =&gt; {\n    setConnected(false)\n    setTimeout(() =&gt; {\n      setReconnectCounter(prev =&gt; prev + 1)\n    }, 3000)\n  }\n\n  ws.onmessage = (event) =&gt; {\n    try {\n      const data = JSON.parse(event.data)\n      if (data.type === 'request') {\n        setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n      }\n    } catch (e) {\n      console.error('Failed to parse message:', e)\n    }\n  }\n\n  return () =&gt; ws.close()\n}, [reconnectCounter])\n</code></pre> <p>Purpose: Establish WebSocket connection for live updates.</p> <p>Behaviors: - Connects to <code>/api/live</code> WebSocket endpoint - Updates connection status - Auto-reconnects after 3 seconds on disconnect - Adds new requests to beginning of list - Limits to 1000 most recent requests - Cleans up WebSocket on unmount</p> <p>Dependencies: Re-runs when <code>reconnectCounter</code> changes (triggers reconnect).</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#ui-components","level":2,"title":"UI Components","text":"<p>Current Implementation: All UI components are implemented inline within <code>App.tsx</code>. The following sections describe the actual implementation structure.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#header","level":3,"title":"Header","text":"<pre><code>&lt;header className=\"border-b border-gray-700 px-4 py-3 flex items-center justify-between\"&gt;\n  &lt;div className=\"flex items-center gap-3\"&gt;\n    &lt;h1 className=\"text-lg font-semibold\"&gt;Sellia Inspector&lt;/h1&gt;\n    &lt;span className={`text-xs px-2 py-0.5 rounded ${\n      connected ? 'bg-green-600' : 'bg-red-600'\n    }`}&gt;\n      {connected ? 'Live' : 'Disconnected'}\n    &lt;/span&gt;\n  &lt;/div&gt;\n  &lt;button\n    onClick={async () =&gt; {\n      await fetch('/api/requests/clear', { method: 'POST' })\n      setRequests([])\n    }}\n    className=\"text-sm text-gray-400 hover:text-white\"\n  &gt;\n    Clear All\n  &lt;/button&gt;\n&lt;/header&gt;\n</code></pre> <p>Features: - Title and connection status - Live/Disconnected badge (green/red) - Clear All button to reset request list</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#request-list-left-panel","level":3,"title":"Request List (Left Panel)","text":"<pre><code>&lt;div className=\"w-1/2 border-r border-gray-700 overflow-y-auto\"&gt;\n  {requests.length === 0 ? (\n    &lt;div className=\"p-8 text-center text-gray-500\"&gt;\n      Waiting for requests...\n    &lt;/div&gt;\n  ) : (\n    requests.map(req =&gt; (\n      &lt;div\n        key={req.id}\n        onClick={() =&gt; setSelected(req)}\n        className={`px-4 py-2 border-b border-gray-800 cursor-pointer hover:bg-gray-800 ${\n          selected?.id === req.id ? 'bg-gray-800' : ''\n        }`}\n      &gt;\n        &lt;div className=\"flex items-center gap-3\"&gt;\n          &lt;span className={`font-mono ${statusColor(req.statusCode)}`}&gt;\n            {req.statusCode}\n          &lt;/span&gt;\n          &lt;span className=\"font-mono text-sm text-gray-300\"&gt;\n            {req.method}\n          &lt;/span&gt;\n          &lt;span className=\"font-mono text-sm truncate flex-1\"&gt;\n            {req.path}\n          &lt;/span&gt;\n          {req.matchedTarget &amp;&amp; (\n            &lt;span className=\"text-xs text-gray-500 font-mono\"&gt;\n              → {req.matchedTarget}\n            &lt;/span&gt;\n          )}\n          &lt;span className=\"text-xs text-gray-500\"&gt;\n            {req.duration}ms\n          &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    ))\n  )}\n&lt;/div&gt;\n</code></pre> <p>Features: - Shows \"Waiting for requests...\" when empty - Lists up to 1000 requests - Highlights selected request - Click to select for detail view</p> <p>Request Item Display: - Status code (color-coded) - HTTP method - Request path - Target (if routed) - Duration in ms</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#request-detail-right-panel","level":3,"title":"Request Detail (Right Panel)","text":"<pre><code>&lt;div className=\"w-1/2 overflow-y-auto p-4\"&gt;\n  {selected ? (\n    &lt;div className=\"space-y-4\"&gt;\n      &lt;div className=\"flex justify-between items-center\"&gt;\n        &lt;h2 className=\"text-lg font-semibold\"&gt;\n          {selected.method} {selected.path}\n        &lt;/h2&gt;\n        &lt;button\n          onClick={() =&gt; copyAsCurl(selected)}\n          className=\"text-sm px-3 py-1 bg-gray-700 rounded hover:bg-gray-600\"\n        &gt;\n          Copy as curl\n        &lt;/button&gt;\n      &lt;/div&gt;\n\n      &lt;section&gt;\n        &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Request Headers&lt;/h3&gt;\n        &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto\"&gt;\n          {JSON.stringify(selected.requestHeaders, null, 2)}\n        &lt;/pre&gt;\n      &lt;/section&gt;\n\n      {selected.matchedRoute &amp;&amp; (\n        &lt;section&gt;\n          &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Route&lt;/h3&gt;\n          &lt;div className=\"bg-gray-800 p-3 rounded text-sm font-mono\"&gt;\n            {selected.matchedRoute} → {selected.matchedTarget}\n          &lt;/div&gt;\n        &lt;/section&gt;\n      )}\n\n      {selected.requestBody &amp;&amp; (\n        &lt;section&gt;\n          &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Request Body&lt;/h3&gt;\n          &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto\"&gt;\n            {selected.requestBody}\n          &lt;/pre&gt;\n        &lt;/section&gt;\n      )}\n\n      &lt;section&gt;\n        &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Response Headers&lt;/h3&gt;\n        &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto\"&gt;\n          {JSON.stringify(selected.responseHeaders, null, 2)}\n        &lt;/pre&gt;\n      &lt;/section&gt;\n\n      {selected.responseBody &amp;&amp; (\n        &lt;section&gt;\n          &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Response Body&lt;/h3&gt;\n          &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto whitespace-pre-wrap\"&gt;\n            {selected.responseBody}\n          &lt;/pre&gt;\n        &lt;/section&gt;\n      )}\n    &lt;/div&gt;\n  ) : (\n    &lt;div className=\"h-full flex items-center justify-center text-gray-500\"&gt;\n      Select a request to view details\n    &lt;/div&gt;\n  )}\n&lt;/div&gt;\n</code></pre> <p>Features: - Shows full request/response details - Copy as cURL button - Headers display - Body display (if present) - Route information (if routed)</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#helper-functions","level":2,"title":"Helper Functions","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#status-color-coding","level":3,"title":"Status Color Coding","text":"<pre><code>const statusColor = (code: number) =&gt; {\n  if (code &lt; 300) return 'text-green-500'\n  if (code &lt; 400) return 'text-blue-500'\n  if (code &lt; 500) return 'text-yellow-500'\n  return 'text-red-500'\n}\n</code></pre> <p>Purpose: Returns Tailwind class for status code coloring.</p> Range Color Meaning 2xx Green Success 3xx Blue Redirect 4xx Yellow Client Error 5xx Red Server Error","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#copy-as-curl","level":3,"title":"Copy as cURL","text":"<pre><code>const copyAsCurl = (req: Request) =&gt; {\n  const headers = Object.entries(req.requestHeaders)\n    .map(([k, v]) =&gt; `-H '${k}: ${v}'`)\n    .join(' ')\n  const curl = `curl -X ${req.method} ${headers} '${window.location.origin}${req.path}'`\n  navigator.clipboard.writeText(curl)\n}\n</code></pre> <p>Purpose: Generate and copy cURL command to clipboard.</p> <p>Format: <pre><code>curl -X GET -H 'User-Agent: ...' -H 'Accept: ...' 'https://myapp.sellia.me/path'\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#styling","level":2,"title":"Styling","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#tailwind-css","level":3,"title":"Tailwind CSS","text":"<p>All styling uses Tailwind utility classes:</p> <pre><code>// Dark theme colors\nbg-gray-900        // Dark background\ntext-gray-100      // Light text\nborder-gray-700    // Borders\nhover:bg-gray-800  // Hover states\n\n// Status colors\ntext-green-500     // 2xx status\ntext-blue-500      // 3xx status\ntext-yellow-500    // 4xx status\ntext-red-500       // 5xx status\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#layout","level":3,"title":"Layout","text":"<ul> <li>Flexbox for one-dimensional layouts</li> <li>Fixed dimensions for panel split (50/50)</li> <li>Overflow scroll for list and detail panels</li> <li>Spacing using Tailwind spacing scale</li> </ul>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#future-component-structure-suggested","level":2,"title":"Future Component Structure (Suggested)","text":"<p>As the UI grows, consider splitting into:</p> <pre><code>src/\n├── components/\n│   ├── Header/\n│   │   ├── Header.tsx\n│   │   └── ConnectionStatus.tsx\n│   ├── RequestList/\n│   │   ├── RequestList.tsx\n│   │   └── RequestItem.tsx\n│   ├── RequestDetail/\n│   │   ├── RequestDetail.tsx\n│   │   ├── RequestHeaders.tsx\n│   │   ├── RequestBody.tsx\n│   │   └── CopyAsCurlButton.tsx\n│   └── shared/\n│       ├── StatusBadge.tsx\n│       └── Timestamp.tsx\n├── hooks/\n│   ├── useWebSocket.ts\n│   └── useRequests.ts\n├── types/\n│   └── request.ts\n└── utils/\n    └── curl.ts\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#request-limit","level":3,"title":"Request Limit","text":"<pre><code>setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n</code></pre> <p>Why: Limits memory usage by keeping only 1000 most recent requests.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#websocket-reconnection","level":3,"title":"WebSocket Reconnection","text":"<pre><code>setTimeout(() =&gt; {\n  setReconnectCounter(prev =&gt; prev + 1)\n}, 3000)\n</code></pre> <p>Why: Prevents tight reconnect loops, gives server time to recover.</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#accessibility","level":2,"title":"Accessibility","text":"","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#keyboard-navigation","level":3,"title":"Keyboard Navigation","text":"<ul> <li>Currently limited</li> <li>Future: Add keyboard shortcuts for:</li> <li>Up/Down arrows to navigate requests</li> <li>Escape to deselect</li> <li>Ctrl+C to copy cURL</li> </ul>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#aria-labels","level":3,"title":"ARIA Labels","text":"<p>Future improvements: - Add <code>aria-label</code> to buttons - Use semantic HTML elements - Add <code>role</code> attributes where needed</p>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/component-architecture/#see-also","level":2,"title":"See Also","text":"<ul> <li>Setup Guide - Development environment setup</li> <li>State Management - State management patterns</li> <li>Embedding in Binary - Production deployment</li> </ul>","path":["02 developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/","level":1,"title":"Embedding Inspector UI in Crystal Binary","text":"<p>How the React Inspector UI is embedded into the Crystal binary for single-file distribution.</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is embedded directly into the Crystal binary using the <code>baked_file_system</code> shard. This creates a single executable that contains both the backend server and the frontend UI, with no external file dependencies.</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#architecture","level":2,"title":"Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────┐\n│              sellia (Crystal Binary)                    │\n├─────────────────────────────────────────────────────────┤\n│                                                          │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │  Crystal Inspector Server (HTTP::Server)         │  │\n│  │  - Serves baked assets                           │  │\n│  │  - Provides REST API (/api/requests)             │  │\n│  │  - Provides WebSocket (/api/live)                │  │\n│  └──────────────────────────────────────────────────┘  │\n│                                                          │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │  Baked Assets (compiled into binary)             │  │\n│  │  - index.html                                    │  │\n│  │  - JavaScript bundles                            │  │\n│  │  - CSS files                                     │  │\n│  │  - Images, fonts, etc.                           │  │\n│  └──────────────────────────────────────────────────┘  │\n└─────────────────────────────────────────────────────────┘\n</code></pre>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#build-process","level":2,"title":"Build Process","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#development-build","level":3,"title":"Development Build","text":"<pre><code># No baking - proxies to Vite dev server\nshards build\n./bin/sellia http 3000\n</code></pre> <p>Characteristics: - <code>--release</code> flag NOT set - Assets NOT baked into binary - Inspector proxies to <code>localhost:5173</code> (Vite dev server) - Faster compilation, suitable for development</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#production-build","level":3,"title":"Production Build","text":"<pre><code># Step 1: Build UI\ncd web\nnpm run build\n# Creates: web/dist/\n\n# Step 2: Build Crystal binary with baked assets\ncd ..\nshards build --release\n</code></pre> <p>Characteristics: - <code>--release</code> flag set - Assets baked into binary at compile time - Self-contained executable - Optimized for production</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#implementation","level":2,"title":"Implementation","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#conditional-compilation","level":3,"title":"Conditional Compilation","text":"<p>Location: <code>src/cli/inspector.cr:8-12</code></p> <pre><code>{% unless flag?(:release) %}\n  # Development mode - no baked assets needed\n{% else %}\n  require \"baked_file_system\"\n{% end %}\n</code></pre> <p>How it works: - Crystal conditionally compiles code based on <code>--release</code> flag - Development mode: Baking skipped - Release mode: Baking enabled</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#baking-assets","level":3,"title":"Baking Assets","text":"<p>Location: <code>src/cli/inspector.cr:15-20</code></p> <pre><code>{% if flag?(:release) %}\n  class InspectorAssets\n    extend BakedFileSystem\n\n    bake_folder \"../../web/dist\", __DIR__\n  end\n{% end %}\n</code></pre> <p>What happens: 1. At compile time, <code>baked_file_system</code> reads <code>web/dist/</code> 2. Each file is converted to a Crystal string constant 3. Files are embedded in the binary 4. Runtime: Serve files from memory, no disk I/O</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#serving-baked-files","level":3,"title":"Serving Baked Files","text":"<p>Location: <code>src/cli/inspector.cr:171-195</code></p> <pre><code>private def serve_baked_file(context : HTTP::Server::Context, path : String)\n  # Try to get the file from baked assets\n  file = InspectorAssets.get?(path)\n\n  # If not found and not already index.html, try index.html (SPA fallback)\n  if file.nil? &amp;&amp; path != \"/index.html\" &amp;&amp; !path.starts_with?(\"/assets/\")\n    file = InspectorAssets.get?(\"/index.html\")\n  end\n\n  if file\n    content_type = mime_type_for(path)\n    context.response.content_type = content_type\n\n    # Cache static assets aggressively\n    if path.starts_with?(\"/assets/\")\n      context.response.headers[\"Cache-Control\"] = \"public, max-age=31536000, immutable\"\n    end\n\n    context.response.print(file.gets_to_end)\n  else\n    context.response.status_code = 404\n    context.response.content_type = \"text/plain\"\n    context.response.print(\"Not found: #{path}\")\n  end\nend\n</code></pre> <p>Key features: 1. Lookup: <code>InspectorAssets.get?(path)</code> retrieves baked file 2. SPA Fallback: Non-existent routes return <code>index.html</code> (for React Router) 3. MIME Types: Correct content type based on file extension 4. Caching: Aggressive caching for assets (1 year)</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#mime-type-detection","level":3,"title":"MIME Type Detection","text":"<p>Location: <code>src/cli/inspector.cr:197-228</code></p> <pre><code>private def mime_type_for(path : String) : String\n  case path\n  when .ends_with?(\".html\")\n    \"text/html; charset=utf-8\"\n  when .ends_with?(\".js\")\n    \"application/javascript; charset=utf-8\"\n  when .ends_with?(\".css\")\n    \"text/css; charset=utf-8\"\n  when .ends_with?(\".svg\")\n    \"image/svg+xml\"\n  when .ends_with?(\".png\")\n    \"image/png\"\n  when .ends_with?(\".jpg\"), .ends_with?(\".jpeg\")\n    \"image/jpeg\"\n  when .ends_with?(\".gif\")\n    \"image/gif\"\n  when .ends_with?(\".ico\")\n    \"image/x-icon\"\n  when .ends_with?(\".woff\")\n    \"font/woff\"\n  when .ends_with?(\".woff2\")\n    \"font/woff2\"\n  when .ends_with?(\".ttf\")\n    \"font/ttf\"\n  when .ends_with?(\".json\")\n    \"application/json\"\n  when .ends_with?(\".map\")\n    \"application/json\"\n  else\n    \"application/octet-stream\"\n  end\nend\n</code></pre>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#file-routing","level":2,"title":"File Routing","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#request-flow","level":3,"title":"Request Flow","text":"<pre><code>1. HTTP request to inspector (e.g., GET /)\n   ↓\n2. Route determination in handle_request()\n   ↓\n3. If API endpoint (/api/*) → handle API request\n   ↓\n4. If root (/) → serve index.html\n   ↓\n5. Otherwise → serve file or fallback to index.html\n</code></pre>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#route-table","level":3,"title":"Route Table","text":"Path Handler Description <code>/api/live</code> WebSocket Live request updates <code>/api/requests</code> REST API Get all requests <code>/api/requests/clear</code> REST API Clear all requests <code>/</code> File Serve index.html <code>/*</code> File or index.html Serve file or SPA fallback","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#development-vs-production-behavior","level":2,"title":"Development vs Production Behavior","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#development-mode","level":3,"title":"Development Mode","text":"<pre><code>private def serve_file(context : HTTP::Server::Context, path : String)\n  {% unless flag?(:release) %}\n    proxy_to_vite(context, path)\n  {% else %}\n    serve_baked_file(context, path)\n  {% end %}\nend\n</code></pre> <p>Behavior: - Proxies requests to Vite dev server at <code>localhost:5173</code> - Enables HMR (Hot Module Replacement) - No compilation needed for UI changes - Requires <code>npm run dev</code> running separately</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#production-mode","level":3,"title":"Production Mode","text":"<pre><code>private def serve_file(context : HTTP::Server::Context, path : String)\n  {% if flag?(:release) %}\n    serve_baked_file(context, path)\n  {% end %}\nend\n</code></pre> <p>Behavior: - Serves baked assets from binary - Single executable deployment - No external file dependencies - UI changes require rebuild</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#asset-caching-strategy","level":2,"title":"Asset Caching Strategy","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#static-assets-js-css-images","level":3,"title":"Static Assets (JS, CSS, Images)","text":"<pre><code>if path.starts_with?(\"/assets/\")\n  context.response.headers[\"Cache-Control\"] = \"public, max-age=31536000, immutable\"\nend\n</code></pre> <p>Why: Assets have content-hash in filename (e.g., <code>index-abc123.js</code>), so they can be cached indefinitely.</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#html","level":3,"title":"HTML","text":"<pre><code># No cache header for HTML\ncontext.response.print(file.gets_to_end)\n</code></pre> <p>Why: HTML should always be fresh to ensure latest asset references.</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#build-script","level":2,"title":"Build Script","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#manual-build","level":3,"title":"Manual Build","text":"<pre><code>#!/bin/bash\nset -e\n\necho \"Building React UI...\"\ncd web\nnpm run build\ncd ..\n\necho \"Building Crystal binary...\"\nshards build --release\n\necho \"Done! Binary: ./bin/sellia\"\n</code></pre>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#automated-build-github-actions","level":3,"title":"Automated Build (GitHub Actions)","text":"<p>Location: <code>.github/workflows/release.yml</code></p> <pre><code>- name: Install Node.js\n  uses: actions/setup-node@v4\n  with:\n    node-version: '20'\n\n- name: Build Inspector UI\n  run: |\n    cd web\n    npm ci\n    npm run build\n\n- name: Build Crystal\n  run: shards build --release\n</code></pre>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#binary-size-impact","level":2,"title":"Binary Size Impact","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#before-baking","level":3,"title":"Before Baking","text":"<pre><code>-rwxr-xr-x  1 user  staff  4.2M  bin/sellia (no assets)\n</code></pre>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#after-baking","level":3,"title":"After Baking","text":"<pre><code>-rwxr-xr-x  1 user  staff  5.8M  bin/sellia (with assets)\n</code></pre> <p>Overhead: ~1.6MB for React UI bundle</p> <p>Optimization: - Assets compressed at compile time - No runtime decompression overhead - Acceptable trade-off for single-file deployment</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#updating-the-ui","level":2,"title":"Updating the UI","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#development","level":3,"title":"Development","text":"<ol> <li>Edit React code in <code>web/src/</code></li> <li>Vite HMR automatically reloads browser</li> <li>No rebuild needed</li> </ol>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#production","level":3,"title":"Production","text":"<ol> <li>Edit React code in <code>web/src/</code></li> <li>Build UI:    <pre><code>cd web &amp;&amp; npm run build &amp;&amp; cd ..\n</code></pre></li> <li>Rebuild Crystal binary:    <pre><code>shards build --release\n</code></pre></li> <li>Test new binary</li> </ol>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#ui-not-updating","level":3,"title":"UI Not Updating","text":"<p>Symptom: Changes to React code not reflected in inspector.</p> <p>Cause: Using stale baked assets from previous build.</p> <p>Solution: <pre><code># Clean and rebuild\ncd web\nrm -rf dist node_modules/.vite\nnpm run build\ncd ..\nshards build --release\n</code></pre></p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#404-for-assets","level":3,"title":"404 for Assets","text":"<p>Symptom: Browser shows 404 for <code>/assets/index-xxx.js</code>.</p> <p>Cause: Assets not baked or incorrect path.</p> <p>Solution: 1. Ensure <code>npm run build</code> completed successfully 2. Check <code>web/dist/</code> exists and contains assets 3. Rebuild with <code>--release</code> flag</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#large-binary-size","level":3,"title":"Large Binary Size","text":"<p>Symptom: Binary &gt; 10MB.</p> <p>Cause: Debug build includes all assets unoptimized.</p> <p>Solution: 1. Always use <code>--release</code> flag for production 2. Check <code>web/dist/</code> size (should be &lt; 2MB) 3. Verify production build: <code>npm run build</code></p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#future-improvements","level":2,"title":"Future Improvements","text":"","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#compression","level":3,"title":"Compression","text":"<p>Use gzip compression for baked assets:</p> <pre><code>require \"gzip\"\n\n{% if flag?(:release) %}\n  class InspectorAssets\n    extend BakedFileSystem\n\n    bake_folder \"../../web/dist\", __DIR__, gzip: true\n  end\n{% end %}\n</code></pre> <p>Benefit: 60-70% size reduction for text assets.</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#lazy-loading","level":3,"title":"Lazy Loading","text":"<p>Load chunks on demand:</p> <pre><code>// React.lazy + Suspense\nconst RequestDetail = React.lazy(() =&gt; import('./RequestDetail'))\n</code></pre> <p>Benefit: Smaller initial bundle size, faster first load.</p>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/embedding/#see-also","level":2,"title":"See Also","text":"<ul> <li>Setup Guide - Development setup</li> <li>Component Architecture - React components</li> <li>State Management - State patterns</li> <li>Backend Inspector - Crystal server implementation</li> </ul>","path":["02 developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"02-developer/inspector-ui/setup/","level":1,"title":"Inspector UI Setup","text":"<p>Guide for setting up the development environment for the Sellia Inspector UI.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is a React application built with Vite that provides real-time request monitoring for Sellia tunnels. It communicates with the Crystal backend via WebSocket and REST APIs.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#prerequisites","level":2,"title":"Prerequisites","text":"<ul> <li>Node.js 18+ and npm</li> <li>Crystal 1.10+ (for backend)</li> <li>Git</li> </ul>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#project-structure","level":2,"title":"Project Structure","text":"<pre><code>web/\n├── src/\n│   ├── App.tsx          # Main React component\n│   ├── main.tsx         # Application entry point\n│   └── index.css        # Global styles\n├── public/              # Static assets\n├── index.html           # HTML template\n├── package.json         # Node dependencies\n├── vite.config.ts       # Vite configuration\n├── tsconfig.json        # TypeScript configuration\n└── dist/                # Build output (generated)\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#initial-setup","level":2,"title":"Initial Setup","text":"","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#1-install-dependencies","level":3,"title":"1. Install Dependencies","text":"<pre><code>cd web\nnpm install\n</code></pre> <p>This installs: - <code>react</code> ^19.2.0 - UI framework - <code>react-dom</code> ^19.2.0 - React DOM bindings - <code>vite</code> ^7.2.4 - Build tool and dev server - <code>typescript</code> ~5.9.3 - Type checking - <code>tailwindcss</code> ^4.1.18 - Styling - <code>@vitejs/plugin-react</code> ^5.1.1 - React plugin for Vite</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#2-development-server","level":3,"title":"2. Development Server","text":"<p>Start the Vite dev server (port 5173):</p> <pre><code>npm run dev\n</code></pre> <p>The UI will be available at <code>http://localhost:5173</code></p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#3-start-crystal-backend","level":3,"title":"3. Start Crystal Backend","text":"<p>In a separate terminal, start Sellia in development mode (no <code>--release</code> flag):</p> <pre><code># From project root\nshards build\n./bin/sellia http 3000\n</code></pre> <p>The inspector will proxy requests to the Vite dev server automatically.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#live-development","level":3,"title":"Live Development","text":"<ol> <li> <p>Start Vite dev server: <pre><code>cd web\nnpm run dev\n</code></pre></p> </li> <li> <p>Start Sellia (in separate terminal): <pre><code>shards build\n./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Access inspector:</p> </li> <li>Open <code>http://127.0.0.1:4040</code> in your browser</li> <li>Changes to React code will hot-reload via Vite HMR</li> </ol>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#file-watching","level":3,"title":"File Watching","text":"<p>Vite automatically watches for changes in <code>web/src/</code> and triggers fast hot module replacement (HMR).</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#linting","level":3,"title":"Linting","text":"<p>Run ESLint:</p> <pre><code>npm run lint\n</code></pre> <p>Fix issues automatically:</p> <pre><code>npm run lint -- --fix\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#configuration","level":2,"title":"Configuration","text":"","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#vite-config-viteconfigts","level":3,"title":"Vite Config (<code>vite.config.ts</code>)","text":"<pre><code>export default defineConfig({\n  plugins: [react(), tailwindcss()],\n  build: {\n    outDir: 'dist',\n    emptyOutDir: true,\n  },\n  server: {\n    port: 5173,\n  },\n})\n</code></pre> <p>Key settings: - <code>port</code>: Dev server port (default 5173) - <code>outDir</code>: Production build output directory - <code>plugins</code>: React and Tailwind CSS integration</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#typescript-config","level":3,"title":"TypeScript Config","text":"<p>Two TypeScript configs:</p> <ol> <li><code>tsconfig.json</code> - Application code</li> <li><code>tsconfig.node.json</code> - Build tooling (Vite config)</li> </ol> <p>Both extend from base configurations and enable strict type checking.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#building-for-production","level":2,"title":"Building for Production","text":"","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#production-build","level":3,"title":"Production Build","text":"<p>Create optimized production build:</p> <pre><code>cd web\nnpm run build\n</code></pre> <p>This creates <code>web/dist/</code> with: - Minified JavaScript - Optimized assets - Source maps (if enabled)</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#build-output","level":3,"title":"Build Output","text":"<pre><code>dist/\n├── index.html              # Entry HTML\n├── assets/\n│   ├── index-[hash].js     # Bundled JavaScript\n│   ├── index-[hash].css    # Bundled CSS\n│   └── ...                 # Other assets\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#production-binary","level":3,"title":"Production Binary","text":"<p>After building the UI, create release binary:</p> <pre><code># From project root\ncd web &amp;&amp; npm run build &amp;&amp; cd ..\nshards build --release\n</code></pre> <p>The <code>--release</code> flag: - Bakes <code>web/dist/</code> into the binary - Enables asset serving from binary instead of Vite proxy</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#development-vs-production-modes","level":2,"title":"Development vs Production Modes","text":"","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#development-mode-default","level":3,"title":"Development Mode (Default)","text":"<pre><code>shards build\n./bin/sellia http 3000\n</code></pre> <p>Characteristics: - Inspector proxies to Vite dev server (<code>localhost:5173</code>) - Fast refresh with HMR - Source maps available - Larger binary size - Requires both <code>npm run dev</code> and Sellia running</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#production-mode","level":3,"title":"Production Mode","text":"<pre><code>shards build --release\n./bin/sellia http 3000\n</code></pre> <p>Characteristics: - UI assets baked into binary - No external dev server needed - Optimized, minified assets - Single binary deployment - Faster startup</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#vite-dev-server-not-running","level":3,"title":"\"Vite Dev Server Not Running\"","text":"<p>Cause: Vite dev server is not running or not accessible.</p> <p>Solution: 1. Start Vite dev server:    <pre><code>cd web &amp;&amp; npm run dev\n</code></pre> 2. Ensure it's running on port 5173 3. Or build for production:    <pre><code>npm run build &amp;&amp; shards build --release\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#hmr-not-working","level":3,"title":"HMR Not Working","text":"<p>Cause: WebSocket connection to Vite failed (can't proxy WebSocket upgrades).</p> <p>Solution: - This is expected behavior. Direct your browser to <code>http://localhost:5173</code> for HMR. - Or manually refresh the inspector page at <code>http://127.0.0.1:4040</code>.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#port-5173-already-in-use","level":3,"title":"Port 5173 Already in Use","text":"<p>Cause: Another process is using the Vite port.</p> <p>Solution: 1. Find and stop the process:    <pre><code>lsof -i :5173\nkill -9 &lt;PID&gt;\n</code></pre> 2. Or change Vite port in <code>vite.config.ts</code>:    <pre><code>server: {\n  port: 5174,  # Use different port\n}\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#build-errors","level":3,"title":"Build Errors","text":"<p>Cause: TypeScript errors or missing dependencies.</p> <p>Solution: 1. Check TypeScript errors:    <pre><code>npx tsc --noEmit\n</code></pre> 2. Reinstall dependencies:    <pre><code>rm -rf node_modules package-lock.json\nnpm install\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#environment-variables","level":2,"title":"Environment Variables","text":"<p>The inspector UI respects some environment variables:</p> Variable Description <code>VITE_PORT</code> Override Vite dev server port <code>NODE_ENV</code> Set to <code>production</code> for production builds <p>Example: <pre><code>VITE_PORT=5174 npm run dev\n</code></pre></p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#api-endpoints","level":2,"title":"API Endpoints","text":"<p>The inspector communicates with the Crystal backend via:</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#rest-api","level":3,"title":"REST API","text":"Endpoint Method Description <code>/api/requests</code> GET Get all stored requests <code>/api/requests/clear</code> POST Clear all requests","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#websocket","level":3,"title":"WebSocket","text":"Endpoint Description <code>/api/live</code> Real-time request updates","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#styling-with-tailwind-css","level":2,"title":"Styling with Tailwind CSS","text":"<p>The inspector uses Tailwind CSS v4 for styling.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#usage","level":3,"title":"Usage","text":"<pre><code>&lt;div className=\"bg-gray-900 text-white p-4\"&gt;\n  Content here\n&lt;/div&gt;\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#configuration_1","level":3,"title":"Configuration","text":"<p>Tailwind is configured via Vite plugin in <code>vite.config.ts</code>. No separate config file needed for v4.</p>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#testing","level":2,"title":"Testing","text":"<p>Currently no automated tests are set up. Manual testing:</p> <ol> <li> <p>Start a tunnel:    <pre><code>./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Make requests to public URL</p> </li> <li> <p>Open inspector: <code>http://127.0.0.1:4040</code></p> </li> <li> <p>Verify requests appear in real-time</p> </li> </ol>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/setup/#see-also","level":2,"title":"See Also","text":"<ul> <li>Component Architecture - React component structure</li> <li>State Management - How state is managed</li> <li>Embedding in Binary - Production deployment</li> <li>Inspector User Guide - End-user documentation</li> </ul>","path":["02 developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/","level":1,"title":"Inspector UI State Management","text":"<p>How state is managed in the Sellia Inspector UI, including data flow, WebSocket communication, and React patterns.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI uses React's built-in state management with hooks. There's no external state management library (no Redux, Zustand, etc.) - keeping it simple and maintainable.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#state-architecture","level":2,"title":"State Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────┐\n│                         App.tsx                         │\n├─────────────────────────────────────────────────────────┤\n│                                                          │\n│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │\n│  │ requests[]   │  │ selected     │  │ connected    │ │\n│  │ (useState)   │  │ (useState)   │  │ (useState)   │ │\n│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘ │\n│         │                 │                 │           │\n│         ▼                 ▼                 ▼           │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │              WebSocket Effect                     │  │\n│  │  (onmessage → setRequests)                       │  │\n│  └──────────────────────────────────────────────────┘  │\n│                                                          │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │              Fetch Effect                         │  │\n│  │  (on mount → fetch /api/requests)                │  │\n│  └──────────────────────────────────────────────────┘  │\n└─────────────────────────────────────────────────────────┘\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#state-variables","level":2,"title":"State Variables","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#1-requests-request-list","level":3,"title":"1. <code>requests</code> - Request List","text":"<pre><code>const [requests, setRequests] = useState&lt;Request[]&gt;([])\n</code></pre> <p>Purpose: Stores all captured HTTP requests.</p> <p>Type: <code>Request[]</code></p> <p>Max Size: 1000 requests (enforced via <code>.slice(0, 1000)</code>)</p> <p>Updates: - Initial load from <code>/api/requests</code> REST API - Live updates from <code>/api/live</code> WebSocket - Cleared via <code>/api/requests/clear</code> POST request</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#2-selected-selected-request","level":3,"title":"2. <code>selected</code> - Selected Request","text":"<pre><code>const [selected, setSelected] = useState&lt;Request | null&gt;(null)\n</code></pre> <p>Purpose: Tracks which request is currently displayed in detail view.</p> <p>Type: <code>Request | null</code></p> <p>Updates: - Set when user clicks a request in the list - Cleared when \"Clear All\" is clicked</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#3-connected-connection-status","level":3,"title":"3. <code>connected</code> - Connection Status","text":"<pre><code>const [connected, setConnected] = useState(false)\n</code></pre> <p>Purpose: Tracks WebSocket connection status.</p> <p>Type: <code>boolean</code></p> <p>Updates: - Set to <code>true</code> when WebSocket opens - Set to <code>false</code> when WebSocket closes - Displayed as \"Live\" (green) or \"Disconnected\" (red) badge</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#4-reconnectcounter-reconnection-trigger","level":3,"title":"4. <code>reconnectCounter</code> - Reconnection Trigger","text":"<pre><code>const [reconnectCounter, setReconnectCounter] = useState(0)\n</code></pre> <p>Purpose: Triggers WebSocket reconnection by incrementing.</p> <p>Type: <code>number</code></p> <p>Updates: - Incremented after 3-second delay on WebSocket close - Used as dependency in WebSocket effect to re-establish connection</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#data-flow","level":2,"title":"Data Flow","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#initial-load-flow","level":3,"title":"Initial Load Flow","text":"<pre><code>1. App mounts\n   ↓\n2. Fetch Effect runs\n   ↓\n3. GET /api/requests\n   ↓\n4. setRequests(data)\n   ↓\n5. UI renders request list\n</code></pre> <p>Code:</p> <pre><code>useEffect(() =&gt; {\n  fetch('/api/requests')\n    .then(r =&gt; r.json())\n    .then(data =&gt; setRequests(data))\n    .catch(console.error)\n}, [])\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#live-updates-flow","level":3,"title":"Live Updates Flow","text":"<pre><code>1. WebSocket connects\n   ↓\n2. setConnected(true)\n   ↓\n3. Server sends message\n   ↓\n4. ws.onmessage triggered\n   ↓\n5. JSON.parse(data)\n   ↓\n6. setRequests([newRequest, ...prev].slice(0, 1000))\n   ↓\n7. UI re-renders with new request at top\n</code></pre> <p>Code:</p> <pre><code>ws.onmessage = (event) =&gt; {\n  try {\n    const data = JSON.parse(event.data)\n    if (data.type === 'request') {\n      setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n    }\n  } catch (e) {\n    console.error('Failed to parse message:', e)\n  }\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#selection-flow","level":3,"title":"Selection Flow","text":"<pre><code>1. User clicks request item\n   ↓\n2. onClick handler fires\n   ↓\n3. setSelected(request)\n   ↓\n4. Detail panel re-renders with new request data\n</code></pre> <p>Code:</p> <pre><code>onClick={() =&gt; setSelected(req)}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#clear-flow","level":3,"title":"Clear Flow","text":"<pre><code>1. User clicks \"Clear All\"\n   ↓\n2. POST /api/requests/clear\n   ↓\n3. Backend clears request store\n   ↓\n4. setRequests([])\n   ↓\n5. setSelected(null)\n   ↓\n6. UI shows empty state\n</code></pre> <p>Code:</p> <pre><code>onClick={async () =&gt; {\n  await fetch('/api/requests/clear', { method: 'POST' })\n  setRequests([])\n}}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#websocket-lifecycle","level":2,"title":"WebSocket Lifecycle","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#connection-phase","level":3,"title":"Connection Phase","text":"<pre><code>const ws = new WebSocket(`ws://${window.location.host}/api/live`)\n\nws.onopen = () =&gt; {\n  setConnected(true)\n}\n</code></pre> <p>Events: - WebSocket opens → Update connection status - Ready to receive live updates</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#message-phase","level":3,"title":"Message Phase","text":"<pre><code>ws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data)\n  if (data.type === 'request') {\n    setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n  }\n}\n</code></pre> <p>Message Format:</p> <pre><code>{\n  type: 'request',\n  request: {\n    id: string,\n    method: string,\n    path: string,\n    statusCode: number,\n    duration: number,\n    timestamp: Date,\n    requestHeaders: Record&lt;string, string&gt;,\n    requestBody?: string,\n    responseHeaders: Record&lt;string, string&gt;,\n    responseBody?: string,\n    matchedRoute?: string,\n    matchedTarget?: string\n  }\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#disconnection-phase","level":3,"title":"Disconnection Phase","text":"<pre><code>ws.onclose = () =&gt; {\n  setConnected(false)\n  setTimeout(() =&gt; {\n    setReconnectCounter(prev =&gt; prev + 1)\n  }, 3000)\n}\n</code></pre> <p>Events: 1. WebSocket closes → Update status to disconnected 2. Wait 3 seconds 3. Increment reconnection counter 4. Effect re-runs and establishes new WebSocket</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#cleanup-phase","level":3,"title":"Cleanup Phase","text":"<pre><code>return () =&gt; ws.close()\n</code></pre> <p>Events: - Component unmounts - WebSocket connection closed - Prevents memory leaks</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#reconnection-strategy","level":2,"title":"Reconnection Strategy","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#exponential-backoff","level":3,"title":"Exponential Backoff","text":"<p>Currently uses fixed 3-second delay:</p> <pre><code>setTimeout(() =&gt; {\n  setReconnectCounter(prev =&gt; prev + 1)\n}, 3000)\n</code></pre> <p>Future improvement: Implement exponential backoff:</p> <pre><code>const [retryCount, setRetryCount] = useState(0)\n\nuseEffect(() =&gt; {\n  const delay = Math.min(1000 * Math.pow(2, retryCount), 30000)\n  const timeout = setTimeout(() =&gt; {\n    setReconnectCounter(prev =&gt; prev + 1)\n    setRetryCount(prev =&gt; prev + 1)\n  }, delay)\n\n  return () =&gt; clearTimeout(timeout)\n}, [connected])\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#state-synchronization","level":2,"title":"State Synchronization","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#backend-frontend","level":3,"title":"Backend → Frontend","text":"<p>REST API (initial load): <pre><code>Crystal Backend → /api/requests → React State\n</code></pre></p> <p>WebSocket (live updates): <pre><code>Crystal Backend → /api/live → WebSocket → React State\n</code></pre></p> <p>State mutation: Only via <code>setRequests()</code></p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#frontend-backend","level":3,"title":"Frontend → Backend","text":"<p>Clear requests: <pre><code>React State → /api/requests/clear → Crystal Backend\n</code></pre></p> <p>No bidirectional sync needed: - Backend is source of truth - Frontend is display layer - Actions are fire-and-forget</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#performance-optimizations","level":2,"title":"Performance Optimizations","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#1-request-limit","level":3,"title":"1. Request Limit","text":"<pre><code>setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n</code></pre> <p>Benefit: Prevents unbounded memory growth.</p> <p>Trade-off: Loses oldest requests beyond 1000.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#2-immutability","level":3,"title":"2. Immutability","text":"<pre><code>[request, ...prev]  // Creates new array\n</code></pre> <p>Benefit: React can efficiently detect changes and re-render.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#3-conditional-rendering","level":3,"title":"3. Conditional Rendering","text":"<pre><code>{selected ? &lt;RequestDetail /&gt; : &lt;Placeholder /&gt;}\n</code></pre> <p>Benefit: Only renders detail panel when request selected.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#4-websocket-message-batching","level":3,"title":"4. WebSocket Message Batching","text":"<p>Current: Each request sent immediately.</p> <p>Future: Batch multiple requests:</p> <pre><code>ws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data)\n  if (data.type === 'requests') {\n    setRequests(prev =&gt; [...data.requests, ...prev].slice(0, 1000))\n  }\n}\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#error-handling","level":2,"title":"Error Handling","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#fetch-errors","level":3,"title":"Fetch Errors","text":"<pre><code>fetch('/api/requests')\n  .catch(console.error)\n</code></pre> <p>Behavior: Errors logged to console, UI shows empty state.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#websocket-errors","level":3,"title":"WebSocket Errors","text":"<pre><code>ws.onerror = (error) =&gt; {\n  console.error('WebSocket error:', error)\n}\n</code></pre> <p>Behavior: Error logged, reconnection triggered via <code>onclose</code>.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#parse-errors","level":3,"title":"Parse Errors","text":"<pre><code>try {\n  const data = JSON.parse(event.data)\n} catch (e) {\n  console.error('Failed to parse message:', e)\n}\n</code></pre> <p>Behavior: Bad messages ignored, connection maintained.</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#state-persistence","level":2,"title":"State Persistence","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#current-no-persistence","level":3,"title":"Current: No Persistence","text":"<ul> <li>Request list lives in memory only</li> <li>Lost on page refresh</li> <li>Lost on WebSocket reconnect</li> </ul>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#future-localstorage-persistence","level":3,"title":"Future: LocalStorage Persistence","text":"<pre><code>// Save to localStorage\nuseEffect(() =&gt; {\n  localStorage.setItem('requests', JSON.stringify(requests))\n}, [requests])\n\n// Load from localStorage\nuseEffect(() =&gt; {\n  const saved = localStorage.getItem('requests')\n  if (saved) {\n    setRequests(JSON.parse(saved))\n  }\n}, [])\n</code></pre> <p>Trade-offs: - ✅ Survives page refresh - ❌ Limited storage (5-10MB) - ❌ Requires serialization/deserialization overhead</p>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#testing-state-management","level":2,"title":"Testing State Management","text":"","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#unit-testing-future","level":3,"title":"Unit Testing (Future)","text":"<pre><code>test('adding request updates state', () =&gt; {\n  const { result } = renderHook(() =&gt; useApp())\n  act(() =&gt; {\n    result.current.addRequest(mockRequest)\n  })\n  expect(result.current.requests).toHaveLength(1)\n})\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#integration-testing-future","level":3,"title":"Integration Testing (Future)","text":"<pre><code>test('WebSocket message adds request', async () =&gt; {\n  const ws = new WebSocket('ws://localhost:4040/api/live')\n  await waitFor(() =&gt; {\n    expect(screen.getByText('GET /api')).toBeInTheDocument()\n  })\n})\n</code></pre>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/inspector-ui/state-management/#see-also","level":2,"title":"See Also","text":"<ul> <li>Component Architecture - Component structure</li> <li>Setup Guide - Development setup</li> <li>Embedding in Binary - Production deployment</li> <li>Backend Inspector - Crystal backend</li> </ul>","path":["02 developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/","level":1,"title":"Protocol Message Types Reference","text":"<p>Complete reference of all MessagePack protocol message types used in Sellia.</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#base-message-class","level":2,"title":"Base Message Class","text":"<p>All protocol messages extend <code>Sellia::Protocol::Message</code>:</p> <pre><code>abstract class Message\n  include MessagePack::Serializable\n\n  # Type discriminator for polymorphic deserialization\n  use_msgpack_discriminator \"type\", {\n    auth:             Messages::Auth,\n    auth_ok:          Messages::AuthOk,\n    auth_error:       Messages::AuthError,\n    tunnel_open:      Messages::TunnelOpen,\n    tunnel_ready:     Messages::TunnelReady,\n    tunnel_close:     Messages::TunnelClose,\n    request_start:    Messages::RequestStart,\n    request_body:     Messages::RequestBody,\n    response_start:   Messages::ResponseStart,\n    response_body:    Messages::ResponseBody,\n    response_end:     Messages::ResponseEnd,\n    ping:             Messages::Ping,\n    pong:             Messages::Pong,\n    ws_upgrade:       Messages::WebSocketUpgrade,\n    ws_upgrade_ok:    Messages::WebSocketUpgradeOk,\n    ws_upgrade_error: Messages::WebSocketUpgradeError,\n    ws_frame:         Messages::WebSocketFrame,\n    ws_close:         Messages::WebSocketClose,\n  }\n\n  abstract def type : String\nend\n</code></pre> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/message.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#message-types-by-category","level":2,"title":"Message Types by Category","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#authentication-messages","level":3,"title":"Authentication Messages","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#auth-client-server","level":4,"title":"Auth (Client → Server)","text":"<p>Authentication request with API key.</p> <pre><code>class Auth &lt; Message\n  property type : String = \"auth\"\n  property api_key : String\n\n  def initialize(@api_key : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"auth\"</code> - <code>api_key</code>: API key for authentication</p> <p>When Sent: - Immediately after WebSocket connection - Only if server requires authentication</p> <p>Response: - <code>AuthOk</code> on success - <code>AuthError</code> on failure</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/auth.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#authok-server-client","level":4,"title":"AuthOk (Server → Client)","text":"<p>Authentication successful response.</p> <pre><code>class AuthOk &lt; Message\n  property type : String = \"auth_ok\"\n  property account_id : String\n  property limits : Hash(String, Int64)\n\n  def initialize(@account_id : String, @limits : Hash(String, Int64) = {} of String =&gt; Int64)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"auth_ok\"</code> - <code>account_id</code>: Unique account identifier - <code>limits</code>: Rate limit configuration (empty hash by default)   - <code>max_tunnels</code>: Maximum tunnels allowed   - <code>max_connections</code>: Maximum concurrent connections</p> <p>When Sent: - After successful <code>Auth</code> validation</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/auth.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#autherror-server-client","level":4,"title":"AuthError (Server → Client)","text":"<p>Authentication failed response.</p> <pre><code>class AuthError &lt; Message\n  property type : String = \"auth_error\"\n  property error : String\n\n  def initialize(@error : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"auth_error\"</code> - <code>error</code>: Human-readable error message</p> <p>When Sent: - When API key is invalid or missing - When account is suspended</p> <p>Client Behavior: - Disable auto-reconnect - Close connection - Display error to user</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/auth.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#tunnel-management-messages","level":3,"title":"Tunnel Management Messages","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#tunnelopen-client-server","level":4,"title":"TunnelOpen (Client → Server)","text":"<p>Request to create a new tunnel.</p> <pre><code>class TunnelOpen &lt; Message\n  property type : String = \"tunnel_open\"\n  property tunnel_type : String # \"http\" or \"tcp\"\n  property local_port : Int32\n  property subdomain : String? # Optional: custom subdomain\n  property auth : String?      # Optional: \"user:pass\" for basic auth\n\n  def initialize(\n    @tunnel_type : String,\n    @local_port : Int32,\n    @subdomain : String? = nil,\n    @auth : String? = nil,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"tunnel_open\"</code> - <code>tunnel_type</code>: Tunnel type (<code>\"http\"</code> currently, <code>\"tcp\"</code> reserved for future) - <code>local_port</code>: Local service port - <code>subdomain</code>: Optional custom subdomain (3-63 chars) - <code>auth</code>: Optional basic auth credential (<code>\"user:pass\"</code>)</p> <p>When Sent: - After successful authentication - Or immediately if auth disabled</p> <p>Response: - <code>TunnelReady</code> on success - <code>TunnelClose</code> on failure</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/tunnel.cr</code></p> <p>Subdomain Rules: - 3-63 characters - Alphanumeric and hyphens only - Cannot start/end with hyphen - No consecutive hyphens - Must not be reserved - Must be available</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#tunnelready-server-client","level":4,"title":"TunnelReady (Server → Client)","text":"<p>Tunnel created successfully and ready to receive requests.</p> <pre><code>class TunnelReady &lt; Message\n  property type : String = \"tunnel_ready\"\n  property tunnel_id : String\n  property url : String\n  property subdomain : String\n\n  def initialize(@tunnel_id : String, @url : String, @subdomain : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"tunnel_ready\"</code> - <code>tunnel_id</code>: Unique tunnel identifier (32 hex chars) - <code>url</code>: Full public URL - <code>subdomain</code>: Assigned subdomain</p> <p>When Sent: - After tunnel is registered - Subdomain is validated and assigned</p> <p>URL Format: - HTTP: <code>http://subdomain.domain:port</code> - HTTPS: <code>https://subdomain.domain</code></p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/tunnel.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#tunnelclose-bidirectional","level":4,"title":"TunnelClose (Bidirectional)","text":"<p>Tunnel is being closed.</p> <pre><code>class TunnelClose &lt; Message\n  property type : String = \"tunnel_close\"\n  property tunnel_id : String\n  property reason : String?\n\n  def initialize(@tunnel_id : String, @reason : String? = nil)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"tunnel_close\"</code> - <code>tunnel_id</code>: Tunnel being closed - <code>reason</code>: Optional reason for closure</p> <p>When Sent: - Server → Client: Tunnel closed due to error, subdomain conflict, or server shutdown - Client → Server: Client explicitly closing tunnel</p> <p>Common Reasons: - <code>\"Subdomain 'xxx' is not available\"</code> - <code>\"Rate limit exceeded: too many tunnel creations\"</code> - <code>\"Connection timeout\"</code> - <code>\"Not authenticated\"</code></p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/tunnel.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#http-request-messages","level":3,"title":"HTTP Request Messages","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#requeststart-server-client","level":4,"title":"RequestStart (Server → Client)","text":"<p>Start of an incoming HTTP request.</p> <pre><code>class RequestStart &lt; Message\n  property type : String = \"request_start\"\n  property request_id : String\n  property tunnel_id : String\n  property method : String\n  property path : String\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @tunnel_id : String,\n    @method : String,\n    @path : String,\n    @headers : Hash(String, Array(String)),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"request_start\"</code> - <code>request_id</code>: Unique request identifier (32 hex chars) - <code>tunnel_id</code>: Tunnel this request is for - <code>method</code>: HTTP method (<code>GET</code>, <code>POST</code>, etc.) - <code>path</code>: Full path including query string - <code>headers</code>: Multi-value header hash</p> <p>When Sent: - When server receives HTTP request for tunnel - Before request body chunks</p> <p>Client Behavior: - Store request metadata - Initialize body buffer - Wait for body chunks</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#requestbody-server-client","level":4,"title":"RequestBody (Server → Client)","text":"<p>Request body chunk (streaming).</p> <pre><code>class RequestBody &lt; Message\n  property type : String = \"request_body\"\n  property request_id : String\n  property chunk : Bytes\n  property final : Bool\n\n  def initialize(@request_id : String, @chunk : Bytes, @final : Bool = false)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"request_body\"</code> - <code>request_id</code>: Request identifier - <code>chunk</code>: Binary data chunk (up to 8KB) - <code>final</code>: <code>true</code> on last chunk (defaults to <code>false</code>)</p> <p>When Sent: - One or more times after <code>RequestStart</code> - <code>final=true</code> on last chunk (even if empty)</p> <p>Client Behavior: - Append chunk to body buffer - When <code>final=true</code>, forward request to local service</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#http-response-messages","level":3,"title":"HTTP Response Messages","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#responsestart-client-server","level":4,"title":"ResponseStart (Client → Server)","text":"<p>Start of HTTP response from local service.</p> <pre><code>class ResponseStart &lt; Message\n  property type : String = \"response_start\"\n  property request_id : String\n  property status_code : Int32\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @status_code : Int32,\n    @headers : Hash(String, Array(String)),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"response_start\"</code> - <code>request_id</code>: Request being responded to - <code>status_code</code>: HTTP status code (200, 404, etc.) - <code>headers</code>: Response headers</p> <p>When Sent: - After receiving response from local service - Before response body chunks</p> <p>Server Behavior: - Write status code to HTTP response - Write headers to HTTP response</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#responsebody-client-server","level":4,"title":"ResponseBody (Client → Server)","text":"<p>Response body chunk (streaming).</p> <pre><code>class ResponseBody &lt; Message\n  property type : String = \"response_body\"\n  property request_id : String\n  property chunk : Bytes\n\n  def initialize(@request_id : String, @chunk : Bytes)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"response_body\"</code> - <code>request_id</code>: Request being responded to - <code>chunk</code>: Binary data chunk (up to 8KB)</p> <p>When Sent: - One or more times after <code>ResponseStart</code> - Stream response body in chunks</p> <p>Server Behavior: - Write chunk to HTTP response body - Flush to send to client</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#responseend-client-server","level":4,"title":"ResponseEnd (Client → Server)","text":"<p>End of HTTP response.</p> <pre><code>class ResponseEnd &lt; Message\n  property type : String = \"response_end\"\n  property request_id : String\n\n  def initialize(@request_id : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"response_end\"</code> - <code>request_id</code>: Request being responded to</p> <p>When Sent: - After all response body chunks sent</p> <p>Server Behavior: - Complete HTTP response - Remove from pending request store - Signal waiting fiber</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#keep-alive-messages","level":3,"title":"Keep-Alive Messages","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#ping-server-client","level":4,"title":"Ping (Server → Client)","text":"<p>Keep-alive ping.</p> <pre><code>class Ping &lt; Message\n  property type : String = \"ping\"\n  property timestamp : Int64\n\n  def initialize(@timestamp : Int64 = Time.utc.to_unix_ms)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ping\"</code> - <code>timestamp</code>: Unix timestamp in milliseconds (defaults to current time)</p> <p>When Sent: - Every 30 seconds - To detect stale connections</p> <p>Client Behavior: - Immediately respond with <code>Pong</code> - Update last activity timestamp</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#pong-client-server","level":4,"title":"Pong (Client → Server)","text":"<p>Keep-alive pong response.</p> <pre><code>class Pong &lt; Message\n  property type : String = \"pong\"\n  property timestamp : Int64\n\n  def initialize(@timestamp : Int64 = Time.utc.to_unix_ms)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"pong\"</code> - <code>timestamp</code>: Timestamp from ping (echoed back, defaults to current time)</p> <p>When Sent: - In response to <code>Ping</code></p> <p>Server Behavior: - Update client's last activity timestamp - Don't timeout connection</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocket-messages","level":3,"title":"WebSocket Messages","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocketupgrade-server-client","level":4,"title":"WebSocketUpgrade (Server → Client)","text":"<p>Incoming WebSocket upgrade request.</p> <pre><code>class WebSocketUpgrade &lt; Message\n  property type : String = \"ws_upgrade\"\n  property request_id : String\n  property tunnel_id : String\n  property path : String\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @tunnel_id : String,\n    @path : String,\n    @headers : Hash(String, Array(String)),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_upgrade\"</code> - <code>request_id</code>: Unique identifier for this WebSocket - <code>tunnel_id</code>: Tunnel for this WebSocket - <code>path</code>: WebSocket path - <code>headers</code>: All headers including <code>Sec-WebSocket-*</code></p> <p>Important Headers: - <code>Sec-WebSocket-Key</code>: Handshake key - <code>Sec-WebSocket-Version</code>: Must be \"13\" - <code>Sec-WebSocket-Protocol</code>: Optional subprotocol</p> <p>When Sent: - When server receives WebSocket upgrade request</p> <p>Client Behavior: - Route to local WebSocket service - Attempt connection - Respond with <code>WebSocketUpgradeOk</code> or <code>WebSocketUpgradeError</code></p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocketupgradeok-client-server","level":4,"title":"WebSocketUpgradeOk (Client → Server)","text":"<p>Local service accepted WebSocket connection.</p> <pre><code>class WebSocketUpgradeOk &lt; Message\n  property type : String = \"ws_upgrade_ok\"\n  property request_id : String\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @headers : Hash(String, Array(String)) = {} of String =&gt; Array(String),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_upgrade_ok\"</code> - <code>request_id</code>: WebSocket identifier - <code>headers</code>: Optional response headers (e.g., <code>Sec-WebSocket-Protocol</code>, defaults to empty hash)</p> <p>When Sent: - After successfully connecting to local WebSocket service</p> <p>Server Behavior: - Complete handshake with external client - Start frame forwarding loop</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocketupgradeerror-client-server","level":4,"title":"WebSocketUpgradeError (Client → Server)","text":"<p>Local service rejected WebSocket connection.</p> <pre><code>class WebSocketUpgradeError &lt; Message\n  property type : String = \"ws_upgrade_error\"\n  property request_id : String\n  property status_code : Int32\n  property message : String\n\n  def initialize(\n    @request_id : String,\n    @status_code : Int32,\n    @message : String,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_upgrade_error\"</code> - <code>request_id</code>: WebSocket identifier - <code>status_code</code>: HTTP status code (usually 502) - <code>message</code>: Error description</p> <p>When Sent: - If local service unavailable - If connection fails - If local service rejects upgrade</p> <p>Server Behavior: - Send error response to external client - Close connection</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocketframe-bidirectional","level":4,"title":"WebSocketFrame (Bidirectional)","text":"<p>WebSocket frame data.</p> <pre><code>class WebSocketFrame &lt; Message\n  property type : String = \"ws_frame\"\n  property request_id : String\n  property opcode : UInt8\n  property payload : Bytes\n  property fin : Bool\n\n  def initialize(\n    @request_id : String,\n    @opcode : UInt8,\n    @payload : Bytes,\n    @fin : Bool = true,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_frame\"</code> - <code>request_id</code>: WebSocket identifier - <code>opcode</code>: Frame opcode (see below) - <code>payload</code>: Frame payload data - <code>fin</code>: Whether this is the final frame (defaults to <code>true</code>)</p> <p>Opcode Values: - <code>0x01</code> - Text frame - <code>0x02</code> - Binary frame - <code>0x08</code> - Close - <code>0x09</code> - Ping - <code>0x0A</code> - Pong</p> <p>When Sent: - Bidirectional after WebSocket upgrade - For each WebSocket frame</p> <p>Fragmentation: - Text/Binary frames can be fragmented - <code>fin=false</code> on fragments, <code>fin=true</code> on final - Continuation frames use same opcode as initial frame</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocketclose-bidirectional","level":4,"title":"WebSocketClose (Bidirectional)","text":"<p>WebSocket connection closing.</p> <pre><code>class WebSocketClose &lt; Message\n  property type : String = \"ws_close\"\n  property request_id : String\n  property code : UInt16?\n  property reason : String?\n\n  def initialize(\n    @request_id : String,\n    @code : UInt16? = nil,\n    @reason : String? = nil,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_close\"</code> - <code>request_id</code>: WebSocket identifier - <code>code</code>: Optional WebSocket close code (defaults to <code>nil</code>) - <code>reason</code>: Optional close reason (defaults to <code>nil</code>)</p> <p>Common Close Codes: - <code>1000</code> - Normal closure - <code>1001</code> - Going away - <code>1002</code> - Protocol error - <code>1003</code> - Unsupported data - <code>1006</code> - Abnormal closure - <code>1008</code> - Policy violation - <code>1009</code> - Message too big - <code>1011</code> - Internal error</p> <p>When Sent: - When either side closes WebSocket - To gracefully shutdown connection</p> <p>Behavior: - Remove from pending WebSocket store - Close connection to other side - Clean up resources</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#message-serialization","level":2,"title":"Message Serialization","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#to-messagepack","level":3,"title":"To MessagePack","text":"<pre><code>message = Protocol::Messages::Auth.new(\"key_...\")\nbytes = message.to_msgpack\n# =&gt; Bytes containing MessagePack binary data\n</code></pre>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#from-messagepack","level":3,"title":"From MessagePack","text":"<pre><code>message = Protocol::Message.from_msgpack(bytes)\n\ncase message\nwhen Protocol::Messages::Auth\n  puts \"Auth: #{message.api_key}\"\nwhen Protocol::Messages::TunnelReady\n  puts \"Tunnel ready: #{message.url}\"\nend\n</code></pre> <p>The <code>type</code> field is used for polymorphic deserialization.</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#request-id-generation","level":2,"title":"Request ID Generation","text":"<p>Request IDs are generated using cryptographically secure random:</p> <pre><code>request_id = Random::Secure.hex(16)  # 32 hex characters\n</code></pre> <p>Example: <code>\"a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6\"</code></p> <p>These IDs: - Are unique per request - Cannot be guessed - Used to correlate request/response messages</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#header-format","level":2,"title":"Header Format","text":"<p>Headers use multi-value hash to preserve multiple values:</p> <pre><code>headers = Hash(String, Array(String)).new\nheaders[\"Set-Cookie\"] = [\"session=abc\", \"theme=dark\"]\nheaders[\"Accept\"] = [\"application/json\", \"text/html\"]\n</code></pre> <p>When serializing to MessagePack: <pre><code>{\n  \"Set-Cookie\": [\"session=abc\", \"theme=dark\"],\n  \"Accept\": [\"application/json\", \"text/html\"]\n}\n</code></pre></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#binary-data-handling","level":2,"title":"Binary Data Handling","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#requestresponse-bodies","level":3,"title":"Request/Response Bodies","text":"<p>Sent as raw bytes in MessagePack binary format:</p> <pre><code>class RequestBody &lt; Message\n  property chunk : Bytes  # Serialized as bin8/bin16/bin32\nend\n</code></pre> <p>Chunk sizes: - Recommended: 8KB (8192 bytes) - Maximum: Limited by memory</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocket-payloads","level":3,"title":"WebSocket Payloads","text":"<p>Same as request/response bodies - sent as raw bytes.</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#message-flow-examples","level":2,"title":"Message Flow Examples","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#simple-http-request","level":3,"title":"Simple HTTP Request","text":"<pre><code>Server → Client: RequestStart(id=\"req1\", method=\"GET\", path=\"/api\")\nServer → Client: RequestBody(id=\"req1\", chunk=Bytes.empty, final=true)\nClient → Server: ResponseStart(id=\"req1\", status=200, headers={...})\nClient → Server: ResponseBody(id=\"req1\", chunk=\"Hello World\".to_slice)\nClient → Server: ResponseEnd(id=\"req1\")\n</code></pre>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#http-request-with-body","level":3,"title":"HTTP Request with Body","text":"<pre><code>Server → Client: RequestStart(id=\"req2\", method=\"POST\", path=\"/api/users\")\nServer → Client: RequestBody(id=\"req2\", chunk='{\"name\":', final=false)\nServer → Client: RequestBody(id=\"req2\", chunk=' \"Alice\"}', final=true)\nClient → Server: ResponseStart(id=\"req2\", status=201, headers={...})\nClient → Server: ResponseBody(id=\"req2\", chunk='{\"id\": 1}'.to_slice)\nClient → Server: ResponseEnd(id=\"req2\")\n</code></pre>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#websocket-connection","level":3,"title":"WebSocket Connection","text":"<pre><code>Server → Client: WebSocketUpgrade(id=\"ws1\", path=\"/socket\", headers={...})\nClient → Server: WebSocketUpgradeOk(id=\"ws1\", headers={...})\nClient → Server: WebSocketFrame(id=\"ws1\", opcode=0x01, payload=\"Hello\")\nServer → Client: WebSocketFrame(id=\"ws1\", opcode=0x01, payload=\"Hi there\")\nServer → Client: WebSocketClose(id=\"ws1\", code=1000, reason=\"Normal\")\nClient → Server: WebSocketClose(id=\"ws1\", code=1000, reason=\"Normal\")\n</code></pre>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#error-handling","level":2,"title":"Error Handling","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#invalid-message-type","level":3,"title":"Invalid Message Type","text":"<p>If unknown <code>type</code> received: <pre><code>Error: MessagePack::Error\nMessage: Unknown discriminator value: \"unknown_type\"\n</code></pre></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#missing-required-fields","level":3,"title":"Missing Required Fields","text":"<p>MessagePack deserialization will raise: <pre><code>Error: MessagePack::Error\nMessage: Missing required field: \"request_id\"\n</code></pre></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#malformed-binary-data","level":3,"title":"Malformed Binary Data","text":"<p>Binary fields expect <code>Bytes</code> type - receiving other types raises error during deserialization.</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#message-size","level":3,"title":"Message Size","text":"<ul> <li>Authentication messages: ~100 bytes</li> <li>RequestStart: ~500 bytes (depends on headers)</li> <li>RequestBody: ~8KB per chunk</li> <li>ResponseStart: ~300 bytes</li> <li>ResponseBody: ~8KB per chunk</li> </ul>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#serialization-overhead","level":3,"title":"Serialization Overhead","text":"<p>MessagePack serialization adds: - Type discriminator (string): ~10 bytes - Field names: ~5-20 bytes per field - Binary metadata: ~5 bytes</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#compression","level":3,"title":"Compression","text":"<p>Currently not compressed. Future versions may add: - Per-message compression (WebSocket permessage-deflate) - Header compression (dynamic dictionaries)</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#version-compatibility","level":2,"title":"Version Compatibility","text":"","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#protocol-versioning","level":3,"title":"Protocol Versioning","text":"<p>The <code>type</code> field allows protocol evolution: - New message types can be added - Old clients ignore unknown types - Servers must handle both old and new formats</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#backward-compatibility","level":3,"title":"Backward Compatibility","text":"<p>When adding new fields: 1. Make fields optional (use <code>?</code> or provide default) 2. Old clients will deserialize without new fields 3. Servers must handle missing fields</p> <p>Example: <pre><code>class TunnelReady &lt; Message\n  property url : String\n  property region : String?  # New optional field\nend\n</code></pre></p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/protocol-messages/#forward-compatibility","level":3,"title":"Forward Compatibility","text":"<p>When removing fields: 1. Keep field in protocol but mark deprecated 2. Servers must accept field but ignore it 3. Remove in next major version</p>","path":["02 developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"02-developer/project-structure/source-layout/","level":1,"title":"Source Layout","text":"<p>This document describes the organization of Sellia's source code and the purpose of each directory and module.</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Directory Structure</li> <li>Core Components</li> <li>Server Components</li> <li>CLI Components</li> <li>Inspector UI</li> <li>Tests</li> <li>Configuration Files</li> </ul>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#overview","level":2,"title":"Overview","text":"<p>Sellia is organized as a Crystal application with a React-based inspector UI. The codebase follows a modular architecture with clear separation of concerns:</p> <pre><code>sellia/\n├── src/              # Crystal source code\n│   ├── core/         # Shared protocol and types\n│   ├── server/       # Tunnel server implementation\n│   └── cli/          # CLI client implementation\n├── web/              # React inspector UI\n├── spec/             # Crystal tests\n└── docs/             # Documentation\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#directory-structure","level":2,"title":"Directory Structure","text":"","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#root-directory","level":3,"title":"Root Directory","text":"<pre><code>sellia/\n├── bin/              # Compiled binaries (generated)\n│   ├── sellia        # CLI client binary\n│   └── sellia-server # Server binary\n├── src/              # Crystal source code\n├── spec/             # Crystal test files\n├── web/              # Inspector UI (React + TypeScript)\n├── docs/             # Documentation\n├── docker/           # Docker configurations\n├── .github/          # GitHub workflows and templates\n├── shard.yml         # Crystal dependencies\n└── package.json      # Node.js dependencies (web/)\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#top-level-files","level":3,"title":"Top-Level Files","text":"File Purpose <code>shard.yml</code> Crystal dependency manifest <code>shard.lock</code> Locked Crystal dependencies <code>package.json</code> Node.js dependencies for inspector UI <code>LICENSE</code> MIT license <code>README.md</code> Project overview and usage <code>CONTRIBUTING.md</code> Contribution guidelines <code>SECURITY.md</code> Security policy and disclosure <code>ROADMAP.md</code> Project roadmap and feature plans <code>.gitignore</code> Git ignore patterns <code>Dockerfile</code> Server container image <code>docker-compose.yml</code> Development Docker setup <code>docker-compose.prod.yml</code> Production Docker setup","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#core-components","level":2,"title":"Core Components","text":"<p>The <code>src/core/</code> directory contains shared protocol definitions and types used by both server and CLI.</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#directory-structure_1","level":3,"title":"Directory Structure","text":"<pre><code>src/core/\n├── protocol/\n│   ├── message.cr                     # Base Message class\n│   └── messages/\n│       ├── auth.cr                    # Authentication messages\n│       ├── tunnel.cr                  # Tunnel management messages\n│       ├── request.cr                 # HTTP request/response messages\n│       └── websocket.cr               # WebSocket messages\n└── version.cr                          # Protocol version\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#module-selliacore","level":3,"title":"Module: <code>Sellia::Core</code>","text":"<p>Purpose: Shared functionality and protocol definitions</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#protocol-messages-srccoreprotocolmessagescr","level":4,"title":"Protocol Messages (<code>src/core/protocol/messages.cr</code>)","text":"<p>Defines the MessagePack-based protocol for client-server communication:</p> <pre><code>module Sellia::Core::Protocol\n  # Message Types\n  class RegisterTunnel\n    property subdomain : String\n    property auth_token : String?\n  end\n\n  class TunnelRegistered\n    property url : String\n    property inspector_url : String\n  end\n\n  class HttpRequest\n    property id : String\n    property method : String\n    property path : String\n    property headers : Hash(String, String)\n    property body : Bytes?\n  end\n\n  class HttpResponse\n    property request_id : String\n    property status_code : Int32\n    property headers : Hash(String, String)\n    property body : Bytes?\n  end\n\n  # ... more message types\nend\n</code></pre> <p>Purpose: - Define all protocol message types - Serialize/deserialize MessagePack - Handle protocol versioning - Validate message format</p> <p>Dependencies: - <code>msgpack</code> crystal shard - Crystal standard library</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#types-srccoretypestunnelcr","level":4,"title":"Types (<code>src/core/types/tunnel.cr</code>)","text":"<p>Shared data structures:</p> <pre><code>module Sellia::Core::Types\n  class Tunnel\n    property subdomain : String\n    property client_id : String\n    property auth_token : String?\n    property created_at : Time\n    property last_heartbeat : Time\n\n    def active?\n      # Check if tunnel is still active\n    end\n  end\nend\n</code></pre> <p>Purpose: - Define domain models - Shared between server and CLI - No protocol-specific logic</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#server-components","level":2,"title":"Server Components","text":"<p>The <code>src/server/</code> directory contains the tunnel server implementation.</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#directory-structure_2","level":3,"title":"Directory Structure","text":"<pre><code>src/server/\n├── main.cr                   # Server entry point\n├── server.cr                 # Server orchestration\n├── tunnel_registry.cr        # Tunnel registration and tracking\n├── ws_gateway.cr             # WebSocket gateway/handler\n├── http_ingress.cr           # HTTP request ingress handler\n├── rate_limiter.cr           # Rate limiting logic\n├── auth_provider.cr          # Authentication provider\n├── connection_manager.cr     # Client connection tracking\n├── client_connection.cr      # Client connection wrapper\n├── pending_request.cr        # Pending HTTP request tracking\n├── pending_websocket.cr      # Pending WebSocket tracking\n├── landing.cr                # Landing page\n├── admin_api.cr              # Admin API endpoints\n├── storage/\n│   ├── database.cr           # Database connection singleton\n│   ├── migrations.cr         # Database migrations\n│   ├── models.cr             # Database models\n│   ├── repositories.cr       # Database repositories\n│   └── storage.cr            # Storage module\n└── public/                   # Public static assets\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#module-selliaserver","level":3,"title":"Module: <code>Sellia::Server</code>","text":"<p>Purpose: Tunnel server that accepts client connections and routes traffic</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#main-server-srcserverservercr","level":4,"title":"Main Server (<code>src/server/server.cr</code>)","text":"<p>Entry point and server orchestration:</p> <pre><code>class Sellia::Server\n  def initialize(@host : String, @port : Int32, @domain : String)\n    # Initialize components\n  end\n\n  def start\n    # Start WebSocket listener\n    # Start HTTP server\n    # Handle signals\n  end\nend\n</code></pre> <p>Responsibilities: - Parse command-line arguments - Initialize all server components - Coordinate startup and shutdown - Handle graceful shutdown</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#tunnel-registry-srcservertunnel_registrycr","level":4,"title":"Tunnel Registry (<code>src/server/tunnel_registry.cr</code>)","text":"<p>Manages tunnel registration and lookup:</p> <pre><code>class Sellia::TunnelRegistry\n  def register_tunnel(subdomain : String, client_id : String) : Tunnel\n    # Validate subdomain\n    # Check for duplicates\n    # Register tunnel\n  end\n\n  def get_tunnel(subdomain : String) : Tunnel?\n    # Look up tunnel by subdomain\n  end\n\n  def remove_tunnel(client_id : String) : Bool\n    # Remove tunnel when client disconnects\n  end\nend\n</code></pre> <p>Responsibilities: - Track active tunnels - Validate subdomain uniqueness - Map subdomains to clients - Handle client disconnection - Query tunnel information</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#websocket-gateway-srcserverws_gatewaycr","level":4,"title":"WebSocket Gateway (<code>src/server/ws_gateway.cr</code>)","text":"<p>Handles WebSocket connections from tunnel clients:</p> <pre><code>class Sellia::WSGateway\n  def handle_client(ws : HTTP::WebSocket)\n    # Authenticate if required\n    # Wait for RegisterTunnel message\n    # Register with tunnel registry\n    # Forward HTTP requests to client\n    # Handle responses from client\n    # Detect disconnection\n  end\nend\n</code></pre> <p>Responsibilities: - Accept WebSocket connections - Authenticate clients (if enabled) - Parse protocol messages - Forward HTTP requests to tunnels - Forward responses from tunnels - Detect client disconnection</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#http-ingress-srcserverhttp_ingresscr","level":4,"title":"HTTP Ingress (<code>src/server/http_ingress.cr</code>)","text":"<p>Handles incoming HTTP requests and routes them to tunnels:</p> <pre><code>class Sellia::HTTPIngress\n  def handle_request(request : HTTP::Request) : HTTP::Response\n    # Extract subdomain from Host header\n    # Look up tunnel in registry\n    # Forward request to tunnel client\n    # Wait for response\n    # Return response to client\n  end\nend\n</code></pre> <p>Responsibilities: - Listen for HTTP requests - Extract subdomain from request - Route to appropriate tunnel - Handle tunnel not found - Handle timeout - Return response to caller</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#rate-limiter-srcserverrate_limitercr","level":4,"title":"Rate Limiter (<code>src/server/rate_limiter.cr</code>)","text":"<p>Token bucket rate limiting:</p> <pre><code>class Sellia::RateLimiter\n  def check_rate_limit(identifier : String, action : String) : Bool\n    # Check if action is allowed\n    # Update token bucket\n  end\nend\n</code></pre> <p>Responsibilities: - Limit connection rate per IP - Limit tunnel registration rate - Limit request rate per tunnel - Token bucket algorithm</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#subdomain-validator-srcserversubdomain_validatorcr","level":4,"title":"Subdomain Validator (<code>src/server/subdomain_validator.cr</code>)","text":"<p>DNS label validation:</p> <pre><code>class Sellia::SubdomainValidator\n  def validate(subdomain : String) : Bool\n    # Check length (max 63)\n    # Check characters (alphanumeric + hyphen)\n    # Check no consecutive hyphens\n    # Check not a reserved name\n  end\nend\n</code></pre> <p>Responsibilities: - Validate subdomain format - Enforce DNS label rules - Check reserved subdomains - Provide clear error messages</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#storage-layer-srcserverstorage","level":4,"title":"Storage Layer (<code>src/server/storage/</code>)","text":"<p>Persistence for API keys and reserved subdomains:</p> <pre><code>src/server/storage/\n├── database.cr               # Database singleton\n├── migrations.cr             # Database migrations\n├── models.cr                 # Database models (ReservedSubdomain, ApiKey)\n├── repositories.cr           # Database repositories\n└── storage.cr                # Storage module\n</code></pre> <p>SQLite Store (<code>sqlite_store.cr</code>): - Database connection management - Schema migrations - CRUD operations for API keys - CRUD operations for reserved subdomains</p> <p>Models: - <code>ApiKey</code>: API key with metadata - <code>ReservedSubdomain</code>: Reserved subdomain claims</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#cli-components","level":2,"title":"CLI Components","text":"<p>The <code>src/cli/</code> directory contains the CLI client implementation.</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#directory-structure_3","level":3,"title":"Directory Structure","text":"<pre><code>src/cli/\n├── main.cr                   # CLI entry point\n├── config.cr                 # Configuration management\n├── tunnel_client.cr          # Tunnel client logic\n├── router.cr                 # Request routing to local services\n├── local_proxy.cr            # HTTP proxy to local services\n├── websocket_proxy.cr        # WebSocket proxy to local services\n├── inspector.cr              # Request inspector server\n├── request_store.cr          # Request storage for inspector\n├── updater.cr                # Self-update mechanism\n└── admin_commands.cr         # Admin CLI commands\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#module-selliacli","level":3,"title":"Module: <code>Sellia::CLI</code>","text":"<p>Purpose: Command-line client for creating tunnels</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#main-cli-srccliclicr","level":4,"title":"Main CLI (<code>src/cli/cli.cr</code>)","text":"<p>Entry point and command parsing:</p> <pre><code>class Sellia::CLI\n  def run(args : Array(String))\n    # Parse arguments\n    # Execute appropriate command\n    # Handle errors\n  end\nend\n</code></pre> <p>Responsibilities: - Parse command-line arguments - Dispatch to appropriate command - Handle global flags (--server, --api-key) - Error handling and user feedback</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#tunnel-client-srcclitunnel_clientcr","level":4,"title":"Tunnel Client (<code>src/cli/tunnel_client.cr</code>)","text":"<p>Core tunnel client logic:</p> <pre><code>class Sellia::TunnelClient\n  def connect(server_url : String)\n    # Connect to server via WebSocket\n    # Send RegisterTunnel message\n    # Wait for TunnelRegistered response\n    # Start forwarding local traffic\n  end\n\n  def forward_request(request : HttpRequest)\n    # Forward request to local service\n    # Get response\n    # Send response to server\n  end\nend\n</code></pre> <p>Responsibilities: - Connect to server - Register tunnel - Forward requests to local service - Forward responses to server - Handle reconnection - Manage connection lifecycle</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#inspector-srccliinspectorcr","level":4,"title":"Inspector (<code>src/cli/inspector.cr</code>)","text":"<p>Request inspector server:</p> <pre><code>class Sellia::Inspector\n  def start(port : Int32)\n    # Start HTTP server for inspector UI\n    # Serve React UI or proxy to Vite\n    # WebSocket for live updates\n  end\n\n  def record_request(request : HttpRequest, response : HttpResponse)\n    # Store request/response pair\n    # Broadcast to WebSocket clients\n  end\nend\n</code></pre> <p>Responsibilities: - HTTP server for inspector UI - WebSocket for real-time updates - Store request/response history - Serve embedded UI or proxy to Vite - Handle \"clear history\" command</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#configuration-srccliconfig","level":4,"title":"Configuration (<code>src/cli/config/</code>)","text":"<p>Configuration management:</p> <p>Loader (<code>loader.cr</code>): - Load YAML config files - Parse configuration - Validate configuration</p> <p>Resolver (<code>resolver.cr</code>): - Layered configuration resolution:   1. <code>~/.config/sellia/sellia.yml</code>   2. <code>~/.sellia.yml</code>   3. <code>./sellia.yml</code>   4. CLI flags</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#commands-srcclicommands","level":4,"title":"Commands (<code>src/cli/commands/</code>)","text":"<p>Individual command implementations:</p> <p>HTTP Command (<code>http_command.cr</code>): - Create HTTP tunnel - Handle --subdomain, --auth, etc. - Start tunnel client</p> <p>Start Command (<code>start_command.cr</code>): - Read config file - Start multiple tunnels - Manage tunnel processes</p> <p>Auth Command (<code>auth_command.cr</code>): - Manage API keys - Store credentials - Login/logout</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#inspector-ui","level":2,"title":"Inspector UI","text":"<p>The <code>web/</code> directory contains the React-based inspector UI.</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#directory-structure_4","level":3,"title":"Directory Structure","text":"<pre><code>web/\n├── index.html                # HTML entry point\n├── vite.config.ts            # Vite configuration\n├── tsconfig.json             # TypeScript configuration\n├── package.json              # Node.js dependencies\n├── src/\n│   ├── main.tsx              # React entry point\n│   ├── App.tsx               # Root component\n│   ├── components/           # React components\n│   │   ├── RequestList.tsx   # Request list view\n│   │   ├── RequestDetail.tsx # Single request detail\n│   │   ├── Header.tsx        # Request/response headers\n│   │   ├── Body.tsx          # Request/response body\n│   │   └── Controls.tsx      # Control buttons\n│   ├── hooks/                # Custom React hooks\n│   │   ├── useWebSocket.ts   # WebSocket connection\n│   │   └── useRequests.ts    # Request state\n│   ├── types/                # TypeScript types\n│   │   └── index.ts          # Type definitions\n│   └── utils/                # Utilities\n│       ├── format.ts         # Formatters\n│       └── copy.ts           # Copy to clipboard\n└── dist/                     # Built assets (generated)\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#module-inspector-ui","level":3,"title":"Module: Inspector UI","text":"<p>Purpose: Web-based request inspection and debugging</p> <p>Technology Stack: - React 18 with TypeScript - Vite for development/building - TailwindCSS for styling (optional) - WebSocket for real-time updates</p> <p>Key Components: - RequestList: Live stream of requests - RequestDetail: Detailed request/response view - Controls: Clear history, pause/resume, filters - WebSocket: Real-time connection to CLI</p> <p>Development: <pre><code>cd web\nnpm install\nnpm run dev      # Development server (port 5173)\nnpm run build    # Production build (outputs to dist/)\n</code></pre></p> <p>Asset Embedding: - Production: Built into Crystal binary - Development: Proxied from Vite dev server</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#tests","level":2,"title":"Tests","text":"<p>The <code>spec/</code> directory contains test files mirroring the <code>src/</code> structure.</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#directory-structure_5","level":3,"title":"Directory Structure","text":"<pre><code>spec/\n├── spec_helper.cr             # Test configuration\n├── core/\n│   └── protocol/\n│       └── messages_spec.cr   # Protocol message tests\n├── server/\n│   ├── tunnel_registry_spec.cr\n│   ├── ws_gateway_spec.cr\n│   ├── http_ingress_spec.cr\n│   └── rate_limiter_spec.cr\n└── cli/\n    ├── tunnel_client_spec.cr\n    └── config_spec.cr\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#test-organization","level":3,"title":"Test Organization","text":"<p>Naming Convention: <code>&lt;source_file&gt;_spec.cr</code></p> <p>Mirror Source Structure: - <code>spec/server/</code> tests <code>src/server/</code> - <code>spec/cli/</code> tests <code>src/cli/</code> - etc.</p> <p>Running Tests: <pre><code>crystal spec                    # All tests\ncrystal spec spec/server/       # Server tests only\ncrystal spec --verbose          # Detailed output\n</code></pre></p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#configuration-files","level":2,"title":"Configuration Files","text":"","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#crystal-configuration","level":3,"title":"Crystal Configuration","text":"<p><code>shard.yml</code> - Crystal dependencies: <pre><code>name: sellia\nversion: 0.1.2\ntargets:\n  sellia:\n    main: src/cli.cr\n  sellia-server:\n    main: src/server.cr\n\ndependencies:\n  msgpack:\n    github: crystal-community/msgpack-crystal\n  # ... more dependencies\n</code></pre></p> <p><code>shard.lock</code> - Locked dependency versions (generated)</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#nodejs-configuration","level":3,"title":"Node.js Configuration","text":"<p><code>package.json</code> - Inspector UI dependencies: <pre><code>{\n  \"name\": \"sellia-inspector\",\n  \"version\": \"0.1.2\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc &amp;&amp; vite build\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.2.0\"\n  }\n}\n</code></pre></p> <p><code>vite.config.ts</code> - Vite build configuration <code>tsconfig.json</code> - TypeScript configuration</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#docker-configuration","level":3,"title":"Docker Configuration","text":"<p><code>Dockerfile</code> - Server container image: <pre><code>FROM crystallang/crystal:latest\n# ... build steps\n</code></pre></p> <p><code>docker-compose.yml</code> - Development environment <code>docker-compose.prod.yml</code> - Production deployment</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#git-configuration","level":3,"title":"Git Configuration","text":"<p><code>.gitignore</code> - Ignored files: <pre><code>/bin/\n/lib/\n/node_modules/\n*.db\n.env\n</code></pre></p> <p><code>.github/workflows/</code> - CI/CD workflows <code>.github/ISSUE_TEMPLATE/</code> - Issue templates</p>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#data-flow","level":2,"title":"Data Flow","text":"","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#tunnel-registration-flow","level":3,"title":"Tunnel Registration Flow","text":"<pre><code>CLI                          Server\n |                             |\n |--[WebSocket]---------------&gt;|\n |                             |\n |--[RegisterTunnel]----------&gt;|\n |                             |--[Validate subdomain]\n |                             |--[Check rate limit]\n |                             |--[Create tunnel]\n |&lt;--[TunnelRegistered]--------|\n |                             |\n |--[Heartbeat]--------------&gt;|\n |                             |\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#http-request-flow","level":3,"title":"HTTP Request Flow","text":"<pre><code>Client          Server                 CLI\n  |               |                    |\n  |--[GET /]-----&gt;|                    |\n  |               |--[Lookup tunnel]   |\n  |               |--[Get client WS]   |\n  |               |--[HttpRequest]----&gt;|\n  |               |                    |--[Forward to localhost:8080]\n  |               |                    |--[Get response]\n  |&lt;--[Response]--|&lt;--[HttpResponse]---|\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#adding-new-features","level":2,"title":"Adding New Features","text":"","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#adding-a-new-protocol-message","level":3,"title":"Adding a New Protocol Message","text":"<ol> <li>Define message in <code>src/core/protocol/messages.cr</code></li> <li>Add serializer in same file</li> <li>Add tests in <code>spec/core/protocol/messages_spec.cr</code></li> <li>Update server handler in <code>src/server/</code></li> <li>Update client in <code>src/cli/</code></li> </ol>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#adding-a-new-cli-command","level":3,"title":"Adding a New CLI Command","text":"<ol> <li>Create command file in <code>src/cli/commands/</code></li> <li>Implement command class</li> <li>Register in <code>src/cli/cli.cr</code></li> <li>Add tests in <code>spec/cli/</code></li> <li>Update README with usage</li> </ol>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#adding-inspector-ui-feature","level":3,"title":"Adding Inspector UI Feature","text":"<ol> <li>Create component in <code>web/src/components/</code></li> <li>Add TypeScript types in <code>web/src/types/</code></li> <li>Add WebSocket handler if needed</li> <li>Update CLI to push data</li> <li>Test in development (<code>npm run dev</code>)</li> </ol>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#module-dependencies","level":2,"title":"Module Dependencies","text":"<pre><code>┌─────────────────────────────────────────┐\n│            src/core/                    │\n│  (Protocol &amp; Types - No dependencies)   │\n└─────────────────────────────────────────┘\n          ▲               ▲\n          │               │\n    ┌─────┴─────┐   ┌─────┴─────┐\n    │ src/server│   │  src/cli  │\n    └───────────┘   └───────────┘\n          │               │\n          │               │\n          └───────┬───────┘\n                  ▼\n         ┌─────────────────┐\n         │  Crystal StdLib │\n         └─────────────────┘\n\n┌─────────────────────────────────────────┐\n│          web/ (Inspector UI)            │\n│  (React + TypeScript - Independent)     │\n└─────────────────────────────────────────┘\n</code></pre>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#code-organization-principles","level":2,"title":"Code Organization Principles","text":"","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#separation-of-concerns","level":3,"title":"Separation of Concerns","text":"<ul> <li>Core: Protocol and types only, no server/CLI logic</li> <li>Server: Tunnel routing and management</li> <li>CLI: Client-side tunnel creation and forwarding</li> <li>Inspector: Independent UI, communicates via WebSocket</li> </ul>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#shared-code","level":3,"title":"Shared Code","text":"<ul> <li>Place shared code in <code>src/core/</code></li> <li>Avoid duplicating logic between server and CLI</li> <li>Use protocol messages for communication</li> </ul>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#entry-points","level":3,"title":"Entry Points","text":"<ul> <li><code>src/server.cr</code> → <code>bin/sellia-server</code></li> <li><code>src/cli.cr</code> → <code>bin/sellia</code></li> <li><code>web/src/main.tsx</code> → Inspector UI</li> </ul>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/project-structure/source-layout/#related-documentation","level":2,"title":"Related Documentation","text":"<ul> <li>Prerequisites - Build dependencies</li> <li>Building - Compile the codebase</li> <li>Testing - Test organization</li> <li>Architecture - System architecture overview</li> </ul>","path":["02 developer","Project structure","Source Layout"],"tags":[]},{"location":"02-developer/release-process/","level":1,"title":"Release Process","text":"<p>How Sellia releases are managed and published.</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#overview","level":2,"title":"Overview","text":"<p>This section covers the release process for Sellia, including versioning, changelog generation, and publishing releases.</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#versioning","level":2,"title":"Versioning","text":"<p>Sellia uses Semantic Versioning:</p> <ul> <li>MAJOR - Incompatible API changes</li> <li>MINOR - Backwards-compatible functionality</li> <li>PATCH - Backwards-compatible bug fixes</li> </ul> <p>Format: <code>MAJOR.MINOR.PATCH</code></p> <p>Examples: - <code>1.0.0</code> → <code>1.0.1</code> (Bug fix) - <code>1.0.0</code> → <code>1.1.0</code> (New feature) - <code>1.0.0</code> → <code>2.0.0</code> (Breaking change)</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#release-checklist","level":2,"title":"Release Checklist","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#pre-release","level":3,"title":"Pre-Release","text":"<ol> <li> <p>All tests passing <pre><code>crystal spec\n</code></pre></p> </li> <li> <p>Documentation updated</p> </li> <li>Update README if needed</li> <li>Update docs/ for new features</li> <li> <p>Update CHANGELOG.md</p> </li> <li> <p>Version bumped</p> </li> <li>Update version in <code>src/core/version.cr</code></li> <li>Update version in <code>shard.yml</code></li> <li>Update version in <code>web/package.json</code> (if UI changed)</li> </ol>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#creating-release","level":3,"title":"Creating Release","text":"<ol> <li> <p>Create release branch <pre><code>git checkout -b release/v1.0.0\n</code></pre></p> </li> <li> <p>Update version files</p> </li> <li><code>src/core/version.cr</code>: <code>VERSION = \"0.4.0\"</code></li> <li><code>shard.yml</code>: <code>version: 0.4.0</code></li> <li> <p><code>web/package.json</code>: <code>version: \"0.4.0\"</code> (if UI changed)</p> </li> <li> <p>Update CHANGELOG.md <pre><code>## [1.0.0] - 2025-01-30\n\n### Added\n- New feature X\n- New feature Y\n\n### Fixed\n- Bug fix Z\n\n### Changed\n- Updated dependency A\n</code></pre></p> </li> <li> <p>Commit changes <pre><code>git add src/core/version.cr shard.yml web/package.json CHANGELOG.md\ngit commit -m \"chore: release v0.4.0\"\n</code></pre></p> </li> <li> <p>Build and test <pre><code>cd web &amp;&amp; npm ci &amp;&amp; npm run build &amp;&amp; cd ..\nshards build sellia --release -Dembed_assets\nshards build sellia-server --release --static\ncrystal spec\n</code></pre></p> </li> <li> <p>Merge to main <pre><code>git checkout main\ngit merge release/v1.0.0\n</code></pre></p> </li> <li> <p>Tag release <pre><code>git tag -a v0.4.0 -m \"Release v0.4.0\"\ngit push origin main\ngit push origin v0.4.0\n</code></pre></p> </li> </ol>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#post-release","level":3,"title":"Post-Release","text":"<ol> <li>Create GitHub Release</li> <li>Go to GitHub releases page</li> <li>Click \"Draft a new release\"</li> <li>Choose tag <code>v0.4.0</code></li> <li>Copy changelog from CHANGELOG.md</li> <li>GitHub Actions will automatically build and publish binaries and Docker images</li> <li> <p>Publish release</p> </li> <li> <p>Build release binaries (future)    <pre><code># Build for multiple platforms\n# Upload to GitHub release\n</code></pre></p> </li> <li> <p>Announce release</p> </li> <li>Update documentation</li> <li>Post announcement</li> <li>Update website</li> </ol>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#changelog-format","level":2,"title":"Changelog Format","text":"<p>Sellia uses Keep a Changelog format:</p> <pre><code># Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Added\n- Upcoming features\n\n### Changed\n- Upcoming changes\n\n## [1.0.0] - 2025-01-30\n\n### Added\n- Initial release\n- HTTP tunnel support\n- Request inspector\n- Basic authentication\n- Subdomain routing\n\n### Fixed\n- Connection stability issues\n\n## [0.1.0] - 2025-01-15\n\n### Added\n- First beta release\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#categories","level":2,"title":"Categories","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#added","level":3,"title":"Added","text":"<p>New features: - New commands - New configuration options - New protocol features</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#changed","level":3,"title":"Changed","text":"<p>Changes to existing functionality: - Updated dependencies - Improved performance - Enhanced features</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#deprecated","level":3,"title":"Deprecated","text":"<p>Soon-to-be removed features: - Mark deprecated features - Migration path</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#removed","level":3,"title":"Removed","text":"<p>Removed features: - Remove deprecated features - Breaking changes</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#fixed","level":3,"title":"Fixed","text":"<p>Bug fixes: - Crash fixes - Incorrect behavior - Security issues</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#security","level":3,"title":"Security","text":"<p>Security fixes: - Vulnerability patches - Security improvements</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#release-branch-strategy","level":2,"title":"Release Branch Strategy","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#main-branch","level":3,"title":"Main Branch","text":"<ul> <li>Active development and stable releases</li> <li>Tags for each release</li> <li>Production-ready code</li> </ul>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#feature-branches","level":3,"title":"Feature Branches","text":"<ul> <li>New features</li> <li>Bug fixes</li> <li>Merged to main via pull requests</li> </ul>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#hotfix-process","level":2,"title":"Hotfix Process","text":"<p>For urgent fixes:</p> <ol> <li> <p>Create hotfix branch <pre><code>git checkout -b hotfix/v0.4.1\n</code></pre></p> </li> <li> <p>Implement fix <pre><code># Make changes\ngit commit -m \"fix: critical bug\"\n</code></pre></p> </li> <li> <p>Build and test <pre><code>crystal spec\n</code></pre></p> </li> <li> <p>Merge to main <pre><code>git checkout main\ngit merge hotfix/v0.4.1\n</code></pre></p> </li> <li> <p>Tag and release <pre><code>git tag -a v0.4.1 -m \"Hotfix v0.4.1\"\ngit push origin main --tags\n</code></pre></p> </li> </ol>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#dependency-updates","level":2,"title":"Dependency Updates","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#crystal-dependencies","level":3,"title":"Crystal Dependencies","text":"<p>Update <code>shard.yml</code>:</p> <pre><code>dependencies:\n  message-pack:\n    github: crystal-community/message-pack-crystal\n    version: ~&gt; 1.0.0  # Update version\n</code></pre> <p>Run update:</p> <pre><code>shards update\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#node-dependencies","level":3,"title":"Node Dependencies","text":"<p>Update <code>web/package.json</code>:</p> <pre><code>{\n  \"dependencies\": {\n    \"react\": \"^18.2.0\"\n  }\n}\n</code></pre> <p>Run update:</p> <pre><code>cd web\nnpm update\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#testing-before-release","level":2,"title":"Testing Before Release","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#full-test-suite","level":3,"title":"Full Test Suite","text":"<pre><code># Crystal tests\ncrystal spec\n\n# UI tests\ncd web\nnpm test\ncd ..\n\n# Integration tests\n./scripts/integration-test.sh\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#manual-testing","level":3,"title":"Manual Testing","text":"<ol> <li> <p>Server startup <pre><code>./bin/sellia-server --port 3000 --domain localhost\n</code></pre></p> </li> <li> <p>Tunnel creation <pre><code>./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Version check <pre><code>./bin/sellia version\n./bin/sellia-server --version\n</code></pre></p> </li> <li> <p>Request handling</p> </li> <li>Make requests through tunnel</li> <li>Verify responses</li> <li> <p>Check inspector</p> </li> <li> <p>Configuration</p> </li> <li>Test config file loading</li> <li>Verify environment variables</li> <li>Check CLI flags</li> </ol>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#platform-testing","level":3,"title":"Platform Testing","text":"<p>Test on supported platforms: - Linux (Ubuntu, Debian, CentOS) - macOS (Intel, Apple Silicon) - Docker</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#release-communication","level":2,"title":"Release Communication","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#github-release","level":3,"title":"GitHub Release","text":"<p>Create release with: - Version number - Release notes - Upgrade instructions - Download links</p>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#announcement-template","level":3,"title":"Announcement Template","text":"<pre><code>## Sellia v1.0.0 Released\n\nI'm excited to announce Sellia v1.0.0!\n\n### Highlights\n- Feature A\n- Feature B\n- Feature C\n\n### What's New\n[Brief description of major changes]\n\n### Upgrade Guide\n[Steps for upgrading from previous version]\n\n### Downloads\n- [Source](https://github.com/watzon/sellia/archive/refs/tags/v1.0.0.tar.gz)\n- Docker image: `docker pull sellia:1.0.0`\n\n### Documentation\n[Link to updated documentation]\n\n### Thank You\nSpecial thanks to contributors:\n- @contributor1\n- @contributor2\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#post-release-tasks","level":2,"title":"Post-Release Tasks","text":"<ol> <li>Monitor issues</li> <li>Watch for regression reports</li> <li> <p>Respond to release feedback</p> </li> <li> <p>Update website</p> </li> <li>Update version numbers</li> <li> <p>Add release notes</p> </li> <li> <p>Plan next release</p> </li> <li>Review feature requests</li> <li>Prioritize backlog</li> </ol>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#version-bumping-examples","level":2,"title":"Version Bumping Examples","text":"","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#patch-release-bug-fix","level":3,"title":"Patch Release (Bug Fix)","text":"<pre><code># 1.0.0 → 1.0.1\ngit checkout -b release/v1.0.1\n# Update shard.yml: version: 1.0.1\ngit commit -m \"chore: release v1.0.1\"\ngit tag -a v1.0.1 -m \"Release v1.0.1\"\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#minor-release-new-feature","level":3,"title":"Minor Release (New Feature)","text":"<pre><code># 1.0.0 → 1.1.0\ngit checkout -b release/v1.1.0\n# Update shard.yml: version: 1.1.0\ngit commit -m \"chore: release v1.1.0\"\ngit tag -a v1.1.0 -m \"Release v1.1.0\"\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#major-release-breaking-change","level":3,"title":"Major Release (Breaking Change)","text":"<pre><code># 1.0.0 → 2.0.0\ngit checkout -b release/v2.0.0\n# Update shard.yml: version: 2.0.0\ngit commit -m \"chore: release v2.0.0\"\ngit tag -a v2.0.0 -m \"Release v2.0.0\"\n</code></pre>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Contributing - Contribution guidelines</li> <li>Development - Development setup</li> <li>Security - Security considerations</li> </ul>","path":["02 developer","Release process","Release Process"],"tags":[]},{"location":"02-developer/release-process/building-binaries/","level":1,"title":"Building Release Binaries","text":"<p>Cross-compilation and build process for Sellia release binaries.</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#overview","level":2,"title":"Overview","text":"<p>Sellia is written in Crystal, which compiles to native binaries. Release builds are optimized single executables that include the embedded React UI.</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#prerequisites","level":2,"title":"Prerequisites","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#build-tools","level":3,"title":"Build Tools","text":"<ul> <li>Crystal 1.10+ (shard.yml specifies &gt;= 1.10.0)</li> <li>Node.js 20+ (for React UI)</li> <li>Git</li> </ul>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#optional","level":3,"title":"Optional","text":"<ul> <li>Docker (for cross-compilation)</li> <li>GitHub Actions (automated builds)</li> </ul>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#local-builds","level":2,"title":"Local Builds","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#development-build","level":3,"title":"Development Build","text":"<p>Fast compilation for testing:</p> <pre><code># From project root\nshards build\n\n# Output: ./bin/sellia (CLI) or ./bin/sellia-server (Server)\n# Size: ~4-5 MB\n# Features: Development mode (proxies to Vite dev server)\n</code></pre> <p>Use for: Development and testing</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#production-build","level":3,"title":"Production Build","text":"<p>Optimized binary for distribution:</p> <pre><code># Build React UI first\ncd web\nnpm ci\nnpm run build\n\n# Build Crystal binary with release flags\ncd ..\nshards build --release --Dembed_assets\n\n# Output: ./bin/sellia (CLI) or ./bin/sellia-server (Server)\n# Size: ~6-8 MB (includes baked UI assets for CLI)\n# Features: Production mode (self-contained)\n</code></pre> <p>Use for: Production deployment</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#build-flags","level":2,"title":"Build Flags","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#crystal-compiler-flags","level":3,"title":"Crystal Compiler Flags","text":"Flag Purpose Effect <code>--release</code> Enable optimizations Smaller, faster binary <code>--debug</code> Include debug info Larger binary, stack traces <code>--no-debug</code> Strip debug symbols Smaller binary <code>-Dflag_name</code> Define compile-time flag Conditional compilation","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#common-combinations","level":3,"title":"Common Combinations","text":"<pre><code># Standard release\nshards build --release\n\n# Release with static linking (Linux)\nshards build --release --static\n\n# Release with specific target\nshards build --release --target x86_64-linux-musl\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#building-react-ui","level":2,"title":"Building React UI","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#production-build_1","level":3,"title":"Production Build","text":"<pre><code>cd web\n\n# Install dependencies\nnpm ci\n\n# Build optimized bundle\nnpm run build\n\n# Output: web/dist/\n# - index.html\n# - assets/*.js (minified, hashed)\n# - assets/*.css (minified, hashed)\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#build-script","level":3,"title":"Build Script","text":"<pre><code>#!/bin/bash\nset -e\n\necho \"Building React UI...\"\ncd web\nnpm ci\nnpm run build\ncd ..\n\necho \"UI built successfully\"\nls -lh web/dist/\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#cross-compilation","level":2,"title":"Cross-Compilation","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#using-docker","level":3,"title":"Using Docker","text":"<p>Why: Crystal requires matching target architecture for native compilation. Docker provides consistent build environments.</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#linux-build-on-macos","level":3,"title":"Linux Build on macOS","text":"<pre><code># Use Crystal official Docker image\ndocker run --rm -v $(pwd):/app -w /app crystallang/crystal:latest-alpine \\\n  shards build --release --static\n\n# Output: ./bin/sellia (Linux binary)\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#multi-platform-build-script","level":3,"title":"Multi-Platform Build Script","text":"<pre><code>#!/bin/bash\nset -e\n\nVERSION=$(grep VERSION src/core/version.cr | cut -d'\"' -f2)\nOUTPUT=\"./dist\"\n\nmkdir -p $OUTPUT\n\necho \"Building Sellia v$VERSION for multiple platforms...\"\n\n# Build for current platform\necho \"Building for $(uname -s)-$(uname -m)...\"\nshards build sellia --release -Dembed_assets\nshards build sellia-server --release --static\ncp bin/sellia \"$OUTPUT/sellia-$VERSION-$(uname -s)-$(uname -m)\"\ncp bin/sellia-server \"$OUTPUT/sellia-server-$VERSION-$(uname -s)-$(uname -m)\"\n\n# Build for Linux (requires Docker)\necho \"Building for linux-amd64...\"\ndocker run --rm -v $(pwd):/workspace -w /workspace amd64/alpine sh -c '\n  apk add --no-cache crystal shards gcc musl-dev openssl-dev sqlite-static &amp;&amp;\n  shards install --without-development &amp;&amp;\n  shards build sellia --release --static -Dembed_assets &amp;&amp;\n  shards build sellia-server --release --static\n'\ncp bin/sellia \"$OUTPUT/sellia-$VERSION-linux-amd64\"\ncp bin/sellia-server \"$OUTPUT/sellia-server-$VERSION-linux-amd64\"\n\necho \"Builds complete:\"\nls -lh $OUTPUT/\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#automated-builds-github-actions","level":2,"title":"Automated Builds (GitHub Actions)","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#cicd-pipeline","level":3,"title":"CI/CD Pipeline","text":"<p>Location: <code>.github/workflows/release.yml</code></p> <pre><code>name: Release\n\non:\n  push:\n    tags:\n      - 'v*'\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install Crystal\n        uses: crystal-lang/install-crystal@v1\n\n      - name: Install Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n\n      - name: Build Inspector UI\n        run: |\n          cd web\n          npm ci\n          npm run build\n\n      - name: Build Crystal\n        run: shards build --release\n\n      - name: Create Release\n        uses: softprops/action-gh-release@v1\n        with:\n          files: bin/sellia\n          draft: false\n          prerelease: false\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#multi-platform-ci","level":3,"title":"Multi-Platform CI","text":"<pre><code>jobs:\n  release:\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest, windows-latest]\n    runs-on: ${{ matrix.os }}\n    steps:\n      - name: Build\n        run: shards build --release\n\n      - name: Upload\n        uses: actions/upload-artifact@v4\n        with:\n          name: sellia-${{ matrix.os }}\n          path: bin/sellia\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#binary-optimization","level":2,"title":"Binary Optimization","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#size-reduction","level":3,"title":"Size Reduction","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#1-strip-symbols","level":4,"title":"1. Strip Symbols","text":"<pre><code>strip bin/sellia\n</code></pre> <p>Savings: ~20-30% size reduction</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#2-upx-compression","level":4,"title":"2. UPX Compression","text":"<pre><code># Install UPX\nbrew install upx  # macOS\napt install upx  # Linux\n\n# Compress binary\nupx --best --lzma bin/sellia\n</code></pre> <p>Savings: ~40-60% size reduction</p> <p>Trade-off: Slight startup overhead (decompression)</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#3-static-linking","level":4,"title":"3. Static Linking","text":"<pre><code>shards build --release --static\n</code></pre> <p>Benefits: - No external library dependencies - Portable across same OS/architecture</p> <p>Trade-off: Larger binary size</p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#platform-specific-builds","level":2,"title":"Platform-Specific Builds","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#macos","level":3,"title":"macOS","text":"<pre><code># Universal binary (Intel + Apple Silicon)\nlipo -create \\\n  bin/sellia-x86_64 \\\n  bin/sellia-arm64 \\\n  -output bin/sellia-universal\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#linux","level":3,"title":"Linux","text":"<pre><code># Musl libc (fully static)\nshards build --release --static\n\n# GNU libc (dynamic, smaller)\nshards build --release\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#windows","level":3,"title":"Windows","text":"<pre><code># Requires MSYS2/MinGW\nshards build --release\n\n# Output: sellia.exe\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#versioning","level":2,"title":"Versioning","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#update-version","level":3,"title":"Update Version","text":"<p>Before building releases, update version in:</p> <ol> <li> <p>src/core/version.cr <pre><code>VERSION = \"0.4.0\"\n</code></pre></p> </li> <li> <p>shard.yml <pre><code>version: 0.4.0\n</code></pre></p> </li> <li> <p>package.json (if UI changed)    <pre><code>{\n  \"version\": \"0.4.0\"\n}\n</code></pre></p> </li> </ol>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#tag-release","level":3,"title":"Tag Release","text":"<pre><code>git tag v1.2.3\ngit push origin v1.2.3\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#signing-binaries-macos","level":2,"title":"Signing Binaries (macOS)","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#code-signing","level":3,"title":"Code Signing","text":"<pre><code># Import certificate\nsecurity import certificate.p12 -k ~/Library/Keychains/login.keychain\n\n# Sign binary\ncodesign --deep --force --verify --verbose \\\n  --sign \"Developer ID Application: Your Name\" \\\n  bin/sellia\n\n# Verify signature\ncodesign --verify --verbose bin/sellia\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#notarization","level":3,"title":"Notarization","text":"<pre><code># Upload to Apple for notarization\nxcrun notarytool submit bin/sellia \\\n  --apple-id \"your@email.com\" \\\n  --password \"app-specific-password\" \\\n  --team-id \"TEAMID\" \\\n  --wait\n\n# Staple notarization ticket\nxcrun stapler staple bin/sellia\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#distribution","level":2,"title":"Distribution","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#file-naming-convention","level":3,"title":"File Naming Convention","text":"<pre><code>sellia-{version}-{os}-{arch}.{ext}\n</code></pre> <p>Examples: - <code>sellia-1.2.3-linux-x86_64</code> - <code>sellia-1.2.3-darwin-arm64</code> - <code>sellia-1.2.3-windows-x86_64.exe</code></p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#checksums","level":3,"title":"Checksums","text":"<p>Generate SHA256 checksums for integrity verification:</p> <pre><code>cd dist\nshasum -a 256 * &gt; SHA256SUMS\n</code></pre> <p>Output: <pre><code>abc123...  sellia-1.2.3-linux-x86_64\ndef456...  sellia-1.2.3-darwin-arm64\n</code></pre></p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#testing-builds","level":2,"title":"Testing Builds","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#smoke-test","level":3,"title":"Smoke Test","text":"<pre><code># Check version\n./bin/sellia version\n# Expected: Sellia v0.4.0\n\n# Check help\n./bin/sellia help\n# Expected: Usage message\n\n# Check server version\n./bin/sellia-server --version\n# Expected: Sellia Server v0.4.0\n\n# Check inspector works\n./bin/sellia http 3000 &amp;\n# Open http://127.0.0.1:4040\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#integration-test","level":3,"title":"Integration Test","text":"<pre><code># Start a test server\npython3 -m http.server 8080 &amp;\n\n# Start tunnel\n./bin/sellia http 8080 --subdomain test-$$\n\n# Make request\ncurl https://test-$$.sellia.me\n\n# Check inspector shows request\ncurl http://127.0.0.1:4040/api/requests\n</code></pre>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#build-fails-error-baking-files","level":3,"title":"Build Fails: \"Error baking files\"","text":"<p>Cause: React UI not built.</p> <p>Solution: <pre><code>cd web &amp;&amp; npm run build &amp;&amp; cd ..\nshards build --release\n</code></pre></p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#binary-too-large","level":3,"title":"Binary Too Large","text":"<p>Cause: Debug symbols or lack of optimization.</p> <p>Solution: <pre><code># Ensure --release flag\nshards build --release\n\n# Strip symbols\nstrip bin/sellia\n</code></pre></p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#library-not-found-error","level":3,"title":"\"Library not found\" Error","text":"<p>Cause: Missing system libraries.</p> <p>Solution: <pre><code># Use static linking\nshards build --release --static\n\n# Or install missing dependencies\nsudo apt install libssl-dev libpcre3-dev  # Debian/Ubuntu\n</code></pre></p>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/building-binaries/#see-also","level":2,"title":"See Also","text":"<ul> <li>Versioning Policy - Semantic versioning</li> <li>Docker Images - Container builds</li> <li>Changelog Maintenance - Release notes</li> <li>CI/CD Workflow - GitHub Actions</li> </ul>","path":["02 developer","Release process","Building Release Binaries"],"tags":[]},{"location":"02-developer/release-process/changelog/","level":1,"title":"Changelog Maintenance","text":"<p>How to maintain the CHANGELOG.md file for Sellia releases.</p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#overview","level":2,"title":"Overview","text":"<p>The CHANGELOG.md file follows the Keep a Changelog format, which is human-readable and machine-parseable.</p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#changelog-location","level":2,"title":"Changelog Location","text":"<pre><code>CHANGELOG.md (project root)\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#format","level":2,"title":"Format","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#header","level":3,"title":"Header","text":"<pre><code># Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#version-entry","level":3,"title":"Version Entry","text":"<pre><code>## [0.4.0] - 2025-12-30\n\n### Added\n- New feature description (#123)\n\n### Changed\n- Modified feature behavior (#124)\n\n### Deprecated\n- Old feature now deprecated (#125)\n\n### Removed\n- Removed deprecated feature (#126)\n\n### Fixed\n- Bug fix description (#127)\n\n### Security\n- Security fix description (#128)\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#categories","level":2,"title":"Categories","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#added","level":3,"title":"Added","text":"<p>New features and functionality.</p> <p>Examples: <pre><code>### Added\n- Add WebSocket inspection in inspector UI (#45)\n- Add `--subdomain` flag to `sellia http` command (#67)\n- Add support for custom tunnel servers (#89)\n</code></pre></p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#changed","level":3,"title":"Changed","text":"<p>Changes to existing functionality (backwards compatible).</p> <p>Examples: <pre><code>### Changed\n- Improve error messages for connection failures (#102)\n- Update default timeout from 30s to 60s (#134)\n- Improve request display performance in inspector (#156)\n</code></pre></p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#deprecated","level":3,"title":"Deprecated","text":"<p>Features that will be removed in future releases.</p> <p>Examples: <pre><code>### Deprecated\n- Deprecated `--old-flag` option, use `--new-flag` instead (#178)\n- Deprecated legacy config format, will be removed in 2.0.0 (#201)\n</code></pre></p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#removed","level":3,"title":"Removed","text":"<p>Features removed in this release (must be in previous release's Deprecated section).</p> <p>Examples: <pre><code>### Removed\n- Removed `--old-flag` option (deprecated in 1.2.0) (#223)\n- Removed legacy authentication method (deprecated in 1.0.0) (#245)\n</code></pre></p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#fixed","level":3,"title":"Fixed","text":"<p>Bug fixes.</p> <p>Examples: <pre><code>### Fixed\n- Fix inspector not showing WebSocket requests (#267)\n- Fix memory leak in request store (#289)\n- Fix crash on invalid subdomain characters (#312)\n</code></pre></p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#security","level":3,"title":"Security","text":"<p>Security vulnerability fixes.</p> <p>Examples: <pre><code>### Security\n- Fix API key leakage in debug logs (#334)\n- Update dependencies to address CVE-2024-xxxxx (#356)\n</code></pre></p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#entry-guidelines","level":2,"title":"Entry Guidelines","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#what-to-include","level":3,"title":"What to Include","text":"<p>DO include: - User-facing changes - New features - Bug fixes - Breaking changes - Security updates - Performance improvements (if significant)</p> <p>DON'T include: - Internal refactoring - Code style changes - Test updates - Documentation-only changes - CI/CD changes</p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#format-rules","level":3,"title":"Format Rules","text":"<ol> <li>Use imperative mood</li> <li>✅ \"Add new feature\"</li> <li> <p>❌ \"Added new feature\" or \"Adds new feature\"</p> </li> <li> <p>One change per bullet</p> </li> <li>✅ Separate bullets for each change</li> <li> <p>❌ Multiple changes in one bullet</p> </li> <li> <p>Link to issues/PRs</p> </li> <li>✅ \"Add feature (#123)\"</li> <li> <p>❌ \"Add feature\"</p> </li> <li> <p>Group by category</p> </li> <li>Keep categories in order: Added, Changed, Deprecated, Removed, Fixed, Security</li> </ol>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#workflow","level":2,"title":"Workflow","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#during-development","level":3,"title":"During Development","text":"<pre><code># Make changes\ngit commit -m \"feat: add new feature\"\n\n# Don't update CHANGELOG yet\n</code></pre> <p>Why: Keep CHANGELOG clean by only updating during release prep.</p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#release-preparation","level":3,"title":"Release Preparation","text":"<ol> <li>Review all commits since last release</li> </ol> <pre><code>git log v0.3.0..v0.4.0 --oneline\n</code></pre> <ol> <li>Categorize changes</li> </ol> <pre><code># List all commit messages\ngit log v0.3.0..v0.4.0 --pretty=format:\"%s\"\n\n# Group into:\n# - Added (feat:)\n# - Changed (chore:, refactor: with user impact)\n# - Fixed (fix:)\n# - Breaking (BREAKING CHANGE:)\n</code></pre> <ol> <li>Draft CHANGELOG entry</li> </ol> <pre><code>## [0.4.0] - 2025-12-30\n\n### Added\n- Add feature A (#123)\n- Add feature B (#124)\n\n### Fixed\n- Fix bug C (#125)\n</code></pre> <ol> <li>Update version links at bottom</li> </ol> <pre><code>[0.4.0]: https://github.com/watzon/sellia/compare/v0.3.0...v0.4.0\n[0.3.0]: https://github.com/watzon/sellia/compare/v0.2.3...v0.3.0\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#example-workflow","level":3,"title":"Example Workflow","text":"<pre><code># 1. Checkout main branch\ngit checkout main\ngit pull origin main\n\n# 2. Create release branch\ngit checkout -b release/v0.4.0\n\n# 3. Update version in src/core/version.cr\nVERSION = \"0.4.0\"\n\n# 4. Update CHANGELOG.md\n# Add new version entry at top\n\n# 5. Commit\ngit commit -am \"chore: release v0.4.0\"\n\n# 6. Tag\ngit tag v0.4.0\n\n# 7. Push\ngit push origin release/v0.4.0\ngit push origin v0.4.0\n\n# 8. Create PR and merge to main\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#automation","level":2,"title":"Automation","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#conventional-commits","level":3,"title":"Conventional Commits","text":"<p>If using conventional commits, can auto-generate changelog:</p> <pre><code># Install git-chglog\nbrew install git-chglog\n\n# Generate changelog\ngit-chglog --next-tag v1.2.3 -o CHANGELOG.md\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#github-integration","level":3,"title":"GitHub Integration","text":"<p>Use GitHub release notes:</p> <pre><code># GitHub Actions can auto-generate release notes\n# See: .github/workflows/release.yml\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#version-links","level":2,"title":"Version Links","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#format_1","level":3,"title":"Format","text":"<p>At the bottom of CHANGELOG.md:</p> <pre><code>[Unreleased]: https://github.com/watzon/sellia/compare/v1.2.3...HEAD\n[1.2.3]: https://github.com/watzon/sellia/compare/v1.2.2...v1.2.3\n[1.2.2]: https://github.com/watzon/sellia/compare/v1.2.1...v1.2.2\n[1.2.1]: https://github.com/watzon/sellia/compare/v1.2.0...v1.2.1\n[1.2.0]: https://github.com/watzon/sellia/compare/v1.1.0...v1.2.0\n</code></pre> <p>Purpose: Allow users to click version numbers to see diff on GitHub.</p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#unreleased-section","level":2,"title":"Unreleased Section","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#keep-at-top","level":3,"title":"Keep at Top","text":"<pre><code>## [Unreleased]\n\n### Added\n- (Upcoming features)\n\n### Changed\n- (Upcoming changes)\n</code></pre> <p>Purpose: Show what's coming in next release.</p> <p>When to use: - During active development - Remove/clear when creating release</p>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#release-notes-integration","level":2,"title":"Release Notes Integration","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#github-releases","level":3,"title":"GitHub Releases","text":"<p>Copy CHANGELOG entry to GitHub release description:</p> <pre><code>## Release v1.2.3\n\n## [1.2.3] - 2024-12-30\n\n### Added\n- Add feature A (#123)\n\n### Fixed\n- Fix bug B (#124)\n\n**Full Changelog**: https://github.com/watzon/sellia/compare/v1.2.2...v1.2.3\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#examples","level":2,"title":"Examples","text":"","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#major-release","level":3,"title":"Major Release","text":"<pre><code>## [1.0.0] - 2025-XX-XX\n\n### Added\n- Add admin command for subdomain management (#100)\n- Add SQLite persistence for reserved subdomains (#101)\n\n### Changed\n- Require API key for all tunnels (#102)\n- Improve connection error messages (#103)\n\n### Removed\n- Remove legacy config format support (deprecated in 0.3.0) (#104)\n\n### Fixed\n- Fix tunnel reconnection issues (#105)\n\n### Migration Guide\nInclude upgrade notes in the release notes when a migration is required.\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#minor-release","level":3,"title":"Minor Release","text":"<pre><code>## [0.5.0] - 2025-XX-XX\n\n### Added\n- Add path-based routing support (#80)\n- Add WebSocket inspection in inspector (#81)\n- Add `--open` flag to auto-open inspector (#82)\n\n### Changed\n- Improve inspector performance with virtual scrolling (#83)\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#patch-release","level":3,"title":"Patch Release","text":"<pre><code>## [0.4.1] - 2025-XX-XX\n\n### Fixed\n- Fix crash on invalid subdomain characters (#70)\n- Fix inspector not showing request bodies (#71)\n- Fix memory leak in WebSocket proxy (#72)\n</code></pre>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#best-practices","level":2,"title":"Best Practices","text":"<ol> <li>Keep it user-focused</li> <li>Describe what changed, not how</li> <li> <p>Use language users understand</p> </li> <li> <p>Be specific</p> </li> <li>Include issue/PR numbers</li> <li> <p>Link to relevant docs</p> </li> <li> <p>Be honest</p> </li> <li>Don't hide breaking changes</li> <li> <p>List all fixes, even for embarrassing bugs</p> </li> <li> <p>Keep it chronological</p> </li> <li>Newest versions at top</li> <li> <p>Don't reorder old versions</p> </li> <li> <p>Use semantic versioning</p> </li> <li>MAJOR: Breaking changes in \"Removed\"</li> <li>MINOR: New features in \"Added\"</li> <li>PATCH: Fixes in \"Fixed\"</li> </ol>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/changelog/#see-also","level":2,"title":"See Also","text":"<ul> <li>Versioning Policy - Semantic versioning</li> <li>Building Binaries - Release build process</li> <li>Docker Images - Container releases</li> <li>Keep a Changelog - Format specification</li> </ul>","path":["02 developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"02-developer/release-process/docker-images/","level":1,"title":"Docker Image Publishing","text":"<p>Process for building and publishing Docker images for Sellia.</p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#overview","level":2,"title":"Overview","text":"<p>Sellia provides Docker images for containerized deployment. Images are published to Docker Hub and GitHub Container Registry (GHCR).</p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#docker-images","level":2,"title":"Docker Images","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#image-locations","level":3,"title":"Image Locations","text":"Registry Image Tags GHCR (Primary) <code>ghcr.io/watzon/sellia</code> <code>latest</code>, <code>v0.4.0</code>, <code>0</code>, <code>0.4</code>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#dockerfile","level":2,"title":"Dockerfile","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#client-image-tunnel-client","level":3,"title":"Client Image (Tunnel Client)","text":"<p>Location: <code>Dockerfile</code></p> <pre><code># Multi-stage build for smaller image\nFROM 84codes/crystal:1.18.2-alpine AS builder\n\nWORKDIR /app\n\n# Install build dependencies\nRUN apk add --no-cache \\\n    yaml-static \\\n    openssl-libs-static \\\n    openssl-dev \\\n    zlib-static \\\n    sqlite-dev \\\n    sqlite-static \\\n    pcre-dev \\\n    gc-dev \\\n    libevent-static \\\n    libxml2-dev\n\n# Copy shard files first for layer caching\nCOPY shard.yml shard.lock ./\nRUN shards install --production\n\n# Copy source code\nCOPY src/ src/\n\n# Build server binary (static for Alpine)\nRUN mkdir -p bin &amp;&amp; crystal build src/server/main.cr -o bin/sellia-server \\\n    --release --static --no-debug\n\n# Final stage\nFROM alpine:3.20 AS runtime\n\n# Add CA certificates for HTTPS and create non-root user\nRUN apk add --no-cache ca-certificates tzdata \\\n    &amp;&amp; addgroup -g 1000 sellia \\\n    &amp;&amp; adduser -u 1000 -G sellia -s /bin/sh -D sellia\n\nWORKDIR /app\n\n# Copy server binary from builder\nCOPY --from=builder /app/bin/sellia-server /usr/local/bin/sellia-server\n\n# Set ownership\nRUN chown -R sellia:sellia /app\n\nUSER sellia\n\n# Default environment variables\nENV SELLIA_HOST=0.0.0.0 \\\n    SELLIA_PORT=3000 \\\n    SELLIA_DOMAIN=localhost\n\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=5s --start-period=5s --retries=3 \\\n    CMD wget --no-verbose --tries=1 --spider http://localhost:${SELLIA_PORT}/health || exit 1\n\nENTRYPOINT [\"sellia-server\"]\nCMD [\"--host\", \"0.0.0.0\"]\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#building-images","level":2,"title":"Building Images","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#local-build","level":3,"title":"Local Build","text":"<pre><code># Build image\ndocker build -t ghcr.io/watzon/sellia:latest .\n\n# Build with specific version\ndocker build -t ghcr.io/watzon/sellia:v0.4.0 .\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#build-arguments","level":3,"title":"Build Arguments","text":"<pre><code># Pass version at build time\nARG VERSION=dev\nRUN echo \"const VERSION = \\\"${VERSION}\\\"\" &gt; src/version.cr\n</code></pre> <pre><code>docker build --build-arg VERSION=1.2.3 -t sellia/tunnel:v1.2.3 .\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#multi-architecture-builds","level":2,"title":"Multi-Architecture Builds","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#buildx-for-multi-platform","level":3,"title":"Buildx for Multi-Platform","text":"<pre><code># Enable buildx\ndocker buildx create --use\n\n# Build for multiple platforms\ndocker buildx build \\\n  --platform linux/amd64,linux/arm64 \\\n  -t sellia/tunnel:latest \\\n  --push \\\n  .\n</code></pre> <p>Platforms: - <code>linux/amd64</code> - Intel/AMD 64-bit - <code>linux/arm64</code> - ARM 64-bit (Apple Silicon, AWS Graviton)</p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#github-actions-workflow","level":3,"title":"GitHub Actions Workflow","text":"<p>Location: <code>.github/workflows/docker.yml</code></p> <pre><code>name: Docker\n\non:\n  push:\n    tags:\n      - 'v*'\n  push:\n    branches:\n      - main\n\njobs:\n  docker:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Set up QEMU\n        uses: docker/setup-qemu-action@v3\n\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v3\n        with:\n          username: ${{ secrets.DOCKER_USERNAME }}\n          password: ${{ secrets.DOCKER_PASSWORD }}\n\n      - name: Extract metadata\n        id: meta\n        uses: docker/metadata-action@v5\n        with:\n          images: sellia/tunnel\n          tags: |\n            type=ref,event=branch\n            type=semver,pattern={{version}}\n            type=semver,pattern={{major}}.{{minor}}\n            type=semver,pattern={{major}}\n\n      - name: Build and push\n        uses: docker/build-push-action@v5\n        with:\n          context: .\n          platforms: linux/amd64,linux/arm64\n          push: true\n          tags: ${{ steps.meta.outputs.tags }}\n          labels: ${{ steps.meta.outputs.labels }}\n          cache-from: type=gha\n          cache-to: type=gha,mode=max\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#image-tags","level":2,"title":"Image Tags","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#tagging-strategy","level":3,"title":"Tagging Strategy","text":"Tag Purpose Example <code>latest</code> Most recent release <code>ghcr.io/watzon/sellia:latest</code> <code>v0.4.0</code> Specific version <code>ghcr.io/watzon/sellia:v0.4.0</code> <code>0</code> Major version <code>ghcr.io/watzon/sellia:0</code> <code>0.4</code> Minor version <code>ghcr.io/watzon/sellia:0.4</code>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#tag-commands","level":3,"title":"Tag Commands","text":"<pre><code># Tag image for multiple versions\ndocker tag ghcr.io/watzon/sellia:v0.4.0 ghcr.io/watzon/sellia:latest\ndocker tag ghcr.io/watzon/sellia:v0.4.0 ghcr.io/watzon/sellia:0\ndocker tag ghcr.io/watzon/sellia:v0.4.0 ghcr.io/watzon/sellia:0.4\n\n# Push all tags\ndocker push ghcr.io/watzon/sellia:latest\ndocker push ghcr.io/watzon/sellia:0\ndocker push ghcr.io/watzon/sellia:0.4\ndocker push ghcr.io/watzon/sellia:v0.4.0\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#publishing","level":2,"title":"Publishing","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#manual-publishing","level":3,"title":"Manual Publishing","text":"<pre><code># Login to GHCR\necho $GITHUB_TOKEN | docker login ghcr.io -u username --password-stdin\n\n# Build and push\ndocker buildx build \\\n  --platform linux/amd64,linux/arm64 \\\n  -t ghcr.io/watzon/sellia:v0.4.0 \\\n  -t ghcr.io/watzon/sellia:latest \\\n  --push \\\n  .\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#github-container-registry","level":3,"title":"GitHub Container Registry","text":"<pre><code># Login to GHCR\necho $GITHUB_TOKEN | docker login ghcr.io -u username --password-stdin\n\n# Build and push\ndocker buildx build \\\n  --platform linux/amd64,linux/arm64 \\\n  -t ghcr.io/watzon/sellia:v1.2.3 \\\n  -t ghcr.io/watzon/sellia:latest \\\n  --push \\\n  .\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#using-docker-images","level":2,"title":"Using Docker Images","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#basic-usage","level":3,"title":"Basic Usage","text":"<pre><code># Tunnel localhost:3000 (requires CLI binary, not server image)\n# Note: The Docker image currently only contains sellia-server\n# Use local binary for tunnel client\n\n# Example with server:\ndocker run --rm \\\n  --name sellia-server \\\n  -p 3000:3000 \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#with-configuration-file","level":3,"title":"With Configuration File","text":"<pre><code># Mount config file\ndocker run --rm \\\n  --name sellia-server \\\n  -v $(pwd)/sellia.yml:/app/sellia.yml \\\n  -p 3000:3000 \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#with-inspector-access","level":3,"title":"With Inspector Access","text":"<pre><code># Expose server port with custom configuration\ndocker run --rm \\\n  --name sellia-server \\\n  -p 3000:3000 \\\n  -e SELLIA_DOMAIN=yourdomain.com \\\n  -e SELLIA_REQUIRE_AUTH=true \\\n  -e SELLIA_MASTER_KEY=your-key \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#docker-compose","level":3,"title":"Docker Compose","text":"<p>docker-compose.yml</p> <pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - SELLIA_HOST=0.0.0.0\n      - SELLIA_DOMAIN=localhost\n      - SELLIA_REQUIRE_AUTH=true\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n    restart: unless-stopped\n</code></pre> <p>Run:</p> <pre><code>docker-compose up\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#image-size-optimization","level":2,"title":"Image Size Optimization","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#current-sizes","level":3,"title":"Current Sizes","text":"Image Type Size Alpine-based ~15 MB Debian-based ~25 MB Ubuntu-based ~40 MB","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#optimization-techniques","level":3,"title":"Optimization Techniques","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#1-multi-stage-build","level":4,"title":"1. Multi-Stage Build","text":"<pre><code># Builder stage with all tools\nFROM crystallang/crystal:latest AS builder\n# ... build steps ...\n\n# Final stage with minimal runtime\nFROM alpine:3.19\nCOPY --from=builder /app/bin/sellia /app/sellia\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#2-strip-binary","level":4,"title":"2. Strip Binary","text":"<pre><code>RUN strip /app/bin/sellia\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#3-use-distroless","level":4,"title":"3. Use Distroless","text":"<pre><code>FROM gcr.io/distroless/cc-debian12\nCOPY --from=builder /app/bin/sellia /app/sellia\n</code></pre> <p>Benefits: - Minimal attack surface - Smaller image size - No shell/package manager</p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#security-scanning","level":2,"title":"Security Scanning","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#trivy-scan","level":3,"title":"Trivy Scan","text":"<pre><code># Install Trivy\nbrew install trivy\n\n# Scan image\ntrivy image sellia/tunnel:latest\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#docker-scout","level":3,"title":"Docker Scout","text":"<pre><code># Scan image\ndocker scout cves sellia/tunnel:latest\n\n# Quick check\ndocker scout quickview sellia/tunnel:latest\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#ci-integration","level":3,"title":"CI Integration","text":"<pre><code>- name: Run Trivy\n  uses: aquasecurity/trivy-action@master\n  with:\n    image-ref: sellia/tunnel:latest\n    format: 'sarif'\n    output: 'trivy-results.sarif'\n\n- name: Upload Trivy Results\n  uses: github/codeql-action/upload-sarif@v2\n  with:\n    sarif_file: 'trivy-results.sarif'\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#testing-images","level":2,"title":"Testing Images","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#smoke-test","level":3,"title":"Smoke Test","text":"<pre><code># Pull image\ndocker pull ghcr.io/watzon/sellia:latest\n\n# Run container\ndocker run --rm ghcr.io/watzon/sellia:latest --version\n\n# Expected: Sellia Server output\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#integration-test","level":3,"title":"Integration Test","text":"<pre><code># Start test web server\ndocker run -d --name web -p 3000:80 nginx:alpine\n\n# Start tunnel\ndocker run --rm --name tunnel \\\n  --link web:web \\\n  -e SELLIA_API_KEY=key \\\n  sellia/tunnel:latest \\\n  http 3000 --host web\n</code></pre>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#update-strategy","level":2,"title":"Update Strategy","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#auto-update-watchtower","level":3,"title":"Auto-Update Watchtower","text":"<pre><code># Run Watchtower to auto-update containers\ndocker run -d \\\n  --name watchtower \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  containrrr/watchtower \\\n  sellia-tunnel\n</code></pre> <p>Behavior: Watchtower checks for new images and restarts containers automatically.</p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#permission-denied-error","level":3,"title":"\"Permission Denied\" Error","text":"<p>Cause: Running as non-root user without permissions.</p> <p>Solution: <pre><code># Run with specific UID/GID\ndocker run --rm \\\n  -u $(id -u):$(id -g) \\\n  sellia/tunnel:latest \\\n  http 3000\n</code></pre></p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#inspector-not-accessible","level":3,"title":"Inspector Not Accessible","text":"<p>Cause: Inspector port not exposed.</p> <p>Solution: <pre><code># Expose inspector port\ndocker run --rm -p 4040:4040 sellia/tunnel:latest http 3000\n</code></pre></p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#cannot-connect-to-local-service","level":3,"title":"\"Cannot Connect to Local Service\"","text":"<p>Cause: Container networking issue.</p> <p>Solution: <pre><code># Use network mode: host\ndocker run --rm --network host sellia/tunnel:latest http 3000\n\n# Or use service name\ndocker run --rm --link web:web \\\n  sellia/tunnel:latest http 3000 --host web\n</code></pre></p>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/docker-images/#see-also","level":2,"title":"See Also","text":"<ul> <li>Building Binaries - Binary builds</li> <li>Versioning Policy - Semantic versioning</li> <li>GHCR - Published images</li> <li>Dockerfile - Source Dockerfile</li> </ul>","path":["02 developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/","level":1,"title":"Homebrew and Scoop Packages","text":"<p>Package manager distribution for Sellia (planned feature).</p>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#status","level":2,"title":"Status","text":"<p>Current Status: 🚧 Not Yet Implemented</p> <p>This is a placeholder documentation for future Homebrew and Scoop package support.</p>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#overview","level":2,"title":"Overview","text":"<p>Package managers provide convenient installation and updates for Sellia:</p> <ul> <li>Homebrew - macOS and Linux</li> <li>Scoop - Windows</li> </ul>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#homebrew-macoslinux","level":2,"title":"Homebrew (macOS/Linux)","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#installation-planned","level":3,"title":"Installation (Planned)","text":"<pre><code># Add tap\nbrew tap sellia/tap\n\n# Install Sellia\nbrew install sellia\n\n# Start tunnel\nsellia http 3000\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#homebrew-formula","level":3,"title":"Homebrew Formula","text":"<p>File: <code>Formula/sellia.rb</code></p> <pre><code>class Sellia &lt; Formula\n  desc \"Secure tunnels to localhost\"\n  homepage \"https://github.com/watzon/sellia\"\n  url \"https://github.com/watzon/sellia/archive/refs/tags/v1.2.3.tar.gz\"\n  sha256 \"abc123...\"\n  license \"MIT\"\n\n  depends_on \"crystal\"\n  depends_on \"node\" =&gt; :build\n\n  def install\n    # Build React UI\n    cd \"web\" do\n      system \"npm\", \"install\"\n      system \"npm\", \"run\", \"build\"\n    end\n\n    # Build Crystal binary\n    system \"shards\", \"build\", \"--release\"\n    bin.install \"bin/sellia\"\n  end\n\n  test do\n    assert_match \"Sellia v#{version}\", shell_output(\"#{bin}/sellia version\")\n  end\nend\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#auto-update-strategy","level":3,"title":"Auto-Update Strategy","text":"<pre><code># Livecheck version\nbrew livecheck sellia --tap sellia/tap\n</code></pre> <p>Configuration (in Formula):</p> <pre><code>livecheck do\n  url :stable\n  regex(/^v?(\\d+(?:\\.\\d+)+)$/i)\nend\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#scoop-windows","level":2,"title":"Scoop (Windows)","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#installation-planned_1","level":3,"title":"Installation (Planned)","text":"<pre><code># Add bucket\nscoop bucket add sellia https://github.com/watzon/sellia\n\n# Install Sellia\nscoop install sellia\n\n# Start tunnel\nsellia http 3000\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#scoop-manifest","level":3,"title":"Scoop Manifest","text":"<p>File: <code>bucket/sellia.json</code></p> <pre><code>{\n  \"version\": \"1.2.3\",\n  \"description\": \"Secure tunnels to localhost\",\n  \"homepage\": \"https://github.com/watzon/sellia\",\n  \"license\": \"MIT\",\n  \"url\": [\n    \"https://github.com/watzon/sellia/releases/download/v1.2.3/sellia-1.2.3-windows-x86_64.exe#/sellia.exe\"\n  ],\n  \"hash\": [\n    \"abc123...\"\n  ],\n  \"bin\": [\n    [\"sellia.exe\", \"sellia\"]\n  ],\n  \"checkver\": \"github\",\n  \"autoupdate\": {\n    \"url\": \"https://github.com/watzon/sellia/releases/download/v$version/sellia-$version-windows-x86_64.exe#/sellia.exe\"\n  }\n}\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#implementation-checklist","level":2,"title":"Implementation Checklist","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#homebrew","level":3,"title":"Homebrew","text":"<ul> <li> Create Homebrew tap repository</li> <li> Write Formula file</li> <li> Test installation on macOS</li> <li> Test installation on Linux</li> <li> Set up CI/CD to publish formula</li> <li> Add livecheck support</li> <li> Document in README</li> </ul>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#scoop","level":3,"title":"Scoop","text":"<ul> <li> Create Scoop bucket</li> <li> Write manifest file</li> <li> Test installation on Windows 10/11</li> <li> Set up CI/CD to publish manifest</li> <li> Add auto-update support</li> <li> Document in README</li> </ul>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#cicd-integration","level":2,"title":"CI/CD Integration","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#publish-formula-on-release","level":3,"title":"Publish Formula on Release","text":"<p>Location: <code>.github/workflows/release.yml</code></p> <pre><code>- name: Update Homebrew formula\n  if: startsWith(github.ref, 'refs/tags/')\n  run: |\n    # Update version in Formula\n    sed -i \"s/url \\\".*\\\"/url \\\"https://github.com/watzon/sellia/archive/refs/tags/${{ github.ref_name }}.tar.gz\\\"/\" Formula/sellia.rb\n    sed -i \"s/sha256 \\\".*\\\"/sha256 \\\"${SHASUM}\\\"/\" Formula/sellia.rb\n\n    # Commit to tap repository\n    git clone https://${{ secrets.HOMEBREW_TOKEN }}@github.com/sellia/homebrew-tap.git\n    cp Formula/sellia.rb homebrew-tap/Formula/sellia.rb\n    cd homebrew-tap\n    git config user.name \"Sellia Bot\"\n    git config user.email \"bot@sellia.me\"\n    git commit -am \"Release ${{ github.ref_name }}\"\n    git push\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#publish-scoop-manifest","level":3,"title":"Publish Scoop Manifest","text":"<pre><code>- name: Update Scoop manifest\n  if: startsWith(github.ref, 'refs/tags/')\n  run: |\n    # Update version in manifest\n    cat &gt; bucket/sellia.json &lt;&lt;EOF\n    {\n      \"version\": \"${VERSION}\",\n      \"url\": [\"https://github.com/watzon/sellia/releases/download/v${VERSION}/sellia-${VERSION}-windows-x86_64.exe#/sellia.exe\"],\n      \"hash\": \"${SHASUM}\"\n    }\n    EOF\n\n    # Commit to bucket\n    git clone https://${{ secrets.SCOOP_TOKEN }}@github.com/sellia/scoop-bucket.git\n    cp bucket/sellia.json scoop-bucket/bucket/sellia.json\n    cd scoop-bucket\n    git config user.name \"Sellia Bot\"\n    git config user.email \"bot@sellia.me\"\n    git commit -am \"Release ${VERSION}\"\n    git push\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#comparison","level":2,"title":"Comparison","text":"Feature Homebrew Scoop Platforms macOS, Linux Windows Package Format Ruby formula JSON manifest Build from Source Yes No (binary only) Auto-update Yes (livecheck) Yes (checkver) Sandbox Optional Yes (by default)","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#alternative-package-managers","level":2,"title":"Alternative Package Managers","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#linux","level":3,"title":"Linux","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#aur-arch-linux","level":4,"title":"AUR (Arch Linux)","text":"<pre><code># Install from AUR\nyay -S sellia\n\n# Or manually\ngit clone https://aur.archlinux.org/sellia.git\ncd sellia\nmakepkg -si\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#snap-ubuntudebian","level":4,"title":"Snap (Ubuntu/Debian)","text":"<pre><code># Install snap\nsudo snap install sellia\n\n# Run tunnel\nsellia.http 3000\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#flatpak","level":4,"title":"Flatpak","text":"<pre><code># Install flatpak\nflatpak install flathub me.sellia.Tunnel\n\n# Run tunnel\nflatpak run me.sellia.Tunnel http 3000\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#macos","level":3,"title":"macOS","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#macports","level":4,"title":"MacPorts","text":"<pre><code># Install from MacPorts\nsudo port install sellia\n\n# Run tunnel\nsellia http 3000\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#user-documentation-planned","level":2,"title":"User Documentation (Planned)","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#macos-installation","level":3,"title":"macOS Installation","text":"<pre><code>## macOS\n\n### Using Homebrew (recommended)\n\n```bash\nbrew tap sellia/tap\nbrew install sellia\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#manual-install","level":3,"title":"Manual Install","text":"<p>Download binary from releases page. <pre><code>---\n\n### Linux Installation\n\n```markdown\n## Linux\n\n### Using Homebrew\n\n```bash\nbrew tap sellia/tap\nbrew install sellia\n</code></pre></p>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#using-aur-arch-linux","level":3,"title":"Using AUR (Arch Linux)","text":"<pre><code>yay -S sellia\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#manual-install_1","level":3,"title":"Manual Install","text":"<p>Download binary from releases page. <pre><code>---\n\n### Windows Installation\n\n```markdown\n## Windows\n\n### Using Scoop (recommended)\n\n```powershell\nscoop bucket add sellia https://github.com/sellia/scoop-bucket\nscoop install sellia\n</code></pre></p>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#manual-install_2","level":3,"title":"Manual Install","text":"<p>Download <code>.exe</code> from releases page. <pre><code>---\n\n## Testing Package Installations\n\n### Homebrew\n\n```bash\n# Test local formula\nbrew install --build-from-source Formula/sellia.rb\n\n# Verify installation\nsellia version\n\n# Test tunnel\nsellia http 3000\n</code></pre></p>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#scoop_1","level":3,"title":"Scoop","text":"<pre><code># Test local manifest\nscoop install .\\bucket\\sellia.json\n\n# Verify installation\nsellia version\n\n# Test tunnel\nsellia http 3000\n</code></pre>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#resources","level":2,"title":"Resources","text":"","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#homebrew_1","level":3,"title":"Homebrew","text":"<ul> <li>Homebrew Documentation</li> <li>Formula Cookbook</li> <li>Creating a Tap</li> </ul>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#scoop_2","level":3,"title":"Scoop","text":"<ul> <li>Scoop Documentation</li> <li>Creating Apps</li> <li>Creating Buckets</li> </ul>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/homebrew-scoop/#see-also","level":2,"title":"See Also","text":"<ul> <li>Building Binaries - Build process</li> <li>Docker Images - Container distribution</li> <li>Versioning Policy - Semantic versioning</li> <li>Release Workflow - CI/CD</li> </ul>","path":["02 developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"02-developer/release-process/versioning/","level":1,"title":"Versioning Policy","text":"<p>Semantic versioning policy for Sellia releases.</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#overview","level":2,"title":"Overview","text":"<p>Sellia follows Semantic Versioning 2.0.0.</p> <p>Format: <code>MAJOR.MINOR.PATCH</code> (e.g., <code>1.2.3</code>)</p> <ul> <li>MAJOR: Incompatible API changes</li> <li>MINOR: New functionality (backwards compatible)</li> <li>PATCH: Bug fixes (backwards compatible)</li> </ul>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#version-number-format","level":2,"title":"Version Number Format","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#examples","level":3,"title":"Examples","text":"Version Type Meaning <code>0.1.0</code> Initial First release <code>0.4.0</code> Pre-release Current development version <code>1.0.0</code> Major Future stable release","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#pre-release-versions","level":3,"title":"Pre-Release Versions","text":"<p>Format: <code>MAJOR.MINOR.PATCH-prerelease.N</code></p> <p>Examples: - <code>1.0.0-alpha.1</code> - <code>1.0.0-beta.1</code> - <code>1.0.0-rc.1</code></p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#version-bumping-rules","level":2,"title":"Version Bumping Rules","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#major-x00","level":3,"title":"MAJOR (X.0.0)","text":"<p>Increment when:</p> <ol> <li>CLI interface changes</li> <li>Removing commands or flags</li> <li>Changing flag names or formats</li> <li> <p>Requiring new arguments</p> </li> <li> <p>Config file format changes</p> </li> <li>Removing config fields</li> <li>Renaming required fields</li> <li> <p>Changing config file structure</p> </li> <li> <p>Protocol changes</p> </li> <li>Breaking protocol message changes</li> <li>Removing message types</li> <li> <p>Required new fields in messages</p> </li> <li> <p>API key changes</p> </li> <li>Requiring new API key format</li> <li>Changing authentication method</li> </ol> <p>Examples: <pre><code>1.2.3 → 2.0.0\n- Remove `--legacy-flag` option\n- Change config from YAML to TOML\n- Require API keys for all tunnels\n</code></pre></p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#minor-xy0","level":3,"title":"MINOR (x.Y.0)","text":"<p>Increment when:</p> <ol> <li>New features</li> <li>Adding new commands</li> <li>Adding new CLI flags (optional)</li> <li> <p>Adding new config fields (optional)</p> </li> <li> <p>Enhancements</p> </li> <li>New inspector features</li> <li>Performance improvements</li> <li> <p>New protocol message types (backwards compatible)</p> </li> <li> <p>Non-breaking additions</p> </li> <li>New tunnel types</li> <li>New routing features</li> <li>Additional output formats</li> </ol> <p>Examples: <pre><code>1.2.3 → 1.3.0\n- Add `sellia admin` command\n- Add WebSocket inspection in inspector\n- Add path-based routing\n</code></pre></p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#patch-xyz","level":3,"title":"PATCH (x.y.Z)","text":"<p>Increment when:</p> <ol> <li>Bug fixes</li> <li>Fix crashes</li> <li>Fix memory leaks</li> <li> <p>Fix incorrect behavior</p> </li> <li> <p>Internal changes</p> </li> <li>Code refactoring</li> <li>Performance optimizations</li> <li> <p>Documentation updates</p> </li> <li> <p>Backwards-compatible fixes</p> </li> <li>Improve error messages</li> <li>Add validation warnings</li> <li>Fix edge cases</li> </ol> <p>Examples: <pre><code>1.2.3 → 1.2.4\n- Fix connection timeout issue\n- Fix inspector display bug\n- Improve error message for invalid auth\n</code></pre></p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#pre-release-versions_1","level":2,"title":"Pre-Release Versions","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#alpha","level":3,"title":"Alpha","text":"<p>Status: Early development, unstable</p> <p>Usage: Feature development, testing</p> <p>Examples: - <code>1.0.0-alpha.1</code> - First alpha - <code>1.0.0-alpha.2</code> - Second alpha</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#beta","level":3,"title":"Beta","text":"<p>Status: Feature complete, testing needed</p> <p>Usage: Public testing, feedback</p> <p>Examples: - <code>1.0.0-beta.1</code> - First beta - <code>1.0.0-beta.2</code> - Second beta</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#release-candidate-rc","level":3,"title":"Release Candidate (RC)","text":"<p>Status: Ready for release unless bugs found</p> <p>Usage: Final testing before GA</p> <p>Examples: - <code>1.0.0-rc.1</code> - First RC - <code>1.0.0-rc.2</code> - Second RC</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#development-versions","level":2,"title":"Development Versions","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#nightly-dev-builds","level":3,"title":"Nightly / Dev Builds","text":"<p>Format: <code>dev-YYYYMMDD</code> or commit hash</p> <p>Examples: - <code>dev-20241230</code> - <code>dev-a1b2c3d</code></p> <p>Status: Unstable, not for production use</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#version-sources","level":2,"title":"Version Sources","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#source-of-truth","level":3,"title":"Source of Truth","text":"<ol> <li> <p>src/core/version.cr - Crystal code (primary)    <pre><code>module Sellia\n  VERSION = \"0.4.0\"\nend\n</code></pre></p> </li> <li> <p>shard.yml - Crystal dependencies    <pre><code>name: sellia\nversion: 0.4.0\n</code></pre></p> </li> <li> <p>package.json - Web UI (if UI changed)    <pre><code>{\n  \"version\": \"0.4.0\"\n}\n</code></pre></p> </li> <li> <p>Git tags - Releases    <pre><code>v0.4.0\n</code></pre></p> </li> </ol> <p>They must be synchronized for releases.</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#release-workflow","level":2,"title":"Release Workflow","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#1-development","level":3,"title":"1. Development","text":"<pre><code># Work on main branch\ngit checkout main\n\n# Make changes, commit\ngit commit -m \"feat: add new feature\"\n</code></pre> <p>Version format: <code>dev</code> or unreleased</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#2-pre-release","level":3,"title":"2. Pre-Release","text":"<pre><code># Update version in src/core/version.cr\nVERSION = \"1.3.0-alpha.1\"\n\n# Commit\ngit commit -m \"chore: bump version to 1.3.0-alpha.1\"\n\n# Tag\ngit tag v1.3.0-alpha.1\ngit push origin v1.3.0-alpha.1\n</code></pre>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#3-release","level":3,"title":"3. Release","text":"<pre><code># Update version in src/core/version.cr\nVERSION = \"0.5.0\"\n\n# Update shard.yml\n# version: 0.5.0\n\n# Update package.json (if UI changed)\nnpm version 0.5.0\n\n# Commit\ngit commit -am \"chore: release v0.5.0\"\n\n# Tag\ngit tag v0.5.0\ngit push origin main v0.5.0\n\n# GitHub Actions creates release and builds binaries\n</code></pre>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#backwards-compatibility-policy","level":2,"title":"Backwards Compatibility Policy","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#guaranteed-stable","level":3,"title":"Guaranteed Stable","text":"<p>These interfaces are stable within a MAJOR version:</p> <ol> <li>CLI Commands</li> <li>Existing command names</li> <li>Existing flag names</li> <li> <p>Flag formats</p> </li> <li> <p>Config File</p> </li> <li>Existing config keys</li> <li> <p>Config file format (YAML)</p> </li> <li> <p>Protocol</p> </li> <li>Existing message types</li> <li> <p>Message field names</p> </li> <li> <p>Public URLs</p> </li> <li>URL format for tunnels</li> </ol>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#may-change","level":3,"title":"May Change","text":"<p>These interfaces may change in MINOR releases:</p> <ol> <li>Output format</li> <li>CLI text output</li> <li> <p>Log messages</p> </li> <li> <p>Internal APIs</p> </li> <li>Database schema</li> <li> <p>Inspector API (not public)</p> </li> <li> <p>Default values</p> </li> <li>Port numbers</li> <li>Timeout durations</li> </ol>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#deprecation-policy","level":2,"title":"Deprecation Policy","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#deprecation-process","level":3,"title":"Deprecation Process","text":"<ol> <li>Announce deprecation in release notes (MINOR version)</li> <li>Mark as deprecated in code/docs</li> <li>Wait one MAJOR version before removal</li> <li>Remove in next MAJOR version</li> </ol> <p>Example: <pre><code>v1.2.0 - Add new feature\nv1.3.0 - Mark old feature as deprecated (release notes)\nv2.0.0 - Remove old feature\n</code></pre></p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#changelog-requirements","level":2,"title":"Changelog Requirements","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#for-each-release","level":3,"title":"For Each Release","text":"<p>Must include:</p> <ul> <li>Version number and date</li> <li>Type (MAJOR/MINOR/PATCH)</li> <li>Changes grouped by type:</li> <li>Added</li> <li>Changed</li> <li>Deprecated</li> <li>Removed</li> <li>Fixed</li> <li>Security</li> </ul> <p>See: Changelog Maintenance</p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#migration-guides","level":2,"title":"Migration Guides","text":"","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#for-major-releases","level":3,"title":"For MAJOR Releases","text":"<p>Provide migration guide when:</p> <ol> <li>Config format changes</li> <li>CLI flags change</li> <li>Protocol changes</li> </ol> <p>Example: <pre><code>## Migrating from 1.x to 2.0\n\n### Config Changes\n\nOld format:\n```yaml\ntunnel_port: 3000\n</code></pre></p> <p>New format: <pre><code>tunnels:\n  default:\n    port: 3000\n</code></pre> <pre><code>---\n\n## Version Detection\n\n### Check Version\n\n```bash\nsellia version\n# Output: Sellia v0.4.0\n\nsellia-server --version\n# Output: Sellia Server v0.4.0\n</code></pre></p>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#check-for-updates","level":3,"title":"Check for Updates","text":"<pre><code>sellia update --check\n# Output: Current: 1.2.3, Latest: 1.2.4\n</code></pre>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/release-process/versioning/#see-also","level":2,"title":"See Also","text":"<ul> <li>Changelog Maintenance - Maintaining CHANGELOG.md</li> <li>Building Binaries - Cross-compilation</li> <li>Docker Images - Container releases</li> <li>Release Process - Full release workflow</li> </ul>","path":["02 developer","Release process","Versioning Policy"],"tags":[]},{"location":"02-developer/security/","level":1,"title":"Security","text":"<p>Security considerations and best practices for Sellia.</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#overview","level":2,"title":"Overview","text":"<p>This section covers security aspects of Sellia, including authentication, encryption, and secure deployment practices.</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#security-model","level":2,"title":"Security Model","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#threat-model","level":3,"title":"Threat Model","text":"<p>Sellia is designed to protect against:</p> <ul> <li>Unauthorized tunnel creation - API key authentication</li> <li>Tunnel hijacking - Subdomain validation and reservation</li> <li>Data interception - TLS/WSS encryption</li> <li>Abuse - Rate limiting and authentication</li> <li>Information leakage - Secure credential storage</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#security-layers","level":3,"title":"Security Layers","text":"<ol> <li>Transport Security - TLS/WSS for encrypted communication</li> <li>Server Authentication - API key validation</li> <li>Tunnel Authentication - HTTP basic auth per tunnel</li> <li>Access Control - Subdomain reservation and validation</li> <li>Rate Limiting - Abuse prevention</li> </ol>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#authentication","level":2,"title":"Authentication","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#server-authentication","level":3,"title":"Server Authentication","text":"<p>API keys control who can create tunnels:</p> <pre><code># Enable authentication\nsellia-server --require-auth --master-key secure-key\n\n# Or with environment\nexport SELLIA_MASTER_KEY=$(openssl rand -hex 32)\nexport SELLIA_REQUIRE_AUTH=true\n</code></pre> <p>Best Practices: - Generate strong master keys (32+ bytes) - Rotate keys regularly - Store keys securely (environment variables, secrets managers) - Never commit keys to repository - Use different keys for different environments</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#tunnel-authentication","level":3,"title":"Tunnel Authentication","text":"<p>Protect individual tunnels with HTTP basic auth:</p> <pre><code>sellia http 3000 --auth user:password\n</code></pre> <p>Best Practices: - Use strong, unique passwords per tunnel - Rotate credentials periodically - Use password managers for storage - Share credentials securely</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#api-key-storage","level":3,"title":"API Key Storage","text":"<p>Environment Variables (Recommended): <pre><code>export SELLIA_API_KEY=$(openssl rand -hex 32)\n</code></pre></p> <p>Configuration Files: <pre><code># sellia.yml - Use environment variables\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}  # From environment\n</code></pre></p> <p>Never Do: <pre><code># NEVER commit actual keys\napi_key: \"abc123\"  # BAD\n</code></pre></p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#transport-security","level":2,"title":"Transport Security","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#tlswss-encryption","level":3,"title":"TLS/WSS Encryption","text":"<p>Encrypt all traffic with TLS:</p> <pre><code># The server typically runs behind a reverse proxy (Caddy, nginx, Traefik)\n# for HTTPS/WSS termination. The server itself supports HTTP/WebSocket.\n\n# Example with Caddy reverse proxy:\nsellia-server --port 3000 --domain yourdomain.com\n</code></pre> <p>Certificate Setup: - Use valid TLS certificates - Keep certificates up to date - Use strong cipher suites - Enable HSTS</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#certificate-sources","level":3,"title":"Certificate Sources","text":"<p>Cloudflare Origin Certificate (Recommended): - Free for Cloudflare users - 15-year validity - Wildcard certificates</p> <p>Let's Encrypt: - Free, automated certificates - 90-day validity - Auto-renewal with certbot</p> <p>Commercial CA: - Trusted by all clients - Varying costs - Different validation levels</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#input-validation","level":2,"title":"Input Validation","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#subdomain-validation","level":3,"title":"Subdomain Validation","text":"<p>Validate subdomains to prevent injection:</p> <pre><code>def validate_subdomain(subdomain : String) : Bool\n  return false if subdomain.empty?\n  return false if subdomain.size &gt; 63\n  return false unless subdomain.matches?(/^[a-z0-9-]+$/)\n  return false if subdomain.starts_with?('-')\n  return false if subdomain.ends_with?('-')\n  true\nend\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<p>Prevent reservation of system subdomains:</p> <pre><code>RESERVED_SUBDOMAINS = %w[\n  www\n  api\n  admin\n  mail\n  ftp\n  localhost\n  test\n  dev\n  staging\n  production\n]\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#host-header-validation","level":3,"title":"Host Header Validation","text":"<p>Validate Host headers to prevent attacks:</p> <pre><code>def validate_host_header(host : String) : Bool\n  # Check format\n  return false unless host.includes?(@domain)\n\n  # Check for port\n  return false if host.includes?(':') &amp;&amp; !valid_port?(host)\n\n  true\nend\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#rate-limiting","level":2,"title":"Rate Limiting","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#configuration","level":3,"title":"Configuration","text":"<p>Enable rate limiting to prevent abuse:</p> <pre><code># Rate limiting enabled by default\nsellia-server\n\n# Disable (not recommended in production)\nsellia-server --no-rate-limit\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#implementation","level":3,"title":"Implementation","text":"<p>Track requests per client:</p> <pre><code>class RateLimiter\n  REQUESTS_PER_MINUTE = 60\n\n  def allow?(client_ip : String) : Bool\n    # Check request count\n    # Enforce limit\n    # Return true/false\n  end\nend\n</code></pre> <p>Best Practices: - Keep rate limiting enabled in production - Adjust limits based on capacity - Log rate limit violations - Consider per-user limits for authenticated users</p>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#data-security","level":2,"title":"Data Security","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#request-logging","level":3,"title":"Request Logging","text":"<p>Be careful logging sensitive data:</p> <pre><code># Don't log sensitive headers\nSENSITIVE_HEADERS = %w[\n  authorization\n  cookie\n  set-cookie\n  x-api-key\n]\n\ndef sanitize_headers(headers : HTTP::Headers) : HTTP::Headers\n  headers.dup.tap do |h|\n    SENSITIVE_HEADERS.each do |name|\n      h[name] = \"[REDACTED]\" if h[name]?\n    end\n  end\nend\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#password-storage","level":3,"title":"Password Storage","text":"<p>Never log passwords:</p> <pre><code># Bad\nLog.info { \"Tunnel created with auth: #{user}:#{pass}\" }\n\n# Good\nLog.info { \"Tunnel created with auth: #{user}:[REDACTED]\" }\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#inspector-data","level":3,"title":"Inspector Data","text":"<p>Clear sensitive data from inspector:</p> <pre><code># Clear history periodically\nsellia http 3000  # Auto-clear on exit (future)\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#deployment-security","level":2,"title":"Deployment Security","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#firewall-rules","level":3,"title":"Firewall Rules","text":"<p>Restrict access to server:</p> <pre><code># Allow only necessary ports\nufw default deny incoming\nufw default allow outgoing\nufw allow 22/tcp    # SSH\nufw allow 80/tcp    # HTTP\nufw allow 443/tcp   # HTTPS\nufw enable\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#docker-security","level":3,"title":"Docker Security","text":"<pre><code># docker-compose.yml\nservices:\n  sellia-server:\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n    cap_drop:\n      - ALL\n    cap_add:\n      - NET_BIND_SERVICE\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#file-permissions","level":3,"title":"File Permissions","text":"<p>Set appropriate permissions:</p> <pre><code># Configuration files\nchmod 600 sellia.yml\n\n# Certificate directory\nchmod 755 /var/lib/sellia/\nchmod 640 /var/lib/sellia/cert.pem\nchmod 600 /var/lib/sellia/key.pem\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#dependency-security","level":2,"title":"Dependency Security","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#regular-updates","level":3,"title":"Regular Updates","text":"<p>Keep dependencies updated:</p> <pre><code># Update Crystal dependencies\nshards update\n\n# Update Node dependencies\ncd web\nnpm update\nnpm audit fix\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#vulnerability-scanning","level":3,"title":"Vulnerability Scanning","text":"<p>Scan for vulnerabilities:</p> <pre><code># Crystal (manual review)\nshards list\n# Check for known issues\n\n# Node\nnpm audit\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#security-headers","level":2,"title":"Security Headers","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#http-security-headers","level":3,"title":"HTTP Security Headers","text":"<pre><code>def add_security_headers(response : HTTP::Server::Response)\n  response.headers[\"X-Content-Type-Options\"] = \"nosniff\"\n  response.headers[\"X-Frame-Options\"] = \"DENY\"\n  response.headers[\"X-XSS-Protection\"] = \"1; mode=block\"\n  response.headers[\"Strict-Transport-Security\"] = \"max-age=31536000; includeSubDomains\"\n  response.headers[\"Content-Security-Policy\"] = \"default-src 'self'\"\nend\n</code></pre>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#best-practices","level":2,"title":"Best Practices","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#development","level":3,"title":"Development","text":"<ul> <li>Never commit credentials</li> <li>Use environment variables</li> <li>Enable debug logging only in development</li> <li>Test with authentication enabled</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#staging","level":3,"title":"Staging","text":"<ul> <li>Mirror production security settings</li> <li>Use separate API keys</li> <li>Test certificate renewal</li> <li>Monitor rate limiting</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#production","level":3,"title":"Production","text":"<ul> <li>Always require authentication</li> <li>Use strong master keys</li> <li>Enable rate limiting</li> <li>Use HTTPS/WSS</li> <li>Monitor logs for suspicious activity</li> <li>Regular security audits</li> <li>Keep dependencies updated</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#incident-response","level":2,"title":"Incident Response","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#security-incident-process","level":3,"title":"Security Incident Process","text":"<ol> <li>Identify - Detect security issue</li> <li>Contain - Limit impact</li> <li>Eradicate - Remove threat</li> <li>Recover - Restore service</li> <li>Post-Mortem - Document and improve</li> </ol>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#reporting-vulnerabilities","level":3,"title":"Reporting Vulnerabilities","text":"<p>If you discover a security vulnerability:</p> <ol> <li>Do not create public issue</li> <li>Email privately: chris@watzon.tech</li> <li>Include details:</li> <li>Vulnerability description</li> <li>Steps to reproduce</li> <li>Impact assessment</li> <li> <p>Suggested fix</p> </li> <li> <p>Response timeline:</p> </li> <li>Acknowledgment within 48 hours</li> <li>Fix timeline discussion</li> <li>Coordinated disclosure</li> </ol>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#security-checklist","level":2,"title":"Security Checklist","text":"","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#before-deployment","level":3,"title":"Before Deployment","text":"<ul> <li> Strong master key generated</li> <li> Authentication required</li> <li> TLS certificates installed</li> <li> Firewall rules configured</li> <li> Rate limiting enabled</li> <li> Secrets not in repository</li> <li> Dependencies updated</li> <li> Logging configured</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#ongoing","level":3,"title":"Ongoing","text":"<ul> <li> Monitor logs for suspicious activity</li> <li> Regular dependency updates</li> <li> Certificate expiration monitoring</li> <li> Security audit periodic</li> <li> Access review</li> <li> Backup verification</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Deployment - Secure deployment guide</li> <li>Authentication - Authentication setup</li> <li>Contributing - Secure development practices</li> </ul>","path":["02 developer","Security"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/","level":1,"title":"Vulnerability Disclosure","text":"<p>This document outlines the security vulnerability disclosure process for Sellia.</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Security Policy</li> <li>Supported Versions</li> <li>Reporting a Vulnerability</li> <li>What to Include</li> <li>What Happens Next</li> <li>Security Best Practices</li> <li>Security Features</li> <li>Known Limitations</li> </ul>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#security-policy","level":2,"title":"Security Policy","text":"<p>We take security vulnerabilities seriously and appreciate your efforts to responsibly disclose them.</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#reporting-security-issues","level":3,"title":"Reporting Security Issues","text":"<p>DO NOT report security vulnerabilities through public GitHub issues.</p> <p>Public disclosure of security vulnerabilities before they are fixed puts all users at risk. Instead, please report vulnerabilities privately via email.</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#supported-versions","level":2,"title":"Supported Versions","text":"<p>Security updates are provided for the following versions:</p> Version Status Security Support 0.4.x Current Release  Yes 0.3.x Previous  Yes 0.2.x End of Life  No <p>Note: Sellia is currently in pre-1.0 development. API and features may change. Once 1.0 is released, we'll follow semantic versioning and provide clear support timelines.</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#reporting-a-vulnerability","level":2,"title":"Reporting a Vulnerability","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#how-to-report","level":3,"title":"How to Report","text":"<p>Email your report to:</p> <p>chris@watzon.tech</p> <p>Please include [SECURITY] in the subject line to ensure your report gets immediate attention.</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#pgp-key-optional","level":3,"title":"PGP Key (Optional)","text":"<p>For sensitive communications, you can encrypt your report using PGP:</p> <pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\n[PGP key would be here - add if you maintain one]\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#what-to-expect","level":3,"title":"What to Expect","text":"<ol> <li>Acknowledgment (within 48 hours)</li> <li>We'll confirm receipt of your report</li> <li> <p>May ask clarifying questions</p> </li> <li> <p>Initial Assessment (within 1 week)</p> </li> <li>We'll verify and classify the vulnerability</li> <li>Determine severity level</li> <li> <p>Estimate remediation time</p> </li> <li> <p>Resolution Timeline</p> </li> <li>Critical: 7 days</li> <li>High: 30 days</li> <li>Medium: 60 days</li> <li>Low: 90 days</li> </ol> <p>We'll keep you informed throughout the process and may ask for additional information or verification.</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#what-to-include","level":2,"title":"What to Include","text":"<p>Your vulnerability report should include:</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#1-vulnerability-type","level":3,"title":"1. Vulnerability Type","text":"<p>Classify the vulnerability:</p> <p>Common Types: - Buffer Overflow - Memory corruption issues - Injection - SQL, command, code injection - XSS (Cross-Site Scripting) - Reflected or stored - CSRF (Cross-Site Request Forgery) - Authentication/Authorization - Bypass, weak auth - Information Disclosure - Sensitive data exposure - Denial of Service - Resource exhaustion - Cryptography - Weak algorithms, implementation flaws - Insecure Deserialization - Object injection - SSRF (Server-Side Request Forgery) - Path Traversal - Directory traversal</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#2-affected-versions","level":3,"title":"2. Affected Versions","text":"<p>Which versions are affected:</p> <pre><code>**Affected Versions:**\n- All versions &lt;= 0.4.0\n- Confirmed on: 0.4.0\n- Fixed in: 0.4.1 (upcoming)\n\n**Environment:**\n- OS: [e.g., Linux, macOS]\n- Crystal: [e.g., 1.18.0]\n- Deployed: [Docker, binary, source]\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#3-impact-assessment","level":3,"title":"3. Impact Assessment","text":"<p>Describe the potential impact:</p> <pre><code>**Impact:**\n- Attackers can [what they can do]\n- Requires [authentication, user interaction, etc.]\n- Affects [all users / specific configurations]\n\n**Severity:** [Critical / High / Medium / Low]\n\n**Business Impact:**\n- Data exposure: [What data]\n- System compromise: [To what extent]\n- Lateral movement: [Can it spread]\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#4-reproduction-steps","level":3,"title":"4. Reproduction Steps","text":"<p>Provide step-by-step reproduction:</p> <pre><code>**Reproduction Steps:**\n\n1. Start server with configuration:\n   ```bash\n   ./bin/sellia-server --port 3000 --domain example.com\n   ```\n\n2. Create tunnel:\n   ```bash\n   ./bin/sellia http 8080 --server http://localhost:3000\n   ```\n\n3. Send malicious request:\n   ```bash\n   curl -X POST http://tunnel.example.com \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"malicious\":\"payload\"}'\n   ```\n\n4. Observe: [Describe what happens]\n\n**Expected Behavior:** [What should happen]\n**Actual Behavior:** [What actually happens]\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#5-proof-of-concept","level":3,"title":"5. Proof of Concept","text":"<p>Include exploit code or detailed steps:</p> <pre><code>**Proof of Concept:**\n\n```bash\n# Exploit script\n#!/bin/bash\nTARGET=\"http://victim.example.com\"\ncurl -X POST \"$TARGET\" -d \"$(python3 -c 'print(\"A\"*1000)')\"\n</code></pre> <p>Result: Server crashes with segfault <pre><code>**Important:** Only include safe, minimal proof-of-concept code. Don't include destructive payloads or data from actual systems.\n\n### 6. Suggested Fix (Optional)\n\nIf you have a suggested fix:\n\n```markdown\n**Suggested Fix:**\n\nThe vulnerability occurs in `src/server/http_ingress.cr:42` where\nuser input is not validated before processing. Suggested fix:\n\n```crystal\n# Before (vulnerable)\nheaders[key] = value\n\n# After (fixed)\nif value.size &lt; MAX_HEADER_SIZE\n  headers[key] = value\nelse\n  raise HeaderTooLargeError.new\nend\n</code></pre> <pre><code>### 7. Additional Context\n\nAny other relevant information:\n\n```markdown\n**Additional Context:**\n\n- This was discovered during [penetration testing / code review / etc.]\n- Similar issue: [link to CVE if applicable]\n- References: [OWASP, CWE, etc.]\n- Affected configurations: [specific setups only]\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#what-happens-next","level":2,"title":"What Happens Next","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#1-validation","level":3,"title":"1. Validation","text":"<p>We'll validate the vulnerability: - Reproduce the issue - Confirm impact - Classify severity - Check other affected versions</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#2-remediation","level":3,"title":"2. Remediation","text":"<p>We'll develop a fix: - Create patch - Test thoroughly - Ensure no regressions - Add tests to prevent recurrence</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#3-coordinated-disclosure","level":3,"title":"3. Coordinated Disclosure","text":"<p>We follow responsible disclosure:</p> <p>Timeline: - Fix the vulnerability - Prepare security advisory - Coordinate release with maintainers - Publish disclosure simultaneously with fix</p> <p>Credit: - We'll credit you in the release notes - Unless you prefer to remain anonymous - Specify your preference when reporting</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#4-public-disclosure","level":3,"title":"4. Public Disclosure","text":"<p>After fix is deployed:</p> <ul> <li>Security Advisory: Published on GitHub</li> <li>Release Notes: Include vulnerability details</li> <li>CVE Assignment: We'll request a CVE if applicable</li> <li>Credit: Thank contributors publicly</li> </ul>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#for-self-hosted-deployments","level":3,"title":"For Self-Hosted Deployments","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#network-security","level":4,"title":"Network Security","text":"<p>Use HTTPS: <pre><code># Place Sellia behind a reverse proxy with TLS\n# Example nginx config:\nserver {\n    listen 443 ssl;\n    server_name tunnels.example.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n</code></pre></p> <p>Firewall Configuration: <pre><code># Restrict access to server port\nsudo ufw allow 443/tcp  # HTTPS only\nsudo ufw deny 3000/tcp  # Block direct server access\n\n# Or restrict to specific IPs\nsudo ufw allow from 192.168.1.0/24 to any port 3000\n</code></pre></p> <p>Rate Limiting: <pre><code># Keep rate limiting enabled (default)\n./bin/sellia-server --port 3000\n\n# Only disable for development testing\n./bin/sellia-server --port 3000 --no-rate-limit  # DON'T use in production\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#authentication","level":4,"title":"Authentication","text":"<p>Use API Keys: <pre><code># Generate secure random key\nMASTER_KEY=$(openssl rand -hex 32)\n\n# Start server with authentication\n./bin/sellia-server \\\n  --port 3000 \\\n  --require-auth \\\n  --master-key $MASTER_KEY\n</code></pre></p> <p>Or use environment variables: <pre><code># .env file (don't commit this!)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\n</code></pre></p> <p>Rotate Keys Regularly: <pre><code># Generate new key\nNEW_KEY=$(openssl rand -hex 32)\n\n# Restart server with new key\n./bin/sellia-server --master-key $NEW_KEY\n\n# Update all clients with new key\n./bin/sellia http 3000 --api-key $NEW_KEY\n</code></pre></p> <p>Secure Key Storage: - Use <code>.env</code> files (in <code>.gitignore</code>) - Use secrets management (HashiCorp Vault, AWS Secrets Manager) - Never commit keys to git - Use different keys for dev/staging/prod</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#subdomain-security","level":4,"title":"Subdomain Security","text":"<p>Reserved Subdomains: <pre><code># The following subdomains are blocked by default:\n- api, www, admin, administrator, root, etc.\n- You can add custom reserved subdomains in config\n</code></pre></p> <p>Subdomain Validation: - Subdomains must follow DNS label rules - Max length: 63 characters - Allowed characters: alphanumeric and hyphens - No consecutive hyphens - No leading/trailing hyphens</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#monitoring","level":4,"title":"Monitoring","text":"<p>Enable Debug Logging: <pre><code># For security monitoring\nLOG_LEVEL=debug ./bin/sellia-server --port 3000\n</code></pre></p> <p>Monitor for Suspicious Activity: - Unusual connection patterns - Requests from unknown IPs - High request volumes - Failed authentication attempts - Unexpected subdomain access</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#database-security-sqlite","level":4,"title":"Database Security (SQLite)","text":"<p>File Permissions: <pre><code># Restrict database file access\nchmod 600 sellia.db\nchown app_user:app_group sellia.db\n</code></pre></p> <p>Regular Backups: <pre><code># Backup SQLite database\ncp sellia.db sellia.db.backup.$(date +%Y%m%d)\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#security-features","level":2,"title":"Security Features","text":"<p>Sellia includes several built-in security features:</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Token Bucket Algorithm: - Connections: 10 per second per IP - Tunnels: 5 per minute per IP - Requests: 100 per second per tunnel</p> <pre><code># Configuration\nrate_limits:\n  connections: 10/sec\n  tunnels: 5/min\n  requests: 100/sec\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#subdomain-validation","level":3,"title":"Subdomain Validation","text":"<p>DNS Label Compliance: <pre><code># Validation rules\n- Max 63 characters\n- Alphanumeric + hyphens only\n- No consecutive hyphens\n- No leading/trailing hyphens\n- Reserved name blocklist\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#input-validation","level":3,"title":"Input Validation","text":"<p>Request Size Limits: <pre><code># Maximum sizes\n- Request headers: 8KB\n- Request body: 10MB (configurable)\n- Response headers: 8KB\n- Response body: No limit (streaming)\n</code></pre></p> <p>Header Validation: <pre><code># Invalid headers rejected\n- Headers with newlines\n- Headers &gt; 8KB\n- Missing required headers\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#connection-timeouts","level":3,"title":"Connection Timeouts","text":"<p>WebSocket Heartbeat: <pre><code># Detects stale connections\nping_interval: 30s\nping_timeout: 10s\nmax_missed_pings: 3\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#graceful-degradation","level":3,"title":"Graceful Degradation","text":"<p>Client Disconnect Handling: <pre><code># Pending requests cleaned up\non_disconnect:\n  - Cancel pending requests\n  - Return 502 to clients\n  - Cleanup resources\n</code></pre></p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#known-limitations","level":2,"title":"Known Limitations","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#current-security-considerations","level":3,"title":"Current Security Considerations","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#basic-auth-over-http","level":4,"title":"Basic Auth Over HTTP","text":"<pre><code>**Issue:** Basic auth credentials are transmitted in base64\n\n**Risk:** Credentials can be decoded if intercepted\n\n**Mitigation:** Always use HTTPS in production\n- Place Sellia behind reverse proxy with TLS\n- Use Cloudflare Origin Certificates\n- Or use Let's Encrypt\n\n**Status:** Will be addressed in future release\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#in-memory-state","level":4,"title":"In-Memory State","text":"<pre><code>**Issue:** State is in-memory, lost on restart\n\n**Impact:**\n- API keys: Now persisted to SQLite (fixed in 0.2.0)\n- Reserved subdomains: Now persisted to SQLite (fixed in 0.2.0)\n- Active tunnels: Lost on restart (by design)\n\n**Mitigation:** Use SQLite storage for persistent data\n\n**Status:** Partially addressed\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#no-built-in-tls","level":4,"title":"No Built-in TLS","text":"<pre><code>**Issue:** Sellia doesn't include TLS termination\n\n**Risk:** Unencrypted traffic between client and server\n\n**Mitigation:**\n- Use reverse proxy (nginx, Caddy, Traefik)\n- Enable TLS at proxy level\n- Use Cloudflare for TLS\n\n**Status:** By design - flexibility for deployment\n</code></pre>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#responsible-disclosure-policy","level":2,"title":"Responsible Disclosure Policy","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#our-commitment","level":3,"title":"Our Commitment","text":"<p>We promise to:</p> <ol> <li>Respond promptly to security reports</li> <li>Keep you informed throughout the process</li> <li>Credit contributors (unless anonymity requested)</li> <li>Coordinate disclosure to protect users</li> <li>Fix issues before public disclosure</li> </ol>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#we-ask-you-to","level":3,"title":"We Ask You To","text":"<ol> <li>Report responsibly - Don't disclose publicly before fix</li> <li>Provide details - Help us understand and reproduce</li> <li>Give us time - Allow reasonable time for fix</li> <li>Follow good faith - Don't exploit vulnerabilities</li> </ol>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#disclosure-timeline","level":3,"title":"Disclosure Timeline","text":"<p>Ideal Timeline: - Day 0: Vulnerability reported - Day 2: Acknowledgment and validation - Day 7: Fix developed and tested - Day 14: Coordinated disclosure and release</p> <p>Extended Timeline: For complex vulnerabilities, timeline may be extended: - We'll inform you of delays - You'll have opportunity to comment on advisory - Disclosure coordinated with all parties</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#security-announcements","level":2,"title":"Security Announcements","text":"<p>Stay informed about security updates:</p> <ul> <li>GitHub Releases: Watch watzon/sellia</li> <li>Security Advisories: Check GitHub Security Advisories</li> <li>CHANGELOG: Review changelog for security fixes</li> </ul>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#security-contacts","level":2,"title":"Security Contacts","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#for-vulnerability-reports","level":3,"title":"For Vulnerability Reports","text":"<p>Primary: chris@watzon.tech Subject: [SECURITY] Vulnerability Report</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#for-security-questions","level":3,"title":"For Security Questions","text":"<p>GitHub Issues: Use <code>security</code> label Discussions: Ask in GitHub Discussions</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#for-emergencies","level":3,"title":"For Emergencies","text":"<p>If you believe a vulnerability is being actively exploited:</p> <p>Subject: [URGENT] Active Exploitation - Provide immediate details - Include evidence of exploitation - We'll respond as soon as possible</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#resources","level":2,"title":"Resources","text":"","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#security-references","level":3,"title":"Security References","text":"<ul> <li>OWASP Top 10</li> <li>CWE Top 25</li> <li>Crystal Security Guide</li> </ul>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#related-tools","level":3,"title":"Related Tools","text":"<ul> <li>OpenSSL - TLS/SSL</li> <li>Let's Encrypt - Free certificates</li> <li>Cloudflare SSL - Origin certificates</li> </ul>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#acknowledgments","level":2,"title":"Acknowledgments","text":"<p>We thank all security researchers who have responsibly disclosed vulnerabilities to help make Sellia more secure.</p> <p>Recent Contributors: - (List will be updated as vulnerabilities are reported)</p>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/security/vulnerability-disclosure/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Development Setup - Start contributing</li> <li>Testing - Test security features</li> <li>Deployment - Secure deployment guide</li> </ul>","path":["02 developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"02-developer/server-components/","level":1,"title":"Server Components","text":"<p>Server-side implementation details for Sellia.</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#overview","level":2,"title":"Overview","text":"<p>The Sellia server (<code>sellia-server</code>) is responsible for managing tunnel connections, routing HTTP requests, and handling authentication. This section covers the server architecture and key components.</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#architecture","level":2,"title":"Architecture","text":"<pre><code>External HTTP Request\n         ↓\n    HTTP Ingress\n         ↓\n  Tunnel Registry Lookup\n         ↓\n    WebSocket Gateway\n         ↓\n   Tunnel Client (WebSocket)\n         ↓\n    Local Service\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#key-components","level":2,"title":"Key Components","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#http-ingress","level":3,"title":"HTTP Ingress","text":"<p>Location: <code>src/server/http_ingress.cr</code></p> <p>Receives external HTTP requests and routes them to appropriate tunnels.</p> <pre><code>class Sellia::Server::HTTPIngress\n  def initialize(\n    @tunnel_registry : TunnelRegistry,\n    @connection_manager : ConnectionManager,\n    @pending_requests : PendingRequestStore,\n    @pending_websockets : PendingWebSocketStore,\n    @rate_limiter : CompositeRateLimiter,\n    @domain : String = \"localhost\",\n    @request_timeout : Time::Span = 30.seconds,\n    @landing_enabled : Bool = true,\n  )\n  end\n\n  def handle(context : HTTP::Server::Context)\n    # Extract subdomain from request\n    subdomain = extract_subdomain(host)\n\n    # Look up tunnel\n    tunnel = @tunnel_registry.find_by_subdomain(subdomain)\n    return context.response.status_code = 404 unless tunnel\n\n    # Forward request through WebSocket\n    proxy_request(context, client, tunnel)\n  end\nend\n</code></pre> <p>Responsibilities: - Parse incoming HTTP requests - Extract subdomain from Host header - Validate tunnel exists - Check basic auth if configured - Enforce rate limits - Forward requests through WebSocket tunnel - Proxy WebSocket connections - Return responses to client</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#tunnel-registry","level":3,"title":"Tunnel Registry","text":"<p>Location: <code>src/server/tunnel_registry.cr</code></p> <p>Maintains registry of active tunnels and their mappings.</p> <pre><code>class Sellia::Server::TunnelRegistry\n  struct Tunnel\n    property id : String\n    property subdomain : String\n    property client_id : String\n    property created_at : Time\n    property auth : String?\n  end\n\n  def initialize(@reserved_subdomains : Set(String) = Set(String).new)\n    @tunnels = {} of String =&gt; Tunnel          # id -&gt; tunnel\n    @by_subdomain = {} of String =&gt; Tunnel     # subdomain -&gt; tunnel\n    @by_client = {} of String =&gt; Array(Tunnel) # client_id -&gt; tunnels\n    @mutex = Mutex.new\n  end\n\n  def register(tunnel : Tunnel) : Nil\n    @mutex.synchronize do\n      @tunnels[tunnel.id] = tunnel\n      @by_subdomain[tunnel.subdomain] = tunnel\n      @by_client[tunnel.client_id] ||= [] of Tunnel\n      @by_client[tunnel.client_id] &lt;&lt; tunnel\n    end\n  end\n\n  def find_by_subdomain(subdomain : String) : Tunnel?\n    @mutex.synchronize { @by_subdomain[subdomain]? }\n  end\n\n  def unregister(tunnel_id : String) : Tunnel?\n    # Removes from all indices\n  end\nend\n</code></pre> <p>Responsibilities: - Store active tunnels with multiple indices (by id, subdomain, client) - Map subdomains to tunnel clients - Validate subdomain availability and format - Generate random subdomains - Handle tunnel lifecycle</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#websocket-gateway","level":3,"title":"WebSocket Gateway","text":"<p>Location: <code>src/server/ws_gateway.cr</code></p> <p>Manages WebSocket connections from tunnel clients.</p> <pre><code>class Sellia::Server::WSGateway\n  def initialize(\n    @connection_manager : ConnectionManager,\n    @tunnel_registry : TunnelRegistry,\n    @auth_provider : AuthProvider,\n    @pending_requests : PendingRequestStore,\n    @pending_websockets : PendingWebSocketStore,\n    @rate_limiter : CompositeRateLimiter,\n    @domain : String = \"localhost\",\n    @port : Int32 = 3000,\n    @use_https : Bool = false,\n  )\n  end\n\n  def handle(socket : HTTP::WebSocket)\n    client = ClientConnection.new(socket)\n    @connection_manager.add_connection(client)\n\n    client.on_message do |message|\n      handle_message(client, message)\n    end\n\n    client.on_close do\n      handle_disconnect(client)\n    end\n\n    client.run\n  end\nend\n</code></pre> <p>Responsibilities: - Accept WebSocket connections from tunnel clients - Authenticate clients using API keys - Register and manage tunnels - Forward HTTP requests to tunnel clients - Forward WebSocket frames to tunnel clients - Handle keep-alive (ping/pong) with 30s interval - Detect and clean up stale connections (60s timeout) - Handle disconnections and cleanup</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#authentication","level":3,"title":"Authentication","text":"<p>Location: <code>src/server/auth_provider.cr</code></p> <p>Handles API key authentication with three modes.</p> <pre><code>class Sellia::Server::AuthProvider\n  property require_auth : Bool\n  property master_key : String?\n  property use_database : Bool\n\n  def initialize(@require_auth : Bool = false, @master_key : String? = nil, @use_database : Bool = false)\n  end\n\n  def validate(api_key : String) : Bool\n    return true unless @require_auth\n    return false if api_key.empty?\n\n    # Check database first if enabled\n    if @use_database &amp;&amp; Storage::Database.instance?\n      if found = Storage::Repositories::ApiKeys.validate(api_key)\n        return true\n      end\n    end\n\n    # Fallback to master key\n    if master = @master_key\n      api_key == master\n    else\n      true\n    end\n  end\n\n  def account_id_for(api_key : String) : String\n    # Returns account ID from database or SHA256 hash\n  end\nend\n</code></pre> <p>Responsibilities: - Validate API keys - Support three modes: no auth, master key, database - Provide account identifiers for rate limiting - Track API key usage in database mode</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#rate-limiter","level":3,"title":"Rate Limiter","text":"<p>Location: <code>src/server/rate_limiter.cr</code></p> <p>Prevents abuse through token bucket rate limiting.</p> <pre><code>class Sellia::Server::RateLimiter\n  struct Config\n    property max_tokens : Float64\n    property refill_rate : Float64\n    property window : Time::Span\n  end\n\n  def allow?(key : String, cost : Float64 = 1.0) : Bool\n    # Token bucket algorithm\n  end\n\n  def remaining(key : String) : Float64\n    # Get remaining tokens\n  end\nend\n\nclass Sellia::Server::CompositeRateLimiter\n  def allow_connection?(ip : String) : Bool\n  end\n\n  def allow_tunnel?(client_id : String) : Bool\n  end\n\n  def allow_request?(tunnel_id : String) : Bool\n  end\nend\n</code></pre> <p>Responsibilities: - Track connection rate per IP - Track tunnel creation rate per client - Track request rate per tunnel - Use token bucket algorithm for smooth rate limiting - Auto-cleanup stale entries with 1-hour window</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#middleware","level":2,"title":"Middleware","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#connection-manager","level":3,"title":"Connection Manager","text":"<p>Location: <code>src/server/connection_manager.cr</code></p> <p>Manages active WebSocket client connections.</p> <pre><code>class Sellia::Server::ConnectionManager\n  def add_connection(client : ClientConnection)\n  end\n\n  def find(client_id : String) : ClientConnection?\n  end\n\n  def unregister(client_id : String)\n  end\n\n  def each\n    # Yields each connected client\n  end\nend\n</code></pre> <p>Responsibilities: - Track active client connections - Provide lookup by client ID - Support iteration for health checks</p>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#message-handling","level":2,"title":"Message Handling","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#incoming-messages-from-tunnel-clients","level":3,"title":"Incoming Messages from Tunnel Clients","text":"<pre><code>private def handle_message(client : ClientConnection, message : Protocol::Message)\n  case message\n  when Protocol::Messages::Auth\n    handle_auth(client, message)\n  when Protocol::Messages::TunnelOpen\n    handle_tunnel_open(client, message)\n  when Protocol::Messages::TunnelClose\n    handle_tunnel_close(client, message)\n  when Protocol::Messages::ResponseStart\n    handle_response_start(client, message)\n  when Protocol::Messages::ResponseBody\n    handle_response_body(client, message)\n  when Protocol::Messages::ResponseEnd\n    handle_response_end(client, message)\n  when Protocol::Messages::Ping\n    client.send(Protocol::Messages::Pong.new(message.timestamp))\n  when Protocol::Messages::WebSocketUpgradeOk\n    handle_ws_upgrade_ok(client, message)\n  when Protocol::Messages::WebSocketUpgradeError\n    handle_ws_upgrade_error(client, message)\n  when Protocol::Messages::WebSocketFrame\n    handle_ws_frame(client, message)\n  when Protocol::Messages::WebSocketClose\n    handle_ws_close(client, message)\n  end\nend\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#outgoing-messages-to-tunnel-clients","level":3,"title":"Outgoing Messages to Tunnel Clients","text":"<pre><code># Forward HTTP request\nclient.send(Protocol::Messages::RequestStart.new(\n  request_id: request_id,\n  tunnel_id: tunnel.id,\n  method: context.request.method,\n  path: context.request.resource,\n  headers: headers\n))\n\n# Forward WebSocket upgrade\nclient.send(Protocol::Messages::WebSocketUpgrade.new(\n  request_id: request_id,\n  tunnel_id: tunnel.id,\n  path: context.request.resource,\n  headers: headers\n))\n\n# Forward WebSocket frame\nclient.send(Protocol::Messages::WebSocketFrame.new(\n  request_id: request_id,\n  opcode: opcode,\n  payload: payload\n))\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#configuration","level":2,"title":"Configuration","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#server-configuration","level":3,"title":"Server Configuration","text":"<p>Server configuration is typically loaded from environment variables.</p> <pre><code># Example environment variables:\n# SELLIA_DOMAIN=sellia.dev\n# SELLIA_PORT=3000\n# SELLIA_MASTER_KEY=sk_master_...\n# SELLIA_REQUIRE_AUTH=true\n# SELLIA_USE_HTTPS=true\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#server-lifecycle","level":2,"title":"Server Lifecycle","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#initialization","level":3,"title":"Initialization","text":"<pre><code># Create shared components\nconnection_manager = ConnectionManager.new\ntunnel_registry = TunnelRegistry.new(reserved_subdomains)\nauth_provider = AuthProvider.new(use_database: true)\npending_requests = PendingRequestStore.new\npending_websockets = PendingWebSocketStore.new\nrate_limiter = CompositeRateLimiter.new\n\n# Create main components\nws_gateway = WSGateway.new(\n  connection_manager: connection_manager,\n  tunnel_registry: tunnel_registry,\n  auth_provider: auth_provider,\n  pending_requests: pending_requests,\n  pending_websockets: pending_websockets,\n  rate_limiter: rate_limiter,\n  domain: \"sellia.dev\",\n  port: 3000\n)\n\nhttp_ingress = HTTPIngress.new(\n  tunnel_registry: tunnel_registry,\n  connection_manager: connection_manager,\n  pending_requests: pending_requests,\n  pending_websockets: pending_websockets,\n  rate_limiter: rate_limiter,\n  domain: \"sellia.dev\",\n  request_timeout: 30.seconds\n)\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#starting-the-server","level":3,"title":"Starting the Server","text":"<pre><code>server = HTTP::Server.new(\"0.0.0.0\", 3000) do |context|\n  http_ingress.handle(context)\nend\n\n# Add WebSocket handler at /ws path\nws_handler = HTTP::WebSocketHandler.new do |socket, context|\n  ws_gateway.handle(socket)\nend\n\nserver.bind_tcp(\"0.0.0.0\", 3000)\nserver.listen\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#testing","level":2,"title":"Testing","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#unit-tests","level":3,"title":"Unit Tests","text":"<p>Location: <code>spec/server/</code></p> <p>Tests should verify individual component behavior:</p> <pre><code>describe Sellia::Server::TunnelRegistry do\n  it \"registers a tunnel\" do\n    registry = TunnelRegistry.new\n    tunnel = TunnelRegistry::Tunnel.new(\n      id: \"test123\",\n      subdomain: \"myapp\",\n      client_id: \"client1\"\n    )\n\n    registry.register(tunnel)\n    registry.find_by_id(\"test123\").should eq tunnel\n  end\n\n  it \"validates subdomains\" do\n    registry = TunnelRegistry.new\n\n    result = registry.validate_subdomain(\"ab\")\n    result.valid.should be_false\n\n    result = registry.validate_subdomain(\"myapp\")\n    result.valid.should be_true\n  end\nend\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#memory","level":3,"title":"Memory","text":"<ul> <li>Per tunnel: ~200 bytes</li> <li>Per client: ~1 KB</li> <li>Rate limiting: ~100 bytes per tracked key</li> <li>Pending requests: ~1 KB each</li> <li>WebSocket connections: ~2 KB each</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each connection runs in its own fiber</li> <li>All shared state protected by mutexes</li> <li>Lock contention is minimal (fast operations)</li> <li>No long-running critical sections</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#scalability","level":3,"title":"Scalability","text":"<ul> <li>Fiber-based concurrency handles thousands of connections</li> <li>Token bucket rate limiting prevents resource exhaustion</li> <li>Automatic cleanup of stale state (1-hour window)</li> <li>O(1) lookups for all critical operations</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#security","level":2,"title":"Security","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#input-validation","level":3,"title":"Input Validation","text":"<pre><code># Subdomain validation (handled by TunnelRegistry)\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # Length: 3-63 characters\n  # Characters: alphanumeric and hyphens\n  # Pattern: cannot start/end with hyphen\n  # No consecutive hyphens\n  # Not in reserved set\n  # Not already in use\nend\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#authentication_1","level":3,"title":"Authentication","text":"<ul> <li>Three modes: no auth (dev), master key (simple), database (production)</li> <li>API keys validated against SHA256 hashes</li> <li>Database mode tracks usage and supports revocation</li> <li>Master key fallback supported</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#rate-limiting","level":3,"title":"Rate Limiting","text":"<ul> <li>Connection rate: per IP (10 burst, 1/s)</li> <li>Tunnel creation: per client (5 burst, 1/10s)</li> <li>Request rate: per tunnel (100 burst, 50/s)</li> <li>Token bucket algorithm for smooth limiting</li> <li>Automatic cleanup after 1 hour</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#tlsssl","level":3,"title":"TLS/SSL","text":"<ul> <li>HTTPS support via reverse proxy (use_https flag)</li> <li>On-demand TLS verification endpoint at <code>/tunnel/verify</code></li> <li>Compatible with Caddy automatic TLS</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#debugging","level":2,"title":"Debugging","text":"","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#logging","level":3,"title":"Logging","text":"<pre><code>Log.setup(:debug)\n\nLog.debug { \"Registering tunnel: #{subdomain}\" }\nLog.info { \"Tunnel registered: #{subdomain}\" }\nLog.warn { \"Rate limit exceeded: #{client_ip}\" }\nLog.error { \"WebSocket error: #{error}\" }\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#monitoring","level":3,"title":"Monitoring","text":"<pre><code># Track metrics\nstruct Metrics\n  property requests_total = 0\n  property requests_active = 0\n  property tunnels_active = 0\nend\n\n@metrics = Metrics.new\n</code></pre>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"02-developer/server-components/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>CLI Components - Client-side implementation</li> <li>Project Structure - Code organization</li> <li>Development - Development setup</li> </ul>","path":["02 developer","Server components","Server Components"],"tags":[]},{"location":"03-appendices/","level":1,"title":"Appendices","text":"<p>Additional reference material for Sellia.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#overview","level":2,"title":"Overview","text":"<p>This section contains supplementary information, reference tables, and resources that don't fit in the main documentation sections.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#appendices_1","level":2,"title":"Appendices","text":"","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#glossary","level":3,"title":"Glossary","text":"<p>Terms and definitions used throughout the Sellia documentation.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#protocol-specification","level":3,"title":"Protocol Specification","text":"<p>Detailed specification of the Sellia protocol over WebSocket.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#configuration-reference","level":3,"title":"Configuration Reference","text":"<p>Complete reference for all configuration options.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#error-codes","level":3,"title":"Error Codes","text":"<p>List of error codes and their meanings.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#environment-variables","level":3,"title":"Environment Variables","text":"<p>Complete list of supported environment variables.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#resources","level":2,"title":"Resources","text":"","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#official-resources","level":3,"title":"Official Resources","text":"<ul> <li>Website: sellia.me</li> <li>GitHub: github.com/watzon/sellia</li> <li>Documentation: docs.sellia.me (coming soon)</li> <li>Issues: github.com/watzon/sellia/issues</li> </ul>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#community","level":3,"title":"Community","text":"<ul> <li>Discussions: github.com/watzon/sellia/discussions</li> <li>Discord: (coming soon)</li> </ul>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#related-projects","level":3,"title":"Related Projects","text":"<ul> <li>Crystal Language: crystal-lang.org</li> <li>MessagePack: msgpack.org</li> <li>WebSocket: websockets.spec</li> </ul>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#legal","level":2,"title":"Legal","text":"","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#license","level":3,"title":"License","text":"<p>Sellia is released under the MIT License. See LICENSE for details.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#third-party-licenses","level":3,"title":"Third-Party Licenses","text":"<p>Sellia uses the following third-party libraries:</p> <ul> <li>Crystal - Apache 2.0</li> <li>MessagePack-Crystal - MIT</li> <li>WebSocket-Crystal - MIT</li> <li>React - MIT</li> <li>Vite - MIT</li> </ul> <p>See <code>shard.yml</code> and <code>web/package.json</code> for complete list.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#trademarks","level":3,"title":"Trademarks","text":"<p>Sellia is a trademark of Chris Watson. Other product and company names mentioned herein may be the trademarks of their respective owners.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#support","level":2,"title":"Support","text":"","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#getting-help","level":3,"title":"Getting Help","text":"<p>If you need help with Sellia:</p> <ol> <li>Documentation - Start with the user guide</li> <li>Issues - Search existing issues on GitHub</li> <li>Discussions - Ask questions in GitHub Discussions</li> <li>New Issue - Create a new issue if you found a bug</li> </ol>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#professional-support","level":3,"title":"Professional Support","text":"<p>Professional support options are coming soon.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#contributing","level":2,"title":"Contributing","text":"<p>Want to contribute? See:</p> <ul> <li>Contributing Guide</li> <li>Development Setup</li> <li>Architecture</li> </ul>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#version-history","level":2,"title":"Version History","text":"<p>See CHANGELOG.md for version history.</p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#quick-reference","level":2,"title":"Quick Reference","text":"","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#common-commands","level":3,"title":"Common Commands","text":"<p>Tunnel: <pre><code>sellia http 3000 --subdomain myapp\n</code></pre></p> <p>With auth: <pre><code>sellia http 3000 --auth user:pass\n</code></pre></p> <p>Start from config: <pre><code>sellia start\n</code></pre></p>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#common-ports","level":3,"title":"Common Ports","text":"Port Usage 3000 Default local port for forwarding 4040 Default inspector port 5173 Vite dev server (development)","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#file-locations","level":3,"title":"File Locations","text":"File Location Config <code>~/.config/sellia/sellia.yml</code>, <code>~/.sellia.yml</code>, or <code>./sellia.yml</code> Database Platform-dependent (see Defaults) Binary <code>sellia</code> (installed via Homebrew, Scoop, or built from source)","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#default-values","level":3,"title":"Default Values","text":"Setting Default Local port 3000 Inspector port 4040 Local host localhost Server https://sellia.me","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>New Users: Getting Started</li> <li>Troubleshooting: Troubleshooting</li> <li>Contributing: Contributing</li> </ul>","path":["03 appendices","Appendices"],"tags":[]},{"location":"03-appendices/cli-flags/","level":1,"title":"CLI Flags Reference","text":"<p>Complete reference of all command-line flags and options for Sellia.</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#commands-overview","level":2,"title":"Commands Overview","text":"<pre><code>sellia &lt;command&gt; [options]\n</code></pre> <p>Available commands: - <code>http</code> - Create HTTP tunnel to local port - <code>start</code> - Start tunnels from config file - <code>auth</code> - Manage authentication - <code>admin</code> - Admin commands (requires admin API key) - <code>update</code> - Update to latest version - <code>version</code> - Show version - <code>help</code> - Show help</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#global-options","level":2,"title":"Global Options","text":"<p>These options can be used with any command (though availability varies by command):</p> Flag Short Type Description Available In <code>--help</code> <code>-h</code> - Show help message All commands <code>--version</code> <code>-v</code> - Show version Top-level only","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-http-command","level":2,"title":"<code>sellia http</code> Command","text":"<p>Create a single HTTP tunnel to a local port.</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#usage","level":3,"title":"Usage","text":"<pre><code>sellia http [port] [options]\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#options","level":3,"title":"Options","text":"Flag Short Argument Default Description <code>--subdomain</code> <code>-s</code> <code>NAME</code> (random) Request specific subdomain <code>--auth</code> <code>-a</code> <code>USER:PASS</code> (none) Enable basic auth protection <code>--host</code> <code>-H</code> <code>HOST</code> <code>localhost</code> Local host to forward to <code>--server</code> - <code>URL</code> From config Tunnel server URL <code>--api-key</code> <code>-k</code> <code>KEY</code> From config API key for authentication <code>--inspector-port</code> <code>-i</code> <code>PORT</code> <code>4040</code> Inspector UI port <code>--open</code> <code>-o</code> - <code>false</code> Open inspector in browser on connect <code>--no-inspector</code> - - <code>false</code> Disable the request inspector <code>--help</code> <code>-h</code> - - Show help message","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#positional-arguments","level":3,"title":"Positional Arguments","text":"Argument Type Required Description <code>port</code> Integer No Local port to forward (default: 3000)","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#examples","level":3,"title":"Examples","text":"<pre><code># Basic tunnel\nsellia http 3000\n\n# With custom subdomain\nsellia http 3000 --subdomain myapp\n\n# With basic auth\nsellia http 3000 --auth admin:secret\n\n# Custom local host\nsellia http 8080 --host 192.168.1.100\n\n# Disable inspector\nsellia http 3000 --no-inspector\n\n# Custom inspector port and auto-open\nsellia http 3000 --inspector-port 8080 --open\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-start-command","level":2,"title":"<code>sellia start</code> Command","text":"<p>Start multiple tunnels from config file.</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#usage_1","level":3,"title":"Usage","text":"<pre><code>sellia start [options]\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#options_1","level":3,"title":"Options","text":"Flag Short Argument Default Description <code>--config</code> <code>-c</code> <code>FILE</code> <code>sellia.yml</code> Config file path <code>--help</code> <code>-h</code> - - Show help message","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#examples_1","level":3,"title":"Examples","text":"<pre><code># Use default config file\nsellia start\n\n# Use custom config\nsellia start --config tunnels.yml\nsellia start -c /path/to/config.yml\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-auth-command","level":2,"title":"<code>sellia auth</code> Command","text":"<p>Manage authentication (save/remove API keys).</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#usage_2","level":3,"title":"Usage","text":"<pre><code>sellia auth &lt;subcommand&gt;\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#subcommands","level":3,"title":"Subcommands","text":"Subcommand Description <code>login</code> Save API key for authentication <code>logout</code> Remove saved API key <code>status</code> Show current authentication status","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-auth-login","level":3,"title":"<code>sellia auth login</code>","text":"<p>Prompts for and saves API key to <code>~/.config/sellia/sellia.yml</code>.</p> <pre><code>sellia auth login\n# Prompts: API Key: [paste key]\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-auth-logout","level":3,"title":"<code>sellia auth logout</code>","text":"<p>Removes saved API key from config file.</p> <pre><code>sellia auth logout\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-auth-status","level":3,"title":"<code>sellia auth status</code>","text":"<p>Shows current authentication status and masked API key.</p> <pre><code>sellia auth status\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-admin-command","level":2,"title":"<code>sellia admin</code> Command","text":"<p>Admin commands for server management (requires admin API key).</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#usage_3","level":3,"title":"Usage","text":"<pre><code>sellia admin &lt;subcommand&gt; [options]\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#subcommands_1","level":3,"title":"Subcommands","text":"Subcommand Description <code>reserved</code> Manage reserved subdomains <code>api-keys</code> Manage API keys","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#common-options","level":3,"title":"Common Options","text":"Flag Short Argument Default Description <code>--server</code> - <code>URL</code> From config Tunnel server URL","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-admin-reserved-commands","level":3,"title":"<code>sellia admin reserved</code> Commands","text":"Subcommand Description <code>list</code> List all reserved subdomains <code>add &lt;subdomain&gt;</code> Add a reserved subdomain <code>remove &lt;subdomain&gt;</code> Remove a reserved subdomain <code>rm &lt;subdomain&gt;</code> Alias for remove","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-admin-reserved-options","level":4,"title":"<code>sellia admin reserved</code> Options","text":"Flag Argument Description <code>--reason</code> <code>TEXT</code> Reason for reserving the subdomain <code>--server</code> <code>URL</code> Server URL (default: from config)","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-admin-api-keys-commands","level":3,"title":"<code>sellia admin api-keys</code> Commands","text":"Subcommand Description <code>list</code> List all API keys <code>create</code> Create a new API key <code>revoke &lt;prefix&gt;</code> Revoke an API key <code>rm &lt;prefix&gt;</code> Alias for revoke","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-admin-api-keys-options","level":4,"title":"<code>sellia admin api-keys</code> Options","text":"Flag Argument Description <code>--name</code> <code>NAME</code> Friendly name for the key <code>--master</code> - Create master key (admin access) <code>--server</code> <code>URL</code> Server URL (default: from config)","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#examples_2","level":3,"title":"Examples","text":"<pre><code># List reserved subdomains\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved list\n\n# Reserve a subdomain\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved add myapp\n\n# Reserve with reason\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved add myapp --reason \"Production app\"\n\n# Release a subdomain\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved remove myapp\n\n# List API keys\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys list\n\n# Create new API key\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys create --name \"Dev key\"\n\n# Create master key\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys create --master --name \"Admin key\"\n\n# Revoke API key\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys revoke key_\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#sellia-update-command","level":2,"title":"<code>sellia update</code> Command","text":"<p>Update Sellia to the latest version.</p>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#usage_4","level":3,"title":"Usage","text":"<pre><code>sellia update [options]\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#options_2","level":3,"title":"Options","text":"Flag Short Argument Default Description <code>--check</code> <code>-c</code> - <code>false</code> Check for updates without installing <code>--force</code> <code>-f</code> - <code>false</code> Force reinstall even if up-to-date <code>--version</code> <code>-v</code> <code>VERSION</code> (latest) Update to specific version <code>--help</code> <code>-h</code> - - Show help message","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#examples_3","level":3,"title":"Examples","text":"<pre><code># Check for updates\nsellia update --check\n\n# Update to latest\nsellia update\n\n# Force reinstall\nsellia update --force\n\n# Update to specific version\nsellia update --version 0.2.0\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#exit-codes","level":2,"title":"Exit Codes","text":"Code Meaning <code>0</code> Success <code>1</code> Error occurred","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#configuration-precedence","level":2,"title":"Configuration Precedence","text":"<p>When multiple sources provide the same value, priority is:</p> <ol> <li>CLI flags (highest)</li> <li>Environment variables</li> <li>Config files</li> <li>Default values (lowest)</li> </ol> <p>Example:</p> <pre><code># Config file has: server: https://default.com\n# Environment: SELLIA_SERVER=https://env.com\n# CLI flag: --server https://cli.com\n\nsellia http 3000 --server https://cli.com\n# Result: Uses https://cli.com (CLI flag wins)\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#common-flag-combinations","level":2,"title":"Common Flag Combinations","text":"","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#development","level":3,"title":"Development","text":"<pre><code># Fast reload with inspector\nsellia http 3000 --open --inspector-port 4040\n\n# Multiple services with routing\nsellia http 3000 --subdomain dev\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#production","level":3,"title":"Production","text":"<pre><code># With auth and custom subdomain\nsellia http 3000 --subdomain myapp --auth admin:secret\n\n# Custom server\nsellia http 3000 --server https://tunnel.mycompany.com\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#debugging","level":3,"title":"Debugging","text":"<pre><code># Disable inspector for minimal overhead\nsellia http 3000 --no-inspector\n\n# Local development server\nsellia http 3000 --host 0.0.0.0 --server http://localhost:8080\n</code></pre>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/cli-flags/#see-also","level":2,"title":"See Also","text":"<ul> <li>Environment Variables Reference - Environment-based configuration</li> <li>Configuration Reference - Config file format</li> <li>Getting Started Guide - Basic usage</li> </ul>","path":["03 appendices","CLI Flags Reference"],"tags":[]},{"location":"03-appendices/config-reference/","level":1,"title":"Configuration Schema Reference","text":"<p>Complete reference for the <code>sellia.yml</code> configuration file format.</p>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#config-file-locations","level":2,"title":"Config File Locations","text":"<p>Sellia loads configuration from multiple locations in order (later overrides earlier):</p> <ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current working directory)</li> </ol>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#root-level-schema","level":2,"title":"Root-Level Schema","text":"<pre><code># Tunnel server URL\nserver: String (default: \"https://sellia.me\")\n\n# API authentication key (optional)\napi_key: String?\n\n# Inspector configuration\ninspector:\n  port: Int32 (default: 4040)\n  open: Boolean (default: false)\n\n# Database configuration\ndatabase:\n  path: String? (optional)\n  enabled: Boolean? (optional)\n\n# Tunnel definitions (key = tunnel name)\ntunnels:\n  &lt;name&gt;:\n    type: String (default: \"http\")\n    port: Int32 (required)\n    subdomain: String? (optional)\n    auth: String? (optional, format: \"user:pass\")\n    local_host: String (default: \"localhost\")\n    routes: Array[RouteConfig] (default: [])\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#complete-schema-reference","level":2,"title":"Complete Schema Reference","text":"","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#server","level":3,"title":"server","text":"<p>Type: <code>String</code> Default: <code>\"https://sellia.me\"</code> Required: No</p> <p>The tunnel server URL to connect to.</p> <pre><code>server: https://sellia.me\nserver: http://localhost:8080  # Custom server\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#api_key","level":3,"title":"api_key","text":"<p>Type: <code>String?</code> Default: <code>nil</code> Required: No</p> <p>API authentication key for protected tunnels. Can also be set via <code>SELLIA_API_KEY</code> environment variable.</p> <pre><code>api_key: key_abc123...\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#inspector","level":3,"title":"inspector","text":"<p>Type: <code>Inspector</code> object Required: No</p> <p>Configuration for the built-in request inspector UI.</p>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#inspectorport","level":4,"title":"inspector.port","text":"<p>Type: <code>Int32</code> Default: <code>4040</code> Required: No</p> <p>Local port for the inspector web UI.</p> <pre><code>inspector:\n  port: 4040\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#inspectoropen","level":4,"title":"inspector.open","text":"<p>Type: <code>Boolean</code> Default: <code>false</code> Required: No</p> <p>Automatically open inspector in browser when tunnel connects.</p> <pre><code>inspector:\n  open: true\n</code></pre> <p>Example:</p> <pre><code>inspector:\n  port: 8080\n  open: true\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#database","level":3,"title":"database","text":"<p>Type: <code>DatabaseConfig</code> object Required: No</p> <p>Configuration for SQLite database persistence.</p>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#databasepath","level":4,"title":"database.path","text":"<p>Type: <code>String?</code> Default: <code>nil</code> (uses default location) Required: No</p> <p>Custom path for the SQLite database file.</p> <pre><code>database:\n  path: /custom/path/sellia.db\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#databaseenabled","level":4,"title":"database.enabled","text":"<p>Type: <code>Boolean?</code> Default: <code>nil</code> (enables database) Required: No</p> <p>Enable or disable database persistence. Set to <code>false</code> to disable.</p> <p>Note: The behavior is inverted from environment variables. When set to <code>false</code> in config, it enables the database. When set via <code>SELLIA_NO_DB</code> environment variable, <code>\"true\"</code> or <code>\"1\"</code> disables the database.</p> <pre><code>database:\n  enabled: false  # Disables database\n</code></pre> <p>Example:</p> <pre><code>database:\n  path: /data/sellia.db\n  enabled: true  # Enables database explicitly\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#tunnels","level":3,"title":"tunnels","text":"<p>Type: <code>Hash&lt;String, TunnelConfig&gt;</code> Required: No Key: Tunnel name (used for identification)</p> <p>Named tunnel configurations for use with <code>sellia start</code>.</p>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#tunnel-configuration","level":4,"title":"Tunnel Configuration","text":"<p>Each tunnel has the following properties:</p>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#type","level":5,"title":"type","text":"<p>Type: <code>String</code> Default: <code>\"http\"</code> Required: No</p> <p>Tunnel type. Currently only <code>\"http\"</code> is supported.</p> <pre><code>tunnels:\n  web:\n    type: http\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#port","level":5,"title":"port","text":"<p>Type: <code>Int32</code> Default: (none) Required: Yes</p> <p>Local port to forward to.</p> <pre><code>tunnels:\n  web:\n    port: 3000\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#subdomain","level":5,"title":"subdomain","text":"<p>Type: <code>String?</code> Default: <code>nil</code> (random subdomain assigned) Required: No</p> <p>Request a specific subdomain for the public URL.</p> <pre><code>tunnels:\n  web:\n    subdomain: myapp\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#auth","level":5,"title":"auth","text":"<p>Type: <code>String?</code> Default: <code>nil</code> Required: No Format: <code>\"username:password\"</code></p> <p>Enable basic authentication for the tunnel.</p> <pre><code>tunnels:\n  web:\n    auth: admin:secret123\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#local_host","level":5,"title":"local_host","text":"<p>Type: <code>String</code> Default: <code>\"localhost\"</code> Required: No</p> <p>Local hostname to forward to.</p> <pre><code>tunnels:\n  web:\n    local_host: 127.0.0.1\n  docker:\n    local_host: host.docker.internal\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#routes","level":5,"title":"routes","text":"<p>Type: <code>Array[RouteConfig]</code> Default: <code>[]</code> Required: No</p> <p>Path-based routing rules to forward different paths to different ports.</p> <p>RouteConfig Properties:</p> <ul> <li><code>path</code> (String, required): Path pattern (e.g., <code>/api</code>, <code>/admin/*</code>)</li> <li><code>port</code> (Int32, required): Target port</li> <li><code>host</code> (String?, optional): Override target host</li> </ul> <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /api\n        port: 8080\n      - path: /admin\n        port: 9000\n        host: admin.local\n      - path: /static/*\n        port: 3001\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#complete-examples","level":2,"title":"Complete Examples","text":"","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#minimal-config","level":3,"title":"Minimal Config","text":"<pre><code># sellia.yml\nserver: https://sellia.me\napi_key: key_abc123\n\ntunnels:\n  web:\n    port: 3000\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#multi-tunnel-with-routing","level":3,"title":"Multi-Tunnel with Routing","text":"<pre><code>server: https://sellia.me\napi_key: key_abc123\n\ninspector:\n  port: 4040\n  open: true\n\ndatabase:\n  enabled: true\n  path: /data/sellia.db\n\ntunnels:\n  frontend:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 8080\n      - path: /admin\n        port: 9000\n\n  api:\n    port: 8080\n    subdomain: api\n\n  admin:\n    port: 9000\n    auth: admin:secret\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#development-config","level":3,"title":"Development Config","text":"<pre><code># Development environment\nserver: http://localhost:8080\napi_key: dev-key\n\ninspector:\n  port: 4040\n  open: true\n\ndatabase:\n  enabled: false  # Disable persistence in dev\n\ntunnels:\n  web:\n    port: 3000\n    local_host: localhost\n</code></pre>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#config-merging","level":2,"title":"Config Merging","text":"<p>When multiple config files exist, they are merged with the following rules:</p> <ul> <li>Scalar values: Later config overrides earlier</li> <li>Hash values: Merged recursively (tunnels are combined)</li> <li>Array values: Later config replaces earlier</li> </ul> <p>Example:</p> <pre><code># ~/.config/sellia/sellia.yml\nserver: https://sellia.me\napi_key: global-key\n\ntunnels:\n  web:\n    port: 3000\n</code></pre> <pre><code># ./sellia.yml\napi_key: local-key  # Overrides global\n\ntunnels:\n  web:\n    subdomain: myapp  # Merged with web tunnel\n  api:               # New tunnel added\n    port: 8080\n</code></pre> <p>Result: <pre><code>server: https://sellia.me\napi_key: local-key  # Local override wins\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp  # Both properties present\n  api:\n    port: 8080\n</code></pre></p>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#validation-rules","level":2,"title":"Validation Rules","text":"<ol> <li>Required Fields: Only <code>tunnel.port</code> is required for each tunnel</li> <li>Port Range: Ports must be between 1-65535</li> <li>Auth Format: Must be <code>username:password</code></li> <li>Route Paths: Must start with <code>/</code></li> <li>Subdomain: Must be valid hostname (alphanumeric, hyphens)</li> </ol>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/config-reference/#see-also","level":2,"title":"See Also","text":"<ul> <li>Environment Variables Reference - Environment-based configuration</li> <li>CLI Flags Reference - Command-line options</li> <li>Getting Started Guide - Basic setup</li> </ul>","path":["03 appendices","Configuration Schema Reference"],"tags":[]},{"location":"03-appendices/defaults/","level":1,"title":"Default Values Reference","text":"<p>Complete list of default values used throughout Sellia.</p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#configuration-defaults","level":2,"title":"Configuration Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#server-configuration","level":3,"title":"Server Configuration","text":"Setting Default Value Location <code>server</code> <code>https://sellia.me</code> Config, ENV <code>api_key</code> <code>nil</code> (none required) Config, ENV <code>local_host</code> <code>localhost</code> CLI flag, Config","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#inspector-defaults","level":3,"title":"Inspector Defaults","text":"Setting Default Value Location <code>inspector.port</code> <code>4040</code> Config, CLI flag <code>inspector.open</code> <code>false</code> Config, CLI flag <code>--no-inspector</code> <code>false</code> (inspector enabled) CLI flag","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#database-defaults","level":3,"title":"Database Defaults","text":"Setting Default Value Location <code>database.enabled</code> <code>nil</code> (enabled by default) Config <code>database.path</code> Platform-dependent Config, ENV <code>SELLIA_NO_DB</code> <code>false</code> (database enabled) ENV <p>Note: When <code>SELLIA_NO_DB</code> is set to <code>\"true\"</code> or <code>\"1\"</code>, it disables the database. This is inverted from the <code>database.enabled</code> config setting where <code>false</code> disables the database.</p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#tunnel-defaults","level":3,"title":"Tunnel Defaults","text":"Setting Default Value Location <code>port</code> <code>3000</code> CLI argument <code>type</code> <code>http</code> Config <code>subdomain</code> <code>nil</code> (random assigned) Config, CLI flag <code>auth</code> <code>nil</code> (no auth) Config, CLI flag <code>routes</code> <code>[]</code> (empty) Config","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#network-defaults","level":2,"title":"Network Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#timeouts","level":3,"title":"Timeouts","text":"Setting Default Value Description <code>reconnect_delay</code> <code>3 seconds</code> Initial reconnect delay <code>reconnect_delay * attempt</code> Linear backoff Subsequent reconnects <code>max_reconnect_attempts</code> <code>10</code> Maximum reconnect attempts WebSocket ping timeout Default Crystal WebSocket timeout Keepalive interval","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#ports","level":3,"title":"Ports","text":"Setting Default Value Description Inspector port <code>4040</code> Local inspector UI Vite dev server <code>5173</code> Development build server Default local port <code>3000</code> Default forwarded port","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#urls","level":3,"title":"URLs","text":"Setting Default Value Description Tunnel server <code>https://sellia.me</code> Production server WebSocket endpoint <code>/ws</code> Server WebSocket path Inspector API <code>/api/*</code> Inspector REST API Inspector live <code>/api/live</code> Inspector WebSocket endpoint","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#path-defaults","level":2,"title":"Path Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#config-file-search-order","level":3,"title":"Config File Search Order","text":"<ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current directory)</li> </ol>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#database-path","level":3,"title":"Database Path","text":"<p>Platform-dependent locations:</p> Platform Default Path macOS <code>~/Library/Application Support/Sellia/sellia.db</code> Linux <code>~/.local/share/sellia/sellia.db</code> Windows <code>%APPDATA%/Sellia/sellia.db</code> <p>Can be overridden via: - <code>SELLIA_DB_PATH</code> environment variable - <code>database.path</code> in config file</p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#asset-paths","level":3,"title":"Asset Paths","text":"Setting Path Description Inspector UI (dev) Proxies to <code>localhost:5173</code> Vite dev server Inspector UI (prod) Baked into binary <code>web/dist/</code> contents","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#requestresponse-defaults","level":2,"title":"Request/Response Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#body-size-limits","level":3,"title":"Body Size Limits","text":"Setting Default Value Description Inspector display limit <code>100,000 bytes</code> (100 KB) Max body size for UI display Body truncation suffix <code>\\n... (truncated)</code> Added to truncated bodies","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#request-storage","level":3,"title":"Request Storage","text":"Setting Default Value Description Max stored requests <code>1000</code> Requests kept in memory Storage duration Session-based Cleared on restart WebSocket buffer <code>8192 bytes</code> Response chunk size","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#reconnection-defaults","level":2,"title":"Reconnection Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#linear-backoff","level":3,"title":"Linear Backoff","text":"Attempt Delay 1 3 seconds 2 6 seconds 3 9 seconds ... ... 10 30 seconds <p>Formula: <code>delay = reconnect_delay * reconnect_attempts</code></p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#auto-reconnect","level":3,"title":"Auto-Reconnect","text":"Setting Default Value Description <code>auto_reconnect</code> <code>true</code> Automatically reconnect on disconnect <code>max_reconnect_attempts</code> <code>10</code> Give up after this many attempts <p>Disabled on certain errors (e.g., authentication failure).</p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#logging-defaults","level":2,"title":"Logging Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#log-levels","level":3,"title":"Log Levels","text":"Environment Variable Default Level Description <code>LOG_LEVEL</code> <code>warn</code> Minimum log level (unset) <code>warn</code> Crystal default <p>Available levels: <code>fatal</code>, <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug</code>, <code>trace</code>.</p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#log-format","level":3,"title":"Log Format","text":"Mode Default Format Enable Production JSON Default Text Human-readable <code>LOG_TEXT=1</code>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#protocol-defaults","level":2,"title":"Protocol Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#message-defaults","level":3,"title":"Message Defaults","text":"Setting Default Value Serialization MessagePack WebSocket frame size <code>8192 bytes</code> (response chunks) Ping interval Server-controlled","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#message-types","level":3,"title":"Message Types","text":"Type Default Behavior Auth Sent if <code>api_key</code> is set Tunnel Open Sent immediately after auth Ping/ Pong Automatic keepalive","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#development-defaults","level":2,"title":"Development Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#vite-dev-server","level":3,"title":"Vite Dev Server","text":"Setting Default Value Host <code>localhost</code> Port <code>5173</code> HMR WebSocket (not proxied in inspector)","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#build-defaults","level":3,"title":"Build Defaults","text":"Setting Default Value Description Build mode <code>debug</code> (default) Faster compilation Release mode <code>--release</code> flag Optimized binary Static assets <code>web/dist/</code> Production UI location","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#browser-opening","level":2,"title":"Browser Opening","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#default-browsers-by-platform","level":3,"title":"Default Browsers by Platform","text":"Platform Command File macOS <code>open</code> <code>src/cli/main.cr:522</code> Linux <code>xdg-open</code> <code>src/cli/main.cr:524</code> Windows <code>cmd /c start</code> <code>src/cli/main.cr:526</code> <p>Triggered by: - <code>inspector.open: true</code> in config - <code>--open</code> / <code>-o</code> CLI flag</p>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#rate-limiting-defaults","level":2,"title":"Rate Limiting Defaults","text":"Setting Default Value Description Client rate limit Server-controlled Requests per minute Tunnel creation Server-controlled Per-account limit","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#security-defaults","level":2,"title":"Security Defaults","text":"Setting Default Value Description TLS/SSL Required for WSS Production Inspector binding <code>127.0.0.1</code> only Localhost only CORS headers <code>*</code> (all origins) Inspector API","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#websocket-defaults","level":2,"title":"WebSocket Defaults","text":"","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#inspector-websocket","level":3,"title":"Inspector WebSocket","text":"Setting Default Value Path <code>/api/live</code> Reconnect delay <code>3 seconds</code> Max retries Unlimited (with UI reconnection)","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#tunnel-websocket","level":3,"title":"Tunnel WebSocket","text":"Setting Default Value Scheme <code>wss://</code> (HTTPS) or <code>ws://</code> (HTTP) Auto ping/pong Enabled","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/defaults/#see-also","level":2,"title":"See Also","text":"<ul> <li>Configuration Reference - Config file schema</li> <li>Environment Variables - ENV configuration</li> <li>CLI Flags Reference - Command-line options</li> </ul>","path":["03 appendices","Default Values Reference"],"tags":[]},{"location":"03-appendices/env-vars/","level":1,"title":"Environment Variables Reference","text":"<p>Complete list of environment variables supported by Sellia.</p>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#overview","level":2,"title":"Overview","text":"<p>Environment variables provide a way to configure Sellia without using config files or CLI flags. They follow the naming convention <code>SELLIA_*</code> and can be set in your shell environment, <code>.envrc</code>, or system configuration.</p>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#priority-order","level":2,"title":"Priority Order","text":"<p>Configuration is loaded in the following order (later overrides earlier):</p> <ol> <li>Default values (hardcoded)</li> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code></li> <li>Environment variables (highest priority)</li> </ol> <p>Note: When multiple config files exist, they are merged according to the rules in Configuration Reference.</p>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#environment-variables","level":2,"title":"Environment Variables","text":"Variable Type Default Description <code>SELLIA_SERVER</code> String <code>https://sellia.me</code> Tunnel server URL. Override to use a custom tunnel server. <code>SELLIA_API_KEY</code> String (none) API authentication key. Required for protected tunnels. <code>SELLIA_ADMIN_API_KEY</code> String (none) Admin API key for <code>sellia admin</code> commands. <code>SELLIA_DB_PATH</code> String (none) Custom path for SQLite database file. Overrides default location. <code>SELLIA_NO_DB</code> Boolean <code>false</code> Disable database persistence. Set to <code>1</code> or <code>true</code> to disable. <p>Important: <code>SELLIA_NO_DB</code> behavior is inverted - setting it to <code>\"true\"</code> or <code>\"1\"</code> disables the database, while the config file's <code>database.enabled: false</code> also disables the database. Both achieve the same result but through opposite logic.</p>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#setting-api-key","level":3,"title":"Setting API Key","text":"<pre><code># In shell\nexport SELLIA_API_KEY=\"your-api-key-here\"\nsellia http 3000\n\n# Single command\nSELLIA_API_KEY=\"key\" sellia http 3000\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#using-custom-server","level":3,"title":"Using Custom Server","text":"<pre><code>export SELLIA_SERVER=\"https://tunnel.example.com\"\nsellia http 3000\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#disabling-database","level":3,"title":"Disabling Database","text":"<pre><code># Run without persisting tunnel state\nSELLIA_NO_DB=1 sellia http 3000\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#custom-database-location","level":3,"title":"Custom Database Location","text":"<pre><code>export SELLIA_DB_PATH=\"/mnt/data/sellia.db\"\nsellia http 3000\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#security-considerations","level":2,"title":"Security Considerations","text":"","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#api-key-security","level":3,"title":"API Key Security","text":"<ul> <li>Never commit API keys to version control</li> <li>Use <code>.envrc</code> or <code>.env.local</code> files (add to <code>.gitignore</code>)</li> <li>Consider using secret management tools in production</li> </ul>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#example-gitignore","level":3,"title":"Example .gitignore","text":"<pre><code>.env\n.env.local\n.envrc\nsellia.yml\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#environment-specific-configuration","level":2,"title":"Environment-Specific Configuration","text":"","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#development","level":3,"title":"Development","text":"<pre><code># .envrc for development\nexport SELLIA_SERVER=\"http://localhost:8080\"\nexport SELLIA_API_KEY=\"dev-key\"\nexport SELLIA_DB_PATH=\"./dev.db\"\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#production","level":3,"title":"Production","text":"<pre><code># Production environment\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"${SECRET_API_KEY}\"\n# Database enabled by default, no need to set SELLIA_NO_DB\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#testing","level":3,"title":"Testing","text":"<pre><code># Disable persistence for tests\nexport SELLIA_NO_DB=1\nexport SELLIA_SERVER=\"http://test-server:8080\"\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#interaction-with-config-files","level":2,"title":"Interaction with Config Files","text":"<p>Environment variables override config file values:</p> <pre><code># sellia.yml\nserver: https://default-server.com\napi_key: default-key\n</code></pre> <pre><code># Environment overrides both\nexport SELLIA_SERVER=\"https://custom-server.com\"\nexport SELLIA_API_KEY=\"custom-key\"\n\n# Result: Uses custom values\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#logging","level":2,"title":"Logging","text":"<p>Sellia respects Crystal's standard logging environment variables:</p> Variable Description Example <code>LOG_LEVEL</code> Minimum log level <code>LOG_LEVEL=debug</code> <code>LOG_TEXT</code> Use text format (default is JSON) <code>LOG_TEXT=1</code> <p>Example:</p> <pre><code>LOG_LEVEL=debug sellia http 3000\n</code></pre>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/env-vars/#see-also","level":2,"title":"See Also","text":"<ul> <li>Configuration Reference - Config file format</li> <li>CLI Flags Reference - Command-line options</li> <li>Defaults Reference - Default values</li> </ul>","path":["03 appendices","Environment Variables Reference"],"tags":[]},{"location":"03-appendices/error-codes/","level":1,"title":"Error Codes Reference","text":"<p>Complete list of error messages, their meanings, and how to resolve them.</p>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Authentication Errors</li> <li>Connection Errors</li> <li>Tunnel Errors</li> <li>Routing Errors</li> <li>Inspector Errors</li> <li>Configuration Errors</li> <li>Network Errors</li> </ul>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#authentication-errors","level":2,"title":"Authentication Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#authentication-failed-invalid-api-key","level":3,"title":"<code>Authentication failed: Invalid API key</code>","text":"<p>Cause: The API key provided is invalid or has been revoked.</p> <p>Solution: 1. Verify your API key is correct 2. Check if the key has expired or been revoked 3. Re-authenticate: <code>sellia auth login</code></p> <pre><code># Re-authenticate\nsellia auth login\n# Enter your new API key\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#authentication-failed-api-key-required","level":3,"title":"<code>Authentication failed: API key required</code>","text":"<p>Cause: The tunnel server requires an API key, but none was provided.</p> <p>Solution: 1. Set API key via environment variable: <pre><code>export SELLIA_API_KEY=\"your-api-key\"\nsellia http 3000\n</code></pre></p> <ol> <li> <p>Or save it to config: <pre><code>sellia auth login\n</code></pre></p> </li> <li> <p>Or pass via flag: <pre><code>sellia http 3000 --api-key your-key\n</code></pre></p> </li> </ol>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#connection-errors","level":2,"title":"Connection Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#connection-failed-connection-refused","level":3,"title":"<code>Connection failed: Connection refused</code>","text":"<p>Cause: Cannot reach the tunnel server. Server may be down or network unreachable.</p> <p>Solution: 1. Check your internet connection 2. Verify the server URL is correct 3. Check if the tunnel server is running</p> <pre><code># Test connectivity\ncurl -I https://sellia.me\n\n# Use custom server if default is down\nsellia http 3000 --server https://backup-server.com\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#connection-failed-connection-timeout","level":3,"title":"<code>Connection failed: Connection timeout</code>","text":"<p>Cause: Connection attempt timed out. Network issues or firewall blocking.</p> <p>Solution: 1. Check network connectivity 2. Verify firewall settings 3. Check if proxy is required</p> <pre><code># Test with curl\ncurl -v https://sellia.me\n\n# Use with proxy if needed\nexport HTTP_PROXY=http://proxy.example.com:8080\nexport HTTPS_PROXY=http://proxy.example.com:8080\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#max-reconnection-attempts-exceeded","level":3,"title":"<code>Max reconnection attempts exceeded</code>","text":"<p>Cause: Lost connection and failed to reconnect after maximum attempts.</p> <p>Solution: 1. Check network stability 2. Restart the tunnel 3. Check tunnel server status</p> <pre><code># Restart tunnel\n# Press Ctrl+C to stop, then:\nsellia http 3000\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#tunnel-errors","level":2,"title":"Tunnel Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#tunnel-closed-subdomain-xxx-not-available","level":3,"title":"<code>Tunnel closed: Subdomain 'xxx' not available</code>","text":"<p>Cause: Requested subdomain is already taken or reserved.</p> <p>Solution: 1. Try a different subdomain 2. Use random subdomain (omit <code>--subdomain</code> flag) 3. Check if you own the subdomain: <code>sellia auth status</code></p> <pre><code># Try different subdomain\nsellia http 3000 --subdomain myapp2\n\n# Let server assign random subdomain\nsellia http 3000\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#tunnel-closed-rate-limit-exceeded","level":3,"title":"<code>Tunnel closed: Rate limit exceeded</code>","text":"<p>Cause: Too many tunnel creation attempts in short time.</p> <p>Solution: 1. Wait a few minutes before retrying 2. Contact support if limit is too restrictive</p>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#tunnel-closed-account-suspended","level":3,"title":"<code>Tunnel closed: Account suspended</code>","text":"<p>Cause: Your account has been suspended.</p> <p>Solution: 1. Check your email for suspension notice 2. Contact support to resolve</p>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#routing-errors","level":2,"title":"Routing Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#no-route-matched-path-xxx","level":3,"title":"<code>No route matched path: /xxx</code>","text":"<p>Cause: Request path doesn't match any configured route and no fallback port.</p> <p>Solution: 1. Check your route configuration 2. Ensure paths start with <code>/</code> 3. Add a catch-all route: <code>/*</code></p> <pre><code># sellia.yml\ntunnels:\n  app:\n    port: 3000  # Fallback\n    routes:\n      - path: /api\n        port: 8080\n      - path: /*\n        port: 3000  # Catch-all\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#no-route-matched-for-xxx","level":3,"title":"<code>No route matched for /xxx</code>","text":"<p>Cause: WebSocket request path doesn't match any route.</p> <p>Solution: 1. Add route for WebSocket path 2. Ensure route includes the WebSocket endpoint</p> <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /ws\n        port: 8080  # WebSocket server\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#inspector-errors","level":2,"title":"Inspector Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#failed-to-bind-inspector-to-port-4040-address-already-in-use","level":3,"title":"<code>Failed to bind inspector to port 4040: Address already in use</code>","text":"<p>Cause: Inspector port is already in use by another application.</p> <p>Solution: 1. Use a different port: <pre><code>sellia http 3000 --inspector-port 4041\n</code></pre></p> <ol> <li> <p>Or disable inspector: <pre><code>sellia http 3000 --no-inspector\n</code></pre></p> </li> <li> <p>Or find and stop the process using the port: <pre><code># On macOS/Linux\nlsof -i :4040\nkill -9 &lt;PID&gt;\n</code></pre></p> </li> </ol>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#vite-dev-server-not-running","level":3,"title":"<code>Vite Dev Server Not Running</code>","text":"<p>Cause: Inspector is trying to proxy to Vite dev server, but it's not running.</p> <p>Solution: 1. Start Vite dev server in development mode: <pre><code>cd web\nnpm run dev\n</code></pre></p> <ol> <li>Or build for production: <pre><code>cd web\nnpm run build\ncd ..\nshards build --release\n</code></pre></li> </ol>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#configuration-errors","level":2,"title":"Configuration Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#config-file-not-found-pathtofile","level":3,"title":"<code>Config file not found: /path/to/file</code>","text":"<p>Cause: Specified config file doesn't exist.</p> <p>Solution: 1. Check file path is correct 2. Create config file if needed</p> <pre><code># Create minimal config\ncat &gt; sellia.yml &lt;&lt; EOF\ntunnels:\n  web:\n    port: 3000\nEOF\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#warning-failed-to-parse-pathtoselliayml","level":3,"title":"<code>Warning: Failed to parse /path/to/sellia.yml</code>","text":"<p>Cause: YAML syntax error in config file.</p> <p>Solution: 1. Validate YAML syntax 2. Check indentation (use spaces, not tabs) 3. Verify quotes and special characters</p> <pre><code># Validate YAML\n# Use online tool or:\nruby -ryaml -e \"YAML.load_file('sellia.yml')\"\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#error-no-tunnels-defined-in-config","level":3,"title":"<code>Error: No tunnels defined in config</code>","text":"<p>Cause: Config file exists but has no tunnel definitions.</p> <p>Solution: 1. Add at least one tunnel to config</p> <pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#network-errors","level":2,"title":"Network Errors","text":"","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#internal-proxy-error-connection-refused","level":3,"title":"<code>Internal proxy error: Connection refused</code>","text":"<p>Cause: Cannot connect to local service on specified port.</p> <p>Solution: 1. Verify local service is running 2. Check port number is correct 3. Ensure service listens on correct interface</p> <pre><code># Check if port is open\n# macOS/Linux\nlsof -i :3000\n\n# Start your service\nnpm start  # or whatever starts your app\n</code></pre>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#websocket-connection-failed","level":3,"title":"<code>WebSocket connection failed</code>","text":"<p>Cause: Cannot establish WebSocket connection to local service.</p> <p>Solution: 1. Verify local WebSocket server is running 2. Check port and path are correct 3. Ensure no firewall blocking</p>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#failed-to-connect-to-local-websocket-service","level":3,"title":"<code>Failed to connect to local WebSocket service</code>","text":"<p>Cause: WebSocket upgrade failed at local service.</p> <p>Solution: 1. Check local WebSocket server logs 2. Verify endpoint accepts WebSocket upgrades 3. Check route configuration</p>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#getting-help","level":2,"title":"Getting Help","text":"<p>If you encounter an error not listed here:</p> <ol> <li> <p>Check logs: Run with <code>LOG_LEVEL=debug</code> for more details <pre><code>LOG_LEVEL=debug sellia http 3000\n</code></pre></p> </li> <li> <p>GitHub Issues: Search or create an issue at https://github.com/watzon/sellia</p> </li> <li> <p>Community: Ask in community chat or forum</p> </li> </ol>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#reporting-bugs","level":2,"title":"Reporting Bugs","text":"<p>When reporting errors, include:</p> <ol> <li>Error message (exact text)</li> <li>Command used (full command with flags)</li> <li>Config file (sanitize sensitive data)</li> <li>Debug logs (<code>LOG_LEVEL=debug</code>)</li> <li>Environment:</li> <li>OS and version</li> <li>Sellia version (<code>sellia version</code>)</li> <li>Crystal version (if building from source)</li> </ol>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/error-codes/#see-also","level":2,"title":"See Also","text":"<ul> <li>Troubleshooting Guide - Common issues and solutions</li> <li>Getting Started - Basic setup</li> <li>Configuration Reference - Config file format</li> </ul>","path":["03 appendices","Error Codes Reference"],"tags":[]},{"location":"03-appendices/glossary/","level":1,"title":"Glossary","text":"<p>Definitions and explanations of Sellia terminology and concepts.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#a","level":2,"title":"A","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#api-key","level":3,"title":"API Key","text":"<p>A secret token used to authenticate your Sellia client with the tunnel server. Required for creating protected tunnels and accessing premium features.</p> <p>See: Authentication</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#b","level":2,"title":"B","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#basic-auth","level":3,"title":"Basic Auth","text":"<p>A simple authentication scheme that sends a username and password with each HTTP request using the <code>Authorization</code> header.</p> <p>Format: <code>username:password</code></p> <p>Example: <pre><code>sellia http 3000 --auth admin:secret\n</code></pre></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#c","level":2,"title":"C","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#client","level":3,"title":"Client","text":"<p>The <code>sellia</code> command-line tool running on your local machine that establishes and maintains tunnel connections.</p> <p>Contrast with: Server</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#d","level":2,"title":"D","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#database-sqlite","level":3,"title":"Database (SQLite)","text":"<p>Sellia uses SQLite for persisting tunnel state, reserved subdomains, and other data. Can be disabled with <code>SELLIA_NO_DB=1</code>.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#f","level":2,"title":"F","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#fallback-port","level":3,"title":"Fallback Port","text":"<p>The default port used when a request path doesn't match any configured route. If no routes match and port &gt; 0, the fallback port receives the request.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#h","level":2,"title":"H","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#host-header","level":3,"title":"Host Header","text":"<p>The HTTP <code>Host</code> header that specifies which host the client is trying to reach. Sellia preserves this header when forwarding requests.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#i","level":2,"title":"I","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#inspector","level":3,"title":"Inspector","text":"<p>A built-in web UI for inspecting HTTP requests flowing through your tunnels in real-time. Runs on <code>http://127.0.0.1:4040</code> by default.</p> <p>Features: - Live request monitoring - Request/response details - Headers and bodies - Status codes and timing - cURL command generation</p> <p>See: Inspector UI Guide</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#inspector-port","level":3,"title":"Inspector Port","text":"<p>The local port on which the inspector web server listens. Default: <code>4040</code>.</p> <p>Can be changed via: - <code>--inspector-port</code> flag - <code>inspector.port</code> config value</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#l","level":2,"title":"L","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#local-host","level":3,"title":"Local Host","text":"<p>The hostname or IP address of your local service that Sellia forwards requests to. Default: <code>localhost</code>.</p> <p>Example: <pre><code>sellia http 3000 --host 192.168.1.100\n</code></pre></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#local-port","level":3,"title":"Local Port","text":"<p>The port on your local machine that Sellia forwards HTTP requests to.</p> <p>Example: <pre><code>sellia http 3000  # Forwards to localhost:3000\n</code></pre></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#m","level":2,"title":"M","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#messagepack","level":3,"title":"MessagePack","text":"<p>A binary serialization format used for the tunnel protocol. Efficient and compact compared to JSON.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#p","level":2,"title":"P","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#protocol","level":3,"title":"Protocol","text":"<p>The MessagePack-based wire protocol used for communication between the Sellia client and server over WebSocket.</p> <p>Message types: - Auth: <code>auth</code>, <code>auth_ok</code>, <code>auth_error</code> - Tunnel: <code>tunnel_open</code>, <code>tunnel_ready</code>, <code>tunnel_close</code> - Request: <code>request_start</code>, <code>request_body</code>, <code>response_start</code>, <code>response_body</code>, <code>response_end</code> - WebSocket: <code>websocket_upgrade</code>, <code>websocket_frame</code>, <code>websocket_close</code> - Keepalive: <code>ping</code>, <code>pong</code></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#public-url","level":3,"title":"Public URL","text":"<p>The publicly accessible URL that external users use to reach your tunneled service.</p> <p>Format: <code>https://&lt;subdomain&gt;.sellia.me</code></p> <p>Example: <code>https://myapp.sellia.me</code></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#r","level":2,"title":"R","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#request-inspector","level":3,"title":"Request Inspector","text":"<p>See: Inspector</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#route","level":3,"title":"Route","text":"<p>A path-based rule that forwards requests matching a specific path pattern to a different port or host.</p> <p>Example: <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /api\n        port: 8080  # Forward /api* to port 8080\n</code></pre></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#route-pattern","level":3,"title":"Route Pattern","text":"<p>A path pattern used for matching incoming requests. Can be: - Exact: <code>/api</code> - Wildcard prefix: <code>/api/*</code> - Wildcard catch-all: <code>/*</code></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#reserved-subdomain","level":3,"title":"Reserved Subdomain","text":"<p>A subdomain that has been permanently reserved for your account, preventing others from using it.</p> <p>Managed via: <pre><code>sellia admin reserved add myapp\nsellia admin reserved remove myapp\n</code></pre></p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#s","level":2,"title":"S","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#server","level":3,"title":"Server","text":"<p>The centralized tunnel server (e.g., <code>sellia.me</code>) that accepts WebSocket connections from clients and forwards incoming HTTP requests to the appropriate client.</p> <p>Contrast with: Client</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#subdomain","level":3,"title":"Subdomain","text":"<p>The hostname prefix that identifies your tunnel. Combined with the server domain to form your public URL.</p> <p>Format: <code>&lt;subdomain&gt;.sellia.me</code></p> <p>Examples: - <code>myapp.sellia.me</code> - <code>demo-v2.sellia.me</code></p> <p>If not specified, a random subdomain is assigned (e.g., <code>a3f7b2c1.sellia.me</code> - 8 random hex characters).</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#t","level":2,"title":"T","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#tunnel","level":3,"title":"Tunnel","text":"<p>A secure, persistent connection between your local machine and the Sellia server, allowing external users to access your local service via a public URL.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#tunnel-client","level":3,"title":"Tunnel Client","text":"<p>See: Client</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#tunnel-id","level":3,"title":"Tunnel ID","text":"<p>A unique identifier assigned by the server when a tunnel is created. Used internally for routing requests.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#tunnel-registry","level":3,"title":"Tunnel Registry","text":"<p>Server-side storage of active tunnels and their metadata, including reserved subdomains and account ownership.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#v","level":2,"title":"V","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#vite","level":3,"title":"Vite","text":"<p>A modern frontend build tool used for developing and building the inspector UI.</p> <ul> <li>Dev server: <code>localhost:5173</code></li> <li>Build output: <code>web/dist/</code></li> </ul>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#w","level":2,"title":"W","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#websocket","level":3,"title":"WebSocket","text":"<p>A communication protocol that provides full-duplex communication channels over a single TCP connection. Used for: - Client-server tunnel connection - Inspector live updates - End-to-end WebSocket passthrough</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#websocket-passthrough","level":3,"title":"WebSocket Passthrough","text":"<p>The ability to tunnel WebSocket connections from the public URL through to your local service, maintaining the WebSocket protocol end-to-end.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#common-patterns","level":2,"title":"Common Patterns","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#forwarding","level":3,"title":"Forwarding","text":"<p>The process of relaying HTTP requests from the public URL to your local service and returning responses.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#proxying","level":3,"title":"Proxying","text":"<p>Acting as an intermediary between the public internet and your local service, forwarding requests and responses transparently.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#acronyms","level":2,"title":"Acronyms","text":"Acronym Meaning CLI Command-Line Interface HMR Hot Module Replacement (Vite feature) HTTP HyperText Transfer Protocol HTTPS HTTP Secure (TLS/SSL) UI User Interface URL Uniform Resource Locator WSS WebSocket Secure","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#related-concepts","level":2,"title":"Related Concepts","text":"","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#reverse-proxy","level":3,"title":"Reverse Proxy","text":"<p>Unlike a traditional reverse proxy (like nginx), Sellia creates tunnels from inside your network, eliminating the need for: - Public IP addresses - Router port forwarding - Firewall configuration</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#port-forwarding","level":3,"title":"Port Forwarding","text":"<p>Traditional method of exposing local services to the internet. Sellia eliminates the need for port forwarding by using outbound WebSocket connections.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#ngrok","level":3,"title":"ngrok","text":"<p>A similar commercial tunneling service. Sellia is an open-source alternative with a focus on simplicity and developer experience.</p>","path":["03 appendices","Glossary"],"tags":[]},{"location":"03-appendices/glossary/#see-also","level":2,"title":"See Also","text":"<ul> <li>Architecture Overview - System design</li> <li>Getting Started - Basic concepts</li> <li>Protocol Reference - Wire protocol details</li> </ul>","path":["03 appendices","Glossary"],"tags":[]},{"location":"appendices/","level":1,"title":"Appendices","text":"<p>Additional reference material for Sellia.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#overview","level":2,"title":"Overview","text":"<p>This section contains supplementary information, reference tables, and resources that don't fit in the main documentation sections.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#appendices_1","level":2,"title":"Appendices","text":"","path":["Appendices"],"tags":[]},{"location":"appendices/#glossary","level":3,"title":"Glossary","text":"<p>Terms and definitions used throughout the Sellia documentation.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#protocol-specification","level":3,"title":"Protocol Specification","text":"<p>Detailed specification of the Sellia protocol over WebSocket.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#configuration-reference","level":3,"title":"Configuration Reference","text":"<p>Complete reference for all configuration options.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#error-codes","level":3,"title":"Error Codes","text":"<p>List of error codes and their meanings.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#environment-variables","level":3,"title":"Environment Variables","text":"<p>Complete list of supported environment variables.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#resources","level":2,"title":"Resources","text":"","path":["Appendices"],"tags":[]},{"location":"appendices/#official-resources","level":3,"title":"Official Resources","text":"<ul> <li>Website: sellia.me</li> <li>GitHub: github.com/watzon/sellia</li> <li>Documentation: docs.sellia.me (coming soon)</li> <li>Issues: github.com/watzon/sellia/issues</li> </ul>","path":["Appendices"],"tags":[]},{"location":"appendices/#community","level":3,"title":"Community","text":"<ul> <li>Discussions: github.com/watzon/sellia/discussions</li> <li>Discord: (coming soon)</li> </ul>","path":["Appendices"],"tags":[]},{"location":"appendices/#related-projects","level":3,"title":"Related Projects","text":"<ul> <li>Crystal Language: crystal-lang.org</li> <li>MessagePack: msgpack.org</li> <li>WebSocket: websockets.spec</li> </ul>","path":["Appendices"],"tags":[]},{"location":"appendices/#legal","level":2,"title":"Legal","text":"","path":["Appendices"],"tags":[]},{"location":"appendices/#license","level":3,"title":"License","text":"<p>Sellia is released under the MIT License. See LICENSE for details.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#third-party-licenses","level":3,"title":"Third-Party Licenses","text":"<p>Sellia uses the following third-party libraries:</p> <ul> <li>Crystal - Apache 2.0</li> <li>MessagePack-Crystal - MIT</li> <li>WebSocket-Crystal - MIT</li> <li>React - MIT</li> <li>Vite - MIT</li> </ul> <p>See <code>shard.yml</code> and <code>web/package.json</code> for complete list.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#trademarks","level":3,"title":"Trademarks","text":"<p>Sellia is a trademark of Chris Watson. Other product and company names mentioned herein may be the trademarks of their respective owners.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#support","level":2,"title":"Support","text":"","path":["Appendices"],"tags":[]},{"location":"appendices/#getting-help","level":3,"title":"Getting Help","text":"<p>If you need help with Sellia:</p> <ol> <li>Documentation - Start with the user guide</li> <li>Issues - Search existing issues on GitHub</li> <li>Discussions - Ask questions in GitHub Discussions</li> <li>New Issue - Create a new issue if you found a bug</li> </ol>","path":["Appendices"],"tags":[]},{"location":"appendices/#professional-support","level":3,"title":"Professional Support","text":"<p>Professional support options are coming soon.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#contributing","level":2,"title":"Contributing","text":"<p>Want to contribute? See:</p> <ul> <li>Contributing Guide</li> <li>Development Setup</li> <li>Architecture</li> </ul>","path":["Appendices"],"tags":[]},{"location":"appendices/#version-history","level":2,"title":"Version History","text":"<p>See CHANGELOG.md for version history.</p>","path":["Appendices"],"tags":[]},{"location":"appendices/#quick-reference","level":2,"title":"Quick Reference","text":"","path":["Appendices"],"tags":[]},{"location":"appendices/#common-commands","level":3,"title":"Common Commands","text":"<p>Tunnel: <pre><code>sellia http 3000 --subdomain myapp\n</code></pre></p> <p>With auth: <pre><code>sellia http 3000 --auth user:pass\n</code></pre></p> <p>Start from config: <pre><code>sellia start\n</code></pre></p>","path":["Appendices"],"tags":[]},{"location":"appendices/#common-ports","level":3,"title":"Common Ports","text":"Port Usage 3000 Default local port for forwarding 4040 Default inspector port 5173 Vite dev server (development)","path":["Appendices"],"tags":[]},{"location":"appendices/#file-locations","level":3,"title":"File Locations","text":"File Location Config <code>~/.config/sellia/sellia.yml</code>, <code>~/.sellia.yml</code>, or <code>./sellia.yml</code> Database Platform-dependent (see Defaults) Binary <code>sellia</code> (installed via Homebrew, Scoop, or built from source)","path":["Appendices"],"tags":[]},{"location":"appendices/#default-values","level":3,"title":"Default Values","text":"Setting Default Local port 3000 Inspector port 4040 Local host localhost Server https://sellia.me","path":["Appendices"],"tags":[]},{"location":"appendices/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>New Users: Getting Started</li> <li>Troubleshooting: Troubleshooting</li> <li>Contributing: Contributing</li> </ul>","path":["Appendices"],"tags":[]},{"location":"appendices/cli-flags/","level":1,"title":"CLI Flags Reference","text":"<p>Complete reference of all command-line flags and options for Sellia.</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#commands-overview","level":2,"title":"Commands Overview","text":"<pre><code>sellia &lt;command&gt; [options]\n</code></pre> <p>Available commands: - <code>http</code> - Create HTTP tunnel to local port - <code>start</code> - Start tunnels from config file - <code>auth</code> - Manage authentication - <code>admin</code> - Admin commands (requires admin API key) - <code>update</code> - Update to latest version - <code>version</code> - Show version - <code>help</code> - Show help</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#global-options","level":2,"title":"Global Options","text":"<p>These options can be used with any command (though availability varies by command):</p> Flag Short Type Description Available In <code>--help</code> <code>-h</code> - Show help message All commands <code>--version</code> <code>-v</code> - Show version Top-level only","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-http-command","level":2,"title":"<code>sellia http</code> Command","text":"<p>Create a single HTTP tunnel to a local port.</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#usage","level":3,"title":"Usage","text":"<pre><code>sellia http [port] [options]\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#options","level":3,"title":"Options","text":"Flag Short Argument Default Description <code>--subdomain</code> <code>-s</code> <code>NAME</code> (random) Request specific subdomain <code>--auth</code> <code>-a</code> <code>USER:PASS</code> (none) Enable basic auth protection <code>--host</code> <code>-H</code> <code>HOST</code> <code>localhost</code> Local host to forward to <code>--server</code> - <code>URL</code> From config Tunnel server URL <code>--api-key</code> <code>-k</code> <code>KEY</code> From config API key for authentication <code>--inspector-port</code> <code>-i</code> <code>PORT</code> <code>4040</code> Inspector UI port <code>--open</code> <code>-o</code> - <code>false</code> Open inspector in browser on connect <code>--no-inspector</code> - - <code>false</code> Disable the request inspector <code>--help</code> <code>-h</code> - - Show help message","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#positional-arguments","level":3,"title":"Positional Arguments","text":"Argument Type Required Description <code>port</code> Integer No Local port to forward (default: 3000)","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#examples","level":3,"title":"Examples","text":"<pre><code># Basic tunnel\nsellia http 3000\n\n# With custom subdomain\nsellia http 3000 --subdomain myapp\n\n# With basic auth\nsellia http 3000 --auth admin:secret\n\n# Custom local host\nsellia http 8080 --host 192.168.1.100\n\n# Disable inspector\nsellia http 3000 --no-inspector\n\n# Custom inspector port and auto-open\nsellia http 3000 --inspector-port 8080 --open\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-start-command","level":2,"title":"<code>sellia start</code> Command","text":"<p>Start multiple tunnels from config file.</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#usage_1","level":3,"title":"Usage","text":"<pre><code>sellia start [options]\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#options_1","level":3,"title":"Options","text":"Flag Short Argument Default Description <code>--config</code> <code>-c</code> <code>FILE</code> <code>sellia.yml</code> Config file path <code>--help</code> <code>-h</code> - - Show help message","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#examples_1","level":3,"title":"Examples","text":"<pre><code># Use default config file\nsellia start\n\n# Use custom config\nsellia start --config tunnels.yml\nsellia start -c /path/to/config.yml\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-auth-command","level":2,"title":"<code>sellia auth</code> Command","text":"<p>Manage authentication (save/remove API keys).</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#usage_2","level":3,"title":"Usage","text":"<pre><code>sellia auth &lt;subcommand&gt;\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#subcommands","level":3,"title":"Subcommands","text":"Subcommand Description <code>login</code> Save API key for authentication <code>logout</code> Remove saved API key <code>status</code> Show current authentication status","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-auth-login","level":3,"title":"<code>sellia auth login</code>","text":"<p>Prompts for and saves API key to <code>~/.config/sellia/sellia.yml</code>.</p> <pre><code>sellia auth login\n# Prompts: API Key: [paste key]\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-auth-logout","level":3,"title":"<code>sellia auth logout</code>","text":"<p>Removes saved API key from config file.</p> <pre><code>sellia auth logout\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-auth-status","level":3,"title":"<code>sellia auth status</code>","text":"<p>Shows current authentication status and masked API key.</p> <pre><code>sellia auth status\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-admin-command","level":2,"title":"<code>sellia admin</code> Command","text":"<p>Admin commands for server management (requires admin API key).</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#usage_3","level":3,"title":"Usage","text":"<pre><code>sellia admin &lt;subcommand&gt; [options]\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#subcommands_1","level":3,"title":"Subcommands","text":"Subcommand Description <code>reserved</code> Manage reserved subdomains <code>api-keys</code> Manage API keys","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#common-options","level":3,"title":"Common Options","text":"Flag Short Argument Default Description <code>--server</code> - <code>URL</code> From config Tunnel server URL","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-admin-reserved-commands","level":3,"title":"<code>sellia admin reserved</code> Commands","text":"Subcommand Description <code>list</code> List all reserved subdomains <code>add &lt;subdomain&gt;</code> Add a reserved subdomain <code>remove &lt;subdomain&gt;</code> Remove a reserved subdomain <code>rm &lt;subdomain&gt;</code> Alias for remove","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-admin-reserved-options","level":4,"title":"<code>sellia admin reserved</code> Options","text":"Flag Argument Description <code>--reason</code> <code>TEXT</code> Reason for reserving the subdomain <code>--server</code> <code>URL</code> Server URL (default: from config)","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-admin-api-keys-commands","level":3,"title":"<code>sellia admin api-keys</code> Commands","text":"Subcommand Description <code>list</code> List all API keys <code>create</code> Create a new API key <code>revoke &lt;prefix&gt;</code> Revoke an API key <code>rm &lt;prefix&gt;</code> Alias for revoke","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-admin-api-keys-options","level":4,"title":"<code>sellia admin api-keys</code> Options","text":"Flag Argument Description <code>--name</code> <code>NAME</code> Friendly name for the key <code>--master</code> - Create master key (admin access) <code>--server</code> <code>URL</code> Server URL (default: from config)","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#examples_2","level":3,"title":"Examples","text":"<pre><code># List reserved subdomains\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved list\n\n# Reserve a subdomain\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved add myapp\n\n# Reserve with reason\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved add myapp --reason \"Production app\"\n\n# Release a subdomain\nSELLIA_ADMIN_API_KEY=key_admin sellia admin reserved remove myapp\n\n# List API keys\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys list\n\n# Create new API key\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys create --name \"Dev key\"\n\n# Create master key\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys create --master --name \"Admin key\"\n\n# Revoke API key\nSELLIA_ADMIN_API_KEY=key_admin sellia admin api-keys revoke key_\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#sellia-update-command","level":2,"title":"<code>sellia update</code> Command","text":"<p>Update Sellia to the latest version.</p>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#usage_4","level":3,"title":"Usage","text":"<pre><code>sellia update [options]\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#options_2","level":3,"title":"Options","text":"Flag Short Argument Default Description <code>--check</code> <code>-c</code> - <code>false</code> Check for updates without installing <code>--force</code> <code>-f</code> - <code>false</code> Force reinstall even if up-to-date <code>--version</code> <code>-v</code> <code>VERSION</code> (latest) Update to specific version <code>--help</code> <code>-h</code> - - Show help message","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#examples_3","level":3,"title":"Examples","text":"<pre><code># Check for updates\nsellia update --check\n\n# Update to latest\nsellia update\n\n# Force reinstall\nsellia update --force\n\n# Update to specific version\nsellia update --version 0.2.0\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#exit-codes","level":2,"title":"Exit Codes","text":"Code Meaning <code>0</code> Success <code>1</code> Error occurred","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#configuration-precedence","level":2,"title":"Configuration Precedence","text":"<p>When multiple sources provide the same value, priority is:</p> <ol> <li>CLI flags (highest)</li> <li>Environment variables</li> <li>Config files</li> <li>Default values (lowest)</li> </ol> <p>Example:</p> <pre><code># Config file has: server: https://default.com\n# Environment: SELLIA_SERVER=https://env.com\n# CLI flag: --server https://cli.com\n\nsellia http 3000 --server https://cli.com\n# Result: Uses https://cli.com (CLI flag wins)\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#common-flag-combinations","level":2,"title":"Common Flag Combinations","text":"","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#development","level":3,"title":"Development","text":"<pre><code># Fast reload with inspector\nsellia http 3000 --open --inspector-port 4040\n\n# Multiple services with routing\nsellia http 3000 --subdomain dev\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#production","level":3,"title":"Production","text":"<pre><code># With auth and custom subdomain\nsellia http 3000 --subdomain myapp --auth admin:secret\n\n# Custom server\nsellia http 3000 --server https://tunnel.mycompany.com\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#debugging","level":3,"title":"Debugging","text":"<pre><code># Disable inspector for minimal overhead\nsellia http 3000 --no-inspector\n\n# Local development server\nsellia http 3000 --host 0.0.0.0 --server http://localhost:8080\n</code></pre>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/cli-flags/#see-also","level":2,"title":"See Also","text":"<ul> <li>Environment Variables Reference - Environment-based configuration</li> <li>Configuration Reference - Config file format</li> <li>Getting Started Guide - Basic usage</li> </ul>","path":["Appendices","CLI Flags Reference"],"tags":[]},{"location":"appendices/config-reference/","level":1,"title":"Configuration Schema Reference","text":"<p>Complete reference for the <code>sellia.yml</code> configuration file format.</p>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#config-file-locations","level":2,"title":"Config File Locations","text":"<p>Sellia loads configuration from multiple locations in order (later overrides earlier):</p> <ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current working directory)</li> </ol>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#root-level-schema","level":2,"title":"Root-Level Schema","text":"<pre><code># Tunnel server URL\nserver: String (default: \"https://sellia.me\")\n\n# API authentication key (optional)\napi_key: String?\n\n# Inspector configuration\ninspector:\n  port: Int32 (default: 4040)\n  open: Boolean (default: false)\n\n# Database configuration\ndatabase:\n  path: String? (optional)\n  enabled: Boolean? (optional)\n\n# Tunnel definitions (key = tunnel name)\ntunnels:\n  &lt;name&gt;:\n    type: String (default: \"http\")\n    port: Int32 (required)\n    subdomain: String? (optional)\n    auth: String? (optional, format: \"user:pass\")\n    local_host: String (default: \"localhost\")\n    routes: Array[RouteConfig] (default: [])\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#complete-schema-reference","level":2,"title":"Complete Schema Reference","text":"","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#server","level":3,"title":"server","text":"<p>Type: <code>String</code> Default: <code>\"https://sellia.me\"</code> Required: No</p> <p>The tunnel server URL to connect to.</p> <pre><code>server: https://sellia.me\nserver: http://localhost:8080  # Custom server\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#api_key","level":3,"title":"api_key","text":"<p>Type: <code>String?</code> Default: <code>nil</code> Required: No</p> <p>API authentication key for protected tunnels. Can also be set via <code>SELLIA_API_KEY</code> environment variable.</p> <pre><code>api_key: key_abc123...\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#inspector","level":3,"title":"inspector","text":"<p>Type: <code>Inspector</code> object Required: No</p> <p>Configuration for the built-in request inspector UI.</p>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#inspectorport","level":4,"title":"inspector.port","text":"<p>Type: <code>Int32</code> Default: <code>4040</code> Required: No</p> <p>Local port for the inspector web UI.</p> <pre><code>inspector:\n  port: 4040\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#inspectoropen","level":4,"title":"inspector.open","text":"<p>Type: <code>Boolean</code> Default: <code>false</code> Required: No</p> <p>Automatically open inspector in browser when tunnel connects.</p> <pre><code>inspector:\n  open: true\n</code></pre> <p>Example:</p> <pre><code>inspector:\n  port: 8080\n  open: true\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#database","level":3,"title":"database","text":"<p>Type: <code>DatabaseConfig</code> object Required: No</p> <p>Configuration for SQLite database persistence.</p>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#databasepath","level":4,"title":"database.path","text":"<p>Type: <code>String?</code> Default: <code>nil</code> (uses default location) Required: No</p> <p>Custom path for the SQLite database file.</p> <pre><code>database:\n  path: /custom/path/sellia.db\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#databaseenabled","level":4,"title":"database.enabled","text":"<p>Type: <code>Boolean?</code> Default: <code>nil</code> (enables database) Required: No</p> <p>Enable or disable database persistence. Set to <code>false</code> to disable.</p> <p>Note: The behavior is inverted from environment variables. When set to <code>false</code> in config, it enables the database. When set via <code>SELLIA_NO_DB</code> environment variable, <code>\"true\"</code> or <code>\"1\"</code> disables the database.</p> <pre><code>database:\n  enabled: false  # Disables database\n</code></pre> <p>Example:</p> <pre><code>database:\n  path: /data/sellia.db\n  enabled: true  # Enables database explicitly\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#tunnels","level":3,"title":"tunnels","text":"<p>Type: <code>Hash&lt;String, TunnelConfig&gt;</code> Required: No Key: Tunnel name (used for identification)</p> <p>Named tunnel configurations for use with <code>sellia start</code>.</p>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#tunnel-configuration","level":4,"title":"Tunnel Configuration","text":"<p>Each tunnel has the following properties:</p>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#type","level":5,"title":"type","text":"<p>Type: <code>String</code> Default: <code>\"http\"</code> Required: No</p> <p>Tunnel type. Currently only <code>\"http\"</code> is supported.</p> <pre><code>tunnels:\n  web:\n    type: http\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#port","level":5,"title":"port","text":"<p>Type: <code>Int32</code> Default: (none) Required: Yes</p> <p>Local port to forward to.</p> <pre><code>tunnels:\n  web:\n    port: 3000\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#subdomain","level":5,"title":"subdomain","text":"<p>Type: <code>String?</code> Default: <code>nil</code> (random subdomain assigned) Required: No</p> <p>Request a specific subdomain for the public URL.</p> <pre><code>tunnels:\n  web:\n    subdomain: myapp\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#auth","level":5,"title":"auth","text":"<p>Type: <code>String?</code> Default: <code>nil</code> Required: No Format: <code>\"username:password\"</code></p> <p>Enable basic authentication for the tunnel.</p> <pre><code>tunnels:\n  web:\n    auth: admin:secret123\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#local_host","level":5,"title":"local_host","text":"<p>Type: <code>String</code> Default: <code>\"localhost\"</code> Required: No</p> <p>Local hostname to forward to.</p> <pre><code>tunnels:\n  web:\n    local_host: 127.0.0.1\n  docker:\n    local_host: host.docker.internal\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#routes","level":5,"title":"routes","text":"<p>Type: <code>Array[RouteConfig]</code> Default: <code>[]</code> Required: No</p> <p>Path-based routing rules to forward different paths to different ports.</p> <p>RouteConfig Properties:</p> <ul> <li><code>path</code> (String, required): Path pattern (e.g., <code>/api</code>, <code>/admin/*</code>)</li> <li><code>port</code> (Int32, required): Target port</li> <li><code>host</code> (String?, optional): Override target host</li> </ul> <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /api\n        port: 8080\n      - path: /admin\n        port: 9000\n        host: admin.local\n      - path: /static/*\n        port: 3001\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#complete-examples","level":2,"title":"Complete Examples","text":"","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#minimal-config","level":3,"title":"Minimal Config","text":"<pre><code># sellia.yml\nserver: https://sellia.me\napi_key: key_abc123\n\ntunnels:\n  web:\n    port: 3000\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#multi-tunnel-with-routing","level":3,"title":"Multi-Tunnel with Routing","text":"<pre><code>server: https://sellia.me\napi_key: key_abc123\n\ninspector:\n  port: 4040\n  open: true\n\ndatabase:\n  enabled: true\n  path: /data/sellia.db\n\ntunnels:\n  frontend:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 8080\n      - path: /admin\n        port: 9000\n\n  api:\n    port: 8080\n    subdomain: api\n\n  admin:\n    port: 9000\n    auth: admin:secret\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#development-config","level":3,"title":"Development Config","text":"<pre><code># Development environment\nserver: http://localhost:8080\napi_key: dev-key\n\ninspector:\n  port: 4040\n  open: true\n\ndatabase:\n  enabled: false  # Disable persistence in dev\n\ntunnels:\n  web:\n    port: 3000\n    local_host: localhost\n</code></pre>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#config-merging","level":2,"title":"Config Merging","text":"<p>When multiple config files exist, they are merged with the following rules:</p> <ul> <li>Scalar values: Later config overrides earlier</li> <li>Hash values: Merged recursively (tunnels are combined)</li> <li>Array values: Later config replaces earlier</li> </ul> <p>Example:</p> <pre><code># ~/.config/sellia/sellia.yml\nserver: https://sellia.me\napi_key: global-key\n\ntunnels:\n  web:\n    port: 3000\n</code></pre> <pre><code># ./sellia.yml\napi_key: local-key  # Overrides global\n\ntunnels:\n  web:\n    subdomain: myapp  # Merged with web tunnel\n  api:               # New tunnel added\n    port: 8080\n</code></pre> <p>Result: <pre><code>server: https://sellia.me\napi_key: local-key  # Local override wins\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp  # Both properties present\n  api:\n    port: 8080\n</code></pre></p>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#validation-rules","level":2,"title":"Validation Rules","text":"<ol> <li>Required Fields: Only <code>tunnel.port</code> is required for each tunnel</li> <li>Port Range: Ports must be between 1-65535</li> <li>Auth Format: Must be <code>username:password</code></li> <li>Route Paths: Must start with <code>/</code></li> <li>Subdomain: Must be valid hostname (alphanumeric, hyphens)</li> </ol>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/config-reference/#see-also","level":2,"title":"See Also","text":"<ul> <li>Environment Variables Reference - Environment-based configuration</li> <li>CLI Flags Reference - Command-line options</li> <li>Getting Started Guide - Basic setup</li> </ul>","path":["Appendices","Configuration Schema Reference"],"tags":[]},{"location":"appendices/defaults/","level":1,"title":"Default Values Reference","text":"<p>Complete list of default values used throughout Sellia.</p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#configuration-defaults","level":2,"title":"Configuration Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#server-configuration","level":3,"title":"Server Configuration","text":"Setting Default Value Location <code>server</code> <code>https://sellia.me</code> Config, ENV <code>api_key</code> <code>nil</code> (none required) Config, ENV <code>local_host</code> <code>localhost</code> CLI flag, Config","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#inspector-defaults","level":3,"title":"Inspector Defaults","text":"Setting Default Value Location <code>inspector.port</code> <code>4040</code> Config, CLI flag <code>inspector.open</code> <code>false</code> Config, CLI flag <code>--no-inspector</code> <code>false</code> (inspector enabled) CLI flag","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#database-defaults","level":3,"title":"Database Defaults","text":"Setting Default Value Location <code>database.enabled</code> <code>nil</code> (enabled by default) Config <code>database.path</code> Platform-dependent Config, ENV <code>SELLIA_NO_DB</code> <code>false</code> (database enabled) ENV <p>Note: When <code>SELLIA_NO_DB</code> is set to <code>\"true\"</code> or <code>\"1\"</code>, it disables the database. This is inverted from the <code>database.enabled</code> config setting where <code>false</code> disables the database.</p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#tunnel-defaults","level":3,"title":"Tunnel Defaults","text":"Setting Default Value Location <code>port</code> <code>3000</code> CLI argument <code>type</code> <code>http</code> Config <code>subdomain</code> <code>nil</code> (random assigned) Config, CLI flag <code>auth</code> <code>nil</code> (no auth) Config, CLI flag <code>routes</code> <code>[]</code> (empty) Config","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#network-defaults","level":2,"title":"Network Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#timeouts","level":3,"title":"Timeouts","text":"Setting Default Value Description <code>reconnect_delay</code> <code>3 seconds</code> Initial reconnect delay <code>reconnect_delay * attempt</code> Linear backoff Subsequent reconnects <code>max_reconnect_attempts</code> <code>10</code> Maximum reconnect attempts WebSocket ping timeout Default Crystal WebSocket timeout Keepalive interval","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#ports","level":3,"title":"Ports","text":"Setting Default Value Description Inspector port <code>4040</code> Local inspector UI Vite dev server <code>5173</code> Development build server Default local port <code>3000</code> Default forwarded port","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#urls","level":3,"title":"URLs","text":"Setting Default Value Description Tunnel server <code>https://sellia.me</code> Production server WebSocket endpoint <code>/ws</code> Server WebSocket path Inspector API <code>/api/*</code> Inspector REST API Inspector live <code>/api/live</code> Inspector WebSocket endpoint","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#path-defaults","level":2,"title":"Path Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#config-file-search-order","level":3,"title":"Config File Search Order","text":"<ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current directory)</li> </ol>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#database-path","level":3,"title":"Database Path","text":"<p>Platform-dependent locations:</p> Platform Default Path macOS <code>~/Library/Application Support/Sellia/sellia.db</code> Linux <code>~/.local/share/sellia/sellia.db</code> Windows <code>%APPDATA%/Sellia/sellia.db</code> <p>Can be overridden via: - <code>SELLIA_DB_PATH</code> environment variable - <code>database.path</code> in config file</p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#asset-paths","level":3,"title":"Asset Paths","text":"Setting Path Description Inspector UI (dev) Proxies to <code>localhost:5173</code> Vite dev server Inspector UI (prod) Baked into binary <code>web/dist/</code> contents","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#requestresponse-defaults","level":2,"title":"Request/Response Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#body-size-limits","level":3,"title":"Body Size Limits","text":"Setting Default Value Description Inspector display limit <code>100,000 bytes</code> (100 KB) Max body size for UI display Body truncation suffix <code>\\n... (truncated)</code> Added to truncated bodies","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#request-storage","level":3,"title":"Request Storage","text":"Setting Default Value Description Max stored requests <code>1000</code> Requests kept in memory Storage duration Session-based Cleared on restart WebSocket buffer <code>8192 bytes</code> Response chunk size","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#reconnection-defaults","level":2,"title":"Reconnection Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#linear-backoff","level":3,"title":"Linear Backoff","text":"Attempt Delay 1 3 seconds 2 6 seconds 3 9 seconds ... ... 10 30 seconds <p>Formula: <code>delay = reconnect_delay * reconnect_attempts</code></p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#auto-reconnect","level":3,"title":"Auto-Reconnect","text":"Setting Default Value Description <code>auto_reconnect</code> <code>true</code> Automatically reconnect on disconnect <code>max_reconnect_attempts</code> <code>10</code> Give up after this many attempts <p>Disabled on certain errors (e.g., authentication failure).</p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#logging-defaults","level":2,"title":"Logging Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#log-levels","level":3,"title":"Log Levels","text":"Environment Variable Default Level Description <code>LOG_LEVEL</code> <code>warn</code> Minimum log level (unset) <code>warn</code> Crystal default <p>Available levels: <code>fatal</code>, <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug</code>, <code>trace</code>.</p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#log-format","level":3,"title":"Log Format","text":"Mode Default Format Enable Production JSON Default Text Human-readable <code>LOG_TEXT=1</code>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#protocol-defaults","level":2,"title":"Protocol Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#message-defaults","level":3,"title":"Message Defaults","text":"Setting Default Value Serialization MessagePack WebSocket frame size <code>8192 bytes</code> (response chunks) Ping interval Server-controlled","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#message-types","level":3,"title":"Message Types","text":"Type Default Behavior Auth Sent if <code>api_key</code> is set Tunnel Open Sent immediately after auth Ping/ Pong Automatic keepalive","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#development-defaults","level":2,"title":"Development Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#vite-dev-server","level":3,"title":"Vite Dev Server","text":"Setting Default Value Host <code>localhost</code> Port <code>5173</code> HMR WebSocket (not proxied in inspector)","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#build-defaults","level":3,"title":"Build Defaults","text":"Setting Default Value Description Build mode <code>debug</code> (default) Faster compilation Release mode <code>--release</code> flag Optimized binary Static assets <code>web/dist/</code> Production UI location","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#browser-opening","level":2,"title":"Browser Opening","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#default-browsers-by-platform","level":3,"title":"Default Browsers by Platform","text":"Platform Command File macOS <code>open</code> <code>src/cli/main.cr:522</code> Linux <code>xdg-open</code> <code>src/cli/main.cr:524</code> Windows <code>cmd /c start</code> <code>src/cli/main.cr:526</code> <p>Triggered by: - <code>inspector.open: true</code> in config - <code>--open</code> / <code>-o</code> CLI flag</p>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#rate-limiting-defaults","level":2,"title":"Rate Limiting Defaults","text":"Setting Default Value Description Client rate limit Server-controlled Requests per minute Tunnel creation Server-controlled Per-account limit","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#security-defaults","level":2,"title":"Security Defaults","text":"Setting Default Value Description TLS/SSL Required for WSS Production Inspector binding <code>127.0.0.1</code> only Localhost only CORS headers <code>*</code> (all origins) Inspector API","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#websocket-defaults","level":2,"title":"WebSocket Defaults","text":"","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#inspector-websocket","level":3,"title":"Inspector WebSocket","text":"Setting Default Value Path <code>/api/live</code> Reconnect delay <code>3 seconds</code> Max retries Unlimited (with UI reconnection)","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#tunnel-websocket","level":3,"title":"Tunnel WebSocket","text":"Setting Default Value Scheme <code>wss://</code> (HTTPS) or <code>ws://</code> (HTTP) Auto ping/pong Enabled","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/defaults/#see-also","level":2,"title":"See Also","text":"<ul> <li>Configuration Reference - Config file schema</li> <li>Environment Variables - ENV configuration</li> <li>CLI Flags Reference - Command-line options</li> </ul>","path":["Appendices","Default Values Reference"],"tags":[]},{"location":"appendices/env-vars/","level":1,"title":"Environment Variables Reference","text":"<p>Complete list of environment variables supported by Sellia.</p>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#overview","level":2,"title":"Overview","text":"<p>Environment variables provide a way to configure Sellia without using config files or CLI flags. They follow the naming convention <code>SELLIA_*</code> and can be set in your shell environment, <code>.envrc</code>, or system configuration.</p>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#priority-order","level":2,"title":"Priority Order","text":"<p>Configuration is loaded in the following order (later overrides earlier):</p> <ol> <li>Default values (hardcoded)</li> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code></li> <li>Environment variables (highest priority)</li> </ol> <p>Note: When multiple config files exist, they are merged according to the rules in Configuration Reference.</p>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#environment-variables","level":2,"title":"Environment Variables","text":"Variable Type Default Description <code>SELLIA_SERVER</code> String <code>https://sellia.me</code> Tunnel server URL. Override to use a custom tunnel server. <code>SELLIA_API_KEY</code> String (none) API authentication key. Required for protected tunnels. <code>SELLIA_ADMIN_API_KEY</code> String (none) Admin API key for <code>sellia admin</code> commands. <code>SELLIA_DB_PATH</code> String (none) Custom path for SQLite database file. Overrides default location. <code>SELLIA_NO_DB</code> Boolean <code>false</code> Disable database persistence. Set to <code>1</code> or <code>true</code> to disable. <p>Important: <code>SELLIA_NO_DB</code> behavior is inverted - setting it to <code>\"true\"</code> or <code>\"1\"</code> disables the database, while the config file's <code>database.enabled: false</code> also disables the database. Both achieve the same result but through opposite logic.</p>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#setting-api-key","level":3,"title":"Setting API Key","text":"<pre><code># In shell\nexport SELLIA_API_KEY=\"your-api-key-here\"\nsellia http 3000\n\n# Single command\nSELLIA_API_KEY=\"key\" sellia http 3000\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#using-custom-server","level":3,"title":"Using Custom Server","text":"<pre><code>export SELLIA_SERVER=\"https://tunnel.example.com\"\nsellia http 3000\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#disabling-database","level":3,"title":"Disabling Database","text":"<pre><code># Run without persisting tunnel state\nSELLIA_NO_DB=1 sellia http 3000\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#custom-database-location","level":3,"title":"Custom Database Location","text":"<pre><code>export SELLIA_DB_PATH=\"/mnt/data/sellia.db\"\nsellia http 3000\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#security-considerations","level":2,"title":"Security Considerations","text":"","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#api-key-security","level":3,"title":"API Key Security","text":"<ul> <li>Never commit API keys to version control</li> <li>Use <code>.envrc</code> or <code>.env.local</code> files (add to <code>.gitignore</code>)</li> <li>Consider using secret management tools in production</li> </ul>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#example-gitignore","level":3,"title":"Example .gitignore","text":"<pre><code>.env\n.env.local\n.envrc\nsellia.yml\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#environment-specific-configuration","level":2,"title":"Environment-Specific Configuration","text":"","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#development","level":3,"title":"Development","text":"<pre><code># .envrc for development\nexport SELLIA_SERVER=\"http://localhost:8080\"\nexport SELLIA_API_KEY=\"dev-key\"\nexport SELLIA_DB_PATH=\"./dev.db\"\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#production","level":3,"title":"Production","text":"<pre><code># Production environment\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"${SECRET_API_KEY}\"\n# Database enabled by default, no need to set SELLIA_NO_DB\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#testing","level":3,"title":"Testing","text":"<pre><code># Disable persistence for tests\nexport SELLIA_NO_DB=1\nexport SELLIA_SERVER=\"http://test-server:8080\"\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#interaction-with-config-files","level":2,"title":"Interaction with Config Files","text":"<p>Environment variables override config file values:</p> <pre><code># sellia.yml\nserver: https://default-server.com\napi_key: default-key\n</code></pre> <pre><code># Environment overrides both\nexport SELLIA_SERVER=\"https://custom-server.com\"\nexport SELLIA_API_KEY=\"custom-key\"\n\n# Result: Uses custom values\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#logging","level":2,"title":"Logging","text":"<p>Sellia respects Crystal's standard logging environment variables:</p> Variable Description Example <code>LOG_LEVEL</code> Minimum log level <code>LOG_LEVEL=debug</code> <code>LOG_TEXT</code> Use text format (default is JSON) <code>LOG_TEXT=1</code> <p>Example:</p> <pre><code>LOG_LEVEL=debug sellia http 3000\n</code></pre>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/env-vars/#see-also","level":2,"title":"See Also","text":"<ul> <li>Configuration Reference - Config file format</li> <li>CLI Flags Reference - Command-line options</li> <li>Defaults Reference - Default values</li> </ul>","path":["Appendices","Environment Variables Reference"],"tags":[]},{"location":"appendices/error-codes/","level":1,"title":"Error Codes Reference","text":"<p>Complete list of error messages, their meanings, and how to resolve them.</p>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Authentication Errors</li> <li>Connection Errors</li> <li>Tunnel Errors</li> <li>Routing Errors</li> <li>Inspector Errors</li> <li>Configuration Errors</li> <li>Network Errors</li> </ul>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#authentication-errors","level":2,"title":"Authentication Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#authentication-failed-invalid-api-key","level":3,"title":"<code>Authentication failed: Invalid API key</code>","text":"<p>Cause: The API key provided is invalid or has been revoked.</p> <p>Solution: 1. Verify your API key is correct 2. Check if the key has expired or been revoked 3. Re-authenticate: <code>sellia auth login</code></p> <pre><code># Re-authenticate\nsellia auth login\n# Enter your new API key\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#authentication-failed-api-key-required","level":3,"title":"<code>Authentication failed: API key required</code>","text":"<p>Cause: The tunnel server requires an API key, but none was provided.</p> <p>Solution: 1. Set API key via environment variable: <pre><code>export SELLIA_API_KEY=\"your-api-key\"\nsellia http 3000\n</code></pre></p> <ol> <li> <p>Or save it to config: <pre><code>sellia auth login\n</code></pre></p> </li> <li> <p>Or pass via flag: <pre><code>sellia http 3000 --api-key your-key\n</code></pre></p> </li> </ol>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#connection-errors","level":2,"title":"Connection Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#connection-failed-connection-refused","level":3,"title":"<code>Connection failed: Connection refused</code>","text":"<p>Cause: Cannot reach the tunnel server. Server may be down or network unreachable.</p> <p>Solution: 1. Check your internet connection 2. Verify the server URL is correct 3. Check if the tunnel server is running</p> <pre><code># Test connectivity\ncurl -I https://sellia.me\n\n# Use custom server if default is down\nsellia http 3000 --server https://backup-server.com\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#connection-failed-connection-timeout","level":3,"title":"<code>Connection failed: Connection timeout</code>","text":"<p>Cause: Connection attempt timed out. Network issues or firewall blocking.</p> <p>Solution: 1. Check network connectivity 2. Verify firewall settings 3. Check if proxy is required</p> <pre><code># Test with curl\ncurl -v https://sellia.me\n\n# Use with proxy if needed\nexport HTTP_PROXY=http://proxy.example.com:8080\nexport HTTPS_PROXY=http://proxy.example.com:8080\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#max-reconnection-attempts-exceeded","level":3,"title":"<code>Max reconnection attempts exceeded</code>","text":"<p>Cause: Lost connection and failed to reconnect after maximum attempts.</p> <p>Solution: 1. Check network stability 2. Restart the tunnel 3. Check tunnel server status</p> <pre><code># Restart tunnel\n# Press Ctrl+C to stop, then:\nsellia http 3000\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#tunnel-errors","level":2,"title":"Tunnel Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#tunnel-closed-subdomain-xxx-not-available","level":3,"title":"<code>Tunnel closed: Subdomain 'xxx' not available</code>","text":"<p>Cause: Requested subdomain is already taken or reserved.</p> <p>Solution: 1. Try a different subdomain 2. Use random subdomain (omit <code>--subdomain</code> flag) 3. Check if you own the subdomain: <code>sellia auth status</code></p> <pre><code># Try different subdomain\nsellia http 3000 --subdomain myapp2\n\n# Let server assign random subdomain\nsellia http 3000\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#tunnel-closed-rate-limit-exceeded","level":3,"title":"<code>Tunnel closed: Rate limit exceeded</code>","text":"<p>Cause: Too many tunnel creation attempts in short time.</p> <p>Solution: 1. Wait a few minutes before retrying 2. Contact support if limit is too restrictive</p>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#tunnel-closed-account-suspended","level":3,"title":"<code>Tunnel closed: Account suspended</code>","text":"<p>Cause: Your account has been suspended.</p> <p>Solution: 1. Check your email for suspension notice 2. Contact support to resolve</p>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#routing-errors","level":2,"title":"Routing Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#no-route-matched-path-xxx","level":3,"title":"<code>No route matched path: /xxx</code>","text":"<p>Cause: Request path doesn't match any configured route and no fallback port.</p> <p>Solution: 1. Check your route configuration 2. Ensure paths start with <code>/</code> 3. Add a catch-all route: <code>/*</code></p> <pre><code># sellia.yml\ntunnels:\n  app:\n    port: 3000  # Fallback\n    routes:\n      - path: /api\n        port: 8080\n      - path: /*\n        port: 3000  # Catch-all\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#no-route-matched-for-xxx","level":3,"title":"<code>No route matched for /xxx</code>","text":"<p>Cause: WebSocket request path doesn't match any route.</p> <p>Solution: 1. Add route for WebSocket path 2. Ensure route includes the WebSocket endpoint</p> <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /ws\n        port: 8080  # WebSocket server\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#inspector-errors","level":2,"title":"Inspector Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#failed-to-bind-inspector-to-port-4040-address-already-in-use","level":3,"title":"<code>Failed to bind inspector to port 4040: Address already in use</code>","text":"<p>Cause: Inspector port is already in use by another application.</p> <p>Solution: 1. Use a different port: <pre><code>sellia http 3000 --inspector-port 4041\n</code></pre></p> <ol> <li> <p>Or disable inspector: <pre><code>sellia http 3000 --no-inspector\n</code></pre></p> </li> <li> <p>Or find and stop the process using the port: <pre><code># On macOS/Linux\nlsof -i :4040\nkill -9 &lt;PID&gt;\n</code></pre></p> </li> </ol>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#vite-dev-server-not-running","level":3,"title":"<code>Vite Dev Server Not Running</code>","text":"<p>Cause: Inspector is trying to proxy to Vite dev server, but it's not running.</p> <p>Solution: 1. Start Vite dev server in development mode: <pre><code>cd web\nnpm run dev\n</code></pre></p> <ol> <li>Or build for production: <pre><code>cd web\nnpm run build\ncd ..\nshards build --release\n</code></pre></li> </ol>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#configuration-errors","level":2,"title":"Configuration Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#config-file-not-found-pathtofile","level":3,"title":"<code>Config file not found: /path/to/file</code>","text":"<p>Cause: Specified config file doesn't exist.</p> <p>Solution: 1. Check file path is correct 2. Create config file if needed</p> <pre><code># Create minimal config\ncat &gt; sellia.yml &lt;&lt; EOF\ntunnels:\n  web:\n    port: 3000\nEOF\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#warning-failed-to-parse-pathtoselliayml","level":3,"title":"<code>Warning: Failed to parse /path/to/sellia.yml</code>","text":"<p>Cause: YAML syntax error in config file.</p> <p>Solution: 1. Validate YAML syntax 2. Check indentation (use spaces, not tabs) 3. Verify quotes and special characters</p> <pre><code># Validate YAML\n# Use online tool or:\nruby -ryaml -e \"YAML.load_file('sellia.yml')\"\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#error-no-tunnels-defined-in-config","level":3,"title":"<code>Error: No tunnels defined in config</code>","text":"<p>Cause: Config file exists but has no tunnel definitions.</p> <p>Solution: 1. Add at least one tunnel to config</p> <pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#network-errors","level":2,"title":"Network Errors","text":"","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#internal-proxy-error-connection-refused","level":3,"title":"<code>Internal proxy error: Connection refused</code>","text":"<p>Cause: Cannot connect to local service on specified port.</p> <p>Solution: 1. Verify local service is running 2. Check port number is correct 3. Ensure service listens on correct interface</p> <pre><code># Check if port is open\n# macOS/Linux\nlsof -i :3000\n\n# Start your service\nnpm start  # or whatever starts your app\n</code></pre>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#websocket-connection-failed","level":3,"title":"<code>WebSocket connection failed</code>","text":"<p>Cause: Cannot establish WebSocket connection to local service.</p> <p>Solution: 1. Verify local WebSocket server is running 2. Check port and path are correct 3. Ensure no firewall blocking</p>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#failed-to-connect-to-local-websocket-service","level":3,"title":"<code>Failed to connect to local WebSocket service</code>","text":"<p>Cause: WebSocket upgrade failed at local service.</p> <p>Solution: 1. Check local WebSocket server logs 2. Verify endpoint accepts WebSocket upgrades 3. Check route configuration</p>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#getting-help","level":2,"title":"Getting Help","text":"<p>If you encounter an error not listed here:</p> <ol> <li> <p>Check logs: Run with <code>LOG_LEVEL=debug</code> for more details <pre><code>LOG_LEVEL=debug sellia http 3000\n</code></pre></p> </li> <li> <p>GitHub Issues: Search or create an issue at https://github.com/watzon/sellia</p> </li> <li> <p>Community: Ask in community chat or forum</p> </li> </ol>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#reporting-bugs","level":2,"title":"Reporting Bugs","text":"<p>When reporting errors, include:</p> <ol> <li>Error message (exact text)</li> <li>Command used (full command with flags)</li> <li>Config file (sanitize sensitive data)</li> <li>Debug logs (<code>LOG_LEVEL=debug</code>)</li> <li>Environment:</li> <li>OS and version</li> <li>Sellia version (<code>sellia version</code>)</li> <li>Crystal version (if building from source)</li> </ol>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/error-codes/#see-also","level":2,"title":"See Also","text":"<ul> <li>Troubleshooting Guide - Common issues and solutions</li> <li>Getting Started - Basic setup</li> <li>Configuration Reference - Config file format</li> </ul>","path":["Appendices","Error Codes Reference"],"tags":[]},{"location":"appendices/glossary/","level":1,"title":"Glossary","text":"<p>Definitions and explanations of Sellia terminology and concepts.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#a","level":2,"title":"A","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#api-key","level":3,"title":"API Key","text":"<p>A secret token used to authenticate your Sellia client with the tunnel server. Required for creating protected tunnels and accessing premium features.</p> <p>See: Authentication</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#b","level":2,"title":"B","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#basic-auth","level":3,"title":"Basic Auth","text":"<p>A simple authentication scheme that sends a username and password with each HTTP request using the <code>Authorization</code> header.</p> <p>Format: <code>username:password</code></p> <p>Example: <pre><code>sellia http 3000 --auth admin:secret\n</code></pre></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#c","level":2,"title":"C","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#client","level":3,"title":"Client","text":"<p>The <code>sellia</code> command-line tool running on your local machine that establishes and maintains tunnel connections.</p> <p>Contrast with: Server</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#d","level":2,"title":"D","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#database-sqlite","level":3,"title":"Database (SQLite)","text":"<p>Sellia uses SQLite for persisting tunnel state, reserved subdomains, and other data. Can be disabled with <code>SELLIA_NO_DB=1</code>.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#f","level":2,"title":"F","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#fallback-port","level":3,"title":"Fallback Port","text":"<p>The default port used when a request path doesn't match any configured route. If no routes match and port &gt; 0, the fallback port receives the request.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#h","level":2,"title":"H","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#host-header","level":3,"title":"Host Header","text":"<p>The HTTP <code>Host</code> header that specifies which host the client is trying to reach. Sellia preserves this header when forwarding requests.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#i","level":2,"title":"I","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#inspector","level":3,"title":"Inspector","text":"<p>A built-in web UI for inspecting HTTP requests flowing through your tunnels in real-time. Runs on <code>http://127.0.0.1:4040</code> by default.</p> <p>Features: - Live request monitoring - Request/response details - Headers and bodies - Status codes and timing - cURL command generation</p> <p>See: Inspector UI Guide</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#inspector-port","level":3,"title":"Inspector Port","text":"<p>The local port on which the inspector web server listens. Default: <code>4040</code>.</p> <p>Can be changed via: - <code>--inspector-port</code> flag - <code>inspector.port</code> config value</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#l","level":2,"title":"L","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#local-host","level":3,"title":"Local Host","text":"<p>The hostname or IP address of your local service that Sellia forwards requests to. Default: <code>localhost</code>.</p> <p>Example: <pre><code>sellia http 3000 --host 192.168.1.100\n</code></pre></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#local-port","level":3,"title":"Local Port","text":"<p>The port on your local machine that Sellia forwards HTTP requests to.</p> <p>Example: <pre><code>sellia http 3000  # Forwards to localhost:3000\n</code></pre></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#m","level":2,"title":"M","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#messagepack","level":3,"title":"MessagePack","text":"<p>A binary serialization format used for the tunnel protocol. Efficient and compact compared to JSON.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#p","level":2,"title":"P","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#protocol","level":3,"title":"Protocol","text":"<p>The MessagePack-based wire protocol used for communication between the Sellia client and server over WebSocket.</p> <p>Message types: - Auth: <code>auth</code>, <code>auth_ok</code>, <code>auth_error</code> - Tunnel: <code>tunnel_open</code>, <code>tunnel_ready</code>, <code>tunnel_close</code> - Request: <code>request_start</code>, <code>request_body</code>, <code>response_start</code>, <code>response_body</code>, <code>response_end</code> - WebSocket: <code>websocket_upgrade</code>, <code>websocket_frame</code>, <code>websocket_close</code> - Keepalive: <code>ping</code>, <code>pong</code></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#public-url","level":3,"title":"Public URL","text":"<p>The publicly accessible URL that external users use to reach your tunneled service.</p> <p>Format: <code>https://&lt;subdomain&gt;.sellia.me</code></p> <p>Example: <code>https://myapp.sellia.me</code></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#r","level":2,"title":"R","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#request-inspector","level":3,"title":"Request Inspector","text":"<p>See: Inspector</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#route","level":3,"title":"Route","text":"<p>A path-based rule that forwards requests matching a specific path pattern to a different port or host.</p> <p>Example: <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /api\n        port: 8080  # Forward /api* to port 8080\n</code></pre></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#route-pattern","level":3,"title":"Route Pattern","text":"<p>A path pattern used for matching incoming requests. Can be: - Exact: <code>/api</code> - Wildcard prefix: <code>/api/*</code> - Wildcard catch-all: <code>/*</code></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#reserved-subdomain","level":3,"title":"Reserved Subdomain","text":"<p>A subdomain that has been permanently reserved for your account, preventing others from using it.</p> <p>Managed via: <pre><code>sellia admin reserved add myapp\nsellia admin reserved remove myapp\n</code></pre></p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#s","level":2,"title":"S","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#server","level":3,"title":"Server","text":"<p>The centralized tunnel server (e.g., <code>sellia.me</code>) that accepts WebSocket connections from clients and forwards incoming HTTP requests to the appropriate client.</p> <p>Contrast with: Client</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#subdomain","level":3,"title":"Subdomain","text":"<p>The hostname prefix that identifies your tunnel. Combined with the server domain to form your public URL.</p> <p>Format: <code>&lt;subdomain&gt;.sellia.me</code></p> <p>Examples: - <code>myapp.sellia.me</code> - <code>demo-v2.sellia.me</code></p> <p>If not specified, a random subdomain is assigned (e.g., <code>a3f7b2c1.sellia.me</code> - 8 random hex characters).</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#t","level":2,"title":"T","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#tunnel","level":3,"title":"Tunnel","text":"<p>A secure, persistent connection between your local machine and the Sellia server, allowing external users to access your local service via a public URL.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#tunnel-client","level":3,"title":"Tunnel Client","text":"<p>See: Client</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#tunnel-id","level":3,"title":"Tunnel ID","text":"<p>A unique identifier assigned by the server when a tunnel is created. Used internally for routing requests.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#tunnel-registry","level":3,"title":"Tunnel Registry","text":"<p>Server-side storage of active tunnels and their metadata, including reserved subdomains and account ownership.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#v","level":2,"title":"V","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#vite","level":3,"title":"Vite","text":"<p>A modern frontend build tool used for developing and building the inspector UI.</p> <ul> <li>Dev server: <code>localhost:5173</code></li> <li>Build output: <code>web/dist/</code></li> </ul>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#w","level":2,"title":"W","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#websocket","level":3,"title":"WebSocket","text":"<p>A communication protocol that provides full-duplex communication channels over a single TCP connection. Used for: - Client-server tunnel connection - Inspector live updates - End-to-end WebSocket passthrough</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#websocket-passthrough","level":3,"title":"WebSocket Passthrough","text":"<p>The ability to tunnel WebSocket connections from the public URL through to your local service, maintaining the WebSocket protocol end-to-end.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#common-patterns","level":2,"title":"Common Patterns","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#forwarding","level":3,"title":"Forwarding","text":"<p>The process of relaying HTTP requests from the public URL to your local service and returning responses.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#proxying","level":3,"title":"Proxying","text":"<p>Acting as an intermediary between the public internet and your local service, forwarding requests and responses transparently.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#acronyms","level":2,"title":"Acronyms","text":"Acronym Meaning CLI Command-Line Interface HMR Hot Module Replacement (Vite feature) HTTP HyperText Transfer Protocol HTTPS HTTP Secure (TLS/SSL) UI User Interface URL Uniform Resource Locator WSS WebSocket Secure","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#related-concepts","level":2,"title":"Related Concepts","text":"","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#reverse-proxy","level":3,"title":"Reverse Proxy","text":"<p>Unlike a traditional reverse proxy (like nginx), Sellia creates tunnels from inside your network, eliminating the need for: - Public IP addresses - Router port forwarding - Firewall configuration</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#port-forwarding","level":3,"title":"Port Forwarding","text":"<p>Traditional method of exposing local services to the internet. Sellia eliminates the need for port forwarding by using outbound WebSocket connections.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#ngrok","level":3,"title":"ngrok","text":"<p>A similar commercial tunneling service. Sellia is an open-source alternative with a focus on simplicity and developer experience.</p>","path":["Appendices","Glossary"],"tags":[]},{"location":"appendices/glossary/#see-also","level":2,"title":"See Also","text":"<ul> <li>Architecture Overview - System design</li> <li>Getting Started - Basic concepts</li> <li>Protocol Reference - Wire protocol details</li> </ul>","path":["Appendices","Glossary"],"tags":[]},{"location":"developer/","level":1,"title":"Developer Guide","text":"<p>Guide for contributing to and extending Sellia.</p>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#overview","level":2,"title":"Overview","text":"<p>This section is for developers who want to contribute to Sellia, understand its architecture, or extend its functionality.</p>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#getting-started","level":2,"title":"Getting Started","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#prerequisites","level":3,"title":"Prerequisites","text":"<ul> <li>Crystal &gt;= 1.10.0</li> <li>Node.js &gt;= 18 (for inspector UI)</li> <li>Git</li> <li>Basic familiarity with WebSocket and HTTP protocols</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#setup-development-environment","level":3,"title":"Setup Development Environment","text":"<pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Install Crystal dependencies\nshards install\n\n# Install Node dependencies (for inspector UI)\ncd web\nnpm install\ncd ..\n\n# Build debug binaries\nshards build\n\n# Run tests\ncrystal spec\n</code></pre>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#making-changes","level":3,"title":"Making Changes","text":"<ol> <li>Create feature branch</li> <li>Make changes</li> <li>Add tests</li> <li>Run tests</li> <li>Submit pull request</li> </ol> <pre><code># Create feature branch\ngit checkout -b feature/amazing-feature\n\n# Make changes and test\ncrystal spec\n\n# Commit changes\ngit commit -m \"feat: add amazing feature\"\n\n# Push and create PR\ngit push origin feature/amazing-feature\n</code></pre>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#documentation-sections","level":2,"title":"Documentation Sections","text":"<ul> <li>Architecture - System design and components</li> <li>Project Structure - Code organization</li> <li>Development - Development setup and workflow</li> <li>Inspector UI - Web interface development</li> <li>Server Components - Server-side code</li> <li>CLI Components - Client-side code</li> <li>Contributing - Contribution guidelines</li> <li>Release Process - How releases are made</li> <li>Security - Security considerations</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#quick-reference","level":2,"title":"Quick Reference","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#build-commands","level":3,"title":"Build Commands","text":"<pre><code># Debug build\nshards build\n\n# Release build (optimized)\nshards build --release\n\n# Run tests\ncrystal spec\n\n# Run specific test\ncrystal spec spec/server_spec.cr\n</code></pre>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#inspector-ui-development","level":3,"title":"Inspector UI Development","text":"<pre><code>cd web\n\n# Development server\nnpm run dev\n\n# Build for production\nnpm run build\n\n# Run tests\nnpm test\n\n# Lint code\nnpm run lint\n</code></pre>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#running-locally","level":3,"title":"Running Locally","text":"<pre><code># Terminal 1: Start server\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain localhost\n\n# Terminal 2: Start inspector UI dev server\ncd web &amp;&amp; npm run dev\n\n# Terminal 3: Create tunnel\n./bin/sellia http 3000 --open\n</code></pre>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#code-quality","level":2,"title":"Code Quality","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#style-guide","level":3,"title":"Style Guide","text":"<ul> <li>Follow Crystal style guide</li> <li>Use meaningful variable names</li> <li>Add comments for complex logic</li> <li>Keep methods focused and small</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#testing","level":3,"title":"Testing","text":"<ul> <li>Write tests for new features</li> <li>Maintain test coverage</li> <li>Test edge cases</li> <li>Use descriptive test names</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#documentation","level":3,"title":"Documentation","text":"<ul> <li>Document public APIs</li> <li>Update README for user-facing changes</li> <li>Add inline comments for complex code</li> <li>Keep documentation in sync with code</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#architecture-overview","level":2,"title":"Architecture Overview","text":"<p>Sellia consists of three main components:</p>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#server-sellia-server","level":3,"title":"Server (<code>sellia-server</code>)","text":"<ul> <li>WebSocket gateway for tunnel connections</li> <li>HTTP ingress for external requests</li> <li>Tunnel registry for active tunnels</li> <li>Rate limiting and authentication</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#cli-client-sellia","level":3,"title":"CLI Client (<code>sellia</code>)","text":"<ul> <li>Tunnel client connecting to server</li> <li>WebSocket connection management</li> <li>Local HTTP proxy</li> <li>Request inspector server</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#inspector-ui-react","level":3,"title":"Inspector UI (React)","text":"<ul> <li>Real-time request visualization</li> <li>WebSocket connection to CLI</li> <li>Request/response details</li> <li>Interactive debugging</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#communication-protocol","level":2,"title":"Communication Protocol","text":"<p>Sellia uses MessagePack over WebSocket for efficient binary communication:</p> <ul> <li>Connection: WebSocket handshake</li> <li>Messages: MessagePack-encoded binary data</li> <li>Types: Requests, responses, heartbeat, etc.</li> </ul> <p>See Architecture for details.</p>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#contributing","level":2,"title":"Contributing","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#types-of-contributions","level":3,"title":"Types of Contributions","text":"<ul> <li>Bug fixes: Always welcome</li> <li>Features: Open an issue first to discuss</li> <li>Documentation: Improvements welcome</li> <li>Tests: Help improve coverage</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#pull-request-process","level":3,"title":"Pull Request Process","text":"<ol> <li>Fork the repository</li> <li>Create your feature branch</li> <li>Write tests for your changes</li> <li>Ensure all tests pass</li> <li>Update documentation if needed</li> <li>Submit pull request</li> </ol> <p>See Contributing for detailed guidelines.</p>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#getting-help","level":2,"title":"Getting Help","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#resources","level":3,"title":"Resources","text":"<ul> <li>Crystal Documentation</li> <li>MessagePack Spec</li> <li>WebSocket Protocol</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#community","level":3,"title":"Community","text":"<ul> <li>GitHub Issues</li> <li>GitHub Discussions</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#development-topics","level":2,"title":"Development Topics","text":"","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#want-to-add-a-feature","level":3,"title":"Want to add a feature?","text":"<ol> <li>Check Architecture to understand system design</li> <li>Review Project Structure for code organization</li> <li>Read Development for setup and workflow</li> <li>Follow Contributing guidelines</li> </ol>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#want-to-improve-the-ui","level":3,"title":"Want to improve the UI?","text":"<ol> <li>See Inspector UI for frontend development</li> <li>UI is built with React + Vite</li> <li>Uses WebSocket for real-time updates</li> </ol>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#want-to-understand-the-protocol","level":3,"title":"Want to understand the protocol?","text":"<ol> <li>Check Architecture for protocol overview</li> <li>See <code>src/core/protocol/</code> for message definitions</li> <li>MessagePack over WebSocket</li> </ol>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>New Contributors: Start with Contributing</li> <li>Architecture: See Architecture</li> <li>Setup: Follow Development</li> <li>UI Work: Check Inspector UI</li> </ul>","path":["Developer","Developer Guide"],"tags":[]},{"location":"developer/architecture/","level":1,"title":"Architecture","text":"<p>System architecture and design of Sellia.</p>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#overview","level":2,"title":"Overview","text":"<p>Sellia is a tunneling system that exposes local servers to the internet through a secure WebSocket-based protocol. The architecture consists of three main components:</p> <ol> <li>Tunnel Server - Public-facing server that receives external requests</li> <li>CLI Client - Local client that connects to server and forwards requests</li> <li>Inspector UI - Web interface for debugging requests</li> </ol>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#high-level-architecture","level":2,"title":"High-Level Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────────┐\n│                         Internet                            │\n└────────────────────────┬────────────────────────────────────┘\n                         │\n                         ▼\n┌─────────────────────────────────────────────────────────────┐\n│                    Sellia Server                             │\n│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │\n│  │ HTTP Ingress │──│   Tunnel     │──│   WebSocket  │     │\n│  │              │  │   Registry   │  │   Gateway    │     │\n│  └──────────────┘  └──────────────┘  └──────────────┘     │\n└────────────────────────┬────────────────────────────────────┘\n                         │ WebSocket\n                         ▼\n┌─────────────────────────────────────────────────────────────┐\n│                    Sellia CLI Client                         │\n│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │\n│  │   Tunnel     │──│   Local      │  │  Inspector   │     │\n│  │   Client     │  │   HTTP       │  │   Server     │     │\n│  │              │  │   Proxy      │  │              │     │\n│  └──────────────┘  └──────────────┘  └──────────────┘     │\n└────────────────────────┬────────────────────────────────────┘\n                         │\n                         ▼\n┌─────────────────────────────────────────────────────────────┐\n│                  Local Development Server                    │\n│                  (your application)                          │\n└─────────────────────────────────────────────────────────────┘\n</code></pre>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#components","level":2,"title":"Components","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#tunnel-server","level":3,"title":"Tunnel Server","text":"<p>The server is responsible for:</p> <ul> <li>HTTP Ingress - Receives external HTTP requests</li> <li>WebSocket Gateway - Manages WebSocket connections from clients</li> <li>Tunnel Registry - Tracks active tunnels and their subdomains</li> <li>Authentication - Validates API keys and credentials (no auth, master key, or database modes)</li> <li>Rate Limiting - Prevents abuse (token bucket algorithm)</li> <li>Admin API - Administrative endpoints for server management</li> </ul> <p>Request Flow:</p> <ol> <li>External request arrives at <code>http://subdomain.domain.com</code></li> <li>Server looks up tunnel in registry</li> <li>Server forwards request through WebSocket to client</li> <li>Client processes request and sends response back through WebSocket</li> <li>Server returns response to external caller</li> </ol>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#cli-client","level":3,"title":"CLI Client","text":"<p>The client is responsible for:</p> <ul> <li>WebSocket Connection - Maintains persistent connection to server</li> <li>Tunnel Registration - Registers tunnels with unique subdomains</li> <li>Router - Routes requests to local services based on path patterns</li> <li>LocalProxy - Forwards HTTP requests to local services</li> <li>WebSocketProxy - Forwards WebSocket connections to local services</li> <li>Inspector Server - Serves web UI for debugging</li> <li>RequestStore - Stores request/response history for inspector</li> <li>Auto-Reconnection - Reconnects with linear backoff (3s × attempt number, max 10 attempts)</li> </ul> <p>Request Flow:</p> <ol> <li>Client connects to server via WebSocket</li> <li>Client registers tunnel with requested subdomain</li> <li>Client receives requests from server through WebSocket</li> <li>Client forwards requests to local service</li> <li>Client receives response from local service</li> <li>Client sends response back through WebSocket</li> </ol>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#inspector-ui","level":3,"title":"Inspector UI","text":"<p>The inspector provides:</p> <ul> <li>Real-time Updates - WebSocket connection to CLI client (Channel-based subscriptions)</li> <li>Request Visualization - Display all requests/responses (circular buffer, max 1000)</li> <li>Debugging Tools - Copy as cURL, view headers/bodies</li> <li>Interactive UI - React-based interface with TypeScript and Vite</li> <li>Live Updates - Subscribe to request stream via WebSocket</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#communication-protocol","level":2,"title":"Communication Protocol","text":"<p>Sellia uses MessagePack over WebSocket for efficient binary communication.</p>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#why-messagepack","level":3,"title":"Why MessagePack?","text":"<ul> <li>Binary Format - More efficient than JSON</li> <li>Type Preservation - Maintains data types</li> <li>Compact - Smaller payload sizes</li> <li>Fast - Quick serialization/deserialization</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#message-types","level":3,"title":"Message Types","text":"<p>Defined in <code>src/core/protocol/</code>:</p> <pre><code># Request from server to client\nclass TunnelRequest\n  property request_id : String\n  property method : String\n  property headers : Hash(String, String)\n  property body : Bytes?\nend\n\n# Response from client to server\nclass TunnelResponse\n  property request_id : String\n  property status_code : Int32\n  property headers : Hash(String, String)\n  property body : Bytes?\nend\n\n# Tunnel registration\nclass RegisterTunnel\n  property subdomain : String\n  property auth : String?\nend\n</code></pre>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#websocket-flow","level":3,"title":"WebSocket Flow","text":"<pre><code>Client                                      Server\n  │                                           │\n  ├─── WebSocket Handshake ──────────────────&gt;│\n  │                                           │\n  ├─── RegisterTunnel (MessagePack) ─────────&gt;│\n  │&lt;─── TunnelRegistered (MessagePack) ───────┤\n  │                                           │\n  │&lt;─── TunnelRequest (MessagePack) ──────────┤\n  │    (forward to local service)             │\n  ├─── TunnelResponse (MessagePack) ─────────&gt;│\n  │                                           │\n  │        (repeat for each request)          │\n</code></pre>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#data-flow","level":2,"title":"Data Flow","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#incoming-request","level":3,"title":"Incoming Request","text":"<pre><code>1. External HTTP Request\n   ↓\n2. Server HTTP Ingress\n   ↓\n3. Tunnel Registry Lookup\n   ↓\n4. Find WebSocket Connection\n   ↓\n5. MessagePack Encode Request\n   ↓\n6. Send via WebSocket\n   ↓\n7. Client Receives Request\n   ↓\n8. Forward to Local Service\n   ↓\n9. Local Service Processes\n   ↓\n10. Response Received\n   ↓\n11. MessagePack Encode Response\n   ↓\n12. Send via WebSocket\n   ↓\n13. Server Receives Response\n   ↓\n14. Return HTTP Response\n</code></pre>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#inspector-data-flow","level":3,"title":"Inspector Data Flow","text":"<pre><code>1. Client Receives Request\n   ↓\n2. Send to Inspector (local WebSocket)\n   ↓\n3. Inspector UI Displays\n   ↓\n4. User Interacts\n   ↓\n5. Inspector Sends Commands\n   ↓\n6. Client Executes Commands\n</code></pre>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#security-architecture","level":2,"title":"Security Architecture","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#authentication-layers","level":3,"title":"Authentication Layers","text":"<ol> <li>Server Authentication - API key validation</li> <li>Tunnel Authentication - HTTP basic auth per tunnel</li> <li>Rate Limiting - Prevent abuse</li> <li>Subdomain Validation - Prevent conflicts</li> </ol>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#tlsssl","level":3,"title":"TLS/SSL","text":"<ul> <li>Server can require HTTPS</li> <li>TLS certificates managed externally</li> <li>Certificates loaded from <code>certs/</code> directory</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#data-security","level":3,"title":"Data Security","text":"<ul> <li>WebSocket connections can be secured with WSS</li> <li>API keys stored securely (environment variables)</li> <li>Basic auth passwords never logged</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#concurrency-model","level":2,"title":"Concurrency Model","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#server","level":3,"title":"Server","text":"<ul> <li>Fiber-based concurrency - Crystal's lightweight threads</li> <li>Per-connection fibers - Each WebSocket connection runs in fiber</li> <li>Shared state - Tunnel registry with synchronization</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#client","level":3,"title":"Client","text":"<ul> <li>Multi-fiber design - Separate fibers for:</li> <li>WebSocket connection</li> <li>HTTP proxy</li> <li>Inspector server</li> <li>Heartbeat/reconnection</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#error-handling","level":2,"title":"Error Handling","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#connection-errors","level":3,"title":"Connection Errors","text":"<ul> <li>Auto-reconnection - Linear backoff</li> <li>Heartbeat - Detect stale connections</li> <li>Graceful degradation - Continue on non-critical errors</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#request-errors","level":3,"title":"Request Errors","text":"<ul> <li>Timeout handling - Configurable timeouts</li> <li>Error responses - Proper HTTP error codes</li> <li>Logging - All errors logged for debugging</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#memory","level":3,"title":"Memory","text":"<ul> <li>MessagePack - Efficient binary format reduces memory</li> <li>Streaming - Large bodies streamed when possible</li> <li>Inspector limits - Configurable history size</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#network","level":3,"title":"Network","text":"<ul> <li>Connection pooling - Reuse WebSocket connections</li> <li>Compression - Optional compression support</li> <li>Keep-alive - Maintain persistent connections</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#scalability","level":3,"title":"Scalability","text":"<ul> <li>Stateless design - Server can be scaled (with shared storage)</li> <li>Fiber-based - Handle many concurrent connections</li> <li>Efficient protocol - MessagePack minimizes bandwidth</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#extension-points","level":2,"title":"Extension Points","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#custom-protocols","level":3,"title":"Custom Protocols","text":"<p>Message types defined in <code>src/core/protocol/</code> can be extended for new features.</p>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#middleware","level":3,"title":"Middleware","text":"<p>Server and client support middleware for: - Authentication - Logging - Rate limiting - Custom processing</p>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#storage","level":3,"title":"Storage","text":"<p>Storage backend abstracted to support: - In-memory (default) - SQLite (planned) - PostgreSQL (future)</p>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#design-decisions","level":2,"title":"Design Decisions","text":"","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#why-websocket","level":3,"title":"Why WebSocket?","text":"<ul> <li>Bidirectional - Server can push requests to client</li> <li>Efficient - Single connection for multiple requests</li> <li>Real-time - Low latency communication</li> <li>Widely supported - Available in most languages/browsers</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#why-messagepack_1","level":3,"title":"Why MessagePack?","text":"<ul> <li>Binary - More efficient than text-based protocols</li> <li>Schema-less - Flexible data structures</li> <li>Fast - Quick serialization/deserialization</li> <li>Cross-language - Available in most languages</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#why-crystal","level":3,"title":"Why Crystal?","text":"<ul> <li>Performance - Compiled, fast execution</li> <li>Concurrency - Excellent fiber-based concurrency</li> <li>Type safety - Compile-time type checking</li> <li>Ease of use - Ruby-like syntax</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Project Structure - Code organization</li> <li>Server Components - Server implementation</li> <li>CLI Components - Client implementation</li> </ul>","path":["Developer","Architecture"],"tags":[]},{"location":"developer/architecture/client-flow/","level":1,"title":"Client Connection and Request Flow","text":"<p>This document describes how the Sellia client establishes connections and proxies incoming requests to local services.</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#overview","level":2,"title":"Overview","text":"<p>The Sellia client (<code>TunnelClient</code>) runs on the user's machine, establishes a WebSocket connection to the Sellia server, and forwards incoming HTTP/WebSocket requests to local services.</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#connection-lifecycle","level":2,"title":"Connection Lifecycle","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#1-initialization","level":3,"title":"1. Initialization","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  api_key: \"key_...\",\n  subdomain: \"myapp\",      # optional\n  auth: \"user:pass\"        # optional basic auth\n)\n</code></pre> <p>Configuration includes: - server_url: WebSocket server URL - local_port: Default local service port - api_key: Optional authentication key - subdomain: Optional custom subdomain - auth: Optional basic auth for tunnel</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#2-websocket-connection","level":3,"title":"2. WebSocket Connection","text":"<pre><code>Client                      Server\n  |                           |\n  |--- WebSocket Connect ---&gt; |\n  |                           |\n  |&lt;----- Connected ----------|\n</code></pre> <p>The client: 1. Parses the server URL to extract host and port 2. Creates a WebSocket connection to <code>/ws</code> 3. Sets up message handlers 4. Spawns a fiber to run the socket</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#3-authentication-flow","level":3,"title":"3. Authentication Flow","text":"<pre><code>Client                      Server\n  |                           |\n  |--- Auth (api_key) ------&gt; |\n  |                           |\n  |&lt;---- AuthOk --------------|\n  |     (account_id, limits)  |\n</code></pre> <p>If auth is disabled, client skips to <code>TunnelOpen</code>.</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#4-tunnel-opening","level":3,"title":"4. Tunnel Opening","text":"<pre><code>Client                      Server\n  |                           |\n  |-- TunnelOpen -----------&gt; |\n  |   (subdomain, auth)       |\n  |                           |\n  |&lt;--- TunnelReady ----------|\n  |     (tunnel_id, url)      |\n</code></pre> <p>The client: 1. Sends <code>TunnelOpen</code> with desired configuration 2. Receives <code>TunnelReady</code> with tunnel details 3. Stores <code>tunnel_id</code> and <code>public_url</code> 4. Triggers <code>on_connect</code> callback</p> <p>If the subdomain is unavailable: <pre><code>Client                      Server\n  |                           |\n  |-- TunnelOpen -----------&gt; |\n  |   (subdomain: \"taken\")    |\n  |                           |\n  |&lt;--- TunnelClose ----------|\n  |     (reason: \"not available\") |\n</code></pre></p> <p>The client will disable auto-reconnect and stop if the tunnel was closed due to subdomain conflict.</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#5-keep-alive","level":3,"title":"5. Keep-Alive","text":"<pre><code>Client                      Server\n  |                           |\n  |&lt;---- Ping ----------------|\n  |                           |\n  |--- Pong -----------------&gt;|\n  |                           |\n  |      (every 30s)          |\n</code></pre> <ul> <li>Server sends <code>Ping</code> every 30 seconds</li> <li>Client responds with <code>Pong</code></li> <li>If no activity for 60 seconds, server closes connection</li> </ul>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#6-reconnection","level":3,"title":"6. Reconnection","text":"<pre><code>Client                      Server\n  |                           |\n  |--- Disconnection --------&gt;|\n  |                           |\n  | [wait: 3s * attempts]     |\n  |                           |\n  |--- Reconnect ------------&gt;|\n  |                           |\n</code></pre> <p>On disconnect: 1. Clear all in-flight requests 2. Close all active WebSocket connections 3. Trigger <code>on_disconnect</code> callback 4. Wait with linear backoff (3s × attempt number) 5. Attempt reconnection up to 10 times</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#http-request-flow","level":2,"title":"HTTP Request Flow","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#request-reception","level":3,"title":"Request Reception","text":"<pre><code>External User               Server                    Client                   Local Service\n     |                         |                          |                          |\n     |-- HTTP Request ------&gt;  |                          |                          |\n     |  (myapp.sellia.dev)     |                          |                          |\n     |                         |                          |                          |\n     |                         |-- RequestStart --------&gt; |                          |\n     |                         |   (method, path,         |                          |\n     |                         |    headers)              |                          |\n     |                         |                          |                          |\n     |                         |-- RequestBody ---------&gt; |                          |\n     |                         |   (chunk, final=false)  |                          |\n     |                         |                          |                          |\n     |                         |-- RequestBody ---------&gt; |                          |\n     |                         |   (chunk, final=true)   |                          |\n     |                         |                          |                          |\n     |                         |                          |-- [Router] -------------&gt;|\n     |                         |                          |  (match route)           |\n     |                         |                          |                          |\n     |                         |                          |-- HTTP Request --------&gt;|\n     |                         |                          |  (filtered headers)      |\n     |                         |                          |                          |\n     |                         |                          |&lt;-- HTTP Response --------|\n     |                         |                          |  (status, headers, body) |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseStart --------|                          |\n     |                         |   (status, headers)      |                          |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseBody ---------|                          |\n     |                         |   (chunk)                |                          |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseBody ---------|                          |\n     |                         |   (chunk)                |                          |\n     |                         |                          |                          |\n     |                         |&lt;-- ResponseEnd ----------|                          |\n     |                         |                          |                          |\n     |&lt;-- HTTP Response -------|                          |                          |\n     |  (reassembled body)     |                          |                          |\n</code></pre>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#step-by-step","level":3,"title":"Step-by-Step","text":"<ol> <li> <p>Server receives request from external user to <code>myapp.sellia.dev</code></p> </li> <li> <p>Server sends <code>RequestStart</code> with:</p> </li> <li><code>request_id</code>: Unique identifier</li> <li><code>tunnel_id</code>: Tunnel identifier</li> <li><code>method</code>: HTTP method</li> <li><code>path</code>: Full path with query string</li> <li> <p><code>headers</code>: All HTTP headers (multi-value)</p> </li> <li> <p>Client stores request metadata:    <pre><code>@pending_requests[request_id] = message\n@request_bodies[request_id] = IO::Memory.new\n@request_start_times[request_id] = Time.monotonic\n</code></pre></p> </li> <li> <p>Server sends <code>RequestBody</code> chunks:</p> </li> <li>Multiple chunks for large bodies</li> <li> <p><code>final=true</code> on last chunk</p> </li> <li> <p>Client buffers body chunks:    <pre><code>@request_bodies[request_id].write(message.chunk)\n</code></pre></p> </li> <li> <p>On final chunk, client spawns fiber to forward request:    <pre><code>spawn { forward_request(request_id) }\n</code></pre></p> </li> <li> <p>Router matches path to route configuration:    <pre><code>match_result = @router.match(path)\n\n# Returns target host:port or nil\n# Examples:\n# \"/api/*\" -&gt; api:8080\n# \"/socket\" -&gt; ws:3000 (fallback)\n</code></pre></p> </li> <li> <p>LocalProxy forwards to local service:</p> </li> <li>Filters hop-by-hop headers</li> <li>Opens HTTP connection to target</li> <li>Streams request body</li> <li> <p>Reads response</p> </li> <li> <p>Client sends response back to server:</p> </li> <li><code>ResponseStart</code>: Status code and headers</li> <li><code>ResponseBody</code>: Body chunks (8KB each)</li> <li> <p><code>ResponseEnd</code>: Signals completion</p> </li> <li> <p>Server reassembles and responds to external user</p> </li> </ol>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#error-handling","level":3,"title":"Error Handling","text":"<p>If local service is unavailable: <pre><code>Client -&gt; ResponseStart (502)\nClient -&gt; ResponseBody (\"Local service unavailable\")\nClient -&gt; ResponseEnd\n</code></pre></p> <p>If no route matches: <pre><code>Client -&gt; ResponseStart (502)\nClient -&gt; ResponseBody (\"No route matched path: /path\")\nClient -&gt; ResponseEnd\n</code></pre></p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#websocket-request-flow","level":2,"title":"WebSocket Request Flow","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#websocket-upgrade","level":3,"title":"WebSocket Upgrade","text":"<pre><code>External User               Server                    Client                   Local Service\n     |                         |                          |                          |\n     |-- WS Upgrade --------&gt; |                          |                          |\n     |  (myapp.sellia.dev)     |                          |                          |\n     |                         |                          |                          |\n     |                         |-- WebSocketUpgrade ----&gt; |                          |\n     |                         |   (path, headers)        |                          |\n     |                         |                          |                          |\n     |                         |                          |-- [Router] -------------&gt;|\n     |                         |                          |                          |\n     |                         |                          |-- WS Connect ---------&gt;|\n     |                         |                          |  (to local service)     |\n     |                         |                          |                          |\n     |                         |                          |&lt;-- Connected ------------|\n     |                         |                          |                          |\n     |                         |&lt;-- WebSocketUpgradeOk ---|                          |\n     |                         |   (headers)              |                          |\n     |                         |                          |                          |\n     |&lt;-- Switching Protocols -|                          |                          |\n     |  (101 status)           |                          |                          |\n</code></pre>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#frame-forwarding-bidirectional","level":3,"title":"Frame Forwarding (Bidirectional)","text":"<pre><code>External User    Server    Client    Local Service\n    |              |          |            |\n    |-- Frame ---&gt; |          |            |\n    |  (text)      |          |            |\n    |              |          |            |\n    |              |-- Frame &gt;|            |\n    |              |          |            |\n    |              |          |-- Frame -&gt;|\n    |              |          |            |\n    |              |          |&lt;- Frame --|\n    |              |          |            |\n    |              |&lt;- Frame --|            |\n    |              |          |            |\n    |&lt;- Frame -----|          |            |\n</code></pre>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#step-by-step_1","level":3,"title":"Step-by-Step","text":"<ol> <li> <p>Server receives WebSocket upgrade request</p> </li> <li> <p>Server sends <code>WebSocketUpgrade</code> with:</p> </li> <li><code>request_id</code>: Unique identifier</li> <li><code>path</code>: WebSocket path</li> <li> <p><code>headers</code>: All headers including <code>Sec-WebSocket-*</code></p> </li> <li> <p>Client routes to local service via router</p> </li> <li> <p>WebSocketProxy connects to local service:    <pre><code>ws_proxy = WebSocketProxy.new(request_id, target_host, target_port)\nresponse_headers = ws_proxy.connect(path, headers)\n</code></pre></p> </li> <li> <p>On success, client sends <code>WebSocketUpgradeOk</code></p> </li> <li> <p>Server completes handshake with external user</p> </li> <li> <p>Frame forwarding begins:</p> </li> <li>External → Server → Client → Local Service</li> <li> <p>Local Service → Client → Server → External</p> </li> <li> <p>On close:    <pre><code>WebSocketClose (bidirectional)\n</code></pre></p> </li> </ol>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#websocket-error-handling","level":3,"title":"WebSocket Error Handling","text":"<p>If local service rejects WebSocket: <pre><code>Client -&gt; WebSocketUpgradeError (502, \"Failed to connect\")\nServer -&gt; 502 response to external user\n</code></pre></p> <p>If no route matches: <pre><code>Client -&gt; WebSocketUpgradeError (502, \"No route matched path: /socket\")\n</code></pre></p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#inspector-integration","level":2,"title":"Inspector Integration","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#request-storage","level":3,"title":"Request Storage","text":"<p>If <code>RequestStore</code> is configured, the client stores:</p> <pre><code>StoredRequest.new(\n  id: request_id,\n  method: \"GET\",\n  path: \"/api/users\",\n  status_code: 200,\n  duration: 45_i64,  # milliseconds\n  timestamp: Time.utc,\n  request_headers: {...},\n  request_body: \"...\",      # truncated to 100KB\n  response_headers: {...},\n  response_body: \"...\",     # truncated to 100KB\n  matched_route: \"/api/*\",\n  matched_target: \"api:8080\"\n)\n</code></pre> <p>The inspector UI: - Subscribes to <code>RequestStore</code> via WebSocket - Receives real-time request updates - Displays request/response details</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#routing","level":2,"title":"Routing","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#route-configuration","level":3,"title":"Route Configuration","text":"<pre><code>routes = [\n  RouteConfig.new(path: \"/api/*\", host: \"api\", port: 8080),\n  RouteConfig.new(path: \"/socket\", host: nil, port: 3000),  # uses default host\n  RouteConfig.new(path: \"/admin/*\", host: \"admin\", port: 8000)\n]\n\nclient = TunnelClient.new(..., routes: routes)\n</code></pre>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#route-matching","level":3,"title":"Route Matching","text":"<p>The router matches paths in order (first match wins):</p> <pre><code>def match(path : String) : MatchResult?\n  @routes.each do |route|\n    if pattern_matches?(route.path, path)\n      return MatchResult.new(target, route.path)\n    end\n  end\n\n  # Try fallback port if configured\n  if port = @fallback_port\n    return MatchResult.new(Target.new(@default_host, port), \"(fallback)\")\n  end\n\n  nil  # No match\nend\n</code></pre> <p>Pattern matching: - Exact match: <code>/socket</code> matches only <code>/socket</code> - Glob match: <code>/api/*</code> matches <code>/api/users</code>, <code>/api/posts/123</code>, etc.</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#example-routes","level":3,"title":"Example Routes","text":"<pre><code>GET /api/users     -&gt; api:8080  (matches /api/*)\nGET /socket        -&gt; localhost:3000  (fallback)\nGET /admin/dashboard -&gt; admin:8000  (matches /admin/*)\nGET /other         -&gt; 502 No route matched\n</code></pre>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each request spawns a fiber for forwarding</li> <li>Multiple requests handled in parallel</li> <li>Mutex protects WebSocket writes (no concurrent sends)</li> </ul>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#memory","level":3,"title":"Memory","text":"<ul> <li>Request bodies buffered in memory</li> <li>Chunks limited to 8KB</li> <li>Inspector truncates bodies to 100KB</li> </ul>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#timeouts","level":3,"title":"Timeouts","text":"<ul> <li>Local proxy: 5s connect timeout, 30s read timeout</li> <li>Server request timeout: 30s (configurable)</li> <li>WebSocket frame loop: No timeout (relies on connection close)</li> </ul>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#error-recovery","level":2,"title":"Error Recovery","text":"","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#local-service-restart","level":3,"title":"Local Service Restart","text":"<p>If local service restarts: 1. In-flight requests fail with 502/504 2. New requests succeed once service is back 3. WebSocket connections close and reconnect</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#network-interruption","level":3,"title":"Network Interruption","text":"<ol> <li>WebSocket connection closes</li> <li>Client attempts reconnection with backoff</li> <li>Tunnel reopens after reconnection</li> <li>Existing tunnels receive new <code>tunnel_id</code></li> </ol>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/client-flow/#subdomain-conflicts","level":3,"title":"Subdomain Conflicts","text":"<p>If subdomain is taken: 1. Server sends <code>TunnelClose</code> with \"not available\" 2. Client disables auto-reconnect 3. User must choose different subdomain</p>","path":["Developer","Architecture","Client Connection and Request Flow"],"tags":[]},{"location":"developer/architecture/components/","level":1,"title":"Core Component Overview","text":"<p>This document provides a high-level overview of Sellia's core components and their interactions.</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#system-architecture","level":2,"title":"System Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────────────┐\n│                          Sellia Server                           │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                   │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │\n│  │ HTTP Server  │    │ WS Endpoint  │    │ Admin API    │      │\n│  │  (public)    │    │   (/ws)      │    │   (admin)    │      │\n│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘      │\n│         │                   │                   │               │\n│         ▼                   ▼                   ▼               │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │\n│  │ HTTPIngress  │    │  WSGateway   │    │ AdminAPI     │      │\n│  │  - Routing   │◄───│  - Message   │    │  - Mgmt      │      │\n│  │  - Proxying  │    │    handling  │    │  - Stats     │      │\n│  └──────┬───────┘    └──────┬───────┘    └──────┬───────┘      │\n│         │                   │                   │               │\n│         └─────────┬─────────┘                   │               │\n│                   │                             │               │\n│                   ▼                             │               │\n│          ┌────────────────┐                    │               │\n│          │ ConnectionMgr  │                    │               │\n│          │  - Track clients│                    │               │\n│          └────────┬───────┘                    │               │\n│                   │                             │               │\n│    ┌──────────────┼──────────────┐             │               │\n│    ▼              ▼              ▼             │               │\n│ ┌────────┐  ┌──────────┐  ┌──────────┐         │               │\n│ │Tunnel  │  │ Pending  │  │ Pending  │         │               │\n│ │Registry│  │ Request  │  │ WebSocket│         │               │\n│ └────────┘  └──────────┘  └──────────┘         │               │\n│                                            ▲    │               │\n│                                            │    │               │\n│                                    ┌───────┴────┴───────┐      │\n│                                    │   Storage Layer     │      │\n│                                    │  - SQLite DB        │      │\n│                                    │  - Reserved subdoms │      │\n│                                    │  - API keys         │      │\n│                                    └─────────────────────┘      │\n│                                                                   │\n└─────────────────────────────────────────────────────────────────┘\n\n┌─────────────────────────────────────────────────────────────────┐\n│                          Sellia CLI                              │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                   │\n│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐      │\n│  │ TunnelClient │    │  Inspector   │    │   Updater    │      │\n│  │  - Connect   │    │  - Web UI    │    │  - Self-upd  │      │\n│  │  - Proxy     │    │  - Debug     │    │              │      │\n│  └──────┬───────┘    └──────┬───────┘    └──────────────┘      │\n│         │                   │                                   │\n│         ▼                   ▼                                   │\n│  ┌──────────────┐    ┌──────────────┐                          │\n│  │  Router     │    │ RequestStore │                          │\n│  │  - Paths    │    │  - History   │                          │\n│  │  - Routes   │    │  - Inspection│                          │\n│  └──────┬───────┘    └──────────────┘                          │\n│         │                                                        │\n│    ┌────┴────┐                                                   │\n│    ▼         ▼                                                   │\n│ ┌────────┐ ┌──────────┐                                         │\n│ │ Local  │ │   WS     │                                         │\n│ │ Proxy  │ │   Proxy  │                                         │\n│ └────────┘ └──────────┘                                         │\n│                                                                   │\n└─────────────────────────────────────────────────────────────────┘\n</code></pre>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#server-components","level":2,"title":"Server Components","text":"","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#httpingress","level":3,"title":"HTTPIngress","text":"<p>Purpose: Handles incoming HTTP requests from the public internet</p> <p>Responsibilities: - Extract subdomain from <code>Host</code> header - Find tunnel in registry - Validate basic auth (if configured) - Check rate limits - Detect WebSocket upgrades - Proxy HTTP requests to clients - Proxy WebSocket connections to clients - Serve root domain endpoints (health, TLS verification) - Serve landing page</p> <p>Key Methods: - <code>handle(context)</code> - Main request handler - <code>proxy_request()</code> - Forward HTTP to client - <code>proxy_websocket()</code> - Forward WebSocket to client - <code>extract_subdomain()</code> - Parse subdomain from host - <code>serve_root()</code> - Handle root domain requests</p> <p>Dependencies: - <code>TunnelRegistry</code> - Find tunnels by subdomain - <code>ConnectionManager</code> - Get client connections - <code>PendingRequestStore</code> - Track in-flight requests - <code>PendingWebSocketStore</code> - Track WebSocket connections - <code>CompositeRateLimiter</code> - Enforce rate limits</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#wsgateway","level":3,"title":"WSGateway","text":"<p>Purpose: Manages WebSocket connections from tunnel clients</p> <p>Responsibilities: - Accept WebSocket connections from clients - Handle authentication flow - Process tunnel open/close requests - Forward responses from clients to HTTP handlers - Forward WebSocket frames bidirectionally - Send ping/pong for keep-alive - Detect stale connections - Clean up on disconnect</p> <p>Key Methods: - <code>handle(socket)</code> - Accept new WebSocket connection - <code>handle_message()</code> - Route message to handler - <code>handle_auth()</code> - Validate API key - <code>handle_tunnel_open()</code> - Create new tunnel - <code>handle_response_*()</code> - Forward response to HTTP handler - <code>check_connections()</code> - Ping/pong and timeout stale connections - <code>handle_disconnect()</code> - Cleanup on client disconnect</p> <p>Dependencies: - <code>ConnectionManager</code> - Track client connections - <code>TunnelRegistry</code> - Register tunnels - <code>AuthProvider</code> - Validate API keys - <code>PendingRequestStore</code> - Match responses to requests - <code>PendingWebSocketStore</code> - Track WebSocket connections - <code>CompositeRateLimiter</code> - Rate limit tunnel creation</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#tunnelregistry","level":3,"title":"TunnelRegistry","text":"<p>Purpose: In-memory registry of active tunnels</p> <p>Responsibilities: - Register tunnels by ID - Find tunnels by ID, subdomain, or client - Validate subdomain format and availability - Generate random subdomains - Unregister tunnels on close - Unregister all tunnels for a client - Reload reserved subdomains from database</p> <p>Data Structures: <pre><code>@tunnels = {} of String =&gt; Tunnel          # id -&gt; tunnel\n@by_subdomain = {} of String =&gt; Tunnel     # subdomain -&gt; tunnel\n@by_client = {} of String =&gt; Array(Tunnel) # client_id -&gt; tunnels\n@reserved_subdomains = Set(String)         # Reserved names\n</code></pre></p> <p>Validation Rules: - Length: 3-63 characters - Characters: alphanumeric, hyphens - Cannot start/end with hyphen - No consecutive hyphens - Cannot be reserved</p> <p>Thread Safety: All operations protected by <code>Mutex</code></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#connectionmanager","level":3,"title":"ConnectionManager","text":"<p>Purpose: Track active WebSocket client connections</p> <p>Responsibilities: - Add new client connections - Find client by ID - Remove client connections - Iterate over all clients</p> <p>Use Cases: - HTTP ingress finds client to forward requests - Cleanup on disconnect - Broadcasting (future)</p> <p>Thread Safety: Uses concurrent data structures</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#authprovider","level":3,"title":"AuthProvider","text":"<p>Purpose: Validate API keys and provide account information</p> <p>Modes: 1. No Auth: Accept any connection (self-hosted mode) 2. Master Key: Single shared key (simple mode) 3. Database: Validate against stored API keys (production mode)</p> <p>Key Methods: - <code>validate(api_key)</code> - Check if key is valid - <code>account_id_for(api_key)</code> - Get account identifier</p> <p>Database Integration: <pre><code>if @use_database &amp;&amp; Storage::Database.instance?\n  if key_record = Storage::Repositories::ApiKeys.validate(api_key)\n    return true\n  end\nend\n</code></pre></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#pendingrequeststore","level":3,"title":"PendingRequestStore","text":"<p>Purpose: Track in-flight HTTP requests waiting for client response</p> <p>Flow: 1. HTTPIngress creates <code>PendingRequest</code> before sending to client 2. WSGateway receives response and looks up by <code>request_id</code> 3. Response written to HTTP context 4. Request removed from store</p> <p>Implementation: <pre><code>@pending : Hash(String, PendingRequest)\n@mutex = Mutex.new\n\nclass PendingRequest\n  property request_id : String\n  property context : HTTP::Server::Context\n  property tunnel_id : String\n  property response_started : Bool = false\n  @channel : Channel(Nil) = Channel(Nil).new\n\n  def wait(timeout : Time::Span) : Bool\n    @channel.receive(timeout: timeout)\n    true\n  rescue Channel::TimeoutError\n    false\n  end\nend\n</code></pre></p> <p>Timeout Handling: - Wait with timeout (default 30s) - Remove on timeout or completion - Send 504 on timeout if no response started</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/server/pending_request.cr</code></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#pendingwebsocketstore","level":3,"title":"PendingWebSocketStore","text":"<p>Purpose: Track WebSocket upgrade handshakes</p> <p>Flow: 1. HTTPIngress creates <code>PendingWebSocket</code> 2. Sends <code>WebSocketUpgrade</code> to client 3. Waits for <code>WebSocketUpgradeOk</code> or <code>WebSocketUpgradeError</code> 4. Once confirmed, stores <code>ws_protocol</code> for frame forwarding</p> <p>Implementation: <pre><code>@pending : Hash(String, PendingWebSocket)\n@mutex = Mutex.new\n\nclass PendingWebSocket\n  property request_id : String\n  property context : HTTP::Server::Context\n  property tunnel_id : String\n  property ws_protocol : HTTP::WebSocket::Protocol?\n  property closed : Bool = false\n  @on_frame : Proc(UInt8, Bytes, Nil)?\n  @on_close : Proc(UInt16?, String?, Nil)?\n\n  def wait_for_upgrade(timeout : Time::Span) : Bool\n    # Wait for client to confirm WebSocket connection\n  end\nend\n</code></pre></p> <p>Key Methods: - <code>add(pending_ws)</code> - Add new pending WebSocket - <code>get(request_id)</code> - Look up pending WebSocket - <code>remove(request_id)</code> - Remove from store - <code>remove_by_tunnel(tunnel_id)</code> - Cleanup on tunnel close</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/server/pending_websocket.cr</code></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#compositeratelimiter","level":3,"title":"CompositeRateLimiter","text":"<p>Purpose: Enforce rate limits for connections, tunnels, and requests</p> <p>Rate Limiters: 1. Connection Limiter - Connections per IP 2. Tunnel Limiter - Tunnel creation per client 3. Request Limiter - Requests per tunnel</p> <p>Algorithm: Token bucket - Max tokens (burst capacity) - Refill rate (tokens per second) - Consume token on action</p> <p>Default Limits: - Connections: 10 burst, 1/s refill - Tunnels: 5 burst, 0.1/s (1 per 10s) refill - Requests: 100 burst, 50/s refill</p> <p>Key Methods: - <code>allow_connection?(ip)</code> - Check if new connection allowed - <code>allow_tunnel?(client_id)</code> - Check if tunnel creation allowed - <code>allow_request?(tunnel_id)</code> - Check if request allowed - <code>reset_client(client_id)</code> - Clear limits on disconnect - <code>reset_tunnel(tunnel_id)</code> - Clear limits on tunnel close</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#adminapi","level":3,"title":"AdminAPI","text":"<p>Purpose: Administrative endpoints for server management</p> <p>Endpoints: - <code>GET /admin/tunnels</code> - List active tunnels - <code>GET /admin/tunnels/:id</code> - Get tunnel details - <code>POST /admin/tunnels/:id/close</code> - Force close tunnel - <code>GET /admin/stats</code> - Server statistics - <code>POST /admin/reserved-subdomains</code> - Add reserved subdomain - <code>DELETE /admin/reserved-subdomains/:subdomain</code> - Remove reserved subdomain - <code>GET /admin/api-keys</code> - List API keys - <code>POST /admin/api-keys</code> - Create API key - <code>DELETE /admin/api-keys/:prefix</code> - Revoke API key</p> <p>Authentication: Basic auth with configured admin credentials</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#cli-components","level":2,"title":"CLI Components","text":"","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#tunnelclient","level":3,"title":"TunnelClient","text":"<p>Purpose: Main client that connects to server and forwards requests</p> <p>Responsibilities: - Establish WebSocket connection to server - Authenticate with API key - Open tunnels - Receive incoming requests - Route requests to local services - Forward responses back to server - Handle WebSocket upgrades - Auto-reconnect on disconnect</p> <p>Key Methods: - <code>start()</code> - Start connection and message loop - <code>connect()</code> - Establish WebSocket connection - <code>authenticate()</code> - Send auth message - <code>open_tunnel()</code> - Request tunnel creation - <code>handle_message()</code> - Route incoming messages - <code>forward_request()</code> - Proxy HTTP to local service - <code>handle_websocket_upgrade()</code> - Proxy WebSocket to local service</p> <p>State: <pre><code>@connected : Bool = false\n@authenticated : Bool = false\n@tunnel_id : String?\n@public_url : String?\n</code></pre></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#router","level":3,"title":"Router","text":"<p>Purpose: Match incoming paths to local service targets</p> <p>Route Configuration: <pre><code>RouteConfig.new(\n  path: \"/api/*\",      # Glob pattern\n  host: \"api\",         # Target host (nil = default)\n  port: 8080           # Target port\n)\n</code></pre></p> <p>Matching: - First match wins - Glob patterns: <code>/api/*</code> matches <code>/api/users</code>, <code>/api/posts/123</code> - Exact patterns: <code>/socket</code> matches only <code>/socket</code> - Fallback: If no match, use default port</p> <p>Example: <pre><code>routes = [\n  RouteConfig.new(\"/api/*\", \"api\", 8080),\n  RouteConfig.new(\"/socket\", nil, 3000),\n  RouteConfig.new(\"/admin/*\", \"admin\", 8000)\n]\n\n# /api/users -&gt; api:8080\n# /socket -&gt; localhost:3000\n# /admin/dashboard -&gt; admin:8000\n# /other -&gt; localhost:3000 (fallback)\n</code></pre></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#localproxy","level":3,"title":"LocalProxy","text":"<p>Purpose: Make HTTP requests to local services</p> <p>Responsibilities: - Open HTTP connection to target - Filter hop-by-hop headers - Forward request body - Read response - Handle timeouts</p> <p>Timeouts: - Connect: 5 seconds - Read: 30 seconds</p> <p>Error Handling: - <code>Socket::ConnectError</code> → 502 Bad Gateway - <code>IO::TimeoutError</code> → 504 Gateway Timeout - Other errors → 500 Internal Server Error</p> <p>Hop-by-Hop Headers Filtered: - Connection - Keep-Alive - Transfer-Encoding - TE - Trailer - Upgrade - Proxy-Authorization - Proxy-Authenticate</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#websocketproxy","level":3,"title":"WebSocketProxy","text":"<p>Purpose: Proxy WebSocket connections to local services</p> <p>Responsibilities: - Connect to local WebSocket service - Forward frames bidirectionally - Handle close frames - Notify on connection close</p> <p>Frame Flow: <pre><code>External WS ←→ Server ←→ Client ←→ WebSocketProxy ←→ Local WS\n</code></pre></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#inspector","level":3,"title":"Inspector","text":"<p>Purpose: Web UI for debugging tunneled requests</p> <p>Components: 1. HTTP Server - Serves UI and API 2. RequestStore - Stores request/response history 3. WebSocket - Pushes real-time updates to UI</p> <p>Endpoints: - <code>/</code> - Serve React UI (baked in release, proxied to Vite in dev) - <code>/api/live</code> - WebSocket for real-time updates - <code>/api/requests</code> - Get all stored requests - <code>/api/requests/clear</code> - Clear history</p> <p>Request Storage: <pre><code>StoredRequest.new(\n  id: request_id,\n  method: \"GET\",\n  path: \"/api/users\",\n  status_code: 200,\n  duration: 45_i64,\n  timestamp: Time.utc,\n  request_headers: {...},\n  request_body: \"...\",\n  response_headers: {...},\n  response_body: \"...\",\n  matched_route: \"/api/*\",\n  matched_target: \"api:8080\"\n)\n</code></pre></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#updater","level":3,"title":"Updater","text":"<p>Purpose: Self-update mechanism for CLI</p> <p>Flow: 1. Fetch latest release from GitHub API 2. Compare versions 3. Download binary for current platform 4. Replace executable 5. Clean up old binary</p> <p>Update Sources: - Latest release: <code>https://api.github.com/repos/watzon/sellia/releases/latest</code> - Specific version: <code>https://api.github.com/repos/watzon/sellia/releases/tags/v{version}</code></p> <p>Platform Detection: - OS: darwin, linux, windows - Arch: amd64, arm64</p> <p>Binary Naming: - <code>sellia-darwin-amd64</code> - <code>sellia-linux-arm64</code> - <code>sellia-windows-amd64.exe</code></p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#storage-layer","level":2,"title":"Storage Layer","text":"","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#database","level":3,"title":"Database","text":"<p>Purpose: SQLite database for persistent data</p> <p>Features: - Singleton pattern (one connection per process) - WAL mode for better concurrency - Shared cache for in-memory mode - Connection pooling</p> <p>Configuration: - File-based: <code>sqlite3://path?journal_mode=WAL&amp;synchronous=NORMAL</code> - In-memory: <code>sqlite3://:memory:?mode=memory&amp;cache=shared</code></p> <p>Models: - <code>ReservedSubdomain</code> - Reserved subdomain names - <code>ApiKey</code> - API keys for authentication</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#repositories","level":3,"title":"Repositories","text":"<p>ReservedSubdomains: - <code>all()</code> - Get all reserved subdomains - <code>exists?(subdomain)</code> - Check if subdomain is reserved - <code>create(subdomain, reason)</code> - Add reserved subdomain - <code>delete(subdomain)</code> - Remove reserved subdomain - <code>to_set()</code> - Convert to Set for fast lookup</p> <p>ApiKeys: - <code>find_by_hash(key_hash)</code> - Find by key hash - <code>find_by_prefix(prefix)</code> - Find by key prefix (for listing) - <code>validate(plaintext_key)</code> - Validate and update last_used_at - <code>create(plaintext_key, name)</code> - Create new API key - <code>revoke(prefix)</code> - Revoke API key (set active=0) - <code>count_active()</code> - Count active API keys - <code>all()</code> - Get all API keys</p>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#data-flow-summary","level":2,"title":"Data Flow Summary","text":"","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#http-request-flow","level":3,"title":"HTTP Request Flow","text":"<pre><code>User → HTTPIngress → TunnelRegistry → ConnectionManager\n     ↓\nPendingRequestStore → WSGateway → Client\n     ↓\nRouter → LocalProxy → Local Service\n     ↓\nResponseStart → ResponseBody* → ResponseEnd\n     ↓\nPendingRequestStore → HTTPIngress → User\n</code></pre>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#websocket-flow","level":3,"title":"WebSocket Flow","text":"<pre><code>User → HTTPIngress → PendingWebSocketStore → WSGateway → Client\n     ↓\nRouter → WebSocketProxy → Local WS Service\n     ↓\nWebSocketUpgradeOk\n     ↓\nFrame Loop: Frames ↔ WSGateway ↔ Client ↔ WebSocketProxy ↔ Local WS\n</code></pre>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#security-architecture","level":2,"title":"Security Architecture","text":"","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#authentication","level":3,"title":"Authentication","text":"<ol> <li>Client → Server: API key in <code>Auth</code> message</li> <li>Server: Validates against database or master key</li> <li>Tunnel Auth: Optional basic auth per tunnel</li> </ol>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#tlsssl","level":3,"title":"TLS/SSL","text":"<ol> <li>Server: Terminates TLS (Caddy/reverse proxy)</li> <li>Client → Server: WSS (WebSocket Secure)</li> <li>Public → Server: HTTPS</li> </ol>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#rate-limiting","level":3,"title":"Rate Limiting","text":"<ol> <li>Per-IP: Connection limits</li> <li>Per-Client: Tunnel creation limits</li> <li>Per-Tunnel: Request limits</li> <li>Token bucket algorithm</li> </ol>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/architecture/components/#subdomain-validation","level":3,"title":"Subdomain Validation","text":"<ol> <li>Format checks: Length, characters, pattern</li> <li>Availability check: Not already in use</li> <li>Reserved check: Not in reserved list</li> <li>Database persistence: Reserved subdomains stored in DB</li> </ol>","path":["Developer","Architecture","Core Component Overview"],"tags":[]},{"location":"developer/cli-components/","level":1,"title":"CLI Components","text":"<p>Client-side implementation details for the Sellia CLI.</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#overview","level":2,"title":"Overview","text":"<p>The Sellia CLI (<code>sellia</code>) is responsible for creating tunnels to the local server, managing connections, and providing the request inspector. This section covers the client architecture and key components.</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#architecture","level":2,"title":"Architecture","text":"<pre><code>User Command\n     ↓\n   OptionParser\n     ↓\n Tunnel Client\n     ↓\nWebSocket to Server ←→ Local Service\n     ↓\n Inspector Server\n     ↓\n  Web UI\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#key-components","level":2,"title":"Key Components","text":"","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#tunnel-client","level":3,"title":"Tunnel Client","text":"<p>Location: <code>src/cli/tunnel_client.cr</code></p> <p>Core client that connects to the Sellia server.</p> <pre><code>class Sellia::CLI::TunnelClient\n  def initialize(\n    @server_url : String,\n    @local_port : Int32,\n    @api_key : String? = nil,\n    @local_host : String = \"localhost\",\n    @subdomain : String? = nil,\n    @auth : String? = nil,\n    @request_store : RequestStore? = nil,\n    routes : Array(RouteConfig) = [] of RouteConfig,\n  )\n    @proxy = LocalProxy.new(@local_host, @local_port)\n    @router = Router.new(routes, @local_host, @local_port &gt; 0 ? @local_port : nil)\n  end\n\n  def start\n    @running = true\n    @reconnect_attempts = 0\n    connect\n  end\n\n  def stop\n    @running = false\n    @connected = false\n    @authenticated = false\n    @socket.try(&amp;.close)\n    # ... cleanup\n  end\n\n  # Callbacks\n  def on_connect(&amp;block : String -&gt;)\n    @on_connect = block\n  end\n\n  def on_request(&amp;block : Protocol::Messages::RequestStart -&gt;)\n    @on_request = block\n  end\nend\n</code></pre> <p>Responsibilities: - Connect to server via WebSocket - Authenticate with API key if provided - Open tunnel and handle incoming requests - Route requests to local services - Forward responses back to server - Handle WebSocket upgrade requests - Auto-reconnect on disconnect</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#local-proxy","level":3,"title":"Local Proxy","text":"<p>Location: <code>src/cli/local_proxy.cr</code></p> <p>HTTP proxy that forwards requests to local service.</p> <pre><code>class Sellia::CLI::LocalProxy\n  def initialize(@host : String, @port : Int32)\n  end\n\n  def forward(request : TunnelRequest) : TunnelResponse\n    # Build HTTP request\n    uri = URI.parse(\"http://#{@host}:#{@port}#{request.url}\")\n\n    client = HTTP::Client.new(uri)\n    client.before_request do |req|\n      req.method = request.method\n      request.headers.each do |key, value|\n        req.headers[key] = value\n      end\n      req.body = request.body if request.body\n    end\n\n    # Execute request\n    response = client.exec(request.method, request.url)\n\n    # Build tunnel response\n    TunnelResponse.new(\n      request_id: request.request_id,\n      status_code: response.status_code,\n      headers: response.headers.to_h,\n      body: response.body?\n    )\n  end\nend\n</code></pre> <p>Responsibilities: - Receive requests from tunnel client - Forward to local service - Return responses to tunnel client - Handle connection errors</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#inspector-server","level":3,"title":"Inspector Server","text":"<p>Location: <code>src/cli/inspector.cr</code></p> <p>Local HTTP server for the inspector UI.</p> <pre><code>class Sellia::CLI::Inspector\n  property port : Int32\n  property store : RequestStore\n\n  def initialize(@port : Int32, @store : RequestStore)\n  end\n\n  def start\n    @running = true\n    server = HTTP::Server.new do |context|\n      handle_request(context)\n    end\n\n    @server = server\n    address = server.bind_tcp(\"127.0.0.1\", @port)\n    Log.info { \"Inspector running at http://#{address}\" }\n    server.listen\n  end\n\n  def stop\n    @running = false\n    @server.try(&amp;.close)\n  end\n\n  def running? : Bool\n    @running\n  end\nend\n</code></pre> <p>Responsibilities: - Serve inspector UI (React SPA) - WebSocket endpoint for real-time updates - REST API for request history - Broadcast requests to connected clients - Support development mode (Vite proxy) and production mode (baked assets)</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#configuration","level":3,"title":"Configuration","text":"<p>Location: <code>src/cli/config.cr</code></p> <p>Loads and manages configuration.</p> <pre><code>class Sellia::CLI::Config\n  include YAML::Serializable\n\n  property server : String = \"https://sellia.me\"\n  property api_key : String?\n  property inspector : Inspector = Inspector.new\n  property database : DatabaseConfig = DatabaseConfig.new\n  property tunnels : Hash(String, TunnelConfig) = {} of String =&gt; TunnelConfig\n\n  def self.load : Config\n    config = Config.new\n\n    # Load in order of increasing priority\n    paths = [\n      Path.home / \".config\" / \"sellia\" / \"sellia.yml\",\n      Path.home / \".sellia.yml\",\n      Path.new(\"sellia.yml\"),\n    ]\n\n    paths.each do |path|\n      if File.exists?(path)\n        file_config = from_yaml(File.read(path))\n        config = config.merge(file_config)\n      end\n    end\n\n    # Environment variables override (highest priority)\n    if env_server = ENV[\"SELLIA_SERVER\"]?\n      config.server = env_server\n    end\n    if env_key = ENV[\"SELLIA_API_KEY\"]?\n      config.api_key = env_key\n    end\n\n    config\n  end\nend\n</code></pre> <p>Responsibilities: - Load configuration from multiple sources with proper merging - Support YAML config files - Support environment variable overrides - Validate configuration</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#commands","level":2,"title":"Commands","text":"<p>Location: <code>src/cli/main.cr</code></p> <p>The CLI uses OptionParser directly for command parsing, not a separate command library.</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#main-entry-point","level":3,"title":"Main Entry Point","text":"<pre><code>module Sellia::CLI\n  def self.run\n    ::Log.setup_from_env(default_level: :warn)\n\n    command = ARGV.shift?\n\n    case command\n    when \"http\"\n      run_http_tunnel\n    when \"start\"\n      run_start\n    when \"auth\"\n      run_auth\n    when \"admin\"\n      run_admin\n    when \"update\"\n      run_update\n    when \"version\", \"-v\", \"--version\"\n      puts \"Sellia v#{Sellia::VERSION}\"\n    else\n      # Show help\n    end\n  end\nend\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#http-command","level":3,"title":"HTTP Command","text":"<p>Create HTTP tunnel to local port.</p> <p>Options: - <code>--subdomain NAME, -s NAME</code> - Request specific subdomain - <code>--auth USER:PASS, -a USER:PASS</code> - Enable basic auth protection - <code>--host HOST, -H HOST</code> - Local host (default: localhost) - <code>--server URL</code> - Tunnel server URL - <code>--api-key KEY, -k KEY</code> - API key for authentication - <code>--inspector-port PORT, -i PORT</code> - Inspector UI port (default: 4040) - <code>--open, -o</code> - Open inspector in browser on connect - <code>--no-inspector</code> - Disable the request inspector</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#start-command","level":3,"title":"Start Command","text":"<p>Start tunnels from config file.</p> <p>Options: - <code>--config FILE, -c FILE</code> - Config file path</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#auth-command","level":3,"title":"Auth Command","text":"<p>Manage authentication.</p> <p>Subcommands: - <code>login</code> - Save API key for authentication - <code>logout</code> - Remove saved API key - <code>status</code> - Show current authentication status</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#reconnection-logic","level":2,"title":"Reconnection Logic","text":"","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#linear-backoff","level":3,"title":"Linear Backoff","text":"<pre><code>class Sellia::CLI::TunnelClient\n  property auto_reconnect : Bool = true\n  property reconnect_delay : Time::Span = 3.seconds\n  property max_reconnect_attempts : Int32 = 10\n\n  private def handle_reconnect\n    return unless @running &amp;&amp; @auto_reconnect\n\n    @reconnect_attempts += 1\n\n    if @reconnect_attempts &gt; @max_reconnect_attempts\n      Log.error { \"Max reconnection attempts exceeded\" }\n      @running = false\n      return\n    end\n\n    delay = @reconnect_delay * @reconnect_attempts  # Linear backoff\n    Log.info { \"Reconnecting in #{delay.total_seconds.to_i}s...\" }\n\n    sleep delay\n    connect if @running\n  end\nend\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#message-handling","level":2,"title":"Message Handling","text":"","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#binary-websocket-messages","level":3,"title":"Binary WebSocket Messages","text":"<p>The client uses MessagePack for binary message serialization:</p> <pre><code>private def handle_message(bytes : Bytes)\n  message = Protocol::Message.from_msgpack(bytes)\n\n  case message\n  when Protocol::Messages::AuthOk\n    handle_auth_ok(message)\n  when Protocol::Messages::AuthError\n    handle_auth_error(message)\n  when Protocol::Messages::TunnelReady\n    handle_tunnel_ready(message)\n  when Protocol::Messages::TunnelClose\n    handle_tunnel_close(message)\n  when Protocol::Messages::RequestStart\n    handle_request_start(message)\n  when Protocol::Messages::RequestBody\n    handle_request_body(message)\n  when Protocol::Messages::Ping\n    send_message(Protocol::Messages::Pong.new(message.timestamp))\n  when Protocol::Messages::WebSocketUpgrade\n    handle_websocket_upgrade(message)\n  # ... more message types\n  end\nend\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#sending-messages","level":3,"title":"Sending Messages","text":"<pre><code>private def send_message(message : Protocol::Message)\n  socket = @socket\n  return unless socket &amp;&amp; @running\n\n  @send_mutex.synchronize do\n    socket.send(message.to_msgpack)\n  end\nend\n</code></pre> <p>The mutex prevents concurrent writes from multiple request handler fibers.</p>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#performance","level":2,"title":"Performance","text":"","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#concurrent-request-handling","level":3,"title":"Concurrent Request Handling","text":"<p>Each incoming request spawns a fiber for parallel processing:</p> <pre><code>private def handle_request_body(message : Protocol::Messages::RequestBody)\n  body_io = @request_bodies[message.request_id]?\n  return unless body_io\n\n  body_io.write(message.chunk) unless message.chunk.empty?\n\n  if message.final\n    # Request body complete - forward to local service\n    spawn do\n      forward_request(message.request_id)\n    end\n  end\nend\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#memory","level":3,"title":"Memory","text":"<ul> <li>Per pending request: ~10KB (headers + body buffer)</li> <li>Per WebSocket: ~10KB (frame buffer)</li> <li>Inspector storage: Configurable (default 1000 requests)</li> </ul>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#debugging","level":2,"title":"Debugging","text":"","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#logging","level":3,"title":"Logging","text":"<pre><code>Log.setup_from_env(default_level: :warn)\n\nLog.debug { \"Connecting to #{@server_url}\" }\nLog.info { \"Tunnel ready: #{url}\" }\nLog.warn { \"Tunnel closed by server: #{reason}\" }\nLog.error { \"Connection failed: #{ex.message}\" }\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#debug-mode","level":3,"title":"Debug Mode","text":"<pre><code># Enable debug logging\nLOG_LEVEL=debug sellia http 3000\n\n# Enable trace logging\nLOG_LEVEL=trace sellia http 3000\n</code></pre>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/#see-also","level":2,"title":"See Also","text":"<ul> <li>TunnelClient Details - Detailed TunnelClient documentation</li> <li>Inspector Documentation - Inspector component details</li> <li>LocalProxy Documentation - Local proxy implementation</li> <li>Router Documentation - Request routing</li> <li>Updater Documentation - Self-update functionality</li> </ul>","path":["Developer","Cli components","CLI Components"],"tags":[]},{"location":"developer/cli-components/inspector/","level":1,"title":"Inspector Class Documentation","text":"<p>The <code>Inspector</code> provides a web UI for debugging tunneled HTTP requests in real-time.</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#overview","level":2,"title":"Overview","text":"<p><code>Inspector</code> consists of: - HTTP server serving React UI - WebSocket endpoint for real-time updates - REST API for request history - Integration with <code>RequestStore</code> - Development mode (Vite proxy) and production mode (baked assets)</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#class-definition","level":2,"title":"Class Definition","text":"<pre><code>class Sellia::CLI::Inspector\n  property port : Int32\n  property store : RequestStore\n\n  @server : HTTP::Server?\n  @running : Bool = false\n\n  def initialize(@port : Int32, @store : RequestStore)\n  end\nend\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#methods","level":2,"title":"Methods","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#start","level":3,"title":"<code>start</code>","text":"<pre><code>def start\n</code></pre> <p>Start the inspector HTTP server.</p> <p>Flow: <pre><code>@running = true\n\nserver = HTTP::Server.new do |context|\n  handle_request(context)\nend\n\n@server = server\n\nbegin\n  address = server.bind_tcp(\"127.0.0.1\", @port)\n  Log.info { \"Inspector running at http://#{address}\" }\n  server.listen\nrescue ex : Socket::BindError\n  Log.error { \"Failed to bind inspector to port #{@port}: #{ex.message}\" }\n  @running = false\nend\n</code></pre></p> <p>Binds to: 127.0.0.1 (localhost only)</p> <p>Default Port: 4040</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#stop","level":3,"title":"<code>stop</code>","text":"<pre><code>def stop\n</code></pre> <p>Stop the inspector server.</p> <pre><code>@running = false\n@server.try(&amp;.close)\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#running","level":3,"title":"<code>running?</code>","text":"<pre><code>def running? : Bool\n</code></pre> <p>Check if inspector is running.</p> <p>Returns: <code>true</code> if server is listening</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#endpoints","level":2,"title":"Endpoints","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#-serve-ui","level":3,"title":"<code>/</code> - Serve UI","text":"<p>Serve React UI (index.html)</p> <p>Development Mode: Proxies to Vite dev server (localhost:5173)</p> <p>Production Mode: Serves baked assets from compiled binary</p> <pre><code>when \"/\"\n  serve_file(context, \"/index.html\")\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#apilive-websocket-endpoint","level":3,"title":"<code>/api/live</code> - WebSocket Endpoint","text":"<p>WebSocket connection for real-time request updates.</p> <pre><code>when \"/api/live\"\n  handle_websocket(context)\n</code></pre> <p>WebSocket Messages: <pre><code>{\n  \"type\": \"request\",\n  \"request\": {\n    \"id\": \"req_123\",\n    \"method\": \"GET\",\n    \"path\": \"/api/users\",\n    \"statusCode\": 200,\n    \"duration\": 45,\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"requestHeaders\": {...},\n    \"requestBody\": \"...\",\n    \"responseHeaders\": {...},\n    \"responseBody\": \"...\",\n    \"matchedRoute\": \"/api/*\",\n    \"matchedTarget\": \"api:8080\"\n  }\n}\n</code></pre></p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#apirequests-get-all-requests","level":3,"title":"<code>/api/requests</code> - Get All Requests","text":"<p>Get all stored requests.</p> <pre><code>when \"/api/requests\"\n  context.response.content_type = \"application/json\"\n  context.response.print(@store.all.to_json)\n</code></pre> <p>Response: <pre><code>[\n  {\n    \"id\": \"req_123\",\n    \"method\": \"GET\",\n    \"path\": \"/api/users\",\n    \"statusCode\": 200,\n    \"duration\": 45,\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"requestHeaders\": {\"Host\": [\"myapp.sellia.dev\"]},\n    \"requestBody\": null,\n    \"responseHeaders\": {\"Content-Type\": [\"application/json\"]},\n    \"responseBody\": \"[{\\\"id\\\":1}]\",\n    \"matchedRoute\": \"/api/*\",\n    \"matchedTarget\": \"api:8080\"\n  }\n]\n</code></pre></p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#apirequestsclear-clear-history","level":3,"title":"<code>/api/requests/clear</code> - Clear History","text":"<p>Clear all stored requests.</p> <pre><code>when \"/api/requests/clear\"\n  if context.request.method == \"POST\"\n    @store.clear\n    context.response.content_type = \"application/json\"\n    context.response.print(%({\"status\":\"ok\"}))\n  else\n    context.response.status_code = 405\n    context.response.print(\"Method not allowed\")\n  end\n</code></pre> <p>Method: POST only</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#websocket-implementation","level":2,"title":"WebSocket Implementation","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#connection-handler","level":3,"title":"Connection Handler","text":"<pre><code>def handle_websocket(context)\n  if context.request.headers[\"Upgrade\"]?.try(&amp;.downcase) == \"websocket\"\n    ws_handler = HTTP::WebSocketHandler.new do |socket, ctx|\n      handle_websocket_connection(socket)\n    end\n    ws_handler.call(context)\n  else\n    context.response.status_code = 400\n    context.response.print(\"WebSocket connection required\")\n  end\nend\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#message-loop","level":3,"title":"Message Loop","text":"<pre><code>def handle_websocket_connection(socket)\n  channel = @store.subscribe\n  closed = Atomic(Bool).new(false)\n\n  # Send updates to WebSocket client\n  spawn do\n    loop do\n      break if closed.get\n      begin\n        select\n        when request = channel.receive?\n          break if request.nil?\n          message = {type: \"request\", request: request}.to_json\n          socket.send(message)\n        when timeout(1.second)\n          next\n        end\n      rescue Channel::ClosedError\n        break\n      end\n    end\n  end\n\n  socket.on_close do\n    closed.set(true)\n    @store.unsubscribe(channel)\n  end\n\n  socket.run\nend\n</code></pre> <p>Flow: 1. Subscribe to RequestStore channel 2. Spawn fiber to receive updates 3. Send each request as JSON message 4. On close, unsubscribe from channel</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#asset-serving","level":2,"title":"Asset Serving","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#production-mode-release-build","level":3,"title":"Production Mode (Release Build)","text":"<p>Assets are baked into binary using <code>baked_file_system</code>:</p> <pre><code>{% if flag?(:release) %}\n  class InspectorAssets\n    extend BakedFileSystem\n    bake_folder \"../../web/dist\", __DIR__\n  end\n{% end %}\n</code></pre> <p>Serving: <pre><code>private def serve_baked_file(context, path)\n  file = InspectorAssets.get?(path)\n\n  # SPA fallback\n  if file.nil? &amp;&amp; path != \"/index.html\" &amp;&amp; !path.starts_with?(\"/assets/\")\n    file = InspectorAssets.get?(\"/index.html\")\n  end\n\n  if file\n    content_type = mime_type_for(path)\n    context.response.content_type = content_type\n\n    # Cache static assets\n    if path.starts_with?(\"/assets/\")\n      context.response.headers[\"Cache-Control\"] = \"public, max-age=31536000, immutable\"\n    end\n\n    context.response.print(file.gets_to_end)\n  else\n    context.response.status_code = 404\n    context.response.print(\"Not found: #{path}\")\n  end\nend\n</code></pre></p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#development-mode","level":3,"title":"Development Mode","text":"<p>Proxies to Vite dev server (localhost:5173):</p> <pre><code>private def proxy_to_vite(context, path)\n  vite_url = \"http://localhost:5173#{path}\"\n\n  # WebSocket upgrade not supported for HMR\n  if context.request.headers[\"Upgrade\"]?.try(&amp;.downcase) == \"websocket\"\n    context.response.status_code = 502\n    context.response.print(\"WebSocket proxying not supported\")\n    return\n  end\n\n  response = HTTP::Client.get(vite_url)\n  context.response.status_code = response.status_code\n\n  # Forward headers\n  response.headers.each do |key, values|\n    next if key.downcase.in?(\"transfer-encoding\", \"connection\", \"content-length\")\n    context.response.headers[key] = values.first\n  end\n\n  context.response.print(response.body)\nend\n</code></pre> <p>Vite Not Running: Returns friendly error page</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#mime-types","level":2,"title":"MIME Types","text":"<pre><code>private def mime_type_for(path) : String\n  case path\n  when .ends_with?(\".html\") then \"text/html; charset=utf-8\"\n  when .ends_with?(\".js\") then \"application/javascript; charset=utf-8\"\n  when .ends_with?(\".css\") then \"text/css; charset=utf-8\"\n  when .ends_with?(\".svg\") then \"image/svg+xml\"\n  when .ends_with?(\".png\") then \"image/png\"\n  when .ends_with?(\".json\") then \"application/json\"\n  else \"application/octet-stream\"\n  end\nend\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#usage-example","level":2,"title":"Usage Example","text":"<pre><code># Create request store\nstore = RequestStore.new(max_size: 1000)\n\n# Start inspector\ninspector = Inspector.new(port: 4000, store: store)\nspawn { inspector.start }\n\n# Configure tunnel client to use store\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  request_store: store\n)\n\n# Start client\nclient.on_connect do |url|\n  puts \"Tunnel: #{url}\"\n  puts \"Inspector: http://localhost:4000\"\nend\n\nclient.start\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#request-storage","level":2,"title":"Request Storage","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#storedrequest-structure","level":3,"title":"StoredRequest Structure","text":"<pre><code>struct StoredRequest\n  include JSON::Serializable\n\n  property id : String\n  property method : String\n  property path : String\n  property status_code : Int32\n  property duration : Int64\n  property timestamp : Time\n  property request_headers : Hash(String, Array(String))\n  property request_body : String?\n  property response_headers : Hash(String, Array(String))\n  property response_body : String?\n  property matched_route : String?\n  property matched_target : String?\nend\n</code></pre> <p>JSON Field Names (camelCase in JSON): - <code>id</code> - <code>method</code> - <code>path</code> - <code>statusCode</code> (not <code>status_code</code>) - <code>duration</code> - <code>timestamp</code> - <code>requestHeaders</code> (not <code>request_headers</code>) - <code>requestBody</code> (not <code>request_body</code>) - <code>responseHeaders</code> (not <code>response_headers</code>) - <code>responseBody</code> (not <code>response_body</code>) - <code>matchedRoute</code> (not <code>matched_route</code>) - <code>matchedTarget</code> (not <code>matched_target</code>)</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#body-truncation","level":3,"title":"Body Truncation","text":"<p>Bodies are truncated to 100KB for display:</p> <pre><code>max_body_size = 100_000\nif request_body_content &amp;&amp; request_body_content.size &gt; max_body_size\n  request_body_content = request_body_content[0, max_body_size] + \"\\n... (truncated)\"\nend\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#performance","level":2,"title":"Performance","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#memory","level":3,"title":"Memory","text":"<p>Per stored request: ~10-100KB (depending on body size)</p> <p>Default max size: 1000 requests</p> <p>For 1000 avg requests (50KB each): ~50 MB</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#cpu","level":3,"title":"CPU","text":"<ul> <li>WebSocket send: ~100μs per request</li> <li>JSON serialization: ~50μs per request</li> <li>Asset serving: ~1ms per file</li> </ul>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each WebSocket connection in separate fiber</li> <li>Channel-based pub/sub for updates</li> <li>Thread-safe store operations</li> </ul>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#set-reasonable-max-size","level":3,"title":"Set Reasonable Max Size","text":"<pre><code># For development: keep all requests\nstore = RequestStore.new(max_size: 10_000)\n\n# For production: limit memory\nstore = RequestStore.new(max_size: 1000)\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#bind-to-localhost-only","level":3,"title":"Bind to Localhost Only","text":"<pre><code># GOOD - only accessible from this machine\nserver.bind_tcp(\"127.0.0.1\", @port)\n\n# BAD - accessible from network\nserver.bind_tcp(\"0.0.0.0\", @port)\n</code></pre>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#use-in-development-only","level":3,"title":"Use in Development Only","text":"<p>Inspector adds overhead: - Memory for storing requests - CPU for JSON serialization - WebSocket connections</p> <p>Don't use in production unless needed for debugging.</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#inspector-not-accessible","level":3,"title":"Inspector Not Accessible","text":"<p>Symptom: Can't connect to http://localhost:4040</p> <p>Causes: 1. Inspector not started 2. Port already in use 3. Firewall blocking</p> <p>Solutions: 1. Check inspector is running: <code>inspector.running?</code> 2. Check port is available: <code>lsof -i :4040</code> 3. Try different port: <code>Inspector.new(port: 4041, store)</code></p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#vite-dev-server-not-running","level":3,"title":"Vite Dev Server Not Running","text":"<p>Symptom: \"Vite Dev Server Not Running\" page</p> <p>Cause: Vite dev server not started</p> <p>Solution: Start Vite dev server <pre><code>cd web\nnpm run dev\n</code></pre></p> <p>Or build for production: <pre><code>npm run build\nshards build --release\n</code></pre></p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#requests-not-showing","level":3,"title":"Requests Not Showing","text":"<p>Symptom: No requests in inspector</p> <p>Causes: 1. Request store not configured 2. Tunnel client not using store 3. WebSocket not connected</p> <p>Solutions: 1. Create store: <code>RequestStore.new</code> 2. Pass to client: <code>TunnelClient.new(..., request_store: store)</code> 3. Check browser console for WebSocket errors</p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/inspector/#memory-usage-growing","level":3,"title":"Memory Usage Growing","text":"<p>Symptom: Memory increases over time</p> <p>Cause: Store not limiting size</p> <p>Solution: Set max_size: <pre><code>store = RequestStore.new(max_size: 1000)  # Max 1000 requests\n</code></pre></p>","path":["Developer","Cli components","Inspector Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/","level":1,"title":"TunnelClient Class Documentation","text":"<p>The <code>TunnelClient</code> is the main client class that connects to the Sellia server and forwards requests to local services.</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#overview","level":2,"title":"Overview","text":"<p><code>TunnelClient</code> manages: - WebSocket connection to server - Authentication flow - Tunnel creation - HTTP request forwarding - WebSocket connection forwarding - Auto-reconnection on disconnect - Optional routing to multiple local services</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#class-definition","level":2,"title":"Class Definition","text":"<pre><code>class TunnelClient\n  # Configuration\n  property server_url : String\n  property api_key : String?\n  property local_port : Int32\n  property local_host : String\n  property subdomain : String?\n  property auth : String?\n\n  # State\n  property public_url : String?\n  property tunnel_id : String?\n  getter connected : Bool = false\n  getter authenticated : Bool = false\n\n  # Auto-reconnect settings\n  property auto_reconnect : Bool = true\n  property reconnect_delay : Time::Span = 3.seconds\n  property max_reconnect_attempts : Int32 = 10\n\n  # Request store for inspector (optional)\n  property request_store : RequestStore?\n\n  def initialize(\n    @server_url : String,\n    @local_port : Int32,\n    @api_key : String? = nil,\n    @local_host : String = \"localhost\",\n    @subdomain : String? = nil,\n    @auth : String? = nil,\n    @request_store : RequestStore? = nil,\n    routes : Array(RouteConfig) = [] of RouteConfig,\n  )\n  end\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#lifecycle","level":2,"title":"Lifecycle","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#starting-the-client","level":3,"title":"Starting the Client","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  api_key: \"key_...\",\n  subdomain: \"myapp\"\n)\n\nclient.on_connect do |url|\n  puts \"Tunnel ready: #{url}\"\nend\n\nclient.on_request do |request|\n  puts \"#{request.method} #{request.path}\"\nend\n\nclient.on_disconnect do\n  puts \"Disconnected\"\nend\n\nclient.on_error do |error|\n  puts \"Error: #{error}\"\nend\n\nclient.start  # Blocking\nsleep         # Or run in fiber\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#stopping-the-client","level":3,"title":"Stopping the Client","text":"<pre><code>client.stop\n</code></pre> <p>Cleanup: - Closes WebSocket connection - Clears in-flight requests - Closes all WebSocket connections - Stops auto-reconnect</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#callbacks","level":2,"title":"Callbacks","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#on_connect","level":3,"title":"<code>on_connect</code>","text":"<pre><code>def on_connect(&amp;block : String -&gt;)\n</code></pre> <p>Called when tunnel is ready.</p> <p>Parameter: <code>public_url</code> (e.g., \"https://myapp.sellia.dev\")</p> <p>Use Case: Display URL to user</p> <pre><code>client.on_connect do |url|\n  puts \"=\" * 50\n  puts \"Tunnel established!\"\n  puts \"Public URL: #{url}\"\n  puts \"=\" * 50\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#on_request","level":3,"title":"<code>on_request</code>","text":"<pre><code>def on_request(&amp;block : Protocol::Messages::RequestStart -&gt;)\n</code></pre> <p>Called for each incoming request.</p> <p>Parameter: <code>RequestStart</code> message</p> <p>Use Case: Logging, debugging</p> <pre><code>client.on_request do |request|\n  puts \"[#{Time.now}] #{request.method} #{request.path}\"\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#on_websocket","level":3,"title":"<code>on_websocket</code>","text":"<pre><code>def on_websocket(&amp;block : String, String -&gt;)\n</code></pre> <p>Called when WebSocket connection is established.</p> <p>Parameters: 1. <code>path</code> - WebSocket path 2. <code>request_id</code> - Request identifier</p> <p>Use Case: Track active WebSockets</p> <pre><code>client.on_websocket do |path, request_id|\n  puts \"WebSocket connected: #{path} (#{request_id})\"\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#on_disconnect","level":3,"title":"<code>on_disconnect</code>","text":"<pre><code>def on_disconnect(&amp;block : -&gt;)\n</code></pre> <p>Called when disconnected from server.</p> <p>Use Case: Notify user, trigger cleanup</p> <pre><code>client.on_disconnect do\n  puts \"Disconnected from server\"\n  puts \"Attempting to reconnect...\"\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#on_error","level":3,"title":"<code>on_error</code>","text":"<pre><code>def on_error(&amp;block : String -&gt;)\n</code></pre> <p>Called on error.</p> <p>Parameter: Error message</p> <p>Use Case: Display errors to user</p> <pre><code>client.on_error do |error|\n  STDERR.puts \"Error: #{error}\"\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#message-handlers","level":2,"title":"Message Handlers","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_auth_ok","level":3,"title":"<code>handle_auth_ok</code>","text":"<pre><code>private def handle_auth_ok(message : Protocol::Messages::AuthOk)\n</code></pre> <p>Authentication successful.</p> <p>Flow: <pre><code>Log.info { \"Authenticated successfully (account: #{message.account_id})\" }\n@authenticated = true\nopen_tunnel\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_auth_error","level":3,"title":"<code>handle_auth_error</code>","text":"<pre><code>private def handle_auth_error(message : Protocol::Messages::AuthError)\n</code></pre> <p>Authentication failed.</p> <p>Flow: <pre><code>Log.error { \"Authentication failed: #{message.error}\" }\n@on_error.try(&amp;.call(\"Authentication failed: #{message.error}\"))\n@auto_reconnect = false  # Don't retry with bad credentials\nstop\n</code></pre></p> <p>Important: Disables auto-reconnect (bad credentials won't work on retry)</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_tunnel_ready","level":3,"title":"<code>handle_tunnel_ready</code>","text":"<pre><code>private def handle_tunnel_ready(message : Protocol::Messages::TunnelReady)\n</code></pre> <p>Tunnel created successfully.</p> <p>Flow: <pre><code>@tunnel_id = message.tunnel_id\n@public_url = message.url\nLog.info { \"Tunnel ready: #{message.url}\" }\n@on_connect.try(&amp;.call(message.url))\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_tunnel_close","level":3,"title":"<code>handle_tunnel_close</code>","text":"<pre><code>private def handle_tunnel_close(message : Protocol::Messages::TunnelClose)\n</code></pre> <p>Tunnel closed by server.</p> <p>Flow: <pre><code>reason = message.reason || \"No reason provided\"\nLog.warn { \"Tunnel closed by server: #{reason}\" }\n@on_error.try(&amp;.call(\"Tunnel closed: #{reason}\"))\n\n@tunnel_id = nil\n@public_url = nil\n\n# Don't reconnect if subdomain taken\nif reason.includes?(\"not available\")\n  @auto_reconnect = false\n  stop\nend\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_request_start","level":3,"title":"<code>handle_request_start</code>","text":"<pre><code>private def handle_request_start(message : Protocol::Messages::RequestStart)\n</code></pre> <p>Start of incoming HTTP request.</p> <p>Flow: <pre><code>Log.debug { \"Request start: #{message.method} #{message.path}\" }\n@on_request.try(&amp;.call(message))\n\n# Store request metadata\n@pending_requests[message.request_id] = message\n@request_bodies[message.request_id] = IO::Memory.new\n@request_start_times[message.request_id] = Time.monotonic\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_request_body","level":3,"title":"<code>handle_request_body</code>","text":"<pre><code>private def handle_request_body(message : Protocol::Messages::RequestBody)\n</code></pre> <p>Request body chunk received.</p> <p>Flow: <pre><code>body_io = @request_bodies[message.request_id]?\nreturn unless body_io\n\nbody_io.write(message.chunk) unless message.chunk.empty?\n\nif message.final\n  # Request complete - forward to local service\n  spawn { forward_request(message.request_id) }\nend\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#forward_request","level":3,"title":"<code>forward_request</code>","text":"<pre><code>private def forward_request(request_id : String)\n</code></pre> <p>Forward request to local service.</p> <p>Flow: <pre><code>start_msg = @pending_requests.delete(request_id)\nbody_io = @request_bodies.delete(request_id)\nstart_time = @request_start_times.delete(request_id) || Time.monotonic\n\nreturn unless start_msg &amp;&amp; body_io\n\n# Route the request\nmatch_result = @router.match(start_msg.path)\n\nif match = match_result\n  target_host = match.target.host\n  target_port = match.target.port\nelse\n  # No route matched\n  send_error_response(request_id, start_msg, 502, \"No route matched\")\n  return\nend\n\n# Forward to local service\nstatus_code, headers, response_body = @proxy.forward(\n  start_msg.method,\n  start_msg.path,\n  start_msg.headers,\n  body,\n  target_host,\n  target_port\n)\n\n# Send response back\nsend_response(request_id, status_code, headers, response_body)\n\n# Store in inspector if configured\nif store = @request_store\n  store.add(build_stored_request(...))\nend\n</code></pre></p> <p>Error Handling: - Local service unavailable → 502 - Timeout → 504 - Other errors → 500</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_websocket_upgrade","level":3,"title":"<code>handle_websocket_upgrade</code>","text":"<pre><code>private def handle_websocket_upgrade(message : Protocol::Messages::WebSocketUpgrade)\n</code></pre> <p>WebSocket upgrade request received.</p> <p>Flow: <pre><code>Log.debug { \"WebSocket upgrade request: #{message.path}\" }\n\n# Route the request\nmatch_result = @router.match(message.path)\n\nif match = match_result\n  target_host = match.target.host\n  target_port = match.target.port\nelse\n  # No route matched\n  send_message(WebSocketUpgradeError.new(\n    request_id: message.request_id,\n    status_code: 502,\n    message: \"No route matched path: #{message.path}\"\n  ))\n  return\nend\n\n# Create WebSocket proxy\nws_proxy = WebSocketProxy.new(message.request_id, target_host, target_port)\n\n# Set up frame forwarding\nws_proxy.on_frame do |opcode, payload|\n  send_message(WebSocketFrame.new(\n    request_id: message.request_id,\n    opcode: opcode,\n    payload: payload\n  ))\nend\n\nws_proxy.on_close do |code, reason|\n  send_message(WebSocketClose.new(\n    request_id: message.request_id,\n    code: code,\n    reason: reason\n  ))\n  @active_websockets.delete(message.request_id)\nend\n\n# Connect to local service\nresponse_headers = ws_proxy.connect(message.path, message.headers)\n\nif response_headers\n  # Success\n  @active_websockets[message.request_id] = ws_proxy\n  send_message(WebSocketUpgradeOk.new(\n    request_id: message.request_id,\n    headers: response_headers\n  ))\n  @on_websocket.try(&amp;.call(message.path, message.request_id))\nelse\n  # Connection failed\n  send_message(WebSocketUpgradeError.new(\n    request_id: message.request_id,\n    status_code: 502,\n    message: \"Failed to connect to local WebSocket service\"\n  ))\nend\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle_websocket_frame-handle_websocket_close","level":3,"title":"<code>handle_websocket_frame</code> / <code>handle_websocket_close</code>","text":"<pre><code>private def handle_websocket_frame(message : Protocol::Messages::WebSocketFrame)\n  if ws_proxy = @active_websockets[message.request_id]?\n    ws_proxy.send_frame(message.opcode, message.payload)\n  end\nend\n\nprivate def handle_websocket_close(message : Protocol::Messages::WebSocketClose)\n  if ws_proxy = @active_websockets.delete(message.request_id)\n    ws_proxy.close(message.code, message.reason)\n  end\nend\n</code></pre> <p>Frame forwarding for WebSocket connections.</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#auto-reconnection","level":2,"title":"Auto-Reconnection","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#reconnect-logic","level":3,"title":"Reconnect Logic","text":"<pre><code>private def handle_reconnect\n  return unless @running &amp;&amp; @auto_reconnect\n\n  @reconnect_attempts += 1\n\n  if @reconnect_attempts &gt; @max_reconnect_attempts\n    Log.error { \"Max reconnection attempts exceeded\" }\n    @on_error.try(&amp;.call(\"Max reconnection attempts exceeded\"))\n    @running = false\n    return\n  end\n\n  delay = @reconnect_delay * @reconnect_attempts  # Linear backoff\n  Log.info { \"Reconnecting in #{delay.total_seconds.to_i}s (attempt #{@reconnect_attempts}/#{@max_reconnect_attempts})\" }\n\n  sleep delay\n  connect if @running\nend\n</code></pre> <p>Exponential Backoff: - Attempt 1: 3 seconds - Attempt 2: 6 seconds - Attempt 3: 9 seconds - ... - Maximum: 10 attempts (30 seconds for last)</p> <p>Disable Conditions: - Authentication failed (bad credentials) - Subdomain conflict (won't resolve) - Explicit <code>stop()</code> call</p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#routing","level":2,"title":"Routing","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#route-configuration","level":3,"title":"Route Configuration","text":"<pre><code>routes = [\n  RouteConfig.new(path: \"/api/*\", host: \"api\", port: 8080),\n  RouteConfig.new(path: \"/socket\", host: nil, port: 3000),  # default host\n  RouteConfig.new(path: \"/admin/*\", host: \"admin\", port: 8000)\n]\n\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  routes: routes\n)\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#route-matching","level":3,"title":"Route Matching","text":"<pre><code>def match(path : String) : MatchResult?\n  @routes.each do |route|\n    if pattern_matches?(route.path, path)\n      host = route.host || @default_host\n      target = Target.new(host, route.port)\n      return MatchResult.new(target, route.path)\n    end\n  end\n\n  # Fallback\n  if port = @fallback_port\n    target = Target.new(@default_host, port)\n    return MatchResult.new(target, \"(fallback)\")\n  end\n\n  nil\nend\n</code></pre> <p>Examples: <pre><code>GET /api/users     -&gt; api:8080  (matches /api/*)\nGET /socket        -&gt; localhost:3000  (fallback)\nGET /admin/dashboard -&gt; admin:8000  (matches /admin/*)\nGET /other         -&gt; 502 No route matched\n</code></pre></p>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#basic-tunnel","level":3,"title":"Basic Tunnel","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000\n)\n\nclient.start\nsleep\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#custom-subdomain","level":3,"title":"Custom Subdomain","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  subdomain: \"myapp\"\n)\n\nclient.start\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#with-authentication","level":3,"title":"With Authentication","text":"<pre><code>client = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  api_key: \"key_...\"\n)\n\nclient.start\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#with-routing","level":3,"title":"With Routing","text":"<pre><code>routes = [\n  RouteConfig.new(\"/api/*\", \"api\", 8080),\n  RouteConfig.new(\"/socket\", nil, 4000),\n  RouteConfig.new(\"/admin/*\", \"admin\", 8000)\n]\n\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  routes: routes\n)\n\nclient.start\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#with-inspector","level":3,"title":"With Inspector","text":"<pre><code>store = RequestStore.new(max_size: 1000)\n\ninspector = Inspector.new(port: 4000, store: store)\nspawn { inspector.start }\n\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  request_store: store\n)\n\nclient.start\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#error-handling","level":2,"title":"Error Handling","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#connection-failed","level":3,"title":"Connection Failed","text":"<pre><code>rescue ex\n  Log.error { \"Connection failed: #{ex.message}\" }\n  @on_error.try(&amp;.call(\"Connection failed: #{ex.message}\"))\n  handle_reconnect\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#local-service-unavailable","level":3,"title":"Local Service Unavailable","text":"<pre><code>rescue ex : Socket::ConnectError\n  error_body = IO::Memory.new(\"Local service unavailable\")\n  {502, {\"Content-Type\" =&gt; [\"text/plain\"]}, error_body}\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#request-timeout","level":3,"title":"Request Timeout","text":"<pre><code>rescue ex : IO::TimeoutError\n  error_body = IO::Memory.new(\"Request to local service timed out\")\n  {504, {\"Content-Type\" =&gt; [\"text/plain\"]}, error_body}\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#performance","level":2,"title":"Performance","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each request spawns a fiber</li> <li>Multiple requests handled in parallel</li> <li>WebSocket frames forwarded directly</li> </ul>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#memory","level":3,"title":"Memory","text":"<ul> <li>Per pending request: ~10KB (headers + body buffer)</li> <li>Per WebSocket: ~10KB (frame buffer)</li> <li>Inspector storage: Configurable (default 1000 requests)</li> </ul>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#cpu","level":3,"title":"CPU","text":"<ul> <li>Message handling: ~10μs per message</li> <li>Request forwarding: ~100μs (excluding local service time)</li> </ul>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#always-set-callbacks","level":3,"title":"Always Set Callbacks","text":"<pre><code>client.on_connect do |url|\n  puts \"Connected: #{url}\"\nend\n\nclient.on_error do |error|\n  STDERR.puts \"Error: #{error}\"\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#handle-subdomain-conflicts","level":3,"title":"Handle Subdomain Conflicts","text":"<pre><code>client.on_error do |error|\n  if error.includes?(\"not available\")\n    puts \"Subdomain is taken. Try a different subdomain.\"\n    client.stop\n  end\nend\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#use-explicit-subdomains-in-production","level":3,"title":"Use Explicit Subdomains in Production","text":"<pre><code># Don't rely on random subdomains in production\nclient = TunnelClient.new(\n  server_url: \"wss://sellia.dev\",\n  local_port: 3000,\n  subdomain: \"myapp-prod\"  # Explicit\n)\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#set-reasonable-timeouts","level":3,"title":"Set Reasonable Timeouts","text":"<pre><code># In LocalProxy\nclient.connect_timeout = 5.seconds\nclient.read_timeout = 30.seconds\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#testing","level":2,"title":"Testing","text":"","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/cli-components/tunnel-client/#integration-test","level":3,"title":"Integration Test","text":"<pre><code># Start local service\nspawn do\n  HTTP::Server.new do |context|\n    context.response.print(\"Hello from local service\")\n  end.bind(\"127.0.0.1\", 3000).listen\nend\n\n# Start tunnel client\nclient = TunnelClient.new(\n  server_url: \"ws://localhost:8080\",\n  local_port: 3000\n)\n\nclient.start\n\n# Wait for connection\nsleep 1.second\n\n# Make request through tunnel\nresponse = HTTP::Client.get(\"http://localhost:8080/test\")\nputs response.body  # =&gt; \"Hello from local service\"\n</code></pre>","path":["Developer","Cli components","TunnelClient Class Documentation"],"tags":[]},{"location":"developer/contributing/","level":1,"title":"Contributing","text":"<p>How to contribute to Sellia.</p>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#overview","level":2,"title":"Overview","text":"<p>Thank you for your interest in contributing to Sellia! This document provides guidelines and instructions for contributing.</p>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#ways-to-contribute","level":2,"title":"Ways to Contribute","text":"","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#code-contributions","level":3,"title":"Code Contributions","text":"<ul> <li>Bug fixes - Fix reported issues</li> <li>New features - Add functionality (discuss first)</li> <li>Performance - Improve performance</li> <li>Tests - Increase test coverage</li> <li>Documentation - Improve documentation</li> </ul>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#non-code-contributions","level":3,"title":"Non-Code Contributions","text":"<ul> <li>Bug reports - Report issues with details</li> <li>Feature requests - Suggest improvements</li> <li>Documentation - Improve docs</li> <li>Code review - Review pull requests</li> </ul>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#getting-started","level":2,"title":"Getting Started","text":"","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#1-fork-and-clone","level":3,"title":"1. Fork and Clone","text":"<pre><code># Fork the repository on GitHub\n# Clone your fork\ngit clone https://github.com/your-username/sellia.git\ncd sellia\n\n# Add upstream remote\ngit remote add upstream https://github.com/watzon/sellia.git\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#2-set-up-development-environment","level":3,"title":"2. Set Up Development Environment","text":"<p>See Development for complete setup instructions.</p> <pre><code># Install dependencies\nshards install\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n\n# Build\nshards build\n\n# Run tests\ncrystal spec\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#3-create-branch","level":3,"title":"3. Create Branch","text":"<pre><code># Update from upstream\ngit fetch upstream\ngit checkout main\ngit merge upstream/main\n\n# Create feature branch\ngit checkout -b feature/amazing-feature\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#code-style","level":2,"title":"Code Style","text":"","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#crystal-code","level":3,"title":"Crystal Code","text":"<p>Follow Crystal style guide:</p> <ul> <li>Two-space indentation</li> <li>Snake_case for methods and variables</li> <li>CamelCase for classes and modules</li> <li>Meaningful names</li> <li>Comments for complex logic</li> </ul> <p>Example:</p> <pre><code># Good\nmodule Sellia::Server\n  class TunnelRegistry\n    def register(tunnel : Tunnel) : Nil\n      @mutex.synchronize do\n        @tunnels[tunnel.id] = tunnel\n        @by_subdomain[tunnel.subdomain] = tunnel\n\n        @by_client[tunnel.client_id] ||= [] of Tunnel\n        @by_client[tunnel.client_id] &lt;&lt; tunnel\n      end\n    end\n\n    def find_by_subdomain(subdomain : String) : Tunnel?\n      @mutex.synchronize { @by_subdomain[subdomain]? }\n    end\n  end\nend\n\n# Bad\nclass tunnelRegistry\n  def Register(s, t)\n    return false if @tunnels.has_key?(s)\n    @tunnels[s] = t\n  end\nend\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#typescriptreact-code","level":3,"title":"TypeScript/React Code","text":"<ul> <li>Use functional components with hooks</li> <li>TypeScript for all files</li> <li>Props interfaces</li> <li>Meaningful component names</li> </ul> <p>Example:</p> <pre><code>// Good\ninterface RequestListProps {\n  requests: Request[];\n  onSelect: (id: string) =&gt; void;\n}\n\nexport function RequestList({ requests, onSelect }: RequestListProps) {\n  return (\n    &lt;div className=\"request-list\"&gt;\n      {requests.map(req =&gt; (\n        &lt;RequestItem key={req.id} request={req} onClick={onSelect} /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n\n// Bad\nexport const RL = ({ r, o }) =&gt; (\n  &lt;div&gt;\n    {r.map(x =&gt; &lt;Item k={x.id} r={x} c={o} /&gt;)}\n  &lt;/div&gt;\n);\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#commit-messages","level":2,"title":"Commit Messages","text":"<p>Use conventional commits:</p>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#format","level":3,"title":"Format","text":"<pre><code>&lt;type&gt;: &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#types","level":3,"title":"Types","text":"<ul> <li><code>feat:</code> - New feature</li> <li><code>fix:</code> - Bug fix</li> <li><code>docs:</code> - Documentation changes</li> <li><code>style:</code> - Code style changes (formatting)</li> <li><code>refactor:</code> - Code refactoring</li> <li><code>test:</code> - Adding or updating tests</li> <li><code>chore:</code> - Maintenance tasks</li> <li><code>perf:</code> - Performance improvements</li> </ul>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#examples","level":3,"title":"Examples","text":"<pre><code># Good\nfeat: add custom subdomain support\nfix: prevent duplicate tunnel registrations\ndocs: update installation instructions\ntest: add tunnel registry tests\nrefactor: simplify message handling\n\n# Bad\nadded stuff\nfixed bug\nupdate\nchanges\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/#multi-line-commits","level":3,"title":"Multi-Line Commits","text":"<pre><code>feat(cli): add tunnel authentication\n\nAdd basic auth protection for tunnels.\n\n- Add --auth flag to http command\n- Require credentials for protected tunnels\n- Update documentation\n\nCloses #123\n</code></pre>","path":["Developer","Contributing"],"tags":[]},{"location":"developer/contributing/code-style/","level":1,"title":"Code Style","text":"<p>This document outlines the code style conventions for Sellia, covering both Crystal and TypeScript/React code.</p>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>General Principles</li> <li>Crystal Style Guide</li> <li>TypeScript/React Style Guide</li> <li>Documentation</li> <li>File Organization</li> </ul>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#general-principles","level":2,"title":"General Principles","text":"","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#self-documenting-code","level":3,"title":"Self-Documenting Code","text":"<p>Write code that explains itself:</p> <pre><code># Good: Clear intent\ndef find_available_tunnel(subdomain : String) : Tunnel?\n  @tunnels.find { |t| t.subdomain == subdomain &amp;&amp; t.available? }\nend\n\n# Bad: Unclear purpose\ndef get(sub) : Tunnel?\n  @t.find { |x| x.s == sub &amp;&amp; x.a }\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#single-responsibility","level":3,"title":"Single Responsibility","text":"<p>Each function, class, and module should have one clear purpose:</p> <pre><code># Good: Single responsibility\nclass TunnelRegistry\n  def register(tunnel : Tunnel)\n    # Only handles registration\n  end\nend\n\nclass TunnelValidator\n  def validate_subdomain(subdomain : String) : ValidationResult\n    # Only handles validation\n  end\nend\n\n# Bad: Multiple responsibilities\nclass TunnelHandler\n  def register_and_validate_and_notify(subdomain, client_id)\n    # Too many concerns\n  end\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#keep-functions-short","level":3,"title":"Keep Functions Short","text":"<p>Aim for functions that do one thing well:</p> <pre><code># Good: Focused\ndef register(tunnel : Tunnel) : Nil\n  @mutex.synchronize do\n    @tunnels[tunnel.id] = tunnel\n    @by_subdomain[tunnel.subdomain] = tunnel\n\n    @by_client[tunnel.client_id] ||= [] of Tunnel\n    @by_client[tunnel.client_id] &lt;&lt; tunnel\n  end\nend\n\n# Bad: Too long, doing too much\ndef register(tunnel : Tunnel) : Nil\n  # 100 lines of logic...\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#crystal-style-guide","level":2,"title":"Crystal Style Guide","text":"","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#follow-official-conventions","level":3,"title":"Follow Official Conventions","text":"<p>Sellia follows the official Crystal style guide.</p> <p>Key conventions:</p>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#indentation-and-formatting","level":3,"title":"Indentation and Formatting","text":"<p>Use 2 spaces for indentation (no tabs):</p> <pre><code>def process_request(request : HTTP::Request) : HTTP::Response\n  if request.path == \"/health\"\n    return health_response\n  end\n\n  # ... more code ...\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#naming-conventions","level":3,"title":"Naming Conventions","text":"<p>Classes and Modules: PascalCase</p> <pre><code>class TunnelRegistry\n  module Protocol\n    class Message\n    end\n  end\nend\n\n# Actual code structure\nmodule Sellia::Server\n  class TunnelRegistry\n    # ...\n  end\nend\n</code></pre> <p>Methods and Variables: snake_case</p> <pre><code>def register(tunnel : Tunnel) : Nil\n  tunnel_id = tunnel.id\n  # ...\nend\n\ndef find_by_subdomain(subdomain : String) : Tunnel?\n  @mutex.synchronize { @by_subdomain[subdomain]? }\nend\n</code></pre> <p>Constants: SCREAMING_SNAKE_CASE</p> <pre><code>MAX_TUNNELS = 1000\nDEFAULT_TIMEOUT = 30\n</code></pre> <p>Type Variables: PascalCase</p> <pre><code>class Registry(T)\n  def add(item : T)\n    # ...\n  end\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#type-annotations","level":3,"title":"Type Annotations","text":"<p>Public APIs: Always include type annotations</p> <pre><code># Good: Clear types\ndef register(tunnel : Tunnel) : Nil\n  # ...\nend\n\ndef find_by_id(id : String) : Tunnel?\n  # ...\nend\n\n# Bad: Unclear types\ndef register(tunnel)\n  # ...\nend\n</code></pre> <p>Private Methods: Can omit obvious types</p> <pre><code># Acceptable: Type is obvious\nprivate def generate_id : String\n  Random::Secure.hex(16)\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#method-definitions","level":3,"title":"Method Definitions","text":"<p>Use parentheses for method definitions with arguments:</p> <pre><code># Good\ndef register(tunnel : Tunnel) : Nil\nend\n\ndef find_by_subdomain(subdomain : String) : Tunnel?\nend\n\n# Good: No arguments, no parentheses\ndef size : Int32\n  @mutex.synchronize { @tunnels.size }\nend\n</code></pre> <p>Method chaining: Use block syntax for multi-line chains:</p> <pre><code># Good: Block syntax\nresult = tunnels\n  .select { |t| t.active? }\n  .map { |t| t.subdomain }\n  .first?\n\n# Avoid: Single-line chains that are too long\nresult = tunnels.select { |t| t.active? }.map { |t| t.subdomain }.first?\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#conditional-expressions","level":3,"title":"Conditional Expressions","text":"<p>Use <code>if</code> as an expression when it returns a value:</p> <pre><code># Good\nstatus = if tunnel.active?\n  \"active\"\nelse\n  \"inactive\"\nend\n\n# Also good for simple cases\nstatus = tunnel.active? ? \"active\" : \"inactive\"\n\n# Bad: Unnecessary ternary\nresult = some_condition ? true : false\n# Use: result = some_condition\n</code></pre> <p>Guard clauses are preferred over deep nesting:</p> <pre><code># Good: Guard clause\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # Length check (DNS label: 1-63 chars, we require 3+ for usability)\n  return ValidationResult.new(false, \"Subdomain must be at least 3 characters\") if subdomain.size &lt; 3\n\n  # Character validation\n  return ValidationResult.new(false, \"Subdomain can only contain lowercase letters, numbers, and hyphens\") unless subdomain.matches?(/\\A[a-z0-9][a-z0-9-]*[a-z0-9]\\z/i)\n\n  # Main validation logic\n  ValidationResult.new(true)\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#string-interpolation","level":3,"title":"String Interpolation","text":"<p>Use double quotes and interpolation:</p> <pre><code># Good\nmessage = \"Tunnel #{subdomain} registered for client #{client_id}\"\n\n# Good with method calls\nLog.info { \"Tunnel ready: #{message.url}\" }\n</code></pre> <p>Use single quotes for literal strings:</p> <pre><code># Good\nprotocol = \"MessagePack\"\nversion = '1.0'\n\n# Bad\nprotocol = \"MessagePack\"\nversion = \"1.0\"\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#exception-handling","level":3,"title":"Exception Handling","text":"<p>Specific exceptions: Use specific exception types</p> <pre><code># Good\nbegin\n  register_tunnel(subdomain, client_id)\nrescue ex : TunnelExistsError\n  handle_duplicate(ex)\nrescue ex : ValidationError\n  handle_invalid(ex)\nend\n\n# Acceptable: Generic exception when specific type doesn't matter\nbegin\n  risky_operation\nrescue ex : Exception\n  log_error(ex)\n  raise\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#comments","level":3,"title":"Comments","text":"<p>When to add comments:</p> <pre><code># Good: Explaining why\n# We use a custom hash function here because the built-in\n# hash doesn't handle Unicode subdomains correctly\ndef hash_subdomain(subdomain : String) : UInt64\n  custom_hash(subdomain)\nend\n\n# Good: Documenting public APIs\n# Validate subdomain according to DNS label rules and security constraints\n#\n# Parameters:\n#   `subdomain`: The subdomain to validate\n#\n# Returns: A ValidationResult indicating success or containing an error message\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # ...\nend\n\n# Bad: Stating the obvious\n# Increment the counter\ncounter += 1\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#structs-vs-classes","level":3,"title":"Structs vs Classes","text":"<p>Use Struct for data objects:</p> <pre><code># Good: Struct for immutable data\nstruct Tunnel\n  property id : String\n  property subdomain : String\n  property client_id : String\n  property created_at : Time\n  property auth : String?\n\n  def initialize(@id : String, @subdomain : String, @client_id : String, @auth : String? = nil)\n    @created_at = Time.utc\n  end\nend\n\n# Good: Struct for validation result\nstruct ValidationResult\n  property valid : Bool\n  property error : String?\n\n  def initialize(@valid : Bool, @error : String? = nil)\n  end\nend\n\n# Use Class for objects with identity/lifecycle\nclass TunnelRegistry\n  # ... manages tunnel lifecycle\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#typescriptreact-style-guide","level":2,"title":"TypeScript/React Style Guide","text":"","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#functional-components-with-hooks","level":3,"title":"Functional Components with Hooks","text":"<p>Prefer functional components over class components:</p> <pre><code>// Good: Functional component with hooks\ninterface TunnelProps {\n  subdomain: string;\n  status: string;\n}\n\nexport const TunnelCard: React.FC&lt;TunnelProps&gt; = ({ subdomain, status }) =&gt; {\n  const [isActive, setIsActive] = useState(false);\n\n  useEffect(() =&gt; {\n    setIsActive(status === 'active');\n  }, [status]);\n\n  return (\n    &lt;div className={`tunnel-card ${isActive ? 'active' : ''}`}&gt;\n      &lt;h3&gt;{subdomain}&lt;/h3&gt;\n      &lt;p&gt;{status}&lt;/p&gt;\n    &lt;/div&gt;\n  );\n};\n\n// Avoid: Class components\nclass TunnelCard extends React.Component&lt;TunnelProps, TunnelState&gt; {\n  // ...\n}\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#typescript-strict-mode","level":3,"title":"TypeScript Strict Mode","text":"<p>Use TypeScript strict mode:</p> <pre><code>// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"strictNullChecks\": true\n  }\n}\n\n// Good: Explicit types\ninterface Tunnel {\n  subdomain: string;\n  client_id: string;\n  created_at: Date;\n}\n\n// Bad: Implicit any\nfunction processTunnel(tunnel: any) {\n  // ...\n}\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#component-structure","level":3,"title":"Component Structure","text":"<p>Follow this order:</p> <ol> <li>Imports</li> <li>Type definitions</li> <li>Component declaration</li> <li>Hooks</li> <li>Event handlers</li> <li>Helper functions</li> <li>Render</li> </ol> <pre><code>// 1. Imports\nimport { useState, useEffect } from 'react';\nimport { Tunnel } from '../types';\n\n// 2. Types\ninterface TunnelListProps {\n  tunnels: Tunnel[];\n  onSelect: (tunnel: Tunnel) =&gt; void;\n}\n\n// 3. Component\nexport const TunnelList: React.FC&lt;TunnelListProps&gt; = ({ tunnels, onSelect }) =&gt; {\n  // 4. Hooks\n  const [filter, setFilter] = useState('');\n\n  // 5. Event handlers\n  const handleSelect = (tunnel: Tunnel) =&gt; {\n    onSelect(tunnel);\n  };\n\n  // 6. Helper functions\n  const filteredTunnels = tunnels.filter(t =&gt;\n    t.subdomain.includes(filter)\n  );\n\n  // 7. Render\n  return (\n    &lt;div className=\"tunnel-list\"&gt;\n      {filteredTunnels.map(tunnel =&gt; (\n        &lt;TunnelCard\n          key={tunnel.subdomain}\n          tunnel={tunnel}\n          onSelect={handleSelect}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n};\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#naming-conventions_1","level":3,"title":"Naming Conventions","text":"<p>Components: PascalCase</p> <pre><code>// Good\nexport const TunnelCard: React.FC&lt;TunnelCardProps&gt; = ({ ... }) =&gt; {\n  // ...\n};\n\n// Bad\nexport const tunnelCard = ({ ... }) =&gt; {\n  // ...\n};\n</code></pre> <p>Props interfaces: PascalCase + \"Props\" suffix</p> <pre><code>// Good\ninterface TunnelCardProps {\n  subdomain: string;\n}\n\n// Bad\ninterface tunnelCard {\n  subdomain: string;\n}\n</code></pre> <p>Event handlers: \"handle\" prefix</p> <pre><code>// Good\nconst handleClick = () =&gt; { };\nconst handleSubmit = () =&gt; { };\nconst handleTunnelSelect = (tunnel: Tunnel) =&gt; { };\n\n// Bad\nconst click = () =&gt; { };\nconst submit = () =&gt; { };\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#hooks","level":3,"title":"Hooks","text":"<p>Custom hooks: \"use\" prefix</p> <pre><code>// Good: Custom hook\nexport const useTunnels = () =&gt; {\n  const [tunnels, setTunnels] = useState&lt;Tunnel[]&gt;([]);\n\n  useEffect(() =&gt; {\n    fetchTunnels().then(setTunnels);\n  }, []);\n\n  return tunnels;\n};\n\n// Usage\nconst tunnels = useTunnels();\n</code></pre> <p>Hook rules: - Only call hooks at the top level - Don't call hooks inside loops, conditions, or nested functions - Custom hooks should start with \"use\"</p>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#error-handling","level":3,"title":"Error Handling","text":"<p>Use error boundaries for React errors:</p> <pre><code>class ErrorBoundary extends React.Component&lt;\n  { children: React.ReactNode },\n  { hasError: boolean }\n&gt; {\n  constructor(props: { children: React.ReactNode }) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return &lt;div&gt;Something went wrong&lt;/div&gt;;\n    }\n    return this.props.children;\n  }\n}\n</code></pre> <p>Handle async errors properly:</p> <pre><code>// Good: Handle async errors\nuseEffect(() =&gt; {\n  const fetchTunnels = async () =&gt; {\n    try {\n      const data = await api.getTunnels();\n      setTunnels(data);\n    } catch (error) {\n      console.error('Failed to fetch tunnels:', error);\n      setError(error.message);\n    }\n  };\n\n  fetchTunnels();\n}, []);\n\n// Bad: Ignore errors\nuseEffect(() =&gt; {\n  api.getTunnels().then(setTunnels);\n}, []);\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#documentation","level":2,"title":"Documentation","text":"","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#crystal-documentation","level":3,"title":"Crystal Documentation","text":"<p>Public APIs must be documented:</p> <pre><code># Validate subdomain according to DNS label rules and security constraints\n#\n# Performs validation including:\n# - Length checks (3-63 characters)\n# - Character validation (alphanumeric and hyphens only)\n# - Reserved subdomain checks\n# - Availability checks\n#\n# Parameters:\n#   `subdomain`: The subdomain to validate\n#\n# Returns: A ValidationResult indicating success or containing an error message\n#\n# Example:\n# ```\n# result = registry.validate_subdomain(\"myapp\")\n# result.valid? # =&gt; true\n#\n# result = registry.validate_subdomain(\"ab\")\n# result.error # =&gt; \"Subdomain must be at least 3 characters\"\n# ```\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # ...\nend\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#typescript-documentation","level":3,"title":"TypeScript Documentation","text":"<p>Use JSDoc comments:</p> <pre><code>/**\n * Handles incoming WebSocket messages from the server\n *\n * @param event - Message event containing JSON data\n * @returns void\n *\n * @example\n * ```typescript\n * ws.onmessage = (event) =&gt; {\n *   const data = JSON.parse(event.data);\n *   if (data.type === 'request') {\n *     setRequests(prev =&gt; [data.request, ...prev]);\n *   }\n * };\n * ```\n */\nws.onmessage = (event: MessageEvent) =&gt; {\n  const data = JSON.parse(event.data);\n  if (data.type === 'request') {\n    setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000));\n  }\n}\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#file-organization","level":2,"title":"File Organization","text":"","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#crystal-files","level":3,"title":"Crystal Files","text":"<p>One public class per file:</p> <pre><code>src/server/\n├── tunnel_registry.cr   # TunnelRegistry class\n├── ws_gateway.cr        # WSGateway class\n├── http_ingress.cr      # HTTPIngress class\n├── connection_manager.cr # ConnectionManager class\n└── storage/\n    ├── database.cr      # Database class\n    └── repositories.cr  # Repository classes\n</code></pre> <p>File name matches class name: - <code>tunnel_registry.cr</code> contains <code>class TunnelRegistry</code> - <code>ws_gateway.cr</code> contains <code>class WSGateway</code> - Files are organized by module under <code>src/server/</code>, <code>src/cli/</code>, and <code>src/core/</code></p>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#typescript-files","level":3,"title":"TypeScript Files","text":"<p>One component per file:</p> <pre><code>web/src/\n├── App.tsx                 # Main App component\n├── main.tsx                # Entry point\n└── components/\n    ├── RequestList.tsx     # RequestList component (if extracted)\n    └── [More components as the UI grows]\n</code></pre> <p>Current structure (single-file components): The inspector UI currently uses a simple single-file structure with the main component in <code>App.tsx</code>. As the UI grows, consider extracting components:</p> <pre><code>web/src/\n├── App.tsx                 # Main app component\n├── components/\n│   ├── RequestList.tsx\n│   ├── RequestDetail.tsx\n│   └── StatusIndicator.tsx\n└── types.ts                # Shared types\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#formatting-tools","level":2,"title":"Formatting Tools","text":"","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#crystal-formatter","level":3,"title":"Crystal Formatter","text":"<p>Format all Crystal code:</p> <pre><code># Format all files\ncrystal tool format ./src\n\n# Check formatting (CI will do this)\ncrystal tool format --check ./src\n\n# Format specific file\ncrystal tool format ./src/server/tunnel_registry.cr\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#typescriptreact-formatter","level":3,"title":"TypeScript/React Formatter","text":"<p>Use ESLint and Prettier:</p> <pre><code># Format all files\ncd web\nnpm run format\n\n# Check formatting\nnpm run format:check\n\n# Format specific file\nnpm run format -- src/components/TunnelCard.tsx\n</code></pre>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#code-review-checklist","level":2,"title":"Code Review Checklist","text":"<p>Before submitting code, review:</p> <ul> <li> Code follows style guide</li> <li> Code is formatted (<code>crystal tool format --check</code>)</li> <li> Public APIs have documentation</li> <li> Tests are included and passing</li> <li> Complex logic has comments explaining \"why\"</li> <li> No commented-out code</li> <li> No console.log statements left in production code</li> <li> Error handling is appropriate</li> <li> No unnecessary complexity</li> </ul>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#additional-resources","level":2,"title":"Additional Resources","text":"<ul> <li>Crystal Style Guide</li> <li>TypeScript Handbook</li> <li>React Documentation</li> <li>Airbnb JavaScript Style Guide</li> </ul>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/code-style/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Commit Messages - Write better commit messages</li> <li>Testing - Test your code</li> <li>Workflow - Understand the contribution process</li> </ul>","path":["Developer","Contributing","Code Style"],"tags":[]},{"location":"developer/contributing/commit-messages/","level":1,"title":"Commit Messages","text":"<p>This document outlines the commit message conventions used in Sellia, based on Conventional Commits.</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Format</li> <li>Types</li> <li>Scopes</li> <li>Examples</li> <li>Best Practices</li> <li>Reverting Commits</li> </ul>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#overview","level":2,"title":"Overview","text":"<p>Sellia uses Conventional Commits to provide: - Structured commit history - Automated changelog generation - Easier code review - Clear intent of changes</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#why-conventional-commits","level":3,"title":"Why Conventional Commits?","text":"<ul> <li>Automated Versioning: Commit types determine version bumps (major/minor/patch)</li> <li>Changelog Generation: Automatic changelog from commit history</li> <li>Code Review: Easier to understand changes at a glance</li> <li>Git Hooks: Can enforce commit message format</li> </ul>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#format","level":2,"title":"Format","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#basic-structure","level":3,"title":"Basic Structure","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#example","level":3,"title":"Example","text":"<pre><code>feat(cli): add custom timeout flag for connections\n\nAdd a new --timeout flag that allows users to specify a custom\nconnection timeout in seconds. The default timeout remains 30 seconds.\n\nCloses #123\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#components-explained","level":3,"title":"Components Explained","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#type-required","level":4,"title":"Type (Required)","text":"<p>The type of change. See Types below.</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#scope-optional","level":4,"title":"Scope (Optional)","text":"<p>The component/module affected. See Scopes below.</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#description-required","level":4,"title":"Description (Required)","text":"<p>A brief summary of the change: - Use imperative mood (\"add\" not \"added\" or \"adds\") - Lowercase first letter - No period at the end - Max 72 characters</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#body-optional","level":4,"title":"Body (Optional)","text":"<p>Additional context: - What was changed and why - Motivation for the change - Contrasts with previous behavior - Wrap at 72 characters per line</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#footer-optional","level":4,"title":"Footer (Optional)","text":"<p>Metadata: - Breaking changes: \"BREAKING CHANGE: description\" - Closes issues: \"Closes #123\" - References issues: \"Refs #456\"</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#types","level":2,"title":"Types","text":"Type Description Version Bump <code>feat</code> New feature Minor <code>fix</code> Bug fix Patch <code>docs</code> Documentation only Patch <code>style</code> Code style (formatting, etc.) Patch <code>refactor</code> Code change that neither fixes a bug nor adds a feature Patch <code>perf</code> Performance improvement Patch <code>test</code> Adding or updating tests Patch <code>chore</code> Maintenance tasks Patch <code>ci</code> CI/CD changes Patch <code>build</code> Build system changes Patch <code>revert</code> Revert a previous commit Patch","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#when-to-use-each-type","level":3,"title":"When to Use Each Type","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#feat-new-feature","level":4,"title":"<code>feat</code>: New Feature","text":"<p>New user-facing functionality:</p> <pre><code>feat(cli): add --timeout flag for connection timeout\nfeat(server): implement custom domain support\nfeat(web): add request replay functionality\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#fix-bug-fix","level":4,"title":"<code>fix</code>: Bug Fix","text":"<p>Fixes for bugs or unexpected behavior:</p> <pre><code>fix(server): handle WebSocket close during request processing\nfix(cli): prevent memory leak in tunnel client\nfix(web): correct timestamp display in inspector\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#docs-documentation-only","level":4,"title":"<code>docs</code>: Documentation Only","text":"<p>Changes to documentation only:</p> <pre><code>docs: update installation instructions for macOS\ndocs(api): add protocol message examples\ndocs: clarify usage of --auth flag\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#style-code-style","level":4,"title":"<code>style</code>: Code Style","text":"<p>Code style changes (formatting, missing semicolons, etc.):</p> <pre><code>style: format Crystal code with crystal tool format\nstyle(web): fix indentation in RequestInspector component\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#refactor-code-refactoring","level":4,"title":"<code>refactor</code>: Code Refactoring","text":"<p>Code changes that neither fix bugs nor add features:</p> <pre><code>refactor(server): simplify tunnel registry logic\nrefactor(cli): extract validation into separate module\nrefactor(core): consolidate protocol message types\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#perf-performance-improvement","level":4,"title":"<code>perf</code>: Performance Improvement","text":"<p>Performance improvements:</p> <pre><code>perf(server): optimize message serialization\nperf(cli): reduce memory allocations in tunnel client\nperf(web): improve rendering performance for large request lists\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#test-tests","level":4,"title":"<code>test</code>: Tests","text":"<p>Adding or updating tests:</p> <pre><code>test(server): add tunnel registry duplicate detection tests\ntest(ws): add WebSocket reconnection tests\ntest(core): increase test coverage for protocol messages\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#chore-maintenance","level":4,"title":"<code>chore</code>: Maintenance","text":"<p>Maintenance tasks, dependency updates, etc.:</p> <pre><code>chore: upgrade Crystal to 1.10.0\nchore: update dependencies to latest versions\nchore: remove watchtower and add HTTP-to-HTTPS redirect\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#ci-cicd","level":4,"title":"<code>ci</code>: CI/CD","text":"<p>Changes to CI configuration:</p> <pre><code>ci: add automated testing workflow\nci: upgrade GitHub Actions to latest versions\nci: fix broken build configuration\nci: require approval environment for PR CI\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#build-build-system","level":4,"title":"<code>build</code>: Build System","text":"<p>Changes to build system or dependencies:</p> <pre><code>build: add SQLite development dependency\nbuild: update shard.lock for latest dependencies\nbuild: add Vite configuration for inspector UI\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#scopes","level":2,"title":"Scopes","text":"<p>Scopes indicate which component/module is affected.</p>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#defined-scopes","level":3,"title":"Defined Scopes","text":"Scope Description <code>server</code> Tunnel server components <code>cli</code> CLI client components <code>core</code> Shared protocol/types <code>web</code> Inspector UI <code>ws</code> WebSocket protocol/handling <code>db</code> Database/storage layer <code>protocol</code> Protocol message handling <code>registry</code> Tunnel registry <code>gateway</code> WebSocket gateway <code>ingress</code> HTTP ingress handler <code>client</code> Tunnel client logic <code>inspector</code> Request inspector <code>caddy</code> Caddy integration","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#scope-examples","level":3,"title":"Scope Examples","text":"<pre><code>feat(server): add custom domain validation\nfeat(cli): implement auto-reconnect with backoff\nfeat(core): add WebSocket frame serialization\nfeat(web): add request/response filters\nfix(ws): handle malformed WebSocket frames\nfix(server): prevent race condition in tunnel registration\nfeat(cli): display route table on tunnel connect\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#examples","level":2,"title":"Examples","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#simple-commit-no-body","level":3,"title":"Simple Commit (No Body)","text":"<pre><code>feat(cli): add --timeout flag for connection timeout\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#commit-with-body","level":3,"title":"Commit with Body","text":"<pre><code>feat(server): implement reserved subdomain persistence\n\nReserved subdomains are now persisted to SQLite and survive\nserver restarts. This prevents race conditions where clients\ncould claim previously reserved subdomains.\n\nThe implementation adds a new Storage module that handles all\ndatabase operations, keeping the registry logic clean.\n\nCloses #78\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#bug-fix","level":3,"title":"Bug Fix","text":"<pre><code>fix(server): handle WebSocket disconnection gracefully\n\nPreviously, when a WebSocket connection closed unexpectedly,\npending requests would hang indefinitely. Now, all pending\nrequests are cleaned up and return 502 Bad Gateway.\n\nFixes #102\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#breaking-change","level":3,"title":"Breaking Change","text":"<pre><code>feat(server): change tunnel registration API format\n\nThe tunnel registration message format has changed to include\nadditional metadata. Old clients will not be compatible with\nnew servers.\n\nBREAKING CHANGE: Tunnel registration now requires `metadata` field\nin RegisterTunnel message. Clients must be updated to include this\nfield.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#documentation","level":3,"title":"Documentation","text":"<pre><code>docs: clarify usage of --auth flag\n\nThe --auth flag now includes better examples and explains\nthe difference between tunnel authentication and API key\nauthentication.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#refactoring","level":3,"title":"Refactoring","text":"<pre><code>refactor(server): extract tunnel registry into separate module\n\nThe tunnel registry logic has been extracted from the main\nserver class into a dedicated TunnelRegistry module. This improves\ntestability and makes the code easier to understand.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#performance","level":3,"title":"Performance","text":"<pre><code>perf(server): optimize MessagePack serialization for protocol messages\n\nMessagePack serialization is now 2x faster by reusing buffers and\nreducing allocations. This is especially noticeable under high load\nwith many concurrent tunnels.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#testing","level":3,"title":"Testing","text":"<pre><code>test(core): add comprehensive protocol message serialization tests\n\nAdded tests for all protocol message types, including edge cases\nlike empty strings, large payloads, and malformed data.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#chores","level":3,"title":"Chores","text":"<pre><code>chore: upgrade to Crystal 1.10.0\n\nThis upgrade includes bug fixes and performance improvements.\nAll tests pass with the new version.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#1-use-imperative-mood","level":3,"title":"1. Use Imperative Mood","text":"<pre><code># Good\nfeat(cli): add timeout flag\n\n# Bad\nfeat(cli): added timeout flag\nfeat(cli): adding timeout flag\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#2-keep-description-short","level":3,"title":"2. Keep Description Short","text":"<pre><code># Good\nfix(server): handle WebSocket close during request\n\n# Bad\nfix(server): handle the case where WebSocket connection closes\nduring an active HTTP request\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#3-explain-what-and-why-in-body","level":3,"title":"3. Explain What and Why in Body","text":"<pre><code># Good\nfeat(server): add rate limiting for tunnel registration\n\nTo prevent abuse, tunnel registration is now rate-limited to\n10 registrations per minute per IP address. This prevents\na single client from exhausting available subdomains.\n\n# Bad\nfeat(server): add rate limiting\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#4-reference-issues","level":3,"title":"4. Reference Issues","text":"<pre><code># Good\nfeat(cli): add custom timeout flag\n\nCloses #123\nRefs #456\n\n# Bad\nfeat(cli): add custom timeout flag\n# See issue 123\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#5-one-commit-per-logical-change","level":3,"title":"5. One Commit Per Logical Change","text":"<pre><code># Good: Separate commits\nfeat(cli): add timeout flag\ntest(cli): add timeout flag tests\ndocs: document timeout flag usage\n\n# Bad: All in one commit\nfeat(cli): add timeout flag, tests, and documentation\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#6-make-commits-atomic","level":3,"title":"6. Make Commits Atomic","text":"<p>Each commit should be a self-contained unit that can be reverted if needed:</p> <pre><code># Good: Atomic commit\nfeat(server): add tunnel registration rate limiting\n\n# Bad: Non-atomic (changes multiple things)\nfeat(server): add rate limiting and fix formatting bug\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#7-limit-line-length","level":3,"title":"7. Limit Line Length","text":"<pre><code># Good: Lines wrapped at 72 characters\nfeat(server): add rate limiting for tunnel registration\n\nTo prevent abuse, tunnel registration is now rate-limited to\n10 registrations per minute per IP address. This prevents\na single client from exhausting available subdomains.\n\n# Bad: Long lines\nfeat(server): add rate limiting for tunnel registration\n\nTo prevent abuse, tunnel registration is now rate-limited to 10 registrations per minute per IP address. This prevents a single client from exhausting available subdomains.\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#reverting-commits","level":2,"title":"Reverting Commits","text":"<p>Use the <code>revert</code> type to revert previous commits:</p> <pre><code>revert: feat(cli): add custom timeout flag\n\nThis reverts commit abc123 which introduced the timeout flag\ndue to compatibility issues with older servers.\n\nRefs #150\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#commit-message-template","level":2,"title":"Commit Message Template","text":"<p>Use this template for writing commit messages:</p> <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#example-template-filled-out","level":3,"title":"Example Template Filled Out","text":"<pre><code>feat(cli): add custom timeout flag for connections\n\nAdd a new --timeout flag that allows users to specify a custom\nconnection timeout in seconds. The default timeout remains 30 seconds.\n\nThe timeout applies to:\n- Initial connection to the server\n- WebSocket handshake\n- Tunnel registration\n\nCloses #123\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#tools-and-automation","level":2,"title":"Tools and Automation","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#commit-linting","level":3,"title":"Commit Linting","text":"<p>The project may use commitlint to enforce commit message format:</p> <pre><code># .commitlintrc.json\n{\n  \"extends\": [\n    \"@commitlint/config-conventional\"\n  ],\n  \"rules\": {\n    \"type-enum\": [2, \"always\", [\"feat\", \"fix\", \"docs\", \"style\", \"refactor\", \"perf\", \"test\", \"chore\", \"ci\", \"build\", \"revert\"]],\n    \"scope-enum\": [2, \"always\", [\"server\", \"cli\", \"core\", \"web\", \"db\", \"protocol\"]]\n  }\n}\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#commit-message-hooks","level":3,"title":"Commit Message Hooks","text":"<p>Install git hooks to validate commit messages:</p> <pre><code>#!/bin/bash\n# .git/hooks/commit-msg\n\ncommit_regex='^(feat|fix|docs|style|refactor|perf|test|chore|ci|build|revert)(\\(.+\\))?: .{1,72}$'\n\nif ! grep -qE \"$commit_regex\" \"$1\"; then\n  echo \"Invalid commit message format. Please use conventional commits.\"\n  echo \"Example: feat(cli): add timeout flag\"\n  exit 1\nfi\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#common-mistakes","level":2,"title":"Common Mistakes","text":"","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#mistake-1-too-general","level":3,"title":"Mistake 1: Too General","text":"<pre><code># Bad\nfix: fix bug\n\n# Good\nfix(server): handle WebSocket close during request\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#mistake-2-missing-context","level":3,"title":"Mistake 2: Missing Context","text":"<pre><code># Bad\nfeat: add flag\n\n# Good\nfeat(cli): add --timeout flag for connection timeout\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#mistake-3-mixing-types","level":3,"title":"Mistake 3: Mixing Types","text":"<pre><code># Bad\nfeat/fix: add flag and fix bug\n\n# Good (split into two commits)\nfeat(cli): add --timeout flag\nfix(cli): handle timeout error correctly\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#mistake-4-not-following-format","level":3,"title":"Mistake 4: Not Following Format","text":"<pre><code># Bad\nAdded timeout flag to CLI\n\n# Good\nfeat(cli): add --timeout flag for connection timeout\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#changelog-generation","level":2,"title":"Changelog Generation","text":"<p>Conventional commits enable automatic changelog generation using tools like conventional-changelog:</p> <pre><code># Generate changelog\nnpx conventional-changelog -p angular -i CHANGELOG.md -s\n\n# Output:\n## Features\n* **cli:** add --timeout flag for connection timeout (abc123)\n\n## Bug Fixes\n* **server:** handle WebSocket close during request (def456)\n</code></pre>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#further-reading","level":2,"title":"Further Reading","text":"<ul> <li>Conventional Commits Specification</li> <li>Conventional Changelog</li> <li>Commitlint</li> <li>How to Write a Git Commit Message</li> </ul>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/commit-messages/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Code Style - Write clean code</li> <li>Workflow - Submit your changes</li> <li>Testing - Test your changes</li> </ul>","path":["Developer","Contributing","Commit Messages"],"tags":[]},{"location":"developer/contributing/reporting-bugs/","level":1,"title":"Reporting Bugs","text":"<p>This guide explains how to report bugs effectively to help us fix them quickly.</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Before Reporting</li> <li>How to Report</li> <li>Bug Report Template</li> <li>What to Include</li> <li>After Reporting</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#before-reporting","level":2,"title":"Before Reporting","text":"","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#check-for-existing-issues","level":3,"title":"Check for Existing Issues","text":"<p>Search existing issues to avoid duplicates:</p> <ol> <li>Use the search bar at the top of the Issues page</li> <li>Try different keywords related to your problem</li> <li>Check both open and closed issues</li> </ol> <p>Search terms to try: - Error message text - Component name (e.g., \"WebSocket\", \"tunnel\", \"inspector\") - Action you were performing (e.g., \"connecting\", \"registering\")</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#verify-youre-using-the-latest-version","level":3,"title":"Verify You're Using the Latest Version","text":"<p>Bugs may already be fixed in newer versions:</p> <pre><code># Check your version\n./bin/sellia version\n\n# Or\n./bin/sellia-server --help\n</code></pre> <p>If you're not using the latest version:</p> <pre><code># Update your installation\ngit pull origin main\nshards build --release\n\n# Verify version\n./bin/sellia version\n</code></pre>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#try-to-reproduce-the-issue","level":3,"title":"Try to Reproduce the Issue","text":"<p>Before reporting, try to reproduce the bug consistently:</p> <ol> <li>Write down the exact steps you took</li> <li>Note when the bug occurs (every time? sometimes?)</li> <li>Try on a fresh installation</li> <li>Try with minimal configuration</li> </ol>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#check-for-common-issues","level":3,"title":"Check for Common Issues","text":"<p>Review common issues and solutions to see if your problem is already documented.</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#how-to-report","level":2,"title":"How to Report","text":"","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#create-a-github-issue","level":3,"title":"Create a GitHub Issue","text":"<ol> <li>Go to github.com/watzon/sellia/issues</li> <li>Click \"New Issue\"</li> <li>Choose \"Bug Report\" template (if available)</li> <li>Fill in the required information</li> <li>Submit the issue</li> </ol>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#use-a-clear-title","level":3,"title":"Use a Clear Title","text":"<p>A good title helps us understand the problem immediately:</p> <p>Good titles: - \"WebSocket connection fails after 30 seconds on macOS\" - \"Tunnel registration throws 'subdomain exists' error for unique subdomain\" - \"Inspector UI shows corrupted response body for binary data\"</p> <p>Poor titles: - \"Bug\" - \"Help me\" - \"Not working\" - \"Sellia is broken\"</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#bug-report-template","level":2,"title":"Bug Report Template","text":"<p>Use this template when reporting bugs:</p> <p><pre><code>### Description\n\nA clear and concise description of what the bug is.\n\n### Reproduction Steps\n\n1. Go to '...'\n2. Click on '....'\n3. Scroll down to '....'\n4. See error\n\n**Expected Behavior:**\n\nA clear description of what you expected to happen.\n\n**Actual Behavior:**\n\nA clear description of what actually happened.\n\n### Environment\n\n- **OS:** [e.g., macOS 14.0, Ubuntu 22.04]\n- **Crystal Version:** [e.g., 1.10.0]\n- **Node.js Version:** [e.g., 18.17.0]\n- **Sellia Version:** [e.g., 0.1.0]\n- **Browser (if applicable):** [e.g., Chrome 118, Safari 17]\n\n### Logs/Error Messages\n</code></pre> Paste error messages or logs here <pre><code>### Screenshots\n\nIf applicable, add screenshots to help explain your problem.\n\n### Additional Context\n\nAdd any other context about the problem here.\n\n- Configuration files (redact sensitive data)\n- Network setup\n- Proxy/firewall configuration\n- Related issues or PRs\n</code></pre></p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#what-to-include","level":2,"title":"What to Include","text":"","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#1-clear-description","level":3,"title":"1. Clear Description","text":"<p>Explain the bug in plain language:</p> <pre><code>### Description\n\nWhen creating a tunnel with a custom subdomain using the --subdomain flag,\nthe tunnel is created but requests to the tunnel URL return 404 Not Found.\nThis happens every time, regardless of the subdomain used.\n</code></pre>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#2-reproduction-steps","level":3,"title":"2. Reproduction Steps","text":"<p>Provide detailed, numbered steps to reproduce:</p> <pre><code>### Reproduction Steps\n\n1. Start the server:\n   `./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io`\n\n2. Start a simple HTTP server on port 8080:\n   `python3 -m http.server 8080`\n\n3. Create a tunnel with custom subdomain:\n   `./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain myapp`\n\n4. Try to access the tunnel:\n   `curl http://myapp.127.0.0.1.nip.io:3000`\n\n5. Observe 404 error instead of expected response\n</code></pre>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#3-expected-vs-actual-behavior","level":3,"title":"3. Expected vs Actual Behavior","text":"<p>Clearly state what should happen vs. what does happen:</p> <pre><code>**Expected Behavior:**\n\nThe curl request should return the directory listing from the Python HTTP\nserver running on port 8080.\n\n**Actual Behavior:**\n\nThe request returns \"404 Not Found\" with no response body.\n</code></pre>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#4-environment-details","level":3,"title":"4. Environment Details","text":"<p>Include your system information:</p> <pre><code>### Environment\n\n- **OS:** macOS 14.0 (Sonoma)\n- **Crystal Version:** 1.10.1\n- **Node.js Version:** 18.17.0\n- **Sellia Version:** 0.1.2 (built from source at commit abc123)\n- **Architecture:** arm64 (Apple Silicon)\n</code></pre>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#5-error-messages-and-logs","level":3,"title":"5. Error Messages and Logs","text":"<p>Include complete error messages and relevant logs:</p> <p><pre><code>### Logs/Error Messages\n\n**Server logs:**\n</code></pre> [INFO] [Sellia Server] Listening on http://0.0.0.0:3000 [INFO] [Sellia Server] Domain: 127.0.0.1.nip.io [DEBUG] [WSGateway] Client connecting from 127.0.0.1:54321 [DEBUG] [Registry] Registering tunnel: myapp -&gt; client-123 [DEBUG] [HTTPIngress] Incoming request: GET / HTTP/1.1 [ERROR] [HTTPIngress] Tunnel not found: myapp <pre><code>**CLI logs:**\n</code></pre> [INFO] [Sellia] Connecting to server: http://127.0.0.1:3000 [INFO] [Sellia] Tunnel registered: myapp.127.0.0.1.nip.io:3000 [DEBUG] [TunnelClient] Waiting for requests... <pre><code>\n</code></pre></p> <p>Tips for logs: - Use debug logging: <code>LOG_LEVEL=debug</code> - Redact sensitive information (API keys, passwords) - Include timestamps if relevant - Show both server and client logs if applicable</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#6-screenshots","level":3,"title":"6. Screenshots","text":"<p>For UI issues, screenshots are very helpful:</p> <pre><code>### Screenshots\n\n**Inspector UI showing corrupted response:**\n![inspector-bug](https://i.imgur.com/...)\n\n**Expected display:**\n![expected](https://i.imgur.com/...)\n</code></pre> <p>Tips for screenshots: - Show the entire window when relevant - Highlight the problematic area - Include before/after when applicable - Keep file sizes reasonable (&lt; 2MB)</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#7-configuration-files","level":3,"title":"7. Configuration Files","text":"<p>If the bug is configuration-related, include sanitized config:</p> <p><pre><code>### Configuration\n\n**sellia.yml:**\n```yaml\nserver: http://127.0.0.1:3000\napi_key: &lt;redacted&gt;\n\ntunnels:\n  myapp:\n    port: 3000\n    subdomain: myapp\n</code></pre> <pre><code>**Important:** Redact sensitive information before sharing!\n\n### 8. Minimal Reproduction Case\n\nIf possible, provide a minimal example that reproduces the bug:\n\n```markdown\n### Minimal Reproduction\n\nI've created a minimal example that reproduces the issue:\n\n```bash\n# Start server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Create simple echo server\necho 'require \"http/server\"; server = HTTP::Server.new { |ctx| ctx.response.print(\"OK\") }; server.bind(8080); server.listen' &gt; echo_server.cr\ncrystal run echo_server.cr\n\n# Create tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain test\n\n# Test\ncurl http://test.127.0.0.1.nip.io:3000\n# Returns: 404 Not Found (expected: \"OK\")\n</code></pre> <pre><code>## Bug Categories\n\n### Connection Issues\n\nWhen reporting connection problems:\n\n```markdown\n### Category: Connection Issue\n\n**Problem:** Tunnel connects but immediately disconnects\n\n**Network Setup:**\n- Direct connection (no proxy)\n- Firewall: macOS built-in firewall enabled\n- Network: Home WiFi\n\n**Connection Test:**\n</code></pre> ping 127.0.0.1.nip.io - OK telnet 127.0.0.1 3000 - OK <pre><code>\n</code></pre></p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#performance-issues","level":3,"title":"Performance Issues","text":"<p>When reporting slow performance:</p> <p><pre><code>### Category: Performance\n\n**Problem:** Requests take &gt; 5 seconds to complete\n\n**Expected:** &lt; 100ms response time\n**Actual:** 5-10 seconds\n\n**Load:** ~10 concurrent tunnels, ~100 requests/second\n\n**Profiling Data:**\n</code></pre> Request timing breakdown: - WebSocket receive: 10ms - Processing: 4950ms - Response send: 40ms <pre><code>\n</code></pre></p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#security-issues","level":3,"title":"Security Issues","text":"<p>Do NOT report security vulnerabilities through public issues!</p> <p>See Security Disclosure for reporting security issues privately.</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#documentation-issues","level":3,"title":"Documentation Issues","text":"<p>For documentation bugs or unclear documentation:</p> <pre><code>### Category: Documentation\n\n**Page:** https://github.com/watzon/sellia/blob/main/README.md\n**Section:** Installation\n**Problem:** Step 3 mentions running `shards build` but doesn't explain where shards comes from\n\n**Suggested Fix:**\nAdd note that shards is installed with Crystal, or add to prerequisites section.\n</code></pre>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#after-reporting","level":2,"title":"After Reporting","text":"","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#what-to-expect","level":3,"title":"What to Expect","text":"<ol> <li>Confirmation: We'll respond within 48 hours</li> <li>Clarification: We may ask for more information</li> <li>Triaging: The issue will be tagged and prioritized</li> <li>Updates: We'll provide updates on progress</li> </ol>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#stay-engaged","level":3,"title":"Stay Engaged","text":"<ul> <li>Respond to follow-up questions promptly</li> <li>Test proposed fixes if asked</li> <li>Provide additional information as needed</li> <li>Confirm if the issue is resolved</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#issue-labels","level":3,"title":"Issue Labels","text":"<p>We use labels to track issue status:</p> <ul> <li><code>bug</code>: Confirmed bug</li> <li><code>confirmed</code>: Reproduced by maintainers</li> <li><code>needs-info</code>: Needs more information</li> <li><code>in-progress</code>: Being worked on</li> <li><code>good first issue</code>: Good for new contributors</li> <li><code>help wanted</code>: Contributions welcome</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#do","level":3,"title":"DO:","text":"<ul> <li>Search before reporting - Avoid duplicates</li> <li>Be specific - Provide exact steps and details</li> <li>Use debug mode - Enable <code>LOG_LEVEL=debug</code></li> <li>Redact sensitive data - Remove API keys, passwords</li> <li>Test on latest version - Ensure bug still exists</li> <li>Provide minimal reproduction - Help us isolate the issue</li> <li>Use appropriate template - Fill out all required fields</li> <li>One bug per issue - Don't report multiple bugs in one issue</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#dont","level":3,"title":"DON'T:","text":"<ul> <li>Report sensitive issues publicly - Security vulnerabilities go to email</li> <li>Use vague titles - \"Help me\" or \"Broken\" are not helpful</li> <li>Forget environment details - OS, version, etc. are essential</li> <li>Include irrelevant logs - Don't paste entire log files</li> <li>Demand immediate fixes - We're volunteers with limited time</li> <li>Submit the same issue multiple times - Bumping doesn't help</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#examples-of-good-bug-reports","level":2,"title":"Examples of Good Bug Reports","text":"","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#example-1-clear-and-complete","level":3,"title":"Example 1: Clear and Complete","text":"<p><pre><code>### WebSocket connection fails after server running for &gt; 1 hour\n\n**Description:**\nAfter the server runs for approximately 1 hour, new tunnel connections\nfail with \"WebSocket handshake timeout\" error. Existing tunnels continue\nto work.\n\n**Reproduction Steps:**\n1. Start server: `./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io`\n2. Wait ~1 hour (no tunnels active during this time)\n3. Try to create tunnel: `./bin/sellia http 8080 --server http://127.0.0.1:3000`\n4. Observe error\n\n**Expected Behavior:** Tunnel should connect successfully\n\n**Actual Behavior:**\n</code></pre> [ERROR] [TunnelClient] WebSocket handshake timeout after 30s <pre><code>**Environment:**\n- OS: Ubuntu 22.04 LTS\n- Crystal: 1.10.1\n- Sellia: 0.1.2 (commit: abc123)\n\n**Additional Context:**\nRestarting the server fixes the issue temporarily. Happens consistently\nafter ~1 hour of idle time.\n</code></pre></p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#example-2-minimal-reproduction","level":3,"title":"Example 2: Minimal Reproduction","text":"<pre><code>### Tunnel subdomain allows invalid characters\n\n**Description:**\nThe CLI accepts subdomains with invalid characters like @ and !, but\nthe server then rejects them with unclear error message.\n\n**Minimal Reproduction:**\n```bash\n./bin/sellia http 8080 --subdomain \"test@domain\"\n# Returns: \"Tunnel registered\" but tunnel doesn't work\n\ncurl http://test@domain.127.0.0.1.nip.io:3000\n# Returns: \"Bad Request\" from server\n</code></pre> <p>Expected Behavior: CLI should reject invalid subdomains with clear error</p> <p>Actual Behavior: CLI accepts but server fails later</p> <p>Suggested Fix: Validate subdomain format in CLI before sending to server ```</p>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#getting-help","level":2,"title":"Getting Help","text":"<p>If you're not sure if something is a bug:</p> <ol> <li>Check the docs - Ensure you're using it correctly</li> <li>Search issues - See if others have reported it</li> <li>Join discussions - Comment on relevant issues</li> <li>Ask a question - Open an issue with the \"question\" label</li> </ol>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#related-resources","level":2,"title":"Related Resources","text":"<ul> <li>Contributing Guidelines</li> <li>Debugging Guide</li> <li>Security Disclosure</li> <li>Existing Issues</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/reporting-bugs/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Feature Requests - Suggest new features</li> <li>Contributing Workflow - Submit a fix</li> <li>Development Setup - Start contributing</li> </ul>","path":["Developer","Contributing","Reporting Bugs"],"tags":[]},{"location":"developer/contributing/suggesting-features/","level":1,"title":"Suggesting Features","text":"<p>This guide explains how to suggest new features for Sellia effectively.</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Before Suggesting</li> <li>How to Suggest</li> <li>Feature Request Template</li> <li>What Makes a Good Request</li> <li>Feature Categories</li> <li>After Submitting</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#before-suggesting","level":2,"title":"Before Suggesting","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#check-for-existing-requests","level":3,"title":"Check for Existing Requests","text":"<p>Search existing issues to avoid duplicates:</p> <ol> <li>Use the search bar with keywords</li> <li>Check both open and closed issues</li> <li>Review the ROADMAP for planned features</li> </ol> <p>Search terms to try: - Feature name or concept - Related component (e.g., \"TCP tunnel\", \"custom domain\") - Use case (e.g., \"database access\", \"SSH tunneling\")</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#review-the-roadmap","level":3,"title":"Review the Roadmap","text":"<p>Check the ROADMAP to see: - What's already planned - Current development priorities - What's in scope for the open-source project</p> <p>Note: Multi-tenancy, billing, and enterprise SaaS features are explicitly out of scope for the open-source version.</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#consider-self-hosting","level":3,"title":"Consider Self-Hosting","text":"<p>Some requests may be better addressed by self-hosting:</p> <ul> <li>Custom configuration - May be possible with config files</li> <li>Integrations - May be achievable with custom scripts</li> <li>Deployment - May be solved with Docker or custom orchestration</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#think-through-the-problem","level":3,"title":"Think Through the Problem","text":"<p>Before requesting, consider: - What problem are you trying to solve? - How would this feature help? - Who would benefit from this feature? - Are there alternative solutions?</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#how-to-suggest","level":2,"title":"How to Suggest","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#create-a-github-issue","level":3,"title":"Create a GitHub Issue","text":"<ol> <li>Go to github.com/watzon/sellia/issues</li> <li>Click \"New Issue\"</li> <li>Choose \"Feature Request\" template (if available)</li> <li>Fill in the required information</li> <li>Submit the issue</li> </ol>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#use-a-clear-title","level":3,"title":"Use a Clear Title","text":"<p>A good title explains the feature and its benefit:</p> <p>Good titles: - \"Add TCP tunnel support for database connections\" - \"Implement custom domain support for production deployments\" - \"Add request replay functionality to inspector UI\"</p> <p>Poor titles: - \"Feature request\" - \"Please add this\" - \"I need help with...\"</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#feature-request-template","level":2,"title":"Feature Request Template","text":"<p>Use this template when suggesting features:</p> <pre><code>### Feature Description\n\nA clear and concise description of the feature you'd like to see added.\n\n### Problem Statement\n\nWhat problem does this feature solve? What limitation does it address?\n\n### Proposed Solution\n\nHow do you envision this feature working? Provide details about:\n- User-facing behavior\n- Configuration options\n- API changes (if applicable)\n\n### Alternatives Considered\n\nWhat alternative solutions or workarounds have you considered?\nWhy are they insufficient?\n\n### Use Cases\n\nDescribe specific scenarios where this feature would be useful:\n- Use case 1: ...\n- Use case 2: ...\n\n### Benefits\n\nWho would benefit from this feature and how?\n- End users\n- Developers\n- Operators\n\n### Drawbacks/Risks\n\nAny potential downsides, risks, or concerns:\n- Performance impact\n- Complexity increase\n- Breaking changes\n\n### Implementation Details (Optional)\n\nIf you have thoughts on implementation:\n- Technical approach\n- Areas of codebase affected\n- Dependencies required\n- Rough effort estimate\n\n### Examples/Mockups (Optional)\n\nScreenshots, mockups, or examples:\n- UI mockups\n- Example config files\n- API usage examples\n\n### Additional Context\n\nAdd any other context, screenshots, or examples about the feature request.\n</code></pre>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#what-makes-a-good-request","level":2,"title":"What Makes a Good Request","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#1-clear-problem-statement","level":3,"title":"1. Clear Problem Statement","text":"<p>Explain what problem you're trying to solve:</p> <pre><code>### Problem Statement\n\nI need to expose my PostgreSQL database to remote developers for\ncollaboration and debugging. Currently, I can only tunnel HTTP services,\nwhich doesn't work for database connections that use the PostgreSQL protocol.\n</code></pre>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#2-proposed-solution","level":3,"title":"2. Proposed Solution","text":"<p>Describe how the feature should work:</p> <pre><code>### Proposed Solution\n\nAdd a new command similar to `sellia http` for TCP tunnels:\n\n```bash\nsellia tcp 5432 --subdomain my-db\n</code></pre> <p>This would: - Create a TCP tunnel to the local PostgreSQL database - Assign a subdomain:port combo (e.g., my-db.127.0.0.1.nip.io:3000) - Forward raw TCP traffic (not HTTP) <pre><code>### 3. Use Cases\n\nProvide **concrete examples** of how you'd use it:\n\n```markdown\n### Use Cases\n\n**Use Case 1: Remote Database Access**\nDevelopers working remotely need direct access to the development database.\nWith TCP tunnels, they can connect using standard PostgreSQL tools:\n\n```bash\npsql -h myapp-db.127.0.0.1.nip.io -p 3000 -U devuser -d myapp_dev\n</code></pre></p> <p>Use Case 2: Redis Debugging When debugging Redis caching issues, I need to connect to the local Redis instance from remote machines for inspection.</p> <p>Use Case 3: SSH Tunneling For maintenance tasks, I need to SSH into servers behind NAT/firewalls. <pre><code>### 4. Alternatives Considered\n\nShow you've **thought about alternatives**:\n\n```markdown\n### Alternatives Considered\n\n**Alternative 1: VPN**\n- Pros: Full network access\n- Cons: Complex setup, requires client software, not portable\n- Why insufficient: Overkill for simple database access\n\n**Alternative 2: ngrok's TCP tunnels**\n- Pros: Already supports TCP\n- Cons: Not self-hosted, usage limits, cost\n- Why insufficient: We need to self-host for compliance reasons\n\n**Alternative 3: SSH tunneling**\n- Pros: Built into SSH\n- Cons: Requires SSH access, manual setup per developer\n- Why insufficient: Want something more user-friendly\n</code></pre></p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#5-implementation-ideas","level":3,"title":"5. Implementation Ideas","text":"<p>If you have technical thoughts, share them:</p> <pre><code>### Implementation Details\n\n**Protocol:**\nThe protocol already supports arbitrary byte streams over WebSocket.\nWould need to add:\n- `RegisterTcpTunnel` message type\n- TCP port allocation in server\n- TCP forwarding handler (similar to HTTP ingress)\n\n**Port Allocation:**\n- Suggest configurable port ranges (e.g., 5000-6000 for TCP tunnels)\n- Track allocations in tunnel registry\n\n**Complexity:**\n- Medium complexity\n- Similar to existing HTTP tunnel flow\n- Main risk: port exhaustion\n</code></pre>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#feature-categories","level":2,"title":"Feature Categories","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#core-tunneling-features","level":3,"title":"Core Tunneling Features","text":"<p>For enhancements to tunneling capabilities:</p> <pre><code>### Feature: UDP Protocol Support\n\n**Problem:**\nNeed to tunnel UDP-based services like DNS, syslog, or game servers.\n\n**Proposed Solution:**\nAdd UDP tunnel support similar to TCP/HTTP tunnels.\n\n**Use Cases:**\n- DNS server debugging\n- Log aggregation\n- Real-time game development\n</code></pre>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#inspector-ui-features","level":3,"title":"Inspector UI Features","text":"<p>For improvements to the web inspector:</p> <pre><code>### Feature: Request/Response Modification\n\n**Problem:**\nWhen debugging webhook handlers, I need to test different payloads\nwithout modifying the sending application.\n\n**Proposed Solution:**\nAdd \"Edit &amp; Resend\" feature in inspector UI that allows modifying\nrequest body/headers and replaying the request.\n\n**Use Cases:**\n- Testing webhook handlers with different payloads\n- Trying different authentication headers\n- Debugging API edge cases\n</code></pre>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#cli-features","level":3,"title":"CLI Features","text":"<p>For command-line interface improvements:</p> <pre><code>### Feature: Tunnels Profile Management\n\n**Problem:**\nI work on multiple projects and constantly switch between different\ntunnel configurations. Typing all the flags each time is tedious.\n\n**Proposed Solution:**\nAdd profile management:\n\n```bash\nsellia profile save project1 --port 3000 --subdomain myapp\nsellia profile use project1  # Starts tunnel with saved config\nsellia profile list          # Lists all profiles\n</code></pre> <p>Use Cases: - Quick switching between projects - Sharing tunnel configs with team - Version control tunnel configurations <pre><code>### Server Features\n\nFor server-side functionality:\n\n```markdown\n### Feature: IP Allowlisting\n\n**Problem:**\nI want to expose internal tools to specific office locations but\nkeep them private from the rest of the internet.\n\n**Proposed Solution:**\nAdd IP allowlisting per tunnel or globally:\n\n```bash\nsellia http 3000 --allow 192.168.1.0/24 --allow 10.0.0.0/8\n</code></pre></p> <p>Use Cases: - Restricting internal tools to office networks - Compliance requirements for data access - Multi-tenant deployments with access controls <pre><code>### DevOps/Deployment\n\nFor deployment and operations improvements:\n\n```markdown\n### Feature: Kubernetes Deployment Manifests\n\n**Problem:**\nWe deploy everything on Kubernetes and would like to run Sellia\nin our cluster.\n\n**Proposed Solution:**\nProvide Helm charts or Kubernetes manifests for deployment.\n\n**Use Cases:**\n- Self-hosting in Kubernetes\n- Horizontal scaling of tunnel servers\n- Integration with existing K8s infrastructure\n</code></pre></p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#developer-experience","level":3,"title":"Developer Experience","text":"<p>For improvements to developer workflows:</p> <pre><code>### Feature: Language Client Libraries\n\n**Problem:**\nIntegrating Sellia into applications requires implementing the\nWebSocket protocol manually.\n\n**Proposed Solution:**\nProvide official client libraries for popular languages (Python, Go, Rust).\n\n**Use Cases:**\n- Programmatic tunnel creation from applications\n- Testing frameworks that need temporary tunnels\n- Custom tooling\n</code></pre>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#evaluation-criteria","level":2,"title":"Evaluation Criteria","text":"<p>Features are evaluated based on:</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#1-alignment-with-project-goals","level":3,"title":"1. Alignment with Project Goals","text":"<ul> <li>Does it fit the self-hosted ngrok alternative use case?</li> <li>Is it within scope (not enterprise/SaaS features)?</li> <li>Does it benefit the target audience?</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#2-demand-and-use-cases","level":3,"title":"2. Demand and Use Cases","text":"<ul> <li>How many people would use it?</li> <li>Are the use cases compelling and realistic?</li> <li>Is there significant community interest?</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#3-implementation-feasibility","level":3,"title":"3. Implementation Feasibility","text":"<ul> <li>Can it be implemented reasonably?</li> <li>What's the complexity and effort required?</li> <li>Are there technical blockers?</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#4-maintenance-burden","level":3,"title":"4. Maintenance Burden","text":"<ul> <li>Will it significantly increase maintenance?</li> <li>Does it add dependencies or complexity?</li> <li>Can it be tested effectively?</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#5-breaking-changes","level":3,"title":"5. Breaking Changes","text":"<ul> <li>Does it require breaking existing functionality?</li> <li>Is migration possible for existing users?</li> <li>What's the impact on the ecosystem?</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#what-happens-next","level":2,"title":"What Happens Next","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#issue-triage","level":3,"title":"Issue Triage","text":"<p>After submission:</p> <ol> <li>Labeling - Issue will be tagged (enhancement, needs-discussion, etc.)</li> <li>Discussion - Community and maintainers will discuss</li> <li>Evaluation - We'll evaluate against criteria above</li> <li>Decision - Accepted, deferred, or rejected</li> </ol>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#possible-outcomes","level":3,"title":"Possible Outcomes","text":"<p>Accepted: - Added to roadmap - Prioritized for upcoming milestone - Assigned to a milestone</p> <p>Needs Discussion: - Community discussion encouraged - Clarifying questions asked - May result in refined proposal</p> <p>Deferred: - Good idea but not right now - May be reconsidered later - Added to \"Future Considerations\"</p> <p>Rejected: - Doesn't align with project goals - Out of scope (e.g., enterprise features) - Technical blockers - You'll receive explanation</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#contributing-the-feature","level":2,"title":"Contributing the Feature","text":"<p>If your feature request is accepted:</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#1-design-discussion","level":3,"title":"1. Design Discussion","text":"<p>We'll work through the design together: - API surface - Configuration options - User experience - Implementation approach</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#2-implementation","level":3,"title":"2. Implementation","text":"<p>You can contribute the implementation: - See Contributing Workflow - Follow Code Style - Write Tests</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#3-review-and-merge","level":3,"title":"3. Review and Merge","text":"<ul> <li>Submit as a PR when ready</li> <li>We'll review together</li> <li>Iterate based on feedback</li> <li>Merge when complete</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#examples-of-good-feature-requests","level":2,"title":"Examples of Good Feature Requests","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#example-1-complete-and-thoughtful","level":3,"title":"Example 1: Complete and Thoughtful","text":"<pre><code>### Add TCP tunnel support for database and SSH connections\n\n**Problem Statement:**\nOur team needs to access development databases and internal servers\nthat are behind NAT/firewalls. HTTP-only tunneling doesn't work for\nPostgreSQL, MySQL, SSH, or other TCP-based protocols.\n\n**Proposed Solution:**\nImplement TCP tunneling similar to `ngrok tcp`:\n\n```bash\nsellia tcp 5432 --subdomain my-db\n# Returns: TCP tunnel available at my-db.127.0.0.1.nip.io:5000\n</code></pre> <p>Protocol Design: 1. Client opens WebSocket to server 2. Sends <code>RegisterTcpTunnel</code> message with requested port 3. Server allocates port from configured range (e.g., 5000-6000) 4. Server listens on allocated port 5. Incoming TCP connections on server port are forwarded via WebSocket 6. Client forwards to local TCP service</p> <p>Configuration: <pre><code># sellia-server config\ntcp_port_range: \"5000-6000\"\nmax_tcp_tunnels: 100\n</code></pre></p> <p>Use Cases: - Database Access: Remote PostgreSQL/MySQL access for developers - SSH Tunneling: Access servers behind NAT - Redis Debugging: Connect to local Redis from remote - Custom Protocols: Any TCP-based service (LDAP, RDP, etc.)</p> <p>Alternatives Considered: - VPN: Too complex, requires client software - SSH port forwarding: Manual, not user-friendly - ngrok: Not self-hosted, usage limits</p> <p>Benefits: - Expands Sellia beyond HTTP/HTTPS - Enables new use cases (databases, SSH) - Competitive feature with ngrok</p> <p>Drawbacks: - Increases complexity - Port management challenges - Security considerations (exposing raw TCP)</p> <p>Implementation Effort: - Medium complexity (~2-3 weeks) - Requires:   - Protocol message for TCP registration   - TCP server component   - Port allocation logic   - TCP forwarding over WebSocket</p> <p>References: - ngrok's TCP implementation - SSH tunneling as reference <pre><code>### Example 2: Focused and Specific\n\n```markdown\n### Add `--log-level` flag to control verbosity\n\n**Problem:**\nDebug logging is all-or-nothing with `LOG_LEVEL=debug`. There's no\nway to get warnings/errors without verbose debug output.\n\n**Proposed Solution:**\nAdd log level flag:\n\n```bash\nsellia http 3000 --log-level warn\n</code></pre></p> <p>Levels: error, warn, info, debug</p> <p>Use Cases: - Production deployments want only errors - Development wants debug - Testing wants info</p> <p>Benefits: - Better production logs - Reduced log volume - Industry-standard approach</p> <p>Simple Implementation: Just add standard log levels to existing logger. ```</p>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#do","level":3,"title":"DO:","text":"<ul> <li>Search first - Check for duplicates and roadmap</li> <li>Be specific - Provide concrete use cases and examples</li> <li>Think big picture - Consider the broader ecosystem</li> <li>Consider alternatives - Show you've thought of other approaches</li> <li>Stay engaged - Participate in the discussion</li> <li>Be open to feedback - Your idea may evolve</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#dont","level":3,"title":"DON'T:","text":"<ul> <li>Demand immediate implementation - We're volunteers</li> <li>Request enterprise features - Billing, multi-tenancy, etc. are out of scope</li> <li>Be vague - \"Make it better\" isn't helpful</li> <li>Ignore the roadmap - Check what's already planned</li> <li>Forget the why - Explain the problem, not just the solution</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#after-submitting","level":2,"title":"After Submitting","text":"<p>What to expect after you open a feature request:</p> <ul> <li>Maintainers may ask clarifying questions</li> <li>The request may be tagged and triaged against the roadmap</li> <li>If accepted, it may be scheduled for a future milestone</li> <li>You are welcome to contribute an implementation</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#related-resources","level":2,"title":"Related Resources","text":"<ul> <li>Roadmap - See what's planned</li> <li>Contributing Workflow - Implement the feature</li> <li>Reporting Bugs - Report issues instead</li> <li>Existing Issues - Search and discuss</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/suggesting-features/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Contributing Workflow - Start implementing</li> <li>Development Setup - Set up environment</li> <li>Code Style - Write clean code</li> </ul>","path":["Developer","Contributing","Suggesting Features"],"tags":[]},{"location":"developer/contributing/workflow/","level":1,"title":"Contribution Workflow","text":"<p>This document outlines the complete workflow for contributing to Sellia, from forking to merging.</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Getting Started</li> <li>Setting Up Your Fork</li> <li>Branching Strategy</li> <li>Making Changes</li> <li>Submitting a Pull Request</li> <li>Code Review Process</li> <li>Addressing Feedback</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#getting-started","level":2,"title":"Getting Started","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#prerequisites","level":3,"title":"Prerequisites","text":"<p>Before contributing, ensure you have: - Read and understood the Code of Conduct - Set up the development environment - Familiarized yourself with the codebase - Reviewed the code style guidelines</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#create-your-fork","level":3,"title":"Create Your Fork","text":"<ol> <li>Fork the repository</li> <li>Go to github.com/watzon/sellia</li> <li>Click the \"Fork\" button in the top-right corner</li> <li> <p>Choose your GitHub account as the destination</p> </li> <li> <p>Clone your fork locally</p> </li> </ol> <pre><code>git clone https://github.com/YOUR_USERNAME/sellia.git\ncd sellia\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#setting-up-your-fork","level":2,"title":"Setting Up Your Fork","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#add-upstream-remote","level":3,"title":"Add Upstream Remote","text":"<p>Add the original repository as an upstream remote to keep your fork synchronized:</p> <pre><code>cd sellia\ngit remote add upstream https://github.com/watzon/sellia.git\n\n# Verify remotes\ngit remote -v\n# Should show:\n# origin    https://github.com/YOUR_USERNAME/sellia.git (fetch)\n# origin    https://github.com/YOUR_USERNAME/sellia.git (push)\n# upstream  https://github.com/watzon/sellia.git (fetch)\n# upstream  https://github.com/watzon/sellia.git (push)\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#install-dependencies","level":3,"title":"Install Dependencies","text":"<pre><code># Install Crystal dependencies\nshards install\n\n# Install inspector UI dependencies\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n\n# Build the project\nshards build\n\n# Run tests to verify setup\ncrystal spec\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#configure-git","level":3,"title":"Configure Git","text":"<p>Ensure your git identity is configured:</p> <pre><code>git config user.name \"Your Name\"\ngit config user.email \"your-email@example.com\"\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#branching-strategy","level":2,"title":"Branching Strategy","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#main-branch","level":3,"title":"Main Branch","text":"<ul> <li><code>main</code>: The stable, production-ready branch</li> <li>Protected from direct pushes</li> <li>All changes go through pull requests</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#your-branches","level":3,"title":"Your Branches","text":"<p>Create branches from <code>main</code> for your work:</p> <pre><code># Ensure your main is up to date\ngit checkout main\ngit fetch upstream\ngit rebase upstream/main\n\n# Create a new branch for your work\ngit checkout -b feature/your-feature-name\n# or\ngit checkout -b fix/your-bug-fix\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#branch-naming-conventions","level":3,"title":"Branch Naming Conventions","text":"<p>Use descriptive branch names:</p> <ul> <li><code>feature/add-tcp-tunnels</code> - New features</li> <li><code>fix/websocket-timeout</code> - Bug fixes</li> <li><code>docs/update-api-guide</code> - Documentation updates</li> <li><code>refactor/tunnel-registry</code> - Code refactoring</li> <li><code>test/add-protocol-tests</code> - Adding tests</li> <li><code>chore/update-dependencies</code> - Maintenance tasks</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#making-changes","level":2,"title":"Making Changes","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#1-make-your-changes","level":3,"title":"1. Make Your Changes","text":"<p>Edit files and implement your feature or fix.</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#2-follow-code-style","level":3,"title":"2. Follow Code Style","text":"<p>Ensure your code follows the code style guidelines:</p> <pre><code># Format Crystal code\ncrystal tool format ./src\n\n# Check formatting (CI will check this)\ncrystal tool format --check ./src\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#3-write-tests","level":3,"title":"3. Write Tests","text":"<p>Add tests for new functionality or bug fixes:</p> <pre><code># Run tests\ncrystal spec\n\n# Run specific test file\ncrystal spec spec/core/protocol/message_spec.cr\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#4-test-your-changes","level":3,"title":"4. Test Your Changes","text":"<p>Test locally before pushing:</p> <pre><code># Run full test suite\ncrystal spec\n\n# Build the project\nshards build\n\n# Test manually if applicable\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#5-commit-your-changes","level":3,"title":"5. Commit Your Changes","text":"<p>Use conventional commits:</p> <pre><code># Stage changes\ngit add .\n\n# Commit with conventional commit message\ngit commit -m \"feat(cli): add custom timeout flag for connections\"\n</code></pre> <p>Example commits: <pre><code># Feature\ngit commit -m \"feat(cli): add --timeout flag for connection timeout\"\n\n# Bug fix\ngit commit -m \"fix(server): handle WebSocket close during request processing\"\n\n# Documentation\ngit commit -m \"docs: update installation instructions for macOS\"\n\n# Test\ngit commit -m \"test(core): add protocol message serialization tests\"\n\n# Refactor\ngit commit -m \"refactor(server): simplify tunnel registry logic\"\n</code></pre></p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#6-sync-with-upstream","level":3,"title":"6. Sync with Upstream","text":"<p>Keep your branch up to date with upstream:</p> <pre><code># Fetch upstream changes\ngit fetch upstream\n\n# Rebase your branch on top of upstream/main\ngit rebase upstream/main\n\n# If there are conflicts, resolve them and continue:\n# Edit files to resolve conflicts\ngit add &lt;resolved-files&gt;\ngit rebase --continue\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#7-push-to-your-fork","level":3,"title":"7. Push to Your Fork","text":"<p>Push your branch to your fork:</p> <pre><code>git push origin feature/your-feature-name\n</code></pre> <p>For force pushing after rebasing (careful!):</p> <pre><code>git push origin feature/your-feature-name --force-with-lease\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#submitting-a-pull-request","level":2,"title":"Submitting a Pull Request","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#1-create-pull-request","level":3,"title":"1. Create Pull Request","text":"<ul> <li>Go to your fork on GitHub</li> <li>Click \"Compare &amp; pull request\" next to your branch</li> <li>Or go to \"Pull requests\" → \"New pull request\"</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#2-fill-in-the-pr-template","level":3,"title":"2. Fill in the PR Template","text":"<p>GitHub will provide a template. Fill in:</p> <p>Title: <pre><code>feat(cli): add custom timeout flag for connections\n</code></pre></p> <p>Description: <pre><code>## Summary\n- Add `--timeout` flag to CLI for custom connection timeout\n- Default timeout is 30 seconds\n- Closes #123\n\n## Changes\n- Added timeout parameter to CLI options\n- Updated tunnel client to use custom timeout\n- Added tests for timeout handling\n\n## Test Plan\n- [x] Unit tests pass\n- [x] Manual testing with various timeout values\n- [x] Tested with `--timeout 5` and `--timeout 60`\n</code></pre></p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#3-link-issues","level":3,"title":"3. Link Issues","text":"<p>Reference related issues:</p> <pre><code>Closes #123\nFixes #456\nRelated to #789\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#4-request-review","level":3,"title":"4. Request Review","text":"<ul> <li>Request review from maintainers</li> <li>Assign relevant reviewers based on changed components</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#code-review-process","level":2,"title":"Code Review Process","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#what-reviewers-look-for","level":3,"title":"What Reviewers Look For","text":"<ol> <li>Correctness: Does the code work as intended?</li> <li>Testing: Are tests adequate and passing?</li> <li>Code Style: Does it follow the style guide?</li> <li>Documentation: Is the code well-documented?</li> <li>Performance: Are there any performance concerns?</li> <li>Security: Are there any security implications?</li> <li>Breaking Changes: Does this break existing functionality?</li> </ol>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#review-timeline","level":3,"title":"Review Timeline","text":"<ul> <li>Initial review typically within 48 hours</li> <li>Complex changes may take longer</li> <li>Follow up politely if no response after 1 week</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#review-outcomes","level":3,"title":"Review Outcomes","text":"<p>Approved: Changes look good, ready to merge (after any CI checks pass)</p> <p>Changes Requested: Address reviewer feedback and push updates</p> <p>Commented: Questions or suggestions, but not blocking merge</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#addressing-feedback","level":2,"title":"Addressing Feedback","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#1-make-requested-changes","level":3,"title":"1. Make Requested Changes","text":"<p>Implement the feedback from reviewers:</p> <pre><code># Make changes\nvim src/some_file.cr\n\n# Test the changes\ncrystal spec\n\n# Commit the changes\ngit commit -m \"fix(server): address review feedback on timeout handling\"\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#2-push-updates","level":3,"title":"2. Push Updates","text":"<p>Push new commits to your branch:</p> <pre><code>git push origin feature/your-feature-name\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#3-respond-to-comments","level":3,"title":"3. Respond to Comments","text":"<p>On GitHub, reply to review comments: - Explain how you addressed the issue - Ask clarifying questions if needed - Mark resolved comments as done</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#squashing-commits-optional","level":3,"title":"Squashing Commits (Optional)","text":"<p>Maintainers may ask you to squash multiple commits:</p> <pre><code># Interactive rebase\ngit rebase -i HEAD~5  # For last 5 commits\n\n# Mark commits to squash (change \"pick\" to \"s\")\n# Save and close\n# Edit the combined commit message\n\n# Force push (careful!)\ngit push origin feature/your-feature-name --force-with-lease\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#after-merge","level":2,"title":"After Merge","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#update-your-fork","level":3,"title":"Update Your Fork","text":"<p>After your PR is merged, update your fork's main branch:</p> <pre><code>git checkout main\ngit fetch upstream\ngit rebase upstream/main\ngit push origin main\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#delete-your-branch","level":3,"title":"Delete Your Branch","text":"<p>Optional: Delete the feature branch locally and remotely:</p> <pre><code># Delete local branch\ngit branch -d feature/your-feature-name\n\n# Delete remote branch\ngit push origin --delete feature/your-feature-name\n</code></pre>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#continuous-integration","level":2,"title":"Continuous Integration","text":"<p>All pull requests run CI checks:</p> <ul> <li>Crystal Tests: <code>crystal spec</code></li> <li>Code Formatting: <code>crystal tool format --check</code></li> <li>Build Verification: Ensure the project builds</li> <li>Linting: Code quality checks</li> </ul> <p>If CI fails: 1. Check the failure logs 2. Fix the issue locally 3. Push a new commit 4. CI will re-run automatically</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#code-of-conduct","level":2,"title":"Code of Conduct","text":"","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#our-pledge","level":3,"title":"Our Pledge","text":"<p>In the interest of fostering an open and welcoming environment, we pledge to make participation in our project and our community a harassment-free experience for everyone.</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#our-standards","level":3,"title":"Our Standards","text":"<p>Examples of behavior that contributes to a positive environment: - Using welcoming and inclusive language - Being respectful of differing viewpoints and experiences - Gracefully accepting constructive criticism - Focusing on what is best for the community - Showing empathy towards other community members</p> <p>Examples of unacceptable behavior: - Use of sexualized language or imagery - Personal attacks or insulting comments - Trolling or insulting/derogatory comments - Public or private harassment - Publishing others' private information without permission - Other unethical or unprofessional conduct</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#responsibilities","level":3,"title":"Responsibilities","text":"<p>Project maintainers are responsible for clarifying the standards of acceptable behavior and are expected to take appropriate and fair corrective action in response to any instances of unacceptable behavior.</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#scope","level":3,"title":"Scope","text":"<p>This code of conduct applies both within project spaces and in public spaces when an individual is representing the project or its community.</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#reporting-issues","level":3,"title":"Reporting Issues","text":"<p>If you encounter or witness unacceptable behavior, please contact the project team at: - Email: chris@watzon.tech - GitHub: Report via GitHub Issues</p> <p>All reports will be reviewed and investigated.</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#getting-help","level":2,"title":"Getting Help","text":"<p>If you need help at any point:</p> <ol> <li>Check existing issues - Your question may already be answered</li> <li>Read the documentation - Start with README</li> <li>Join discussions - Comment on relevant issues</li> <li>Ask a question - Open a new issue with the \"question\" label</li> </ol>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#recognition","level":2,"title":"Recognition","text":"<p>Contributors are recognized in: - Release notes for significant contributions - The project's README for major contributors</p> <p>Thank you for contributing to Sellia!</p>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/contributing/workflow/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Code Style Guidelines - Write clean code</li> <li>Commit Messages - Write great commit messages</li> <li>Testing - Test your changes</li> </ul>","path":["Developer","Contributing","Contribution Workflow"],"tags":[]},{"location":"developer/development/","level":1,"title":"Development","text":"<p>Setting up and working with the Sellia development environment.</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#overview","level":2,"title":"Overview","text":"<p>This section covers setting up a development environment, building the project, running tests, and workflow for contributing to Sellia.</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#prerequisites","level":2,"title":"Prerequisites","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#required","level":3,"title":"Required","text":"<ul> <li>Crystal &gt;= 1.10.0 - Install Crystal</li> <li>Git - Version control</li> <li>Node.js &gt;= 18 - For inspector UI development</li> <li>npm or yarn - Node package manager</li> </ul>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#optional","level":3,"title":"Optional","text":"<ul> <li>Docker - For containerized development</li> <li>Docker Compose - For multi-container setups</li> <li>Make - For using Makefile commands</li> </ul>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#initial-setup","level":2,"title":"Initial Setup","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#1-clone-repository","level":3,"title":"1. Clone Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#2-install-crystal-dependencies","level":3,"title":"2. Install Crystal Dependencies","text":"<pre><code># Install shards\nshards install\n\n# Verify installation\ncrystal --version\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#3-install-node-dependencies","level":3,"title":"3. Install Node Dependencies","text":"<pre><code>cd web\nnpm install\ncd ..\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#4-build-binaries","level":3,"title":"4. Build Binaries","text":"<pre><code># Debug build (faster compilation)\nshards build\n\n# Release build (optimized)\nshards build --release\n</code></pre> <p>Binaries will be in <code>./bin/</code>: - <code>sellia</code> - CLI client - <code>sellia-server</code> - Tunnel server</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#5-run-tests","level":3,"title":"5. Run Tests","text":"<pre><code># Run all tests\ncrystal spec\n\n# Run with verbose output\ncrystal spec --verbose\n\n# Run specific test file\ncrystal spec spec/server/tunnel_registry_spec.cr\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#running-locally","level":3,"title":"Running Locally","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#terminal-1-start-server","level":4,"title":"Terminal 1: Start Server","text":"<pre><code>LOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain localhost\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#terminal-2-start-inspector-ui-dev-mode","level":4,"title":"Terminal 2: Start Inspector UI (Dev Mode)","text":"<pre><code>cd web\nnpm run dev\n</code></pre> <p>The CLI will proxy to Vite's dev server at <code>localhost:5173</code>.</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#terminal-3-create-tunnel","level":4,"title":"Terminal 3: Create Tunnel","text":"<pre><code>./bin/sellia http 3000 --open\n</code></pre> <p>Now access your local service at the tunnel URL and the inspector at <code>http://localhost:4040</code>.</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#making-changes","level":3,"title":"Making Changes","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#1-create-feature-branch","level":4,"title":"1. Create Feature Branch","text":"<pre><code>git checkout -b feature/amazing-feature\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#2-make-changes","level":4,"title":"2. Make Changes","text":"<p>Edit source files in: - <code>src/server/</code> for server changes - <code>src/cli/</code> for client changes - <code>src/core/</code> for shared code - <code>web/src/</code> for inspector UI changes</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#3-rebuild","level":4,"title":"3. Rebuild","text":"<pre><code># Crystal code\nshards build\n\n# Or for release\nshards build --release\n\n# Inspector UI (if changed)\ncd web &amp;&amp; npm run build\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#4-test-changes","level":4,"title":"4. Test Changes","text":"<pre><code># Run tests\ncrystal spec\n\n# Test manually\n./bin/sellia http 3000\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#5-commit-changes","level":4,"title":"5. Commit Changes","text":"<pre><code>git add .\ngit commit -m \"feat: add amazing feature\"\n</code></pre> <p>Use conventional commits: - <code>feat:</code> - New feature - <code>fix:</code> - Bug fix - <code>docs:</code> - Documentation - <code>refactor:</code> - Code refactoring - <code>test:</code> - Adding tests - <code>chore:</code> - Maintenance tasks</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#6-push-and-create-pr","level":4,"title":"6. Push and Create PR","text":"<pre><code>git push origin feature/amazing-feature\n</code></pre> <p>Create pull request on GitHub.</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#development-tools","level":2,"title":"Development Tools","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#code-formatting","level":3,"title":"Code Formatting","text":"<pre><code># Format Crystal code\ncrystal tool format src/\n\n# Check formatting\ncrystal tool format --check src/\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#linting","level":3,"title":"Linting","text":"<pre><code># Inspector UI linting\ncd web\nnpm run lint\n\n# Fix linting issues\nnpm run lint:fix\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#type-checking","level":3,"title":"Type Checking","text":"<pre><code># Crystal type checking (automatic during compilation)\ncrystal build src/sellia.cr\n\n# TypeScript type checking\ncd web\nnpm run type-check\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#testing","level":2,"title":"Testing","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#crystal-tests","level":3,"title":"Crystal Tests","text":"<pre><code># All tests\ncrystal spec\n\n# Verbose output\ncrystal spec --verbose\n\n# Specific test file\ncrystal spec spec/server/tunnel_registry_spec.cr\n\n# With line numbers\ncrystal spec --error-trace\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#writing-tests","level":3,"title":"Writing Tests","text":"<p>Tests are in <code>spec/</code> directory:</p> <pre><code># spec/server/my_component_spec.cr\nrequire \"spec_helper\"\nrequire \"../../src/server/my_component\"\n\ndescribe Sellia::MyComponent do\n  it \"does something\" do\n    component = Sellia::MyComponent.new\n    component.do_something.should eq \"expected result\"\n  end\nend\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#inspector-ui-tests","level":3,"title":"Inspector UI Tests","text":"<pre><code>cd web\n\n# Run tests\nnpm test\n\n# Run in watch mode\nnpm test -- --watch\n\n# Coverage\nnpm run test:coverage\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#debugging","level":2,"title":"Debugging","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#crystal-debugging","level":3,"title":"Crystal Debugging","text":"<pre><code># Enable debug output\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain localhost\n\n# Use error trace\ncrystal spec --error-trace\n\n# Add debug output\nputs \"Debug: #{variable.inspect}\"\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#inspector-ui-debugging","level":3,"title":"Inspector UI Debugging","text":"<pre><code>cd web\n\n# Start dev server with debugging\nnpm run dev\n\n# Browser DevTools\n# - React DevTools extension\n# - Network tab for WebSocket\n# - Console for errors\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#websocket-debugging","level":3,"title":"WebSocket Debugging","text":"<p>Use browser DevTools or WebSocket clients:</p> <pre><code># Install wscat\nnpm install -g wscat\n\n# Connect to inspector WebSocket\nwscat -c ws://localhost:4040\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#performance-profiling","level":2,"title":"Performance Profiling","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#crystal-profiling","level":3,"title":"Crystal Profiling","text":"<pre><code># Build with profiling\ncrystal build --profile src/sellia-server.cr -o sellia-server-prof\n\n# Run and generate profile\n./sellia-server-prof\n# ... use the application ...\n# Kill with INT\n\n# Analyze profile\ncrystal tool profile sellia-server-prof\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#memory-profiling","level":3,"title":"Memory Profiling","text":"<pre><code># Monitor memory usage\ntop -p $(pgrep sellia-server)\n\n# Or with ps\nps aux | grep sellia\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#common-development-tasks","level":2,"title":"Common Development Tasks","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#adding-a-new-cli-command","level":3,"title":"Adding a New CLI Command","text":"<p>CLI commands are handled directly in <code>src/cli/main.cr</code>. To add a new command:</p> <ol> <li>Add a new <code>when</code> clause in the <code>run</code> method:</li> </ol> <pre><code># In src/cli/main.cr\ncase command\nwhen \"mycommand\"\n  run_mycommand\n# ... other commands\nend\n</code></pre> <ol> <li>Implement the command method:</li> </ol> <pre><code>private def self.run_mycommand\n  # Command implementation\n  puts \"My custom command\"\nend\n</code></pre> <ol> <li>Add tests in <code>spec/cli/mycommand_spec.cr</code></li> </ol>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#adding-a-new-protocol-message","level":3,"title":"Adding a New Protocol Message","text":"<ol> <li>Define in <code>src/core/protocol/messages/</code>:</li> </ol> <pre><code># src/core/protocol/messages/my_message.cr\nmodule Sellia\n  module Protocol\n    class MyMessage\n      include MessagePack::Serializable\n\n      property field1 : String\n      property field2 : Int32\n    end\n  end\nend\n</code></pre> <ol> <li> <p>Require it in <code>src/core/protocol.cr</code></p> </li> <li> <p>Handle in server and client</p> </li> <li> <p>Add tests in <code>spec/core/protocol/message_spec.cr</code></p> </li> </ol>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#adding-ui-components","level":3,"title":"Adding UI Components","text":"<ol> <li>Create in <code>web/src/components/</code>:</li> </ol> <pre><code>// web/src/components/MyComponent.tsx\nexport function MyComponent() {\n  return &lt;div&gt;My Component&lt;/div&gt;;\n}\n</code></pre> <ol> <li> <p>Add to routing in <code>web/src/main.tsx</code></p> </li> <li> <p>Add styles in <code>web/src/styles/</code> or use Tailwind CSS classes</p> </li> </ol>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#troubleshooting-development-issues","level":2,"title":"Troubleshooting Development Issues","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#build-failures","level":3,"title":"Build Failures","text":"<p>Problem: Compilation errors</p> <p>Solutions: - Run <code>shards update</code> - Clear cache: <code>rm -rf .crystal/</code> - Check Crystal version: <code>crystal --version</code></p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#test-failures","level":3,"title":"Test Failures","text":"<p>Problem: Tests failing locally</p> <p>Solutions: - Ensure server is not using test ports - Check for leftover processes: <code>lsof -i :3000</code> - Run with <code>--error-trace</code> for details</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#inspector-not-working","level":3,"title":"Inspector Not Working","text":"<p>Problem: Inspector UI not loading</p> <p>Solutions: - Ensure <code>npm install</code> was run - Check Vite dev server is running - Verify WebSocket connection in browser DevTools</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#continuous-integration","level":2,"title":"Continuous Integration","text":"<p>Sellia uses GitHub Actions for CI:</p> <ul> <li>Runs tests on every push</li> <li>Tests against multiple Crystal versions</li> <li>Lints code</li> <li>Runs on Linux and macOS</li> </ul> <p>See <code>.github/workflows/</code> for CI configuration.</p>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#running-ci-locally","level":3,"title":"Running CI Locally","text":"<pre><code># Install act (run GitHub Actions locally)\nbrew install act  # macOS\n\n# Run CI\nact push\n</code></pre>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#code-style","level":3,"title":"Code Style","text":"<ul> <li>Follow Crystal style guide</li> <li>Use meaningful variable names</li> <li>Keep methods focused and small</li> <li>Add comments for complex logic</li> </ul>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#testing_1","level":3,"title":"Testing","text":"<ul> <li>Write tests for new features</li> <li>Maintain test coverage</li> <li>Test edge cases</li> <li>Use descriptive test names</li> </ul>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#git-workflow","level":3,"title":"Git Workflow","text":"<ul> <li>Create feature branches</li> <li>Write meaningful commit messages</li> <li>Keep PRs focused</li> <li>Update documentation</li> </ul>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Project Structure - Understanding the codebase</li> <li>Architecture - System design</li> <li>Contributing - Contribution guidelines</li> </ul>","path":["Developer","Development"],"tags":[]},{"location":"developer/development/building/","level":1,"title":"Building from Source","text":"<p>This guide covers building Sellia binaries from source code, including both debug and release builds.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#quick-build","level":2,"title":"Quick Build","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#prerequisites","level":3,"title":"Prerequisites","text":"<p>Ensure you have installed all prerequisites:</p> <ul> <li>Crystal &gt;= 1.10.0</li> <li>Node.js &gt;= 18</li> <li>Shards (included with Crystal)</li> <li>npm (included with Node.js)</li> </ul>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#build-steps","level":3,"title":"Build Steps","text":"<pre><code># Clone the repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Install Crystal dependencies\nshards install\n\n# Install inspector UI dependencies\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n\n# Build the binaries\nshards build\n</code></pre> <p>The built binaries will be in <code>./bin/</code>: - <code>sellia</code> - CLI client for creating tunnels - <code>sellia-server</code> - Tunnel server</p> <p>Note: If the <code>bin/</code> directory doesn't exist yet, <code>shards build</code> will create it automatically.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#build-types","level":2,"title":"Build Types","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#debug-build","level":3,"title":"Debug Build","text":"<p>Debug builds include debugging symbols and no optimizations. Useful for development.</p> <pre><code>shards build\n</code></pre> <p>Characteristics: - Faster compilation - Larger binary size - Includes debug symbols - No optimization passes - Suitable for development and testing</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#release-build","level":3,"title":"Release Build","text":"<p>Release builds are optimized for performance and size. Use these for production deployments.</p> <pre><code>shards build --release\n</code></pre> <p>Characteristics: - Slower compilation - Smaller binary size - No debug symbols - Full optimization (<code>--release</code> flag) - Suitable for production use</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#build-artifacts","level":2,"title":"Build Artifacts","text":"<p>After building, you'll find the following binaries in <code>./bin/</code>:</p> Binary Description <code>sellia</code> CLI client that creates tunnels to local services <code>sellia-server</code> Server that accepts tunnel connections and routes traffic","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#building-individual-components","level":2,"title":"Building Individual Components","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#cli-client-only","level":3,"title":"CLI Client Only","text":"<p>To build only the CLI client:</p> <pre><code>crystal build src/cli/main.cr -o bin/sellia\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#server-only","level":3,"title":"Server Only","text":"<p>To build only the server:</p> <pre><code>crystal build src/server/main.cr -o bin/sellia-server\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#inspector-ui-development","level":3,"title":"Inspector UI (Development)","text":"<p>The inspector UI is a React application that runs during development via Vite's dev server:</p> <pre><code>cd web\nnpm run dev\n</code></pre> <p>For production, the UI is embedded into the Crystal binary during the build process automatically.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#inspector-ui-assets","level":2,"title":"Inspector UI Assets","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#development-mode","level":3,"title":"Development Mode","text":"<p>During development, the CLI proxies to Vite's dev server:</p> <pre><code>cd web\nnpm run dev\n# Runs on http://localhost:5173\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#production-assets","level":3,"title":"Production Assets","text":"<p>For release builds, the UI must be built first:</p> <pre><code>cd web\nnpm run build\n# Outputs to web/dist/\n</code></pre> <p>The Crystal build process automatically embeds these assets. When built assets are present at <code>web/dist/</code>, they are compiled into the binary. Otherwise, the CLI proxies to the Vite dev server.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#asset-embedding","level":3,"title":"Asset Embedding","text":"<p>The Crystal code checks for the presence of built assets:</p> <pre><code># If web/dist/ exists, assets are embedded\n# Otherwise, proxy to Vite dev server at localhost:5173\n</code></pre> <p>This allows for rapid development without rebuilding the Crystal binary.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#build-options","level":2,"title":"Build Options","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#static-linking-optional","level":3,"title":"Static Linking (Optional)","text":"<p>For creating fully self-contained binaries:</p> <pre><code>crystal build src/cli.cr --static -o bin/sellia-static\n</code></pre> <p>Note: Static linking may require additional system libraries.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#custom-output-path","level":3,"title":"Custom Output Path","text":"<p>To specify a custom output directory:</p> <pre><code>crystal build src/cli/main.cr -o /custom/path/sellia\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#parallel-compilation","level":3,"title":"Parallel Compilation","text":"<p>Crystal compiles modules in parallel by default. To limit parallelism:</p> <pre><code>crystal build src/cli.cr --threads 4\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#build-verification","level":2,"title":"Build Verification","text":"<p>After building, verify the binaries work correctly:</p> <pre><code># Check CLI version\n./bin/sellia version\n\n# Check server help\n./bin/sellia-server --help\n\n# Run tests\ncrystal spec\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#cross-compilation","level":2,"title":"Cross-Compilation","text":"<p>Cross-compiling Crystal binaries is possible but challenging due to the need for target-specific libraries.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#linux-to-macos","level":3,"title":"Linux to macOS","text":"<p>Not recommended due to library differences.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#macos-to-linux","level":3,"title":"macOS to Linux","text":"<p>Possible with Docker or a Linux VM:</p> <pre><code># Using Docker\ndocker run --rm -v $(pwd):/workspace -w /workspace crystallang/crystal:latest shards build --release\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#using-github-actions","level":3,"title":"Using GitHub Actions","text":"<p>The project uses GitHub Actions for automated builds across multiple platforms. See <code>.github/workflows/</code> for build configurations.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#clean-build","level":2,"title":"Clean Build","text":"<p>To start fresh and remove all build artifacts:</p> <pre><code># Remove build artifacts\nrm -rf bin/\n\n# Remove Crystal dependencies\nrm -rf lib/\nrm shard.lock\n\n# Remove Node.js dependencies\ncd web &amp;&amp; rm -rf node_modules/ package-lock.json\n\n# Reinstall and rebuild\nshards install\ncd web &amp;&amp; npm install &amp;&amp; cd ..\nshards build --release\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#build-troubleshooting","level":2,"title":"Build Troubleshooting","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#compilation-errors","level":3,"title":"Compilation Errors","text":"<p>Issue: Type errors or missing dependencies</p> <p>Solution: <pre><code># Update dependencies\nshards update\n\n# Check for missing dependencies\nshards check\n\n# Verify formatting\ncrystal tool format --check\n</code></pre></p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#missing-openssl","level":3,"title":"Missing OpenSSL","text":"<p>Issue: Error about OpenSSL not found</p> <p>Solution: <pre><code># macOS (Homebrew)\nbrew install openssl\n\n# Ubuntu/Debian\nsudo apt-get install libssl-dev\n</code></pre></p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#inspector-ui-build-failures","level":3,"title":"Inspector UI Build Failures","text":"<p>Issue: npm install or npm run build fails</p> <p>Solution: <pre><code>cd web\nrm -rf node_modules package-lock.json\nnpm cache clean --force\nnpm install\n</code></pre></p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#permission-denied-on-binary","level":3,"title":"Permission Denied on Binary","text":"<p>Issue: Cannot execute <code>./bin/sellia</code></p> <p>Solution: <pre><code>chmod +x bin/sellia bin/sellia-server\n</code></pre></p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#optimizing-build-performance","level":2,"title":"Optimizing Build Performance","text":"","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#use-project-specific-compilation-flags","level":3,"title":"Use Project-Specific Compilation Flags","text":"<p>Create a <code>.crystal</code> config file in your home directory:</p> <pre><code># ~/.crystal\ncrystal_path: /usr/lib/crystal\n</code></pre>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#cache-dependencies","level":3,"title":"Cache Dependencies","text":"<p>Dependencies are cached in <code>lib/</code> after the first <code>shards install</code>. Subsequent builds are faster.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#incremental-compilation","level":3,"title":"Incremental Compilation","text":"<p>Crystal only recompiles changed files, making rebuilds fast during development.</p>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#continuous-integration-builds","level":2,"title":"Continuous Integration Builds","text":"<p>The project includes CI/CD configuration for automated builds:</p> <ul> <li>GitHub Actions: <code>.github/workflows/ci.yml</code></li> <li>Platforms: Linux, macOS</li> <li>Build types: Debug and release</li> <li>Artifact storage: Build artifacts are stored as CI artifacts</li> </ul>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/building/#next-steps","level":2,"title":"Next Steps","text":"<p>After building Sellia:</p> <ul> <li>Run Locally - Test your build</li> <li>Run Tests - Verify everything works</li> <li>Development Workflow - Start contributing</li> </ul>","path":["Developer","Development","Building from Source"],"tags":[]},{"location":"developer/development/debugging/","level":1,"title":"Debugging","text":"<p>This guide covers debugging techniques and tools for Sellia development.</p>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Debug Logging</li> <li>Crystal Debugger</li> <li>Common Debugging Scenarios</li> <li>Debugging Tools</li> <li>Performance Profiling</li> <li>Network Debugging</li> </ul>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debug-logging","level":2,"title":"Debug Logging","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#enable-debug-output","level":3,"title":"Enable Debug Output","text":"<p>Set the <code>LOG_LEVEL</code> environment variable:</p> <pre><code># Server\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# CLI\nLOG_LEVEL=debug ./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre> <p>Note: The <code>LOG_LEVEL</code> environment variable accepts: <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>, <code>fatal</code>. Default is <code>warn</code>.</p>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debug-output-levels","level":3,"title":"Debug Output Levels","text":"<p>Debug logs include: - Connection lifecycle events - Message serialization/deserialization - Request/response details - Error stack traces - Performance metrics</p> <p>Example debug output: <pre><code>[DEBUG] [sellia.server.ws_gateway] Client connecting: ws://127.0.0.1:45678\n[DEBUG] [sellia.server.ws_gateway] Received message: RegisterTunnel(subdomain: \"myapp\")\n[DEBUG] [sellia.server.tunnel_registry] Registered tunnel: myapp -&gt; client-123\n[DEBUG] [sellia.server.http_ingress] Incoming request: GET /api/test\n[DEBUG] [sellia.server.http_ingress] Forwarding to client: client-123\n[DEBUG] [sellia.server.http_ingress] Response received: 200 OK (45ms)\n</code></pre></p>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#selective-debugging","level":3,"title":"Selective Debugging","text":"<p>Modify the code temporarily to add specific debug output using the Log module:</p> <pre><code># In src/server/http_ingress.cr\nLog = ::Log.for(\"sellia.server.http_ingress\")\n\ndef handle_request(request)\n  # Temporary debug output\n  Log.debug { \"Request headers: #{request.headers.inspect}\" }\n  Log.debug { \"Request body size: #{request.body.size}\" }\n\n  # ... rest of code\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#crystal-debugger","level":2,"title":"Crystal Debugger","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#using-the-built-in-debugger","level":3,"title":"Using the Built-in Debugger","text":"<p>Crystal includes a command-line debugger:</p> <pre><code>require \"debug\"\n\ndef some_function(x : Int32)\n  y = x * 2\n  breakpoint  # Execution pauses here\n  y + 10\nend\n</code></pre> <p>Run with debugging enabled:</p> <pre><code>crystal build src/debug_me.cr --debug\n./debug_me\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugger-commands","level":3,"title":"Debugger Commands","text":"<p>When the debugger stops at a breakpoint: - <code>step</code> or <code>s</code>: Step to next line - <code>next</code> or <code>n</code>: Next line (step over function calls) - <code>continue</code> or <code>c</code>: Continue execution - <code>break &lt;file&gt;:&lt;line&gt;</code>: Set breakpoint - <code>break &lt;function&gt;</code>: Set breakpoint at function - <code>delete &lt;n&gt;</code>: Delete breakpoint n - <code>backtrace</code> or <code>bt</code>: Show stack trace - <code>locals</code>: Show local variables - <code>help</code>: Show all commands</p>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#example-debugging-session","level":3,"title":"Example Debugging Session","text":"<pre><code># src/server/tunnel_registry.cr\ndef register_tunnel(subdomain : String, client_id : String) : Tunnel\n  validate_subdomain(subdomain)\n  breakpoint  # Add this for debugging\n\n  if @tunnels.has_key?(subdomain)\n    raise TunnelExistsError.new(\"Subdomain #{subdomain} already registered\")\n  end\n\n  tunnel = Tunnel.new(subdomain, client_id)\n  @tunnels[subdomain] = tunnel\n  tunnel\nend\n</code></pre> <pre><code># Run with debugger\ncrystal build src/server/main.cr --debug -o bin/sellia-server-debug\n./bin/sellia-server-debug\n\n# When breakpoint hits:\n[1] breakpoint at src/server/tunnel_registry.cr:42\nstep\n[2] step at src/server/tunnel_registry.cr:43\nlocals\n  subdomain =&gt; \"myapp\"\n  client_id =&gt; \"client-123\"\ncontinue\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#common-debugging-scenarios","level":2,"title":"Common Debugging Scenarios","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugging-connection-issues","level":3,"title":"Debugging Connection Issues","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#scenario-tunnel-not-connecting","level":4,"title":"Scenario: Tunnel Not Connecting","text":"<pre><code># 1. Enable debug logging\nLOG_LEVEL=debug ./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# 2. Check server logs\n# Look for: \"Client connecting\" messages\n\n# 3. Verify WebSocket connection\n# Use websocat or similar tool:\nwebsocat ws://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#scenario-requests-not-reaching-tunnel","level":4,"title":"Scenario: Requests Not Reaching Tunnel","text":"<pre><code># 1. Verify tunnel is registered\nLOG_LEVEL=debug ./bin/sellia-server | grep \"Registered tunnel\"\n\n# 2. Check HTTP ingress logs\nLOG_LEVEL=debug ./bin/sellia-server 2&gt;&amp;1 | grep \"http_ingress\"\n\n# 3. Test direct connection to local service\ncurl http://localhost:8080\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugging-protocol-issues","level":3,"title":"Debugging Protocol Issues","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#scenario-message-serialization-failures","level":4,"title":"Scenario: Message Serialization Failures","text":"<pre><code># Add debug output in protocol handler\nLog = ::Log.for(\"sellia.protocol\")\n\ndef serialize_message(message : Message) : Bytes\n  Log.debug { \"Serializing: #{message.class}\" }\n  Log.debug { \"Message fields: #{message.inspect}\" }\n\n  MessagePack.pack(message)\nrescue ex : Exception\n  Log.error { \"Serialization failed: #{ex.message}\" }\n  Log.error { \"Message: #{message.inspect}\" }\n  raise ex\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugging-memory-issues","level":3,"title":"Debugging Memory Issues","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#check-for-memory-leaks","level":4,"title":"Check for Memory Leaks","text":"<pre><code># Run with memory tracking\ncrystal spec --time\n\n# Use external tools\nvalgrind --leak-check=full ./bin/sellia-server\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#monitor-memory-usage","level":4,"title":"Monitor Memory Usage","text":"<pre><code># Add memory monitoring\nrequire \"system\"\n\ndef print_memory_usage\n  usage = System.memory_usage\n  puts \"[DEBUG] Memory: #{usage.used_mb}MB used / #{usage.total_mb}MB total\"\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugging-tools","level":2,"title":"Debugging Tools","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#logging-tools","level":3,"title":"Logging Tools","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#custom-logger","level":4,"title":"Custom Logger","text":"<p>Create a custom logger for specific components:</p> <pre><code># src/utils/logger.cr\nclass DebugLogger\n  INSTANCE = new\n\n  def log(component : String, message : String)\n    puts \"[DEBUG] [#{component}] #{message}\"\n  end\n\n  def log_request(request : HTTP::Request)\n    log(\"HTTP\", \"#{request.method} #{request.path}\")\n    request.headers.each do |key, values|\n      log(\"HTTP\", \"  #{key}: #{values.join(\", \")}\")\n    end\n  end\nend\n\n# Usage\nDebugLogger::INSTANCE.log(\"Tunnel\", \"Connection established\")\nDebugLogger::INSTANCE.log_request(request)\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#network-debugging-tools","level":3,"title":"Network Debugging Tools","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#curl-with-verbose-output","level":4,"title":"curl with Verbose Output","text":"<pre><code>curl -v http://myapp.127.0.0.1.nip.io:3000/api/test\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#websocat-for-websocket-testing","level":4,"title":"websocat for WebSocket Testing","text":"<pre><code># Install websocat\ncargo install websocat\n\n# Connect to WebSocket\nwebsocat ws://127.0.0.1:3000\n\n# Send MessagePack message\necho -e '\\x81\\xa7message\\xahello' | websocat ws://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#tcpdump-for-packet-inspection","level":4,"title":"tcpdump for Packet Inspection","text":"<pre><code># Capture WebSocket traffic\nsudo tcpdump -i lo -s 0 -w capture.pcap port 3000\n\n# Analyze with Wireshark\nwireshark capture.pcap\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugging-inspector-ui","level":3,"title":"Debugging Inspector UI","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#browser-devtools","level":4,"title":"Browser DevTools","text":"<ol> <li>Open browser DevTools (F12)</li> <li>Go to Network tab</li> <li>Filter by WS (WebSocket)</li> <li>Inspect WebSocket frames</li> <li>View MessagePack payloads</li> </ol>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#react-devtools","level":4,"title":"React DevTools","text":"<pre><code>cd web\nnpm install --save-dev @types/react\n\n# Add to dev server\nnpm run dev\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#performance-profiling","level":2,"title":"Performance Profiling","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#crystal-built-in-profiling","level":3,"title":"Crystal Built-in Profiling","text":"<pre><code># Run with timing\ncrystal spec --time\n\n# Run with profiling\ncrystal build src/server.cr --release\ntime ./bin/sellia-server --port 3000\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#benchmark-critical-paths","level":3,"title":"Benchmark Critical Paths","text":"<pre><code>require \"benchmark\"\n\n# Benchmark message serialization\nmessage = create_test_message\n\nBenchmark.bm do |x|\n  x.report(\"serialize:\") do\n    10000.times { message.serialize }\n  end\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#profile-memory-allocations","level":3,"title":"Profile Memory Allocations","text":"<pre><code># Track allocations\nGC.stats\n\n# Before operation\nbefore = GC.stats.heap_size\n\n# ... perform operation ...\n\n# After operation\nafter = GC.stats.heap_size\nputs \"[DEBUG] Allocated: #{after - before} bytes\"\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#network-debugging","level":2,"title":"Network Debugging","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#test-websocket-connection","level":3,"title":"Test WebSocket Connection","text":"<pre><code># Using websocat\nwebsocat -v ws://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#inspect-http-headers","level":3,"title":"Inspect HTTP Headers","text":"<pre><code># View full headers\ncurl -v http://myapp.127.0.0.1.nip.io:3000/test\n\n# View specific headers\ncurl -I http://myapp.127.0.0.1.nip.io:3000/test\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#monitor-tcp-connections","level":3,"title":"Monitor TCP Connections","text":"<pre><code># List all connections\nlsof -i :3000\n\n# Monitor connections in real-time\nwatch 'lsof -i :3000'\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#debugging-tips","level":2,"title":"Debugging Tips","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#1-isolate-the-problem","level":3,"title":"1. Isolate the Problem","text":"<ul> <li>Reproduce the issue consistently</li> <li>Simplify the scenario</li> <li>Test components in isolation</li> </ul>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#2-add-strategic-logging","level":3,"title":"2. Add Strategic Logging","text":"<pre><code># Log entry/exit of functions\ndef process_request(request)\n  log_debug \"Entering process_request\"\n\n  # ... code ...\n\n  log_debug \"Exiting process_request\"\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#3-use-assertions","level":3,"title":"3. Use Assertions","text":"<pre><code># Add temporary assertions\ndef validate_subdomain(subdomain : String)\n  # Temporary: Catch invalid input early\n  raise \"Invalid subdomain: #{subdomain}\" if subdomain.empty?\n\n  # ... normal validation ...\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#4-binary-search-for-bugs","level":3,"title":"4. Binary Search for Bugs","text":"<p>If you're not sure where the bug is: 1. Add logging at multiple points 2. Narrow down the location 3. Focus on that area</p>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#5-check-external-dependencies","level":3,"title":"5. Check External Dependencies","text":"<pre><code># Verify external service is working\nbegin\n  response = HTTP::Client.get(\"http://localhost:8080\")\n  log_debug \"External service reachable: #{response.status_code}\"\nrescue ex : Exception\n  log_debug \"External service error: #{ex.message}\"\nend\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#common-issues-and-solutions","level":2,"title":"Common Issues and Solutions","text":"","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#issue-address-already-in-use","level":3,"title":"Issue: \"Address already in use\"","text":"<pre><code># Find process using the port\nlsof -i :3000\n\n# Kill the process\nkill -9 &lt;PID&gt;\n\n# Or use a different port\n./bin/sellia-server --port 3001\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#issue-connection-refused","level":3,"title":"Issue: \"Connection refused\"","text":"<pre><code># Verify server is running\nlsof -i :3000\n\n# Check firewall\nsudo ufw status  # Linux\n# System Preferences &gt; Security &gt; Firewall  # macOS\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#issue-websocket-handshake-fails","level":3,"title":"Issue: WebSocket handshake fails","text":"<pre><code># Check server logs for errors\nLOG_LEVEL=debug ./bin/sellia-server\n\n# Verify WebSocket upgrade headers\ncurl -v -H \"Upgrade: websocket\" \\\n     -H \"Connection: Upgrade\" \\\n     -H \"Sec-WebSocket-Key: test\" \\\n     http://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#issue-subdomain-not-resolving","level":3,"title":"Issue: Subdomain not resolving","text":"<pre><code># Test DNS resolution\nnslookup myapp.127.0.0.1.nip.io\n\n# For nip.io, should resolve to 127.0.0.1\n# If not, try using localhost as domain\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#remote-debugging","level":2,"title":"Remote Debugging","text":"<p>For production issues:</p>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#enable-remote-debugging-caution","level":3,"title":"Enable Remote Debugging (Caution)","text":"<pre><code># Only do this in a trusted environment\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain example.com\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#collect-debug-information","level":3,"title":"Collect Debug Information","text":"<pre><code># Server info\n./bin/sellia-server --version\n\n# System info\nuname -a\ncrystal --version\nnode --version\n\n# Network info\nnetstat -an | grep 3000\n</code></pre>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#getting-help","level":2,"title":"Getting Help","text":"<p>When unable to resolve an issue:</p> <ol> <li>Check existing GitHub Issues</li> <li>Enable debug logging and capture output</li> <li>Create a minimal reproduction case</li> <li>File a new issue with:</li> <li>Clear description of the problem</li> <li>Steps to reproduce</li> <li>Debug logs</li> <li>Environment details (OS, Crystal version, etc.)</li> </ol>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/debugging/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Testing - Write tests to prevent bugs</li> <li>Contributing Workflow - Submit fixes</li> <li>Project Structure - Understand the codebase</li> </ul>","path":["Developer","Development","Debugging"],"tags":[]},{"location":"developer/development/prerequisites/","level":1,"title":"Prerequisites","text":"<p>This document outlines the requirements and dependencies needed to develop and build Sellia from source.</p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#core-requirements","level":2,"title":"Core Requirements","text":"","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#crystal-language","level":3,"title":"Crystal Language","text":"<p>Sellia is written in Crystal and requires Crystal &gt;= 1.10.0. (Tested with Crystal 1.18.2)</p> <p>Installation:</p> <p>Visit crystal-lang.org/install for platform-specific instructions.</p> <p>Common installation methods:</p> <ul> <li> <p>macOS (Homebrew): <pre><code>brew install crystal\n</code></pre></p> </li> <li> <p>Ubuntu/Debian: <pre><code>curl -fsSL https://crystal-lang.org/install.sh | sudo bash\n</code></pre></p> </li> <li> <p>Arch Linux: <pre><code>sudo pacman -S crystal\n</code></pre></p> </li> </ul> <p>Verification:</p> <pre><code>crystal --version\n# Should output: Crystal 1.10.0 or higher\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#nodejs","level":3,"title":"Node.js","text":"<p>Node.js is required for the inspector UI (React application built with Vite).</p> <p>Required version: Node.js &gt;= 18 (Tested with Node.js 20+)</p> <p>Installation:</p> <ul> <li> <p>macOS (Homebrew): <pre><code>brew install node\n</code></pre></p> </li> <li> <p>Ubuntu/Debian: <pre><code>curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -\nsudo apt-get install -y nodejs\n</code></pre></p> </li> <li> <p>Using nvm (recommended): <pre><code>nvm install --lts\nnvm use lts\n</code></pre></p> </li> </ul> <p>Verification:</p> <pre><code>node --version\n# Should output: v18.0.0 or higher\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#package-managers","level":3,"title":"Package Managers","text":"","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#shards-crystal-dependencies","level":4,"title":"Shards (Crystal Dependencies)","text":"<p>Shards is included with Crystal and manages Crystal library dependencies.</p> <p>Verification:</p> <pre><code>shards --version\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#npm-nodejs-dependencies","level":4,"title":"npm (Node.js Dependencies)","text":"<p>npm is included with Node.js and manages the inspector UI dependencies.</p> <p>Verification:</p> <pre><code>npm --version\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#git","level":3,"title":"Git","text":"<p>Git is required for cloning the repository and managing version control.</p> <p>Installation:</p> <ul> <li>macOS: Included with Xcode Command Line Tools: <code>xcode-select --install</code></li> <li>Ubuntu/Debian: <code>sudo apt-get install git</code></li> <li>Windows: git-scm.com</li> </ul> <p>Verification:</p> <pre><code>git --version\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#optional-dependencies","level":2,"title":"Optional Dependencies","text":"","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#openssl-for-ssltls-support","level":3,"title":"OpenSSL (for SSL/TLS support)","text":"<p>OpenSSL development headers are required for SSL support in Crystal.</p> <p>macOS: Usually included with the system.</p> <p>Ubuntu/Debian: <pre><code>sudo apt-get install libssl-dev\n</code></pre></p> <p>Arch Linux: <pre><code>sudo pacman -S openssl\n</code></pre></p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#sqlite-development-libraries","level":3,"title":"SQLite Development Libraries","text":"<p>Required for SQLite storage backend (API keys, reserved subdomains).</p> <p>Ubuntu/Debian: <pre><code>sudo apt-get install sqlite3 libsqlite3-dev\n</code></pre></p> <p>macOS: Usually included with the system.</p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#docker-for-containerized-development","level":3,"title":"Docker (for containerized development)","text":"<p>Optional, for testing Docker deployments locally.</p> <p>Installation: docker.com</p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#development-environment-setup","level":2,"title":"Development Environment Setup","text":"","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#1-clone-the-repository","level":3,"title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#2-add-upstream-remote","level":3,"title":"2. Add Upstream Remote","text":"<p>If you're planning to contribute, add the upstream repository:</p> <pre><code>git remote add upstream https://github.com/watzon/sellia.git\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#3-install-dependencies","level":3,"title":"3. Install Dependencies","text":"<pre><code># Install Crystal dependencies\nshards install\n\n# Install inspector UI dependencies\ncd web &amp;&amp; npm install &amp;&amp; cd ..\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#4-build-the-project","level":3,"title":"4. Build the Project","text":"<pre><code># Build debug binaries\nshards build\n\n# Or build release binaries (optimized)\nshards build --release\n</code></pre> <p>Binaries will be output to <code>./bin/</code>: - <code>sellia</code> - CLI client - <code>sellia-server</code> - Tunnel server</p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#5-run-tests","level":3,"title":"5. Run Tests","text":"<p>Verify your environment is correctly set up:</p> <pre><code>crystal spec\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#platform-specific-notes","level":2,"title":"Platform-Specific Notes","text":"","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#macos","level":3,"title":"macOS","text":"<ul> <li>Ensure you have Xcode Command Line Tools installed: <code>xcode-select --install</code></li> <li>Homebrew is the recommended package manager</li> </ul>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#linux","level":3,"title":"Linux","text":"<ul> <li>Ensure you have build essentials: <code>sudo apt-get install build-essential</code> (Debian/Ubuntu)</li> <li>Some distributions may require additional development headers for Crystal</li> </ul>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#windows","level":3,"title":"Windows","text":"<p>Sellia is primarily developed and tested on Unix-like systems. Windows support via WSL2 is recommended.</p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#version-compatibility","level":2,"title":"Version Compatibility","text":"Component Minimum Version Tested Version Crystal 1.10.0 1.18.2 Node.js 18 20+ npm 9 Latest bundled with Node.js","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#crystal-compilation-errors","level":3,"title":"Crystal compilation errors","text":"<p>Ensure you have the latest Crystal version and all development headers installed:</p> <pre><code>crystal --version\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#nodejs-module-build-failures","level":3,"title":"Node.js module build failures","text":"<p>Try clearing the npm cache and reinstalling:</p> <pre><code>cd web\nrm -rf node_modules package-lock.json\nnpm cache clean --force\nnpm install\n</code></pre>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#shards-installation-failures","level":3,"title":"Shards installation failures","text":"<p>If <code>shards install</code> fails, try:</p> <pre><code>shards update\n</code></pre> <p>This updates <code>shard.lock</code> to the latest compatible versions.</p>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/prerequisites/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Building from Source</li> <li>Running Locally</li> <li>Testing</li> </ul>","path":["Developer","Development","Prerequisites"],"tags":[]},{"location":"developer/development/running-locally/","level":1,"title":"Running Locally","text":"<p>This guide covers running Sellia locally for development and testing purposes.</p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#quick-start","level":2,"title":"Quick Start","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#prerequisites","level":3,"title":"Prerequisites","text":"<ul> <li>Build Sellia from source or have binaries available</li> <li>Three terminal windows (or use a terminal multiplexer like tmux)</li> </ul>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#basic-local-setup","level":3,"title":"Basic Local Setup","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#terminal-1-start-the-server","level":4,"title":"Terminal 1: Start the Server","text":"<pre><code>./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n</code></pre> <p>What this does: - Starts the tunnel server on port 3000 - Uses <code>127.0.0.1.nip.io</code> as the base domain (resolves to 127.0.0.1) - Enables local testing without a real domain</p> <p>Expected output: <pre><code>[Sellia Server] Starting server on 0.0.0.0:3000\n[Sellia Server] Domain: 127.0.0.1.nip.io\n</code></pre></p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#terminal-2-start-a-tunnel","level":4,"title":"Terminal 2: Start a Tunnel","text":"<p>First, create a simple local server to tunnel:</p> <pre><code># Example: Python HTTP server\npython3 -m http.server 8080\n\n# Or: Node.js http-server\nnpx http-server -p 8080\n\n# Or: Any other service on port 8080\n</code></pre> <p>Then create the tunnel in a new terminal:</p> <pre><code>./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre> <p>Expected output: <pre><code>Sellia v0.4.0\nForwarding to localhost:8080\n\nPublic URL: http://random-string.127.0.0.1.nip.io:3000 -&gt; localhost:8080\n\nPress Ctrl+C to stop\n</code></pre></p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#terminal-3-start-the-inspector-ui-optional","level":4,"title":"Terminal 3: Start the Inspector UI (Optional)","text":"<p>For inspector UI development:</p> <pre><code>cd web\nnpm run dev\n</code></pre> <p>The inspector will be available at <code>http://localhost:4040</code> automatically when the tunnel is running.</p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#test-your-tunnel","level":3,"title":"Test Your Tunnel","text":"<pre><code># Access your local service through the tunnel\ncurl http://random-string.127.0.0.1.nip.io:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#full-development-environment","level":3,"title":"Full Development Environment","text":"<p>For active development, run all three components:</p> <pre><code># Terminal 1: Server with debug logging\nLOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Tunnel with inspector enabled\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --open\n\n# Terminal 3: Inspector UI dev server (for UI development)\ncd web &amp;&amp; npm run dev\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#using-configuration-files","level":3,"title":"Using Configuration Files","text":"<p>Create <code>sellia.yml</code> for persistent configuration:</p> <pre><code>server: http://127.0.0.1:3000\n\ntunnels:\n  webapp:\n    port: 3000\n    subdomain: myapp\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre> <p>Start all tunnels:</p> <pre><code>./bin/sellia start\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#development-features","level":2,"title":"Development Features","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#debug-logging","level":3,"title":"Debug Logging","text":"<p>Enable verbose logging for debugging:</p> <pre><code>LOG_LEVEL=debug ./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n</code></pre> <p>Or for the CLI:</p> <pre><code>LOG_LEVEL=debug ./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Disable rate limiting for easier testing (not recommended for production):</p> <pre><code>./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io --no-rate-limit\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#authentication-testing","level":3,"title":"Authentication Testing","text":"<p>Test with API key authentication:</p> <pre><code># Terminal 1: Server with auth required\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io --require-auth --master-key test-key-123\n\n# Terminal 2: Tunnel with API key\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --api-key test-key-123\n</code></pre> <p>Note: You can also use environment variables for authentication: <pre><code># Set API key via environment\nexport SELLIA_API_KEY=test-key-123\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre></p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<p>Test reserved subdomain persistence:</p> <pre><code># Server with SQLite storage at custom path\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io --db-path ./sellia.db\n\n# Try to reserve a subdomain\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain myapp\n</code></pre> <p>Restart the server and try again - the subdomain should still be reserved.</p> <p>Note: By default, the database is stored at <code>~/.sellia/sellia.db</code>. Use <code>--db-path</code> to specify a custom location.</p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#testing-scenarios","level":2,"title":"Testing Scenarios","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#test-1-basic-http-tunnel","level":3,"title":"Test 1: Basic HTTP Tunnel","text":"<pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Local service\npython3 -m http.server 8080\n\n# Terminal 3: Tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# Test\ncurl http://&lt;assigned-subdomain&gt;.127.0.0.1.nip.io:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#test-2-websocket-tunnel","level":3,"title":"Test 2: WebSocket Tunnel","text":"<pre><code># Create a simple WebSocket server\n# Save as ws_server.rb:\nrequire 'websocket/server'\n# (Or use any WebSocket server)\n\n# Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: WebSocket server on port 8080\nruby ws_server.rb\n\n# Terminal 3: Tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# Test with websocat or a browser\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#test-3-basic-auth-tunnel","level":3,"title":"Test 3: Basic Auth Tunnel","text":"<pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Protected tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --auth user:password\n\n# Test without auth (should fail)\ncurl http://&lt;assigned-subdomain&gt;.127.0.0.1.nip.io:3000\n\n# Test with auth (should succeed)\ncurl -u user:password http://&lt;assigned-subdomain&gt;.127.0.0.1.nip.io:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#test-4-multiple-tunnels","level":3,"title":"Test 4: Multiple Tunnels","text":"<pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: Tunnel 1\n./bin/sellia http 3000 --server http://127.0.0.1:3000 --subdomain app1\n\n# Terminal 3: Tunnel 2\n./bin/sellia http 8080 --server http://127.0.0.1:3000 --subdomain app2\n\n# Test both\ncurl http://app1.127.0.0.1.nip.io:3000\ncurl http://app2.127.0.0.1.nip.io:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#inspector-ui-development","level":2,"title":"Inspector UI Development","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#running-in-dev-mode","level":3,"title":"Running in Dev Mode","text":"<p>The inspector UI runs via Vite's dev server during development:</p> <pre><code>cd web\nnpm run dev\n# Available at http://localhost:5173\n</code></pre> <p>When the Crystal binary doesn't find embedded assets at <code>web/dist/</code>, it automatically proxies to the Vite dev server.</p>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#building-production-assets","level":3,"title":"Building Production Assets","text":"<p>When ready to test with embedded assets:</p> <pre><code>cd web\nnpm run build\n\n# The Crystal binary will now use embedded assets\n# instead of proxying to Vite\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#inspector-features","level":3,"title":"Inspector Features","text":"<ul> <li>Live Request Stream: See requests in real-time</li> <li>Request Details: View headers, body, timing</li> <li>Response Details: View response status, headers, body</li> <li>Copy as cURL: Copy any request as a cURL command</li> <li>Clear History: Clear the inspector history</li> <li>Filter: Filter requests by various criteria</li> </ul>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#common-development-tasks","level":2,"title":"Common Development Tasks","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#auto-restart-on-file-changes","level":3,"title":"Auto-Restart on File Changes","text":"<p>For server development:</p> <pre><code># Install nodemon (or similar)\nnpm install -g nodemon\n\n# Use nodemon to restart the server on changes\nnodemon --exec ./bin/sellia-server -- --port 3000 --domain 127.0.0.1.nip.io\n</code></pre> <p>For CLI development, you'll need to restart the CLI manually after rebuilding:</p> <pre><code># Terminal 1: Server\n./bin/sellia-server --port 3000 --domain 127.0.0.1.nip.io\n\n# Terminal 2: After code changes\nshards build\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#testing-protocol-messages","level":3,"title":"Testing Protocol Messages","text":"<p>For testing protocol message serialization:</p> <pre><code># Run protocol tests\ncrystal spec spec/core/protocol/\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#testing-connection-scenarios","level":3,"title":"Testing Connection Scenarios","text":"<pre><code># Test reconnection behavior\n# 1. Start tunnel\n./bin/sellia http 8080 --server http://127.0.0.1:3000\n\n# 2. Kill server and restart\n# 3. Observe automatic reconnection\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#server-variables","level":3,"title":"Server Variables","text":"Variable Description Default <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains <code>localhost</code> <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key (none) <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code> <code>SELLIA_DISABLE_LANDING</code> Disable landing page <code>false</code> <code>SELLIA_DB_PATH</code> SQLite database path <code>~/.sellia/sellia.db</code> <code>SELLIA_NO_DB</code> Disable database <code>false</code> <code>LOG_LEVEL</code> Minimum log level <code>warn</code>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#cli-variables","level":3,"title":"CLI Variables","text":"Variable Description Default <code>SELLIA_SERVER</code> Tunnel server URL <code>http://localhost:3000</code> <code>SELLIA_API_KEY</code> API key for authentication (none) <code>LOG_LEVEL</code> Minimum log level <code>warn</code>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<pre><code># Find process using port 3000\nlsof -i :3000\n\n# Kill the process\nkill -9 &lt;PID&gt;\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#connection-refused","level":3,"title":"Connection Refused","text":"<p>Ensure the server is running and accessible:</p> <pre><code># Check if server is listening\nlsof -i :3000\n\n# Test server health\ncurl http://localhost:3000/health\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#subdomain-not-resolving","level":3,"title":"Subdomain Not Resolving","text":"<p>When using <code>127.0.0.1.nip.io</code>:</p> <pre><code># Test DNS resolution\nnslookup test.127.0.0.1.nip.io\n# Should resolve to 127.0.0.1\n</code></pre>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#tunnel-not-working","level":3,"title":"Tunnel Not Working","text":"<ol> <li>Check server logs for errors</li> <li>Verify the tunnel is registered: <code>LOG_LEVEL=debug ./bin/sellia http 8080</code></li> <li>Check firewall settings</li> <li>Ensure local service is running: <code>curl http://localhost:8080</code></li> </ol>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/running-locally/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Running Tests - Verify your changes</li> <li>Debugging - Debug techniques</li> <li>Contributing Workflow - Submit your changes</li> </ul>","path":["Developer","Development","Running Locally"],"tags":[]},{"location":"developer/development/testing/","level":1,"title":"Testing","text":"<p>This guide covers running and writing tests for Sellia, including the test framework, test structure, and best practices.</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#running-tests","level":2,"title":"Running Tests","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#run-all-tests","level":3,"title":"Run All Tests","text":"<pre><code>crystal spec\n</code></pre> <p>This runs all tests in the <code>spec/</code> directory.</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#run-specific-test-file","level":3,"title":"Run Specific Test File","text":"<pre><code>crystal spec spec/server/tunnel_registry_spec.cr\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#run-with-verbose-output","level":3,"title":"Run with Verbose Output","text":"<pre><code>crystal spec --verbose\n</code></pre> <p>This shows detailed output for each test, including passing tests.</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#run-with-error-details","level":3,"title":"Run with Error Details","text":"<pre><code>crystal spec --error-trace\n</code></pre> <p>This shows full stack traces for errors, useful for debugging.</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#run-specific-test-by-name","level":3,"title":"Run Specific Test by Name","text":"<pre><code>crystal spec spec/core/protocol/message_spec.cr -e \"serialize\"\n</code></pre> <p>Runs only tests matching the pattern \"serialize\".</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#test-structure","level":2,"title":"Test Structure","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#directory-layout","level":3,"title":"Directory Layout","text":"<p>Tests mirror the source structure:</p> <pre><code>spec/\n├── core/                    # Tests for src/core/\n│   └── protocol/\n│       └── message_spec.cr # Protocol message tests\n├── server/                 # Tests for src/server/\n│   ├── admin_api_spec.cr\n│   ├── auth_provider_spec.cr\n│   ├── connection_manager_spec.cr\n│   ├── pending_request_spec.cr\n│   ├── rate_limiter_spec.cr\n│   ├── storage/\n│   │   └── repositories_spec.cr\n│   ├── tunnel_registry_spec.cr\n│   └── ws_gateway_spec.cr\n├── cli/                    # Tests for src/cli/\n│   ├── config_spec.cr\n│   ├── router_spec.cr\n│   └── routing_integration_spec.cr\n├── integration/            # Integration tests\n│   ├── tunnel_spec.cr\n│   └── websocket_spec.cr\n├── spec_helper.cr          # Test configuration\n└── sellia_spec.cr          # Basic tests\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#test-file-naming","level":3,"title":"Test File Naming","text":"<ul> <li>Test files use the <code>_spec.cr</code> suffix</li> <li>Test files mirror the source file structure</li> <li>Example: <code>src/server/tunnel_registry.cr</code> → <code>spec/server/tunnel_registry_spec.cr</code></li> </ul>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#writing-tests","level":2,"title":"Writing Tests","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#basic-test-structure","level":3,"title":"Basic Test Structure","text":"<pre><code>require \"spec\"\nrequire \"../../src/server/tunnel_registry\"\n\ndescribe Sellia::Server::TunnelRegistry do\n  describe \"#register_tunnel\" do\n    it \"registers a new tunnel\" do\n      registry = Sellia::Server::TunnelRegistry.new\n      tunnel = registry.register_tunnel(\"my-subdomain\", \"client-id\")\n\n      tunnel.subdomain.should eq(\"my-subdomain\")\n      tunnel.client_id.should eq(\"client-id\")\n    end\n  end\n\n  describe \"#get_tunnel\" do\n    it \"returns existing tunnel\" do\n      registry = Sellia::Server::TunnelRegistry.new\n      registry.register_tunnel(\"my-subdomain\", \"client-id\")\n\n      tunnel = registry.get_tunnel(\"my-subdomain\")\n      tunnel.should_not be_nil\n      tunnel.subdomain.should eq(\"my-subdomain\")\n    end\n\n    it \"returns nil for non-existent tunnel\" do\n      registry = Sellia::Server::TunnelRegistry.new\n      tunnel = registry.get_tunnel(\"non-existent\")\n\n      tunnel.should be_nil\n    end\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#test-context-and-setup","level":3,"title":"Test Context and Setup","text":"<p>Use <code>before_each</code> for setup. Note that <code>spec_helper.cr</code> automatically handles database setup and cleanup:</p> <pre><code>require \"spec\"\nrequire \"../../src/server/tunnel_registry\"\n\ndescribe Sellia::Server::TunnelRegistry do\n  # The spec_helper already sets up the test database\n  # and resets it before each test\n\n  it \"has no tunnels initially\" do\n    registry = Sellia::Server::TunnelRegistry.new\n    registry.tunnel_count.should eq(0)\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#testing-async-code","level":3,"title":"Testing Async Code","text":"<p>For testing WebSocket connections and async operations:</p> <pre><code>describe Sellia::Server::WSGateway do\n  it \"handles client connection\" do\n    gateway = Sellia::Server::WSGateway.new(\n      connection_manager: Sellia::Server::ConnectionManager.new,\n      tunnel_registry: Sellia::Server::TunnelRegistry.new,\n      auth_provider: Sellia::Server::AuthProvider.new(false, nil),\n      pending_requests: Sellia::Server::PendingRequestStore.new,\n      pending_websockets: Sellia::Server::PendingWebSocketStore.new,\n      rate_limiter: Sellia::Server::CompositeRateLimiter.new(enabled: false),\n      domain: \"localhost\",\n      port: 3000,\n      use_https: false\n    )\n\n    # Spawn server in background\n    spawn do\n      gateway.start(\"127.0.0.1\", 0) # Port 0 = random available port\n    end\n\n    # Wait for server to start\n    sleep 0.1\n\n    # Connect client and test\n    # ...\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#testing-error-cases","level":3,"title":"Testing Error Cases","text":"<pre><code>describe Sellia::Server::TunnelRegistry do\n  it \"raises error for duplicate subdomain\" do\n    registry = Sellia::Server::TunnelRegistry.new\n    registry.register_tunnel(\"my-subdomain\", \"client-1\")\n\n    expect_raises(Sellia::Server::TunnelExistsError) do\n      registry.register_tunnel(\"my-subdomain\", \"client-2\")\n    end\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#mocking-and-stubs","level":3,"title":"Mocking and Stubs","text":"<p>Crystal doesn't have built-in mocking, but you can use simple test doubles:</p> <pre><code># Test double for HTTP client\nclass FakeHTTPClient\n  property responses = Hash(String, String).new\n\n  def get(url : String) : String\n    responses[url] || \"default response\"\n  end\nend\n\ndescribe Sellia::Server::HTTPIngress do\n  it \"forwards request to tunnel\" do\n    fake_client = FakeHTTPClient.new\n    fake_client.responses[\"http://localhost:8080\"] = \"tunnel response\"\n\n    ingress = Sellia::Server::HTTPIngress.new(\n      tunnel_registry: Sellia::Server::TunnelRegistry.new,\n      connection_manager: Sellia::Server::ConnectionManager.new,\n      pending_requests: Sellia::Server::PendingRequestStore.new,\n      pending_websockets: Sellia::Server::PendingWebSocketStore.new,\n      rate_limiter: Sellia::Server::CompositeRateLimiter.new(enabled: false),\n      domain: \"localhost\",\n      landing_enabled: false\n    )\n\n    # Test forwarding logic\n    # ...\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#test-coverage","level":2,"title":"Test Coverage","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#currently-tested-areas","level":3,"title":"Currently Tested Areas","text":"<ul> <li>Protocol Message Serialization</li> <li>MessagePack encoding/decoding</li> <li>All message types (register, request, response, etc.)</li> <li> <p>Protocol version compatibility</p> </li> <li> <p>Tunnel Registry</p> </li> <li>Tunnel registration and removal</li> <li>Subdomain validation</li> <li>Duplicate detection</li> <li> <p>Client tracking</p> </li> <li> <p>Connection Management</p> </li> <li>WebSocket connection lifecycle</li> <li>Client registration/deregistration</li> <li> <p>Heartbeat/timeout handling</p> </li> <li> <p>HTTP Ingress</p> </li> <li>Request routing to tunnels</li> <li>Header forwarding</li> <li> <p>Response proxying</p> </li> <li> <p>End-to-End Tunnel Flow</p> </li> <li>Complete request/response cycle</li> <li>WebSocket communication</li> <li>Error handling</li> </ul>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#coverage-goals","level":3,"title":"Coverage Goals","text":"<p>Aim to maintain or improve test coverage with new changes:</p> <ul> <li>Core Protocol: 100% coverage (critical)</li> <li>Server Components: &gt;80% coverage</li> <li>CLI Components: &gt;70% coverage</li> <li>Edge Cases: Always test error paths</li> </ul>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#running-specific-test-suites","level":2,"title":"Running Specific Test Suites","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#protocol-tests","level":3,"title":"Protocol Tests","text":"<pre><code>crystal spec spec/core/protocol/\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#server-tests","level":3,"title":"Server Tests","text":"<pre><code>crystal spec spec/server/\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#cli-tests","level":3,"title":"CLI Tests","text":"<pre><code>crystal spec spec/cli/\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#integration-tests","level":3,"title":"Integration Tests","text":"<pre><code># End-to-end tunnel tests\ncrystal spec spec/integration/tunnel_spec.cr\n\n# WebSocket integration tests\ncrystal spec spec/integration/websocket_spec.cr\n</code></pre> <p>Integration tests typically: 1. Start a test server 2. Create a tunnel client 3. Make HTTP requests 4. Verify complete flow 5. Clean up resources</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#test-best-practices","level":2,"title":"Test Best Practices","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#1-descriptive-test-names","level":3,"title":"1. Descriptive Test Names","text":"<pre><code># Good\nit \"returns existing tunnel for valid subdomain\"\n\n# Bad\nit \"works\"\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#2-test-both-success-and-failure-cases","level":3,"title":"2. Test Both Success and Failure Cases","text":"<pre><code>describe \"#get_tunnel\" do\n  context \"with existing tunnel\" do\n    it \"returns the tunnel\"\n  end\n\n  context \"with non-existent tunnel\" do\n    it \"returns nil\"\n    it \"does not raise error\"\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#3-use-context-for-related-tests","level":3,"title":"3. Use Context for Related Tests","text":"<pre><code>describe \"subdomain validation\" do\n  context \"with valid subdomain\" do\n    it \"accepts alphanumeric characters\"\n    it \"accepts hyphens\"\n  end\n\n  context \"with invalid subdomain\" do\n    it \"rejects special characters\"\n    it \"rejects spaces\"\n    it \"rejects reserved names\"\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#4-keep-tests-focused","level":3,"title":"4. Keep Tests Focused","text":"<pre><code># Good: One behavior per test\nit \"returns tunnel for existing subdomain\"\n\n# Bad: Testing multiple things\nit \"registers, retrieves, and deletes tunnel\" # Split into 3 tests\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#5-use-matchers-appropriately","level":3,"title":"5. Use Matchers Appropriately","text":"<pre><code># Equality\ntunnel.subdomain.should eq(\"my-subdomain\")\n\n# Nil checks\ntunnel.should be_nil\ntunnel.should_not be_nil\n\n# Truthiness\nresult.should be_true\nresult.should be_false\n\n# Collections\ntunnels.size.should eq(5)\ntunnels.should contain(tunnel)\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#6-clean-up-resources","level":3,"title":"6. Clean Up Resources","text":"<pre><code>describe Sellia::Server::TunnelRegistry do\n  # Note: The spec_helper automatically handles database cleanup\n  # between tests, so you don't need to manually clear resources\n\n  it \"cleans up after itself\" do\n    registry = Sellia::Server::TunnelRegistry.new\n    # The database will be reset before the next test\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#performance-testing","level":2,"title":"Performance Testing","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#benchmarking","level":3,"title":"Benchmarking","text":"<p>For performance-critical code:</p> <pre><code>require \"benchmark\"\n\ndescribe \"message serialization\" do\n  it \"serializes messages quickly\" do\n    message = create_test_message\n\n    time = Benchmark.measure do\n      1000.times do\n        message.serialize\n      end\n    end\n\n    # Should serialize &lt; 1ms per message\n    (time.total * 1000).should be &lt; 1000\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#continuous-integration","level":2,"title":"Continuous Integration","text":"<p>Tests run automatically on: - Every pull request - Every push to main branch - Before release deployment</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#ci-configuration","level":3,"title":"CI Configuration","text":"<p>See <code>.github/workflows/ci.yml</code> for the complete CI configuration.</p> <p>Note: The CI workflow runs both Crystal tests (<code>crystal spec</code>) and web tests (<code>npm test</code> in the <code>web/</code> directory).</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#debugging-tests","level":2,"title":"Debugging Tests","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#using-verbose","level":3,"title":"Using --verbose","text":"<pre><code>crystal spec --verbose\n</code></pre> <p>Shows all passing and failing tests with details.</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#using-error-trace","level":3,"title":"Using --error-trace","text":"<pre><code>crystal spec --error-trace\n</code></pre> <p>Shows full stack traces for debugging failures.</p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#printf-debugging","level":3,"title":"printf Debugging","text":"<pre><code>it \"debugs something\" do\n  result = some_function\n\n  # Temporary debug output\n  puts \"Result: #{result.inspect}\"\n\n  result.should eq(expected)\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#using-debugger","level":3,"title":"Using debugger","text":"<p>Crystal has a built-in debugger:</p> <pre><code>require \"debug\"\n\nit \"debugs with breakpoint\" do\n  result = some_function\n\n  breakpoint  # Execution pauses here\n\n  result.should eq(expected)\nend\n</code></pre> <p>Run with: <pre><code>crystal spec spec/some_spec.cr --debug\n</code></pre></p>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#writing-testable-code","level":2,"title":"Writing Testable Code","text":"","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#dependency-injection","level":3,"title":"Dependency Injection","text":"<pre><code># Hard to test\nclass TunnelClient\n  def initialize\n    @http = HTTP::Client.new\n  end\nend\n\n# Easy to test\nclass TunnelClient\n  def initialize(@http : HTTP::Client)\n  end\nend\n\n# In tests\nfake_http = FakeHTTPClient.new\nclient = TunnelClient.new(fake_http)\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#avoid-global-state","level":3,"title":"Avoid Global State","text":"<pre><code># Hard to test\nclass Config\n  @@instance = Config.new\n\n  def self.instance\n    @@instance\n  end\nend\n\n# Easy to test\nclass Config\n  def self.new(file_path : String)\n    # Load from file\n  end\nend\n</code></pre>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/development/testing/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Debugging - Debug techniques</li> <li>Contributing Workflow - Submit your changes</li> </ul>","path":["Developer","Development","Testing"],"tags":[]},{"location":"developer/inspector-ui/","level":1,"title":"Inspector UI","text":"<p>Development guide for the Sellia Inspector web interface.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is a React-based web application that provides real-time visualization of HTTP traffic through Sellia tunnels. It connects to the local CLI client via WebSocket and displays requests and responses as they occur.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#technology-stack","level":2,"title":"Technology Stack","text":"<ul> <li>React 18 - UI framework</li> <li>TypeScript - Type safety</li> <li>Vite - Build tool and dev server</li> <li>Tailwind CSS - Styling (optional)</li> <li>WebSocket API - Real-time communication</li> </ul>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#project-structure","level":2,"title":"Project Structure","text":"<pre><code>web/\n├── src/\n│   ├── App.tsx            # Root component (contains all UI logic)\n│   ├── main.tsx           # Application entry point\n│   └── index.css          # Global styles (Tailwind)\n├── public/                # Static assets\n├── index.html             # HTML template\n├── package.json\n├── tsconfig.json\n├── tsconfig.app.json\n├── tsconfig.node.json\n└── vite.config.ts\n</code></pre> <p>Note: Currently the entire UI is contained in a single <code>App.tsx</code> file. As the UI grows, consider splitting into multiple components.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#getting-started","level":2,"title":"Getting Started","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#development-setup","level":3,"title":"Development Setup","text":"<pre><code>cd web\n\n# Install dependencies\nnpm install\n\n# Start dev server\nnpm run dev\n</code></pre> <p>The CLI will proxy to Vite's dev server at <code>localhost:5173</code> when not built with embedded assets.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#build-for-production","level":3,"title":"Build for Production","text":"<pre><code>cd web\n\n# Build\nnpm run build\n\n# Preview build\nnpm run preview\n</code></pre> <p>Built assets are embedded in the Crystal binary for distribution.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#core-concepts","level":2,"title":"Core Concepts","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#websocket-connection","level":3,"title":"WebSocket Connection","text":"<p>The inspector connects to the local CLI client via WebSocket:</p> <pre><code>const ws = new WebSocket(`ws://${window.location.host}/api/live`);\n\nws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data);\n  if (data.type === 'request') {\n    setRequests(prev =&gt; [data.request, ...prev]);\n  }\n};\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#message-types","level":3,"title":"Message Types","text":"<p>Messages sent over WebSocket:</p> <pre><code>interface RequestMessage {\n  type: 'request';\n  request: {\n    id: string;\n    method: string;\n    path: string;\n    statusCode: number;\n    duration: number;\n    timestamp: Date;\n    requestHeaders: Record&lt;string, string&gt;;\n    requestBody?: string;\n    responseHeaders: Record&lt;string, string&gt;;\n    responseBody?: string;\n    matchedRoute?: string;\n    matchedTarget?: string;\n  };\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#state-management","level":3,"title":"State Management","text":"<p>React state for managing requests:</p> <pre><code>const [requests, setRequests] = useState&lt;Request[]&gt;([]);\nconst [selected, setSelected] = useState&lt;Request | null&gt;(null);\nconst [connected, setConnected] = useState(false);\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#components","level":2,"title":"Components","text":"<p>Current Implementation: All components are currently implemented inline in <code>App.tsx</code>. The examples below show the suggested structure for future refactoring.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#requestlist-planned","level":3,"title":"RequestList (Planned)","text":"<p>Displays list of all requests.</p> <p>Planned Location: <code>src/components/RequestList.tsx</code></p> <pre><code>interface RequestListProps {\n  requests: Request[];\n  selected: Request | null;\n  onSelect: (request: Request) =&gt; void;\n}\n\nexport function RequestList({ requests, selected, onSelect }: RequestListProps) {\n  return (\n    &lt;div className=\"w-1/2 border-r border-gray-700 overflow-y-auto\"&gt;\n      {requests.map(request =&gt; (\n        &lt;RequestItem\n          key={request.id}\n          request={request}\n          selected={selected?.id === request.id}\n          onClick={() =&gt; onSelect(request)}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#requestdetail-planned","level":3,"title":"RequestDetail (Planned)","text":"<p>Shows details of selected request.</p> <p>Planned Location: <code>src/components/RequestDetail.tsx</code></p> <pre><code>interface RequestDetailProps {\n  request: Request;\n}\n\nexport function RequestDetail({ request }: RequestDetailProps) {\n  return (\n    &lt;div className=\"w-1/2 overflow-y-auto p-4\"&gt;\n      &lt;h2&gt;{request.method} {request.path}&lt;/h2&gt;\n      &lt;RequestHeaders headers={request.requestHeaders} /&gt;\n      {request.requestBody &amp;&amp; &lt;RequestBody body={request.requestBody} /&gt;}\n      &lt;RequestHeaders headers={request.responseHeaders} /&gt;\n      {request.responseBody &amp;&amp; &lt;ResponseBody body={request.responseBody} /&gt;}\n    &lt;/div&gt;\n  );\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#typescript-types","level":2,"title":"TypeScript Types","text":"<p>Location: <code>src/App.tsx</code> (defined inline)</p> <pre><code>interface Request {\n  id: string;\n  method: string;\n  path: string;\n  statusCode: number;\n  duration: number;\n  timestamp: Date;\n  requestHeaders: Record&lt;string, string&gt;;\n  requestBody?: string;\n  responseHeaders: Record&lt;string, string&gt;;\n  responseBody?: string;\n  matchedRoute?: string;\n  matchedTarget?: string;\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#styling","level":2,"title":"Styling","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#tailwind-css","level":3,"title":"Tailwind CSS","text":"<p>The inspector uses Tailwind CSS v4 for styling.</p> <pre><code>export function Component() {\n  return (\n    &lt;div className=\"bg-gray-900 text-white p-4\"&gt;\n      {/* Content */}\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>Location: <code>src/index.css</code> imports Tailwind: <pre><code>@import \"tailwindcss\";\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#configuration","level":3,"title":"Configuration","text":"<p>Tailwind is configured via Vite plugin in <code>vite.config.ts</code>: <pre><code>import tailwindcss from '@tailwindcss/vite'\n\nexport default defineConfig({\n  plugins: [react(), tailwindcss()],\n})\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#current-implementation","level":3,"title":"Current Implementation","text":"<ul> <li>All UI logic is in a single <code>App.tsx</code> file for simplicity</li> <li>Uses React hooks for state management (no external state library)</li> <li>Direct WebSocket integration</li> <li>Tailwind CSS v4 for styling</li> </ul>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#future-improvements","level":3,"title":"Future Improvements","text":"<p>When refactoring into multiple components:</p> <ul> <li>Keep components focused and single-purpose</li> <li>Use TypeScript for all components</li> <li>Extract reusable logic into hooks</li> <li>Use memoization for expensive operations</li> <li>Virtualize long lists if they grow beyond 100 items</li> </ul>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#performance-considerations","level":3,"title":"Performance Considerations","text":"<ul> <li>Request list is limited to 1000 items</li> <li>New requests are added to the beginning of the list</li> <li>Immutable state updates for efficient re-rendering</li> <li>Conditional rendering of detail panel</li> </ul>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#error-handling","level":3,"title":"Error Handling","text":"<pre><code>useEffect(() =&gt; {\n  const ws = new WebSocket(`ws://${window.location.host}/api/live`);\n\n  ws.onmessage = (event) =&gt; {\n    try {\n      const data = JSON.parse(event.data);\n      if (data.type === 'request') {\n        setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000));\n      }\n    } catch (e) {\n      console.error('Failed to parse message:', e);\n    }\n  };\n\n  ws.onclose = () =&gt; {\n    setConnected(false);\n    setTimeout(() =&gt; {\n      setReconnectCounter(prev =&gt; prev + 1);\n    }, 3000);\n  };\n\n  return () =&gt; ws.close();\n}, [reconnectCounter]);\n</code></pre>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#testing","level":2,"title":"Testing","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#current-status","level":3,"title":"Current Status","text":"<p>No automated tests are currently set up. Testing is manual:</p> <ol> <li> <p>Start a tunnel:    <pre><code>./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Make requests to public URL</p> </li> <li> <p>Open inspector: <code>http://127.0.0.1:4040</code></p> </li> <li> <p>Verify requests appear in real-time</p> </li> </ol>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#building-for-production","level":2,"title":"Building for Production","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#embed-in-crystal-binary","level":3,"title":"Embed in Crystal Binary","text":"<ol> <li> <p>Build UI:    <pre><code>cd web\nnpm run build\n</code></pre></p> </li> <li> <p>Build Crystal binary with assets:    <pre><code>cd ..\nshards build --release\n</code></pre></p> </li> </ol> <p>The <code>--release</code> flag causes Crystal to bake the <code>web/dist/</code> folder into the binary using the <code>baked_file_system</code> shard.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#development-mode","level":3,"title":"Development Mode","text":"<p>For development, simply run:</p> <pre><code>cd web\nnpm run dev\n</code></pre> <p>And start Sellia without the <code>--release</code> flag. The inspector will proxy requests to the Vite dev server.</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#websocket-connection-issues","level":3,"title":"WebSocket Connection Issues","text":"<p>Problem: Can't connect to WebSocket</p> <p>Solutions: - Verify CLI is running with inspector enabled - Check firewall allows port 4040 - Verify using correct WebSocket URL: <code>ws://${window.location.host}/api/live</code></p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#dev-server-issues","level":3,"title":"Dev Server Issues","text":"<p>Problem: Vite dev server not working</p> <p>Solutions: - Ensure <code>npm install</code> was run - Check port 5173 is available - Clear node_modules and reinstall</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#build-errors","level":3,"title":"Build Errors","text":"<p>Problem: Production build fails</p> <p>Solutions: - Check TypeScript errors: <code>npx tsc --noEmit</code> - Fix linting errors: <code>npm run lint</code> - Check for missing dependencies</p>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Component Architecture - Detailed component structure</li> <li>State Management - State management patterns</li> <li>Setup Guide - Development environment setup</li> <li>Embedding in Binary - Production deployment details</li> </ul>","path":["Developer","Inspector ui","Inspector UI"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/","level":1,"title":"Inspector UI Component Architecture","text":"<p>Overview of the React component structure and architecture of the Sellia Inspector UI.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is a single-page React application built with TypeScript and Tailwind CSS. It follows a functional component pattern with hooks for state management and side effects.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#file-structure","level":2,"title":"File Structure","text":"<pre><code>web/src/\n├── main.tsx          # Application entry point\n├── App.tsx           # Root component with all UI logic\n└── index.css         # Global styles (Tailwind)\n</code></pre> <p>Note: Currently the entire UI is contained in a single <code>App.tsx</code> file. As the UI grows, consider splitting into multiple components.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#component-hierarchy","level":2,"title":"Component Hierarchy","text":"<pre><code>App (Root Component)\n├── Header\n│   ├── Title\n│   ├── Connection Status Badge\n│   └── Clear All Button\n├── Main Content Area\n│   ├── Request List (Left Panel)\n│   │   └── Request Item (repeated)\n│   └── Request Detail (Right Panel)\n│       ├── Request Header\n│       ├── Copy as curl Button\n│       ├── Request Headers\n│       ├── Route Info (if routed)\n│       ├── Request Body (if present)\n│       ├── Response Headers\n│       └── Response Body (if present)\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#root-component-app","level":2,"title":"Root Component: App","text":"<p>Location: <code>web/src/App.tsx</code></p> <p>The <code>App</code> component is the main and only component in the current implementation.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#responsibilities","level":3,"title":"Responsibilities","text":"<ol> <li>State Management</li> <li>Request list</li> <li>Selected request</li> <li>WebSocket connection status</li> <li> <p>Reconnection handling</p> </li> <li> <p>Data Fetching</p> </li> <li>Load historical requests on mount</li> <li> <p>Subscribe to live WebSocket updates</p> </li> <li> <p>UI Rendering</p> </li> <li>Request list panel</li> <li>Request detail panel</li> <li>Connection status indicator</li> </ol>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#data-models","level":2,"title":"Data Models","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#request-interface","level":3,"title":"Request Interface","text":"<pre><code>interface Request {\n  id: string                      // Unique request ID\n  method: string                  // HTTP method (GET, POST, etc.)\n  path: string                    // Request path\n  statusCode: number              // HTTP status code\n  duration: number                // Request duration in ms\n  timestamp: Date                 // Request timestamp\n  requestHeaders: Record&lt;string, string&gt;\n  requestBody?: string            // Optional request body\n  responseHeaders: Record&lt;string, string&gt;\n  responseBody?: string           // Optional response body\n  matchedRoute?: string           // Matched route pattern\n  matchedTarget?: string          // Target host:port\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#state-management","level":2,"title":"State Management","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#component-state","level":3,"title":"Component State","text":"<pre><code>const [requests, setRequests] = useState&lt;Request[]&gt;([])\nconst [selected, setSelected] = useState&lt;Request | null&gt;(null)\nconst [connected, setConnected] = useState(false)\nconst [reconnectCounter, setReconnectCounter] = useState(0)\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#state-variables","level":4,"title":"State Variables","text":"State Type Purpose <code>requests</code> <code>Request[]</code> List of all captured requests (max 1000) <code>selected</code> <code>Request \\| null</code> Currently selected request for detail view <code>connected</code> <code>boolean</code> WebSocket connection status <code>reconnectCounter</code> <code>number</code> Incremented to trigger WebSocket reconnect","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#lifecycle-effects","level":2,"title":"Lifecycle Effects","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#1-load-historical-requests","level":3,"title":"1. Load Historical Requests","text":"<pre><code>useEffect(() =&gt; {\n  fetch('/api/requests')\n    .then(r =&gt; r.json())\n    .then(data =&gt; setRequests(data))\n    .catch(console.error)\n}, [])\n</code></pre> <p>Purpose: Load previously captured requests on page load.</p> <p>Endpoint: <code>GET /api/requests</code></p> <p>Dependencies: Runs once on mount (empty dependency array).</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#2-websocket-connection","level":3,"title":"2. WebSocket Connection","text":"<pre><code>useEffect(() =&gt; {\n  const ws = new WebSocket(`ws://${window.location.host}/api/live`)\n\n  ws.onopen = () =&gt; setConnected(true)\n\n  ws.onclose = () =&gt; {\n    setConnected(false)\n    setTimeout(() =&gt; {\n      setReconnectCounter(prev =&gt; prev + 1)\n    }, 3000)\n  }\n\n  ws.onmessage = (event) =&gt; {\n    try {\n      const data = JSON.parse(event.data)\n      if (data.type === 'request') {\n        setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n      }\n    } catch (e) {\n      console.error('Failed to parse message:', e)\n    }\n  }\n\n  return () =&gt; ws.close()\n}, [reconnectCounter])\n</code></pre> <p>Purpose: Establish WebSocket connection for live updates.</p> <p>Behaviors: - Connects to <code>/api/live</code> WebSocket endpoint - Updates connection status - Auto-reconnects after 3 seconds on disconnect - Adds new requests to beginning of list - Limits to 1000 most recent requests - Cleans up WebSocket on unmount</p> <p>Dependencies: Re-runs when <code>reconnectCounter</code> changes (triggers reconnect).</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#ui-components","level":2,"title":"UI Components","text":"<p>Current Implementation: All UI components are implemented inline within <code>App.tsx</code>. The following sections describe the actual implementation structure.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#header","level":3,"title":"Header","text":"<pre><code>&lt;header className=\"border-b border-gray-700 px-4 py-3 flex items-center justify-between\"&gt;\n  &lt;div className=\"flex items-center gap-3\"&gt;\n    &lt;h1 className=\"text-lg font-semibold\"&gt;Sellia Inspector&lt;/h1&gt;\n    &lt;span className={`text-xs px-2 py-0.5 rounded ${\n      connected ? 'bg-green-600' : 'bg-red-600'\n    }`}&gt;\n      {connected ? 'Live' : 'Disconnected'}\n    &lt;/span&gt;\n  &lt;/div&gt;\n  &lt;button\n    onClick={async () =&gt; {\n      await fetch('/api/requests/clear', { method: 'POST' })\n      setRequests([])\n    }}\n    className=\"text-sm text-gray-400 hover:text-white\"\n  &gt;\n    Clear All\n  &lt;/button&gt;\n&lt;/header&gt;\n</code></pre> <p>Features: - Title and connection status - Live/Disconnected badge (green/red) - Clear All button to reset request list</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#request-list-left-panel","level":3,"title":"Request List (Left Panel)","text":"<pre><code>&lt;div className=\"w-1/2 border-r border-gray-700 overflow-y-auto\"&gt;\n  {requests.length === 0 ? (\n    &lt;div className=\"p-8 text-center text-gray-500\"&gt;\n      Waiting for requests...\n    &lt;/div&gt;\n  ) : (\n    requests.map(req =&gt; (\n      &lt;div\n        key={req.id}\n        onClick={() =&gt; setSelected(req)}\n        className={`px-4 py-2 border-b border-gray-800 cursor-pointer hover:bg-gray-800 ${\n          selected?.id === req.id ? 'bg-gray-800' : ''\n        }`}\n      &gt;\n        &lt;div className=\"flex items-center gap-3\"&gt;\n          &lt;span className={`font-mono ${statusColor(req.statusCode)}`}&gt;\n            {req.statusCode}\n          &lt;/span&gt;\n          &lt;span className=\"font-mono text-sm text-gray-300\"&gt;\n            {req.method}\n          &lt;/span&gt;\n          &lt;span className=\"font-mono text-sm truncate flex-1\"&gt;\n            {req.path}\n          &lt;/span&gt;\n          {req.matchedTarget &amp;&amp; (\n            &lt;span className=\"text-xs text-gray-500 font-mono\"&gt;\n              → {req.matchedTarget}\n            &lt;/span&gt;\n          )}\n          &lt;span className=\"text-xs text-gray-500\"&gt;\n            {req.duration}ms\n          &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    ))\n  )}\n&lt;/div&gt;\n</code></pre> <p>Features: - Shows \"Waiting for requests...\" when empty - Lists up to 1000 requests - Highlights selected request - Click to select for detail view</p> <p>Request Item Display: - Status code (color-coded) - HTTP method - Request path - Target (if routed) - Duration in ms</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#request-detail-right-panel","level":3,"title":"Request Detail (Right Panel)","text":"<pre><code>&lt;div className=\"w-1/2 overflow-y-auto p-4\"&gt;\n  {selected ? (\n    &lt;div className=\"space-y-4\"&gt;\n      &lt;div className=\"flex justify-between items-center\"&gt;\n        &lt;h2 className=\"text-lg font-semibold\"&gt;\n          {selected.method} {selected.path}\n        &lt;/h2&gt;\n        &lt;button\n          onClick={() =&gt; copyAsCurl(selected)}\n          className=\"text-sm px-3 py-1 bg-gray-700 rounded hover:bg-gray-600\"\n        &gt;\n          Copy as curl\n        &lt;/button&gt;\n      &lt;/div&gt;\n\n      &lt;section&gt;\n        &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Request Headers&lt;/h3&gt;\n        &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto\"&gt;\n          {JSON.stringify(selected.requestHeaders, null, 2)}\n        &lt;/pre&gt;\n      &lt;/section&gt;\n\n      {selected.matchedRoute &amp;&amp; (\n        &lt;section&gt;\n          &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Route&lt;/h3&gt;\n          &lt;div className=\"bg-gray-800 p-3 rounded text-sm font-mono\"&gt;\n            {selected.matchedRoute} → {selected.matchedTarget}\n          &lt;/div&gt;\n        &lt;/section&gt;\n      )}\n\n      {selected.requestBody &amp;&amp; (\n        &lt;section&gt;\n          &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Request Body&lt;/h3&gt;\n          &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto\"&gt;\n            {selected.requestBody}\n          &lt;/pre&gt;\n        &lt;/section&gt;\n      )}\n\n      &lt;section&gt;\n        &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Response Headers&lt;/h3&gt;\n        &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto\"&gt;\n          {JSON.stringify(selected.responseHeaders, null, 2)}\n        &lt;/pre&gt;\n      &lt;/section&gt;\n\n      {selected.responseBody &amp;&amp; (\n        &lt;section&gt;\n          &lt;h3 className=\"text-sm font-semibold text-gray-400 mb-2\"&gt;Response Body&lt;/h3&gt;\n          &lt;pre className=\"bg-gray-800 p-3 rounded text-sm overflow-x-auto whitespace-pre-wrap\"&gt;\n            {selected.responseBody}\n          &lt;/pre&gt;\n        &lt;/section&gt;\n      )}\n    &lt;/div&gt;\n  ) : (\n    &lt;div className=\"h-full flex items-center justify-center text-gray-500\"&gt;\n      Select a request to view details\n    &lt;/div&gt;\n  )}\n&lt;/div&gt;\n</code></pre> <p>Features: - Shows full request/response details - Copy as cURL button - Headers display - Body display (if present) - Route information (if routed)</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#helper-functions","level":2,"title":"Helper Functions","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#status-color-coding","level":3,"title":"Status Color Coding","text":"<pre><code>const statusColor = (code: number) =&gt; {\n  if (code &lt; 300) return 'text-green-500'\n  if (code &lt; 400) return 'text-blue-500'\n  if (code &lt; 500) return 'text-yellow-500'\n  return 'text-red-500'\n}\n</code></pre> <p>Purpose: Returns Tailwind class for status code coloring.</p> Range Color Meaning 2xx Green Success 3xx Blue Redirect 4xx Yellow Client Error 5xx Red Server Error","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#copy-as-curl","level":3,"title":"Copy as cURL","text":"<pre><code>const copyAsCurl = (req: Request) =&gt; {\n  const headers = Object.entries(req.requestHeaders)\n    .map(([k, v]) =&gt; `-H '${k}: ${v}'`)\n    .join(' ')\n  const curl = `curl -X ${req.method} ${headers} '${window.location.origin}${req.path}'`\n  navigator.clipboard.writeText(curl)\n}\n</code></pre> <p>Purpose: Generate and copy cURL command to clipboard.</p> <p>Format: <pre><code>curl -X GET -H 'User-Agent: ...' -H 'Accept: ...' 'https://myapp.sellia.me/path'\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#styling","level":2,"title":"Styling","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#tailwind-css","level":3,"title":"Tailwind CSS","text":"<p>All styling uses Tailwind utility classes:</p> <pre><code>// Dark theme colors\nbg-gray-900        // Dark background\ntext-gray-100      // Light text\nborder-gray-700    // Borders\nhover:bg-gray-800  // Hover states\n\n// Status colors\ntext-green-500     // 2xx status\ntext-blue-500      // 3xx status\ntext-yellow-500    // 4xx status\ntext-red-500       // 5xx status\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#layout","level":3,"title":"Layout","text":"<ul> <li>Flexbox for one-dimensional layouts</li> <li>Fixed dimensions for panel split (50/50)</li> <li>Overflow scroll for list and detail panels</li> <li>Spacing using Tailwind spacing scale</li> </ul>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#future-component-structure-suggested","level":2,"title":"Future Component Structure (Suggested)","text":"<p>As the UI grows, consider splitting into:</p> <pre><code>src/\n├── components/\n│   ├── Header/\n│   │   ├── Header.tsx\n│   │   └── ConnectionStatus.tsx\n│   ├── RequestList/\n│   │   ├── RequestList.tsx\n│   │   └── RequestItem.tsx\n│   ├── RequestDetail/\n│   │   ├── RequestDetail.tsx\n│   │   ├── RequestHeaders.tsx\n│   │   ├── RequestBody.tsx\n│   │   └── CopyAsCurlButton.tsx\n│   └── shared/\n│       ├── StatusBadge.tsx\n│       └── Timestamp.tsx\n├── hooks/\n│   ├── useWebSocket.ts\n│   └── useRequests.ts\n├── types/\n│   └── request.ts\n└── utils/\n    └── curl.ts\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#request-limit","level":3,"title":"Request Limit","text":"<pre><code>setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n</code></pre> <p>Why: Limits memory usage by keeping only 1000 most recent requests.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#websocket-reconnection","level":3,"title":"WebSocket Reconnection","text":"<pre><code>setTimeout(() =&gt; {\n  setReconnectCounter(prev =&gt; prev + 1)\n}, 3000)\n</code></pre> <p>Why: Prevents tight reconnect loops, gives server time to recover.</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#accessibility","level":2,"title":"Accessibility","text":"","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#keyboard-navigation","level":3,"title":"Keyboard Navigation","text":"<ul> <li>Currently limited</li> <li>Future: Add keyboard shortcuts for:</li> <li>Up/Down arrows to navigate requests</li> <li>Escape to deselect</li> <li>Ctrl+C to copy cURL</li> </ul>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#aria-labels","level":3,"title":"ARIA Labels","text":"<p>Future improvements: - Add <code>aria-label</code> to buttons - Use semantic HTML elements - Add <code>role</code> attributes where needed</p>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/component-architecture/#see-also","level":2,"title":"See Also","text":"<ul> <li>Setup Guide - Development environment setup</li> <li>State Management - State management patterns</li> <li>Embedding in Binary - Production deployment</li> </ul>","path":["Developer","Inspector ui","Inspector UI Component Architecture"],"tags":[]},{"location":"developer/inspector-ui/embedding/","level":1,"title":"Embedding Inspector UI in Crystal Binary","text":"<p>How the React Inspector UI is embedded into the Crystal binary for single-file distribution.</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is embedded directly into the Crystal binary using the <code>baked_file_system</code> shard. This creates a single executable that contains both the backend server and the frontend UI, with no external file dependencies.</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#architecture","level":2,"title":"Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────┐\n│              sellia (Crystal Binary)                    │\n├─────────────────────────────────────────────────────────┤\n│                                                          │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │  Crystal Inspector Server (HTTP::Server)         │  │\n│  │  - Serves baked assets                           │  │\n│  │  - Provides REST API (/api/requests)             │  │\n│  │  - Provides WebSocket (/api/live)                │  │\n│  └──────────────────────────────────────────────────┘  │\n│                                                          │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │  Baked Assets (compiled into binary)             │  │\n│  │  - index.html                                    │  │\n│  │  - JavaScript bundles                            │  │\n│  │  - CSS files                                     │  │\n│  │  - Images, fonts, etc.                           │  │\n│  └──────────────────────────────────────────────────┘  │\n└─────────────────────────────────────────────────────────┘\n</code></pre>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#build-process","level":2,"title":"Build Process","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#development-build","level":3,"title":"Development Build","text":"<pre><code># No baking - proxies to Vite dev server\nshards build\n./bin/sellia http 3000\n</code></pre> <p>Characteristics: - <code>--release</code> flag NOT set - Assets NOT baked into binary - Inspector proxies to <code>localhost:5173</code> (Vite dev server) - Faster compilation, suitable for development</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#production-build","level":3,"title":"Production Build","text":"<pre><code># Step 1: Build UI\ncd web\nnpm run build\n# Creates: web/dist/\n\n# Step 2: Build Crystal binary with baked assets\ncd ..\nshards build --release\n</code></pre> <p>Characteristics: - <code>--release</code> flag set - Assets baked into binary at compile time - Self-contained executable - Optimized for production</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#implementation","level":2,"title":"Implementation","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#conditional-compilation","level":3,"title":"Conditional Compilation","text":"<p>Location: <code>src/cli/inspector.cr:8-12</code></p> <pre><code>{% unless flag?(:release) %}\n  # Development mode - no baked assets needed\n{% else %}\n  require \"baked_file_system\"\n{% end %}\n</code></pre> <p>How it works: - Crystal conditionally compiles code based on <code>--release</code> flag - Development mode: Baking skipped - Release mode: Baking enabled</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#baking-assets","level":3,"title":"Baking Assets","text":"<p>Location: <code>src/cli/inspector.cr:15-20</code></p> <pre><code>{% if flag?(:release) %}\n  class InspectorAssets\n    extend BakedFileSystem\n\n    bake_folder \"../../web/dist\", __DIR__\n  end\n{% end %}\n</code></pre> <p>What happens: 1. At compile time, <code>baked_file_system</code> reads <code>web/dist/</code> 2. Each file is converted to a Crystal string constant 3. Files are embedded in the binary 4. Runtime: Serve files from memory, no disk I/O</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#serving-baked-files","level":3,"title":"Serving Baked Files","text":"<p>Location: <code>src/cli/inspector.cr:171-195</code></p> <pre><code>private def serve_baked_file(context : HTTP::Server::Context, path : String)\n  # Try to get the file from baked assets\n  file = InspectorAssets.get?(path)\n\n  # If not found and not already index.html, try index.html (SPA fallback)\n  if file.nil? &amp;&amp; path != \"/index.html\" &amp;&amp; !path.starts_with?(\"/assets/\")\n    file = InspectorAssets.get?(\"/index.html\")\n  end\n\n  if file\n    content_type = mime_type_for(path)\n    context.response.content_type = content_type\n\n    # Cache static assets aggressively\n    if path.starts_with?(\"/assets/\")\n      context.response.headers[\"Cache-Control\"] = \"public, max-age=31536000, immutable\"\n    end\n\n    context.response.print(file.gets_to_end)\n  else\n    context.response.status_code = 404\n    context.response.content_type = \"text/plain\"\n    context.response.print(\"Not found: #{path}\")\n  end\nend\n</code></pre> <p>Key features: 1. Lookup: <code>InspectorAssets.get?(path)</code> retrieves baked file 2. SPA Fallback: Non-existent routes return <code>index.html</code> (for React Router) 3. MIME Types: Correct content type based on file extension 4. Caching: Aggressive caching for assets (1 year)</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#mime-type-detection","level":3,"title":"MIME Type Detection","text":"<p>Location: <code>src/cli/inspector.cr:197-228</code></p> <pre><code>private def mime_type_for(path : String) : String\n  case path\n  when .ends_with?(\".html\")\n    \"text/html; charset=utf-8\"\n  when .ends_with?(\".js\")\n    \"application/javascript; charset=utf-8\"\n  when .ends_with?(\".css\")\n    \"text/css; charset=utf-8\"\n  when .ends_with?(\".svg\")\n    \"image/svg+xml\"\n  when .ends_with?(\".png\")\n    \"image/png\"\n  when .ends_with?(\".jpg\"), .ends_with?(\".jpeg\")\n    \"image/jpeg\"\n  when .ends_with?(\".gif\")\n    \"image/gif\"\n  when .ends_with?(\".ico\")\n    \"image/x-icon\"\n  when .ends_with?(\".woff\")\n    \"font/woff\"\n  when .ends_with?(\".woff2\")\n    \"font/woff2\"\n  when .ends_with?(\".ttf\")\n    \"font/ttf\"\n  when .ends_with?(\".json\")\n    \"application/json\"\n  when .ends_with?(\".map\")\n    \"application/json\"\n  else\n    \"application/octet-stream\"\n  end\nend\n</code></pre>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#file-routing","level":2,"title":"File Routing","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#request-flow","level":3,"title":"Request Flow","text":"<pre><code>1. HTTP request to inspector (e.g., GET /)\n   ↓\n2. Route determination in handle_request()\n   ↓\n3. If API endpoint (/api/*) → handle API request\n   ↓\n4. If root (/) → serve index.html\n   ↓\n5. Otherwise → serve file or fallback to index.html\n</code></pre>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#route-table","level":3,"title":"Route Table","text":"Path Handler Description <code>/api/live</code> WebSocket Live request updates <code>/api/requests</code> REST API Get all requests <code>/api/requests/clear</code> REST API Clear all requests <code>/</code> File Serve index.html <code>/*</code> File or index.html Serve file or SPA fallback","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#development-vs-production-behavior","level":2,"title":"Development vs Production Behavior","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#development-mode","level":3,"title":"Development Mode","text":"<pre><code>private def serve_file(context : HTTP::Server::Context, path : String)\n  {% unless flag?(:release) %}\n    proxy_to_vite(context, path)\n  {% else %}\n    serve_baked_file(context, path)\n  {% end %}\nend\n</code></pre> <p>Behavior: - Proxies requests to Vite dev server at <code>localhost:5173</code> - Enables HMR (Hot Module Replacement) - No compilation needed for UI changes - Requires <code>npm run dev</code> running separately</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#production-mode","level":3,"title":"Production Mode","text":"<pre><code>private def serve_file(context : HTTP::Server::Context, path : String)\n  {% if flag?(:release) %}\n    serve_baked_file(context, path)\n  {% end %}\nend\n</code></pre> <p>Behavior: - Serves baked assets from binary - Single executable deployment - No external file dependencies - UI changes require rebuild</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#asset-caching-strategy","level":2,"title":"Asset Caching Strategy","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#static-assets-js-css-images","level":3,"title":"Static Assets (JS, CSS, Images)","text":"<pre><code>if path.starts_with?(\"/assets/\")\n  context.response.headers[\"Cache-Control\"] = \"public, max-age=31536000, immutable\"\nend\n</code></pre> <p>Why: Assets have content-hash in filename (e.g., <code>index-abc123.js</code>), so they can be cached indefinitely.</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#html","level":3,"title":"HTML","text":"<pre><code># No cache header for HTML\ncontext.response.print(file.gets_to_end)\n</code></pre> <p>Why: HTML should always be fresh to ensure latest asset references.</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#build-script","level":2,"title":"Build Script","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#manual-build","level":3,"title":"Manual Build","text":"<pre><code>#!/bin/bash\nset -e\n\necho \"Building React UI...\"\ncd web\nnpm run build\ncd ..\n\necho \"Building Crystal binary...\"\nshards build --release\n\necho \"Done! Binary: ./bin/sellia\"\n</code></pre>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#automated-build-github-actions","level":3,"title":"Automated Build (GitHub Actions)","text":"<p>Location: <code>.github/workflows/release.yml</code></p> <pre><code>- name: Install Node.js\n  uses: actions/setup-node@v4\n  with:\n    node-version: '20'\n\n- name: Build Inspector UI\n  run: |\n    cd web\n    npm ci\n    npm run build\n\n- name: Build Crystal\n  run: shards build --release\n</code></pre>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#binary-size-impact","level":2,"title":"Binary Size Impact","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#before-baking","level":3,"title":"Before Baking","text":"<pre><code>-rwxr-xr-x  1 user  staff  4.2M  bin/sellia (no assets)\n</code></pre>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#after-baking","level":3,"title":"After Baking","text":"<pre><code>-rwxr-xr-x  1 user  staff  5.8M  bin/sellia (with assets)\n</code></pre> <p>Overhead: ~1.6MB for React UI bundle</p> <p>Optimization: - Assets compressed at compile time - No runtime decompression overhead - Acceptable trade-off for single-file deployment</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#updating-the-ui","level":2,"title":"Updating the UI","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#development","level":3,"title":"Development","text":"<ol> <li>Edit React code in <code>web/src/</code></li> <li>Vite HMR automatically reloads browser</li> <li>No rebuild needed</li> </ol>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#production","level":3,"title":"Production","text":"<ol> <li>Edit React code in <code>web/src/</code></li> <li>Build UI:    <pre><code>cd web &amp;&amp; npm run build &amp;&amp; cd ..\n</code></pre></li> <li>Rebuild Crystal binary:    <pre><code>shards build --release\n</code></pre></li> <li>Test new binary</li> </ol>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#ui-not-updating","level":3,"title":"UI Not Updating","text":"<p>Symptom: Changes to React code not reflected in inspector.</p> <p>Cause: Using stale baked assets from previous build.</p> <p>Solution: <pre><code># Clean and rebuild\ncd web\nrm -rf dist node_modules/.vite\nnpm run build\ncd ..\nshards build --release\n</code></pre></p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#404-for-assets","level":3,"title":"404 for Assets","text":"<p>Symptom: Browser shows 404 for <code>/assets/index-xxx.js</code>.</p> <p>Cause: Assets not baked or incorrect path.</p> <p>Solution: 1. Ensure <code>npm run build</code> completed successfully 2. Check <code>web/dist/</code> exists and contains assets 3. Rebuild with <code>--release</code> flag</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#large-binary-size","level":3,"title":"Large Binary Size","text":"<p>Symptom: Binary &gt; 10MB.</p> <p>Cause: Debug build includes all assets unoptimized.</p> <p>Solution: 1. Always use <code>--release</code> flag for production 2. Check <code>web/dist/</code> size (should be &lt; 2MB) 3. Verify production build: <code>npm run build</code></p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#future-improvements","level":2,"title":"Future Improvements","text":"","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#compression","level":3,"title":"Compression","text":"<p>Use gzip compression for baked assets:</p> <pre><code>require \"gzip\"\n\n{% if flag?(:release) %}\n  class InspectorAssets\n    extend BakedFileSystem\n\n    bake_folder \"../../web/dist\", __DIR__, gzip: true\n  end\n{% end %}\n</code></pre> <p>Benefit: 60-70% size reduction for text assets.</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#lazy-loading","level":3,"title":"Lazy Loading","text":"<p>Load chunks on demand:</p> <pre><code>// React.lazy + Suspense\nconst RequestDetail = React.lazy(() =&gt; import('./RequestDetail'))\n</code></pre> <p>Benefit: Smaller initial bundle size, faster first load.</p>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/embedding/#see-also","level":2,"title":"See Also","text":"<ul> <li>Setup Guide - Development setup</li> <li>Component Architecture - React components</li> <li>State Management - State patterns</li> <li>Backend Inspector - Crystal server implementation</li> </ul>","path":["Developer","Inspector ui","Embedding Inspector UI in Crystal Binary"],"tags":[]},{"location":"developer/inspector-ui/setup/","level":1,"title":"Inspector UI Setup","text":"<p>Guide for setting up the development environment for the Sellia Inspector UI.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI is a React application built with Vite that provides real-time request monitoring for Sellia tunnels. It communicates with the Crystal backend via WebSocket and REST APIs.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#prerequisites","level":2,"title":"Prerequisites","text":"<ul> <li>Node.js 18+ and npm</li> <li>Crystal 1.10+ (for backend)</li> <li>Git</li> </ul>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#project-structure","level":2,"title":"Project Structure","text":"<pre><code>web/\n├── src/\n│   ├── App.tsx          # Main React component\n│   ├── main.tsx         # Application entry point\n│   └── index.css        # Global styles\n├── public/              # Static assets\n├── index.html           # HTML template\n├── package.json         # Node dependencies\n├── vite.config.ts       # Vite configuration\n├── tsconfig.json        # TypeScript configuration\n└── dist/                # Build output (generated)\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#initial-setup","level":2,"title":"Initial Setup","text":"","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#1-install-dependencies","level":3,"title":"1. Install Dependencies","text":"<pre><code>cd web\nnpm install\n</code></pre> <p>This installs: - <code>react</code> ^19.2.0 - UI framework - <code>react-dom</code> ^19.2.0 - React DOM bindings - <code>vite</code> ^7.2.4 - Build tool and dev server - <code>typescript</code> ~5.9.3 - Type checking - <code>tailwindcss</code> ^4.1.18 - Styling - <code>@vitejs/plugin-react</code> ^5.1.1 - React plugin for Vite</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#2-development-server","level":3,"title":"2. Development Server","text":"<p>Start the Vite dev server (port 5173):</p> <pre><code>npm run dev\n</code></pre> <p>The UI will be available at <code>http://localhost:5173</code></p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#3-start-crystal-backend","level":3,"title":"3. Start Crystal Backend","text":"<p>In a separate terminal, start Sellia in development mode (no <code>--release</code> flag):</p> <pre><code># From project root\nshards build\n./bin/sellia http 3000\n</code></pre> <p>The inspector will proxy requests to the Vite dev server automatically.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#development-workflow","level":2,"title":"Development Workflow","text":"","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#live-development","level":3,"title":"Live Development","text":"<ol> <li> <p>Start Vite dev server: <pre><code>cd web\nnpm run dev\n</code></pre></p> </li> <li> <p>Start Sellia (in separate terminal): <pre><code>shards build\n./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Access inspector:</p> </li> <li>Open <code>http://127.0.0.1:4040</code> in your browser</li> <li>Changes to React code will hot-reload via Vite HMR</li> </ol>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#file-watching","level":3,"title":"File Watching","text":"<p>Vite automatically watches for changes in <code>web/src/</code> and triggers fast hot module replacement (HMR).</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#linting","level":3,"title":"Linting","text":"<p>Run ESLint:</p> <pre><code>npm run lint\n</code></pre> <p>Fix issues automatically:</p> <pre><code>npm run lint -- --fix\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#configuration","level":2,"title":"Configuration","text":"","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#vite-config-viteconfigts","level":3,"title":"Vite Config (<code>vite.config.ts</code>)","text":"<pre><code>export default defineConfig({\n  plugins: [react(), tailwindcss()],\n  build: {\n    outDir: 'dist',\n    emptyOutDir: true,\n  },\n  server: {\n    port: 5173,\n  },\n})\n</code></pre> <p>Key settings: - <code>port</code>: Dev server port (default 5173) - <code>outDir</code>: Production build output directory - <code>plugins</code>: React and Tailwind CSS integration</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#typescript-config","level":3,"title":"TypeScript Config","text":"<p>Two TypeScript configs:</p> <ol> <li><code>tsconfig.json</code> - Application code</li> <li><code>tsconfig.node.json</code> - Build tooling (Vite config)</li> </ol> <p>Both extend from base configurations and enable strict type checking.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#building-for-production","level":2,"title":"Building for Production","text":"","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#production-build","level":3,"title":"Production Build","text":"<p>Create optimized production build:</p> <pre><code>cd web\nnpm run build\n</code></pre> <p>This creates <code>web/dist/</code> with: - Minified JavaScript - Optimized assets - Source maps (if enabled)</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#build-output","level":3,"title":"Build Output","text":"<pre><code>dist/\n├── index.html              # Entry HTML\n├── assets/\n│   ├── index-[hash].js     # Bundled JavaScript\n│   ├── index-[hash].css    # Bundled CSS\n│   └── ...                 # Other assets\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#production-binary","level":3,"title":"Production Binary","text":"<p>After building the UI, create release binary:</p> <pre><code># From project root\ncd web &amp;&amp; npm run build &amp;&amp; cd ..\nshards build --release\n</code></pre> <p>The <code>--release</code> flag: - Bakes <code>web/dist/</code> into the binary - Enables asset serving from binary instead of Vite proxy</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#development-vs-production-modes","level":2,"title":"Development vs Production Modes","text":"","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#development-mode-default","level":3,"title":"Development Mode (Default)","text":"<pre><code>shards build\n./bin/sellia http 3000\n</code></pre> <p>Characteristics: - Inspector proxies to Vite dev server (<code>localhost:5173</code>) - Fast refresh with HMR - Source maps available - Larger binary size - Requires both <code>npm run dev</code> and Sellia running</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#production-mode","level":3,"title":"Production Mode","text":"<pre><code>shards build --release\n./bin/sellia http 3000\n</code></pre> <p>Characteristics: - UI assets baked into binary - No external dev server needed - Optimized, minified assets - Single binary deployment - Faster startup</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#vite-dev-server-not-running","level":3,"title":"\"Vite Dev Server Not Running\"","text":"<p>Cause: Vite dev server is not running or not accessible.</p> <p>Solution: 1. Start Vite dev server:    <pre><code>cd web &amp;&amp; npm run dev\n</code></pre> 2. Ensure it's running on port 5173 3. Or build for production:    <pre><code>npm run build &amp;&amp; shards build --release\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#hmr-not-working","level":3,"title":"HMR Not Working","text":"<p>Cause: WebSocket connection to Vite failed (can't proxy WebSocket upgrades).</p> <p>Solution: - This is expected behavior. Direct your browser to <code>http://localhost:5173</code> for HMR. - Or manually refresh the inspector page at <code>http://127.0.0.1:4040</code>.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#port-5173-already-in-use","level":3,"title":"Port 5173 Already in Use","text":"<p>Cause: Another process is using the Vite port.</p> <p>Solution: 1. Find and stop the process:    <pre><code>lsof -i :5173\nkill -9 &lt;PID&gt;\n</code></pre> 2. Or change Vite port in <code>vite.config.ts</code>:    <pre><code>server: {\n  port: 5174,  # Use different port\n}\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#build-errors","level":3,"title":"Build Errors","text":"<p>Cause: TypeScript errors or missing dependencies.</p> <p>Solution: 1. Check TypeScript errors:    <pre><code>npx tsc --noEmit\n</code></pre> 2. Reinstall dependencies:    <pre><code>rm -rf node_modules package-lock.json\nnpm install\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#environment-variables","level":2,"title":"Environment Variables","text":"<p>The inspector UI respects some environment variables:</p> Variable Description <code>VITE_PORT</code> Override Vite dev server port <code>NODE_ENV</code> Set to <code>production</code> for production builds <p>Example: <pre><code>VITE_PORT=5174 npm run dev\n</code></pre></p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#api-endpoints","level":2,"title":"API Endpoints","text":"<p>The inspector communicates with the Crystal backend via:</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#rest-api","level":3,"title":"REST API","text":"Endpoint Method Description <code>/api/requests</code> GET Get all stored requests <code>/api/requests/clear</code> POST Clear all requests","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#websocket","level":3,"title":"WebSocket","text":"Endpoint Description <code>/api/live</code> Real-time request updates","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#styling-with-tailwind-css","level":2,"title":"Styling with Tailwind CSS","text":"<p>The inspector uses Tailwind CSS v4 for styling.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#usage","level":3,"title":"Usage","text":"<pre><code>&lt;div className=\"bg-gray-900 text-white p-4\"&gt;\n  Content here\n&lt;/div&gt;\n</code></pre>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#configuration_1","level":3,"title":"Configuration","text":"<p>Tailwind is configured via Vite plugin in <code>vite.config.ts</code>. No separate config file needed for v4.</p>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#testing","level":2,"title":"Testing","text":"<p>Currently no automated tests are set up. Manual testing:</p> <ol> <li> <p>Start a tunnel:    <pre><code>./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Make requests to public URL</p> </li> <li> <p>Open inspector: <code>http://127.0.0.1:4040</code></p> </li> <li> <p>Verify requests appear in real-time</p> </li> </ol>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/setup/#see-also","level":2,"title":"See Also","text":"<ul> <li>Component Architecture - React component structure</li> <li>State Management - How state is managed</li> <li>Embedding in Binary - Production deployment</li> <li>Inspector User Guide - End-user documentation</li> </ul>","path":["Developer","Inspector ui","Inspector UI Setup"],"tags":[]},{"location":"developer/inspector-ui/state-management/","level":1,"title":"Inspector UI State Management","text":"<p>How state is managed in the Sellia Inspector UI, including data flow, WebSocket communication, and React patterns.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#overview","level":2,"title":"Overview","text":"<p>The Inspector UI uses React's built-in state management with hooks. There's no external state management library (no Redux, Zustand, etc.) - keeping it simple and maintainable.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#state-architecture","level":2,"title":"State Architecture","text":"<pre><code>┌─────────────────────────────────────────────────────────┐\n│                         App.tsx                         │\n├─────────────────────────────────────────────────────────┤\n│                                                          │\n│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐ │\n│  │ requests[]   │  │ selected     │  │ connected    │ │\n│  │ (useState)   │  │ (useState)   │  │ (useState)   │ │\n│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘ │\n│         │                 │                 │           │\n│         ▼                 ▼                 ▼           │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │              WebSocket Effect                     │  │\n│  │  (onmessage → setRequests)                       │  │\n│  └──────────────────────────────────────────────────┘  │\n│                                                          │\n│  ┌──────────────────────────────────────────────────┐  │\n│  │              Fetch Effect                         │  │\n│  │  (on mount → fetch /api/requests)                │  │\n│  └──────────────────────────────────────────────────┘  │\n└─────────────────────────────────────────────────────────┘\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#state-variables","level":2,"title":"State Variables","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#1-requests-request-list","level":3,"title":"1. <code>requests</code> - Request List","text":"<pre><code>const [requests, setRequests] = useState&lt;Request[]&gt;([])\n</code></pre> <p>Purpose: Stores all captured HTTP requests.</p> <p>Type: <code>Request[]</code></p> <p>Max Size: 1000 requests (enforced via <code>.slice(0, 1000)</code>)</p> <p>Updates: - Initial load from <code>/api/requests</code> REST API - Live updates from <code>/api/live</code> WebSocket - Cleared via <code>/api/requests/clear</code> POST request</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#2-selected-selected-request","level":3,"title":"2. <code>selected</code> - Selected Request","text":"<pre><code>const [selected, setSelected] = useState&lt;Request | null&gt;(null)\n</code></pre> <p>Purpose: Tracks which request is currently displayed in detail view.</p> <p>Type: <code>Request | null</code></p> <p>Updates: - Set when user clicks a request in the list - Cleared when \"Clear All\" is clicked</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#3-connected-connection-status","level":3,"title":"3. <code>connected</code> - Connection Status","text":"<pre><code>const [connected, setConnected] = useState(false)\n</code></pre> <p>Purpose: Tracks WebSocket connection status.</p> <p>Type: <code>boolean</code></p> <p>Updates: - Set to <code>true</code> when WebSocket opens - Set to <code>false</code> when WebSocket closes - Displayed as \"Live\" (green) or \"Disconnected\" (red) badge</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#4-reconnectcounter-reconnection-trigger","level":3,"title":"4. <code>reconnectCounter</code> - Reconnection Trigger","text":"<pre><code>const [reconnectCounter, setReconnectCounter] = useState(0)\n</code></pre> <p>Purpose: Triggers WebSocket reconnection by incrementing.</p> <p>Type: <code>number</code></p> <p>Updates: - Incremented after 3-second delay on WebSocket close - Used as dependency in WebSocket effect to re-establish connection</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#data-flow","level":2,"title":"Data Flow","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#initial-load-flow","level":3,"title":"Initial Load Flow","text":"<pre><code>1. App mounts\n   ↓\n2. Fetch Effect runs\n   ↓\n3. GET /api/requests\n   ↓\n4. setRequests(data)\n   ↓\n5. UI renders request list\n</code></pre> <p>Code:</p> <pre><code>useEffect(() =&gt; {\n  fetch('/api/requests')\n    .then(r =&gt; r.json())\n    .then(data =&gt; setRequests(data))\n    .catch(console.error)\n}, [])\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#live-updates-flow","level":3,"title":"Live Updates Flow","text":"<pre><code>1. WebSocket connects\n   ↓\n2. setConnected(true)\n   ↓\n3. Server sends message\n   ↓\n4. ws.onmessage triggered\n   ↓\n5. JSON.parse(data)\n   ↓\n6. setRequests([newRequest, ...prev].slice(0, 1000))\n   ↓\n7. UI re-renders with new request at top\n</code></pre> <p>Code:</p> <pre><code>ws.onmessage = (event) =&gt; {\n  try {\n    const data = JSON.parse(event.data)\n    if (data.type === 'request') {\n      setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n    }\n  } catch (e) {\n    console.error('Failed to parse message:', e)\n  }\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#selection-flow","level":3,"title":"Selection Flow","text":"<pre><code>1. User clicks request item\n   ↓\n2. onClick handler fires\n   ↓\n3. setSelected(request)\n   ↓\n4. Detail panel re-renders with new request data\n</code></pre> <p>Code:</p> <pre><code>onClick={() =&gt; setSelected(req)}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#clear-flow","level":3,"title":"Clear Flow","text":"<pre><code>1. User clicks \"Clear All\"\n   ↓\n2. POST /api/requests/clear\n   ↓\n3. Backend clears request store\n   ↓\n4. setRequests([])\n   ↓\n5. setSelected(null)\n   ↓\n6. UI shows empty state\n</code></pre> <p>Code:</p> <pre><code>onClick={async () =&gt; {\n  await fetch('/api/requests/clear', { method: 'POST' })\n  setRequests([])\n}}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#websocket-lifecycle","level":2,"title":"WebSocket Lifecycle","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#connection-phase","level":3,"title":"Connection Phase","text":"<pre><code>const ws = new WebSocket(`ws://${window.location.host}/api/live`)\n\nws.onopen = () =&gt; {\n  setConnected(true)\n}\n</code></pre> <p>Events: - WebSocket opens → Update connection status - Ready to receive live updates</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#message-phase","level":3,"title":"Message Phase","text":"<pre><code>ws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data)\n  if (data.type === 'request') {\n    setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n  }\n}\n</code></pre> <p>Message Format:</p> <pre><code>{\n  type: 'request',\n  request: {\n    id: string,\n    method: string,\n    path: string,\n    statusCode: number,\n    duration: number,\n    timestamp: Date,\n    requestHeaders: Record&lt;string, string&gt;,\n    requestBody?: string,\n    responseHeaders: Record&lt;string, string&gt;,\n    responseBody?: string,\n    matchedRoute?: string,\n    matchedTarget?: string\n  }\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#disconnection-phase","level":3,"title":"Disconnection Phase","text":"<pre><code>ws.onclose = () =&gt; {\n  setConnected(false)\n  setTimeout(() =&gt; {\n    setReconnectCounter(prev =&gt; prev + 1)\n  }, 3000)\n}\n</code></pre> <p>Events: 1. WebSocket closes → Update status to disconnected 2. Wait 3 seconds 3. Increment reconnection counter 4. Effect re-runs and establishes new WebSocket</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#cleanup-phase","level":3,"title":"Cleanup Phase","text":"<pre><code>return () =&gt; ws.close()\n</code></pre> <p>Events: - Component unmounts - WebSocket connection closed - Prevents memory leaks</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#reconnection-strategy","level":2,"title":"Reconnection Strategy","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#exponential-backoff","level":3,"title":"Exponential Backoff","text":"<p>Currently uses fixed 3-second delay:</p> <pre><code>setTimeout(() =&gt; {\n  setReconnectCounter(prev =&gt; prev + 1)\n}, 3000)\n</code></pre> <p>Future improvement: Implement exponential backoff:</p> <pre><code>const [retryCount, setRetryCount] = useState(0)\n\nuseEffect(() =&gt; {\n  const delay = Math.min(1000 * Math.pow(2, retryCount), 30000)\n  const timeout = setTimeout(() =&gt; {\n    setReconnectCounter(prev =&gt; prev + 1)\n    setRetryCount(prev =&gt; prev + 1)\n  }, delay)\n\n  return () =&gt; clearTimeout(timeout)\n}, [connected])\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#state-synchronization","level":2,"title":"State Synchronization","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#backend-frontend","level":3,"title":"Backend → Frontend","text":"<p>REST API (initial load): <pre><code>Crystal Backend → /api/requests → React State\n</code></pre></p> <p>WebSocket (live updates): <pre><code>Crystal Backend → /api/live → WebSocket → React State\n</code></pre></p> <p>State mutation: Only via <code>setRequests()</code></p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#frontend-backend","level":3,"title":"Frontend → Backend","text":"<p>Clear requests: <pre><code>React State → /api/requests/clear → Crystal Backend\n</code></pre></p> <p>No bidirectional sync needed: - Backend is source of truth - Frontend is display layer - Actions are fire-and-forget</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#performance-optimizations","level":2,"title":"Performance Optimizations","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#1-request-limit","level":3,"title":"1. Request Limit","text":"<pre><code>setRequests(prev =&gt; [data.request, ...prev].slice(0, 1000))\n</code></pre> <p>Benefit: Prevents unbounded memory growth.</p> <p>Trade-off: Loses oldest requests beyond 1000.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#2-immutability","level":3,"title":"2. Immutability","text":"<pre><code>[request, ...prev]  // Creates new array\n</code></pre> <p>Benefit: React can efficiently detect changes and re-render.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#3-conditional-rendering","level":3,"title":"3. Conditional Rendering","text":"<pre><code>{selected ? &lt;RequestDetail /&gt; : &lt;Placeholder /&gt;}\n</code></pre> <p>Benefit: Only renders detail panel when request selected.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#4-websocket-message-batching","level":3,"title":"4. WebSocket Message Batching","text":"<p>Current: Each request sent immediately.</p> <p>Future: Batch multiple requests:</p> <pre><code>ws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data)\n  if (data.type === 'requests') {\n    setRequests(prev =&gt; [...data.requests, ...prev].slice(0, 1000))\n  }\n}\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#error-handling","level":2,"title":"Error Handling","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#fetch-errors","level":3,"title":"Fetch Errors","text":"<pre><code>fetch('/api/requests')\n  .catch(console.error)\n</code></pre> <p>Behavior: Errors logged to console, UI shows empty state.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#websocket-errors","level":3,"title":"WebSocket Errors","text":"<pre><code>ws.onerror = (error) =&gt; {\n  console.error('WebSocket error:', error)\n}\n</code></pre> <p>Behavior: Error logged, reconnection triggered via <code>onclose</code>.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#parse-errors","level":3,"title":"Parse Errors","text":"<pre><code>try {\n  const data = JSON.parse(event.data)\n} catch (e) {\n  console.error('Failed to parse message:', e)\n}\n</code></pre> <p>Behavior: Bad messages ignored, connection maintained.</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#state-persistence","level":2,"title":"State Persistence","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#current-no-persistence","level":3,"title":"Current: No Persistence","text":"<ul> <li>Request list lives in memory only</li> <li>Lost on page refresh</li> <li>Lost on WebSocket reconnect</li> </ul>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#future-localstorage-persistence","level":3,"title":"Future: LocalStorage Persistence","text":"<pre><code>// Save to localStorage\nuseEffect(() =&gt; {\n  localStorage.setItem('requests', JSON.stringify(requests))\n}, [requests])\n\n// Load from localStorage\nuseEffect(() =&gt; {\n  const saved = localStorage.getItem('requests')\n  if (saved) {\n    setRequests(JSON.parse(saved))\n  }\n}, [])\n</code></pre> <p>Trade-offs: - ✅ Survives page refresh - ❌ Limited storage (5-10MB) - ❌ Requires serialization/deserialization overhead</p>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#testing-state-management","level":2,"title":"Testing State Management","text":"","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#unit-testing-future","level":3,"title":"Unit Testing (Future)","text":"<pre><code>test('adding request updates state', () =&gt; {\n  const { result } = renderHook(() =&gt; useApp())\n  act(() =&gt; {\n    result.current.addRequest(mockRequest)\n  })\n  expect(result.current.requests).toHaveLength(1)\n})\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#integration-testing-future","level":3,"title":"Integration Testing (Future)","text":"<pre><code>test('WebSocket message adds request', async () =&gt; {\n  const ws = new WebSocket('ws://localhost:4040/api/live')\n  await waitFor(() =&gt; {\n    expect(screen.getByText('GET /api')).toBeInTheDocument()\n  })\n})\n</code></pre>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/inspector-ui/state-management/#see-also","level":2,"title":"See Also","text":"<ul> <li>Component Architecture - Component structure</li> <li>Setup Guide - Development setup</li> <li>Embedding in Binary - Production deployment</li> <li>Backend Inspector - Crystal backend</li> </ul>","path":["Developer","Inspector ui","Inspector UI State Management"],"tags":[]},{"location":"developer/project-structure/protocol-messages/","level":1,"title":"Protocol Message Types Reference","text":"<p>Complete reference of all MessagePack protocol message types used in Sellia.</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#base-message-class","level":2,"title":"Base Message Class","text":"<p>All protocol messages extend <code>Sellia::Protocol::Message</code>:</p> <pre><code>abstract class Message\n  include MessagePack::Serializable\n\n  # Type discriminator for polymorphic deserialization\n  use_msgpack_discriminator \"type\", {\n    auth:             Messages::Auth,\n    auth_ok:          Messages::AuthOk,\n    auth_error:       Messages::AuthError,\n    tunnel_open:      Messages::TunnelOpen,\n    tunnel_ready:     Messages::TunnelReady,\n    tunnel_close:     Messages::TunnelClose,\n    request_start:    Messages::RequestStart,\n    request_body:     Messages::RequestBody,\n    response_start:   Messages::ResponseStart,\n    response_body:    Messages::ResponseBody,\n    response_end:     Messages::ResponseEnd,\n    ping:             Messages::Ping,\n    pong:             Messages::Pong,\n    ws_upgrade:       Messages::WebSocketUpgrade,\n    ws_upgrade_ok:    Messages::WebSocketUpgradeOk,\n    ws_upgrade_error: Messages::WebSocketUpgradeError,\n    ws_frame:         Messages::WebSocketFrame,\n    ws_close:         Messages::WebSocketClose,\n  }\n\n  abstract def type : String\nend\n</code></pre> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/message.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#message-types-by-category","level":2,"title":"Message Types by Category","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#authentication-messages","level":3,"title":"Authentication Messages","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#auth-client-server","level":4,"title":"Auth (Client → Server)","text":"<p>Authentication request with API key.</p> <pre><code>class Auth &lt; Message\n  property type : String = \"auth\"\n  property api_key : String\n\n  def initialize(@api_key : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"auth\"</code> - <code>api_key</code>: API key for authentication</p> <p>When Sent: - Immediately after WebSocket connection - Only if server requires authentication</p> <p>Response: - <code>AuthOk</code> on success - <code>AuthError</code> on failure</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/auth.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#authok-server-client","level":4,"title":"AuthOk (Server → Client)","text":"<p>Authentication successful response.</p> <pre><code>class AuthOk &lt; Message\n  property type : String = \"auth_ok\"\n  property account_id : String\n  property limits : Hash(String, Int64)\n\n  def initialize(@account_id : String, @limits : Hash(String, Int64) = {} of String =&gt; Int64)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"auth_ok\"</code> - <code>account_id</code>: Unique account identifier - <code>limits</code>: Rate limit configuration (empty hash by default)   - <code>max_tunnels</code>: Maximum tunnels allowed   - <code>max_connections</code>: Maximum concurrent connections</p> <p>When Sent: - After successful <code>Auth</code> validation</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/auth.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#autherror-server-client","level":4,"title":"AuthError (Server → Client)","text":"<p>Authentication failed response.</p> <pre><code>class AuthError &lt; Message\n  property type : String = \"auth_error\"\n  property error : String\n\n  def initialize(@error : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"auth_error\"</code> - <code>error</code>: Human-readable error message</p> <p>When Sent: - When API key is invalid or missing - When account is suspended</p> <p>Client Behavior: - Disable auto-reconnect - Close connection - Display error to user</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/auth.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#tunnel-management-messages","level":3,"title":"Tunnel Management Messages","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#tunnelopen-client-server","level":4,"title":"TunnelOpen (Client → Server)","text":"<p>Request to create a new tunnel.</p> <pre><code>class TunnelOpen &lt; Message\n  property type : String = \"tunnel_open\"\n  property tunnel_type : String # \"http\" or \"tcp\"\n  property local_port : Int32\n  property subdomain : String? # Optional: custom subdomain\n  property auth : String?      # Optional: \"user:pass\" for basic auth\n\n  def initialize(\n    @tunnel_type : String,\n    @local_port : Int32,\n    @subdomain : String? = nil,\n    @auth : String? = nil,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"tunnel_open\"</code> - <code>tunnel_type</code>: Tunnel type (<code>\"http\"</code> currently, <code>\"tcp\"</code> reserved for future) - <code>local_port</code>: Local service port - <code>subdomain</code>: Optional custom subdomain (3-63 chars) - <code>auth</code>: Optional basic auth credential (<code>\"user:pass\"</code>)</p> <p>When Sent: - After successful authentication - Or immediately if auth disabled</p> <p>Response: - <code>TunnelReady</code> on success - <code>TunnelClose</code> on failure</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/tunnel.cr</code></p> <p>Subdomain Rules: - 3-63 characters - Alphanumeric and hyphens only - Cannot start/end with hyphen - No consecutive hyphens - Must not be reserved - Must be available</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#tunnelready-server-client","level":4,"title":"TunnelReady (Server → Client)","text":"<p>Tunnel created successfully and ready to receive requests.</p> <pre><code>class TunnelReady &lt; Message\n  property type : String = \"tunnel_ready\"\n  property tunnel_id : String\n  property url : String\n  property subdomain : String\n\n  def initialize(@tunnel_id : String, @url : String, @subdomain : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"tunnel_ready\"</code> - <code>tunnel_id</code>: Unique tunnel identifier (32 hex chars) - <code>url</code>: Full public URL - <code>subdomain</code>: Assigned subdomain</p> <p>When Sent: - After tunnel is registered - Subdomain is validated and assigned</p> <p>URL Format: - HTTP: <code>http://subdomain.domain:port</code> - HTTPS: <code>https://subdomain.domain</code></p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/tunnel.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#tunnelclose-bidirectional","level":4,"title":"TunnelClose (Bidirectional)","text":"<p>Tunnel is being closed.</p> <pre><code>class TunnelClose &lt; Message\n  property type : String = \"tunnel_close\"\n  property tunnel_id : String\n  property reason : String?\n\n  def initialize(@tunnel_id : String, @reason : String? = nil)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"tunnel_close\"</code> - <code>tunnel_id</code>: Tunnel being closed - <code>reason</code>: Optional reason for closure</p> <p>When Sent: - Server → Client: Tunnel closed due to error, subdomain conflict, or server shutdown - Client → Server: Client explicitly closing tunnel</p> <p>Common Reasons: - <code>\"Subdomain 'xxx' is not available\"</code> - <code>\"Rate limit exceeded: too many tunnel creations\"</code> - <code>\"Connection timeout\"</code> - <code>\"Not authenticated\"</code></p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/tunnel.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#http-request-messages","level":3,"title":"HTTP Request Messages","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#requeststart-server-client","level":4,"title":"RequestStart (Server → Client)","text":"<p>Start of an incoming HTTP request.</p> <pre><code>class RequestStart &lt; Message\n  property type : String = \"request_start\"\n  property request_id : String\n  property tunnel_id : String\n  property method : String\n  property path : String\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @tunnel_id : String,\n    @method : String,\n    @path : String,\n    @headers : Hash(String, Array(String)),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"request_start\"</code> - <code>request_id</code>: Unique request identifier (32 hex chars) - <code>tunnel_id</code>: Tunnel this request is for - <code>method</code>: HTTP method (<code>GET</code>, <code>POST</code>, etc.) - <code>path</code>: Full path including query string - <code>headers</code>: Multi-value header hash</p> <p>When Sent: - When server receives HTTP request for tunnel - Before request body chunks</p> <p>Client Behavior: - Store request metadata - Initialize body buffer - Wait for body chunks</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#requestbody-server-client","level":4,"title":"RequestBody (Server → Client)","text":"<p>Request body chunk (streaming).</p> <pre><code>class RequestBody &lt; Message\n  property type : String = \"request_body\"\n  property request_id : String\n  property chunk : Bytes\n  property final : Bool\n\n  def initialize(@request_id : String, @chunk : Bytes, @final : Bool = false)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"request_body\"</code> - <code>request_id</code>: Request identifier - <code>chunk</code>: Binary data chunk (up to 8KB) - <code>final</code>: <code>true</code> on last chunk (defaults to <code>false</code>)</p> <p>When Sent: - One or more times after <code>RequestStart</code> - <code>final=true</code> on last chunk (even if empty)</p> <p>Client Behavior: - Append chunk to body buffer - When <code>final=true</code>, forward request to local service</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#http-response-messages","level":3,"title":"HTTP Response Messages","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#responsestart-client-server","level":4,"title":"ResponseStart (Client → Server)","text":"<p>Start of HTTP response from local service.</p> <pre><code>class ResponseStart &lt; Message\n  property type : String = \"response_start\"\n  property request_id : String\n  property status_code : Int32\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @status_code : Int32,\n    @headers : Hash(String, Array(String)),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"response_start\"</code> - <code>request_id</code>: Request being responded to - <code>status_code</code>: HTTP status code (200, 404, etc.) - <code>headers</code>: Response headers</p> <p>When Sent: - After receiving response from local service - Before response body chunks</p> <p>Server Behavior: - Write status code to HTTP response - Write headers to HTTP response</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#responsebody-client-server","level":4,"title":"ResponseBody (Client → Server)","text":"<p>Response body chunk (streaming).</p> <pre><code>class ResponseBody &lt; Message\n  property type : String = \"response_body\"\n  property request_id : String\n  property chunk : Bytes\n\n  def initialize(@request_id : String, @chunk : Bytes)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"response_body\"</code> - <code>request_id</code>: Request being responded to - <code>chunk</code>: Binary data chunk (up to 8KB)</p> <p>When Sent: - One or more times after <code>ResponseStart</code> - Stream response body in chunks</p> <p>Server Behavior: - Write chunk to HTTP response body - Flush to send to client</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#responseend-client-server","level":4,"title":"ResponseEnd (Client → Server)","text":"<p>End of HTTP response.</p> <pre><code>class ResponseEnd &lt; Message\n  property type : String = \"response_end\"\n  property request_id : String\n\n  def initialize(@request_id : String)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"response_end\"</code> - <code>request_id</code>: Request being responded to</p> <p>When Sent: - After all response body chunks sent</p> <p>Server Behavior: - Complete HTTP response - Remove from pending request store - Signal waiting fiber</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#keep-alive-messages","level":3,"title":"Keep-Alive Messages","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#ping-server-client","level":4,"title":"Ping (Server → Client)","text":"<p>Keep-alive ping.</p> <pre><code>class Ping &lt; Message\n  property type : String = \"ping\"\n  property timestamp : Int64\n\n  def initialize(@timestamp : Int64 = Time.utc.to_unix_ms)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ping\"</code> - <code>timestamp</code>: Unix timestamp in milliseconds (defaults to current time)</p> <p>When Sent: - Every 30 seconds - To detect stale connections</p> <p>Client Behavior: - Immediately respond with <code>Pong</code> - Update last activity timestamp</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#pong-client-server","level":4,"title":"Pong (Client → Server)","text":"<p>Keep-alive pong response.</p> <pre><code>class Pong &lt; Message\n  property type : String = \"pong\"\n  property timestamp : Int64\n\n  def initialize(@timestamp : Int64 = Time.utc.to_unix_ms)\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"pong\"</code> - <code>timestamp</code>: Timestamp from ping (echoed back, defaults to current time)</p> <p>When Sent: - In response to <code>Ping</code></p> <p>Server Behavior: - Update client's last activity timestamp - Don't timeout connection</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/request.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocket-messages","level":3,"title":"WebSocket Messages","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocketupgrade-server-client","level":4,"title":"WebSocketUpgrade (Server → Client)","text":"<p>Incoming WebSocket upgrade request.</p> <pre><code>class WebSocketUpgrade &lt; Message\n  property type : String = \"ws_upgrade\"\n  property request_id : String\n  property tunnel_id : String\n  property path : String\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @tunnel_id : String,\n    @path : String,\n    @headers : Hash(String, Array(String)),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_upgrade\"</code> - <code>request_id</code>: Unique identifier for this WebSocket - <code>tunnel_id</code>: Tunnel for this WebSocket - <code>path</code>: WebSocket path - <code>headers</code>: All headers including <code>Sec-WebSocket-*</code></p> <p>Important Headers: - <code>Sec-WebSocket-Key</code>: Handshake key - <code>Sec-WebSocket-Version</code>: Must be \"13\" - <code>Sec-WebSocket-Protocol</code>: Optional subprotocol</p> <p>When Sent: - When server receives WebSocket upgrade request</p> <p>Client Behavior: - Route to local WebSocket service - Attempt connection - Respond with <code>WebSocketUpgradeOk</code> or <code>WebSocketUpgradeError</code></p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocketupgradeok-client-server","level":4,"title":"WebSocketUpgradeOk (Client → Server)","text":"<p>Local service accepted WebSocket connection.</p> <pre><code>class WebSocketUpgradeOk &lt; Message\n  property type : String = \"ws_upgrade_ok\"\n  property request_id : String\n  property headers : Hash(String, Array(String))\n\n  def initialize(\n    @request_id : String,\n    @headers : Hash(String, Array(String)) = {} of String =&gt; Array(String),\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_upgrade_ok\"</code> - <code>request_id</code>: WebSocket identifier - <code>headers</code>: Optional response headers (e.g., <code>Sec-WebSocket-Protocol</code>, defaults to empty hash)</p> <p>When Sent: - After successfully connecting to local WebSocket service</p> <p>Server Behavior: - Complete handshake with external client - Start frame forwarding loop</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocketupgradeerror-client-server","level":4,"title":"WebSocketUpgradeError (Client → Server)","text":"<p>Local service rejected WebSocket connection.</p> <pre><code>class WebSocketUpgradeError &lt; Message\n  property type : String = \"ws_upgrade_error\"\n  property request_id : String\n  property status_code : Int32\n  property message : String\n\n  def initialize(\n    @request_id : String,\n    @status_code : Int32,\n    @message : String,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_upgrade_error\"</code> - <code>request_id</code>: WebSocket identifier - <code>status_code</code>: HTTP status code (usually 502) - <code>message</code>: Error description</p> <p>When Sent: - If local service unavailable - If connection fails - If local service rejects upgrade</p> <p>Server Behavior: - Send error response to external client - Close connection</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocketframe-bidirectional","level":4,"title":"WebSocketFrame (Bidirectional)","text":"<p>WebSocket frame data.</p> <pre><code>class WebSocketFrame &lt; Message\n  property type : String = \"ws_frame\"\n  property request_id : String\n  property opcode : UInt8\n  property payload : Bytes\n  property fin : Bool\n\n  def initialize(\n    @request_id : String,\n    @opcode : UInt8,\n    @payload : Bytes,\n    @fin : Bool = true,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_frame\"</code> - <code>request_id</code>: WebSocket identifier - <code>opcode</code>: Frame opcode (see below) - <code>payload</code>: Frame payload data - <code>fin</code>: Whether this is the final frame (defaults to <code>true</code>)</p> <p>Opcode Values: - <code>0x01</code> - Text frame - <code>0x02</code> - Binary frame - <code>0x08</code> - Close - <code>0x09</code> - Ping - <code>0x0A</code> - Pong</p> <p>When Sent: - Bidirectional after WebSocket upgrade - For each WebSocket frame</p> <p>Fragmentation: - Text/Binary frames can be fragmented - <code>fin=false</code> on fragments, <code>fin=true</code> on final - Continuation frames use same opcode as initial frame</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocketclose-bidirectional","level":4,"title":"WebSocketClose (Bidirectional)","text":"<p>WebSocket connection closing.</p> <pre><code>class WebSocketClose &lt; Message\n  property type : String = \"ws_close\"\n  property request_id : String\n  property code : UInt16?\n  property reason : String?\n\n  def initialize(\n    @request_id : String,\n    @code : UInt16? = nil,\n    @reason : String? = nil,\n  )\n  end\nend\n</code></pre> <p>Fields: - <code>type</code>: Always <code>\"ws_close\"</code> - <code>request_id</code>: WebSocket identifier - <code>code</code>: Optional WebSocket close code (defaults to <code>nil</code>) - <code>reason</code>: Optional close reason (defaults to <code>nil</code>)</p> <p>Common Close Codes: - <code>1000</code> - Normal closure - <code>1001</code> - Going away - <code>1002</code> - Protocol error - <code>1003</code> - Unsupported data - <code>1006</code> - Abnormal closure - <code>1008</code> - Policy violation - <code>1009</code> - Message too big - <code>1011</code> - Internal error</p> <p>When Sent: - When either side closes WebSocket - To gracefully shutdown connection</p> <p>Behavior: - Remove from pending WebSocket store - Close connection to other side - Clean up resources</p> <p>Location: <code>/Users/watzon/conductor/workspaces/sellia/winnipeg/src/core/protocol/messages/websocket.cr</code></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#message-serialization","level":2,"title":"Message Serialization","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#to-messagepack","level":3,"title":"To MessagePack","text":"<pre><code>message = Protocol::Messages::Auth.new(\"key_...\")\nbytes = message.to_msgpack\n# =&gt; Bytes containing MessagePack binary data\n</code></pre>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#from-messagepack","level":3,"title":"From MessagePack","text":"<pre><code>message = Protocol::Message.from_msgpack(bytes)\n\ncase message\nwhen Protocol::Messages::Auth\n  puts \"Auth: #{message.api_key}\"\nwhen Protocol::Messages::TunnelReady\n  puts \"Tunnel ready: #{message.url}\"\nend\n</code></pre> <p>The <code>type</code> field is used for polymorphic deserialization.</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#request-id-generation","level":2,"title":"Request ID Generation","text":"<p>Request IDs are generated using cryptographically secure random:</p> <pre><code>request_id = Random::Secure.hex(16)  # 32 hex characters\n</code></pre> <p>Example: <code>\"a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6\"</code></p> <p>These IDs: - Are unique per request - Cannot be guessed - Used to correlate request/response messages</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#header-format","level":2,"title":"Header Format","text":"<p>Headers use multi-value hash to preserve multiple values:</p> <pre><code>headers = Hash(String, Array(String)).new\nheaders[\"Set-Cookie\"] = [\"session=abc\", \"theme=dark\"]\nheaders[\"Accept\"] = [\"application/json\", \"text/html\"]\n</code></pre> <p>When serializing to MessagePack: <pre><code>{\n  \"Set-Cookie\": [\"session=abc\", \"theme=dark\"],\n  \"Accept\": [\"application/json\", \"text/html\"]\n}\n</code></pre></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#binary-data-handling","level":2,"title":"Binary Data Handling","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#requestresponse-bodies","level":3,"title":"Request/Response Bodies","text":"<p>Sent as raw bytes in MessagePack binary format:</p> <pre><code>class RequestBody &lt; Message\n  property chunk : Bytes  # Serialized as bin8/bin16/bin32\nend\n</code></pre> <p>Chunk sizes: - Recommended: 8KB (8192 bytes) - Maximum: Limited by memory</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocket-payloads","level":3,"title":"WebSocket Payloads","text":"<p>Same as request/response bodies - sent as raw bytes.</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#message-flow-examples","level":2,"title":"Message Flow Examples","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#simple-http-request","level":3,"title":"Simple HTTP Request","text":"<pre><code>Server → Client: RequestStart(id=\"req1\", method=\"GET\", path=\"/api\")\nServer → Client: RequestBody(id=\"req1\", chunk=Bytes.empty, final=true)\nClient → Server: ResponseStart(id=\"req1\", status=200, headers={...})\nClient → Server: ResponseBody(id=\"req1\", chunk=\"Hello World\".to_slice)\nClient → Server: ResponseEnd(id=\"req1\")\n</code></pre>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#http-request-with-body","level":3,"title":"HTTP Request with Body","text":"<pre><code>Server → Client: RequestStart(id=\"req2\", method=\"POST\", path=\"/api/users\")\nServer → Client: RequestBody(id=\"req2\", chunk='{\"name\":', final=false)\nServer → Client: RequestBody(id=\"req2\", chunk=' \"Alice\"}', final=true)\nClient → Server: ResponseStart(id=\"req2\", status=201, headers={...})\nClient → Server: ResponseBody(id=\"req2\", chunk='{\"id\": 1}'.to_slice)\nClient → Server: ResponseEnd(id=\"req2\")\n</code></pre>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#websocket-connection","level":3,"title":"WebSocket Connection","text":"<pre><code>Server → Client: WebSocketUpgrade(id=\"ws1\", path=\"/socket\", headers={...})\nClient → Server: WebSocketUpgradeOk(id=\"ws1\", headers={...})\nClient → Server: WebSocketFrame(id=\"ws1\", opcode=0x01, payload=\"Hello\")\nServer → Client: WebSocketFrame(id=\"ws1\", opcode=0x01, payload=\"Hi there\")\nServer → Client: WebSocketClose(id=\"ws1\", code=1000, reason=\"Normal\")\nClient → Server: WebSocketClose(id=\"ws1\", code=1000, reason=\"Normal\")\n</code></pre>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#error-handling","level":2,"title":"Error Handling","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#invalid-message-type","level":3,"title":"Invalid Message Type","text":"<p>If unknown <code>type</code> received: <pre><code>Error: MessagePack::Error\nMessage: Unknown discriminator value: \"unknown_type\"\n</code></pre></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#missing-required-fields","level":3,"title":"Missing Required Fields","text":"<p>MessagePack deserialization will raise: <pre><code>Error: MessagePack::Error\nMessage: Missing required field: \"request_id\"\n</code></pre></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#malformed-binary-data","level":3,"title":"Malformed Binary Data","text":"<p>Binary fields expect <code>Bytes</code> type - receiving other types raises error during deserialization.</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#message-size","level":3,"title":"Message Size","text":"<ul> <li>Authentication messages: ~100 bytes</li> <li>RequestStart: ~500 bytes (depends on headers)</li> <li>RequestBody: ~8KB per chunk</li> <li>ResponseStart: ~300 bytes</li> <li>ResponseBody: ~8KB per chunk</li> </ul>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#serialization-overhead","level":3,"title":"Serialization Overhead","text":"<p>MessagePack serialization adds: - Type discriminator (string): ~10 bytes - Field names: ~5-20 bytes per field - Binary metadata: ~5 bytes</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#compression","level":3,"title":"Compression","text":"<p>Currently not compressed. Future versions may add: - Per-message compression (WebSocket permessage-deflate) - Header compression (dynamic dictionaries)</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#version-compatibility","level":2,"title":"Version Compatibility","text":"","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#protocol-versioning","level":3,"title":"Protocol Versioning","text":"<p>The <code>type</code> field allows protocol evolution: - New message types can be added - Old clients ignore unknown types - Servers must handle both old and new formats</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#backward-compatibility","level":3,"title":"Backward Compatibility","text":"<p>When adding new fields: 1. Make fields optional (use <code>?</code> or provide default) 2. Old clients will deserialize without new fields 3. Servers must handle missing fields</p> <p>Example: <pre><code>class TunnelReady &lt; Message\n  property url : String\n  property region : String?  # New optional field\nend\n</code></pre></p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/protocol-messages/#forward-compatibility","level":3,"title":"Forward Compatibility","text":"<p>When removing fields: 1. Keep field in protocol but mark deprecated 2. Servers must accept field but ignore it 3. Remove in next major version</p>","path":["Developer","Project structure","Protocol Message Types Reference"],"tags":[]},{"location":"developer/project-structure/source-layout/","level":1,"title":"Source Layout","text":"<p>This document describes the organization of Sellia's source code and the purpose of each directory and module.</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Overview</li> <li>Directory Structure</li> <li>Core Components</li> <li>Server Components</li> <li>CLI Components</li> <li>Inspector UI</li> <li>Tests</li> <li>Configuration Files</li> </ul>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#overview","level":2,"title":"Overview","text":"<p>Sellia is organized as a Crystal application with a React-based inspector UI. The codebase follows a modular architecture with clear separation of concerns:</p> <pre><code>sellia/\n├── src/              # Crystal source code\n│   ├── core/         # Shared protocol and types\n│   ├── server/       # Tunnel server implementation\n│   └── cli/          # CLI client implementation\n├── web/              # React inspector UI\n├── spec/             # Crystal tests\n└── docs/             # Documentation\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#directory-structure","level":2,"title":"Directory Structure","text":"","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#root-directory","level":3,"title":"Root Directory","text":"<pre><code>sellia/\n├── bin/              # Compiled binaries (generated)\n│   ├── sellia        # CLI client binary\n│   └── sellia-server # Server binary\n├── src/              # Crystal source code\n├── spec/             # Crystal test files\n├── web/              # Inspector UI (React + TypeScript)\n├── docs/             # Documentation\n├── docker/           # Docker configurations\n├── .github/          # GitHub workflows and templates\n├── shard.yml         # Crystal dependencies\n└── package.json      # Node.js dependencies (web/)\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#top-level-files","level":3,"title":"Top-Level Files","text":"File Purpose <code>shard.yml</code> Crystal dependency manifest <code>shard.lock</code> Locked Crystal dependencies <code>package.json</code> Node.js dependencies for inspector UI <code>LICENSE</code> MIT license <code>README.md</code> Project overview and usage <code>CONTRIBUTING.md</code> Contribution guidelines <code>SECURITY.md</code> Security policy and disclosure <code>ROADMAP.md</code> Project roadmap and feature plans <code>.gitignore</code> Git ignore patterns <code>Dockerfile</code> Server container image <code>docker-compose.yml</code> Development Docker setup <code>docker-compose.prod.yml</code> Production Docker setup","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#core-components","level":2,"title":"Core Components","text":"<p>The <code>src/core/</code> directory contains shared protocol definitions and types used by both server and CLI.</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#directory-structure_1","level":3,"title":"Directory Structure","text":"<pre><code>src/core/\n├── protocol/\n│   ├── message.cr                     # Base Message class\n│   └── messages/\n│       ├── auth.cr                    # Authentication messages\n│       ├── tunnel.cr                  # Tunnel management messages\n│       ├── request.cr                 # HTTP request/response messages\n│       └── websocket.cr               # WebSocket messages\n└── version.cr                          # Protocol version\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#module-selliacore","level":3,"title":"Module: <code>Sellia::Core</code>","text":"<p>Purpose: Shared functionality and protocol definitions</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#protocol-messages-srccoreprotocolmessagescr","level":4,"title":"Protocol Messages (<code>src/core/protocol/messages.cr</code>)","text":"<p>Defines the MessagePack-based protocol for client-server communication:</p> <pre><code>module Sellia::Core::Protocol\n  # Message Types\n  class RegisterTunnel\n    property subdomain : String\n    property auth_token : String?\n  end\n\n  class TunnelRegistered\n    property url : String\n    property inspector_url : String\n  end\n\n  class HttpRequest\n    property id : String\n    property method : String\n    property path : String\n    property headers : Hash(String, String)\n    property body : Bytes?\n  end\n\n  class HttpResponse\n    property request_id : String\n    property status_code : Int32\n    property headers : Hash(String, String)\n    property body : Bytes?\n  end\n\n  # ... more message types\nend\n</code></pre> <p>Purpose: - Define all protocol message types - Serialize/deserialize MessagePack - Handle protocol versioning - Validate message format</p> <p>Dependencies: - <code>msgpack</code> crystal shard - Crystal standard library</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#types-srccoretypestunnelcr","level":4,"title":"Types (<code>src/core/types/tunnel.cr</code>)","text":"<p>Shared data structures:</p> <pre><code>module Sellia::Core::Types\n  class Tunnel\n    property subdomain : String\n    property client_id : String\n    property auth_token : String?\n    property created_at : Time\n    property last_heartbeat : Time\n\n    def active?\n      # Check if tunnel is still active\n    end\n  end\nend\n</code></pre> <p>Purpose: - Define domain models - Shared between server and CLI - No protocol-specific logic</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#server-components","level":2,"title":"Server Components","text":"<p>The <code>src/server/</code> directory contains the tunnel server implementation.</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#directory-structure_2","level":3,"title":"Directory Structure","text":"<pre><code>src/server/\n├── main.cr                   # Server entry point\n├── server.cr                 # Server orchestration\n├── tunnel_registry.cr        # Tunnel registration and tracking\n├── ws_gateway.cr             # WebSocket gateway/handler\n├── http_ingress.cr           # HTTP request ingress handler\n├── rate_limiter.cr           # Rate limiting logic\n├── auth_provider.cr          # Authentication provider\n├── connection_manager.cr     # Client connection tracking\n├── client_connection.cr      # Client connection wrapper\n├── pending_request.cr        # Pending HTTP request tracking\n├── pending_websocket.cr      # Pending WebSocket tracking\n├── landing.cr                # Landing page\n├── admin_api.cr              # Admin API endpoints\n├── storage/\n│   ├── database.cr           # Database connection singleton\n│   ├── migrations.cr         # Database migrations\n│   ├── models.cr             # Database models\n│   ├── repositories.cr       # Database repositories\n│   └── storage.cr            # Storage module\n└── public/                   # Public static assets\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#module-selliaserver","level":3,"title":"Module: <code>Sellia::Server</code>","text":"<p>Purpose: Tunnel server that accepts client connections and routes traffic</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#main-server-srcserverservercr","level":4,"title":"Main Server (<code>src/server/server.cr</code>)","text":"<p>Entry point and server orchestration:</p> <pre><code>class Sellia::Server\n  def initialize(@host : String, @port : Int32, @domain : String)\n    # Initialize components\n  end\n\n  def start\n    # Start WebSocket listener\n    # Start HTTP server\n    # Handle signals\n  end\nend\n</code></pre> <p>Responsibilities: - Parse command-line arguments - Initialize all server components - Coordinate startup and shutdown - Handle graceful shutdown</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#tunnel-registry-srcservertunnel_registrycr","level":4,"title":"Tunnel Registry (<code>src/server/tunnel_registry.cr</code>)","text":"<p>Manages tunnel registration and lookup:</p> <pre><code>class Sellia::TunnelRegistry\n  def register_tunnel(subdomain : String, client_id : String) : Tunnel\n    # Validate subdomain\n    # Check for duplicates\n    # Register tunnel\n  end\n\n  def get_tunnel(subdomain : String) : Tunnel?\n    # Look up tunnel by subdomain\n  end\n\n  def remove_tunnel(client_id : String) : Bool\n    # Remove tunnel when client disconnects\n  end\nend\n</code></pre> <p>Responsibilities: - Track active tunnels - Validate subdomain uniqueness - Map subdomains to clients - Handle client disconnection - Query tunnel information</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#websocket-gateway-srcserverws_gatewaycr","level":4,"title":"WebSocket Gateway (<code>src/server/ws_gateway.cr</code>)","text":"<p>Handles WebSocket connections from tunnel clients:</p> <pre><code>class Sellia::WSGateway\n  def handle_client(ws : HTTP::WebSocket)\n    # Authenticate if required\n    # Wait for RegisterTunnel message\n    # Register with tunnel registry\n    # Forward HTTP requests to client\n    # Handle responses from client\n    # Detect disconnection\n  end\nend\n</code></pre> <p>Responsibilities: - Accept WebSocket connections - Authenticate clients (if enabled) - Parse protocol messages - Forward HTTP requests to tunnels - Forward responses from tunnels - Detect client disconnection</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#http-ingress-srcserverhttp_ingresscr","level":4,"title":"HTTP Ingress (<code>src/server/http_ingress.cr</code>)","text":"<p>Handles incoming HTTP requests and routes them to tunnels:</p> <pre><code>class Sellia::HTTPIngress\n  def handle_request(request : HTTP::Request) : HTTP::Response\n    # Extract subdomain from Host header\n    # Look up tunnel in registry\n    # Forward request to tunnel client\n    # Wait for response\n    # Return response to client\n  end\nend\n</code></pre> <p>Responsibilities: - Listen for HTTP requests - Extract subdomain from request - Route to appropriate tunnel - Handle tunnel not found - Handle timeout - Return response to caller</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#rate-limiter-srcserverrate_limitercr","level":4,"title":"Rate Limiter (<code>src/server/rate_limiter.cr</code>)","text":"<p>Token bucket rate limiting:</p> <pre><code>class Sellia::RateLimiter\n  def check_rate_limit(identifier : String, action : String) : Bool\n    # Check if action is allowed\n    # Update token bucket\n  end\nend\n</code></pre> <p>Responsibilities: - Limit connection rate per IP - Limit tunnel registration rate - Limit request rate per tunnel - Token bucket algorithm</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#subdomain-validator-srcserversubdomain_validatorcr","level":4,"title":"Subdomain Validator (<code>src/server/subdomain_validator.cr</code>)","text":"<p>DNS label validation:</p> <pre><code>class Sellia::SubdomainValidator\n  def validate(subdomain : String) : Bool\n    # Check length (max 63)\n    # Check characters (alphanumeric + hyphen)\n    # Check no consecutive hyphens\n    # Check not a reserved name\n  end\nend\n</code></pre> <p>Responsibilities: - Validate subdomain format - Enforce DNS label rules - Check reserved subdomains - Provide clear error messages</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#storage-layer-srcserverstorage","level":4,"title":"Storage Layer (<code>src/server/storage/</code>)","text":"<p>Persistence for API keys and reserved subdomains:</p> <pre><code>src/server/storage/\n├── database.cr               # Database singleton\n├── migrations.cr             # Database migrations\n├── models.cr                 # Database models (ReservedSubdomain, ApiKey)\n├── repositories.cr           # Database repositories\n└── storage.cr                # Storage module\n</code></pre> <p>SQLite Store (<code>sqlite_store.cr</code>): - Database connection management - Schema migrations - CRUD operations for API keys - CRUD operations for reserved subdomains</p> <p>Models: - <code>ApiKey</code>: API key with metadata - <code>ReservedSubdomain</code>: Reserved subdomain claims</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#cli-components","level":2,"title":"CLI Components","text":"<p>The <code>src/cli/</code> directory contains the CLI client implementation.</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#directory-structure_3","level":3,"title":"Directory Structure","text":"<pre><code>src/cli/\n├── main.cr                   # CLI entry point\n├── config.cr                 # Configuration management\n├── tunnel_client.cr          # Tunnel client logic\n├── router.cr                 # Request routing to local services\n├── local_proxy.cr            # HTTP proxy to local services\n├── websocket_proxy.cr        # WebSocket proxy to local services\n├── inspector.cr              # Request inspector server\n├── request_store.cr          # Request storage for inspector\n├── updater.cr                # Self-update mechanism\n└── admin_commands.cr         # Admin CLI commands\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#module-selliacli","level":3,"title":"Module: <code>Sellia::CLI</code>","text":"<p>Purpose: Command-line client for creating tunnels</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#main-cli-srccliclicr","level":4,"title":"Main CLI (<code>src/cli/cli.cr</code>)","text":"<p>Entry point and command parsing:</p> <pre><code>class Sellia::CLI\n  def run(args : Array(String))\n    # Parse arguments\n    # Execute appropriate command\n    # Handle errors\n  end\nend\n</code></pre> <p>Responsibilities: - Parse command-line arguments - Dispatch to appropriate command - Handle global flags (--server, --api-key) - Error handling and user feedback</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#tunnel-client-srcclitunnel_clientcr","level":4,"title":"Tunnel Client (<code>src/cli/tunnel_client.cr</code>)","text":"<p>Core tunnel client logic:</p> <pre><code>class Sellia::TunnelClient\n  def connect(server_url : String)\n    # Connect to server via WebSocket\n    # Send RegisterTunnel message\n    # Wait for TunnelRegistered response\n    # Start forwarding local traffic\n  end\n\n  def forward_request(request : HttpRequest)\n    # Forward request to local service\n    # Get response\n    # Send response to server\n  end\nend\n</code></pre> <p>Responsibilities: - Connect to server - Register tunnel - Forward requests to local service - Forward responses to server - Handle reconnection - Manage connection lifecycle</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#inspector-srccliinspectorcr","level":4,"title":"Inspector (<code>src/cli/inspector.cr</code>)","text":"<p>Request inspector server:</p> <pre><code>class Sellia::Inspector\n  def start(port : Int32)\n    # Start HTTP server for inspector UI\n    # Serve React UI or proxy to Vite\n    # WebSocket for live updates\n  end\n\n  def record_request(request : HttpRequest, response : HttpResponse)\n    # Store request/response pair\n    # Broadcast to WebSocket clients\n  end\nend\n</code></pre> <p>Responsibilities: - HTTP server for inspector UI - WebSocket for real-time updates - Store request/response history - Serve embedded UI or proxy to Vite - Handle \"clear history\" command</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#configuration-srccliconfig","level":4,"title":"Configuration (<code>src/cli/config/</code>)","text":"<p>Configuration management:</p> <p>Loader (<code>loader.cr</code>): - Load YAML config files - Parse configuration - Validate configuration</p> <p>Resolver (<code>resolver.cr</code>): - Layered configuration resolution:   1. <code>~/.config/sellia/sellia.yml</code>   2. <code>~/.sellia.yml</code>   3. <code>./sellia.yml</code>   4. CLI flags</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#commands-srcclicommands","level":4,"title":"Commands (<code>src/cli/commands/</code>)","text":"<p>Individual command implementations:</p> <p>HTTP Command (<code>http_command.cr</code>): - Create HTTP tunnel - Handle --subdomain, --auth, etc. - Start tunnel client</p> <p>Start Command (<code>start_command.cr</code>): - Read config file - Start multiple tunnels - Manage tunnel processes</p> <p>Auth Command (<code>auth_command.cr</code>): - Manage API keys - Store credentials - Login/logout</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#inspector-ui","level":2,"title":"Inspector UI","text":"<p>The <code>web/</code> directory contains the React-based inspector UI.</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#directory-structure_4","level":3,"title":"Directory Structure","text":"<pre><code>web/\n├── index.html                # HTML entry point\n├── vite.config.ts            # Vite configuration\n├── tsconfig.json             # TypeScript configuration\n├── package.json              # Node.js dependencies\n├── src/\n│   ├── main.tsx              # React entry point\n│   ├── App.tsx               # Root component\n│   ├── components/           # React components\n│   │   ├── RequestList.tsx   # Request list view\n│   │   ├── RequestDetail.tsx # Single request detail\n│   │   ├── Header.tsx        # Request/response headers\n│   │   ├── Body.tsx          # Request/response body\n│   │   └── Controls.tsx      # Control buttons\n│   ├── hooks/                # Custom React hooks\n│   │   ├── useWebSocket.ts   # WebSocket connection\n│   │   └── useRequests.ts    # Request state\n│   ├── types/                # TypeScript types\n│   │   └── index.ts          # Type definitions\n│   └── utils/                # Utilities\n│       ├── format.ts         # Formatters\n│       └── copy.ts           # Copy to clipboard\n└── dist/                     # Built assets (generated)\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#module-inspector-ui","level":3,"title":"Module: Inspector UI","text":"<p>Purpose: Web-based request inspection and debugging</p> <p>Technology Stack: - React 18 with TypeScript - Vite for development/building - TailwindCSS for styling (optional) - WebSocket for real-time updates</p> <p>Key Components: - RequestList: Live stream of requests - RequestDetail: Detailed request/response view - Controls: Clear history, pause/resume, filters - WebSocket: Real-time connection to CLI</p> <p>Development: <pre><code>cd web\nnpm install\nnpm run dev      # Development server (port 5173)\nnpm run build    # Production build (outputs to dist/)\n</code></pre></p> <p>Asset Embedding: - Production: Built into Crystal binary - Development: Proxied from Vite dev server</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#tests","level":2,"title":"Tests","text":"<p>The <code>spec/</code> directory contains test files mirroring the <code>src/</code> structure.</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#directory-structure_5","level":3,"title":"Directory Structure","text":"<pre><code>spec/\n├── spec_helper.cr             # Test configuration\n├── core/\n│   └── protocol/\n│       └── messages_spec.cr   # Protocol message tests\n├── server/\n│   ├── tunnel_registry_spec.cr\n│   ├── ws_gateway_spec.cr\n│   ├── http_ingress_spec.cr\n│   └── rate_limiter_spec.cr\n└── cli/\n    ├── tunnel_client_spec.cr\n    └── config_spec.cr\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#test-organization","level":3,"title":"Test Organization","text":"<p>Naming Convention: <code>&lt;source_file&gt;_spec.cr</code></p> <p>Mirror Source Structure: - <code>spec/server/</code> tests <code>src/server/</code> - <code>spec/cli/</code> tests <code>src/cli/</code> - etc.</p> <p>Running Tests: <pre><code>crystal spec                    # All tests\ncrystal spec spec/server/       # Server tests only\ncrystal spec --verbose          # Detailed output\n</code></pre></p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#configuration-files","level":2,"title":"Configuration Files","text":"","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#crystal-configuration","level":3,"title":"Crystal Configuration","text":"<p><code>shard.yml</code> - Crystal dependencies: <pre><code>name: sellia\nversion: 0.1.2\ntargets:\n  sellia:\n    main: src/cli.cr\n  sellia-server:\n    main: src/server.cr\n\ndependencies:\n  msgpack:\n    github: crystal-community/msgpack-crystal\n  # ... more dependencies\n</code></pre></p> <p><code>shard.lock</code> - Locked dependency versions (generated)</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#nodejs-configuration","level":3,"title":"Node.js Configuration","text":"<p><code>package.json</code> - Inspector UI dependencies: <pre><code>{\n  \"name\": \"sellia-inspector\",\n  \"version\": \"0.1.2\",\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"tsc &amp;&amp; vite build\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.2.0\"\n  }\n}\n</code></pre></p> <p><code>vite.config.ts</code> - Vite build configuration <code>tsconfig.json</code> - TypeScript configuration</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#docker-configuration","level":3,"title":"Docker Configuration","text":"<p><code>Dockerfile</code> - Server container image: <pre><code>FROM crystallang/crystal:latest\n# ... build steps\n</code></pre></p> <p><code>docker-compose.yml</code> - Development environment <code>docker-compose.prod.yml</code> - Production deployment</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#git-configuration","level":3,"title":"Git Configuration","text":"<p><code>.gitignore</code> - Ignored files: <pre><code>/bin/\n/lib/\n/node_modules/\n*.db\n.env\n</code></pre></p> <p><code>.github/workflows/</code> - CI/CD workflows <code>.github/ISSUE_TEMPLATE/</code> - Issue templates</p>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#data-flow","level":2,"title":"Data Flow","text":"","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#tunnel-registration-flow","level":3,"title":"Tunnel Registration Flow","text":"<pre><code>CLI                          Server\n |                             |\n |--[WebSocket]---------------&gt;|\n |                             |\n |--[RegisterTunnel]----------&gt;|\n |                             |--[Validate subdomain]\n |                             |--[Check rate limit]\n |                             |--[Create tunnel]\n |&lt;--[TunnelRegistered]--------|\n |                             |\n |--[Heartbeat]--------------&gt;|\n |                             |\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#http-request-flow","level":3,"title":"HTTP Request Flow","text":"<pre><code>Client          Server                 CLI\n  |               |                    |\n  |--[GET /]-----&gt;|                    |\n  |               |--[Lookup tunnel]   |\n  |               |--[Get client WS]   |\n  |               |--[HttpRequest]----&gt;|\n  |               |                    |--[Forward to localhost:8080]\n  |               |                    |--[Get response]\n  |&lt;--[Response]--|&lt;--[HttpResponse]---|\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#adding-new-features","level":2,"title":"Adding New Features","text":"","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#adding-a-new-protocol-message","level":3,"title":"Adding a New Protocol Message","text":"<ol> <li>Define message in <code>src/core/protocol/messages.cr</code></li> <li>Add serializer in same file</li> <li>Add tests in <code>spec/core/protocol/messages_spec.cr</code></li> <li>Update server handler in <code>src/server/</code></li> <li>Update client in <code>src/cli/</code></li> </ol>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#adding-a-new-cli-command","level":3,"title":"Adding a New CLI Command","text":"<ol> <li>Create command file in <code>src/cli/commands/</code></li> <li>Implement command class</li> <li>Register in <code>src/cli/cli.cr</code></li> <li>Add tests in <code>spec/cli/</code></li> <li>Update README with usage</li> </ol>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#adding-inspector-ui-feature","level":3,"title":"Adding Inspector UI Feature","text":"<ol> <li>Create component in <code>web/src/components/</code></li> <li>Add TypeScript types in <code>web/src/types/</code></li> <li>Add WebSocket handler if needed</li> <li>Update CLI to push data</li> <li>Test in development (<code>npm run dev</code>)</li> </ol>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#module-dependencies","level":2,"title":"Module Dependencies","text":"<pre><code>┌─────────────────────────────────────────┐\n│            src/core/                    │\n│  (Protocol &amp; Types - No dependencies)   │\n└─────────────────────────────────────────┘\n          ▲               ▲\n          │               │\n    ┌─────┴─────┐   ┌─────┴─────┐\n    │ src/server│   │  src/cli  │\n    └───────────┘   └───────────┘\n          │               │\n          │               │\n          └───────┬───────┘\n                  ▼\n         ┌─────────────────┐\n         │  Crystal StdLib │\n         └─────────────────┘\n\n┌─────────────────────────────────────────┐\n│          web/ (Inspector UI)            │\n│  (React + TypeScript - Independent)     │\n└─────────────────────────────────────────┘\n</code></pre>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#code-organization-principles","level":2,"title":"Code Organization Principles","text":"","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#separation-of-concerns","level":3,"title":"Separation of Concerns","text":"<ul> <li>Core: Protocol and types only, no server/CLI logic</li> <li>Server: Tunnel routing and management</li> <li>CLI: Client-side tunnel creation and forwarding</li> <li>Inspector: Independent UI, communicates via WebSocket</li> </ul>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#shared-code","level":3,"title":"Shared Code","text":"<ul> <li>Place shared code in <code>src/core/</code></li> <li>Avoid duplicating logic between server and CLI</li> <li>Use protocol messages for communication</li> </ul>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#entry-points","level":3,"title":"Entry Points","text":"<ul> <li><code>src/server.cr</code> → <code>bin/sellia-server</code></li> <li><code>src/cli.cr</code> → <code>bin/sellia</code></li> <li><code>web/src/main.tsx</code> → Inspector UI</li> </ul>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/project-structure/source-layout/#related-documentation","level":2,"title":"Related Documentation","text":"<ul> <li>Prerequisites - Build dependencies</li> <li>Building - Compile the codebase</li> <li>Testing - Test organization</li> <li>Architecture - System architecture overview</li> </ul>","path":["Developer","Project structure","Source Layout"],"tags":[]},{"location":"developer/release-process/","level":1,"title":"Release Process","text":"<p>How Sellia releases are managed and published.</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#overview","level":2,"title":"Overview","text":"<p>This section covers the release process for Sellia, including versioning, changelog generation, and publishing releases.</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#versioning","level":2,"title":"Versioning","text":"<p>Sellia uses Semantic Versioning:</p> <ul> <li>MAJOR - Incompatible API changes</li> <li>MINOR - Backwards-compatible functionality</li> <li>PATCH - Backwards-compatible bug fixes</li> </ul> <p>Format: <code>MAJOR.MINOR.PATCH</code></p> <p>Examples: - <code>1.0.0</code> → <code>1.0.1</code> (Bug fix) - <code>1.0.0</code> → <code>1.1.0</code> (New feature) - <code>1.0.0</code> → <code>2.0.0</code> (Breaking change)</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#release-checklist","level":2,"title":"Release Checklist","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#pre-release","level":3,"title":"Pre-Release","text":"<ol> <li> <p>All tests passing <pre><code>crystal spec\n</code></pre></p> </li> <li> <p>Documentation updated</p> </li> <li>Update README if needed</li> <li>Update docs/ for new features</li> <li> <p>Update CHANGELOG.md</p> </li> <li> <p>Version bumped</p> </li> <li>Update version in <code>src/core/version.cr</code></li> <li>Update version in <code>shard.yml</code></li> <li>Update version in <code>web/package.json</code> (if UI changed)</li> </ol>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#creating-release","level":3,"title":"Creating Release","text":"<ol> <li> <p>Create release branch <pre><code>git checkout -b release/v1.0.0\n</code></pre></p> </li> <li> <p>Update version files</p> </li> <li><code>src/core/version.cr</code>: <code>VERSION = \"0.4.0\"</code></li> <li><code>shard.yml</code>: <code>version: 0.4.0</code></li> <li> <p><code>web/package.json</code>: <code>version: \"0.4.0\"</code> (if UI changed)</p> </li> <li> <p>Update CHANGELOG.md <pre><code>## [1.0.0] - 2025-01-30\n\n### Added\n- New feature X\n- New feature Y\n\n### Fixed\n- Bug fix Z\n\n### Changed\n- Updated dependency A\n</code></pre></p> </li> <li> <p>Commit changes <pre><code>git add src/core/version.cr shard.yml web/package.json CHANGELOG.md\ngit commit -m \"chore: release v0.4.0\"\n</code></pre></p> </li> <li> <p>Build and test <pre><code>cd web &amp;&amp; npm ci &amp;&amp; npm run build &amp;&amp; cd ..\nshards build sellia --release -Dembed_assets\nshards build sellia-server --release --static\ncrystal spec\n</code></pre></p> </li> <li> <p>Merge to main <pre><code>git checkout main\ngit merge release/v1.0.0\n</code></pre></p> </li> <li> <p>Tag release <pre><code>git tag -a v0.4.0 -m \"Release v0.4.0\"\ngit push origin main\ngit push origin v0.4.0\n</code></pre></p> </li> </ol>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#post-release","level":3,"title":"Post-Release","text":"<ol> <li>Create GitHub Release</li> <li>Go to GitHub releases page</li> <li>Click \"Draft a new release\"</li> <li>Choose tag <code>v0.4.0</code></li> <li>Copy changelog from CHANGELOG.md</li> <li>GitHub Actions will automatically build and publish binaries and Docker images</li> <li> <p>Publish release</p> </li> <li> <p>Build release binaries (future)    <pre><code># Build for multiple platforms\n# Upload to GitHub release\n</code></pre></p> </li> <li> <p>Announce release</p> </li> <li>Update documentation</li> <li>Post announcement</li> <li>Update website</li> </ol>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#changelog-format","level":2,"title":"Changelog Format","text":"<p>Sellia uses Keep a Changelog format:</p> <pre><code># Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Added\n- Upcoming features\n\n### Changed\n- Upcoming changes\n\n## [1.0.0] - 2025-01-30\n\n### Added\n- Initial release\n- HTTP tunnel support\n- Request inspector\n- Basic authentication\n- Subdomain routing\n\n### Fixed\n- Connection stability issues\n\n## [0.1.0] - 2025-01-15\n\n### Added\n- First beta release\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#categories","level":2,"title":"Categories","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#added","level":3,"title":"Added","text":"<p>New features: - New commands - New configuration options - New protocol features</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#changed","level":3,"title":"Changed","text":"<p>Changes to existing functionality: - Updated dependencies - Improved performance - Enhanced features</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#deprecated","level":3,"title":"Deprecated","text":"<p>Soon-to-be removed features: - Mark deprecated features - Migration path</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#removed","level":3,"title":"Removed","text":"<p>Removed features: - Remove deprecated features - Breaking changes</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#fixed","level":3,"title":"Fixed","text":"<p>Bug fixes: - Crash fixes - Incorrect behavior - Security issues</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#security","level":3,"title":"Security","text":"<p>Security fixes: - Vulnerability patches - Security improvements</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#release-branch-strategy","level":2,"title":"Release Branch Strategy","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#main-branch","level":3,"title":"Main Branch","text":"<ul> <li>Active development and stable releases</li> <li>Tags for each release</li> <li>Production-ready code</li> </ul>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#feature-branches","level":3,"title":"Feature Branches","text":"<ul> <li>New features</li> <li>Bug fixes</li> <li>Merged to main via pull requests</li> </ul>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#hotfix-process","level":2,"title":"Hotfix Process","text":"<p>For urgent fixes:</p> <ol> <li> <p>Create hotfix branch <pre><code>git checkout -b hotfix/v0.4.1\n</code></pre></p> </li> <li> <p>Implement fix <pre><code># Make changes\ngit commit -m \"fix: critical bug\"\n</code></pre></p> </li> <li> <p>Build and test <pre><code>crystal spec\n</code></pre></p> </li> <li> <p>Merge to main <pre><code>git checkout main\ngit merge hotfix/v0.4.1\n</code></pre></p> </li> <li> <p>Tag and release <pre><code>git tag -a v0.4.1 -m \"Hotfix v0.4.1\"\ngit push origin main --tags\n</code></pre></p> </li> </ol>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#dependency-updates","level":2,"title":"Dependency Updates","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#crystal-dependencies","level":3,"title":"Crystal Dependencies","text":"<p>Update <code>shard.yml</code>:</p> <pre><code>dependencies:\n  message-pack:\n    github: crystal-community/message-pack-crystal\n    version: ~&gt; 1.0.0  # Update version\n</code></pre> <p>Run update:</p> <pre><code>shards update\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#node-dependencies","level":3,"title":"Node Dependencies","text":"<p>Update <code>web/package.json</code>:</p> <pre><code>{\n  \"dependencies\": {\n    \"react\": \"^18.2.0\"\n  }\n}\n</code></pre> <p>Run update:</p> <pre><code>cd web\nnpm update\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#testing-before-release","level":2,"title":"Testing Before Release","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#full-test-suite","level":3,"title":"Full Test Suite","text":"<pre><code># Crystal tests\ncrystal spec\n\n# UI tests\ncd web\nnpm test\ncd ..\n\n# Integration tests\n./scripts/integration-test.sh\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#manual-testing","level":3,"title":"Manual Testing","text":"<ol> <li> <p>Server startup <pre><code>./bin/sellia-server --port 3000 --domain localhost\n</code></pre></p> </li> <li> <p>Tunnel creation <pre><code>./bin/sellia http 3000\n</code></pre></p> </li> <li> <p>Version check <pre><code>./bin/sellia version\n./bin/sellia-server --version\n</code></pre></p> </li> <li> <p>Request handling</p> </li> <li>Make requests through tunnel</li> <li>Verify responses</li> <li> <p>Check inspector</p> </li> <li> <p>Configuration</p> </li> <li>Test config file loading</li> <li>Verify environment variables</li> <li>Check CLI flags</li> </ol>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#platform-testing","level":3,"title":"Platform Testing","text":"<p>Test on supported platforms: - Linux (Ubuntu, Debian, CentOS) - macOS (Intel, Apple Silicon) - Docker</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#release-communication","level":2,"title":"Release Communication","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#github-release","level":3,"title":"GitHub Release","text":"<p>Create release with: - Version number - Release notes - Upgrade instructions - Download links</p>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#announcement-template","level":3,"title":"Announcement Template","text":"<pre><code>## Sellia v1.0.0 Released\n\nI'm excited to announce Sellia v1.0.0!\n\n### Highlights\n- Feature A\n- Feature B\n- Feature C\n\n### What's New\n[Brief description of major changes]\n\n### Upgrade Guide\n[Steps for upgrading from previous version]\n\n### Downloads\n- [Source](https://github.com/watzon/sellia/archive/refs/tags/v1.0.0.tar.gz)\n- Docker image: `docker pull sellia:1.0.0`\n\n### Documentation\n[Link to updated documentation]\n\n### Thank You\nSpecial thanks to contributors:\n- @contributor1\n- @contributor2\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#post-release-tasks","level":2,"title":"Post-Release Tasks","text":"<ol> <li>Monitor issues</li> <li>Watch for regression reports</li> <li> <p>Respond to release feedback</p> </li> <li> <p>Update website</p> </li> <li>Update version numbers</li> <li> <p>Add release notes</p> </li> <li> <p>Plan next release</p> </li> <li>Review feature requests</li> <li>Prioritize backlog</li> </ol>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#version-bumping-examples","level":2,"title":"Version Bumping Examples","text":"","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#patch-release-bug-fix","level":3,"title":"Patch Release (Bug Fix)","text":"<pre><code># 1.0.0 → 1.0.1\ngit checkout -b release/v1.0.1\n# Update shard.yml: version: 1.0.1\ngit commit -m \"chore: release v1.0.1\"\ngit tag -a v1.0.1 -m \"Release v1.0.1\"\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#minor-release-new-feature","level":3,"title":"Minor Release (New Feature)","text":"<pre><code># 1.0.0 → 1.1.0\ngit checkout -b release/v1.1.0\n# Update shard.yml: version: 1.1.0\ngit commit -m \"chore: release v1.1.0\"\ngit tag -a v1.1.0 -m \"Release v1.1.0\"\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#major-release-breaking-change","level":3,"title":"Major Release (Breaking Change)","text":"<pre><code># 1.0.0 → 2.0.0\ngit checkout -b release/v2.0.0\n# Update shard.yml: version: 2.0.0\ngit commit -m \"chore: release v2.0.0\"\ngit tag -a v2.0.0 -m \"Release v2.0.0\"\n</code></pre>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Contributing - Contribution guidelines</li> <li>Development - Development setup</li> <li>Security - Security considerations</li> </ul>","path":["Developer","Release process","Release Process"],"tags":[]},{"location":"developer/release-process/building-binaries/","level":1,"title":"Building Release Binaries","text":"<p>Cross-compilation and build process for Sellia release binaries.</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#overview","level":2,"title":"Overview","text":"<p>Sellia is written in Crystal, which compiles to native binaries. Release builds are optimized single executables that include the embedded React UI.</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#prerequisites","level":2,"title":"Prerequisites","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#build-tools","level":3,"title":"Build Tools","text":"<ul> <li>Crystal 1.10+ (shard.yml specifies &gt;= 1.10.0)</li> <li>Node.js 20+ (for React UI)</li> <li>Git</li> </ul>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#optional","level":3,"title":"Optional","text":"<ul> <li>Docker (for cross-compilation)</li> <li>GitHub Actions (automated builds)</li> </ul>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#local-builds","level":2,"title":"Local Builds","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#development-build","level":3,"title":"Development Build","text":"<p>Fast compilation for testing:</p> <pre><code># From project root\nshards build\n\n# Output: ./bin/sellia (CLI) or ./bin/sellia-server (Server)\n# Size: ~4-5 MB\n# Features: Development mode (proxies to Vite dev server)\n</code></pre> <p>Use for: Development and testing</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#production-build","level":3,"title":"Production Build","text":"<p>Optimized binary for distribution:</p> <pre><code># Build React UI first\ncd web\nnpm ci\nnpm run build\n\n# Build Crystal binary with release flags\ncd ..\nshards build --release --Dembed_assets\n\n# Output: ./bin/sellia (CLI) or ./bin/sellia-server (Server)\n# Size: ~6-8 MB (includes baked UI assets for CLI)\n# Features: Production mode (self-contained)\n</code></pre> <p>Use for: Production deployment</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#build-flags","level":2,"title":"Build Flags","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#crystal-compiler-flags","level":3,"title":"Crystal Compiler Flags","text":"Flag Purpose Effect <code>--release</code> Enable optimizations Smaller, faster binary <code>--debug</code> Include debug info Larger binary, stack traces <code>--no-debug</code> Strip debug symbols Smaller binary <code>-Dflag_name</code> Define compile-time flag Conditional compilation","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#common-combinations","level":3,"title":"Common Combinations","text":"<pre><code># Standard release\nshards build --release\n\n# Release with static linking (Linux)\nshards build --release --static\n\n# Release with specific target\nshards build --release --target x86_64-linux-musl\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#building-react-ui","level":2,"title":"Building React UI","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#production-build_1","level":3,"title":"Production Build","text":"<pre><code>cd web\n\n# Install dependencies\nnpm ci\n\n# Build optimized bundle\nnpm run build\n\n# Output: web/dist/\n# - index.html\n# - assets/*.js (minified, hashed)\n# - assets/*.css (minified, hashed)\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#build-script","level":3,"title":"Build Script","text":"<pre><code>#!/bin/bash\nset -e\n\necho \"Building React UI...\"\ncd web\nnpm ci\nnpm run build\ncd ..\n\necho \"UI built successfully\"\nls -lh web/dist/\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#cross-compilation","level":2,"title":"Cross-Compilation","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#using-docker","level":3,"title":"Using Docker","text":"<p>Why: Crystal requires matching target architecture for native compilation. Docker provides consistent build environments.</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#linux-build-on-macos","level":3,"title":"Linux Build on macOS","text":"<pre><code># Use Crystal official Docker image\ndocker run --rm -v $(pwd):/app -w /app crystallang/crystal:latest-alpine \\\n  shards build --release --static\n\n# Output: ./bin/sellia (Linux binary)\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#multi-platform-build-script","level":3,"title":"Multi-Platform Build Script","text":"<pre><code>#!/bin/bash\nset -e\n\nVERSION=$(grep VERSION src/core/version.cr | cut -d'\"' -f2)\nOUTPUT=\"./dist\"\n\nmkdir -p $OUTPUT\n\necho \"Building Sellia v$VERSION for multiple platforms...\"\n\n# Build for current platform\necho \"Building for $(uname -s)-$(uname -m)...\"\nshards build sellia --release -Dembed_assets\nshards build sellia-server --release --static\ncp bin/sellia \"$OUTPUT/sellia-$VERSION-$(uname -s)-$(uname -m)\"\ncp bin/sellia-server \"$OUTPUT/sellia-server-$VERSION-$(uname -s)-$(uname -m)\"\n\n# Build for Linux (requires Docker)\necho \"Building for linux-amd64...\"\ndocker run --rm -v $(pwd):/workspace -w /workspace amd64/alpine sh -c '\n  apk add --no-cache crystal shards gcc musl-dev openssl-dev sqlite-static &amp;&amp;\n  shards install --without-development &amp;&amp;\n  shards build sellia --release --static -Dembed_assets &amp;&amp;\n  shards build sellia-server --release --static\n'\ncp bin/sellia \"$OUTPUT/sellia-$VERSION-linux-amd64\"\ncp bin/sellia-server \"$OUTPUT/sellia-server-$VERSION-linux-amd64\"\n\necho \"Builds complete:\"\nls -lh $OUTPUT/\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#automated-builds-github-actions","level":2,"title":"Automated Builds (GitHub Actions)","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#cicd-pipeline","level":3,"title":"CI/CD Pipeline","text":"<p>Location: <code>.github/workflows/release.yml</code></p> <pre><code>name: Release\n\non:\n  push:\n    tags:\n      - 'v*'\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install Crystal\n        uses: crystal-lang/install-crystal@v1\n\n      - name: Install Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n\n      - name: Build Inspector UI\n        run: |\n          cd web\n          npm ci\n          npm run build\n\n      - name: Build Crystal\n        run: shards build --release\n\n      - name: Create Release\n        uses: softprops/action-gh-release@v1\n        with:\n          files: bin/sellia\n          draft: false\n          prerelease: false\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#multi-platform-ci","level":3,"title":"Multi-Platform CI","text":"<pre><code>jobs:\n  release:\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest, windows-latest]\n    runs-on: ${{ matrix.os }}\n    steps:\n      - name: Build\n        run: shards build --release\n\n      - name: Upload\n        uses: actions/upload-artifact@v4\n        with:\n          name: sellia-${{ matrix.os }}\n          path: bin/sellia\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#binary-optimization","level":2,"title":"Binary Optimization","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#size-reduction","level":3,"title":"Size Reduction","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#1-strip-symbols","level":4,"title":"1. Strip Symbols","text":"<pre><code>strip bin/sellia\n</code></pre> <p>Savings: ~20-30% size reduction</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#2-upx-compression","level":4,"title":"2. UPX Compression","text":"<pre><code># Install UPX\nbrew install upx  # macOS\napt install upx  # Linux\n\n# Compress binary\nupx --best --lzma bin/sellia\n</code></pre> <p>Savings: ~40-60% size reduction</p> <p>Trade-off: Slight startup overhead (decompression)</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#3-static-linking","level":4,"title":"3. Static Linking","text":"<pre><code>shards build --release --static\n</code></pre> <p>Benefits: - No external library dependencies - Portable across same OS/architecture</p> <p>Trade-off: Larger binary size</p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#platform-specific-builds","level":2,"title":"Platform-Specific Builds","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#macos","level":3,"title":"macOS","text":"<pre><code># Universal binary (Intel + Apple Silicon)\nlipo -create \\\n  bin/sellia-x86_64 \\\n  bin/sellia-arm64 \\\n  -output bin/sellia-universal\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#linux","level":3,"title":"Linux","text":"<pre><code># Musl libc (fully static)\nshards build --release --static\n\n# GNU libc (dynamic, smaller)\nshards build --release\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#windows","level":3,"title":"Windows","text":"<pre><code># Requires MSYS2/MinGW\nshards build --release\n\n# Output: sellia.exe\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#versioning","level":2,"title":"Versioning","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#update-version","level":3,"title":"Update Version","text":"<p>Before building releases, update version in:</p> <ol> <li> <p>src/core/version.cr <pre><code>VERSION = \"0.4.0\"\n</code></pre></p> </li> <li> <p>shard.yml <pre><code>version: 0.4.0\n</code></pre></p> </li> <li> <p>package.json (if UI changed)    <pre><code>{\n  \"version\": \"0.4.0\"\n}\n</code></pre></p> </li> </ol>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#tag-release","level":3,"title":"Tag Release","text":"<pre><code>git tag v1.2.3\ngit push origin v1.2.3\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#signing-binaries-macos","level":2,"title":"Signing Binaries (macOS)","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#code-signing","level":3,"title":"Code Signing","text":"<pre><code># Import certificate\nsecurity import certificate.p12 -k ~/Library/Keychains/login.keychain\n\n# Sign binary\ncodesign --deep --force --verify --verbose \\\n  --sign \"Developer ID Application: Your Name\" \\\n  bin/sellia\n\n# Verify signature\ncodesign --verify --verbose bin/sellia\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#notarization","level":3,"title":"Notarization","text":"<pre><code># Upload to Apple for notarization\nxcrun notarytool submit bin/sellia \\\n  --apple-id \"your@email.com\" \\\n  --password \"app-specific-password\" \\\n  --team-id \"TEAMID\" \\\n  --wait\n\n# Staple notarization ticket\nxcrun stapler staple bin/sellia\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#distribution","level":2,"title":"Distribution","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#file-naming-convention","level":3,"title":"File Naming Convention","text":"<pre><code>sellia-{version}-{os}-{arch}.{ext}\n</code></pre> <p>Examples: - <code>sellia-1.2.3-linux-x86_64</code> - <code>sellia-1.2.3-darwin-arm64</code> - <code>sellia-1.2.3-windows-x86_64.exe</code></p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#checksums","level":3,"title":"Checksums","text":"<p>Generate SHA256 checksums for integrity verification:</p> <pre><code>cd dist\nshasum -a 256 * &gt; SHA256SUMS\n</code></pre> <p>Output: <pre><code>abc123...  sellia-1.2.3-linux-x86_64\ndef456...  sellia-1.2.3-darwin-arm64\n</code></pre></p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#testing-builds","level":2,"title":"Testing Builds","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#smoke-test","level":3,"title":"Smoke Test","text":"<pre><code># Check version\n./bin/sellia version\n# Expected: Sellia v0.4.0\n\n# Check help\n./bin/sellia help\n# Expected: Usage message\n\n# Check server version\n./bin/sellia-server --version\n# Expected: Sellia Server v0.4.0\n\n# Check inspector works\n./bin/sellia http 3000 &amp;\n# Open http://127.0.0.1:4040\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#integration-test","level":3,"title":"Integration Test","text":"<pre><code># Start a test server\npython3 -m http.server 8080 &amp;\n\n# Start tunnel\n./bin/sellia http 8080 --subdomain test-$$\n\n# Make request\ncurl https://test-$$.sellia.me\n\n# Check inspector shows request\ncurl http://127.0.0.1:4040/api/requests\n</code></pre>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#build-fails-error-baking-files","level":3,"title":"Build Fails: \"Error baking files\"","text":"<p>Cause: React UI not built.</p> <p>Solution: <pre><code>cd web &amp;&amp; npm run build &amp;&amp; cd ..\nshards build --release\n</code></pre></p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#binary-too-large","level":3,"title":"Binary Too Large","text":"<p>Cause: Debug symbols or lack of optimization.</p> <p>Solution: <pre><code># Ensure --release flag\nshards build --release\n\n# Strip symbols\nstrip bin/sellia\n</code></pre></p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#library-not-found-error","level":3,"title":"\"Library not found\" Error","text":"<p>Cause: Missing system libraries.</p> <p>Solution: <pre><code># Use static linking\nshards build --release --static\n\n# Or install missing dependencies\nsudo apt install libssl-dev libpcre3-dev  # Debian/Ubuntu\n</code></pre></p>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/building-binaries/#see-also","level":2,"title":"See Also","text":"<ul> <li>Versioning Policy - Semantic versioning</li> <li>Docker Images - Container builds</li> <li>Changelog Maintenance - Release notes</li> <li>CI/CD Workflow - GitHub Actions</li> </ul>","path":["Developer","Release process","Building Release Binaries"],"tags":[]},{"location":"developer/release-process/changelog/","level":1,"title":"Changelog Maintenance","text":"<p>How to maintain the CHANGELOG.md file for Sellia releases.</p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#overview","level":2,"title":"Overview","text":"<p>The CHANGELOG.md file follows the Keep a Changelog format, which is human-readable and machine-parseable.</p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#changelog-location","level":2,"title":"Changelog Location","text":"<pre><code>CHANGELOG.md (project root)\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#format","level":2,"title":"Format","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#header","level":3,"title":"Header","text":"<pre><code># Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#version-entry","level":3,"title":"Version Entry","text":"<pre><code>## [0.4.0] - 2025-12-30\n\n### Added\n- New feature description (#123)\n\n### Changed\n- Modified feature behavior (#124)\n\n### Deprecated\n- Old feature now deprecated (#125)\n\n### Removed\n- Removed deprecated feature (#126)\n\n### Fixed\n- Bug fix description (#127)\n\n### Security\n- Security fix description (#128)\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#categories","level":2,"title":"Categories","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#added","level":3,"title":"Added","text":"<p>New features and functionality.</p> <p>Examples: <pre><code>### Added\n- Add WebSocket inspection in inspector UI (#45)\n- Add `--subdomain` flag to `sellia http` command (#67)\n- Add support for custom tunnel servers (#89)\n</code></pre></p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#changed","level":3,"title":"Changed","text":"<p>Changes to existing functionality (backwards compatible).</p> <p>Examples: <pre><code>### Changed\n- Improve error messages for connection failures (#102)\n- Update default timeout from 30s to 60s (#134)\n- Improve request display performance in inspector (#156)\n</code></pre></p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#deprecated","level":3,"title":"Deprecated","text":"<p>Features that will be removed in future releases.</p> <p>Examples: <pre><code>### Deprecated\n- Deprecated `--old-flag` option, use `--new-flag` instead (#178)\n- Deprecated legacy config format, will be removed in 2.0.0 (#201)\n</code></pre></p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#removed","level":3,"title":"Removed","text":"<p>Features removed in this release (must be in previous release's Deprecated section).</p> <p>Examples: <pre><code>### Removed\n- Removed `--old-flag` option (deprecated in 1.2.0) (#223)\n- Removed legacy authentication method (deprecated in 1.0.0) (#245)\n</code></pre></p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#fixed","level":3,"title":"Fixed","text":"<p>Bug fixes.</p> <p>Examples: <pre><code>### Fixed\n- Fix inspector not showing WebSocket requests (#267)\n- Fix memory leak in request store (#289)\n- Fix crash on invalid subdomain characters (#312)\n</code></pre></p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#security","level":3,"title":"Security","text":"<p>Security vulnerability fixes.</p> <p>Examples: <pre><code>### Security\n- Fix API key leakage in debug logs (#334)\n- Update dependencies to address CVE-2024-xxxxx (#356)\n</code></pre></p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#entry-guidelines","level":2,"title":"Entry Guidelines","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#what-to-include","level":3,"title":"What to Include","text":"<p>DO include: - User-facing changes - New features - Bug fixes - Breaking changes - Security updates - Performance improvements (if significant)</p> <p>DON'T include: - Internal refactoring - Code style changes - Test updates - Documentation-only changes - CI/CD changes</p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#format-rules","level":3,"title":"Format Rules","text":"<ol> <li>Use imperative mood</li> <li>✅ \"Add new feature\"</li> <li> <p>❌ \"Added new feature\" or \"Adds new feature\"</p> </li> <li> <p>One change per bullet</p> </li> <li>✅ Separate bullets for each change</li> <li> <p>❌ Multiple changes in one bullet</p> </li> <li> <p>Link to issues/PRs</p> </li> <li>✅ \"Add feature (#123)\"</li> <li> <p>❌ \"Add feature\"</p> </li> <li> <p>Group by category</p> </li> <li>Keep categories in order: Added, Changed, Deprecated, Removed, Fixed, Security</li> </ol>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#workflow","level":2,"title":"Workflow","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#during-development","level":3,"title":"During Development","text":"<pre><code># Make changes\ngit commit -m \"feat: add new feature\"\n\n# Don't update CHANGELOG yet\n</code></pre> <p>Why: Keep CHANGELOG clean by only updating during release prep.</p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#release-preparation","level":3,"title":"Release Preparation","text":"<ol> <li>Review all commits since last release</li> </ol> <pre><code>git log v0.3.0..v0.4.0 --oneline\n</code></pre> <ol> <li>Categorize changes</li> </ol> <pre><code># List all commit messages\ngit log v0.3.0..v0.4.0 --pretty=format:\"%s\"\n\n# Group into:\n# - Added (feat:)\n# - Changed (chore:, refactor: with user impact)\n# - Fixed (fix:)\n# - Breaking (BREAKING CHANGE:)\n</code></pre> <ol> <li>Draft CHANGELOG entry</li> </ol> <pre><code>## [0.4.0] - 2025-12-30\n\n### Added\n- Add feature A (#123)\n- Add feature B (#124)\n\n### Fixed\n- Fix bug C (#125)\n</code></pre> <ol> <li>Update version links at bottom</li> </ol> <pre><code>[0.4.0]: https://github.com/watzon/sellia/compare/v0.3.0...v0.4.0\n[0.3.0]: https://github.com/watzon/sellia/compare/v0.2.3...v0.3.0\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#example-workflow","level":3,"title":"Example Workflow","text":"<pre><code># 1. Checkout main branch\ngit checkout main\ngit pull origin main\n\n# 2. Create release branch\ngit checkout -b release/v0.4.0\n\n# 3. Update version in src/core/version.cr\nVERSION = \"0.4.0\"\n\n# 4. Update CHANGELOG.md\n# Add new version entry at top\n\n# 5. Commit\ngit commit -am \"chore: release v0.4.0\"\n\n# 6. Tag\ngit tag v0.4.0\n\n# 7. Push\ngit push origin release/v0.4.0\ngit push origin v0.4.0\n\n# 8. Create PR and merge to main\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#automation","level":2,"title":"Automation","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#conventional-commits","level":3,"title":"Conventional Commits","text":"<p>If using conventional commits, can auto-generate changelog:</p> <pre><code># Install git-chglog\nbrew install git-chglog\n\n# Generate changelog\ngit-chglog --next-tag v1.2.3 -o CHANGELOG.md\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#github-integration","level":3,"title":"GitHub Integration","text":"<p>Use GitHub release notes:</p> <pre><code># GitHub Actions can auto-generate release notes\n# See: .github/workflows/release.yml\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#version-links","level":2,"title":"Version Links","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#format_1","level":3,"title":"Format","text":"<p>At the bottom of CHANGELOG.md:</p> <pre><code>[Unreleased]: https://github.com/watzon/sellia/compare/v1.2.3...HEAD\n[1.2.3]: https://github.com/watzon/sellia/compare/v1.2.2...v1.2.3\n[1.2.2]: https://github.com/watzon/sellia/compare/v1.2.1...v1.2.2\n[1.2.1]: https://github.com/watzon/sellia/compare/v1.2.0...v1.2.1\n[1.2.0]: https://github.com/watzon/sellia/compare/v1.1.0...v1.2.0\n</code></pre> <p>Purpose: Allow users to click version numbers to see diff on GitHub.</p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#unreleased-section","level":2,"title":"Unreleased Section","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#keep-at-top","level":3,"title":"Keep at Top","text":"<pre><code>## [Unreleased]\n\n### Added\n- (Upcoming features)\n\n### Changed\n- (Upcoming changes)\n</code></pre> <p>Purpose: Show what's coming in next release.</p> <p>When to use: - During active development - Remove/clear when creating release</p>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#release-notes-integration","level":2,"title":"Release Notes Integration","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#github-releases","level":3,"title":"GitHub Releases","text":"<p>Copy CHANGELOG entry to GitHub release description:</p> <pre><code>## Release v1.2.3\n\n## [1.2.3] - 2024-12-30\n\n### Added\n- Add feature A (#123)\n\n### Fixed\n- Fix bug B (#124)\n\n**Full Changelog**: https://github.com/watzon/sellia/compare/v1.2.2...v1.2.3\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#examples","level":2,"title":"Examples","text":"","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#major-release","level":3,"title":"Major Release","text":"<pre><code>## [1.0.0] - 2025-XX-XX\n\n### Added\n- Add admin command for subdomain management (#100)\n- Add SQLite persistence for reserved subdomains (#101)\n\n### Changed\n- Require API key for all tunnels (#102)\n- Improve connection error messages (#103)\n\n### Removed\n- Remove legacy config format support (deprecated in 0.3.0) (#104)\n\n### Fixed\n- Fix tunnel reconnection issues (#105)\n\n### Migration Guide\nInclude upgrade notes in the release notes when a migration is required.\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#minor-release","level":3,"title":"Minor Release","text":"<pre><code>## [0.5.0] - 2025-XX-XX\n\n### Added\n- Add path-based routing support (#80)\n- Add WebSocket inspection in inspector (#81)\n- Add `--open` flag to auto-open inspector (#82)\n\n### Changed\n- Improve inspector performance with virtual scrolling (#83)\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#patch-release","level":3,"title":"Patch Release","text":"<pre><code>## [0.4.1] - 2025-XX-XX\n\n### Fixed\n- Fix crash on invalid subdomain characters (#70)\n- Fix inspector not showing request bodies (#71)\n- Fix memory leak in WebSocket proxy (#72)\n</code></pre>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#best-practices","level":2,"title":"Best Practices","text":"<ol> <li>Keep it user-focused</li> <li>Describe what changed, not how</li> <li> <p>Use language users understand</p> </li> <li> <p>Be specific</p> </li> <li>Include issue/PR numbers</li> <li> <p>Link to relevant docs</p> </li> <li> <p>Be honest</p> </li> <li>Don't hide breaking changes</li> <li> <p>List all fixes, even for embarrassing bugs</p> </li> <li> <p>Keep it chronological</p> </li> <li>Newest versions at top</li> <li> <p>Don't reorder old versions</p> </li> <li> <p>Use semantic versioning</p> </li> <li>MAJOR: Breaking changes in \"Removed\"</li> <li>MINOR: New features in \"Added\"</li> <li>PATCH: Fixes in \"Fixed\"</li> </ol>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/changelog/#see-also","level":2,"title":"See Also","text":"<ul> <li>Versioning Policy - Semantic versioning</li> <li>Building Binaries - Release build process</li> <li>Docker Images - Container releases</li> <li>Keep a Changelog - Format specification</li> </ul>","path":["Developer","Release process","Changelog Maintenance"],"tags":[]},{"location":"developer/release-process/docker-images/","level":1,"title":"Docker Image Publishing","text":"<p>Process for building and publishing Docker images for Sellia.</p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#overview","level":2,"title":"Overview","text":"<p>Sellia provides Docker images for containerized deployment. Images are published to Docker Hub and GitHub Container Registry (GHCR).</p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#docker-images","level":2,"title":"Docker Images","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#image-locations","level":3,"title":"Image Locations","text":"Registry Image Tags GHCR (Primary) <code>ghcr.io/watzon/sellia</code> <code>latest</code>, <code>v0.4.0</code>, <code>0</code>, <code>0.4</code>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#dockerfile","level":2,"title":"Dockerfile","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#client-image-tunnel-client","level":3,"title":"Client Image (Tunnel Client)","text":"<p>Location: <code>Dockerfile</code></p> <pre><code># Multi-stage build for smaller image\nFROM 84codes/crystal:1.18.2-alpine AS builder\n\nWORKDIR /app\n\n# Install build dependencies\nRUN apk add --no-cache \\\n    yaml-static \\\n    openssl-libs-static \\\n    openssl-dev \\\n    zlib-static \\\n    sqlite-dev \\\n    sqlite-static \\\n    pcre-dev \\\n    gc-dev \\\n    libevent-static \\\n    libxml2-dev\n\n# Copy shard files first for layer caching\nCOPY shard.yml shard.lock ./\nRUN shards install --production\n\n# Copy source code\nCOPY src/ src/\n\n# Build server binary (static for Alpine)\nRUN mkdir -p bin &amp;&amp; crystal build src/server/main.cr -o bin/sellia-server \\\n    --release --static --no-debug\n\n# Final stage\nFROM alpine:3.20 AS runtime\n\n# Add CA certificates for HTTPS and create non-root user\nRUN apk add --no-cache ca-certificates tzdata \\\n    &amp;&amp; addgroup -g 1000 sellia \\\n    &amp;&amp; adduser -u 1000 -G sellia -s /bin/sh -D sellia\n\nWORKDIR /app\n\n# Copy server binary from builder\nCOPY --from=builder /app/bin/sellia-server /usr/local/bin/sellia-server\n\n# Set ownership\nRUN chown -R sellia:sellia /app\n\nUSER sellia\n\n# Default environment variables\nENV SELLIA_HOST=0.0.0.0 \\\n    SELLIA_PORT=3000 \\\n    SELLIA_DOMAIN=localhost\n\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=5s --start-period=5s --retries=3 \\\n    CMD wget --no-verbose --tries=1 --spider http://localhost:${SELLIA_PORT}/health || exit 1\n\nENTRYPOINT [\"sellia-server\"]\nCMD [\"--host\", \"0.0.0.0\"]\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#building-images","level":2,"title":"Building Images","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#local-build","level":3,"title":"Local Build","text":"<pre><code># Build image\ndocker build -t ghcr.io/watzon/sellia:latest .\n\n# Build with specific version\ndocker build -t ghcr.io/watzon/sellia:v0.4.0 .\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#build-arguments","level":3,"title":"Build Arguments","text":"<pre><code># Pass version at build time\nARG VERSION=dev\nRUN echo \"const VERSION = \\\"${VERSION}\\\"\" &gt; src/version.cr\n</code></pre> <pre><code>docker build --build-arg VERSION=1.2.3 -t sellia/tunnel:v1.2.3 .\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#multi-architecture-builds","level":2,"title":"Multi-Architecture Builds","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#buildx-for-multi-platform","level":3,"title":"Buildx for Multi-Platform","text":"<pre><code># Enable buildx\ndocker buildx create --use\n\n# Build for multiple platforms\ndocker buildx build \\\n  --platform linux/amd64,linux/arm64 \\\n  -t sellia/tunnel:latest \\\n  --push \\\n  .\n</code></pre> <p>Platforms: - <code>linux/amd64</code> - Intel/AMD 64-bit - <code>linux/arm64</code> - ARM 64-bit (Apple Silicon, AWS Graviton)</p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#github-actions-workflow","level":3,"title":"GitHub Actions Workflow","text":"<p>Location: <code>.github/workflows/docker.yml</code></p> <pre><code>name: Docker\n\non:\n  push:\n    tags:\n      - 'v*'\n  push:\n    branches:\n      - main\n\njobs:\n  docker:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v4\n\n      - name: Set up QEMU\n        uses: docker/setup-qemu-action@v3\n\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v3\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v3\n        with:\n          username: ${{ secrets.DOCKER_USERNAME }}\n          password: ${{ secrets.DOCKER_PASSWORD }}\n\n      - name: Extract metadata\n        id: meta\n        uses: docker/metadata-action@v5\n        with:\n          images: sellia/tunnel\n          tags: |\n            type=ref,event=branch\n            type=semver,pattern={{version}}\n            type=semver,pattern={{major}}.{{minor}}\n            type=semver,pattern={{major}}\n\n      - name: Build and push\n        uses: docker/build-push-action@v5\n        with:\n          context: .\n          platforms: linux/amd64,linux/arm64\n          push: true\n          tags: ${{ steps.meta.outputs.tags }}\n          labels: ${{ steps.meta.outputs.labels }}\n          cache-from: type=gha\n          cache-to: type=gha,mode=max\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#image-tags","level":2,"title":"Image Tags","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#tagging-strategy","level":3,"title":"Tagging Strategy","text":"Tag Purpose Example <code>latest</code> Most recent release <code>ghcr.io/watzon/sellia:latest</code> <code>v0.4.0</code> Specific version <code>ghcr.io/watzon/sellia:v0.4.0</code> <code>0</code> Major version <code>ghcr.io/watzon/sellia:0</code> <code>0.4</code> Minor version <code>ghcr.io/watzon/sellia:0.4</code>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#tag-commands","level":3,"title":"Tag Commands","text":"<pre><code># Tag image for multiple versions\ndocker tag ghcr.io/watzon/sellia:v0.4.0 ghcr.io/watzon/sellia:latest\ndocker tag ghcr.io/watzon/sellia:v0.4.0 ghcr.io/watzon/sellia:0\ndocker tag ghcr.io/watzon/sellia:v0.4.0 ghcr.io/watzon/sellia:0.4\n\n# Push all tags\ndocker push ghcr.io/watzon/sellia:latest\ndocker push ghcr.io/watzon/sellia:0\ndocker push ghcr.io/watzon/sellia:0.4\ndocker push ghcr.io/watzon/sellia:v0.4.0\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#publishing","level":2,"title":"Publishing","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#manual-publishing","level":3,"title":"Manual Publishing","text":"<pre><code># Login to GHCR\necho $GITHUB_TOKEN | docker login ghcr.io -u username --password-stdin\n\n# Build and push\ndocker buildx build \\\n  --platform linux/amd64,linux/arm64 \\\n  -t ghcr.io/watzon/sellia:v0.4.0 \\\n  -t ghcr.io/watzon/sellia:latest \\\n  --push \\\n  .\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#github-container-registry","level":3,"title":"GitHub Container Registry","text":"<pre><code># Login to GHCR\necho $GITHUB_TOKEN | docker login ghcr.io -u username --password-stdin\n\n# Build and push\ndocker buildx build \\\n  --platform linux/amd64,linux/arm64 \\\n  -t ghcr.io/watzon/sellia:v1.2.3 \\\n  -t ghcr.io/watzon/sellia:latest \\\n  --push \\\n  .\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#using-docker-images","level":2,"title":"Using Docker Images","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#basic-usage","level":3,"title":"Basic Usage","text":"<pre><code># Tunnel localhost:3000 (requires CLI binary, not server image)\n# Note: The Docker image currently only contains sellia-server\n# Use local binary for tunnel client\n\n# Example with server:\ndocker run --rm \\\n  --name sellia-server \\\n  -p 3000:3000 \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#with-configuration-file","level":3,"title":"With Configuration File","text":"<pre><code># Mount config file\ndocker run --rm \\\n  --name sellia-server \\\n  -v $(pwd)/sellia.yml:/app/sellia.yml \\\n  -p 3000:3000 \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#with-inspector-access","level":3,"title":"With Inspector Access","text":"<pre><code># Expose server port with custom configuration\ndocker run --rm \\\n  --name sellia-server \\\n  -p 3000:3000 \\\n  -e SELLIA_DOMAIN=yourdomain.com \\\n  -e SELLIA_REQUIRE_AUTH=true \\\n  -e SELLIA_MASTER_KEY=your-key \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#docker-compose","level":3,"title":"Docker Compose","text":"<p>docker-compose.yml</p> <pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - SELLIA_HOST=0.0.0.0\n      - SELLIA_DOMAIN=localhost\n      - SELLIA_REQUIRE_AUTH=true\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n    restart: unless-stopped\n</code></pre> <p>Run:</p> <pre><code>docker-compose up\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#image-size-optimization","level":2,"title":"Image Size Optimization","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#current-sizes","level":3,"title":"Current Sizes","text":"Image Type Size Alpine-based ~15 MB Debian-based ~25 MB Ubuntu-based ~40 MB","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#optimization-techniques","level":3,"title":"Optimization Techniques","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#1-multi-stage-build","level":4,"title":"1. Multi-Stage Build","text":"<pre><code># Builder stage with all tools\nFROM crystallang/crystal:latest AS builder\n# ... build steps ...\n\n# Final stage with minimal runtime\nFROM alpine:3.19\nCOPY --from=builder /app/bin/sellia /app/sellia\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#2-strip-binary","level":4,"title":"2. Strip Binary","text":"<pre><code>RUN strip /app/bin/sellia\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#3-use-distroless","level":4,"title":"3. Use Distroless","text":"<pre><code>FROM gcr.io/distroless/cc-debian12\nCOPY --from=builder /app/bin/sellia /app/sellia\n</code></pre> <p>Benefits: - Minimal attack surface - Smaller image size - No shell/package manager</p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#security-scanning","level":2,"title":"Security Scanning","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#trivy-scan","level":3,"title":"Trivy Scan","text":"<pre><code># Install Trivy\nbrew install trivy\n\n# Scan image\ntrivy image sellia/tunnel:latest\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#docker-scout","level":3,"title":"Docker Scout","text":"<pre><code># Scan image\ndocker scout cves sellia/tunnel:latest\n\n# Quick check\ndocker scout quickview sellia/tunnel:latest\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#ci-integration","level":3,"title":"CI Integration","text":"<pre><code>- name: Run Trivy\n  uses: aquasecurity/trivy-action@master\n  with:\n    image-ref: sellia/tunnel:latest\n    format: 'sarif'\n    output: 'trivy-results.sarif'\n\n- name: Upload Trivy Results\n  uses: github/codeql-action/upload-sarif@v2\n  with:\n    sarif_file: 'trivy-results.sarif'\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#testing-images","level":2,"title":"Testing Images","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#smoke-test","level":3,"title":"Smoke Test","text":"<pre><code># Pull image\ndocker pull ghcr.io/watzon/sellia:latest\n\n# Run container\ndocker run --rm ghcr.io/watzon/sellia:latest --version\n\n# Expected: Sellia Server output\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#integration-test","level":3,"title":"Integration Test","text":"<pre><code># Start test web server\ndocker run -d --name web -p 3000:80 nginx:alpine\n\n# Start tunnel\ndocker run --rm --name tunnel \\\n  --link web:web \\\n  -e SELLIA_API_KEY=key \\\n  sellia/tunnel:latest \\\n  http 3000 --host web\n</code></pre>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#update-strategy","level":2,"title":"Update Strategy","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#auto-update-watchtower","level":3,"title":"Auto-Update Watchtower","text":"<pre><code># Run Watchtower to auto-update containers\ndocker run -d \\\n  --name watchtower \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  containrrr/watchtower \\\n  sellia-tunnel\n</code></pre> <p>Behavior: Watchtower checks for new images and restarts containers automatically.</p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#permission-denied-error","level":3,"title":"\"Permission Denied\" Error","text":"<p>Cause: Running as non-root user without permissions.</p> <p>Solution: <pre><code># Run with specific UID/GID\ndocker run --rm \\\n  -u $(id -u):$(id -g) \\\n  sellia/tunnel:latest \\\n  http 3000\n</code></pre></p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#inspector-not-accessible","level":3,"title":"Inspector Not Accessible","text":"<p>Cause: Inspector port not exposed.</p> <p>Solution: <pre><code># Expose inspector port\ndocker run --rm -p 4040:4040 sellia/tunnel:latest http 3000\n</code></pre></p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#cannot-connect-to-local-service","level":3,"title":"\"Cannot Connect to Local Service\"","text":"<p>Cause: Container networking issue.</p> <p>Solution: <pre><code># Use network mode: host\ndocker run --rm --network host sellia/tunnel:latest http 3000\n\n# Or use service name\ndocker run --rm --link web:web \\\n  sellia/tunnel:latest http 3000 --host web\n</code></pre></p>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/docker-images/#see-also","level":2,"title":"See Also","text":"<ul> <li>Building Binaries - Binary builds</li> <li>Versioning Policy - Semantic versioning</li> <li>GHCR - Published images</li> <li>Dockerfile - Source Dockerfile</li> </ul>","path":["Developer","Release process","Docker Image Publishing"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/","level":1,"title":"Homebrew and Scoop Packages","text":"<p>Package manager distribution for Sellia (planned feature).</p>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#status","level":2,"title":"Status","text":"<p>Current Status: 🚧 Not Yet Implemented</p> <p>This is a placeholder documentation for future Homebrew and Scoop package support.</p>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#overview","level":2,"title":"Overview","text":"<p>Package managers provide convenient installation and updates for Sellia:</p> <ul> <li>Homebrew - macOS and Linux</li> <li>Scoop - Windows</li> </ul>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#homebrew-macoslinux","level":2,"title":"Homebrew (macOS/Linux)","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#installation-planned","level":3,"title":"Installation (Planned)","text":"<pre><code># Add tap\nbrew tap sellia/tap\n\n# Install Sellia\nbrew install sellia\n\n# Start tunnel\nsellia http 3000\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#homebrew-formula","level":3,"title":"Homebrew Formula","text":"<p>File: <code>Formula/sellia.rb</code></p> <pre><code>class Sellia &lt; Formula\n  desc \"Secure tunnels to localhost\"\n  homepage \"https://github.com/watzon/sellia\"\n  url \"https://github.com/watzon/sellia/archive/refs/tags/v1.2.3.tar.gz\"\n  sha256 \"abc123...\"\n  license \"MIT\"\n\n  depends_on \"crystal\"\n  depends_on \"node\" =&gt; :build\n\n  def install\n    # Build React UI\n    cd \"web\" do\n      system \"npm\", \"install\"\n      system \"npm\", \"run\", \"build\"\n    end\n\n    # Build Crystal binary\n    system \"shards\", \"build\", \"--release\"\n    bin.install \"bin/sellia\"\n  end\n\n  test do\n    assert_match \"Sellia v#{version}\", shell_output(\"#{bin}/sellia version\")\n  end\nend\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#auto-update-strategy","level":3,"title":"Auto-Update Strategy","text":"<pre><code># Livecheck version\nbrew livecheck sellia --tap sellia/tap\n</code></pre> <p>Configuration (in Formula):</p> <pre><code>livecheck do\n  url :stable\n  regex(/^v?(\\d+(?:\\.\\d+)+)$/i)\nend\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#scoop-windows","level":2,"title":"Scoop (Windows)","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#installation-planned_1","level":3,"title":"Installation (Planned)","text":"<pre><code># Add bucket\nscoop bucket add sellia https://github.com/watzon/sellia\n\n# Install Sellia\nscoop install sellia\n\n# Start tunnel\nsellia http 3000\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#scoop-manifest","level":3,"title":"Scoop Manifest","text":"<p>File: <code>bucket/sellia.json</code></p> <pre><code>{\n  \"version\": \"1.2.3\",\n  \"description\": \"Secure tunnels to localhost\",\n  \"homepage\": \"https://github.com/watzon/sellia\",\n  \"license\": \"MIT\",\n  \"url\": [\n    \"https://github.com/watzon/sellia/releases/download/v1.2.3/sellia-1.2.3-windows-x86_64.exe#/sellia.exe\"\n  ],\n  \"hash\": [\n    \"abc123...\"\n  ],\n  \"bin\": [\n    [\"sellia.exe\", \"sellia\"]\n  ],\n  \"checkver\": \"github\",\n  \"autoupdate\": {\n    \"url\": \"https://github.com/watzon/sellia/releases/download/v$version/sellia-$version-windows-x86_64.exe#/sellia.exe\"\n  }\n}\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#implementation-checklist","level":2,"title":"Implementation Checklist","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#homebrew","level":3,"title":"Homebrew","text":"<ul> <li> Create Homebrew tap repository</li> <li> Write Formula file</li> <li> Test installation on macOS</li> <li> Test installation on Linux</li> <li> Set up CI/CD to publish formula</li> <li> Add livecheck support</li> <li> Document in README</li> </ul>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#scoop","level":3,"title":"Scoop","text":"<ul> <li> Create Scoop bucket</li> <li> Write manifest file</li> <li> Test installation on Windows 10/11</li> <li> Set up CI/CD to publish manifest</li> <li> Add auto-update support</li> <li> Document in README</li> </ul>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#cicd-integration","level":2,"title":"CI/CD Integration","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#publish-formula-on-release","level":3,"title":"Publish Formula on Release","text":"<p>Location: <code>.github/workflows/release.yml</code></p> <pre><code>- name: Update Homebrew formula\n  if: startsWith(github.ref, 'refs/tags/')\n  run: |\n    # Update version in Formula\n    sed -i \"s/url \\\".*\\\"/url \\\"https://github.com/watzon/sellia/archive/refs/tags/${{ github.ref_name }}.tar.gz\\\"/\" Formula/sellia.rb\n    sed -i \"s/sha256 \\\".*\\\"/sha256 \\\"${SHASUM}\\\"/\" Formula/sellia.rb\n\n    # Commit to tap repository\n    git clone https://${{ secrets.HOMEBREW_TOKEN }}@github.com/sellia/homebrew-tap.git\n    cp Formula/sellia.rb homebrew-tap/Formula/sellia.rb\n    cd homebrew-tap\n    git config user.name \"Sellia Bot\"\n    git config user.email \"bot@sellia.me\"\n    git commit -am \"Release ${{ github.ref_name }}\"\n    git push\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#publish-scoop-manifest","level":3,"title":"Publish Scoop Manifest","text":"<pre><code>- name: Update Scoop manifest\n  if: startsWith(github.ref, 'refs/tags/')\n  run: |\n    # Update version in manifest\n    cat &gt; bucket/sellia.json &lt;&lt;EOF\n    {\n      \"version\": \"${VERSION}\",\n      \"url\": [\"https://github.com/watzon/sellia/releases/download/v${VERSION}/sellia-${VERSION}-windows-x86_64.exe#/sellia.exe\"],\n      \"hash\": \"${SHASUM}\"\n    }\n    EOF\n\n    # Commit to bucket\n    git clone https://${{ secrets.SCOOP_TOKEN }}@github.com/sellia/scoop-bucket.git\n    cp bucket/sellia.json scoop-bucket/bucket/sellia.json\n    cd scoop-bucket\n    git config user.name \"Sellia Bot\"\n    git config user.email \"bot@sellia.me\"\n    git commit -am \"Release ${VERSION}\"\n    git push\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#comparison","level":2,"title":"Comparison","text":"Feature Homebrew Scoop Platforms macOS, Linux Windows Package Format Ruby formula JSON manifest Build from Source Yes No (binary only) Auto-update Yes (livecheck) Yes (checkver) Sandbox Optional Yes (by default)","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#alternative-package-managers","level":2,"title":"Alternative Package Managers","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#linux","level":3,"title":"Linux","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#aur-arch-linux","level":4,"title":"AUR (Arch Linux)","text":"<pre><code># Install from AUR\nyay -S sellia\n\n# Or manually\ngit clone https://aur.archlinux.org/sellia.git\ncd sellia\nmakepkg -si\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#snap-ubuntudebian","level":4,"title":"Snap (Ubuntu/Debian)","text":"<pre><code># Install snap\nsudo snap install sellia\n\n# Run tunnel\nsellia.http 3000\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#flatpak","level":4,"title":"Flatpak","text":"<pre><code># Install flatpak\nflatpak install flathub me.sellia.Tunnel\n\n# Run tunnel\nflatpak run me.sellia.Tunnel http 3000\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#macos","level":3,"title":"macOS","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#macports","level":4,"title":"MacPorts","text":"<pre><code># Install from MacPorts\nsudo port install sellia\n\n# Run tunnel\nsellia http 3000\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#user-documentation-planned","level":2,"title":"User Documentation (Planned)","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#macos-installation","level":3,"title":"macOS Installation","text":"<pre><code>## macOS\n\n### Using Homebrew (recommended)\n\n```bash\nbrew tap sellia/tap\nbrew install sellia\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#manual-install","level":3,"title":"Manual Install","text":"<p>Download binary from releases page. <pre><code>---\n\n### Linux Installation\n\n```markdown\n## Linux\n\n### Using Homebrew\n\n```bash\nbrew tap sellia/tap\nbrew install sellia\n</code></pre></p>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#using-aur-arch-linux","level":3,"title":"Using AUR (Arch Linux)","text":"<pre><code>yay -S sellia\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#manual-install_1","level":3,"title":"Manual Install","text":"<p>Download binary from releases page. <pre><code>---\n\n### Windows Installation\n\n```markdown\n## Windows\n\n### Using Scoop (recommended)\n\n```powershell\nscoop bucket add sellia https://github.com/sellia/scoop-bucket\nscoop install sellia\n</code></pre></p>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#manual-install_2","level":3,"title":"Manual Install","text":"<p>Download <code>.exe</code> from releases page. <pre><code>---\n\n## Testing Package Installations\n\n### Homebrew\n\n```bash\n# Test local formula\nbrew install --build-from-source Formula/sellia.rb\n\n# Verify installation\nsellia version\n\n# Test tunnel\nsellia http 3000\n</code></pre></p>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#scoop_1","level":3,"title":"Scoop","text":"<pre><code># Test local manifest\nscoop install .\\bucket\\sellia.json\n\n# Verify installation\nsellia version\n\n# Test tunnel\nsellia http 3000\n</code></pre>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#resources","level":2,"title":"Resources","text":"","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#homebrew_1","level":3,"title":"Homebrew","text":"<ul> <li>Homebrew Documentation</li> <li>Formula Cookbook</li> <li>Creating a Tap</li> </ul>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#scoop_2","level":3,"title":"Scoop","text":"<ul> <li>Scoop Documentation</li> <li>Creating Apps</li> <li>Creating Buckets</li> </ul>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/homebrew-scoop/#see-also","level":2,"title":"See Also","text":"<ul> <li>Building Binaries - Build process</li> <li>Docker Images - Container distribution</li> <li>Versioning Policy - Semantic versioning</li> <li>Release Workflow - CI/CD</li> </ul>","path":["Developer","Release process","Homebrew and Scoop Packages"],"tags":[]},{"location":"developer/release-process/versioning/","level":1,"title":"Versioning Policy","text":"<p>Semantic versioning policy for Sellia releases.</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#overview","level":2,"title":"Overview","text":"<p>Sellia follows Semantic Versioning 2.0.0.</p> <p>Format: <code>MAJOR.MINOR.PATCH</code> (e.g., <code>1.2.3</code>)</p> <ul> <li>MAJOR: Incompatible API changes</li> <li>MINOR: New functionality (backwards compatible)</li> <li>PATCH: Bug fixes (backwards compatible)</li> </ul>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#version-number-format","level":2,"title":"Version Number Format","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#examples","level":3,"title":"Examples","text":"Version Type Meaning <code>0.1.0</code> Initial First release <code>0.4.0</code> Pre-release Current development version <code>1.0.0</code> Major Future stable release","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#pre-release-versions","level":3,"title":"Pre-Release Versions","text":"<p>Format: <code>MAJOR.MINOR.PATCH-prerelease.N</code></p> <p>Examples: - <code>1.0.0-alpha.1</code> - <code>1.0.0-beta.1</code> - <code>1.0.0-rc.1</code></p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#version-bumping-rules","level":2,"title":"Version Bumping Rules","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#major-x00","level":3,"title":"MAJOR (X.0.0)","text":"<p>Increment when:</p> <ol> <li>CLI interface changes</li> <li>Removing commands or flags</li> <li>Changing flag names or formats</li> <li> <p>Requiring new arguments</p> </li> <li> <p>Config file format changes</p> </li> <li>Removing config fields</li> <li>Renaming required fields</li> <li> <p>Changing config file structure</p> </li> <li> <p>Protocol changes</p> </li> <li>Breaking protocol message changes</li> <li>Removing message types</li> <li> <p>Required new fields in messages</p> </li> <li> <p>API key changes</p> </li> <li>Requiring new API key format</li> <li>Changing authentication method</li> </ol> <p>Examples: <pre><code>1.2.3 → 2.0.0\n- Remove `--legacy-flag` option\n- Change config from YAML to TOML\n- Require API keys for all tunnels\n</code></pre></p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#minor-xy0","level":3,"title":"MINOR (x.Y.0)","text":"<p>Increment when:</p> <ol> <li>New features</li> <li>Adding new commands</li> <li>Adding new CLI flags (optional)</li> <li> <p>Adding new config fields (optional)</p> </li> <li> <p>Enhancements</p> </li> <li>New inspector features</li> <li>Performance improvements</li> <li> <p>New protocol message types (backwards compatible)</p> </li> <li> <p>Non-breaking additions</p> </li> <li>New tunnel types</li> <li>New routing features</li> <li>Additional output formats</li> </ol> <p>Examples: <pre><code>1.2.3 → 1.3.0\n- Add `sellia admin` command\n- Add WebSocket inspection in inspector\n- Add path-based routing\n</code></pre></p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#patch-xyz","level":3,"title":"PATCH (x.y.Z)","text":"<p>Increment when:</p> <ol> <li>Bug fixes</li> <li>Fix crashes</li> <li>Fix memory leaks</li> <li> <p>Fix incorrect behavior</p> </li> <li> <p>Internal changes</p> </li> <li>Code refactoring</li> <li>Performance optimizations</li> <li> <p>Documentation updates</p> </li> <li> <p>Backwards-compatible fixes</p> </li> <li>Improve error messages</li> <li>Add validation warnings</li> <li>Fix edge cases</li> </ol> <p>Examples: <pre><code>1.2.3 → 1.2.4\n- Fix connection timeout issue\n- Fix inspector display bug\n- Improve error message for invalid auth\n</code></pre></p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#pre-release-versions_1","level":2,"title":"Pre-Release Versions","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#alpha","level":3,"title":"Alpha","text":"<p>Status: Early development, unstable</p> <p>Usage: Feature development, testing</p> <p>Examples: - <code>1.0.0-alpha.1</code> - First alpha - <code>1.0.0-alpha.2</code> - Second alpha</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#beta","level":3,"title":"Beta","text":"<p>Status: Feature complete, testing needed</p> <p>Usage: Public testing, feedback</p> <p>Examples: - <code>1.0.0-beta.1</code> - First beta - <code>1.0.0-beta.2</code> - Second beta</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#release-candidate-rc","level":3,"title":"Release Candidate (RC)","text":"<p>Status: Ready for release unless bugs found</p> <p>Usage: Final testing before GA</p> <p>Examples: - <code>1.0.0-rc.1</code> - First RC - <code>1.0.0-rc.2</code> - Second RC</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#development-versions","level":2,"title":"Development Versions","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#nightly-dev-builds","level":3,"title":"Nightly / Dev Builds","text":"<p>Format: <code>dev-YYYYMMDD</code> or commit hash</p> <p>Examples: - <code>dev-20241230</code> - <code>dev-a1b2c3d</code></p> <p>Status: Unstable, not for production use</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#version-sources","level":2,"title":"Version Sources","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#source-of-truth","level":3,"title":"Source of Truth","text":"<ol> <li> <p>src/core/version.cr - Crystal code (primary)    <pre><code>module Sellia\n  VERSION = \"0.4.0\"\nend\n</code></pre></p> </li> <li> <p>shard.yml - Crystal dependencies    <pre><code>name: sellia\nversion: 0.4.0\n</code></pre></p> </li> <li> <p>package.json - Web UI (if UI changed)    <pre><code>{\n  \"version\": \"0.4.0\"\n}\n</code></pre></p> </li> <li> <p>Git tags - Releases    <pre><code>v0.4.0\n</code></pre></p> </li> </ol> <p>They must be synchronized for releases.</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#release-workflow","level":2,"title":"Release Workflow","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#1-development","level":3,"title":"1. Development","text":"<pre><code># Work on main branch\ngit checkout main\n\n# Make changes, commit\ngit commit -m \"feat: add new feature\"\n</code></pre> <p>Version format: <code>dev</code> or unreleased</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#2-pre-release","level":3,"title":"2. Pre-Release","text":"<pre><code># Update version in src/core/version.cr\nVERSION = \"1.3.0-alpha.1\"\n\n# Commit\ngit commit -m \"chore: bump version to 1.3.0-alpha.1\"\n\n# Tag\ngit tag v1.3.0-alpha.1\ngit push origin v1.3.0-alpha.1\n</code></pre>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#3-release","level":3,"title":"3. Release","text":"<pre><code># Update version in src/core/version.cr\nVERSION = \"0.5.0\"\n\n# Update shard.yml\n# version: 0.5.0\n\n# Update package.json (if UI changed)\nnpm version 0.5.0\n\n# Commit\ngit commit -am \"chore: release v0.5.0\"\n\n# Tag\ngit tag v0.5.0\ngit push origin main v0.5.0\n\n# GitHub Actions creates release and builds binaries\n</code></pre>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#backwards-compatibility-policy","level":2,"title":"Backwards Compatibility Policy","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#guaranteed-stable","level":3,"title":"Guaranteed Stable","text":"<p>These interfaces are stable within a MAJOR version:</p> <ol> <li>CLI Commands</li> <li>Existing command names</li> <li>Existing flag names</li> <li> <p>Flag formats</p> </li> <li> <p>Config File</p> </li> <li>Existing config keys</li> <li> <p>Config file format (YAML)</p> </li> <li> <p>Protocol</p> </li> <li>Existing message types</li> <li> <p>Message field names</p> </li> <li> <p>Public URLs</p> </li> <li>URL format for tunnels</li> </ol>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#may-change","level":3,"title":"May Change","text":"<p>These interfaces may change in MINOR releases:</p> <ol> <li>Output format</li> <li>CLI text output</li> <li> <p>Log messages</p> </li> <li> <p>Internal APIs</p> </li> <li>Database schema</li> <li> <p>Inspector API (not public)</p> </li> <li> <p>Default values</p> </li> <li>Port numbers</li> <li>Timeout durations</li> </ol>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#deprecation-policy","level":2,"title":"Deprecation Policy","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#deprecation-process","level":3,"title":"Deprecation Process","text":"<ol> <li>Announce deprecation in release notes (MINOR version)</li> <li>Mark as deprecated in code/docs</li> <li>Wait one MAJOR version before removal</li> <li>Remove in next MAJOR version</li> </ol> <p>Example: <pre><code>v1.2.0 - Add new feature\nv1.3.0 - Mark old feature as deprecated (release notes)\nv2.0.0 - Remove old feature\n</code></pre></p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#changelog-requirements","level":2,"title":"Changelog Requirements","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#for-each-release","level":3,"title":"For Each Release","text":"<p>Must include:</p> <ul> <li>Version number and date</li> <li>Type (MAJOR/MINOR/PATCH)</li> <li>Changes grouped by type:</li> <li>Added</li> <li>Changed</li> <li>Deprecated</li> <li>Removed</li> <li>Fixed</li> <li>Security</li> </ul> <p>See: Changelog Maintenance</p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#migration-guides","level":2,"title":"Migration Guides","text":"","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#for-major-releases","level":3,"title":"For MAJOR Releases","text":"<p>Provide migration guide when:</p> <ol> <li>Config format changes</li> <li>CLI flags change</li> <li>Protocol changes</li> </ol> <p>Example: <pre><code>## Migrating from 1.x to 2.0\n\n### Config Changes\n\nOld format:\n```yaml\ntunnel_port: 3000\n</code></pre></p> <p>New format: <pre><code>tunnels:\n  default:\n    port: 3000\n</code></pre> <pre><code>---\n\n## Version Detection\n\n### Check Version\n\n```bash\nsellia version\n# Output: Sellia v0.4.0\n\nsellia-server --version\n# Output: Sellia Server v0.4.0\n</code></pre></p>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#check-for-updates","level":3,"title":"Check for Updates","text":"<pre><code>sellia update --check\n# Output: Current: 1.2.3, Latest: 1.2.4\n</code></pre>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/release-process/versioning/#see-also","level":2,"title":"See Also","text":"<ul> <li>Changelog Maintenance - Maintaining CHANGELOG.md</li> <li>Building Binaries - Cross-compilation</li> <li>Docker Images - Container releases</li> <li>Release Process - Full release workflow</li> </ul>","path":["Developer","Release process","Versioning Policy"],"tags":[]},{"location":"developer/security/","level":1,"title":"Security","text":"<p>Security considerations and best practices for Sellia.</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#overview","level":2,"title":"Overview","text":"<p>This section covers security aspects of Sellia, including authentication, encryption, and secure deployment practices.</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#security-model","level":2,"title":"Security Model","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#threat-model","level":3,"title":"Threat Model","text":"<p>Sellia is designed to protect against:</p> <ul> <li>Unauthorized tunnel creation - API key authentication</li> <li>Tunnel hijacking - Subdomain validation and reservation</li> <li>Data interception - TLS/WSS encryption</li> <li>Abuse - Rate limiting and authentication</li> <li>Information leakage - Secure credential storage</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#security-layers","level":3,"title":"Security Layers","text":"<ol> <li>Transport Security - TLS/WSS for encrypted communication</li> <li>Server Authentication - API key validation</li> <li>Tunnel Authentication - HTTP basic auth per tunnel</li> <li>Access Control - Subdomain reservation and validation</li> <li>Rate Limiting - Abuse prevention</li> </ol>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#authentication","level":2,"title":"Authentication","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#server-authentication","level":3,"title":"Server Authentication","text":"<p>API keys control who can create tunnels:</p> <pre><code># Enable authentication\nsellia-server --require-auth --master-key secure-key\n\n# Or with environment\nexport SELLIA_MASTER_KEY=$(openssl rand -hex 32)\nexport SELLIA_REQUIRE_AUTH=true\n</code></pre> <p>Best Practices: - Generate strong master keys (32+ bytes) - Rotate keys regularly - Store keys securely (environment variables, secrets managers) - Never commit keys to repository - Use different keys for different environments</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#tunnel-authentication","level":3,"title":"Tunnel Authentication","text":"<p>Protect individual tunnels with HTTP basic auth:</p> <pre><code>sellia http 3000 --auth user:password\n</code></pre> <p>Best Practices: - Use strong, unique passwords per tunnel - Rotate credentials periodically - Use password managers for storage - Share credentials securely</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#api-key-storage","level":3,"title":"API Key Storage","text":"<p>Environment Variables (Recommended): <pre><code>export SELLIA_API_KEY=$(openssl rand -hex 32)\n</code></pre></p> <p>Configuration Files: <pre><code># sellia.yml - Use environment variables\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}  # From environment\n</code></pre></p> <p>Never Do: <pre><code># NEVER commit actual keys\napi_key: \"abc123\"  # BAD\n</code></pre></p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#transport-security","level":2,"title":"Transport Security","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#tlswss-encryption","level":3,"title":"TLS/WSS Encryption","text":"<p>Encrypt all traffic with TLS:</p> <pre><code># The server typically runs behind a reverse proxy (Caddy, nginx, Traefik)\n# for HTTPS/WSS termination. The server itself supports HTTP/WebSocket.\n\n# Example with Caddy reverse proxy:\nsellia-server --port 3000 --domain yourdomain.com\n</code></pre> <p>Certificate Setup: - Use valid TLS certificates - Keep certificates up to date - Use strong cipher suites - Enable HSTS</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#certificate-sources","level":3,"title":"Certificate Sources","text":"<p>Cloudflare Origin Certificate (Recommended): - Free for Cloudflare users - 15-year validity - Wildcard certificates</p> <p>Let's Encrypt: - Free, automated certificates - 90-day validity - Auto-renewal with certbot</p> <p>Commercial CA: - Trusted by all clients - Varying costs - Different validation levels</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#input-validation","level":2,"title":"Input Validation","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#subdomain-validation","level":3,"title":"Subdomain Validation","text":"<p>Validate subdomains to prevent injection:</p> <pre><code>def validate_subdomain(subdomain : String) : Bool\n  return false if subdomain.empty?\n  return false if subdomain.size &gt; 63\n  return false unless subdomain.matches?(/^[a-z0-9-]+$/)\n  return false if subdomain.starts_with?('-')\n  return false if subdomain.ends_with?('-')\n  true\nend\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<p>Prevent reservation of system subdomains:</p> <pre><code>RESERVED_SUBDOMAINS = %w[\n  www\n  api\n  admin\n  mail\n  ftp\n  localhost\n  test\n  dev\n  staging\n  production\n]\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#host-header-validation","level":3,"title":"Host Header Validation","text":"<p>Validate Host headers to prevent attacks:</p> <pre><code>def validate_host_header(host : String) : Bool\n  # Check format\n  return false unless host.includes?(@domain)\n\n  # Check for port\n  return false if host.includes?(':') &amp;&amp; !valid_port?(host)\n\n  true\nend\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#rate-limiting","level":2,"title":"Rate Limiting","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#configuration","level":3,"title":"Configuration","text":"<p>Enable rate limiting to prevent abuse:</p> <pre><code># Rate limiting enabled by default\nsellia-server\n\n# Disable (not recommended in production)\nsellia-server --no-rate-limit\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#implementation","level":3,"title":"Implementation","text":"<p>Track requests per client:</p> <pre><code>class RateLimiter\n  REQUESTS_PER_MINUTE = 60\n\n  def allow?(client_ip : String) : Bool\n    # Check request count\n    # Enforce limit\n    # Return true/false\n  end\nend\n</code></pre> <p>Best Practices: - Keep rate limiting enabled in production - Adjust limits based on capacity - Log rate limit violations - Consider per-user limits for authenticated users</p>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#data-security","level":2,"title":"Data Security","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#request-logging","level":3,"title":"Request Logging","text":"<p>Be careful logging sensitive data:</p> <pre><code># Don't log sensitive headers\nSENSITIVE_HEADERS = %w[\n  authorization\n  cookie\n  set-cookie\n  x-api-key\n]\n\ndef sanitize_headers(headers : HTTP::Headers) : HTTP::Headers\n  headers.dup.tap do |h|\n    SENSITIVE_HEADERS.each do |name|\n      h[name] = \"[REDACTED]\" if h[name]?\n    end\n  end\nend\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#password-storage","level":3,"title":"Password Storage","text":"<p>Never log passwords:</p> <pre><code># Bad\nLog.info { \"Tunnel created with auth: #{user}:#{pass}\" }\n\n# Good\nLog.info { \"Tunnel created with auth: #{user}:[REDACTED]\" }\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#inspector-data","level":3,"title":"Inspector Data","text":"<p>Clear sensitive data from inspector:</p> <pre><code># Clear history periodically\nsellia http 3000  # Auto-clear on exit (future)\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#deployment-security","level":2,"title":"Deployment Security","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#firewall-rules","level":3,"title":"Firewall Rules","text":"<p>Restrict access to server:</p> <pre><code># Allow only necessary ports\nufw default deny incoming\nufw default allow outgoing\nufw allow 22/tcp    # SSH\nufw allow 80/tcp    # HTTP\nufw allow 443/tcp   # HTTPS\nufw enable\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#docker-security","level":3,"title":"Docker Security","text":"<pre><code># docker-compose.yml\nservices:\n  sellia-server:\n    security_opt:\n      - no-new-privileges:true\n    read_only: true\n    tmpfs:\n      - /tmp\n    cap_drop:\n      - ALL\n    cap_add:\n      - NET_BIND_SERVICE\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#file-permissions","level":3,"title":"File Permissions","text":"<p>Set appropriate permissions:</p> <pre><code># Configuration files\nchmod 600 sellia.yml\n\n# Certificate directory\nchmod 755 /var/lib/sellia/\nchmod 640 /var/lib/sellia/cert.pem\nchmod 600 /var/lib/sellia/key.pem\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#dependency-security","level":2,"title":"Dependency Security","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#regular-updates","level":3,"title":"Regular Updates","text":"<p>Keep dependencies updated:</p> <pre><code># Update Crystal dependencies\nshards update\n\n# Update Node dependencies\ncd web\nnpm update\nnpm audit fix\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#vulnerability-scanning","level":3,"title":"Vulnerability Scanning","text":"<p>Scan for vulnerabilities:</p> <pre><code># Crystal (manual review)\nshards list\n# Check for known issues\n\n# Node\nnpm audit\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#security-headers","level":2,"title":"Security Headers","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#http-security-headers","level":3,"title":"HTTP Security Headers","text":"<pre><code>def add_security_headers(response : HTTP::Server::Response)\n  response.headers[\"X-Content-Type-Options\"] = \"nosniff\"\n  response.headers[\"X-Frame-Options\"] = \"DENY\"\n  response.headers[\"X-XSS-Protection\"] = \"1; mode=block\"\n  response.headers[\"Strict-Transport-Security\"] = \"max-age=31536000; includeSubDomains\"\n  response.headers[\"Content-Security-Policy\"] = \"default-src 'self'\"\nend\n</code></pre>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#best-practices","level":2,"title":"Best Practices","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#development","level":3,"title":"Development","text":"<ul> <li>Never commit credentials</li> <li>Use environment variables</li> <li>Enable debug logging only in development</li> <li>Test with authentication enabled</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#staging","level":3,"title":"Staging","text":"<ul> <li>Mirror production security settings</li> <li>Use separate API keys</li> <li>Test certificate renewal</li> <li>Monitor rate limiting</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#production","level":3,"title":"Production","text":"<ul> <li>Always require authentication</li> <li>Use strong master keys</li> <li>Enable rate limiting</li> <li>Use HTTPS/WSS</li> <li>Monitor logs for suspicious activity</li> <li>Regular security audits</li> <li>Keep dependencies updated</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#incident-response","level":2,"title":"Incident Response","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#security-incident-process","level":3,"title":"Security Incident Process","text":"<ol> <li>Identify - Detect security issue</li> <li>Contain - Limit impact</li> <li>Eradicate - Remove threat</li> <li>Recover - Restore service</li> <li>Post-Mortem - Document and improve</li> </ol>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#reporting-vulnerabilities","level":3,"title":"Reporting Vulnerabilities","text":"<p>If you discover a security vulnerability:</p> <ol> <li>Do not create public issue</li> <li>Email privately: chris@watzon.tech</li> <li>Include details:</li> <li>Vulnerability description</li> <li>Steps to reproduce</li> <li>Impact assessment</li> <li> <p>Suggested fix</p> </li> <li> <p>Response timeline:</p> </li> <li>Acknowledgment within 48 hours</li> <li>Fix timeline discussion</li> <li>Coordinated disclosure</li> </ol>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#security-checklist","level":2,"title":"Security Checklist","text":"","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#before-deployment","level":3,"title":"Before Deployment","text":"<ul> <li> Strong master key generated</li> <li> Authentication required</li> <li> TLS certificates installed</li> <li> Firewall rules configured</li> <li> Rate limiting enabled</li> <li> Secrets not in repository</li> <li> Dependencies updated</li> <li> Logging configured</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#ongoing","level":3,"title":"Ongoing","text":"<ul> <li> Monitor logs for suspicious activity</li> <li> Regular dependency updates</li> <li> Certificate expiration monitoring</li> <li> Security audit periodic</li> <li> Access review</li> <li> Backup verification</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Deployment - Secure deployment guide</li> <li>Authentication - Authentication setup</li> <li>Contributing - Secure development practices</li> </ul>","path":["Developer","Security"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/","level":1,"title":"Vulnerability Disclosure","text":"<p>This document outlines the security vulnerability disclosure process for Sellia.</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#table-of-contents","level":2,"title":"Table of Contents","text":"<ul> <li>Security Policy</li> <li>Supported Versions</li> <li>Reporting a Vulnerability</li> <li>What to Include</li> <li>What Happens Next</li> <li>Security Best Practices</li> <li>Security Features</li> <li>Known Limitations</li> </ul>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#security-policy","level":2,"title":"Security Policy","text":"<p>We take security vulnerabilities seriously and appreciate your efforts to responsibly disclose them.</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#reporting-security-issues","level":3,"title":"Reporting Security Issues","text":"<p>DO NOT report security vulnerabilities through public GitHub issues.</p> <p>Public disclosure of security vulnerabilities before they are fixed puts all users at risk. Instead, please report vulnerabilities privately via email.</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#supported-versions","level":2,"title":"Supported Versions","text":"<p>Security updates are provided for the following versions:</p> Version Status Security Support 0.4.x Current Release  Yes 0.3.x Previous  Yes 0.2.x End of Life  No <p>Note: Sellia is currently in pre-1.0 development. API and features may change. Once 1.0 is released, we'll follow semantic versioning and provide clear support timelines.</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#reporting-a-vulnerability","level":2,"title":"Reporting a Vulnerability","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#how-to-report","level":3,"title":"How to Report","text":"<p>Email your report to:</p> <p>chris@watzon.tech</p> <p>Please include [SECURITY] in the subject line to ensure your report gets immediate attention.</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#pgp-key-optional","level":3,"title":"PGP Key (Optional)","text":"<p>For sensitive communications, you can encrypt your report using PGP:</p> <pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\n[PGP key would be here - add if you maintain one]\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#what-to-expect","level":3,"title":"What to Expect","text":"<ol> <li>Acknowledgment (within 48 hours)</li> <li>We'll confirm receipt of your report</li> <li> <p>May ask clarifying questions</p> </li> <li> <p>Initial Assessment (within 1 week)</p> </li> <li>We'll verify and classify the vulnerability</li> <li>Determine severity level</li> <li> <p>Estimate remediation time</p> </li> <li> <p>Resolution Timeline</p> </li> <li>Critical: 7 days</li> <li>High: 30 days</li> <li>Medium: 60 days</li> <li>Low: 90 days</li> </ol> <p>We'll keep you informed throughout the process and may ask for additional information or verification.</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#what-to-include","level":2,"title":"What to Include","text":"<p>Your vulnerability report should include:</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#1-vulnerability-type","level":3,"title":"1. Vulnerability Type","text":"<p>Classify the vulnerability:</p> <p>Common Types: - Buffer Overflow - Memory corruption issues - Injection - SQL, command, code injection - XSS (Cross-Site Scripting) - Reflected or stored - CSRF (Cross-Site Request Forgery) - Authentication/Authorization - Bypass, weak auth - Information Disclosure - Sensitive data exposure - Denial of Service - Resource exhaustion - Cryptography - Weak algorithms, implementation flaws - Insecure Deserialization - Object injection - SSRF (Server-Side Request Forgery) - Path Traversal - Directory traversal</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#2-affected-versions","level":3,"title":"2. Affected Versions","text":"<p>Which versions are affected:</p> <pre><code>**Affected Versions:**\n- All versions &lt;= 0.4.0\n- Confirmed on: 0.4.0\n- Fixed in: 0.4.1 (upcoming)\n\n**Environment:**\n- OS: [e.g., Linux, macOS]\n- Crystal: [e.g., 1.18.0]\n- Deployed: [Docker, binary, source]\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#3-impact-assessment","level":3,"title":"3. Impact Assessment","text":"<p>Describe the potential impact:</p> <pre><code>**Impact:**\n- Attackers can [what they can do]\n- Requires [authentication, user interaction, etc.]\n- Affects [all users / specific configurations]\n\n**Severity:** [Critical / High / Medium / Low]\n\n**Business Impact:**\n- Data exposure: [What data]\n- System compromise: [To what extent]\n- Lateral movement: [Can it spread]\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#4-reproduction-steps","level":3,"title":"4. Reproduction Steps","text":"<p>Provide step-by-step reproduction:</p> <pre><code>**Reproduction Steps:**\n\n1. Start server with configuration:\n   ```bash\n   ./bin/sellia-server --port 3000 --domain example.com\n   ```\n\n2. Create tunnel:\n   ```bash\n   ./bin/sellia http 8080 --server http://localhost:3000\n   ```\n\n3. Send malicious request:\n   ```bash\n   curl -X POST http://tunnel.example.com \\\n     -H \"Content-Type: application/json\" \\\n     -d '{\"malicious\":\"payload\"}'\n   ```\n\n4. Observe: [Describe what happens]\n\n**Expected Behavior:** [What should happen]\n**Actual Behavior:** [What actually happens]\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#5-proof-of-concept","level":3,"title":"5. Proof of Concept","text":"<p>Include exploit code or detailed steps:</p> <pre><code>**Proof of Concept:**\n\n```bash\n# Exploit script\n#!/bin/bash\nTARGET=\"http://victim.example.com\"\ncurl -X POST \"$TARGET\" -d \"$(python3 -c 'print(\"A\"*1000)')\"\n</code></pre> <p>Result: Server crashes with segfault <pre><code>**Important:** Only include safe, minimal proof-of-concept code. Don't include destructive payloads or data from actual systems.\n\n### 6. Suggested Fix (Optional)\n\nIf you have a suggested fix:\n\n```markdown\n**Suggested Fix:**\n\nThe vulnerability occurs in `src/server/http_ingress.cr:42` where\nuser input is not validated before processing. Suggested fix:\n\n```crystal\n# Before (vulnerable)\nheaders[key] = value\n\n# After (fixed)\nif value.size &lt; MAX_HEADER_SIZE\n  headers[key] = value\nelse\n  raise HeaderTooLargeError.new\nend\n</code></pre> <pre><code>### 7. Additional Context\n\nAny other relevant information:\n\n```markdown\n**Additional Context:**\n\n- This was discovered during [penetration testing / code review / etc.]\n- Similar issue: [link to CVE if applicable]\n- References: [OWASP, CWE, etc.]\n- Affected configurations: [specific setups only]\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#what-happens-next","level":2,"title":"What Happens Next","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#1-validation","level":3,"title":"1. Validation","text":"<p>We'll validate the vulnerability: - Reproduce the issue - Confirm impact - Classify severity - Check other affected versions</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#2-remediation","level":3,"title":"2. Remediation","text":"<p>We'll develop a fix: - Create patch - Test thoroughly - Ensure no regressions - Add tests to prevent recurrence</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#3-coordinated-disclosure","level":3,"title":"3. Coordinated Disclosure","text":"<p>We follow responsible disclosure:</p> <p>Timeline: - Fix the vulnerability - Prepare security advisory - Coordinate release with maintainers - Publish disclosure simultaneously with fix</p> <p>Credit: - We'll credit you in the release notes - Unless you prefer to remain anonymous - Specify your preference when reporting</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#4-public-disclosure","level":3,"title":"4. Public Disclosure","text":"<p>After fix is deployed:</p> <ul> <li>Security Advisory: Published on GitHub</li> <li>Release Notes: Include vulnerability details</li> <li>CVE Assignment: We'll request a CVE if applicable</li> <li>Credit: Thank contributors publicly</li> </ul>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#for-self-hosted-deployments","level":3,"title":"For Self-Hosted Deployments","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#network-security","level":4,"title":"Network Security","text":"<p>Use HTTPS: <pre><code># Place Sellia behind a reverse proxy with TLS\n# Example nginx config:\nserver {\n    listen 443 ssl;\n    server_name tunnels.example.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\n</code></pre></p> <p>Firewall Configuration: <pre><code># Restrict access to server port\nsudo ufw allow 443/tcp  # HTTPS only\nsudo ufw deny 3000/tcp  # Block direct server access\n\n# Or restrict to specific IPs\nsudo ufw allow from 192.168.1.0/24 to any port 3000\n</code></pre></p> <p>Rate Limiting: <pre><code># Keep rate limiting enabled (default)\n./bin/sellia-server --port 3000\n\n# Only disable for development testing\n./bin/sellia-server --port 3000 --no-rate-limit  # DON'T use in production\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#authentication","level":4,"title":"Authentication","text":"<p>Use API Keys: <pre><code># Generate secure random key\nMASTER_KEY=$(openssl rand -hex 32)\n\n# Start server with authentication\n./bin/sellia-server \\\n  --port 3000 \\\n  --require-auth \\\n  --master-key $MASTER_KEY\n</code></pre></p> <p>Or use environment variables: <pre><code># .env file (don't commit this!)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\n</code></pre></p> <p>Rotate Keys Regularly: <pre><code># Generate new key\nNEW_KEY=$(openssl rand -hex 32)\n\n# Restart server with new key\n./bin/sellia-server --master-key $NEW_KEY\n\n# Update all clients with new key\n./bin/sellia http 3000 --api-key $NEW_KEY\n</code></pre></p> <p>Secure Key Storage: - Use <code>.env</code> files (in <code>.gitignore</code>) - Use secrets management (HashiCorp Vault, AWS Secrets Manager) - Never commit keys to git - Use different keys for dev/staging/prod</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#subdomain-security","level":4,"title":"Subdomain Security","text":"<p>Reserved Subdomains: <pre><code># The following subdomains are blocked by default:\n- api, www, admin, administrator, root, etc.\n- You can add custom reserved subdomains in config\n</code></pre></p> <p>Subdomain Validation: - Subdomains must follow DNS label rules - Max length: 63 characters - Allowed characters: alphanumeric and hyphens - No consecutive hyphens - No leading/trailing hyphens</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#monitoring","level":4,"title":"Monitoring","text":"<p>Enable Debug Logging: <pre><code># For security monitoring\nLOG_LEVEL=debug ./bin/sellia-server --port 3000\n</code></pre></p> <p>Monitor for Suspicious Activity: - Unusual connection patterns - Requests from unknown IPs - High request volumes - Failed authentication attempts - Unexpected subdomain access</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#database-security-sqlite","level":4,"title":"Database Security (SQLite)","text":"<p>File Permissions: <pre><code># Restrict database file access\nchmod 600 sellia.db\nchown app_user:app_group sellia.db\n</code></pre></p> <p>Regular Backups: <pre><code># Backup SQLite database\ncp sellia.db sellia.db.backup.$(date +%Y%m%d)\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#security-features","level":2,"title":"Security Features","text":"<p>Sellia includes several built-in security features:</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Token Bucket Algorithm: - Connections: 10 per second per IP - Tunnels: 5 per minute per IP - Requests: 100 per second per tunnel</p> <pre><code># Configuration\nrate_limits:\n  connections: 10/sec\n  tunnels: 5/min\n  requests: 100/sec\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#subdomain-validation","level":3,"title":"Subdomain Validation","text":"<p>DNS Label Compliance: <pre><code># Validation rules\n- Max 63 characters\n- Alphanumeric + hyphens only\n- No consecutive hyphens\n- No leading/trailing hyphens\n- Reserved name blocklist\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#input-validation","level":3,"title":"Input Validation","text":"<p>Request Size Limits: <pre><code># Maximum sizes\n- Request headers: 8KB\n- Request body: 10MB (configurable)\n- Response headers: 8KB\n- Response body: No limit (streaming)\n</code></pre></p> <p>Header Validation: <pre><code># Invalid headers rejected\n- Headers with newlines\n- Headers &gt; 8KB\n- Missing required headers\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#connection-timeouts","level":3,"title":"Connection Timeouts","text":"<p>WebSocket Heartbeat: <pre><code># Detects stale connections\nping_interval: 30s\nping_timeout: 10s\nmax_missed_pings: 3\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#graceful-degradation","level":3,"title":"Graceful Degradation","text":"<p>Client Disconnect Handling: <pre><code># Pending requests cleaned up\non_disconnect:\n  - Cancel pending requests\n  - Return 502 to clients\n  - Cleanup resources\n</code></pre></p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#known-limitations","level":2,"title":"Known Limitations","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#current-security-considerations","level":3,"title":"Current Security Considerations","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#basic-auth-over-http","level":4,"title":"Basic Auth Over HTTP","text":"<pre><code>**Issue:** Basic auth credentials are transmitted in base64\n\n**Risk:** Credentials can be decoded if intercepted\n\n**Mitigation:** Always use HTTPS in production\n- Place Sellia behind reverse proxy with TLS\n- Use Cloudflare Origin Certificates\n- Or use Let's Encrypt\n\n**Status:** Will be addressed in future release\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#in-memory-state","level":4,"title":"In-Memory State","text":"<pre><code>**Issue:** State is in-memory, lost on restart\n\n**Impact:**\n- API keys: Now persisted to SQLite (fixed in 0.2.0)\n- Reserved subdomains: Now persisted to SQLite (fixed in 0.2.0)\n- Active tunnels: Lost on restart (by design)\n\n**Mitigation:** Use SQLite storage for persistent data\n\n**Status:** Partially addressed\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#no-built-in-tls","level":4,"title":"No Built-in TLS","text":"<pre><code>**Issue:** Sellia doesn't include TLS termination\n\n**Risk:** Unencrypted traffic between client and server\n\n**Mitigation:**\n- Use reverse proxy (nginx, Caddy, Traefik)\n- Enable TLS at proxy level\n- Use Cloudflare for TLS\n\n**Status:** By design - flexibility for deployment\n</code></pre>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#responsible-disclosure-policy","level":2,"title":"Responsible Disclosure Policy","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#our-commitment","level":3,"title":"Our Commitment","text":"<p>We promise to:</p> <ol> <li>Respond promptly to security reports</li> <li>Keep you informed throughout the process</li> <li>Credit contributors (unless anonymity requested)</li> <li>Coordinate disclosure to protect users</li> <li>Fix issues before public disclosure</li> </ol>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#we-ask-you-to","level":3,"title":"We Ask You To","text":"<ol> <li>Report responsibly - Don't disclose publicly before fix</li> <li>Provide details - Help us understand and reproduce</li> <li>Give us time - Allow reasonable time for fix</li> <li>Follow good faith - Don't exploit vulnerabilities</li> </ol>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#disclosure-timeline","level":3,"title":"Disclosure Timeline","text":"<p>Ideal Timeline: - Day 0: Vulnerability reported - Day 2: Acknowledgment and validation - Day 7: Fix developed and tested - Day 14: Coordinated disclosure and release</p> <p>Extended Timeline: For complex vulnerabilities, timeline may be extended: - We'll inform you of delays - You'll have opportunity to comment on advisory - Disclosure coordinated with all parties</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#security-announcements","level":2,"title":"Security Announcements","text":"<p>Stay informed about security updates:</p> <ul> <li>GitHub Releases: Watch watzon/sellia</li> <li>Security Advisories: Check GitHub Security Advisories</li> <li>CHANGELOG: Review changelog for security fixes</li> </ul>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#security-contacts","level":2,"title":"Security Contacts","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#for-vulnerability-reports","level":3,"title":"For Vulnerability Reports","text":"<p>Primary: chris@watzon.tech Subject: [SECURITY] Vulnerability Report</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#for-security-questions","level":3,"title":"For Security Questions","text":"<p>GitHub Issues: Use <code>security</code> label Discussions: Ask in GitHub Discussions</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#for-emergencies","level":3,"title":"For Emergencies","text":"<p>If you believe a vulnerability is being actively exploited:</p> <p>Subject: [URGENT] Active Exploitation - Provide immediate details - Include evidence of exploitation - We'll respond as soon as possible</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#resources","level":2,"title":"Resources","text":"","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#security-references","level":3,"title":"Security References","text":"<ul> <li>OWASP Top 10</li> <li>CWE Top 25</li> <li>Crystal Security Guide</li> </ul>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#related-tools","level":3,"title":"Related Tools","text":"<ul> <li>OpenSSL - TLS/SSL</li> <li>Let's Encrypt - Free certificates</li> <li>Cloudflare SSL - Origin certificates</li> </ul>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#acknowledgments","level":2,"title":"Acknowledgments","text":"<p>We thank all security researchers who have responsibly disclosed vulnerabilities to help make Sellia more secure.</p> <p>Recent Contributors: - (List will be updated as vulnerabilities are reported)</p>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/security/vulnerability-disclosure/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Development Setup - Start contributing</li> <li>Testing - Test security features</li> <li>Deployment - Secure deployment guide</li> </ul>","path":["Developer","Security","Vulnerability Disclosure"],"tags":[]},{"location":"developer/server-components/","level":1,"title":"Server Components","text":"<p>Server-side implementation details for Sellia.</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#overview","level":2,"title":"Overview","text":"<p>The Sellia server (<code>sellia-server</code>) is responsible for managing tunnel connections, routing HTTP requests, and handling authentication. This section covers the server architecture and key components.</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#architecture","level":2,"title":"Architecture","text":"<pre><code>External HTTP Request\n         ↓\n    HTTP Ingress\n         ↓\n  Tunnel Registry Lookup\n         ↓\n    WebSocket Gateway\n         ↓\n   Tunnel Client (WebSocket)\n         ↓\n    Local Service\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#key-components","level":2,"title":"Key Components","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#http-ingress","level":3,"title":"HTTP Ingress","text":"<p>Location: <code>src/server/http_ingress.cr</code></p> <p>Receives external HTTP requests and routes them to appropriate tunnels.</p> <pre><code>class Sellia::Server::HTTPIngress\n  def initialize(\n    @tunnel_registry : TunnelRegistry,\n    @connection_manager : ConnectionManager,\n    @pending_requests : PendingRequestStore,\n    @pending_websockets : PendingWebSocketStore,\n    @rate_limiter : CompositeRateLimiter,\n    @domain : String = \"localhost\",\n    @request_timeout : Time::Span = 30.seconds,\n    @landing_enabled : Bool = true,\n  )\n  end\n\n  def handle(context : HTTP::Server::Context)\n    # Extract subdomain from request\n    subdomain = extract_subdomain(host)\n\n    # Look up tunnel\n    tunnel = @tunnel_registry.find_by_subdomain(subdomain)\n    return context.response.status_code = 404 unless tunnel\n\n    # Forward request through WebSocket\n    proxy_request(context, client, tunnel)\n  end\nend\n</code></pre> <p>Responsibilities: - Parse incoming HTTP requests - Extract subdomain from Host header - Validate tunnel exists - Check basic auth if configured - Enforce rate limits - Forward requests through WebSocket tunnel - Proxy WebSocket connections - Return responses to client</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#tunnel-registry","level":3,"title":"Tunnel Registry","text":"<p>Location: <code>src/server/tunnel_registry.cr</code></p> <p>Maintains registry of active tunnels and their mappings.</p> <pre><code>class Sellia::Server::TunnelRegistry\n  struct Tunnel\n    property id : String\n    property subdomain : String\n    property client_id : String\n    property created_at : Time\n    property auth : String?\n  end\n\n  def initialize(@reserved_subdomains : Set(String) = Set(String).new)\n    @tunnels = {} of String =&gt; Tunnel          # id -&gt; tunnel\n    @by_subdomain = {} of String =&gt; Tunnel     # subdomain -&gt; tunnel\n    @by_client = {} of String =&gt; Array(Tunnel) # client_id -&gt; tunnels\n    @mutex = Mutex.new\n  end\n\n  def register(tunnel : Tunnel) : Nil\n    @mutex.synchronize do\n      @tunnels[tunnel.id] = tunnel\n      @by_subdomain[tunnel.subdomain] = tunnel\n      @by_client[tunnel.client_id] ||= [] of Tunnel\n      @by_client[tunnel.client_id] &lt;&lt; tunnel\n    end\n  end\n\n  def find_by_subdomain(subdomain : String) : Tunnel?\n    @mutex.synchronize { @by_subdomain[subdomain]? }\n  end\n\n  def unregister(tunnel_id : String) : Tunnel?\n    # Removes from all indices\n  end\nend\n</code></pre> <p>Responsibilities: - Store active tunnels with multiple indices (by id, subdomain, client) - Map subdomains to tunnel clients - Validate subdomain availability and format - Generate random subdomains - Handle tunnel lifecycle</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#websocket-gateway","level":3,"title":"WebSocket Gateway","text":"<p>Location: <code>src/server/ws_gateway.cr</code></p> <p>Manages WebSocket connections from tunnel clients.</p> <pre><code>class Sellia::Server::WSGateway\n  def initialize(\n    @connection_manager : ConnectionManager,\n    @tunnel_registry : TunnelRegistry,\n    @auth_provider : AuthProvider,\n    @pending_requests : PendingRequestStore,\n    @pending_websockets : PendingWebSocketStore,\n    @rate_limiter : CompositeRateLimiter,\n    @domain : String = \"localhost\",\n    @port : Int32 = 3000,\n    @use_https : Bool = false,\n  )\n  end\n\n  def handle(socket : HTTP::WebSocket)\n    client = ClientConnection.new(socket)\n    @connection_manager.add_connection(client)\n\n    client.on_message do |message|\n      handle_message(client, message)\n    end\n\n    client.on_close do\n      handle_disconnect(client)\n    end\n\n    client.run\n  end\nend\n</code></pre> <p>Responsibilities: - Accept WebSocket connections from tunnel clients - Authenticate clients using API keys - Register and manage tunnels - Forward HTTP requests to tunnel clients - Forward WebSocket frames to tunnel clients - Handle keep-alive (ping/pong) with 30s interval - Detect and clean up stale connections (60s timeout) - Handle disconnections and cleanup</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#authentication","level":3,"title":"Authentication","text":"<p>Location: <code>src/server/auth_provider.cr</code></p> <p>Handles API key authentication with three modes.</p> <pre><code>class Sellia::Server::AuthProvider\n  property require_auth : Bool\n  property master_key : String?\n  property use_database : Bool\n\n  def initialize(@require_auth : Bool = false, @master_key : String? = nil, @use_database : Bool = false)\n  end\n\n  def validate(api_key : String) : Bool\n    return true unless @require_auth\n    return false if api_key.empty?\n\n    # Check database first if enabled\n    if @use_database &amp;&amp; Storage::Database.instance?\n      if found = Storage::Repositories::ApiKeys.validate(api_key)\n        return true\n      end\n    end\n\n    # Fallback to master key\n    if master = @master_key\n      api_key == master\n    else\n      true\n    end\n  end\n\n  def account_id_for(api_key : String) : String\n    # Returns account ID from database or SHA256 hash\n  end\nend\n</code></pre> <p>Responsibilities: - Validate API keys - Support three modes: no auth, master key, database - Provide account identifiers for rate limiting - Track API key usage in database mode</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#rate-limiter","level":3,"title":"Rate Limiter","text":"<p>Location: <code>src/server/rate_limiter.cr</code></p> <p>Prevents abuse through token bucket rate limiting.</p> <pre><code>class Sellia::Server::RateLimiter\n  struct Config\n    property max_tokens : Float64\n    property refill_rate : Float64\n    property window : Time::Span\n  end\n\n  def allow?(key : String, cost : Float64 = 1.0) : Bool\n    # Token bucket algorithm\n  end\n\n  def remaining(key : String) : Float64\n    # Get remaining tokens\n  end\nend\n\nclass Sellia::Server::CompositeRateLimiter\n  def allow_connection?(ip : String) : Bool\n  end\n\n  def allow_tunnel?(client_id : String) : Bool\n  end\n\n  def allow_request?(tunnel_id : String) : Bool\n  end\nend\n</code></pre> <p>Responsibilities: - Track connection rate per IP - Track tunnel creation rate per client - Track request rate per tunnel - Use token bucket algorithm for smooth rate limiting - Auto-cleanup stale entries with 1-hour window</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#middleware","level":2,"title":"Middleware","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#connection-manager","level":3,"title":"Connection Manager","text":"<p>Location: <code>src/server/connection_manager.cr</code></p> <p>Manages active WebSocket client connections.</p> <pre><code>class Sellia::Server::ConnectionManager\n  def add_connection(client : ClientConnection)\n  end\n\n  def find(client_id : String) : ClientConnection?\n  end\n\n  def unregister(client_id : String)\n  end\n\n  def each\n    # Yields each connected client\n  end\nend\n</code></pre> <p>Responsibilities: - Track active client connections - Provide lookup by client ID - Support iteration for health checks</p>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#message-handling","level":2,"title":"Message Handling","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#incoming-messages-from-tunnel-clients","level":3,"title":"Incoming Messages from Tunnel Clients","text":"<pre><code>private def handle_message(client : ClientConnection, message : Protocol::Message)\n  case message\n  when Protocol::Messages::Auth\n    handle_auth(client, message)\n  when Protocol::Messages::TunnelOpen\n    handle_tunnel_open(client, message)\n  when Protocol::Messages::TunnelClose\n    handle_tunnel_close(client, message)\n  when Protocol::Messages::ResponseStart\n    handle_response_start(client, message)\n  when Protocol::Messages::ResponseBody\n    handle_response_body(client, message)\n  when Protocol::Messages::ResponseEnd\n    handle_response_end(client, message)\n  when Protocol::Messages::Ping\n    client.send(Protocol::Messages::Pong.new(message.timestamp))\n  when Protocol::Messages::WebSocketUpgradeOk\n    handle_ws_upgrade_ok(client, message)\n  when Protocol::Messages::WebSocketUpgradeError\n    handle_ws_upgrade_error(client, message)\n  when Protocol::Messages::WebSocketFrame\n    handle_ws_frame(client, message)\n  when Protocol::Messages::WebSocketClose\n    handle_ws_close(client, message)\n  end\nend\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#outgoing-messages-to-tunnel-clients","level":3,"title":"Outgoing Messages to Tunnel Clients","text":"<pre><code># Forward HTTP request\nclient.send(Protocol::Messages::RequestStart.new(\n  request_id: request_id,\n  tunnel_id: tunnel.id,\n  method: context.request.method,\n  path: context.request.resource,\n  headers: headers\n))\n\n# Forward WebSocket upgrade\nclient.send(Protocol::Messages::WebSocketUpgrade.new(\n  request_id: request_id,\n  tunnel_id: tunnel.id,\n  path: context.request.resource,\n  headers: headers\n))\n\n# Forward WebSocket frame\nclient.send(Protocol::Messages::WebSocketFrame.new(\n  request_id: request_id,\n  opcode: opcode,\n  payload: payload\n))\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#configuration","level":2,"title":"Configuration","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#server-configuration","level":3,"title":"Server Configuration","text":"<p>Server configuration is typically loaded from environment variables.</p> <pre><code># Example environment variables:\n# SELLIA_DOMAIN=sellia.dev\n# SELLIA_PORT=3000\n# SELLIA_MASTER_KEY=sk_master_...\n# SELLIA_REQUIRE_AUTH=true\n# SELLIA_USE_HTTPS=true\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#server-lifecycle","level":2,"title":"Server Lifecycle","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#initialization","level":3,"title":"Initialization","text":"<pre><code># Create shared components\nconnection_manager = ConnectionManager.new\ntunnel_registry = TunnelRegistry.new(reserved_subdomains)\nauth_provider = AuthProvider.new(use_database: true)\npending_requests = PendingRequestStore.new\npending_websockets = PendingWebSocketStore.new\nrate_limiter = CompositeRateLimiter.new\n\n# Create main components\nws_gateway = WSGateway.new(\n  connection_manager: connection_manager,\n  tunnel_registry: tunnel_registry,\n  auth_provider: auth_provider,\n  pending_requests: pending_requests,\n  pending_websockets: pending_websockets,\n  rate_limiter: rate_limiter,\n  domain: \"sellia.dev\",\n  port: 3000\n)\n\nhttp_ingress = HTTPIngress.new(\n  tunnel_registry: tunnel_registry,\n  connection_manager: connection_manager,\n  pending_requests: pending_requests,\n  pending_websockets: pending_websockets,\n  rate_limiter: rate_limiter,\n  domain: \"sellia.dev\",\n  request_timeout: 30.seconds\n)\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#starting-the-server","level":3,"title":"Starting the Server","text":"<pre><code>server = HTTP::Server.new(\"0.0.0.0\", 3000) do |context|\n  http_ingress.handle(context)\nend\n\n# Add WebSocket handler at /ws path\nws_handler = HTTP::WebSocketHandler.new do |socket, context|\n  ws_gateway.handle(socket)\nend\n\nserver.bind_tcp(\"0.0.0.0\", 3000)\nserver.listen\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#testing","level":2,"title":"Testing","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#unit-tests","level":3,"title":"Unit Tests","text":"<p>Location: <code>spec/server/</code></p> <p>Tests should verify individual component behavior:</p> <pre><code>describe Sellia::Server::TunnelRegistry do\n  it \"registers a tunnel\" do\n    registry = TunnelRegistry.new\n    tunnel = TunnelRegistry::Tunnel.new(\n      id: \"test123\",\n      subdomain: \"myapp\",\n      client_id: \"client1\"\n    )\n\n    registry.register(tunnel)\n    registry.find_by_id(\"test123\").should eq tunnel\n  end\n\n  it \"validates subdomains\" do\n    registry = TunnelRegistry.new\n\n    result = registry.validate_subdomain(\"ab\")\n    result.valid.should be_false\n\n    result = registry.validate_subdomain(\"myapp\")\n    result.valid.should be_true\n  end\nend\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#memory","level":3,"title":"Memory","text":"<ul> <li>Per tunnel: ~200 bytes</li> <li>Per client: ~1 KB</li> <li>Rate limiting: ~100 bytes per tracked key</li> <li>Pending requests: ~1 KB each</li> <li>WebSocket connections: ~2 KB each</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#concurrency","level":3,"title":"Concurrency","text":"<ul> <li>Each connection runs in its own fiber</li> <li>All shared state protected by mutexes</li> <li>Lock contention is minimal (fast operations)</li> <li>No long-running critical sections</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#scalability","level":3,"title":"Scalability","text":"<ul> <li>Fiber-based concurrency handles thousands of connections</li> <li>Token bucket rate limiting prevents resource exhaustion</li> <li>Automatic cleanup of stale state (1-hour window)</li> <li>O(1) lookups for all critical operations</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#security","level":2,"title":"Security","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#input-validation","level":3,"title":"Input Validation","text":"<pre><code># Subdomain validation (handled by TunnelRegistry)\ndef validate_subdomain(subdomain : String) : ValidationResult\n  # Length: 3-63 characters\n  # Characters: alphanumeric and hyphens\n  # Pattern: cannot start/end with hyphen\n  # No consecutive hyphens\n  # Not in reserved set\n  # Not already in use\nend\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#authentication_1","level":3,"title":"Authentication","text":"<ul> <li>Three modes: no auth (dev), master key (simple), database (production)</li> <li>API keys validated against SHA256 hashes</li> <li>Database mode tracks usage and supports revocation</li> <li>Master key fallback supported</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#rate-limiting","level":3,"title":"Rate Limiting","text":"<ul> <li>Connection rate: per IP (10 burst, 1/s)</li> <li>Tunnel creation: per client (5 burst, 1/10s)</li> <li>Request rate: per tunnel (100 burst, 50/s)</li> <li>Token bucket algorithm for smooth limiting</li> <li>Automatic cleanup after 1 hour</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#tlsssl","level":3,"title":"TLS/SSL","text":"<ul> <li>HTTPS support via reverse proxy (use_https flag)</li> <li>On-demand TLS verification endpoint at <code>/tunnel/verify</code></li> <li>Compatible with Caddy automatic TLS</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#debugging","level":2,"title":"Debugging","text":"","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#logging","level":3,"title":"Logging","text":"<pre><code>Log.setup(:debug)\n\nLog.debug { \"Registering tunnel: #{subdomain}\" }\nLog.info { \"Tunnel registered: #{subdomain}\" }\nLog.warn { \"Rate limit exceeded: #{client_ip}\" }\nLog.error { \"WebSocket error: #{error}\" }\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#monitoring","level":3,"title":"Monitoring","text":"<pre><code># Track metrics\nstruct Metrics\n  property requests_total = 0\n  property requests_active = 0\n  property tunnels_active = 0\nend\n\n@metrics = Metrics.new\n</code></pre>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"developer/server-components/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>CLI Components - Client-side implementation</li> <li>Project Structure - Code organization</li> <li>Development - Development setup</li> </ul>","path":["Developer","Server components","Server Components"],"tags":[]},{"location":"user/admin/","level":1,"title":"Admin Guide","text":"<p>Administrative tasks for managing your Sellia server.</p>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#overview","level":2,"title":"Overview","text":"<p>This section covers server administration, monitoring, and maintenance tasks for running a Sellia tunnel server.</p>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#server-management","level":2,"title":"Server Management","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#starting-the-server","level":3,"title":"Starting the Server","text":"<p>Basic server start:</p> <pre><code>sellia-server --port 3000 --domain your-domain.com\n</code></pre> <p>With authentication:</p> <pre><code>sellia-server \\\n  --port 3000 \\\n  --domain your-domain.com \\\n  --require-auth \\\n  --master-key your-master-key\n</code></pre> <p>With HTTPS:</p> <pre><code>sellia-server \\\n  --port 3000 \\\n  --domain your-domain.com \\\n  --https \\\n  --require-auth \\\n  --master-key your-master-key\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#environment-configuration","level":3,"title":"Environment Configuration","text":"<p>Use environment variables for production:</p> <pre><code># .env\nSELLIA_HOST=0.0.0.0\nSELLIA_PORT=3000\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=your-master-key\nSELLIA_USE_HTTPS=true\nSELLIA_RATE_LIMITING=true\nLOG_LEVEL=warn\n</code></pre> <p>Start with environment:</p> <pre><code>source .env\nsellia-server\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#monitoring","level":2,"title":"Monitoring","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#log-monitoring","level":3,"title":"Log Monitoring","text":"<p>Monitor server logs for issues:</p> <pre><code># Follow logs\nsellia-server 2&gt;&amp;1 | tee server.log\n\n# Check for errors\ngrep -i error server.log\n\n# Check for authentication attempts\ngrep -i auth server.log\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#connection-monitoring","level":3,"title":"Connection Monitoring","text":"<p>Monitor active tunnels:</p> <pre><code># View active connections (implementation varies)\n# Check server logs for tunnel registrations\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#resource-monitoring","level":3,"title":"Resource Monitoring","text":"<p>Monitor server resources:</p> <pre><code># CPU and memory\ntop -p $(pgrep sellia-server)\n\n# Network connections\nnetstat -an | grep :3000\n\n# Tunnel connections\nnetstat -an | grep ESTABLISHED | grep :3000\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#maintenance","level":2,"title":"Maintenance","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#certificate-renewal","level":3,"title":"Certificate Renewal","text":"<p>If using TLS certificates:</p> <pre><code># Check certificate expiration\nopenssl x509 -in certs/cert.pem -noout -dates\n\n# Renew with certbot (if using Let's Encrypt)\ncertbot renew\n\n# Restart server after renewal\nkill $(pgrep sellia-server)\nsellia-server\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#backup-configuration","level":3,"title":"Backup Configuration","text":"<p>Backup important files:</p> <pre><code># Backup configuration\ncp .env .env.backup\ncp sellia.yml sellia.yml.backup\n\n# Backup certificates\ntar -czf certs-backup-$(date +%Y%m%d).tar.gz certs/\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#update-server","level":3,"title":"Update Server","text":"<p>Update to latest version:</p> <pre><code># Stop server\nkill $(pgrep sellia-server)\n\n# Pull latest code\ngit pull origin main\n\n# Rebuild\nshards build --release\n\n# Restart server\nsellia-server\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#rate-limiting","level":2,"title":"Rate Limiting","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#overview_1","level":3,"title":"Overview","text":"<p>Sellia includes rate limiting to prevent abuse:</p> <ul> <li>Enabled by default</li> <li>Configurable limits per client</li> <li>Prevents brute force attacks</li> <li>Protects server resources</li> </ul>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#configure-rate-limiting","level":3,"title":"Configure Rate Limiting","text":"<p>Enable/disable rate limiting:</p> <pre><code># Disable (not recommended)\nsellia-server --no-rate-limit\n\n# Enable with environment variable\nexport SELLIA_RATE_LIMITING=true\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#custom-limits","level":3,"title":"Custom Limits","text":"<p>Configure rate limits (implementation varies):</p> <pre><code># Example: requests per minute\nRATE_LIMIT=100\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#security","level":2,"title":"Security","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#firewall-rules","level":3,"title":"Firewall Rules","text":"<p>Configure firewall to protect server:</p> <pre><code># Allow Sellia server port\nufw allow 3000/tcp\n\n# Allow SSH\nufw allow 22/tcp\n\n# Enable firewall\nufw enable\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#api-key-management","level":3,"title":"API Key Management","text":"<p>Generate and manage API keys:</p> <pre><code># Generate new key\nopenssl rand -hex 32\n\n# Set as master key\nexport SELLIA_MASTER_KEY=$(openssl rand -hex 32)\n\n# Distribute to users securely\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#audit-logs","level":3,"title":"Audit Logs","text":"<p>Enable audit logging:</p> <pre><code># Enable debug logging for audit trail\nexport LOG_LEVEL=debug\n\n# Rotate logs\nlogrotate -f /etc/logrotate.d/sellia\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#server-wont-start","level":3,"title":"Server Won't Start","text":"<p>Problem: Server fails to start</p> <p>Solutions: - Check port is available: <code>lsof -i :3000</code> - Verify configuration syntax - Check file permissions - Review error logs</p>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#high-memory-usage","level":3,"title":"High Memory Usage","text":"<p>Problem: Server using excessive memory</p> <p>Solutions: - Check number of active tunnels - Review rate limit settings - Monitor for memory leaks - Restart server periodically</p>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#connection-issues","level":3,"title":"Connection Issues","text":"<p>Problem: Clients can't connect</p> <p>Solutions: - Verify server is running - Check firewall rules - Verify DNS configuration - Check network connectivity</p>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#docker-deployment","level":2,"title":"Docker Deployment","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#using-docker-compose","level":3,"title":"Using Docker Compose","text":"<p>Easiest deployment method:</p> <pre><code># Start server\ndocker compose -f docker-compose.prod.yml up -d\n\n# View logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Stop server\ndocker compose -f docker-compose.prod.yml down\n\n# Restart\ndocker compose -f docker-compose.prod.yml restart\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#docker-management","level":3,"title":"Docker Management","text":"<pre><code># View container stats\ndocker stats\n\n# Execute command in container\ndocker exec -it sellia-server bash\n\n# View logs\ndocker logs -f sellia-server\n\n# Update container\ndocker compose pull\ndocker compose up -d\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#performance-tuning","level":2,"title":"Performance Tuning","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#connection-limits","level":3,"title":"Connection Limits","text":"<p>Adjust connection limits:</p> <pre><code># Increase file descriptor limit\nulimit -n 65536\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#caching","level":3,"title":"Caching","text":"<p>Configure HTTP caching (if applicable):</p> <pre><code># Enable HTTP caching headers\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#load-balancing","level":3,"title":"Load Balancing","text":"<p>For high-availability setups:</p> <ul> <li>Use multiple Sellia servers behind load balancer</li> <li>Configure shared storage for session state</li> <li>Use health checks for failover</li> </ul>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#disaster-recovery","level":2,"title":"Disaster Recovery","text":"","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#backup-strategy","level":3,"title":"Backup Strategy","text":"<ol> <li>Configuration - Back up <code>.env</code>, <code>sellia.yml</code></li> <li>Certificates - Back up <code>certs/</code> directory</li> <li>Data - Back up any persistent storage</li> <li>Scripts - Back up deployment scripts</li> </ol>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#restore-procedure","level":3,"title":"Restore Procedure","text":"<pre><code># Stop server\ndocker compose down\n\n# Restore configuration\ncp .env.backup .env\ncp sellia.yml.backup sellia.yml\n\n# Restore certificates\ntar -xzf certs-backup-YYYYMMDD.tar.gz\n\n# Restart server\ndocker compose up -d\n</code></pre>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Deployment - Production deployment guide</li> <li>Security - Security best practices</li> <li>Storage - Data persistence options</li> </ul>","path":["User","Admin","Admin Guide"],"tags":[]},{"location":"user/admin/admin-api/","level":1,"title":"Admin API","text":"<p>The Sellia Admin API provides HTTP endpoints for managing reserved subdomains and API keys. All endpoints require authentication with a master API key.</p>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#base-url","level":2,"title":"Base URL","text":"<p>The Admin API is served from the same host as your Sellia server:</p> <pre><code>https://your-domain.com/api/admin\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#authentication","level":2,"title":"Authentication","text":"<p>All Admin API endpoints require authentication with a master API key.</p>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#methods","level":3,"title":"Methods","text":"<p>Authorization Header:</p> <pre><code>Authorization: Bearer your-api-key-here\n</code></pre> <p>X-API-Key Header:</p> <pre><code>X-API-Key: your-api-key-here\n</code></pre> <p>Both methods are supported and checked. The client sends both headers for compatibility.</p>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#example-with-curl","level":3,"title":"Example with cURL","text":"<pre><code>export SELLIA_ADMIN_API_KEY=\"a1b2c3d4e5f6...\"\n\ncurl -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#error-response","level":3,"title":"Error Response","text":"<p>If authentication fails or key is not a master key:</p> <pre><code>HTTP/1.1 401 Unauthorized\nContent-Type: application/json\n\n{\n  \"error\": \"Unauthorized: Admin API key required\"\n}\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#response-format","level":2,"title":"Response Format","text":"<p>Success responses use appropriate HTTP status codes:</p> <ul> <li><code>200 OK</code> - Successful GET, DELETE</li> <li><code>201 Created</code> - Successful POST</li> <li><code>400 Bad Request</code> - Invalid request parameters</li> <li><code>401 Unauthorized</code> - Missing or invalid authentication</li> <li><code>403 Forbidden</code> - Operation not allowed (e.g., removing default reserved subdomain)</li> <li><code>404 Not Found</code> - Resource doesn't exist</li> <li><code>409 Conflict</code> - Resource already exists</li> <li><code>503 Service Unavailable</code> - Database not available</li> </ul>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#endpoints","level":2,"title":"Endpoints","text":"","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#list-reserved-subdomains","level":4,"title":"List Reserved Subdomains","text":"<p>Get all reserved subdomains.</p> <pre><code>GET /api/admin/reserved\n</code></pre> <p>Response: 200 OK</p> <pre><code>[\n  {\n    \"subdomain\": \"api\",\n    \"reason\": \"Default reserved subdomain\",\n    \"is_default\": true,\n    \"created_at\": \"2024-01-01T00:00:00.000000Z\"\n  },\n  {\n    \"subdomain\": \"billing\",\n    \"reason\": \"Payment processing\",\n    \"is_default\": false,\n    \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n  }\n]\n</code></pre> <p>cURL example:</p> <pre><code>curl -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#add-reserved-subdomain","level":4,"title":"Add Reserved Subdomain","text":"<p>Reserve a subdomain to prevent tunnel clients from using it.</p> <pre><code>POST /api/admin/reserved\nContent-Type: application/json\n\n{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\"\n}\n</code></pre> <p>Request body fields:</p> <ul> <li><code>subdomain</code> (required, string) - Subdomain to reserve (3-63 chars, a-z, 0-9, hyphens; must start and end with alphanumeric)</li> <li><code>reason</code> (optional, string) - Reason/documentation for the reservation</li> </ul> <p>Response: 201 Created</p> <pre><code>{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\",\n  \"is_default\": false,\n  \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li><code>400 Bad Request</code> - Invalid subdomain format</li> </ul> <pre><code>{\n  \"error\": \"Subdomain must be at least 3 characters\"\n}\n</code></pre> <pre><code>{\n  \"error\": \"Subdomain must be at most 63 characters\"\n}\n</code></pre> <pre><code>{\n  \"error\": \"Subdomain can only contain lowercase letters, numbers, and hyphens\"\n}\n</code></pre> <ul> <li><code>409 Conflict</code> - Subdomain already reserved</li> </ul> <pre><code>{\n  \"error\": \"Subdomain already reserved\"\n}\n</code></pre> <p>cURL example:</p> <pre><code>curl -X POST \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"subdomain\": \"mycompany\", \"reason\": \"Company name\"}' \\\n  https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#remove-reserved-subdomain","level":4,"title":"Remove Reserved Subdomain","text":"<p>Remove a reservation (allows the subdomain to be used again).</p> <pre><code>DELETE /api/admin/reserved/:subdomain\n</code></pre> <p>URL parameters:</p> <ul> <li><code>subdomain</code> - The subdomain to remove from reserved list</li> </ul> <p>Response: 200 OK</p> <pre><code>{\n  \"message\": \"Reserved subdomain 'mycompany' removed\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li><code>403 Forbidden</code> - Attempting to remove default reserved subdomain</li> </ul> <pre><code>{\n  \"error\": \"Cannot remove default reserved subdomain\"\n}\n</code></pre> <ul> <li><code>404 Not Found</code> - Subdomain not in reserved list</li> </ul> <pre><code>{\n  \"error\": \"Reserved subdomain not found\"\n}\n</code></pre> <p>cURL example:</p> <pre><code>curl -X DELETE \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/reserved/mycompany\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#api-keys","level":3,"title":"API Keys","text":"","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#list-api-keys","level":4,"title":"List API Keys","text":"<p>Get all API keys in the database.</p> <pre><code>GET /api/admin/api-keys\n</code></pre> <p>Response: 200 OK</p> <pre><code>[\n  {\n    \"id\": 1,\n    \"key_prefix\": \"a1b2c3d4\",\n    \"name\": \"Development Key\",\n    \"is_master\": true,\n    \"active\": true,\n    \"created_at\": \"2024-01-15T10:30:00.000000Z\",\n    \"last_used_at\": \"2024-01-20T14:22:00.000000Z\"\n  },\n  {\n    \"id\": 2,\n    \"key_prefix\": \"e5f6g7h8\",\n    \"name\": \"Production API\",\n    \"is_master\": false,\n    \"active\": true,\n    \"created_at\": \"2024-01-20T14:22:00.000000Z\",\n    \"last_used_at\": null\n  }\n]\n</code></pre> <p>Note: The full API key is never returned in listings. Only the prefix is shown.</p> <p>cURL example:</p> <pre><code>curl -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/api-keys\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#create-api-key","level":4,"title":"Create API Key","text":"<p>Generate a new API key.</p> <pre><code>POST /api/admin/api-keys\nContent-Type: application/json\n\n{\n  \"name\": \"My Service Key\",\n  \"is_master\": false\n}\n</code></pre> <p>Request body fields:</p> <ul> <li><code>name</code> (optional, string) - Friendly name for the key</li> <li><code>is_master</code> (optional, boolean) - Create master key (default: false)</li> </ul> <p>Response: 201 Created</p> <pre><code>{\n  \"id\": 3,\n  \"key\": \"9a8b7c6d5e4f3g2h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x7y8z9a0b1c2d3e4f5g6h7i8j9k0l1m2n3o4p5q6r7s8t9u0v1w2x3y4z5\",\n  \"key_prefix\": \"9a8b7c6d\",\n  \"name\": \"My Service Key\",\n  \"is_master\": false,\n  \"active\": true,\n  \"created_at\": \"2024-01-20T15:00:00.000000Z\"\n}\n</code></pre> <p>Important: The <code>key</code> field contains the full API key and is only shown once during creation. Save it securely.</p> <p>cURL example:</p> <pre><code># Standard key\ncurl -X POST \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Service Key\"}' \\\n  https://sellia.example.com/api/admin/api-keys\n\n# Master key\ncurl -X POST \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Admin Key\", \"is_master\": true}' \\\n  https://sellia.example.com/api/admin/api-keys\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#revoke-api-key","level":4,"title":"Revoke API Key","text":"<p>Revoke an API key by its prefix.</p> <pre><code>DELETE /api/admin/api-keys/:prefix\n</code></pre> <p>URL parameters:</p> <ul> <li><code>prefix</code> - The key prefix (first 8 characters)</li> </ul> <p>Response: 200 OK</p> <pre><code>{\n  \"message\": \"API key 'a1b2c3d4' revoked\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li><code>404 Not Found</code> - Key prefix not found</li> </ul> <pre><code>{\n  \"error\": \"API key not found\"\n}\n</code></pre> <p>cURL example:</p> <pre><code>curl -X DELETE \\\n  -H \"Authorization: Bearer $SELLIA_ADMIN_API_KEY\" \\\n  https://sellia.example.com/api/admin/api-keys/a1b2c3d4\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#using-with-different-languages","level":2,"title":"Using with Different Languages","text":"","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#python","level":3,"title":"Python","text":"<pre><code>import requests\n\nADMIN_KEY = \"your-64-char-hex-key\"\nBASE_URL = \"https://sellia.example.com/api/admin\"\n\nheaders = {\n    \"Authorization\": f\"Bearer {ADMIN_KEY}\",\n    \"Content-Type\": \"application/json\"\n}\n\n# List reserved subdomains\nresponse = requests.get(f\"{BASE_URL}/reserved\", headers=headers)\nprint(response.json())\n\n# Add reserved subdomain\ndata = {\"subdomain\": \"mycompany\", \"reason\": \"Company name\"}\nresponse = requests.post(f\"{BASE_URL}/reserved\", headers=headers, json=data)\nprint(response.json())\n\n# Create API key\ndata = {\"name\": \"Service Key\", \"is_master\": False}\nresponse = requests.post(f\"{BASE_URL}/api-keys\", headers=headers, json=data)\nkey_data = response.json()\nprint(f\"New key: {key_data['key']}\")\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#javascriptnodejs","level":3,"title":"JavaScript/Node.js","text":"<pre><code>const ADMIN_KEY = 'your-64-char-hex-key';\nconst BASE_URL = 'https://sellia.example.com/api/admin';\n\nconst headers = {\n  'Authorization': `Bearer ${ADMIN_KEY}`,\n  'Content-Type': 'application/json'\n};\n\n// List reserved subdomains\nfetch(`${BASE_URL}/reserved`, { headers })\n  .then(r =&gt; r.json())\n  .then(console.log);\n\n// Add reserved subdomain\nfetch(`${BASE_URL}/reserved`, {\n  method: 'POST',\n  headers,\n  body: JSON.stringify({\n    subdomain: 'mycompany',\n    reason: 'Company name'\n  })\n})\n  .then(r =&gt; r.json())\n  .then(console.log);\n\n// Create API key\nfetch(`${BASE_URL}/api-keys`, {\n  method: 'POST',\n  headers,\n  body: JSON.stringify({\n    name: 'Service Key',\n    is_master: false\n  })\n})\n  .then(r =&gt; r.json())\n  .then(data =&gt; console.log(`New key: ${data.key}`));\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#ruby","level":3,"title":"Ruby","text":"<pre><code>require 'net/http'\nrequire 'json'\nrequire 'uri'\n\nADMIN_KEY = 'your-64-char-hex-key'\nBASE_URL = 'https://sellia.example.com/api/admin'\n\ndef headers\n  {\n    'Authorization' =&gt; \"Bearer #{ADMIN_KEY}\",\n    'Content-Type' =&gt; 'application/json'\n  }\nend\n\n# List reserved subdomains\nuri = URI(\"#{BASE_URL}/reserved\")\nresponse = Net::HTTP.get(uri, headers)\nputs JSON.parse(response)\n\n# Add reserved subdomain\nuri = URI(\"#{BASE_URL}/reserved\")\nreq = Net::HTTP::Post.new(uri, headers)\nreq.body = { subdomain: 'mycompany', reason: 'Company name' }.to_json\nres = Net::HTTP.start(uri.hostname, uri.port, use_ssl: true) { |http| http.request(req) }\nputs res.body\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#go","level":3,"title":"Go","text":"<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"encoding/json\"\n    \"fmt\"\n    \"io\"\n    \"net/http\"\n)\n\nconst (\n    ADMIN_KEY = \"your-64-char-hex-key\"\n    BASE_URL  = \"https://sellia.example.com/api/admin\"\n)\n\nfunc main() {\n    client := &amp;http.Client{}\n\n    // List reserved subdomains\n    req, _ := http.NewRequest(\"GET\", BASE_URL+\"/reserved\", nil)\n    req.Header.Set(\"Authorization\", \"Bearer \"+ADMIN_KEY)\n    resp, _ := client.Do(req)\n    defer resp.Body.Close()\n    body, _ := io.ReadAll(resp.Body)\n    fmt.Println(string(body))\n\n    // Add reserved subdomain\n    data := map[string]string{\"subdomain\": \"mycompany\", \"reason\": \"Company name\"}\n    jsonData, _ := json.Marshal(data)\n    req, _ = http.NewRequest(\"POST\", BASE_URL+\"/reserved\", bytes.NewBuffer(jsonData))\n    req.Header.Set(\"Authorization\", \"Bearer \"+ADMIN_KEY)\n    req.Header.Set(\"Content-Type\", \"application/json\")\n    resp, _ = client.Do(req)\n    defer resp.Body.Close()\n    body, _ = io.ReadAll(resp.Body)\n    fmt.Println(string(body))\n}\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#rate-limiting","level":2,"title":"Rate Limiting","text":"<p>As of the current version, the Admin API does not enforce rate limiting. However, best practices include:</p> <ul> <li>Implementing client-side rate limiting for automation</li> <li>Using linear backoff for retries</li> <li>Monitoring API usage for abuse detection</li> </ul>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#error-handling","level":2,"title":"Error Handling","text":"<p>Always check the HTTP status code and response body:</p> <pre><code>response = requests.post(url, headers=headers, json=data)\n\nif response.status_code == 401:\n    print(\"Authentication failed - check your API key\")\nelif response.status_code == 409:\n    error = response.json()['error']\n    print(f\"Conflict: {error}\")\nelif response.status_code == 201:\n    print(\"Success!\")\nelse:\n    print(f\"Unexpected status: {response.status_code}\")\n    print(response.text)\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#webhook-support-future","level":2,"title":"Webhook Support (Future)","text":"<p>Future versions may include webhook notifications for events like:</p> <ul> <li>New tunnel created</li> <li>Tunnel disconnected</li> <li>API key created/revoked</li> <li>Reserved subdomain added/removed</li> </ul> <p>Check the server documentation for webhook capabilities.</p>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#curl-ssl-certificate-problem","level":3,"title":"cURL: SSL Certificate Problem","text":"<pre><code>SSL certificate problem: unable to get local issuer certificate\n</code></pre> <p>Solution: For development only, disable SSL verification (not recommended for production):</p> <pre><code>curl -k https://sellia.example.com/api/admin/reserved\n</code></pre> <p>Or add the CA certificate:</p> <pre><code>curl --cacert /path/to/ca.crt https://sellia.example.com/api/admin/reserved\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#401-unauthorized-despite-valid-key","level":3,"title":"401 Unauthorized Despite Valid Key","text":"<p>Possible causes:</p> <ol> <li>Key is not a master key</li> <li>Database not available on server</li> <li>Wrong server URL</li> </ol> <p>Debug:</p> <pre><code># Check if key is master\ncurl -H \"Authorization: Bearer $KEY\" \\\n  https://sellia.example.com/api/admin/api-keys\n\n# Should return list of keys if master\n# Should return 401 if standard key\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#503-service-unavailable","level":3,"title":"503 Service Unavailable","text":"<pre><code>{\"error\":\"Database not available\"}\n</code></pre> <p>Cause: Server started without database or database file missing.</p> <p>Solution:</p> <pre><code># Check database file\nls -la /var/lib/sellia/sellia.db\n\n# Restart server with database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server restart\n</code></pre>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/admin-api/#see-also","level":2,"title":"See Also","text":"<ul> <li>Reserved Subdomains - Managing reserved subdomains via CLI</li> <li>API Key Management - Managing API keys via CLI</li> <li>Server Auth - Authentication configuration</li> <li>Database Schema - Database table definitions</li> </ul>","path":["User","Admin","Admin API"],"tags":[]},{"location":"user/admin/api-key-management/","level":1,"title":"API Key Management","text":"<p>Create, list, and revoke API keys for tunnel access and admin operations using the <code>sellia admin api-keys</code> command.</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#overview","level":2,"title":"Overview","text":"<p>API keys control access to your Sellia server. There are two types:</p> <ol> <li>Standard keys - For tunnel creation and basic operations</li> <li>Master keys - For admin API access and key management</li> </ol> <p>All management operations require authentication with a master key.</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before managing API keys, ensure:</p> <ol> <li>Server is running with database enabled</li> <li>You have a master key for authentication</li> <li>Admin API is accessible</li> </ol> <pre><code># Check server has database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server start\n\n# Set your admin key\nexport SELLIA_ADMIN_API_KEY=\"your-master-key\"\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#commands","level":2,"title":"Commands","text":"","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#sellia-admin-api-keys-list","level":3,"title":"<code>sellia admin api-keys list</code>","text":"<p>List all API keys in the database.</p> <p>Usage:</p> <pre><code>sellia admin api-keys list\n</code></pre> <p>Optional flags:</p> <pre><code>--server URL    # Server URL (default: from config)\n</code></pre> <p>Example output:</p> <pre><code>API Keys: (3)\n\n  a1b2c3d4  Development Key                    (master)\n    Created: 2024-01-15 10:30\n  e5f6g7h8  Production API\n    Created: 2024-01-20 14:22\n  i9j0k1l2  Staging Key                        (revoked)\n    Created: 2024-01-10 09:15\n</code></pre> <p>Note: The name column is left-aligned and 20 characters wide. If a key has no name, only the prefix and flags are shown.</p> <p>Output fields:</p> <ul> <li><code>key_prefix</code> - First 8 characters of the key (for identification)</li> <li><code>name</code> - Friendly name provided when created</li> <li><code>(master)</code> - Master key with admin access</li> <li><code>(revoked)</code> - Key is no longer valid</li> <li><code>Created</code> - Timestamp when key was created</li> </ul> <p>When to use:</p> <ul> <li>Auditing who has access to your server</li> <li>Finding the prefix for revoking a key</li> <li>Checking if a key is a master key</li> <li>Verifying key status</li> </ul>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#sellia-admin-api-keys-create","level":3,"title":"<code>sellia admin api-keys create</code>","text":"<p>Create a new API key.</p> <p>Usage:</p> <pre><code># Standard key\nsellia admin api-keys create --name \"User Key\"\n\n# Master key\nsellia admin api-keys create --name \"Admin Key\" --master\n\n# With custom server\nsellia admin api-keys create --name \"Dev Key\" --server https://sellia.example.com\n</code></pre> <p>Flags:</p> <pre><code>--name NAME      # Friendly name for the key (optional)\n--master         # Create a master key with admin access (optional)\n--server URL     # Server URL (default: from config)\n</code></pre> <p>Example output:</p> <pre><code>✓ API key created\n\n  Key:    9a8b7c6d5e4f3g2h1i2j3k4l5m6n7o8p9q0r1s2t3u4v5w6x7y8z9a0b1c2d3\n  Prefix: 9a8b7c6d\n  Name:   Development Key\n  Type:   Master (admin access)\n\nSave this key now - it won't be shown again!\n</code></pre> <p>Important: The full key is only shown once. Save it securely immediately.</p> <p>Best practices:</p> <ol> <li>Always provide a descriptive name</li> <li>Create separate keys for different users/environments</li> <li>Create master keys only for admin users</li> <li>Save the key in a secure password manager</li> <li>Communicate the key via secure channel (encrypted email, password manager, etc.)</li> </ol> <p>Creating keys for different purposes:</p> <pre><code># Development key\nsellia admin api-keys create --name \"Dev Team Key\"\n\n# Production key\nsellia admin api-keys create --name \"Production Service Key\"\n\n# CI/CD key\nsellia admin api-keys create --name \"GitHub Actions\"\n\n# Personal admin key\nsellia admin api-keys create --name \"Alice's Admin Key\" --master\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#sellia-admin-api-keys-revoke","level":3,"title":"<code>sellia admin api-keys revoke</code>","text":"<p>Revoke an API key by its prefix.</p> <p>Usage:</p> <pre><code>sellia admin api-keys revoke a1b2c3d4\n</code></pre> <p>Flags:</p> <pre><code>--server URL    # Server URL (default: from config)\n</code></pre> <p>Example output:</p> <pre><code>✓ API key 'a1b2c3d4' revoked\n</code></pre> <p>What happens:</p> <ol> <li>Key is marked as inactive in database (<code>active = 0</code>)</li> <li>Existing tunnels continue to run until disconnected</li> <li>New tunnel creation attempts with this key fail</li> <li>Key prefix still appears in listings with <code>(revoked)</code> flag</li> </ol> <p>When to use:</p> <ul> <li>User leaves the organization</li> <li>Key is compromised or leaked</li> <li>Rotating to a new key</li> <li>Service is decommissioned</li> </ul> <p>Key rotation workflow:</p> <pre><code># Step 1: Create new key\nsellia admin api-keys create --name \"New Key\"\n# Save: key_new_key_here\n\n# Step 2: Update all clients\n# Users run: sellia auth login\n# Enter new key\n\n# Step 3: Wait for transition period (e.g., 1 week)\n# Monitor logs to ensure all clients updated\n\n# Step 4: Revoke old key\nsellia admin api-keys revoke old_prefix\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#authentication-for-admin-commands","level":2,"title":"Authentication for Admin Commands","text":"","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#environment-variable","level":3,"title":"Environment Variable","text":"<pre><code>export SELLIA_ADMIN_API_KEY=\"key_master_key\"\nsellia admin api-keys list\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#config-file","level":3,"title":"Config File","text":"<pre><code># ~/.config/sellia/sellia.yml\napi_key: key_master_key\nserver: https://sellia.me\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#command-flag","level":3,"title":"Command Flag","text":"<pre><code>sellia admin api-keys list --server https://sellia.me\n# Prompts for API key if not set\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#auth-login-recommended","level":3,"title":"Auth Login (Recommended)","text":"<pre><code>sellia auth login\n# Enter master key when prompted\n\n# Now all admin commands work\nsellia admin api-keys list\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#key-types-and-permissions","level":2,"title":"Key Types and Permissions","text":"","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#standard-api-key","level":3,"title":"Standard API Key","text":"<p>Can: - Create tunnels - Request available subdomains - Access inspector features - Connect to WebSocket endpoints</p> <p>Cannot: - Access admin API - Create/revoke API keys - Manage reserved subdomains - View other users' tunnels</p> <p>Use cases: - Individual developers - Production services - CI/CD pipelines - Testing environments</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#master-api-key","level":3,"title":"Master API Key","text":"<p>Can do everything standard keys can, plus: - Access admin API endpoints - Create new API keys - Revoke API keys - Manage reserved subdomains - View all tunnels and statistics - Access server metrics</p> <p>Use cases: - Server administrators - DevOps engineers - Security auditors - Automated admin scripts</p> <p>Security considerations: - Treat master keys like root passwords - Never log master keys - Rotate regularly (90 days recommended) - Limit to as few users as possible - Use separate master keys for different environments</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#workflows","level":2,"title":"Workflows","text":"","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#onboarding-a-new-user","level":3,"title":"Onboarding a New User","text":"<pre><code># 1. Create a key for the new user\nsellia admin api-keys create --name \"Alice's Key\"\n\n# 2. Send key securely (e.g., via password manager)\n# Key: key_generated_key_here\n\n# 3. User authenticates\n# User runs: sellia auth login\n# User enters key\n\n# 4. User creates tunnels\nsellia http 3000 --subdomain alice-app\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#offboarding-a-user","level":3,"title":"Offboarding a User","text":"<pre><code># 1. List keys to find their prefix\nsellia admin api-keys list\n\n# 2. Revoke their key\nsellia admin api-keys revoke a1b2c3d4\n\n# 3. (Optional) Create audit log entry\necho \"$(date) Revoked key for Alice (a1b2c3d4)\" &gt;&gt; /var/log/sellia/access.log\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#setting-up-cicd","level":3,"title":"Setting Up CI/CD","text":"<pre><code># 1. Create a key for the CI system\nsellia admin api-keys create --name \"GitHub Actions - Production\"\n# Save key to CI/CD secrets (e.g., GitHub Secrets)\n\n# 2. In CI/CD pipeline\n# .github/workflows/deploy.yml\n- name: Create tunnel\n  run: |\n    sellia http 3000 --subdomain myapp-${{ github.sha }}\n  env:\n    SELLIA_API_KEY: ${{ secrets.SELLIA_API_KEY }}\n\n# 3. If compromised, rotate the key\nsellia admin api-keys revoke a1b2c3d4\nsellia admin api-keys create --name \"GitHub Actions - Production\"\n# Update CI/CD secret with new key\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#environment-separation","level":3,"title":"Environment Separation","text":"<pre><code># Development\nsellia admin api-keys create --name \"Dev Key\"\n# Distribute to dev team\n\n# Staging\nsellia admin api-keys create --name \"Staging Key\"\n# Use for staging environment\n\n# Production\nsellia admin api-keys create --name \"Production Key\"\n# Strict access control, audit logging\n\n# Admin\nsellia admin api-keys create --name \"Ops Admin\" --master\n# For operations team only\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#database-schema","level":2,"title":"Database Schema","text":"<p>API keys are stored in the <code>api_keys</code> table:</p> <pre><code>CREATE TABLE api_keys (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    key_hash TEXT NOT NULL UNIQUE,\n    key_prefix TEXT NOT NULL,\n    name TEXT,\n    is_master BOOLEAN NOT NULL DEFAULT 0,\n    active BOOLEAN NOT NULL DEFAULT 1,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_used_at TEXT\n);\n</code></pre> <p>Fields:</p> <ul> <li><code>key_hash</code> - SHA-256 hash of the key (plaintext key never stored)</li> <li><code>key_prefix</code> - First 8 characters (for identification)</li> <li><code>name</code> - Friendly name</li> <li><code>is_master</code> - True if master key</li> <li><code>active</code> - False if revoked</li> <li><code>created_at</code> - Timestamp when created</li> <li><code>last_used_at</code> - Timestamp of last tunnel creation</li> </ul> <p>Indexes:</p> <pre><code>CREATE INDEX idx_api_keys_prefix ON api_keys(key_prefix);\nCREATE INDEX idx_api_keys_active ON api_keys(active) WHERE active = 1;\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#principle-of-least-privilege","level":3,"title":"Principle of Least Privilege","text":"<ul> <li>Use standard keys for tunnel operations</li> <li>Reserve master keys for admin tasks only</li> <li>Create separate keys per environment (dev/staging/prod)</li> <li>Create separate keys per service/team</li> </ul>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#key-storage","level":3,"title":"Key Storage","text":"<p>Do: - Store in password managers (1Password, LastPass, etc.) - Use secret management systems (Vault, AWS Secrets Manager) - Set file permissions: <code>chmod 600</code> on config files - Use environment variables for CI/CD</p> <p>Don't: - Commit keys to version control - Share keys in email/chat - Log keys in output - Store in plaintext files</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#key-rotation","level":3,"title":"Key Rotation","text":"<p>Rotate keys periodically:</p> <pre><code>#!/bin/bash\n# rotate-key.sh - Rotate API keys\n\n# 1. Create new key\nNEW_KEY=$(sellia admin api-keys create --name \"Rotated Key\" | grep \"Key:\" | awk '{print $2}')\n\n# 2. Update all clients\n# (This varies by your setup - update config files, env vars, etc.)\n\n# 3. Wait for confirmation\nread -p \"Press Enter after updating all clients...\"\n\n# 4. Revoke old key\nsellia admin api-keys revoke $OLD_PREFIX\n\necho \"Key rotation complete\"\n</code></pre> <p>Recommended schedule: - Master keys: Every 90 days - Standard keys: Every 180 days - After any suspected compromise - When employee leaves organization</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#audit-logging","level":3,"title":"Audit Logging","text":"<p>Maintain an audit trail:</p> <pre><code># Log all key operations\naudit() {\n  echo \"$(date) $@\" &gt;&gt; /var/log/sellia/audit.log\n}\n\nsellia admin api-keys create --name \"New Key\"\naudit \"API key created: New Key\"\n\nsellia admin api-keys revoke a1b2c3d4\naudit \"API key revoked: a1b2c3d4\"\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#database-not-available-error","level":3,"title":"\"Database Not Available\" Error","text":"<pre><code>Error: Database not available on server\n</code></pre> <p>Cause: Server started without database.</p> <p>Solution:</p> <pre><code># Start server with database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server start\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#unauthorized-admin-api-key-required","level":3,"title":"\"Unauthorized: Admin API Key Required\"","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <p>Cause: Using a standard key instead of a master key.</p> <p>Solution:</p> <pre><code># Check if your key is a master key\nsellia admin api-keys list\n\n# Create a master key if needed\nsellia admin api-keys create --master --name \"Admin Key\"\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#key-not-found","level":3,"title":"Key Not Found","text":"<pre><code>Error: API key 'a1b2c3d4' not found\n</code></pre> <p>Cause: Trying to revoke a key that doesn't exist.</p> <p>Solution:</p> <pre><code># List keys to find correct prefix\nsellia admin api-keys list\n\n# Revoke with correct prefix\nsellia admin api-keys revoke correct_prefix\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#accidentally-revoked-active-key","level":3,"title":"Accidentally Revoked Active Key","text":"<p>If you revoke the wrong key:</p> <pre><code># If you have the full key, you can re-add it\nsellia admin api-keys create --name \"Restored Key\"\n# But you'll need the original full key plaintext\n\n# Better: Create a new key and update clients\nsellia admin api-keys create --name \"Replacement Key\"\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#http-api","level":2,"title":"HTTP API","text":"<p>All CLI commands are wrappers around the HTTP API. You can call it directly:</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#list-api-keys","level":3,"title":"List API Keys","text":"<pre><code>GET /api/admin/api-keys\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#create-api-key","level":3,"title":"Create API Key","text":"<pre><code>POST /api/admin/api-keys\nAuthorization: Bearer &lt;master-key&gt;\nContent-Type: application/json\n\n{\n  \"name\": \"My Key\",\n  \"is_master\": false\n}\n</code></pre>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#revoke-api-key","level":3,"title":"Revoke API Key","text":"<pre><code>DELETE /api/admin/api-keys/:prefix\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre> <p>See Admin API for full API reference.</p>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/api-key-management/#see-also","level":2,"title":"See Also","text":"<ul> <li>API Keys - API key concepts and types</li> <li>Auth Command - Client-side key management</li> <li>Server Auth - Server-side authentication</li> <li>Admin API - Complete HTTP API reference</li> </ul>","path":["User","Admin","API Key Management"],"tags":[]},{"location":"user/admin/reserved-subdomains/","level":1,"title":"Reserved Subdomains","text":"<p>Reserved subdomains prevent users from claiming specific subdomains for tunnels. This is useful for protecting service URLs, brand names, or system endpoints.</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#overview","level":2,"title":"Overview","text":"<p>When a subdomain is reserved, tunnel clients cannot request it. The server will reject the request with an error:</p> <pre><code>Error: Subdomain 'api' is reserved\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#default-reserved-subdomains","level":2,"title":"Default Reserved Subdomains","text":"<p>Sellia ships with a default set of reserved subdomains:</p> <p>System services: - <code>api</code>, <code>www</code>, <code>admin</code>, <code>app</code>, <code>dashboard</code>, <code>console</code> - <code>mail</code>, <code>smtp</code>, <code>imap</code>, <code>pop</code>, <code>ftp</code>, <code>ssh</code>, <code>sftp</code></p> <p>Infrastructure: - <code>cdn</code>, <code>static</code>, <code>assets</code>, <code>media</code>, <code>images</code>, <code>files</code> - <code>auth</code>, <code>login</code>, <code>oauth</code>, <code>sso</code>, <code>account</code>, <code>accounts</code></p> <p>Business: - <code>billing</code>, <code>pay</code>, <code>payment</code>, <code>payments</code>, <code>subscribe</code> - <code>help</code>, <code>support</code>, <code>docs</code>, <code>documentation</code>, <code>status</code></p> <p>Development: - <code>blog</code>, <code>news</code>, <code>forum</code>, <code>community</code>, <code>dev</code>, <code>developer</code> - <code>test</code>, <code>staging</code>, <code>demo</code>, <code>sandbox</code>, <code>preview</code></p> <p>Protocols: - <code>ws</code>, <code>wss</code>, <code>socket</code>, <code>websocket</code>, <code>stream</code></p> <p>Development tools: - <code>git</code>, <code>svn</code>, <code>repo</code>, <code>registry</code>, <code>npm</code>, <code>pypi</code></p> <p>System: - <code>internal</code>, <code>private</code>, <code>public</code>, <code>local</code>, <code>localhost</code> - <code>root</code>, <code>system</code>, <code>server</code>, <code>servers</code>, <code>node</code>, <code>nodes</code></p> <p>Sellia-specific: - <code>sellia</code>, <code>tunnel</code>, <code>tunnels</code>, <code>proxy</code></p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#managing-reserved-subdomains","level":2,"title":"Managing Reserved Subdomains","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#list-reserved-subdomains","level":3,"title":"List Reserved Subdomains","text":"<p>View all reserved subdomains:</p> <pre><code>sellia admin reserved list\n</code></pre> <p>Example output:</p> <pre><code>Reserved Subdomains: (50)\n\n  api                            Default reserved subdomain  (default)\n  admin                          Default reserved subdomain  (default)\n  cdn                            Default reserved subdomain  (default)\n  ...\n  mycompany                      Company name\n  billing                        Payment system\n</code></pre> <p>Flags: - <code>(default)</code> - Shipped with Sellia, cannot be removed</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#add-a-reserved-subdomain","level":3,"title":"Add a Reserved Subdomain","text":"<p>Prevent users from claiming a specific subdomain:</p> <pre><code>sellia admin reserved add mycompany\n</code></pre> <p>With a reason (for documentation):</p> <pre><code>sellia admin reserved add billing --reason \"Payment processing service\"\n</code></pre> <p>Requirements:</p> <ul> <li>Minimum 3 characters</li> <li>Maximum 63 characters</li> <li>Only lowercase letters, numbers, and hyphens (case-insensitive, converted to lowercase)</li> <li>Must start and end with alphanumeric character</li> <li>No consecutive hyphens enforced by pattern matching</li> </ul> <p>Valid names: - <code>my-app</code> - <code>api-v2</code> - <code>service123</code></p> <p>Invalid names: - <code>-bad</code> (starts with hyphen) - <code>bad-</code> (ends with hyphen) - <code>ab</code> (too short) - (Uppercase is converted to lowercase, but mixed case allowed in input)</p> <p>Error examples:</p> <pre><code>Error: Subdomain 'ab' must be at least 3 characters\nError: Subdomain must be at most 63 characters\nError: Subdomain can only contain lowercase letters, numbers, and hyphens\nError: Subdomain 'mycompany' is already reserved\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#remove-a-reserved-subdomain","level":3,"title":"Remove a Reserved Subdomain","text":"<p>Allow users to claim a subdomain again:</p> <pre><code>sellia admin reserved remove mycompany\n</code></pre> <p>Output:</p> <pre><code>✓ Removed reserved subdomain 'mycompany'\n</code></pre> <p>Limitations:</p> <ul> <li>Default reserved subdomains (shipped with Sellia) cannot be removed</li> <li>Attempts to remove default subdomains return an error:</li> </ul> <pre><code>Error: Cannot remove default reserved subdomain\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#use-cases","level":2,"title":"Use Cases","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#protect-service-endpoints","level":3,"title":"Protect Service Endpoints","text":"<p>Reserve subdomains for your actual services:</p> <pre><code># Reserve service URLs\nsellia admin reserved add api --reason \"API gateway\"\nsellia admin reserved add admin --reason \"Admin panel\"\nsellia admin reserved add dashboard --reason \"Analytics dashboard\"\nsellia admin reserved add billing --reason \"Payment system\"\n</code></pre> <p>Now you can safely run these services without users conflicting:</p> <ul> <li><code>api.yourdomain.com</code> - Your API gateway</li> <li><code>admin.yourdomain.com</code> - Your admin panel</li> <li><code>dashboard.yourdomain.com</code> - Your analytics</li> <li>Users cannot claim these subdomains for tunnels</li> </ul>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#brand-protection","level":3,"title":"Brand Protection","text":"<p>Prevent typosquatting and protect your brand:</p> <pre><code>sellia admin reserved add mycompany\nsellia admin reserved add myco\nsellia admin reserved add my-company\nsellia admin reserved add mycompanyapp\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#future-planning","level":3,"title":"Future Planning","text":"<p>Reserve subdomains for planned features:</p> <pre><code>sellia admin reserved add blog --reason \"Coming soon\"\nsellia admin reserved add shop --reason \"E-commerce launch Q2\"\nsellia admin reserved add community --reason \"Forum planned\"\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#department-isolation","level":3,"title":"Department Isolation","text":"<p>Reserve subdomains for different teams:</p> <pre><code>sellia admin reserved add engineering\nsellia admin reserved add marketing\nsellia admin reserved add sales\nsellia admin reserved add support\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#subdomain-validation-rules","level":2,"title":"Subdomain Validation Rules","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#format-requirements","level":3,"title":"Format Requirements","text":"<p>Subdomains must follow RFC 1035 rules:</p> <ol> <li>Length: 3-63 characters</li> <li>Characters: a-z, 0-9, hyphen (-) (case-insensitive)</li> <li>No leading/trailing hyphens: <code>-myapp</code> or <code>myapp-</code> is invalid</li> <li>Case insensitive: <code>MyApp</code> → <code>myapp</code></li> </ol>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#pattern-matching","level":3,"title":"Pattern Matching","text":"<p>Server validation uses this regex (case-insensitive):</p> <pre><code>\\A[a-z0-9][a-z0-9-]*[a-z0-9]\\z/i\n</code></pre> <p>This allows: - Letters (a-z, case-insensitive) - Numbers (0-9) - Hyphens (-) in the middle - Must start and end with alphanumeric character</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#examples","level":3,"title":"Examples","text":"<p>Valid: - <code>myapp</code> - <code>my-app</code> - <code>app-v2</code> - <code>service123</code> - <code>MYAPP</code> (converted to lowercase: <code>myapp</code>)</p> <p>Invalid: - <code>-myapp</code> (starts with hyphen) - <code>myapp-</code> (ends with hyphen) - <code>ab</code> (too short) - <code>a</code> * 64 characters (too long)</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#database-schema","level":2,"title":"Database Schema","text":"<p>Reserved subdomains are stored in the <code>reserved_subdomains</code> table:</p> <pre><code>CREATE TABLE reserved_subdomains (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    subdomain TEXT NOT NULL UNIQUE,\n    reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    is_default BOOLEAN NOT NULL DEFAULT 0\n);\n</code></pre> <p>Fields:</p> <ul> <li><code>subdomain</code> - The reserved subdomain (unique)</li> <li><code>reason</code> - Optional reason/documentation</li> <li><code>is_default</code> - True if shipped with Sellia (cannot be removed)</li> <li><code>created_at</code> - Timestamp when reserved</li> </ul>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#server-integration","level":2,"title":"Server Integration","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#tunnel-registration","level":3,"title":"Tunnel Registration","text":"<p>When a client requests a subdomain:</p> <ol> <li>Client sends <code>TunnelRegister</code> message with desired subdomain</li> <li>Server checks <code>reserved_subdomains</code> table</li> <li>If reserved → reject with error</li> <li>If available → proceed with tunnel registration</li> </ol>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#real-time-updates","level":3,"title":"Real-time Updates","text":"<p>The server reloads reserved subdomains when:</p> <ol> <li>A subdomain is added via admin API</li> <li>A subdomain is removed via admin API</li> <li>Server starts (loads from database)</li> </ol> <p>No restart required - changes take effect immediately.</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#http-api","level":2,"title":"HTTP API","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#list-reserved-subdomains_1","level":3,"title":"List Reserved Subdomains","text":"<pre><code>GET /api/admin/reserved\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre> <p>Response:</p> <pre><code>[\n  {\n    \"subdomain\": \"api\",\n    \"reason\": \"Default reserved subdomain\",\n    \"is_default\": true,\n    \"created_at\": \"2024-01-01T00:00:00.000000Z\"\n  },\n  {\n    \"subdomain\": \"billing\",\n    \"reason\": \"Payment system\",\n    \"is_default\": false,\n    \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n  }\n]\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#add-reserved-subdomain","level":3,"title":"Add Reserved Subdomain","text":"<pre><code>POST /api/admin/reserved\nAuthorization: Bearer &lt;master-key&gt;\nContent-Type: application/json\n\n{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\"\n}\n</code></pre> <p>Response: 201 Created</p> <pre><code>{\n  \"subdomain\": \"mycompany\",\n  \"reason\": \"Company name protection\",\n  \"is_default\": false,\n  \"created_at\": \"2024-01-15T10:30:00.000000Z\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li>400 Bad Request - Invalid subdomain format</li> <li>409 Conflict - Already reserved</li> <li>401 Unauthorized - Not a master key</li> <li>503 Service Unavailable - Database not available</li> </ul>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#remove-reserved-subdomain","level":3,"title":"Remove Reserved Subdomain","text":"<pre><code>DELETE /api/admin/reserved/:subdomain\nAuthorization: Bearer &lt;master-key&gt;\n</code></pre> <p>Response: 200 OK</p> <pre><code>{\n  \"message\": \"Reserved subdomain 'mycompany' removed\"\n}\n</code></pre> <p>Error responses:</p> <ul> <li>403 Forbidden - Attempting to remove default reserved subdomain</li> <li>404 Not Found - Subdomain not in reserved list</li> <li>401 Unauthorized - Not a master key</li> <li>503 Service Unavailable - Database not available</li> </ul>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#reserve-early","level":3,"title":"Reserve Early","text":"<p>Add reserved subdomains before opening your server to users:</p> <pre><code># Initial setup script\n#!/bin/bash\n# Reserve company domains\nsellia admin reserved add mycompany\nsellia admin reserved add myco\nsellia admin reserved add my-company\n\n# Reserve service domains\nsellia admin reserved add api\nsellia admin reserved add admin\nsellia admin reserved add dashboard\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#document-reasons","level":3,"title":"Document Reasons","text":"<p>Always include reasons for custom reservations:</p> <pre><code>sellia admin reserved add billing --reason \"Stripe integration\"\nsellia admin reserved add legacy --reason \"Old system migration\"\n</code></pre> <p>This helps future administrators understand why each subdomain is reserved.</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#regular-audits","level":3,"title":"Regular Audits","text":"<p>Periodically review reserved subdomains:</p> <pre><code># List all with reasons\nsellia admin reserved list\n\n# Ask yourself:\n# - Is this still needed?\n# - Is the reason clear?\n# - Should we add anything new?\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#dont-over-reserve","level":3,"title":"Don't Over-Reserve","text":"<p>Reserving too many subdomains frustrates users:</p> <ul> <li>Do: Reserve actual services and brand names</li> <li>Don't: Reserve every possible word</li> </ul> <p>A good rule of thumb: Keep reserved subdomains under 100 for a typical installation.</p>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#subdomain-is-reserved-error","level":3,"title":"\"Subdomain is Reserved\" Error","text":"<p>User sees this error when trying to create a tunnel:</p> <pre><code>$ sellia http 3000 --subdomain api\nError: Subdomain 'api' is reserved\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Choose a different subdomain: <pre><code>sellia http 3000 --subdomain myapi\n</code></pre></p> </li> <li> <p>Check if the reservation is necessary: <pre><code>sellia admin reserved list | grep api\n</code></pre></p> </li> <li> <p>Remove reservation if not needed (non-default only): <pre><code>sellia admin reserved remove custom-reserved\n</code></pre></p> </li> </ol>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#database-not-available","level":3,"title":"Database Not Available","text":"<p>Admin commands fail with:</p> <pre><code>Error: Database not available on server\n</code></pre> <p>Cause: Server started without database enabled.</p> <p>Solution:</p> <pre><code># Start server with database\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server start\n</code></pre>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#cannot-remove-default-subdomain","level":3,"title":"Cannot Remove Default Subdomain","text":"<p>Attempting to remove a default reserved subdomain:</p> <pre><code>$ sellia admin reserved remove api\nError: Cannot remove default reserved subdomain\n</code></pre> <p>Explanation: Default subdomains are protected and cannot be removed. This prevents accidentally opening security holes.</p> <p>Workaround: If you must use a default subdomain:</p> <ol> <li>Run your service on a different subdomain</li> <li>Or modify the server code to remove the default (not recommended)</li> </ol>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/admin/reserved-subdomains/#see-also","level":2,"title":"See Also","text":"<ul> <li>Admin API - Complete HTTP API reference</li> <li>API Key Management - Managing admin access</li> <li>Server Auth - Authentication configuration</li> <li>Path-Based Routing - Advanced routing features</li> </ul>","path":["User","Admin","Reserved Subdomains"],"tags":[]},{"location":"user/authentication/api-keys/","level":1,"title":"API Keys","text":"<p>API keys are used to authenticate tunnel clients with the Sellia server. They provide secure access control and enable features like reserved subdomains and admin operations.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#overview","level":2,"title":"Overview","text":"<p>API keys in Sellia serve several purposes:</p> <ol> <li>Authentication: Verify tunnel clients are authorized</li> <li>Access Control: Restrict server usage to authorized users</li> <li>Account Association: Link tunnels to accounts for management</li> <li>Admin Operations: Enable admin API access (master keys)</li> </ol>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-types","level":2,"title":"Key Types","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#standard-api-keys","level":3,"title":"Standard API Keys","text":"<p>Standard keys allow tunnel creation and basic operations:</p> <pre><code># Create via admin CLI or API\nsellia admin api-keys create --name \"My Development Key\"\n</code></pre> <p>Capabilities: - Create tunnels - Request subdomains - Basic tunnel operations</p> <p>Limitations: - Cannot access admin API - Cannot manage reserved subdomains - Cannot create/revoke other keys</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#master-api-keys","level":3,"title":"Master API Keys","text":"<p>Master keys have full administrative access:</p> <pre><code># Create master key\nsellia admin api-keys create --name \"Admin Key\" --master\n</code></pre> <p>Capabilities: - All standard key permissions - Access admin API endpoints - Create and revoke API keys - Manage reserved subdomains - View all tunnels and metrics</p> <p>Security Note: Treat master keys like passwords. Never share them or commit them to version control.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-format","level":2,"title":"Key Format","text":"<p>API keys are 64-character hexadecimal strings:</p> <pre><code>a1b2c3d4e5f67890abcdef1234567890abcdef1234567890abcdef1234567890\n</code></pre> <p>For identification, only the first 8 characters (prefix) are displayed in listings:</p> <pre><code>a1b2c3d4  (master)\n</code></pre>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-storage","level":2,"title":"Key Storage","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#client-side","level":3,"title":"Client-Side","text":"<p>API keys are stored in <code>~/.config/sellia/sellia.yml</code>:</p> <pre><code>api_key: a1b2c3d4e5f67890abcdef1234567890abcdef1234567890abcdef1234567890\nserver: https://sellia.me\n</code></pre> <p>Security: - File permissions should be <code>0600</code> (user read/write only) - Never commit to version control - Use environment variables for CI/CD</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#server-side","level":3,"title":"Server-Side","text":"<p>Only the SHA-256 hash of the key is stored:</p> <pre><code>key_hash: 2cf24dba5fb0a30e... (SHA-256 hash)\nkey_prefix: a1b2c3d4 (first 8 chars for identification)\n</code></pre> <p>The raw API key is never stored and only shown once during creation.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#obtaining-an-api-key","level":2,"title":"Obtaining an API Key","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#from-a-server-admin","level":3,"title":"From a Server Admin","text":"<p>Contact your Sellia server administrator to request an API key. They can create one for you using the admin CLI.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#self-hosted-servers","level":3,"title":"Self-Hosted Servers","text":"<p>If you're running your own server, generate a master key:</p> <pre><code># Set master key in server config or environment\nexport SELLIA_MASTER_KEY=\"your-generated-key-here\"\n</code></pre> <p>Then use that key to create additional keys via the admin API.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#using-api-keys","level":2,"title":"Using API Keys","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#environment-variable","level":3,"title":"Environment Variable","text":"<pre><code>export SELLIA_API_KEY=\"a1b2c3d4e5f6...\"\nsellia http 3000\n</code></pre>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#config-file","level":3,"title":"Config File","text":"<pre><code># ~/.config/sellia/sellia.yml\napi_key: a1b2c3d4e5f6...\nserver: https://sellia.me\n</code></pre>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#command-line-flag","level":3,"title":"Command Line Flag","text":"<pre><code>sellia http 3000 --api-key a1b2c3d4e5f6...\n</code></pre>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#auth-login-recommended","level":3,"title":"Auth Login (Recommended)","text":"<pre><code>sellia auth login\n# Enter 64-character hex API key when prompted\n</code></pre> <p>This saves the key securely to your config file.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-management","level":2,"title":"Key Management","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#viewing-your-keys","level":3,"title":"Viewing Your Keys","text":"<p>List all API keys (requires admin access):</p> <pre><code>sellia admin api-keys list\n</code></pre> <p>Output: <pre><code>API Keys: (3)\n\n  a1b2c3d4  Development Key                    (master)\n  e5f6g7h8  Production API\n  i9j0k1l2  Staging Key        (revoked)\n</code></pre></p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#creating-keys","level":3,"title":"Creating Keys","text":"<p>Create a standard key:</p> <pre><code>sellia admin api-keys create --name \"Production API\"\n</code></pre> <p>Create a master key:</p> <pre><code>sellia admin api-keys create --name \"Admin Key\" --master\n</code></pre> <p>Important: Save the key immediately. It won't be shown again.</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#revoking-keys","level":3,"title":"Revoking Keys","text":"<p>Revoke a key by its prefix:</p> <pre><code>sellia admin api-keys revoke a1b2c3d4\n</code></pre> <p>Revoked keys cannot be used to create new tunnels (existing tunnels continue until they disconnect).</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-rotation","level":3,"title":"Key Rotation","text":"<p>Regularly rotate API keys:</p> <ol> <li>Create a new key</li> <li>Update all clients to use the new key</li> <li>Revoke the old key</li> </ol> <pre><code># Step 1: Create new key\nsellia admin api-keys create --name \"New Key\"\n# Save the key: key_newkey...\n\n# Step 2: Update clients\nsellia auth login\n# Enter new key\n\n# Step 3: Revoke old key\nsellia admin api-keys revoke a1b2c3d4\n</code></pre>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#principle-of-least-privilege","level":3,"title":"Principle of Least Privilege","text":"<ul> <li>Use standard keys for normal tunnel operations</li> <li>Reserve master keys for admin tasks only</li> <li>Create separate keys for different environments (dev, staging, prod)</li> </ul>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-storage_1","level":3,"title":"Key Storage","text":"<p>Do: - Store keys in environment variables for CI/CD - Use secret management tools (Vault, AWS Secrets Manager, etc.) - Set proper file permissions on config files (<code>chmod 600</code>)</p> <p>Don't: - Commit keys to version control - Share keys in email or chat - Log keys in output or error messages - Use keys in URLs (they may be logged)</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#detecting-compromised-keys","level":3,"title":"Detecting Compromised Keys","text":"<p>Signs a key may be compromised:</p> <ul> <li>Unexpected tunnels appearing</li> <li>Spike in traffic from unknown locations</li> <li>Failed authentication attempts in server logs</li> </ul> <p>If you suspect compromise:</p> <ol> <li>Immediately revoke the key</li> <li>Create a new key</li> <li>Update all legitimate clients</li> <li>Investigate the source of the leak</li> </ol>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#authentication-flow","level":2,"title":"Authentication Flow","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#tunnel-connection","level":3,"title":"Tunnel Connection","text":"<ol> <li>Client connects to server via WebSocket</li> <li>Client sends authentication message with API key</li> <li>Server validates key against database or master key</li> <li>Server returns account ID and tunnel registration</li> <li>Tunnel is established</li> </ol>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#admin-api","level":3,"title":"Admin API","text":"<ol> <li>Client makes HTTP request with <code>Authorization: Bearer &lt;key&gt;</code> or <code>X-API-Key: &lt;key&gt;</code></li> <li>Server validates key is a master key</li> <li>Server checks key is active (not revoked)</li> <li>Request is processed</li> </ol>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#invalid-api-key","level":3,"title":"Invalid API Key","text":"<pre><code>Error: Authentication failed: Invalid API key\n</code></pre> <p>Solutions: - Verify key is correct (check for typos) - Ensure key hasn't been revoked - Check you're using the right server URL</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#unauthorized-for-admin-operations","level":3,"title":"Unauthorized for Admin Operations","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <p>Solutions: - Verify the key is a master key (check with <code>sellia admin api-keys list</code>) - Create a new master key if needed</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#key-not-found-after-login","level":3,"title":"Key Not Found After Login","text":"<pre><code>sellia auth status\n# Status: Not logged in\n</code></pre> <p>Solutions: - Check <code>~/.config/sellia/sellia.yml</code> exists - Verify the file contains <code>api_key:</code> - Try logging in again</p>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/api-keys/#see-also","level":2,"title":"See Also","text":"<ul> <li>Auth Command - Saving and managing API keys</li> <li>Server Auth - Server-side authentication configuration</li> <li>Admin API - Admin API reference</li> <li>API Key Management - Creating and revoking keys</li> </ul>","path":["User","Authentication","API Keys"],"tags":[]},{"location":"user/authentication/sellia-auth-command/","level":1,"title":"Auth Command","text":"<p>The <code>sellia auth</code> command manages your API key authentication with Sellia servers. Use it to save, view, and remove your API credentials.</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#commands","level":2,"title":"Commands","text":"","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#sellia-auth-login","level":3,"title":"<code>sellia auth login</code>","text":"<p>Save your API key for authentication.</p> <p>Usage:</p> <pre><code>sellia auth login\n</code></pre> <p>What it does:</p> <ol> <li>Prompts you to enter your API key</li> <li>Saves the key to <code>~/.config/sellia/sellia.yml</code></li> <li>Creates the config directory if it doesn't exist</li> <li>Merges with any existing configuration</li> </ol> <p>Example:</p> <pre><code>$ sellia auth login\nAPI Key: a1b2c3d4e5f6...\n✓ API key saved to /home/user/.config/sellia/sellia.yml\n</code></pre> <p>Config file created:</p> <pre><code># ~/.config/sellia/sellia.yml\napi_key: a1b2c3d4e5f6...\nserver: https://sellia.me\n</code></pre> <p>When to use:</p> <ul> <li>Setting up Sellia for the first time</li> <li>After receiving an API key from your server admin</li> <li>Rotating to a new API key</li> </ul>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#sellia-auth-logout","level":3,"title":"<code>sellia auth logout</code>","text":"<p>Remove your saved API key.</p> <p>Usage:</p> <pre><code>sellia auth logout\n</code></pre> <p>What it does:</p> <ol> <li>Reads your config file</li> <li>Removes the <code>api_key</code> field</li> <li>Writes the updated config back to disk</li> <li>If config parsing fails, deletes the entire file</li> </ol> <p>Example:</p> <pre><code>$ sellia auth logout\n✓ Logged out (API key removed)\n</code></pre> <p>When to use:</p> <ul> <li>Revoking your old API key</li> <li>Switching to a different account</li> <li>Decommissioning a development machine</li> </ul> <p>Note: This doesn't revoke the key on the server. Use <code>sellia admin api-keys revoke</code> for that.</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#sellia-auth-status","level":3,"title":"<code>sellia auth status</code>","text":"<p>Show your current authentication status.</p> <p>Usage:</p> <pre><code>sellia auth status\n</code></pre> <p>What it shows:</p> <ul> <li>Whether you're logged in</li> <li>The server URL you're authenticated with</li> <li>A masked version of your API key (first 4 and last 4 characters)</li> </ul> <p>Examples:</p> <p>Logged in:</p> <pre><code>$ sellia auth status\nStatus: Logged in\nServer: https://sellia.me\nAPI Key: sk_l...1234\n</code></pre> <p>Not logged in:</p> <pre><code>$ sellia auth status\nStatus: Not logged in\nServer: https://sellia.me\n\nRun 'sellia auth login' to authenticate\n</code></pre> <p>When to use:</p> <ul> <li>Verifying your credentials before creating tunnels</li> <li>Troubleshooting authentication issues</li> <li>Checking which server you're configured to use</li> </ul>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#authentication-methods","level":2,"title":"Authentication Methods","text":"<p>The auth command is just one way to provide your API key. Sellia checks multiple sources in order of priority:</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#priority-order","level":3,"title":"Priority Order","text":"<ol> <li> <p>Environment variable (highest priority)    <pre><code>export SELLIA_API_KEY=\"key_...\"\nsellia http 3000\n</code></pre></p> </li> <li> <p>Command-line flag <pre><code>sellia http 3000 --api-key key_...\n</code></pre></p> </li> <li> <p>Config file (set by <code>auth login</code>)    <pre><code># ~/.config/sellia/sellia.yml\napi_key: key_...\n</code></pre></p> </li> </ol> <p>The first value found is used. Environment variables override config files.</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#recommended-approach","level":3,"title":"Recommended Approach","text":"<p>Development: Use <code>auth login</code> for convenience <pre><code>sellia auth login\nsellia http 3000  # Uses saved key\n</code></pre></p> <p>CI/CD: Use environment variables <pre><code>export SELLIA_API_KEY=\"${{ secrets.SELLIA_API_KEY }}\"\nsellia http 3000\n</code></pre></p> <p>One-off tunnels: Use command-line flag <pre><code>sellia http 3000 --api-key key_...\n</code></pre></p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#config-file-locations","level":2,"title":"Config File Locations","text":"<p>The auth command saves to <code>~/.config/sellia/sellia.yml</code>, but Sellia loads config from multiple locations:</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#load-order-low-to-high-priority","level":3,"title":"Load Order (low to high priority)","text":"<ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current directory)</li> <li>Environment variables (highest priority)</li> </ol> <p>Later configs override earlier ones. This allows for per-project overrides.</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#example-per-project-config","level":3,"title":"Example: Per-Project Config","text":"<p>Global config: <pre><code># ~/.config/sellia/sellia.yml\napi_key: key_global_key\nserver: https://sellia.me\n</code></pre></p> <p>Project override: <pre><code># ./sellia.yml\napi_key: key_project_key\ntunnels:\n  app:\n    port: 3000\n</code></pre></p> <p>Result: The project-specific key is used when running from that directory.</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#api-key-required-error","level":3,"title":"\"API key required\" Error","text":"<pre><code>Error: API key required\n</code></pre> <p>Cause: No API key found in any source.</p> <p>Solutions:</p> <ol> <li> <p>Check your auth status:    <pre><code>sellia auth status\n</code></pre></p> </li> <li> <p>Log in if needed:    <pre><code>sellia auth login\n</code></pre></p> </li> <li> <p>Or provide via environment variable:    <pre><code>export SELLIA_API_KEY=\"your-key\"\n</code></pre></p> </li> </ol>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#config-file-not-found","level":3,"title":"Config File Not Found","text":"<p>After running <code>auth login</code>, you get \"Not logged in\" from <code>auth status</code>.</p> <p>Possible causes:</p> <ol> <li>File permissions issue</li> <li>Config directory not writable</li> <li>Disk full</li> </ol> <p>Debug steps:</p> <pre><code># Check if config directory exists\nls -la ~/.config/sellia/\n\n# Check file permissions\ncat ~/.config/sellia/sellia.yml\n\n# Try manually creating directory\nmkdir -p ~/.config/sellia\nchmod 755 ~/.config/sellia\n</code></pre>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#wrong-server","level":3,"title":"Wrong Server","text":"<pre><code>$ sellia auth status\nStatus: Logged in\nServer: https://old-server.example\n</code></pre> <p>Solution: The server URL is also saved in config. You can override it:</p> <pre><code># Via environment variable\nexport SELLIA_SERVER=\"https://new-server.example\"\n\n# Or edit the config file directly\nnano ~/.config/sellia/sellia.yml\n</code></pre>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#multiple-keys-conflict","level":3,"title":"Multiple Keys Conflict","text":"<p>If you have keys in multiple sources, you might be confused about which is being used.</p> <p>Check what's being used:</p> <pre><code># Check environment variables\necho $SELLIA_API_KEY\n\n# Check global config\ncat ~/.config/sellia/sellia.yml\n\n# Check local config\ncat ./sellia.yml\n</code></pre> <p>Clear conflicting sources:</p> <pre><code># Unset environment variable\nunset SELLIA_API_KEY\n\n# Remove local config\nrm ./sellia.yml\n\n# Now only global config is used\n</code></pre>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#security-considerations","level":2,"title":"Security Considerations","text":"","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#config-file-permissions","level":3,"title":"Config File Permissions","text":"<p>The auth command creates the config with default permissions. On Unix-like systems, you should restrict access:</p> <pre><code>chmod 600 ~/.config/sellia/sellia.yml\n</code></pre> <p>This allows only you (the file owner) to read and write the file.</p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#shared-machines","level":3,"title":"Shared Machines","text":"<p>On shared or multi-user systems:</p> <ol> <li>Don't use auth login - it saves to disk</li> <li> <p>Use environment variables instead:    <pre><code>export SELLIA_API_KEY=\"your-key\"\nsellia http 3000\nunset SELLIA_API_KEY  # Clear when done\n</code></pre></p> </li> <li> <p>Or use command-line flag (not saved in shell history):    <pre><code>sellia http 3000 --api-key \"your-key\"\n</code></pre></p> </li> </ol>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#version-control","level":3,"title":"Version Control","text":"<p>Never commit the config file. Add to <code>.gitignore</code>:</p> <pre><code>echo \".config/sellia/\" &gt;&gt; ~/.gitignore\necho \"sellia.yml\" &gt;&gt; .gitignore  # For project-specific configs\n</code></pre>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#integration-with-other-tools","level":2,"title":"Integration with Other Tools","text":"","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#docker","level":3,"title":"Docker","text":"<pre><code># Don't use auth login in Docker\n# Instead, use environment variables\n\nENV SELLIA_API_KEY=${SELLIA_API_KEY}\n</code></pre> <pre><code>docker run -e SELLIA_API_KEY=\"your-key\" sellia http 3000\n</code></pre>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#systemd","level":3,"title":"Systemd","text":"<pre><code># /etc/systemd/system/sellia.service\n[Service]\nEnvironment=\"SELLIA_API_KEY=your-key\"\nExecStart=/usr/local/bin/sellia start\n</code></pre>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#cicd","level":3,"title":"CI/CD","text":"<p>GitHub Actions: <pre><code>- name: Create tunnel\n  run: sellia http 3000\n  env:\n    SELLIA_API_KEY: ${{ secrets.SELLIA_API_KEY }}\n</code></pre></p> <p>GitLab CI: <pre><code>create_tunnel:\n  script:\n    - sellia http 3000\n  variables:\n    SELLIA_API_KEY: $SELLIA_API_KEY\n</code></pre></p>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/authentication/sellia-auth-command/#see-also","level":2,"title":"See Also","text":"<ul> <li>API Keys - Understanding API key types and usage</li> <li>Server Auth - Server-side authentication</li> <li>Configuration - Full config file reference</li> </ul>","path":["User","Authentication","Auth Command"],"tags":[]},{"location":"user/cli-reference/","level":1,"title":"CLI Reference","text":"<p>Complete command-line interface reference for Sellia.</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#overview","level":2,"title":"Overview","text":"<p>Reference documentation for all Sellia CLI commands and options.</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#cli-commands","level":2,"title":"CLI Commands","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#sellia","level":3,"title":"sellia","text":"<p>Main CLI client for creating tunnels.</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#sellia-server","level":3,"title":"sellia-server","text":"<p>Tunnel server for hosting tunnels.</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#sellia-commands","level":2,"title":"sellia Commands","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#http","level":3,"title":"http","text":"<p>Create HTTP tunnel to local port.</p> <pre><code>sellia http &lt;port&gt; [options]\n</code></pre> <p>Arguments: - <code>port</code> - Local port to expose (required)</p> <p>Options:</p> Option Short Description Default <code>--subdomain NAME</code> <code>-s</code> Request specific subdomain Random <code>--auth USER:PASS</code> <code>-a</code> Enable basic auth protection None <code>--host HOST</code> <code>-H</code> Local host to forward to localhost <code>--api-key KEY</code> <code>-k</code> API key for authentication None <code>--inspector-port PORT</code> <code>-i PORT</code> Inspector UI port 4040 <code>--open</code> <code>-o</code> Open inspector in browser false <code>--no-inspector</code> Disable request inspector false <code>--server URL</code> Tunnel server URL From config or https://sellia.me <p>Examples:</p> <pre><code># Basic tunnel\nsellia http 3000\n\n# Custom subdomain\nsellia http 3000 --subdomain myapp\n\n# With authentication\nsellia http 3000 --auth admin:secret\n\n# Specify local host\nsellia http 3000 --host 127.0.0.1\n\n# Using hosted server\nsellia http 3000 --server https://sellia.me\n\n# Auto-open inspector\nsellia http 3000 --open\n\n# Custom inspector port\nsellia http 3000 --inspector-port 5000\n\n# Disable inspector\nsellia http 3000 --no-inspector\n\n# Full example\nsellia http 3000 \\\n  --subdomain myapp \\\n  --auth admin:secret123 \\\n  --server https://sellia.me \\\n  --api-key your-api-key \\\n  --open\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#start","level":3,"title":"start","text":"<p>Start tunnels from config file.</p> <pre><code>sellia start [options]\n</code></pre> <p>Options:</p> Option Description Default <code>--config PATH</code> Path to config file ./sellia.yml <p>Examples:</p> <pre><code># Start with default config\nsellia start\n\n# Start with specific config\nsellia start --config config/tunnels.yml\n\n# Start with environment-specific config\nsellia start --config sellia.prod.yml\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#auth","level":3,"title":"auth","text":"<p>Manage authentication.</p> <pre><code>sellia auth &lt;subcommand&gt; [options]\n</code></pre> <p>Subcommands:</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#auth-login","level":4,"title":"auth login","text":"<p>Store API key for server.</p> <pre><code>sellia auth login &lt;api-key&gt;\n</code></pre> <p>Example:</p> <pre><code>sellia auth login your-api-key-here\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#auth-logout","level":4,"title":"auth logout","text":"<p>Remove stored API key.</p> <pre><code>sellia auth logout\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#version","level":3,"title":"version","text":"<p>Show version information.</p> <pre><code>sellia version\n</code></pre> <p>Output:</p> <pre><code>sellia version 0.1.0\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#help","level":3,"title":"help","text":"<p>Show help information.</p> <pre><code>sellia help [command]\n</code></pre> <p>Examples:</p> <pre><code># General help\nsellia help\n\n# Command-specific help\nsellia help http\nsellia help start\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#sellia-server-commands","level":2,"title":"sellia-server Commands","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#server-options","level":3,"title":"Server Options","text":"<pre><code>sellia-server [options]\n</code></pre> <p>Options:</p> Option Description Default Environment Variable <code>--host HOST</code> Host to bind to 0.0.0.0 <code>SELLIA_HOST</code> <code>--port PORT</code> Port to listen on 3000 <code>SELLIA_PORT</code> <code>--domain DOMAIN</code> Base domain for subdomains Required <code>SELLIA_DOMAIN</code> <code>--require-auth</code> Require API key authentication false <code>SELLIA_REQUIRE_AUTH</code> <code>--master-key KEY</code> Master API key None <code>SELLIA_MASTER_KEY</code> <code>--https</code> Generate HTTPS URLs for tunnels false <code>SELLIA_USE_HTTPS</code> <code>--no-rate-limit</code> Disable rate limiting false <code>SELLIA_RATE_LIMITING</code> <p>Examples:</p> <pre><code># Basic server\nsellia-server --port 3000 --domain yourdomain.com\n\n# With authentication\nsellia-server \\\n  --port 3000 \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key your-master-key\n\n# Production server\nsellia-server \\\n  --host 0.0.0.0 \\\n  --port 3000 \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key $(openssl rand -hex 32) \\\n  --https\n\n# Development server\nLOG_LEVEL=debug sellia-server \\\n  --port 3000 \\\n  --domain localhost\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#client-variables","level":3,"title":"Client Variables","text":"<p>Variables for <code>sellia</code> CLI:</p> Variable Description Example <code>SELLIA_SERVER</code> Default tunnel server URL <code>https://sellia.me</code> <code>SELLIA_API_KEY</code> Default API key <code>your-api-key</code> <code>SELLIA_ADMIN_API_KEY</code> Admin API key for admin commands <code>sk_master_xyz</code>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#server-variables","level":3,"title":"Server Variables","text":"<p>Variables for <code>sellia-server</code>:</p> Variable Description Example <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains <code>yourdomain.com</code> <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>true</code>/<code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key <code>random-key</code> <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>true</code>/<code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code>/<code>false</code> <code>LOG_LEVEL</code> Set log level <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#configuration-files","level":2,"title":"Configuration Files","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#selliayml","level":3,"title":"sellia.yml","text":"<p>Example configuration file:</p> <pre><code># Server settings\nserver: https://sellia.me\napi_key: your-api-key\n\ninspector:\n  port: 4040\n  open: true\n\n# Tunnel definitions\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    local_host: localhost\n\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n\n  webhook:\n    port: 3000\n    subdomain: webhooks\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#exit-codes","level":2,"title":"Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Invalid usage 3 Network error 4 Authentication failed 5 Server unavailable","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#common-patterns","level":2,"title":"Common Patterns","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#webhook-development","level":3,"title":"Webhook Development","text":"<pre><code>sellia http 3000 \\\n  --subdomain webhooks \\\n  --open \\\n  --server https://sellia.me\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#api-development","level":3,"title":"API Development","text":"<pre><code>sellia http 8080 \\\n  --subdomain api \\\n  --auth api:secret123\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#client-demo","level":3,"title":"Client Demo","text":"<pre><code>sellia http 3000 \\\n  --subdomain demo \\\n  --auth client:preview456\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#multiple-services","level":3,"title":"Multiple Services","text":"<pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n  api:\n    port: 8080\n    subdomain: myapp-api\n  admin:\n    port: 3001\n    subdomain: myapp-admin\n    auth: admin:secret\n</code></pre> <pre><code>sellia start\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#tips-and-tricks","level":2,"title":"Tips and Tricks","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#aliases","level":3,"title":"Aliases","text":"<p>Create shell aliases for common commands:</p> <pre><code># ~/.bashrc or ~/.zshrc\nalias tunnel='sellia http'\nalias tunnel-dev='sellia http --subdomain dev'\nalias tunnel-prod='sellia http --server https://sellia.me'\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#auto-completion","level":3,"title":"Auto-Completion","text":"<p>Enable bash completion (coming soon):</p> <pre><code># ~/.bashrc\nsource &lt;(sellia completion bash)\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#quick-server","level":3,"title":"Quick Server","text":"<p>Quick development server:</p> <pre><code>LOG_LEVEL=debug sellia-server --port 3000 --domain localhost\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#generate-strong-keys","level":3,"title":"Generate Strong Keys","text":"<p>Generate secure authentication keys:</p> <pre><code># Master key\nopenssl rand -hex 32\n\n# Tunnel auth password\nopenssl rand -base64 16\n</code></pre>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#command-not-found","level":3,"title":"Command Not Found","text":"<p>Problem: <code>sellia: command not found</code></p> <p>Solutions: - Add to PATH: <code>export PATH=$PATH:./bin</code> - Install globally: <code>cp ./bin/sellia /usr/local/bin/</code> - Use full path: <code>./bin/sellia http 3000</code></p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<p>Problem: \"Port 3000 is already in use\"</p> <p>Solutions: - Use different port: <code>--port 3001</code> - Kill existing process: <code>kill $(lsof -ti :3000)</code> - Find and kill process: <code>lsof -i :3000</code></p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#authentication-failed","level":3,"title":"Authentication Failed","text":"<p>Problem: \"Authentication failed\"</p> <p>Solutions: - Verify API key: <code>--api-key your-key</code> - Check server requires auth - Verify master key on server</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#connection-refused","level":3,"title":"Connection Refused","text":"<p>Problem: \"Connection refused\"</p> <p>Solutions: - Verify server is running - Check server URL: <code>--server http://localhost:3000</code> - Check firewall rules - Verify network connectivity</p>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Getting Started - First tunnel setup</li> <li>Tunnels - Tunnel creation and management</li> <li>Configuration - Advanced configuration</li> </ul>","path":["User","Cli reference","CLI Reference"],"tags":[]},{"location":"user/cli-reference/sellia-admin/","level":1,"title":"<code>sellia admin</code> - Admin Commands","text":"<p>Administrative commands for managing reserved subdomains and API keys. Requires an admin API key.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia admin &lt;command&gt; [options]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#description","level":2,"title":"Description","text":"<p>Admin commands allow server administrators to manage: - Reserved subdomains (prevent users from claiming specific subdomains) - API keys (create, list, and revoke user and master keys)</p> <p>These commands require an admin API key with master privileges.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#authentication","level":2,"title":"Authentication","text":"<p>Admin commands require authentication. Provide your admin API key via:</p> <ol> <li> <p>Environment variable (recommended):    <pre><code>export SELLIA_ADMIN_API_KEY=sk_master_xyz\nsellia admin reserved list\n</code></pre></p> </li> <li> <p>Login first:    <pre><code>sellia auth login\n# Enter admin key when prompted\nsellia admin reserved list\n</code></pre></p> </li> </ol> <p>The admin API key must have master privileges to perform these operations.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#commands","level":2,"title":"Commands","text":"","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#reserved","level":3,"title":"<code>reserved</code>","text":"<p>Manage reserved subdomains.</p> <ul> <li><code>reserved list</code> - List all reserved subdomains</li> <li><code>reserved add</code> - Add a reserved subdomain</li> <li><code>reserved remove</code> - Remove a reserved subdomain</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#api-keys","level":3,"title":"<code>api-keys</code>","text":"<p>Manage API keys.</p> <ul> <li><code>api-keys list</code> - List all API keys</li> <li><code>api-keys create</code> - Create a new API key</li> <li><code>api-keys revoke</code> - Revoke an API key</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#common-options","level":2,"title":"Common Options","text":"","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#-server-url","level":3,"title":"<code>--server URL</code>","text":"<p>Specify the tunnel server URL (default: from config or <code>https://sellia.me</code>).</p> <p>Example: <pre><code>sellia admin reserved list --server https://tunnel.example.com\n</code></pre></p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#reserved-subdomain-commands","level":2,"title":"Reserved Subdomain Commands","text":"","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#sellia-admin-reserved-list","level":3,"title":"<code>sellia admin reserved list</code>","text":"<p>List all reserved subdomains on the server.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis_1","level":4,"title":"Synopsis","text":"<pre><code>sellia admin reserved list [--server URL]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#options","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage","level":4,"title":"Usage","text":"<pre><code>sellia admin reserved list\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#output","level":4,"title":"Output","text":"<pre><code>Reserved Subdomains: (3)\n\n  admin       System reserved subdomain                  (default)\n  www         Standard web subdomain                     (default)\n  myapp       Reserved for customer XYZ\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#exit-codes","level":4,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Authentication failed or server error</li> <li><code>503</code> - Database not available on server</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#sellia-admin-reserved-add","level":3,"title":"<code>sellia admin reserved add</code>","text":"<p>Add a new reserved subdomain to prevent users from claiming it.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis_2","level":4,"title":"Synopsis","text":"<pre><code>sellia admin reserved add &lt;subdomain&gt; [--reason REASON] [--server URL]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#arguments","level":4,"title":"Arguments","text":"<ul> <li><code>&lt;subdomain&gt;</code> - Subdomain name to reserve (without domain)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#options_1","level":4,"title":"Options","text":"<ul> <li><code>--reason REASON</code> - Optional reason for the reservation</li> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage_1","level":4,"title":"Usage","text":"<pre><code># Basic reservation\nsellia admin reserved add myapp\n\n# With reason\nsellia admin reserved add myapp --reason \"Reserved for customer XYZ\"\n\n# With custom server\nsellia admin reserved add admin --server https://tunnel.example.com\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#output_1","level":4,"title":"Output","text":"<pre><code>✓ Reserved subdomain 'myapp'\n  Reason: Reserved for customer XYZ\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#errors","level":4,"title":"Errors","text":"<pre><code>Error: Subdomain 'myapp' is already reserved\n</code></pre> <pre><code>Error: Invalid request\n</code></pre> <pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#sellia-admin-reserved-remove","level":3,"title":"<code>sellia admin reserved remove</code>","text":"<p>Remove a reserved subdomain, making it available for users.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis_3","level":4,"title":"Synopsis","text":"<pre><code>sellia admin reserved remove &lt;subdomain&gt; [--server URL]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#arguments_1","level":4,"title":"Arguments","text":"<ul> <li><code>&lt;subdomain&gt;</code> - Subdomain name to unreserve</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#options_2","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage_2","level":4,"title":"Usage","text":"<pre><code>sellia admin reserved remove myapp\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#output_2","level":4,"title":"Output","text":"<pre><code>✓ Removed reserved subdomain 'myapp'\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#errors_1","level":4,"title":"Errors","text":"<pre><code>Error: Cannot remove default reserved subdomain\n</code></pre> <pre><code>Error: Reserved subdomain 'myapp' not found\n</code></pre> <pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre> <p>Note: Default reserved subdomains (like <code>admin</code>, <code>www</code>) cannot be removed.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#api-key-commands","level":2,"title":"API Key Commands","text":"","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#sellia-admin-api-keys-list","level":3,"title":"<code>sellia admin api-keys list</code>","text":"<p>List all API keys in the system.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis_4","level":4,"title":"Synopsis","text":"<pre><code>sellia admin api-keys list [--server URL]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#options_3","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage_3","level":4,"title":"Usage","text":"<pre><code>sellia admin api-keys list\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#output_3","level":4,"title":"Output","text":"<pre><code>API Keys: (3)\n\n  key_abc  Production Admin      (master)\n    Created: 2025-01-15 10:30\n\n  key_def  Development Team\n    Created: 2025-01-20 14:22\n\n  key_ghi  Test Key              (revoked)\n    Created: 2025-01-10 09:15\n</code></pre> <ul> <li><code>(master)</code> - Key has admin privileges (displayed in red/bold)</li> <li><code>(revoked)</code> - Key has been revoked and is inactive (displayed in gray)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#exit-codes_1","level":4,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Authentication failed or server error</li> <li><code>503</code> - Database not available on server</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#sellia-admin-api-keys-create","level":3,"title":"<code>sellia admin api-keys create</code>","text":"<p>Create a new API key.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis_5","level":4,"title":"Synopsis","text":"<pre><code>sellia admin api-keys create [--name NAME] [--master] [--server URL]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#options_4","level":4,"title":"Options","text":"<ul> <li><code>--name NAME</code> - Friendly name for the key (optional)</li> <li><code>--master</code> - Create a master key with admin privileges</li> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage_4","level":4,"title":"Usage","text":"<pre><code># Create regular user key\nsellia admin api-keys create\n\n# Create named key\nsellia admin api-keys create --name \"Development Team\"\n\n# Create master admin key\nsellia admin api-keys create --master --name \"Admin Key\"\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#output_4","level":4,"title":"Output","text":"<pre><code>✓ API key created\n\n  Key: key_xyz123abcdef456789...\n  Prefix: key_xyz\n  Name: Development Team\n\nSave this key now - it won't be shown again!\n</code></pre> <p>For master keys, the output includes:</p> <pre><code>✓ API key created\n\n  Key: key_xyz123abcdef456789...\n  Prefix: key_xyz\n  Name: Admin Key\n  Type: Master (admin access)\n\nSave this key now - it won't be shown again!\n</code></pre> <p>Important: The full API key is only shown once. Save it securely.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#key-types","level":4,"title":"Key Types","text":"<ul> <li>Regular key - Can create tunnels, cannot perform admin operations</li> <li>Master key (<code>--master</code>) - Full admin access to reserved subdomains and API key management</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#errors_2","level":4,"title":"Errors","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#sellia-admin-api-keys-revoke","level":3,"title":"<code>sellia admin api-keys revoke</code>","text":"<p>Revoke an API key, making it inactive.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#synopsis_6","level":4,"title":"Synopsis","text":"<pre><code>sellia admin api-keys revoke &lt;key-prefix&gt; [--server URL]\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#arguments_2","level":4,"title":"Arguments","text":"<ul> <li><code>&lt;key-prefix&gt;</code> - Key prefix to revoke (e.g., <code>key_abc</code>)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#options_5","level":4,"title":"Options","text":"<ul> <li><code>--server URL</code> - Server URL (default: from config)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage_5","level":4,"title":"Usage","text":"<pre><code>sellia admin api-keys revoke key_abc\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#output_5","level":4,"title":"Output","text":"<pre><code>✓ API key 'key_abc' revoked\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#errors_3","level":4,"title":"Errors","text":"<pre><code>Error: API key 'key_abc' not found\n</code></pre> <pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <pre><code>Error: Database not available on server\n</code></pre> <p>Note: Revoked keys are marked as inactive but remain in the database for audit purposes.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#reserve-subdomains-for-a-customer","level":3,"title":"Reserve subdomains for a customer","text":"<pre><code># Reserve main subdomain\nsellia admin reserved add myapp --reason \"Reserved for Acme Corp\"\n\n# Reserve related subdomains\nsellia admin reserved add myapp-api --reason \"API server for Acme Corp\"\nsellia admin reserved add myapp-admin --reason \"Admin panel for Acme Corp\"\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#create-api-keys-for-different-teams","level":3,"title":"Create API keys for different teams","text":"<pre><code># Development team key\nsellia admin api-keys create --name \"Development Team\"\n\n# Staging key\nsellia admin api-keys create --name \"Staging Environment\"\n\n# Production master key\nsellia admin api-keys create --master --name \"Production Admin\"\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#audit-api-keys","level":3,"title":"Audit API keys","text":"<pre><code>$ sellia admin api-keys list\nAPI Keys: (5)\n\n  key_abc  Production Admin      (master)\n    Created: 2025-01-15 10:30\n\n  key_def  Development Team\n    Created: 2025-01-20 14:22\n\n  key_ghi  Staging Environment\n    Created: 2025-01-22 09:45\n\n  key_jkl  Old Key               (revoked)\n    Created: 2025-01-10 09:15\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#clean-up-old-keys","level":3,"title":"Clean up old keys","text":"<pre><code># List keys to find old ones\nsellia admin api-keys list\n\n# Revoke compromised or expired keys\nsellia admin api-keys revoke key_old\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#managing-multiple-servers","level":2,"title":"Managing Multiple Servers","text":"<p>If you manage multiple tunnel servers, use <code>--server</code>:</p> <pre><code># Production server\nexport SELLIA_ADMIN_API_KEY=prod_master_key\nsellia admin reserved list --server https://sellia.me\n\n# Staging server\nsellia admin reserved list --server https://staging.sellia.me\n\n# Development server\nsellia admin reserved list --server http://localhost:8080\n</code></pre>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#exit-codes_2","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Command completed successfully</li> <li><code>1</code> - Error (authentication, invalid input, server error)</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#common-error-messages","level":2,"title":"Common Error Messages","text":"","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#authentication-errors","level":3,"title":"Authentication Errors","text":"<pre><code>Error: API key required\n\nSet it with:\n  SELLIA_ADMIN_API_KEY=your-key sellia admin ...\n  sellia auth login\n</code></pre> <p>Solution: Set the <code>SELLIA_ADMIN_API_KEY</code> environment variable or run <code>sellia auth login</code> with an admin key.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#database-errors","level":3,"title":"Database Errors","text":"<pre><code>Error: Database not available on server\n</code></pre> <p>Solution: The server's database is not configured or available. Contact your server administrator.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#permission-errors","level":3,"title":"Permission Errors","text":"<pre><code>Error: Unauthorized: Admin API key required\n</code></pre> <p>Solution: Your API key doesn't have master (admin) privileges. Use a master key for admin operations.</p>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-admin/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia auth</code> - Manage API key authentication</li> <li><code>sellia http</code> - Create tunnels (regular user operation)</li> <li><code>sellia start</code> - Start multiple tunnels from config</li> </ul>","path":["User","Cli reference","sellia admin - Admin Commands"],"tags":[]},{"location":"user/cli-reference/sellia-auth/","level":1,"title":"<code>sellia auth</code> - Manage Authentication","text":"<p>Manage Sellia API key authentication.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia auth &lt;command&gt;\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#description","level":2,"title":"Description","text":"<p>The <code>auth</code> command manages your Sellia API key for tunnel server authentication. This allows you to authenticate once and have all subsequent commands use your saved credentials.</p> <p>Authentication is required for: - Creating tunnels with reserved subdomains - Accessing admin features - Using private tunnel servers</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#commands","level":2,"title":"Commands","text":"","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#login","level":3,"title":"<code>login</code>","text":"<p>Save API key for authentication.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#logout","level":3,"title":"<code>logout</code>","text":"<p>Remove saved API key.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#status","level":3,"title":"<code>status</code>","text":"<p>Show current authentication status.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#command-details","level":2,"title":"Command Details","text":"","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#sellia-auth-login","level":3,"title":"<code>sellia auth login</code>","text":"<p>Prompts for and saves your API key to the configuration file.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#usage","level":4,"title":"Usage","text":"<pre><code>sellia auth login\n</code></pre> <p>The command will prompt:</p> <pre><code>API Key: _\n</code></pre> <p>Enter your API key and press Enter. The key is saved to <code>~/.config/sellia/sellia.yml</code>.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#configuration-file","level":4,"title":"Configuration File","text":"<p>After login, your config file contains:</p> <pre><code>api_key: key_abc123def456...\nserver: https://sellia.me\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#security","level":4,"title":"Security","text":"<ul> <li>The API key is stored in plain text in <code>~/.config/sellia/sellia.yml</code></li> <li>File permissions depend on your system's umask</li> <li>Ensure your config directory is appropriately secured</li> </ul>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#output","level":4,"title":"Output","text":"<pre><code>✓ API key saved to /home/user/.config/sellia/sellia.yml\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#error","level":4,"title":"Error","text":"<p>If no API key is provided:</p> <pre><code>Error: No API key provided\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#sellia-auth-logout","level":3,"title":"<code>sellia auth logout</code>","text":"<p>Removes the saved API key from your configuration.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#usage_1","level":4,"title":"Usage","text":"<pre><code>sellia auth logout\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#behavior","level":4,"title":"Behavior","text":"<ul> <li>Opens your config file and removes the <code>api_key</code> field</li> <li>If the config file becomes empty or invalid, it's deleted entirely</li> <li>Other configuration (server, tunnels, etc.) is preserved</li> </ul>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#output_1","level":4,"title":"Output","text":"<p>When logged in:</p> <pre><code>✓ Logged out (API key removed)\n</code></pre> <p>When not logged in:</p> <pre><code>Not logged in\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#sellia-auth-status","level":3,"title":"<code>sellia auth status</code>","text":"<p>Display your current authentication status and masked API key.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#usage_2","level":4,"title":"Usage","text":"<pre><code>sellia auth status\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#output-when-authenticated","level":4,"title":"Output When Authenticated","text":"<pre><code>Status: Logged in\nServer: https://sellia.me\nAPI Key: sk_l...ef45\n</code></pre> <p>The API key is masked for security - if the key is longer than 8 characters, only the first 4 and last 4 characters are shown. Otherwise, it shows <code>****</code>.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#output-when-not-authenticated","level":4,"title":"Output When Not Authenticated","text":"<pre><code>Status: Not logged in\nServer: https://sellia.me\n\nRun 'sellia auth login' to authenticate\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#configuration-file-location","level":2,"title":"Configuration File Location","text":"<p>The auth command stores credentials in:</p> <pre><code>~/.config/sellia/sellia.yml\n</code></pre> <p>This file is also used for other configuration settings.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#login-for-the-first-time","level":3,"title":"Login for the first time","text":"<pre><code>$ sellia auth login\nAPI Key: key_abc123def456...\n✓ API key saved to /home/user/.config/sellia/sellia.yml\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#check-authentication-status","level":3,"title":"Check authentication status","text":"<pre><code>$ sellia auth status\nStatus: Logged in\nServer: https://sellia.me\nAPI Key: sk_l...ef45\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#logout-and-clear-credentials","level":3,"title":"Logout and clear credentials","text":"<pre><code>$ sellia auth logout\n✓ Logged out (API key removed)\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#login-and-use-tunnel","level":3,"title":"Login and use tunnel","text":"<pre><code># Authenticate once\n$ sellia auth login\nAPI Key: ********\n✓ API key saved\n\n# Now all commands use the saved key\n$ sellia http 3000 --subdomain myapp\n# No need to specify --api-key\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#alternative-authentication-methods","level":2,"title":"Alternative Authentication Methods","text":"<p>You don't have to use <code>sellia auth login</code>. You can also:</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#1-use-api-key-flag","level":3,"title":"1. Use <code>--api-key</code> flag","text":"<pre><code>sellia http 3000 --api-key key_abc123\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#2-use-environment-variable","level":3,"title":"2. Use environment variable","text":"<pre><code>export SELLIA_API_KEY=key_abc123\nsellia http 3000\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#3-add-to-config-file-manually","level":3,"title":"3. Add to config file manually","text":"<p>Edit <code>~/.config/sellia/sellia.yml</code>:</p> <pre><code>api_key: key_abc123\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#admin-api-keys","level":2,"title":"Admin API Keys","text":"<p>Some admin commands require an admin API key:</p> <pre><code>SELLIA_ADMIN_API_KEY=sk_master_xyz sellia admin reserved list\n</code></pre> <p>The <code>sellia auth login</code> command saves the key to the regular <code>api_key</code> field, which works for both regular and admin operations if the key has admin privileges.</p>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#integration-with-other-commands","level":2,"title":"Integration with Other Commands","text":"<p>Once authenticated, all commands automatically use your saved API key:</p> <pre><code># Login once\n$ sellia auth login\n\n# Now all commands work without --api-key\n$ sellia http 3000\n$ sellia start\n$ sellia admin reserved list\n</code></pre>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Command completed successfully</li> <li><code>1</code> - Error occurred (no API key provided, etc.)</li> </ul>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-auth/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia http</code> - Create tunnels with automatic authentication</li> <li><code>sellia start</code> - Start tunnels from config</li> <li><code>sellia admin</code> - Admin commands requiring authentication</li> </ul>","path":["User","Cli reference","sellia auth - Manage Authentication"],"tags":[]},{"location":"user/cli-reference/sellia-http/","level":1,"title":"<code>sellia http</code> - Create HTTP Tunnel","text":"<p>Create an HTTP tunnel to a local port with optional request inspector.</p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia http &lt;port&gt; [options]\n</code></pre>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#description","level":2,"title":"Description","text":"<p>Creates a secure HTTP tunnel from a public URL to your local development server. Includes a built-in request inspector for debugging HTTP traffic.</p> <p>The tunnel forwards all incoming HTTP requests to your local port and displays real-time request information in the terminal.</p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#arguments","level":2,"title":"Arguments","text":"","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#port","level":3,"title":"<code>&lt;port&gt;</code>","text":"<p>Local port number to forward to (required).</p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#options","level":2,"title":"Options","text":"","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-s-subdomain-name","level":3,"title":"<code>-s, --subdomain NAME</code>","text":"<p>Request a specific subdomain for the tunnel URL.</p> <p>If the subdomain is already in use or reserved, the server will assign a random subdomain instead.</p> <p>Example: <pre><code>sellia http 3000 --subdomain myapp\n# Creates: https://myapp.sellia.me\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-a-auth-userpass","level":3,"title":"<code>-a, --auth USER:PASS</code>","text":"<p>Enable basic authentication for the tunnel.</p> <p>Protects your tunnel with a username and password. Users will be prompted to authenticate before accessing.</p> <p>Example: <pre><code>sellia http 3000 --auth admin:secret123\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-h-host-host","level":3,"title":"<code>-H, --host HOST</code>","text":"<p>Local host to connect to (default: <code>localhost</code>).</p> <p>Useful when your development server is running on a different interface or Docker container.</p> <p>Examples: <pre><code># Connect to Docker container\nsellia http 3000 --host host.docker.internal\n\n# Connect to specific interface\nsellia http 8080 --host 192.168.1.100\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-server-url","level":3,"title":"<code>--server URL</code>","text":"<p>Tunnel server URL (default: from config or <code>https://sellia.me</code>).</p> <p>Override the default tunnel server. Useful for self-hosted or development servers.</p> <p>Example: <pre><code>sellia http 3000 --server https://tunnel.mycompany.com\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-k-api-key-key","level":3,"title":"<code>-k, --api-key KEY</code>","text":"<p>API key for authentication.</p> <p>Overrides the API key from config or environment. Required if the server requires authentication.</p> <p>Example: <pre><code>sellia http 3000 --api-key key_abc123\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-i-inspector-port-port","level":3,"title":"<code>-i, --inspector-port PORT</code>","text":"<p>Inspector UI port (default: <code>4040</code>).</p> <p>Change the port for the built-in request inspector web interface.</p> <p>Example: <pre><code>sellia http 3000 --inspector-port 5000\n# Access inspector at http://127.0.0.1:5000\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-o-open","level":3,"title":"<code>-o, --open</code>","text":"<p>Open inspector in browser automatically when tunnel connects.</p> <p>Automatically opens the request inspector in your default browser when the tunnel is established.</p> <p>Example: <pre><code>sellia http 3000 --open\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-no-inspector","level":3,"title":"<code>--no-inspector</code>","text":"<p>Disable the request inspector entirely.</p> <p>Disables both the inspector UI and request logging. Useful for production use or when you don't need debugging.</p> <p>Example: <pre><code>sellia http 3000 --no-inspector\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#-h-help","level":3,"title":"<code>-h, --help</code>","text":"<p>Show help message and exit.</p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#basic-tunnel-to-localhost3000","level":3,"title":"Basic tunnel to localhost:3000","text":"<pre><code>sellia http 3000\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nForwarding to localhost:3000\n\nPublic URL: https://random-name.sellia.me -&gt; localhost:3000\n\nInspector:  http://127.0.0.1:4040\n\nPress Ctrl+C to stop\n</code></pre></p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#tunnel-with-custom-subdomain","level":3,"title":"Tunnel with custom subdomain","text":"<pre><code>sellia http 3000 --subdomain myapp\n</code></pre>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#tunnel-with-basic-authentication","level":3,"title":"Tunnel with basic authentication","text":"<pre><code>sellia http 3000 --auth admin:mypassword\n</code></pre>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#tunnel-to-docker-container","level":3,"title":"Tunnel to Docker container","text":"<pre><code>sellia http 3000 --host host.docker.internal --subdomain dev\n</code></pre>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#tunnel-without-inspector","level":3,"title":"Tunnel without inspector","text":"<pre><code>sellia http 3000 --no-inspector\n</code></pre>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#tunnel-with-custom-server","level":3,"title":"Tunnel with custom server","text":"<pre><code>sellia http 3000 --server https://tunnel.example.com\n</code></pre>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#inspector-features","level":2,"title":"Inspector Features","text":"<p>When enabled (default), the request inspector provides:</p> <ul> <li>Real-time request logging in terminal</li> <li>Web interface at <code>http://127.0.0.1:4040</code></li> <li>Request/response headers and bodies</li> <li>WebSocket connection monitoring</li> <li>Request history and search</li> </ul>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#terminal-output","level":2,"title":"Terminal Output","text":"<p>The command displays real-time information about incoming requests:</p> <pre><code>[14:32:15] GET /api/users\n[14:32:16] POST /api/login\n[14:32:18] WS /websocket\n</code></pre> <p>Colors indicate HTTP methods: - <code>GET</code> - Green - <code>POST</code> - Blue - <code>PUT</code> - Yellow - <code>PATCH</code> - Yellow - <code>DELETE</code> - Red - <code>WS</code> (WebSocket) - Magenta</p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#configuration","level":2,"title":"Configuration","text":"<p>The <code>http</code> command respects configuration from:</p> <ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code></li> </ol> <p>Settings can be overridden by command-line flags or environment variables: - <code>SELLIA_SERVER</code> - Default tunnel server - <code>SELLIA_API_KEY</code> - Default API key</p>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Successful termination (via Ctrl+C)</li> <li><code>1</code> - Error occurred</li> </ul>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-http/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia start</code> - Start multiple tunnels from config file</li> <li><code>sellia auth</code> - Manage authentication</li> <li><code>sellia admin</code> - Admin commands for reserved subdomains and API keys</li> </ul>","path":["User","Cli reference","sellia http - Create HTTP Tunnel"],"tags":[]},{"location":"user/cli-reference/sellia-start/","level":1,"title":"<code>sellia start</code> - Start Tunnels from Config","text":"<p>Start multiple tunnels from a configuration file.</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia start [options]\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#description","level":2,"title":"Description","text":"<p>Starts multiple tunnels defined in a <code>sellia.yml</code> configuration file. This is the recommended way to manage multiple development tunnels simultaneously.</p> <p>All tunnels run in parallel and display unified request logging. Each tunnel can have different ports, subdomains, authentication, and routing rules.</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#options","level":2,"title":"Options","text":"","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#-c-config-file","level":3,"title":"<code>-c, --config FILE</code>","text":"<p>Config file path (default: <code>./sellia.yml</code>).</p> <p>Load tunnel definitions from a custom configuration file instead of the default <code>./sellia.yml</code>.</p> <p>Example: <pre><code>sellia start --config /path/to/tunnels.yml\n</code></pre></p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#-h-help","level":3,"title":"<code>-h, --help</code>","text":"<p>Show help message and exit.</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#configuration-file","level":2,"title":"Configuration File","text":"<p>The <code>sellia.yml</code> file defines multiple tunnels with individual settings:</p> <pre><code>server: https://sellia.me\napi_key: your-api-key\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    auth: user:pass\n\n  api:\n    port: 8080\n    subdomain: myapp-api\n    local_host: localhost\n\n  admin:\n    port: 9000\n    subdomain: myapp-admin\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#tunnel-configuration-options","level":3,"title":"Tunnel Configuration Options","text":"<p>Each tunnel in the <code>tunnels</code> map supports these options:</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#port-required","level":4,"title":"<code>port</code> (required)","text":"<p>Local port number to forward to.</p> <p>Type: <code>Integer</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#subdomain-optional","level":4,"title":"<code>subdomain</code> (optional)","text":"<p>Requested subdomain for the tunnel URL.</p> <p>Type: <code>String</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#auth-optional","level":4,"title":"<code>auth</code> (optional)","text":"<p>Basic authentication in <code>username:password</code> format.</p> <p>Type: <code>String</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n    auth: admin:secret123\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#local_host-optional","level":4,"title":"<code>local_host</code> (optional)","text":"<p>Local host to connect to (default: <code>localhost</code>).</p> <p>Type: <code>String</code></p> <pre><code>tunnels:\n  web:\n    port: 3000\n    local_host: host.docker.internal\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#routes-optional","level":4,"title":"<code>routes</code> (optional)","text":"<p>Array of route mappings for path-based routing to different ports.</p> <p>Type: Array of objects with <code>path</code>, <code>port</code>, and optional <code>host</code></p> <pre><code>tunnels:\n  app:\n    port: 3000\n    routes:\n      - path: /api\n        port: 8080\n        host: localhost\n      - path: /ws\n        port: 9000\n      - path: /static\n        port: 3001\n</code></pre> <p>Routes allow you to forward different paths to different local services: - Primary port (3000) handles all unmatched requests - <code>/api/*</code> → localhost:8080 - <code>/ws/*</code> → localhost:9000 - <code>/static/*</code> → localhost:3001</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#global-configuration-options","level":3,"title":"Global Configuration Options","text":"","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#server","level":4,"title":"<code>server</code>","text":"<p>Default tunnel server URL.</p> <p>Type: <code>String</code> (default: <code>https://sellia.me</code>)</p> <pre><code>server: https://sellia.me\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#api_key","level":4,"title":"<code>api_key</code>","text":"<p>API key for authentication.</p> <p>Type: <code>String</code></p> <pre><code>api_key: key_abc123\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#configuration-loading-order","level":2,"title":"Configuration Loading Order","text":"<p>Configuration is loaded from multiple paths and merged (later paths override earlier ones):</p> <ol> <li><code>~/.config/sellia/sellia.yml</code> (system-wide user config)</li> <li><code>~/.sellia.yml</code> (user home directory)</li> <li><code>./sellia.yml</code> (current directory)</li> <li>File specified with <code>--config</code> flag</li> </ol> <p>Environment variables override all file-based settings: - <code>SELLIA_SERVER</code> - <code>SELLIA_API_KEY</code> - <code>SELLIA_DB_PATH</code> - <code>SELLIA_NO_DB</code></p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#start-with-default-config-file","level":3,"title":"Start with default config file","text":"<pre><code>sellia start\n</code></pre> <p>Uses <code>./sellia.yml</code> in the current directory.</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#start-with-custom-config-file","level":3,"title":"Start with custom config file","text":"<pre><code>sellia start --config /path/to/production-tunnels.yml\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#example-full-stack-application","level":3,"title":"Example: Full-Stack Application","text":"<pre><code># sellia.yml\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  frontend:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 4000\n      - path: /graphql\n        port: 4000\n\n  admin:\n    port: 3001\n    subdomain: myapp-admin\n\n  websocket:\n    port: 4001\n    subdomain: myapp-ws\n</code></pre> <pre><code>sellia start\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nStarting 3 tunnel(s)...\n\n[frontend] https://myapp.sellia.me\n  /api        -&gt; localhost:4000\n  /graphql    -&gt; localhost:4000\n  /*          -&gt; localhost:3000 (fallback)\n\n[admin] https://myapp-admin.sellia.me -&gt; localhost:3001\n\n[websocket] https://myapp-ws.sellia.me -&gt; localhost:4001\n\nPress Ctrl+C to stop all tunnels\n</code></pre></p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#example-microservices-with-docker","level":3,"title":"Example: Microservices with Docker","text":"<pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n    local_host: host.docker.internal\n    subdomain: app\n    routes:\n      - path: /api/users\n        port: 8001\n        host: host.docker.internal\n      - path: /api/orders\n        port: 8002\n        host: host.docker.internal\n      - path: /api\n        port: 8000\n        host: host.docker.internal\n\n  worker:\n    port: 9000\n    local_host: host.docker.internal\n    subdomain: worker\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#terminal-output","level":2,"title":"Terminal Output","text":"<p>Each tunnel shows requests with its name:</p> <pre><code>[14:32:15] [frontend] GET /api/users\n[14:32:16] [frontend] POST /api/orders\n[14:32:18] [websocket] WS /socket\n[14:32:20] [admin] GET /dashboard\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#error-handling","level":2,"title":"Error Handling","text":"<p>If no tunnels are defined in the config:</p> <pre><code>sellia start\n</code></pre> <p>Output: <pre><code>Error: No tunnels defined in config\n\nCreate a sellia.yml with tunnel definitions:\n\n  tunnels:\n    web:\n      port: 3000\n      subdomain: myapp\n    api:\n      port: 8080\n</code></pre></p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#graceful-shutdown","level":2,"title":"Graceful Shutdown","text":"<p>Press <code>Ctrl+C</code> to gracefully shut down all tunnels:</p> <pre><code>^C\nShutting down...\n</code></pre> <p>The command waits for all tunnels to stop before exiting.</p>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#environment-variables","level":2,"title":"Environment Variables","text":"<p>You can use environment variables in your config file:</p> <pre><code>api_key: ${SELLIA_API_KEY}\nserver: ${TUNNEL_SERVER:-https://sellia.me}\n</code></pre> <p>Then run:</p> <pre><code>export SELLIA_API_KEY=key_abc123\nsellia start\n</code></pre>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Successful termination</li> <li><code>1</code> - Error occurred (missing config, no tunnels defined, etc.)</li> </ul>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-start/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia http</code> - Create a single HTTP tunnel</li> <li><code>sellia auth</code> - Manage API key authentication</li> <li><code>sellia admin</code> - Admin commands for reserved subdomains</li> </ul>","path":["User","Cli reference","sellia start - Start Tunnels from Config"],"tags":[]},{"location":"user/cli-reference/sellia-update/","level":1,"title":"<code>sellia update</code> - Update to Latest Version","text":"<p>Update the Sellia CLI to the latest version or a specific version.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia update [options]\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#description","level":2,"title":"Description","text":"<p>Checks for updates and installs the latest version of Sellia. Can also check for updates without installing, force reinstall, or update to a specific version.</p> <p>The update process downloads the latest release from GitHub and replaces the current binary.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#options","level":2,"title":"Options","text":"","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#-c-check","level":3,"title":"<code>-c, --check</code>","text":"<p>Check for updates without installing.</p> <p>Displays the currently installed version and the latest available version, but doesn't perform any installation.</p> <p>Example: <pre><code>$ sellia update --check\nCurrent version: 1.0.0\nLatest version: 1.2.0\nA new version is available!\nRun 'sellia update' to install\n</code></pre></p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#-f-force","level":3,"title":"<code>-f, --force</code>","text":"<p>Force reinstall even if already up-to-date.</p> <p>Reinstalls the current version or downloads again if the latest version is already installed. Useful for troubleshooting or if the previous download was corrupted.</p> <p>Example: <pre><code>sellia update --force\n</code></pre></p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#-v-version-ver","level":3,"title":"<code>-v, --version VER</code>","text":"<p>Update to a specific version.</p> <p>Instead of updating to the latest release, install a specific version. Useful for downgrading or testing.</p> <p>Example: <pre><code># Install specific version\nsellia update --version 1.1.0\n\n# Downgrade to older version\nsellia update --version 1.0.0\n</code></pre></p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#-h-help","level":3,"title":"<code>-h, --help</code>","text":"<p>Show help message and exit.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#usage-examples","level":2,"title":"Usage Examples","text":"","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#check-for-updates-no-install","level":3,"title":"Check for updates (no install)","text":"<pre><code>$ sellia update --check\nCurrent: v1.0.0\nLatest:  v1.2.0\n\nRun 'sellia update' to install v1.2.0\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#update-to-latest-version","level":3,"title":"Update to latest version","text":"<pre><code>$ sellia update\nCurrent: v1.0.0\nLatest:  v1.2.0\n\nUpdating... Done!\n\nUpdated to v1.2.0\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#update-to-specific-version","level":3,"title":"Update to specific version","text":"<pre><code>$ sellia update --version 1.1.0\nCurrent: v1.0.0\nLatest:  v1.1.0\n\nUpdating... Done!\n\nUpdated to v1.1.0\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#force-reinstall-current-version","level":3,"title":"Force reinstall current version","text":"<pre><code>$ sellia update --force\nCurrent: v1.2.0\nLatest:  v1.2.0\n\nUpdating... Done!\n\nUpdated to v1.2.0\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#check-with-no-updates-available","level":3,"title":"Check with no updates available","text":"<pre><code>$ sellia update --check\nCurrent: v1.2.0\nLatest:  v1.2.0\n\nAlready up to date (v1.2.0)\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#update-process","level":2,"title":"Update Process","text":"<p>The update command:</p> <ol> <li>Checks your current version</li> <li>Queries GitHub releases for the latest version</li> <li>Downloads the appropriate binary for your OS and architecture</li> <li>Replaces the current binary</li> <li>Verifies the installation</li> </ol>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#supported-platforms","level":3,"title":"Supported Platforms","text":"<p>Updates are available for: - Linux (x86_64, aarch64) - macOS (x86_64, aarch64/Apple Silicon) - Windows (x86_64)</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#binary-location","level":3,"title":"Binary Location","text":"<p>The update command replaces the binary at its current location. Common locations:</p> <ul> <li>Linux: <code>/usr/local/bin/sellia</code>, <code>~/.local/bin/sellia</code></li> <li>macOS: <code>/usr/local/bin/sellia</code>, <code>/opt/homebrew/bin/sellia</code></li> <li>Windows: <code>C:\\Users\\&lt;user&gt;\\.sellia\\bin\\sellia.exe</code></li> </ul>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#download-progress","level":2,"title":"Download Progress","text":"<p>The update command downloads the binary without showing detailed progress. It displays \"Updating...\" and shows \"Done!\" when complete.</p> <pre><code>$ sellia update\nCurrent: v1.0.0\nLatest:  v1.2.0\n\nUpdating... Done!\n\nUpdated to v1.2.0\n</code></pre>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Update successful or already up to date</li> <li><code>1</code> - Update failed (network error, permission error, etc.)</li> </ul>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#error-handling","level":2,"title":"Error Handling","text":"","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#network-error","level":3,"title":"Network Error","text":"<pre><code>Error: Failed to fetch release information\n</code></pre> <p>Solution: Check your internet connection and try again.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#permission-error","level":3,"title":"Permission Error","text":"<pre><code>Error: Cannot determine executable path\n</code></pre> <p>or</p> <pre><code>Error: [Errno 13] Permission denied\n</code></pre> <p>Solution: Ensure you have write permissions to the binary location or run with appropriate permissions.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#platform-not-supported","level":3,"title":"Platform Not Supported","text":"<pre><code>Error: No binary available for this platform\nPlatform: unknown-unknown\n</code></pre> <p>Solution: Install from source manually.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#update-check-behavior","level":2,"title":"Update Check Behavior","text":"<p>The command checks for updates by:</p> <ol> <li>Reading the current version from the binary</li> <li>Fetching the latest release information from GitHub</li> <li>Comparing version numbers</li> <li>Downloading and installing if newer</li> </ol> <p>No automatic update checks are performed. Updates are only run when you explicitly run <code>sellia update</code>.</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#version-format","level":2,"title":"Version Format","text":"<p>Sellia uses semantic versioning: <code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR - Breaking changes</li> <li>MINOR - New features, backwards compatible</li> <li>PATCH - Bug fixes</li> </ul> <p>Example versions: - <code>1.0.0</code> - Initial release - <code>1.0.1</code> - Bug fix - <code>1.1.0</code> - New feature - <code>2.0.0</code> - Breaking changes</p>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia version</code> - Show current version</li> <li><code>sellia help</code> - Show general help</li> </ul>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-update/#see-also","level":2,"title":"See Also","text":"<ul> <li>GitHub Releases - View release notes and download manually</li> <li>Installation Guide - Manual installation instructions</li> </ul>","path":["User","Cli reference","sellia update - Update to Latest Version"],"tags":[]},{"location":"user/cli-reference/sellia-version/","level":1,"title":"<code>sellia version</code> - Show Version Information","text":"<p>Display the current version of Sellia.</p>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#synopsis","level":2,"title":"Synopsis","text":"<pre><code>sellia version\nsellia -v\nsellia --version\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#description","level":2,"title":"Description","text":"<p>Displays the currently installed version of Sellia. Useful for: - Checking if you need to update - Providing version information in bug reports - Verifying installation</p>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#usage","level":2,"title":"Usage","text":"","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#using-the-version-command","level":3,"title":"Using the <code>version</code> command","text":"<pre><code>$ sellia version\nSellia v1.0.0\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#using-the-short-flag","level":3,"title":"Using the short flag","text":"<pre><code>$ sellia -v\nSellia v1.0.0\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#using-the-long-flag","level":3,"title":"Using the long flag","text":"<pre><code>$ sellia --version\nSellia v1.0.0\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#output-format","level":2,"title":"Output Format","text":"<p>The output format is:</p> <pre><code>Sellia v&lt;VERSION&gt;\n</code></pre> <p>Where <code>&lt;VERSION&gt;</code> is the semantic version number (e.g., <code>1.0.0</code>).</p>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#examples","level":2,"title":"Examples","text":"","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#check-current-version","level":3,"title":"Check current version","text":"<pre><code>$ sellia version\nSellia v1.2.0\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#use-in-scripts","level":3,"title":"Use in scripts","text":"<pre><code>#!/bin/bash\nVERSION=$(sellia -v | awk '{print $2}')\necho \"Running Sellia version $VERSION\"\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#compare-versions","level":3,"title":"Compare versions","text":"<pre><code>CURRENT=$(sellia -v | awk '{print $2}' | cut -d'v' -f2)\nLATEST=\"1.2.0\"\n\nif [ \"$CURRENT\" != \"$LATEST\" ]; then\n    echo \"Update available!\"\n    sellia update\nfi\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#check-if-sellia-is-installed","level":3,"title":"Check if Sellia is installed","text":"<pre><code>if command -v sellia &amp;&gt; /dev/null; then\n    echo \"Sellia version: $(sellia -v)\"\nelse\n    echo \"Sellia is not installed\"\nfi\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#version-format","level":2,"title":"Version Format","text":"<p>Sellia uses semantic versioning: <code>MAJOR.MINOR.PATCH</code></p> <ul> <li>MAJOR - Breaking changes (e.g., <code>2.0.0</code>)</li> <li>MINOR - New features, backwards compatible (e.g., <code>1.1.0</code>)</li> <li>PATCH - Bug fixes (e.g., <code>1.0.1</code>)</li> </ul>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#pre-release-versions","level":3,"title":"Pre-release Versions","text":"<p>Pre-release versions include a suffix:</p> <pre><code>Sellia v1.2.0-beta.1\nSellia v1.2.0-rc.1\nSellia v1.2.0-dev\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#development-versions","level":3,"title":"Development Versions","text":"<p>Development builds may include commit information:</p> <pre><code>Sellia v1.2.0-dev+a1b2c3d\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#usage-in-bug-reports","level":2,"title":"Usage in Bug Reports","text":"<p>When reporting bugs, always include the version:</p> <pre><code>$ sellia version\nSellia v1.2.0\n\n$ sellia http 3000\n# ... error message ...\n</code></pre> <p>This helps developers identify fixed issues and version-specific problems.</p>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#comparison-with-update-check","level":2,"title":"Comparison with Update Check","text":"<p>The <code>version</code> command shows only the installed version:</p> <pre><code>$ sellia version\nSellia v1.0.0\n</code></pre> <p>To check for updates, use <code>sellia update --check</code>:</p> <pre><code>$ sellia update --check\nCurrent version: 1.0.0\nLatest version: 1.2.0\n\nA new version is available!\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#environment-variable","level":2,"title":"Environment Variable","text":"<p>You can also access the version programmatically:</p> <pre><code># In Crystal code\nputs Sellia::VERSION  # =&gt; \"1.0.0\"\n</code></pre>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#exit-codes","level":2,"title":"Exit Codes","text":"<ul> <li><code>0</code> - Version displayed successfully</li> </ul>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#related-commands","level":2,"title":"Related Commands","text":"<ul> <li><code>sellia update</code> - Update to the latest version</li> <li><code>sellia help</code> - Show general help and usage information</li> </ul>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/cli-reference/sellia-version/#see-also","level":2,"title":"See Also","text":"<ul> <li>Changelog - Version history and changes</li> <li>GitHub Releases - Release notes and downloads</li> </ul>","path":["User","Cli reference","sellia version - Show Version Information"],"tags":[]},{"location":"user/configuration/","level":1,"title":"Configuration","text":"<p>Configure Sellia through files, environment variables, and CLI flags.</p>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#overview","level":2,"title":"Overview","text":"<p>Sellia supports layered configuration from multiple sources. Later sources override earlier ones:</p> <ol> <li><code>~/.config/sellia/sellia.yml</code></li> <li><code>~/.sellia.yml</code></li> <li><code>./sellia.yml</code> (current directory)</li> <li>CLI flags (highest priority)</li> </ol>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#configuration-file","level":2,"title":"Configuration File","text":"","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#location","level":3,"title":"Location","text":"<p>Place <code>sellia.yml</code> in your project directory:</p> <pre><code>cd my-project\ncat &gt; sellia.yml &lt;&lt; EOF\nserver: https://sellia.me\napi_key: your-api-key\nEOF\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#example-configuration","level":3,"title":"Example Configuration","text":"<pre><code># Server settings\nserver: https://sellia.me\napi_key: your-api-key\n\ninspector:\n  port: 4040\n  open: true\n\n# Tunnel definitions\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    local_host: localhost\n    auth: user:pass\n\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n\n  webhook:\n    port: 3000\n    subdomain: webhooks\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#client-variables","level":3,"title":"Client Variables","text":"<p>Set environment variables for the CLI client:</p> <pre><code>export SELLIA_SERVER=https://sellia.me\nexport SELLIA_API_KEY=your-api-key\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#server-variables","level":3,"title":"Server Variables","text":"<p>Configure the Sellia server:</p> <pre><code># Basic settings\nexport SELLIA_HOST=0.0.0.0\nexport SELLIA_PORT=3000\nexport SELLIA_DOMAIN=yourdomain.com\n\n# Authentication\nexport SELLIA_REQUIRE_AUTH=true\nexport SELLIA_MASTER_KEY=your-master-key\n\n# Features\nexport SELLIA_USE_HTTPS=true\nexport SELLIA_RATE_LIMITING=true\nexport SELLIA_DISABLE_LANDING=true\n\n# Database\nexport SELLIA_DB_PATH=/var/lib/sellia/sellia.db\nexport SELLIA_NO_DB=false\n\n# Debugging\nexport LOG_LEVEL=debug\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#docker-environment","level":3,"title":"Docker Environment","text":"<p>Use <code>.env</code> file with Docker:</p> <pre><code>SELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_USE_HTTPS=true\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#cli-flags","level":2,"title":"CLI Flags","text":"","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#server-flags","level":3,"title":"Server Flags","text":"<pre><code>sellia-server [options]\n\nOptions:\n  --host HOST           Host to bind to (default: 0.0.0.0)\n  --port PORT           Port to listen on (default: 3000)\n  --domain DOMAIN       Base domain for subdomains\n  --require-auth        Require API key authentication\n  --master-key KEY      Master API key\n  --https               Generate HTTPS URLs for tunnels\n  --no-rate-limit       Disable rate limiting\n  --no-landing          Disable the landing page\n  --db-path PATH        Path to SQLite database\n  --no-db               Disable database (use in-memory defaults)\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#client-flags","level":3,"title":"Client Flags","text":"<pre><code>sellia http &lt;port&gt; [options]\n\nOptions:\n  -s, --subdomain NAME    Request specific subdomain\n  -a, --auth USER:PASS    Enable basic auth protection\n  -H, --host HOST         Local host (default: localhost)\n  -k, --api-key KEY       API key for authentication\n  -i, --inspector-port    Inspector UI port (default: 4040)\n  -o, --open              Open inspector in browser\n  --no-inspector          Disable the request inspector\n  --server URL            Tunnel server URL\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#development-setup","level":3,"title":"Development Setup","text":"<pre><code># sellia.yml\nserver: http://localhost:3000\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: dev\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#production-setup","level":3,"title":"Production Setup","text":"<pre><code># sellia.yml\nserver: https://tunnel.mycompany.com\napi_key: ${SELLIA_API_KEY}  # Use environment variable\n\ntunnels:\n  webhook-receiver:\n    port: 3000\n    subdomain: webhooks-prod\n    auth: ${WEBHOOK_AUTH}\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#multiple-environments","level":3,"title":"Multiple Environments","text":"<pre><code># sellia.dev.yml\nserver: http://localhost:3000\ntunnels:\n  app:\n    port: 3000\n    subdomain: dev\n</code></pre> <pre><code># sellia.prod.yml\nserver: https://tunnel.mycompany.com\napi_key: ${PROD_API_KEY}\ntunnels:\n  app:\n    port: 3000\n    subdomain: prod\n    auth: ${PROD_AUTH}\n</code></pre> <p>Use different configs:</p> <pre><code>sellia start --config sellia.dev.yml\nsellia start --config sellia.prod.yml\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#security","level":3,"title":"Security","text":"<ol> <li>Never commit API keys - Use environment variables</li> <li>Use different keys per environment - Dev, staging, production</li> <li>Rotate keys regularly - Update configurations periodically</li> <li>Use .gitignore - Exclude <code>sellia.yml</code> with secrets</li> </ol> <pre><code># .gitignore\nsellia.yml\n.env\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#organization","level":3,"title":"Organization","text":"<ol> <li>Project-specific configs - Place <code>sellia.yml</code> in project root</li> <li>Shared settings - Use <code>~/.config/sellia/sellia.yml</code> for defaults</li> <li>Team configs - Commit example configs without secrets</li> </ol> <pre><code># sellia.example.yml\nserver: https://tunnel.mycompany.com\napi_key: YOUR_API_KEY_HERE\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#environment-variables_1","level":3,"title":"Environment Variables","text":"<p>Use environment variables for:</p> <ul> <li>API keys</li> <li>Authentication credentials</li> <li>Server URLs</li> <li>Sensitive configuration</li> </ul> <pre><code># sellia.yml\nserver: ${SELLIA_SERVER}\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: ${APP_SUBDOMAIN}\n    auth: ${APP_AUTH}\n</code></pre>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#config-not-loading","level":3,"title":"Config Not Loading","text":"<p>Problem: Configuration file not being read</p> <p>Solutions: - Verify file is named <code>sellia.yml</code> - Check file location (current directory or home) - Ensure valid YAML syntax - Check file permissions</p>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#environment-variables-ignored","level":3,"title":"Environment Variables Ignored","text":"<p>Problem: Environment variables not working</p> <p>Solutions: - Export variables: <code>export SELLIA_API_KEY=key</code> - Use <code>${VAR}</code> syntax in YAML - Check for typos in variable names - Verify variables are set in shell session</p>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#conflicting-options","level":3,"title":"Conflicting Options","text":"<p>Problem: CLI flags not overriding config</p> <p>Solutions: - CLI flags have highest priority (should override) - Check flag syntax - Verify flag is after the command - Check for multiple config files</p>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Authentication - Managing API keys</li> <li>Deployment - Production configuration</li> <li>CLI Reference - All command options</li> </ul>","path":["User","Configuration"],"tags":[]},{"location":"user/configuration/cli-flags/","level":1,"title":"CLI Flags Reference","text":"<p>Complete reference of all command-line flags for the Sellia CLI client and server. Use flags to override configuration files or for one-off commands.</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#client-commands","level":2,"title":"Client Commands","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#sellia","level":3,"title":"sellia","text":"<p>Main CLI command.</p> <pre><code>sellia &lt;command&gt; [options]\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#commands","level":3,"title":"Commands","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#http-port","level":4,"title":"<code>http &lt;port&gt;</code>","text":"<p>Create an HTTP tunnel to a local port.</p> <pre><code>sellia http &lt;port&gt; [options]\n</code></pre> <p>Positional Argument: - <code>port</code> - Local port to tunnel (required)</p> <p>Example: <pre><code>sellia http 8080\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#start","level":4,"title":"<code>start</code>","text":"<p>Start tunnels from configuration file.</p> <pre><code>sellia start [options]\n</code></pre> <p>Example: <pre><code>sellia start\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#auth","level":4,"title":"<code>auth</code>","text":"<p>Manage authentication (reserved for future use).</p> <pre><code>sellia auth &lt;subcommand&gt;\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#version","level":4,"title":"<code>version</code>","text":"<p>Show version information.</p> <pre><code>sellia version\n</code></pre> <p>Output: <pre><code>Sellia version 1.0.0\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#help","level":4,"title":"<code>help</code>","text":"<p>Show help information.</p> <pre><code>sellia help [command]\n</code></pre> <p>Show help for specific command: <pre><code>sellia help http\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#http-tunnel-options","level":2,"title":"HTTP Tunnel Options","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-subdomain-s","level":3,"title":"<code>--subdomain</code> / <code>-s</code>","text":"<p>Request a specific subdomain.</p> <pre><code>sellia http 8080 --subdomain myapp\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --subdomain myapp\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -s myapp\n</code></pre></p> <p>Requirements: - 3-63 characters - Lowercase letters, numbers, hyphens - Must start and end with letter or number</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-auth-a","level":3,"title":"<code>--auth</code> / <code>-a</code>","text":"<p>Enable basic authentication.</p> <pre><code>sellia http 8080 --auth username:password\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --auth admin:secret123\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -a admin:secret123\n</code></pre></p> <p>Format: <code>username:password</code></p> <p>Example: <pre><code>sellia http 8080 --auth webhook-tester:webhook-secret\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-host-h","level":3,"title":"<code>--host</code> / <code>-H</code>","text":"<p>Local host to tunnel to (default: localhost).</p> <pre><code>sellia http 8080 --host 192.168.1.100\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --host 192.168.1.100\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -H 192.168.1.100\n</code></pre></p> <p>Use cases: - Tunnel to service on different machine - Tunnel to container - Tunnel to VM</p> <p>Example: <pre><code># Tunnel to Docker container\nsellia http 8080 --host 172.17.0.2\n\n# Tunnel to specific network interface\nsellia http 8080 --host 0.0.0.0\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-api-key-k","level":3,"title":"<code>--api-key</code> / <code>-k</code>","text":"<p>API key for server authentication.</p> <pre><code>sellia http 8080 --api-key your-api-key\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --api-key abc123...\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -k abc123...\n</code></pre></p> <p>Alternative: Set via environment variable: <pre><code>export SELLIA_API_KEY=\"your-key\"\nsellia http 8080\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-inspector-port-i","level":3,"title":"<code>--inspector-port</code> / <code>-i</code>","text":"<p>Custom port for the inspector UI.</p> <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -i 5000\n</code></pre></p> <p>Default: <code>4040</code></p> <p>Use when: Port 4040 is already in use</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-open-o","level":3,"title":"<code>--open</code> / <code>-o</code>","text":"<p>Open inspector in browser automatically.</p> <pre><code>sellia http 8080 --open\n</code></pre> <p>Long form: <pre><code>sellia http 8080 --open\n</code></pre></p> <p>Short form: <pre><code>sellia http 8080 -o\n</code></pre></p> <p>Effect: Opens <code>http://localhost:4040</code> in default browser</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-no-inspector","level":3,"title":"<code>--no-inspector</code>","text":"<p>Disable the request inspector.</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre> <p>Use cases: - Production deployments - Resource-constrained environments - High-traffic scenarios</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-server","level":3,"title":"<code>--server</code>","text":"<p>Tunnel server URL.</p> <pre><code>sellia http 8080 --server https://sellia.me\n</code></pre> <p>Default: Uses value from <code>SELLIA_SERVER</code> environment variable or config file</p> <p>Examples: <pre><code># Use hosted service\nsellia http 8080 --server https://sellia.me\n\n# Use local server\nsellia http 8080 --server http://localhost:3000\n\n# Use custom server\nsellia http 8080 --server https://tunnels.mycompany.com\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#start-command-options","level":2,"title":"Start Command Options","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-config-c","level":3,"title":"<code>--config</code> / <code>-c</code>","text":"<p>Specify configuration file.</p> <pre><code>sellia start --config sellia.prod.yml\n</code></pre> <p>Long form: <pre><code>sellia start --config sellia.prod.yml\n</code></pre></p> <p>Short form: <pre><code>sellia start -c sellia.prod.yml\n</code></pre></p> <p>Default: Searches for: 1. <code>~/.config/sellia/sellia.yml</code> 2. <code>~/.sellia.yml</code> 3. <code>./sellia.yml</code></p> <p>Examples: <pre><code># Use specific config\nsellia start --config sellia.dev.yml\n\n# Use absolute path\nsellia start --config /etc/sellia/config.yml\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#server-commands","level":2,"title":"Server Commands","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#sellia-server","level":3,"title":"sellia-server","text":"<p>Start the tunnel server.</p> <pre><code>sellia-server [options]\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#server-options","level":2,"title":"Server Options","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-host","level":3,"title":"<code>--host</code>","text":"<p>Host to bind to.</p> <pre><code>sellia-server --host 0.0.0.0\n</code></pre> <p>Default: <code>0.0.0.0</code> (all interfaces)</p> <p>Examples: <pre><code># Listen on all interfaces\nsellia-server --host 0.0.0.0\n\n# Listen only on localhost\nsellia-server --host 127.0.0.1\n\n# Listen on specific IP\nsellia-server --host 192.168.1.10\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-port","level":3,"title":"<code>--port</code>","text":"<p>Port to listen on.</p> <pre><code>sellia-server --port 3000\n</code></pre> <p>Default: <code>3000</code></p> <p>Examples: <pre><code># Use port 8080\nsellia-server --port 8080\n\n# Use port 443 for HTTPS\nsellia-server --port 443\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-domain","level":3,"title":"<code>--domain</code>","text":"<p>Base domain for subdomains.</p> <pre><code>sellia-server --domain yourdomain.com\n</code></pre> <p>Required for subdomain routing</p> <p>Examples: <pre><code>sellia-server --domain tunnels.mycompany.com\nsellia-server --domain sellia.me\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-require-auth","level":3,"title":"<code>--require-auth</code>","text":"<p>Require API key authentication.</p> <pre><code>sellia-server --require-auth\n</code></pre> <p>Default: <code>false</code> (disabled)</p> <p>Effect: Clients must provide valid API key</p> <p>Example: <pre><code>sellia-server --require-auth --master-key abc123...\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-master-key","level":3,"title":"<code>--master-key</code>","text":"<p>Master API key (enables authentication).</p> <pre><code>sellia-server --master-key abc123...\n</code></pre> <p>Generate secure key: <pre><code>openssl rand -hex 32\n</code></pre></p> <p>Example: <pre><code># Generate and use key\nKEY=$(openssl rand -hex 32)\nsellia-server --master-key \"$KEY\" --require-auth\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-https","level":3,"title":"<code>--https</code>","text":"<p>Generate HTTPS URLs for tunnels.</p> <pre><code>sellia-server --https\n</code></pre> <p>Default: <code>false</code> (HTTP URLs)</p> <p>Requires: TLS certificates in <code>./certs/</code> directory</p> <p>Example: <pre><code>sellia-server --domain yourdomain.com --https\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-no-rate-limit","level":3,"title":"<code>--no-rate-limit</code>","text":"<p>Disable rate limiting.</p> <pre><code>sellia-server --no-rate-limit\n</code></pre> <p>Default: Rate limiting enabled</p> <p>Warning: Disabling may expose server to abuse</p> <p>Use when: You have external rate limiting (e.g., reverse proxy)</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-no-landing","level":3,"title":"<code>--no-landing</code>","text":"<p>Disable the public landing page.</p> <pre><code>sellia-server --no-landing\n</code></pre> <p>Default: Landing page enabled</p> <p>Use when: You want a pure tunnel server without web interface</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-db-path","level":3,"title":"<code>--db-path</code>","text":"<p>Path to SQLite database for reserved subdomains.</p> <pre><code>sellia-server --db-path /var/lib/sellia/sellia.db\n</code></pre> <p>Default: <code>~/.sellia/sellia.db</code></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#-no-db","level":3,"title":"<code>--no-db</code>","text":"<p>Disable database and use in-memory defaults.</p> <pre><code>sellia-server --no-db\n</code></pre> <p>Default: Database enabled</p> <p>Use when: You don't need persistent reserved subdomain storage</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#flag-precedence","level":2,"title":"Flag Precedence","text":"<p>Flags are applied in this order (later overrides earlier):</p> <ol> <li>Configuration file defaults</li> <li>Environment variables</li> <li>Command-line flags</li> </ol> <p>Example:</p> <p>Configuration file (<code>sellia.yml</code>): <pre><code>server: https://sellia.me\napi_key: default-key\n</code></pre></p> <p>Environment: <pre><code>export SELLIA_API_KEY=\"env-key\"\n</code></pre></p> <p>Command: <pre><code>sellia http 8080 --api-key cli-key\n</code></pre></p> <p>Result: <code>cli-key</code> is used (highest priority)</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#common-combinations","level":2,"title":"Common Combinations","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#development-tunnel","level":3,"title":"Development Tunnel","text":"<pre><code>sellia http 8080 \\\n  --subdomain myapp-dev \\\n  --server https://sellia.me \\\n  --open\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#production-tunnel","level":3,"title":"Production Tunnel","text":"<pre><code>sellia http 8080 \\\n  --subdomain myapp \\\n  --server https://sellia.me \\\n  --api-key $PROD_API_KEY \\\n  --no-inspector\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#protected-tunnel","level":3,"title":"Protected Tunnel","text":"<pre><code>sellia http 8080 \\\n  --subdomain webhooks \\\n  --auth webhook-tester:secret \\\n  --server https://sellia.me\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#local-server-testing","level":3,"title":"Local Server Testing","text":"<pre><code>sellia http 8080 \\\n  --server http://localhost:3000 \\\n  --subdomain test\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#multiple-options","level":3,"title":"Multiple Options","text":"<pre><code>sellia http 8080 \\\n  --subdomain myapp \\\n  --auth admin:secret123 \\\n  --host 192.168.1.100 \\\n  --api-key abc123 \\\n  --inspector-port 5000 \\\n  --open \\\n  --server https://sellia.me\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#short-flag-examples","level":2,"title":"Short Flag Examples","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#using-short-flags","level":3,"title":"Using Short Flags","text":"<pre><code># Short version of:\n# sellia http 8080 --subdomain myapp --auth user:pass --open\n\nsellia http 8080 -s myapp -a user:pass -o\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#mixed-short-and-long","level":3,"title":"Mixed Short and Long","text":"<pre><code>sellia http 8080 \\\n  -s myapp \\\n  --auth admin:secret \\\n  -o\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#help-flags","level":2,"title":"Help Flags","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#get-help","level":3,"title":"Get Help","text":"<pre><code># General help\nsellia help\n\n# Command-specific help\nsellia help http\nsellia help start\n\n# Server help\nsellia-server --help\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#version-flag","level":2,"title":"Version Flag","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#check-version","level":3,"title":"Check Version","text":"<pre><code>sellia version\n</code></pre> <p>Output: <pre><code>Sellia version 1.0.0\nCrystal 1.10.0\n</code></pre></p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#troubleshooting-flags","level":2,"title":"Troubleshooting Flags","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#debug-mode","level":3,"title":"Debug Mode","text":"<p>Enable debug logging:</p> <pre><code>export LOG_LEVEL=debug\nsellia http 8080\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#config-file-issues","level":3,"title":"Config File Issues","text":"<p>If config isn't loading:</p> <pre><code># Check which config files exist\nls -la ~/.config/sellia/sellia.yml ~/.sellia.yml ./sellia.yml\n\n# Use specific config file\nsellia start --config /path/to/config.yml\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#quick-reference-table","level":2,"title":"Quick Reference Table","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#client-flags","level":3,"title":"Client Flags","text":"Flag Short Description Example <code>--subdomain</code> <code>-s</code> Custom subdomain <code>--subdomain myapp</code> <code>--auth</code> <code>-a</code> Basic auth <code>--auth user:pass</code> <code>--host</code> <code>-H</code> Local host <code>--host 192.168.1.1</code> <code>--api-key</code> <code>-k</code> API key <code>--api-key abc123</code> <code>--inspector-port</code> <code>-i</code> Inspector port <code>--inspector-port 5000</code> <code>--open</code> <code>-o</code> Open inspector <code>--open</code> <code>--no-inspector</code> - Disable inspector <code>--no-inspector</code> <code>--server</code> - Server URL <code>--server https://sellia.me</code> <code>--config</code> <code>-c</code> Config file <code>--config sellia.yml</code>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#server-flags","level":3,"title":"Server Flags","text":"Flag Description Example Default <code>--host</code> Bind host <code>--host 0.0.0.0</code> <code>0.0.0.0</code> <code>--port</code> Bind port <code>--port 3000</code> <code>3000</code> <code>--domain</code> Base domain <code>--domain example.com</code> - <code>--require-auth</code> Require auth <code>--require-auth</code> <code>false</code> <code>--master-key</code> API key <code>--master-key abc123</code> - <code>--https</code> HTTPS URLs <code>--https</code> <code>false</code> <code>--no-rate-limit</code> Disable rate limit <code>--no-rate-limit</code> (enabled) <code>--no-landing</code> Disable landing page <code>--no-landing</code> (enabled) <code>--db-path</code> Database path <code>--db-path /path/to/db</code> <code>~/.sellia/sellia.db</code> <code>--no-db</code> Disable database <code>--no-db</code> (enabled)","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Configuration File - YAML configuration</li> <li>Environment Variables - ENV var reference</li> <li>Multiple Tunnels - Managing several tunnels</li> </ul>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#examples-repository","level":2,"title":"Examples Repository","text":"<p>See more examples in the Sellia examples repository.</p>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#command-reference","level":2,"title":"Command Reference","text":"","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/cli-flags/#quick-commands","level":3,"title":"Quick Commands","text":"<pre><code># Basic tunnel\nsellia http 8080\n\n# Custom subdomain\nsellia http 8080 -s myapp\n\n# With authentication\nsellia http 8080 -a admin:secret\n\n# Full featured\nsellia http 8080 \\\n  -s myapp \\\n  -a admin:secret \\\n  -o \\\n  --server https://sellia.me\n\n# Start from config\nsellia start\n\n# Start server\nsellia-server \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key $(openssl rand -hex 32)\n</code></pre>","path":["User","Configuration","CLI Flags Reference"],"tags":[]},{"location":"user/configuration/config-file/","level":1,"title":"Configuration File","text":"<p>Sellia uses YAML configuration files for persistent settings, multiple tunnels, and team collaboration. Configuration files are loaded in layers, allowing you to override settings at different levels.</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#configuration-file-locations","level":2,"title":"Configuration File Locations","text":"<p>Sellia searches for configuration files in this order (later overrides earlier):</p> <ol> <li><code>~/.config/sellia/sellia.yml</code> - System-wide user config</li> <li><code>~/.sellia.yml</code> - User home directory config</li> <li><code>./sellia.yml</code> - Project-specific config (current directory)</li> <li>CLI flags - Command-line arguments override all files</li> </ol>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#example-hierarchy","level":3,"title":"Example Hierarchy","text":"<pre><code>~/.config/sellia/sellia.yml  (global defaults)\n    ↓\n~/.sellia.yml                (user overrides)\n    ↓\n./sellia.yml                 (project overrides)\n    ↓\nCLI flags                    (session overrides)\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#basic-configuration-file","level":2,"title":"Basic Configuration File","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#minimal-example","level":3,"title":"Minimal Example","text":"<pre><code># sellia.yml\nserver: https://sellia.me\n</code></pre> <p>This sets the default server for all tunnels.</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#complete-example","level":3,"title":"Complete Example","text":"<pre><code># sellia.yml\nserver: https://sellia.me\napi_key: your-api-key-here\n\ninspector:\n  port: 4040\n  open: false\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#server-settings","level":3,"title":"Server Settings","text":"<pre><code># Server URL\nserver: https://sellia.me\n\n# or with custom port\nserver: https://sellia.me:8443\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#authentication","level":3,"title":"Authentication","text":"<pre><code># API key for server authentication\napi_key: your-api-key-here\n\n# or via environment variable\napi_key: ${SELLIA_API_KEY}\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#inspector-settings","level":3,"title":"Inspector Settings","text":"<p>Inspector settings apply to <code>sellia http</code>. The <code>sellia start</code> command does not run the inspector.</p> <pre><code>inspector:\n  port: 4040\n  open: true\n\ndatabase:\n  path: /var/lib/sellia/sellia.db  # Optional: custom database path\n  enabled: true                     # Optional: disable database\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#tunnel-definitions","level":3,"title":"Tunnel Definitions","text":"<pre><code>tunnels:\n  # Tunnel name (key)\n  web:\n    port: 3000              # Required: local port\n    subdomain: myapp        # Optional: custom subdomain\n    local_host: localhost   # Optional: local host (default: localhost)\n    auth: user:pass         # Optional: basic auth\n    routes:                 # Optional: advanced routing\n      - path: /api\n        port: 4000\n        host: api-service\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#multiple-tunnels","level":2,"title":"Multiple Tunnels","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#defining-multiple-tunnels","level":3,"title":"Defining Multiple Tunnels","text":"<pre><code>tunnels:\n  # Frontend application\n  web:\n    port: 3000\n    subdomain: myapp\n\n  # API backend\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  # Admin panel\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n    auth: admin:admin123\n\n  # Webhook receiver\n  webhooks:\n    port: 6000\n    subdomain: webhooks\n    auth: webhook-tester:secret\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#starting-multiple-tunnels","level":3,"title":"Starting Multiple Tunnels","text":"<pre><code># Start all configured tunnels\nsellia start\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nStarting 4 tunnel(s)...\n\n[web] https://myapp.sellia.me -&gt; localhost:3000\n[api] https://myapp-api.sellia.me -&gt; localhost:4000\n[admin] https://myapp-admin.sellia.me -&gt; localhost:5000\n[webhooks] https://webhooks.sellia.me -&gt; localhost:6000\n\nPress Ctrl+C to stop all tunnels\n</code></pre></p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#environment-variables","level":2,"title":"Environment Variables","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#using-environment-variables","level":3,"title":"Using Environment Variables","text":"<p>IMPORTANT: Crystal's YAML parser does not support <code>${VAR}</code> syntax. Environment variables can only be set via shell/ENV and will override config file values.</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#available-environment-variables","level":3,"title":"Available Environment Variables","text":"<p>The following environment variables are read by Sellia:</p> <p>Client: - <code>SELLIA_SERVER</code> - Override server URL from config - <code>SELLIA_API_KEY</code> - Override API key from config - <code>SELLIA_DB_PATH</code> - Override database path (server only) - <code>SELLIA_NO_DB</code> - Disable database (set to \"true\" or \"1\")</p> <p>Server: - <code>SELLIA_HOST</code> - Bind host - <code>SELLIA_PORT</code> - Bind port - <code>SELLIA_DOMAIN</code> - Base domain - <code>SELLIA_REQUIRE_AUTH</code> - Require authentication - <code>SELLIA_MASTER_KEY</code> - Master API key - <code>SELLIA_USE_HTTPS</code> - Generate HTTPS URLs - <code>SELLIA_RATE_LIMITING</code> - Enable/disable rate limiting - <code>SELLIA_DISABLE_LANDING</code> - Disable landing page - <code>LOG_LEVEL</code> - Logging verbosity</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#setting-environment-variables","level":3,"title":"Setting Environment Variables","text":"<p>Set in shell:</p> <pre><code># Direct export\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"your-api-key\"\nsellia start\n</code></pre> <p>Note: Environment variables override config file values but are overridden by CLI flags.</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#environment-specific-configuration","level":3,"title":"Environment-Specific Configuration","text":"<p>Use different config files per environment:</p> <pre><code># sellia.dev.yml\nserver: http://localhost:3000\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp-dev\n</code></pre> <pre><code># sellia.prod.yml\nserver: https://sellia.me\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp-prod\n</code></pre> <p>Use the appropriate config:</p> <pre><code># Development\nsellia start --config sellia.dev.yml\n\n# Production\nexport SELLIA_API_KEY=\"prod-key\"\nsellia start --config sellia.prod.yml\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#configuration-file-examples","level":2,"title":"Configuration File Examples","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#development-configuration","level":3,"title":"Development Configuration","text":"<pre><code># sellia.yml\nserver: https://dev.sellia.me\n\ninspector:\n  port: 4040\n  open: true\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp-dev\n\n  api:\n    port: 4000\n    subdomain: myapi-dev\n\n  webhooks:\n    port: 5000\n    subdomain: webhooks-dev\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#production-configuration","level":3,"title":"Production Configuration","text":"<pre><code># sellia.prod.yml\nserver: https://sellia.me\napi_key: ${PROD_API_KEY}\n\ntunnels:\n  app:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#team-collaboration","level":3,"title":"Team Collaboration","text":"<pre><code># sellia.yml (shared in repo)\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}  # Each developer sets their own\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: ${USER}-myapp  # john-myapp, jane-myapp\n\n  api:\n    port: 4000\n    subdomain: ${USER}-myapi\n</code></pre> <p>Each developer:</p> <pre><code># John's machine\nexport SELLIA_API_KEY=\"johns-key\"\nexport USER=john\nsellia start\n# Creates john-myapp.sellia.me\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#microservices-architecture","level":3,"title":"Microservices Architecture","text":"<pre><code># sellia.yml\nserver: https://sellia.me\n\ntunnels:\n  # Services\n  user-service:\n    port: 8001\n    subdomain: svc-users\n\n  auth-service:\n    port: 8002\n    subdomain: svc-auth\n\n  payment-service:\n    port: 8003\n    subdomain: svc-payments\n\n  notification-service:\n    port: 8004\n    subdomain: svc-notifications\n\n  # Frontends\n  web-app:\n    port: 3000\n    subdomain: app-web\n\n  admin-app:\n    port: 3001\n    subdomain: app-admin\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#monorepo-setup","level":3,"title":"Monorepo Setup","text":"<pre><code># sellia.yml (root of monorepo)\nserver: https://sellia.me\n\ntunnels:\n  # Package A\n  package-a-web:\n    port: 3000\n    subdomain: pkg-a-web\n\n  package-a-api:\n    port: 4000\n    subdomain: pkg-a-api\n\n  # Package B\n  package-b-web:\n    port: 3001\n    subdomain: pkg-b-web\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#advanced-configuration","level":2,"title":"Advanced Configuration","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#conditional-configuration","level":3,"title":"Conditional Configuration","text":"<p>Use different configs based on conditions:</p> <pre><code># Use different config files\nsellia start --config sellia.dev.yml\nsellia start --config sellia.prod.yml\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#include-external-configs","level":3,"title":"Include External Configs","text":"<p>While Sellia doesn't support YAML includes, you can:</p> <pre><code># Symbolic link approach\nln -s sellia.dev.yml sellia.yml\nsellia start\n\n# Or specify config file\nsellia start --config sellia.dev.yml\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#per-tunnel-override","level":3,"title":"Per-Tunnel Override","text":"<p>Per-tunnel inspector settings are not supported. The inspector is only available with <code>sellia http</code>, not <code>sellia start</code>.</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#database-configuration","level":2,"title":"Database Configuration","text":"<p>Sellia can use a SQLite database to persist reserved subdomains.</p> <pre><code>database:\n  path: /var/lib/sellia/sellia.db  # Path to database file\n  enabled: true                     # Set to false to disable\n</code></pre> <p>Defaults: - Path: <code>~/.sellia/sellia.db</code> - Enabled: <code>true</code></p> <p>Use cases: - Persist reserved subdomains across server restarts - Share reserved subdomain registry between server instances - Disable for simple deployments (uses in-memory defaults)</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#database-configuration_1","level":3,"title":"Database Configuration","text":"<pre><code># sellia.yml (server configuration)\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#configuration-best-practices","level":2,"title":"Configuration Best Practices","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#1-use-version-control","level":3,"title":"1. Use Version Control","text":"<p>Commit your config file (excluding secrets):</p> <pre><code># sellia.yml (committed)\nserver: https://sellia.me\napi_key: ${SELLIA_API_KEY}  # From environment\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#2-never-commit-secrets","level":3,"title":"2. Never Commit Secrets","text":"<p>Use environment variables for sensitive data:</p> <pre><code># DON'T do this\napi_key: key_abc123...\n\n# DO this instead\napi_key: ${SELLIA_API_KEY}\n</code></pre> <p>Create <code>.env</code> file (in <code>.gitignore</code>):</p> <pre><code># .env\nSELLIA_API_KEY=key_abc123...\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#3-document-configuration","level":3,"title":"3. Document Configuration","text":"<p>Add comments to your config:</p> <pre><code># Sellia Configuration\n# Documentation: https://github.com/watzon/sellia\n\n# Server Configuration\nserver: https://sellia.me\n\n# Authentication (set via environment)\napi_key: ${SELLIA_API_KEY}\n\n# Tunnels Configuration\ntunnels:\n  # Main web application\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#4-separate-environments","level":3,"title":"4. Separate Environments","text":"<p>Use different configs per environment:</p> <pre><code>sellia.yml           # Base config\nsellia.dev.yml       # Development overrides\nsellia.staging.yml   # Staging overrides\nsellia.prod.yml      # Production overrides\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#5-use-meaningful-names","level":3,"title":"5. Use Meaningful Names","text":"<p>Choose clear tunnel names:</p> <pre><code>tunnels:\n  # Good\n  web-production:\n    port: 3000\n    subdomain: myapp\n\n  # Less clear\n  tunnel1:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#config-not-loading","level":3,"title":"Config Not Loading","text":"<p>If config isn't being applied:</p> <ol> <li> <p>Check file location:    <pre><code>pwd  # Should be project directory\nls sellia.yml\n</code></pre></p> </li> <li> <p>Verify YAML syntax:    <pre><code># Use yamllint or similar\nyamllint sellia.yml\n</code></pre></p> </li> <li> <p>Check for syntax errors:    <pre><code># Sellia will show parse errors\nsellia start\n</code></pre></p> </li> </ol>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#environment-variables-not-working","level":3,"title":"Environment Variables Not Working","text":"<p>If environment variables aren't being read:</p> <ol> <li> <p>Verify variable is set:    <pre><code>echo $SELLIA_API_KEY\n</code></pre></p> </li> <li> <p>Check variable name in config:    <pre><code># Case sensitive!\napi_key: ${SELLIA_API_KEY}  # Correct\napi_key: ${sellia_api_key}  # Wrong\n</code></pre></p> </li> <li> <p>Export the variable:    <pre><code># Make sure it's exported\nexport SELLIA_API_KEY=\"key\"\n</code></pre></p> </li> </ol>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#invalid-yaml","level":3,"title":"Invalid YAML","text":"<p>Common YAML errors:</p> <pre><code># WRONG - tabs instead of spaces\ntunnels:\n       web:  # Uses tab\n        port: 3000\n\n# CORRECT - use spaces\ntunnels:\n  web:  # Uses spaces\n    port: 3000\n</code></pre> <p>Always use spaces, not tabs.</p>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#configuration-validation","level":2,"title":"Configuration Validation","text":"<p>Sellia validates config on startup:</p> <pre><code>$ sellia start\n\n# Valid config\n[Sellia] Loading config from sellia.yml\n[Sellia] Starting tunnel: web\n[Sellia] Tunnel established at: https://myapp.sellia.me\n\n# Invalid config\n[Sellia] Error: Invalid configuration\n[Sellia] - tunnel 'web': missing required field 'port'\n</code></pre>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Multiple Tunnels - Managing several tunnels</li> <li>Environment Variables - ENV var reference</li> <li>CLI Flags - Command-line options</li> </ul>","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/config-file/#quick-reference","level":2,"title":"Quick Reference","text":"Setting Type Default Description <code>server</code> string <code>https://sellia.me</code> Tunnel server URL <code>api_key</code> string - Authentication key <code>inspector.port</code> integer 4040 Inspector UI port (used by <code>sellia http</code>) <code>inspector.open</code> boolean false Auto-open inspector (used by <code>sellia http</code>) <code>database.path</code> string <code>~/.sellia/sellia.db</code> SQLite database path (server) <code>database.enabled</code> boolean true Enable database (server) <code>tunnels</code> object - Tunnel definitions <code>tunnels.&lt;name&gt;.port</code> integer required Local port <code>tunnels.&lt;name&gt;.subdomain</code> string random Custom subdomain <code>tunnels.&lt;name&gt;.local_host</code> string localhost Local host <code>tunnels.&lt;name&gt;.auth</code> string - Basic auth (user:pass) <code>tunnels.&lt;name&gt;.routes</code> array - Advanced routing rules <code>tunnels.&lt;name&gt;.routes[].path</code> string - Route path pattern <code>tunnels.&lt;name&gt;.routes[].port</code> integer - Target port for route <code>tunnels.&lt;name&gt;.routes[].host</code> string - Target host for route","path":["User","Configuration","Configuration File"],"tags":[]},{"location":"user/configuration/environment-variables/","level":1,"title":"Environment Variables","text":"<p>Configure Sellia using environment variables for secrets, environment-specific settings, and CI/CD integration. Environment variables take precedence over config file defaults but can be overridden by CLI flags.</p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#priority-order","level":2,"title":"Priority Order","text":"<p>Settings are applied in this order (later overrides earlier):</p> <ol> <li>Config file defaults (<code>sellia.yml</code>)</li> <li>Environment variables</li> <li>CLI flags</li> </ol>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#client-environment-variables","level":2,"title":"Client Environment Variables","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#server-configuration","level":3,"title":"Server Configuration","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_server","level":4,"title":"<code>SELLIA_SERVER</code>","text":"<p>Default tunnel server URL.</p> <pre><code>export SELLIA_SERVER=\"https://sellia.me\"\n</code></pre> <p>Usage: <pre><code>sellia http 8080  # Uses SELLIA_SERVER\n</code></pre></p> <p>Override with flag: <pre><code>sellia http 8080 --server https://other-server.com\n</code></pre></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#authentication","level":3,"title":"Authentication","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_api_key","level":4,"title":"<code>SELLIA_API_KEY</code>","text":"<p>API key for server authentication.</p> <pre><code>export SELLIA_API_KEY=\"your-api-key-here\"\n</code></pre> <p>Usage: <pre><code>sellia http 8080  # Uses SELLIA_API_KEY\n</code></pre></p> <p>Note: The admin API uses the same <code>SELLIA_API_KEY</code> environment variable or <code>api_key</code> config file setting. There is no separate admin API key.</p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_db_path","level":4,"title":"<code>SELLIA_DB_PATH</code>","text":"<p>Path to SQLite database for reserved subdomains (server only).</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre> <p>Default: <code>~/.sellia/sellia.db</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_no_db","level":4,"title":"<code>SELLIA_NO_DB</code>","text":"<p>Disable database and use in-memory defaults (server only).</p> <pre><code>export SELLIA_NO_DB=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>1</code> to disable</p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#inspector-settings","level":3,"title":"Inspector Settings","text":"<p>The inspector is controlled by CLI flags (<code>--no-inspector</code>, <code>--inspector-port</code>, <code>--open</code>) and config file settings rather than environment variables.</p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#log-level","level":3,"title":"Log Level","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#log_level","level":4,"title":"<code>LOG_LEVEL</code>","text":"<p>Set logging verbosity.</p> <pre><code>export LOG_LEVEL=\"debug\"  # debug, info, warn, error\n</code></pre> <p>Default: <code>warn</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#server-environment-variables","level":2,"title":"Server Environment Variables","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#basic-settings","level":3,"title":"Basic Settings","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_host","level":4,"title":"<code>SELLIA_HOST</code>","text":"<p>Host to bind to.</p> <pre><code>export SELLIA_HOST=\"0.0.0.0\"\n</code></pre> <p>Default: <code>0.0.0.0</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_port","level":4,"title":"<code>SELLIA_PORT</code>","text":"<p>Port to listen on.</p> <pre><code>export SELLIA_PORT=\"3000\"\n</code></pre> <p>Default: <code>3000</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_domain","level":4,"title":"<code>SELLIA_DOMAIN</code>","text":"<p>Base domain for subdomains.</p> <pre><code>export SELLIA_DOMAIN=\"yourdomain.com\"\n</code></pre> <p>Required for subdomain routing.</p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#authentication_1","level":3,"title":"Authentication","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_require_auth","level":4,"title":"<code>SELLIA_REQUIRE_AUTH</code>","text":"<p>Require API key authentication.</p> <pre><code>export SELLIA_REQUIRE_AUTH=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>false</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_master_key","level":4,"title":"<code>SELLIA_MASTER_KEY</code>","text":"<p>Master API key for server authentication.</p> <pre><code>export SELLIA_MASTER_KEY=\"$(openssl rand -hex 32)\"\n</code></pre> <p>Generate secure key: <pre><code>openssl rand -hex 32\n</code></pre></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#tlshttps","level":3,"title":"TLS/HTTPS","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_use_https","level":4,"title":"<code>SELLIA_USE_HTTPS</code>","text":"<p>Generate HTTPS URLs for tunnels.</p> <pre><code>export SELLIA_USE_HTTPS=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>false</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#rate-limiting","level":3,"title":"Rate Limiting","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_rate_limiting","level":4,"title":"<code>SELLIA_RATE_LIMITING</code>","text":"<p>Enable or disable rate limiting.</p> <pre><code># Enable (default)\nexport SELLIA_RATE_LIMITING=\"true\"\n\n# Disable\nexport SELLIA_RATE_LIMITING=\"false\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>true</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#landing-page","level":3,"title":"Landing Page","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#sellia_disable_landing","level":4,"title":"<code>SELLIA_DISABLE_LANDING</code>","text":"<p>Disable the public landing page UI.</p> <pre><code>export SELLIA_DISABLE_LANDING=\"true\"\n</code></pre> <p>Values: <code>true</code>, <code>false</code> Default: <code>false</code></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#logging","level":3,"title":"Logging","text":"<p>Use <code>LOG_LEVEL</code> to control server logging verbosity.</p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#using-environment-variables","level":2,"title":"Using Environment Variables","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#shell-session","level":3,"title":"Shell Session","text":"<p>Set in your current shell:</p> <pre><code>export SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"your-key\"\nsellia http 8080\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#permanent-configuration","level":3,"title":"Permanent Configuration","text":"<p>Add to shell profile:</p> <pre><code># ~/.bashrc or ~/.zshrc\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"your-key\"\n</code></pre> <p>Reload: <pre><code>source ~/.bashrc\n# or\nsource ~/.zshrc\n</code></pre></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#env-file","level":3,"title":".env File","text":"<p>Create <code>.env</code> in project directory:</p> <pre><code># .env\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=your-key\n</code></pre> <p>IMPORTANT: Add <code>.env</code> to <code>.gitignore</code>: <pre><code>echo \".env\" &gt;&gt; .gitignore\n</code></pre></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#docker-compose","level":3,"title":"Docker Compose","text":"<p>Use in <code>docker-compose.yml</code>:</p> <pre><code>version: '3.8'\nservices:\n  sellia:\n    image: sellia:latest\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n      - SELLIA_REQUIRE_AUTH=true\n      - SELLIA_USE_HTTPS=true\n    env_file:\n      - .env\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#systemd-service","level":3,"title":"Systemd Service","text":"<p>Use in systemd service file:</p> <pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nEnvironment=\"SELLIA_DOMAIN=yourdomain.com\"\nEnvironment=\"SELLIA_MASTER_KEY=your-key\"\nEnvironment=\"SELLIA_REQUIRE_AUTH=true\"\nEnvironment=\"SELLIA_USE_HTTPS=true\"\nExecStart=/usr/local/bin/sellia-server\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#environment-specific-configuration","level":2,"title":"Environment-Specific Configuration","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#development","level":3,"title":"Development","text":"<pre><code># .env.development\nSELLIA_SERVER=http://localhost:3000\nLOG_LEVEL=debug\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#staging","level":3,"title":"Staging","text":"<pre><code># .env.staging\nSELLIA_SERVER=https://staging.sellia.me\nSELLIA_API_KEY=${STAGING_API_KEY}\nLOG_LEVEL=info\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#production","level":3,"title":"Production","text":"<pre><code># .env.production\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=${PROD_API_KEY}\nLOG_LEVEL=warn\n</code></pre> <p>Load environment-specific file:</p> <pre><code># Development\nexport $(cat .env.development | xargs)\nsellia start\n\n# Production\nexport $(cat .env.production | xargs)\nsellia start\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#cicd-integration","level":2,"title":"CI/CD Integration","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#github-actions","level":3,"title":"GitHub Actions","text":"<pre><code># .github/workflows/deploy.yml\nname: Deploy Tunnels\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      - name: Install Sellia\n        run: |\n          wget https://github.com/watzon/sellia/releases/latest/download/sellia-linux-amd64\n          chmod +x sellia-linux-amd64\n          sudo mv sellia-linux-amd64 /usr/local/bin/sellia\n\n      - name: Start tunnels\n        env:\n          SELLIA_SERVER: ${{ secrets.SELLIA_SERVER }}\n          SELLIA_API_KEY: ${{ secrets.SELLIA_API_KEY }}\n        run: sellia start\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#gitlab-ci","level":3,"title":"GitLab CI","text":"<pre><code># .gitlab-ci.yml\ndeploy:\n  script:\n    - apt-get update &amp;&amp; apt-get install -y sellia\n    - sellia http 3000 --subdomain $CI_PROJECT_NAME\n  variables:\n    SELLIA_SERVER: \"https://sellia.me\"\n    SELLIA_API_KEY: \"$SELLIA_API_KEY\"\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#jenkins","level":3,"title":"Jenkins","text":"<pre><code>// Jenkinsfile\npipeline {\n  agent any\n  environment {\n    SELLIA_SERVER = 'https://sellia.me'\n    SELLIA_API_KEY = credentials('sellia-api-key')\n  }\n  stages {\n    stage('Deploy Tunnel') {\n      steps {\n        sh 'sellia http 3000 --subdomain myapp'\n      }\n    }\n  }\n}\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#1-never-commit-secrets","level":3,"title":"1. Never Commit Secrets","text":"<p>WRONG: <pre><code># sellia.yml (committed)\napi_key: key_abc123...\n</code></pre></p> <p>CORRECT: <pre><code># sellia.yml (committed)\napi_key: ${SELLIA_API_KEY}\n</code></pre></p> <pre><code># .env (NOT committed)\nSELLIA_API_KEY=key_abc123...\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#2-use-different-keys-per-environment","level":3,"title":"2. Use Different Keys per Environment","text":"<pre><code># Development\nexport SELLIA_API_KEY=\"dev-key-abc123\"\n\n# Staging\nexport SELLIA_API_KEY=\"staging-key-def456\"\n\n# Production\nexport SELLIA_API_KEY=\"prod-key-ghi789\"\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#3-rotate-keys-regularly","level":3,"title":"3. Rotate Keys Regularly","text":"<pre><code># Generate new key\nNEW_KEY=$(openssl rand -hex 32)\n\n# Update environment\nexport SELLIA_API_KEY=\"$NEW_KEY\"\n\n# Update server configuration\n# (restart server with new key)\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#4-use-secret-management","level":3,"title":"4. Use Secret Management","text":"<p>For production, use secret management tools:</p> <ul> <li>AWS: Parameter Store, Secrets Manager</li> <li>HashiCorp: Vault</li> <li>Cloud: Google Secret Manager, Azure Key Vault</li> <li>Tools: 1Password, Bitwarden Secrets</li> </ul> <p>Example with AWS Secrets Manager:</p> <pre><code># Load secret from AWS\nexport SELLIA_API_KEY=$(aws secretsmanager get-secret-value --secret-id sellia/api-key --query SecretString --output text)\nsellia http 8080\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#examples","level":2,"title":"Examples","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#example-1-local-development","level":3,"title":"Example 1: Local Development","text":"<pre><code># .env.local\nSELLIA_SERVER=http://localhost:3000\nLOG_LEVEL=debug\n\n# Load and run\nsource .env.local\nsellia http 8080\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#example-2-team-setup","level":3,"title":"Example 2: Team Setup","text":"<p>Each team member has their own <code>.env</code>:</p> <pre><code># John's .env\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=johns-key\n</code></pre> <pre><code># Jane's .env\nSELLIA_SERVER=https://sellia.me\nSELLIA_API_KEY=janes-key\n</code></pre> <p>Each developer has their own <code>sellia.yml</code>: <pre><code># John's sellia.yml\nserver: https://sellia.me\napi_key: jQK8Rz2m...\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: john-dev\n</code></pre></p> <p>Or use environment-specific config files: <pre><code># John runs:\nsellia start --config sellia.john.yml\n\n# Jane runs:\nsellia start --config sellia.jane.yml\n</code></pre></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#example-3-docker-deployment","level":3,"title":"Example 3: Docker Deployment","text":"<pre><code># docker-compose.yml\nversion: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - SELLIA_SERVER=${SELLIA_SERVER}\n      - SELLIA_API_KEY=${SELLIA_API_KEY}\n    depends_on:\n      - sellia-client\n\n  sellia-client:\n    image: sellia:latest\n    environment:\n      - SELLIA_SERVER=${SELLIA_SERVER}\n      - SELLIA_API_KEY=${SELLIA_API_KEY}\n    command: http 3000\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#example-4-server-deployment","level":3,"title":"Example 4: Server Deployment","text":"<pre><code># /etc/sellia/environment\nSELLIA_DOMAIN=tunnels.mycompany.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_USE_HTTPS=true\nSELLIA_RATE_LIMITING=true\nLOG_LEVEL=warn\n</code></pre> <p>Start server: <pre><code>source /etc/sellia/environment\nsellia-server\n</code></pre></p>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#variable-not-set","level":3,"title":"Variable Not Set","text":"<p>Check if variable is set:</p> <pre><code>echo $SELLIA_API_KEY\n# Should show value or empty\n</code></pre> <p>List all Sellia variables:</p> <pre><code>env | grep SELLIA\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#variable-ignored","level":3,"title":"Variable Ignored","text":"<p>Check priority order - CLI flags override env vars:</p> <pre><code># This overrides SELLIA_SERVER\nsellia http 8080 --server https://other.com\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#special-characters","level":3,"title":"Special Characters","text":"<p>Escape special characters:</p> <pre><code># Wrong\nexport SELLIA_API_KEY=key with spaces\n\n# Right\nexport SELLIA_API_KEY='key with spaces'\n\n# Or\nexport SELLIA_API_KEY=\"key with spaces\"\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#shell-profile-not-loaded","level":3,"title":"Shell Profile Not Loaded","text":"<p>If variables aren't persistent:</p> <pre><code># For bash\necho 'export SELLIA_API_KEY=\"key\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n\n# For zsh\necho 'export SELLIA_API_KEY=\"key\"' &gt;&gt; ~/.zshrc\nsource ~/.zshrc\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#reference-table","level":2,"title":"Reference Table","text":"","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#client-variables","level":3,"title":"Client Variables","text":"Variable Description Default <code>SELLIA_SERVER</code> Tunnel server URL - <code>SELLIA_API_KEY</code> API key for authentication - <code>SELLIA_DB_PATH</code> SQLite database path (server) <code>~/.sellia/sellia.db</code> <code>SELLIA_NO_DB</code> Disable database (server) - <code>LOG_LEVEL</code> Logging verbosity <code>warn</code>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#server-variables","level":3,"title":"Server Variables","text":"Variable Description Default <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains - <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key - <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code> <code>SELLIA_DISABLE_LANDING</code> Disable landing page <code>false</code>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Configuration File - YAML configuration</li> <li>CLI Flags - Command-line options</li> <li>Multiple Tunnels - Managing several tunnels</li> </ul>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/environment-variables/#quick-reference","level":2,"title":"Quick Reference","text":"<pre><code># Set variable\nexport SELLIA_SERVER=\"https://sellia.me\"\n\n# Use variable\nsellia http 8080\n\n# Multiple variables\nexport SELLIA_SERVER=\"https://sellia.me\"\nexport SELLIA_API_KEY=\"key\"\nexport LOG_LEVEL=\"debug\"\n\n# From .env file\nsource .env\nsellia start\n\n# In Docker\ndocker run -e SELLIA_API_KEY=\"key\" sellia\n\n# In systemd\nEnvironment=\"SELLIA_SERVER=https://sellia.me\"\n</code></pre>","path":["User","Configuration","Environment Variables"],"tags":[]},{"location":"user/configuration/multiple-tunnels/","level":1,"title":"Multiple Tunnels","text":"<p>Manage multiple tunnels simultaneously for complex applications, microservices architectures, or development workflows. Sellia makes it easy to run and manage several tunnels at once.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#why-multiple-tunnels","level":2,"title":"Why Multiple Tunnels?","text":"<p>Use multiple tunnels for:</p> <ul> <li>Microservices: Each service on its own tunnel</li> <li>Full-stack apps: Separate frontend and backend tunnels</li> <li>Environment separation: Dev, staging, and production-like tunnels</li> <li>Team collaboration: Individual tunnels per developer</li> <li>Feature branches: Dynamic tunnels per Git branch</li> <li>Webhook testing: Multiple webhook receivers</li> </ul>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#creating-multiple-tunnels","level":2,"title":"Creating Multiple Tunnels","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#command-line-multiple-terminals","level":3,"title":"Command Line (Multiple Terminals)","text":"<p>Run each tunnel in a separate terminal:</p> <pre><code># Terminal 1\nsellia http 3000 --subdomain frontend --server https://sellia.me\n\n# Terminal 2\nsellia http 4000 --subdomain backend --server https://sellia.me\n\n# Terminal 3\nsellia http 5000 --subdomain database --server https://sellia.me\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#configuration-file-recommended","level":3,"title":"Configuration File (Recommended)","text":"<p>Define all tunnels in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\n\ntunnels:\n  frontend:\n    port: 3000\n    subdomain: myapp-frontend\n\n  backend:\n    port: 4000\n    subdomain: myapp-backend\n\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#configuration-file-structure","level":2,"title":"Configuration File Structure","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#basic-multiple-tunnels","level":3,"title":"Basic Multiple Tunnels","text":"<pre><code>server: https://sellia.me\napi_key: your-api-key\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  webhooks:\n    port: 5000\n    subdomain: myapp-webhooks\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#advanced-configuration","level":3,"title":"Advanced Configuration","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  # Frontend application\n  web:\n    port: 3000\n    subdomain: myapp\n\n  # API backend\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  # Admin panel\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n    auth: admin:secret123  # Protected\n\n  # Webhook receiver\n  webhooks:\n    port: 6000\n    subdomain: myapp-webhooks\n    auth: webhook-tester:webhook-secret\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#common-patterns","level":2,"title":"Common Patterns","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#1-full-stack-application","level":3,"title":"1. Full-Stack Application","text":"<p>Frontend and backend tunnels:</p> <pre><code>tunnels:\n  frontend:\n    port: 3000  # React/Vue/Angular dev server\n    subdomain: myapp\n\n  api:\n    port: 4000  # Express/Rails/Django API\n    subdomain: myapp-api\n</code></pre> <p>Frontend can call API at <code>https://myapp-api.sellia.me</code>.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#2-microservices-architecture","level":3,"title":"2. Microservices Architecture","text":"<p>Multiple independent services:</p> <pre><code>tunnels:\n  # Services\n  user-service:\n    port: 8001\n    subdomain: svc-users\n\n  auth-service:\n    port: 8002\n    subdomain: svc-auth\n\n  payment-service:\n    port: 8003\n    subdomain: svc-payments\n\n  notification-service:\n    port: 8004\n    subdomain: svc-notifications\n\n  # Frontends\n  web-app:\n    port: 3000\n    subdomain: app-web\n\n  admin-app:\n    port: 3001\n    subdomain: app-admin\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#3-environment-separation","level":3,"title":"3. Environment Separation","text":"<p>Multiple environments for testing:</p> <pre><code>tunnels:\n  # Development\n  app-dev:\n    port: 3000\n    subdomain: myapp-dev\n\n  # Staging\n  app-staging:\n    port: 3001\n    subdomain: myapp-staging\n\n  # Production mirror\n  app-prod-mirror:\n    port: 3002\n    subdomain: myapp-prod-like\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#4-team-development","level":3,"title":"4. Team Development","text":"<p>Individual developer tunnels:</p> <pre><code>server: https://sellia.me\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  # Uses developer's username\n  web:\n    port: 3000\n    subdomain: ${USER}-myapp\n\n  api:\n    port: 4000\n    subdomain: ${USER}-myapi\n</code></pre> <p>Each developer: <pre><code># John's machine\n# Creates: john-myapp.sellia.me\n# Creates: john-myapi.sellia.me\n</code></pre></p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#5-feature-branch-tunnels","level":3,"title":"5. Feature Branch Tunnels","text":"<p>Dynamic subdomains based on Git branch:</p> <pre><code># In your development workflow\nBRANCH=$(git rev-parse --abbrev-ref HEAD | sed 's/sl_/g/' | tr '/' '-')\nSUBDOMAIN=\"myapp-$BRANCH\"\n\nsellia http 3000 --subdomain \"$SUBDOMAIN\"\n</code></pre> <p>Or create a script:</p> <pre><code>#!/bin/bash\n# tunnel-branch.sh\n\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nSAFE_NAME=$(echo \"$BRANCH\" | tr '[:upper:]' '[:lower:]' | tr '/' '-')\nSUBDOMAIN=\"myapp-$SAFE_NAME\"\n\necho \"Creating tunnel for branch: $BRANCH\"\necho \"Subdomain: $SUBDOMAIN\"\n\nsellia http 3000 \\\n  --subdomain \"$SUBDOMAIN\" \\\n  --server https://sellia.me\n</code></pre> <p>Usage: <pre><code>git checkout feature/new-ui\n./tunnel-branch.sh\n# Creates: myapp-feature-new-ui.sellia.me\n</code></pre></p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#6-webhook-testing","level":3,"title":"6. Webhook Testing","text":"<p>Multiple webhook receivers:</p> <pre><code>tunnels:\n  stripe-webhooks:\n    port: 3000\n    subdomain: stripe-test\n    auth: stripe-tester:secret\n\n  github-webhooks:\n    port: 3001\n    subdomain: github-test\n    auth: github-tester:secret\n\n  slack-webhooks:\n    port: 3002\n    subdomain: slack-test\n    auth: slack-tester:secret\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#managing-multiple-tunnels","level":2,"title":"Managing Multiple Tunnels","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#starting-all-tunnels","level":3,"title":"Starting All Tunnels","text":"<pre><code>sellia start\n</code></pre> <p>Output: <pre><code>Sellia v1.0.0\nStarting 3 tunnel(s)...\n\n[frontend] https://myapp.sellia.me -&gt; localhost:3000\n[api] https://myapp-api.sellia.me -&gt; localhost:4000\n[admin] https://myapp-admin.sellia.me -&gt; localhost:5000\n\nPress Ctrl+C to stop all tunnels\n</code></pre></p> <p>Note: The inspector is not available with <code>sellia start</code>. Use <code>sellia http</code> for individual tunnels with inspector functionality.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#stopping-all-tunnels","level":3,"title":"Stopping All Tunnels","text":"<p>Press <code>Ctrl+C</code> in the terminal where <code>sellia start</code> is running.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#selective-tunnel-start","level":3,"title":"Selective Tunnel Start","text":"<p>If you need to start only specific tunnels, create multiple config files:</p> <pre><code># sellia.dev.yml - Only development tunnels\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp-dev\n\n# sellia.prod.yml - Only production tunnels\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre> <p>Start selectively: <pre><code>sellia start --config sellia.dev.yml\nsellia start --config sellia.prod.yml\n</code></pre></p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#inspector-and-sellia-start","level":2,"title":"Inspector and <code>sellia start</code>","text":"<p>The request inspector is only available for <code>sellia http</code>. The <code>sellia start</code> command does not run the inspector for any tunnels.</p> <p>If you need inspector functionality for development: - Use <code>sellia http &lt;port&gt;</code> for single tunnels with inspector - The inspector provides HTTP request/response inspection at <code>http://localhost:4040</code> - Use <code>--no-inspector</code> flag to disable it when not needed</p> <p>For production deployments with multiple tunnels, <code>sellia start</code> is preferred as it's lighter weight without the inspector overhead.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#example-1-e-commerce-platform","level":3,"title":"Example 1: E-Commerce Platform","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  # Frontend stores\n  store-web:\n    port: 3000\n    subdomain: store\n\n  store-admin:\n    port: 3001\n    subdomain: store-admin\n    auth: admin:secret\n\n  # Microservices\n  users-api:\n    port: 8001\n    subdomain: svc-users\n\n  products-api:\n    port: 8002\n    subdomain: svc-products\n\n  orders-api:\n    port: 8003\n    subdomain: svc-orders\n\n  payments-api:\n    port: 8004\n    subdomain: svc-payments\n\n  # Webhooks\n  stripe-webhooks:\n    port: 5000\n    subdomain: stripe-hooks\n    auth: webhook:secret\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#example-2-monorepo-with-multiple-apps","level":3,"title":"Example 2. Monorepo with Multiple Apps","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  # App A\n  app-a-web:\n    port: 3000\n    subdomain: app-a\n\n  app-a-api:\n    port: 4000\n    subdomain: app-a-api\n\n  # App B\n  app-b-web:\n    port: 3001\n    subdomain: app-b\n\n  app-b-api:\n    port: 4001\n    subdomain: app-b-api\n\n  # Shared services\n  shared-auth:\n    port: 8000\n    subdomain: shared-auth\n\n  shared-notifications:\n    port: 8001\n    subdomain: shared-notify\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#example-3-cicd-environment","level":3,"title":"Example 3: CI/CD Environment","text":"<pre><code># sellia.ci.yml\nserver: ${SELLIA_SERVER}\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  # Pull request preview\n  pr-preview:\n    port: 3000\n    subdomain: pr-${PR_NUMBER}\n\n  # API testing\n  api-test:\n    port: 4000\n    subdomain: api-test-${PR_NUMBER}\n</code></pre> <p>Usage in CI: <pre><code>export PR_NUMBER=123\nsellia start --config sellia.ci.yml\n# Creates: pr-123.sellia.me\n</code></pre></p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#port-management","level":2,"title":"Port Management","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#port-conflicts","level":3,"title":"Port Conflicts","text":"<p>If multiple tunnels try to use the same local port, you'll get an error:</p> <pre><code>[Sellia] Error: Port 3000 already in use\n</code></pre> <p>Solution: Use different ports or stop conflicting services.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#port-ranges","level":3,"title":"Port Ranges","text":"<p>Organize tunnels by port ranges:</p> <pre><code>tunnels:\n  # Frontends: 3000-3099\n  web:\n    port: 3000\n    subdomain: web\n\n  admin:\n    port: 3001\n    subdomain: admin\n\n  # APIs: 4000-4099\n  api:\n    port: 4000\n    subdomain: api\n\n  # Services: 8000-8999\n  svc-users:\n    port: 8001\n    subdomain: svc-users\n\n  svc-payments:\n    port: 8002\n    subdomain: svc-payments\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#health-checking","level":2,"title":"Health Checking","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#verify-all-tunnels","level":3,"title":"Verify All Tunnels","text":"<p>Script to check all tunnels:</p> <pre><code>#!/bin/bash\n# check-tunnels.sh\n\nTUNNELS=(\n  \"https://myapp.sellia.me\"\n  \"https://myapp-api.sellia.me\"\n  \"https://myapp-admin.sellia.me\"\n)\n\nfor tunnel in \"${TUNNELS[@]}\"; do\n  echo \"Checking $tunnel...\"\n  if curl -s -o /dev/null -w \"%{http_code}\" \"$tunnel\" | grep -q \"200\"; then\n    echo \"✓ $tunnel is up\"\n  else\n    echo \"✗ $tunnel is down\"\n  fi\ndone\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#automation","level":2,"title":"Automation","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#start-on-system-boot","level":3,"title":"Start on System Boot","text":"<p>Linux systemd service:</p> <pre><code># /etc/systemd/system/sellia-tunnels.service\n[Unit]\nDescription=Sellia Tunnels\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nWorkingDirectory=/opt/sellia\nExecStart=/usr/local/bin/sellia start\nRestart=always\nEnvironmentFile=/opt/sellia/.env\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable: <pre><code>sudo systemctl enable sellia-tunnels\nsudo systemctl start sellia-tunnels\n</code></pre></p> <p>Note: The <code>Restart=always</code> directive provides automatic restart on failure. No additional flags are needed.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#1-use-meaningful-names","level":3,"title":"1. Use Meaningful Names","text":"<p>Choose clear, descriptive tunnel names:</p> <pre><code>tunnels:\n  # Good\n  frontend-production:\n    port: 3000\n    subdomain: myapp\n\n  # Less clear\n  tunnel1:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#2-group-related-tunnels","level":3,"title":"2. Group Related Tunnels","text":"<pre><code>tunnels:\n  # App A tunnels\n  app-a-web:\n    port: 3000\n    subdomain: app-a\n\n  app-a-api:\n    port: 4000\n    subdomain: app-a-api\n\n  # App B tunnels\n  app-b-web:\n    port: 3001\n    subdomain: app-b\n\n  app-b-api:\n    port: 4001\n    subdomain: app-b-api\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#3-use-consistent-naming","level":3,"title":"3. Use Consistent Naming","text":"<pre><code>tunnels:\n  # Pattern: &lt;app&gt;-&lt;env&gt;-&lt;type&gt;\n  shopify-staging-webhook:\n    port: 3000\n    subdomain: shopify-staging-webhook\n\n  shopify-production-webhook:\n    port: 3001\n    subdomain: shopify-prod-webhook\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#4-document-tunnel-purpose","level":3,"title":"4. Document Tunnel Purpose","text":"<p>Add comments to config:</p> <pre><code>tunnels:\n  # Main web application\n  web:\n    port: 3000\n    subdomain: myapp\n\n  # REST API backend\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  # Admin panel (protected)\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n    auth: admin:secret123\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#5-separate-configs-per-environment","level":3,"title":"5. Separate Configs per Environment","text":"<pre><code>sellia.dev.yml       # Development tunnels\nsellia.staging.yml   # Staging tunnels\nsellia.prod.yml      # Production tunnels\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#tunnel-wont-start","level":3,"title":"Tunnel Won't Start","text":"<p>Check port availability:</p> <pre><code>lsof -i :3000\n</code></pre> <p>Stop conflicting services or use different ports.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#subdomain-conflicts","level":3,"title":"Subdomain Conflicts","text":"<p>If subdomain is already in use:</p> <pre><code>[Sellia] Error: Subdomain 'myapp' already in use\n</code></pre> <p>Solution: Use different subdomains or stop conflicting tunnels.</p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#too-many-inspectors","level":3,"title":"Too Many Inspectors","text":"<p>The <code>sellia start</code> command does not launch any inspectors. If you need inspector functionality:</p> <p>Option 1: Use <code>sellia http</code> for individual tunnels <pre><code># Terminal 1\nsellia http 3000 --subdomain web\n\n# Terminal 2\nsellia http 4000 --subdomain api --no-inspector  # Disable inspector for this one\n</code></pre></p> <p>Option 2: Use <code>sellia start</code> without inspector (production) <pre><code>sellia start  # No inspector, lighter weight\n</code></pre></p>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Configuration File - YAML configuration</li> <li>Subdomain Management - Custom subdomains</li> <li>CLI Flags - Command-line options</li> </ul>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#quick-reference","level":2,"title":"Quick Reference","text":"Task Command Start all tunnels <code>sellia start</code> Start specific config <code>sellia start --config sellia.dev.yml</code> Stop all tunnels <code>Ctrl+C</code> Check tunnel status <code>ps aux \\| grep sellia</code> View all tunnels Use CLI output and logs","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#example-configurations","level":2,"title":"Example Configurations","text":"","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#minimal-setup","level":3,"title":"Minimal Setup","text":"<pre><code>server: https://sellia.me\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#production-setup","level":3,"title":"Production Setup","text":"<pre><code>server: https://sellia.me\napi_key: ${SELLIA_API_KEY}\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/configuration/multiple-tunnels/#development-setup","level":3,"title":"Development Setup","text":"<pre><code>server: https://dev.sellia.me\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp-dev\n  api:\n    port: 4000\n    subdomain: myapi-dev\n</code></pre>","path":["User","Configuration","Multiple Tunnels"],"tags":[]},{"location":"user/deployment/","level":1,"title":"Deployment","text":"<p>Deploy Sellia to production environments.</p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#overview","level":2,"title":"Overview","text":"<p>This section covers deploying Sellia to production, from simple Docker setups to cloud deployments.</p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#quick-start-docker-compose","level":2,"title":"Quick Start (Docker Compose)","text":"<p>The easiest way to deploy Sellia is with Docker Compose:</p> <pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Create environment file\ncat &gt; .env &lt;&lt; EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nEOF\n\n# Create certs directory and add your certificates\nmkdir -p certs\n# Place cert.pem and key.pem in the certs directory\n\n# Start server\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#prerequisites","level":2,"title":"Prerequisites","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#domain-requirements","level":3,"title":"Domain Requirements","text":"<p>You need a domain (or subdomain) for Sellia:</p> <ul> <li>Option 1: Use Cloudflare (recommended, free)</li> <li>Option 2: Use any domain with DNS control</li> <li>Option 3: Use subdomain: <code>tunnel.yourdomain.com</code></li> </ul>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#tls-certificates","level":3,"title":"TLS Certificates","text":"<p>Sellia requires TLS certificates for HTTPS tunnels.</p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#cloudflare-origin-certificate-recommended","level":4,"title":"Cloudflare Origin Certificate (Recommended)","text":"<ol> <li>Add domain to Cloudflare (free tier works)</li> <li>Go to SSL/TLS → Origin Server → Create Certificate</li> <li>Select:</li> <li>Hostnames: <code>*.yourdomain.com</code> and <code>yourdomain.com</code></li> <li>Validity: 15 years</li> <li>Key format: PEM (default)</li> <li>Click Create and download certificate and key</li> <li>Place in <code>./certs/</code> directory:    <pre><code>certs/\n├── cert.pem  # Origin certificate\n└── key.pem   # Private key\n</code></pre></li> </ol>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#lets-encrypt","level":4,"title":"Let's Encrypt","text":"<pre><code># Install certbot\nsudo apt-get install certbot\n\n# Generate certificate\ncertbot certonly --standalone -d yourdomain.com -d *.yourdomain.com\n\n# Copy certificates\ncp /etc/letsencrypt/live/yourdomain.com/fullchain.pem certs/cert.pem\ncp /etc/letsencrypt/live/yourdomain.com/privkey.pem certs/key.pem\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#self-signed-testing-only","level":4,"title":"Self-Signed (Testing Only)","text":"<pre><code># Generate self-signed certificate\nopenssl req -x509 -newkey rsa:4096 -keyout certs/key.pem -out certs/cert.pem -days 365 -nodes\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#docker-deployment","level":2,"title":"Docker Deployment","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#environment-file","level":3,"title":"Environment File","text":"<p>Create <code>.env</code> file:</p> <pre><code># Domain\nSELLIA_DOMAIN=yourdomain.com\n\n# Authentication\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#docker-compose","level":3,"title":"Docker Compose","text":"<p>Use provided production compose file:</p> <pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#manual-docker","level":3,"title":"Manual Docker","text":"<pre><code># Build image\ndocker build -t sellia-server .\n\n# Run container (without reverse proxy)\ndocker run -d \\\n  --name sellia-server \\\n  --env-file .env \\\n  -p 3000:3000 \\\n  sellia-server\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#cloud-deployment","level":2,"title":"Cloud Deployment","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#digitalocean","level":3,"title":"DigitalOcean","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#create-droplet","level":4,"title":"Create Droplet","text":"<pre><code># Create droplet with Docker\ndoctl compute droplet create sellia-server \\\n  --region nyc1 \\\n  --size s-2vcpu-4gb \\\n  --image docker-20-04 \\\n  --ssh-keys &lt;your-ssh-key-fingerprint&gt;\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#deploy","level":4,"title":"Deploy","text":"<pre><code># SSH into droplet\nssh root@your-droplet-ip\n\n# Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Setup as above\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#aws","level":3,"title":"AWS","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#ec2-instance","level":4,"title":"EC2 Instance","text":"<ol> <li>Launch EC2 instance with Ubuntu</li> <li>Install Docker</li> <li>Configure security groups (port 3000)</li> <li>Deploy as above</li> </ol>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#elastic-beanstalk","level":4,"title":"Elastic Beanstalk","text":"<p>Create <code>Dockerrun.aws.json</code>:</p> <pre><code>{\n  \"AWSEBDockerrunVersion\": \"1\",\n  \"Image\": {\n    \"Name\": \"sellia-server\",\n    \"Update\": \"true\"\n  },\n  \"Ports\": [\n    {\n      \"ContainerPort\": \"3000\"\n    }\n  ],\n  \"Environment\": [\n    {\n      \"Name\": \"SELLIA_DOMAIN\",\n      \"Value\": \"yourdomain.com\"\n    },\n    {\n      \"Name\": \"SELLIA_REQUIRE_AUTH\",\n      \"Value\": \"true\"\n    },\n    {\n      \"Name\": \"SELLIA_MASTER_KEY\",\n      \"Value\": \"your-master-key\"\n    }\n  ]\n}\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#google-cloud-platform","level":3,"title":"Google Cloud Platform","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#cloud-run","level":4,"title":"Cloud Run","text":"<pre><code># Build image\ngcloud builds submit --tag gcr.io/PROJECT-ID/sellia-server\n\n# Deploy\ngcloud run deploy sellia-server \\\n  --image gcr.io/PROJECT-ID/sellia-server \\\n  --platform managed \\\n  --region us-central1 \\\n  --allow-unauthenticated\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#heroku","level":3,"title":"Heroku","text":"<pre><code># Create app\nheroku create sellia-server\n\n# Set environment variables\nheroku config:set SELLIA_DOMAIN=yourdomain.com\nheroku config:set SELLIA_MASTER_KEY=$(openssl rand -hex 32)\nheroku config:set SELLIA_REQUIRE_AUTH=true\n\n# Deploy\ngit push heroku main\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#dns-configuration","level":2,"title":"DNS Configuration","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#cloudflare-recommended","level":3,"title":"Cloudflare (Recommended)","text":"<ol> <li>Add domain to Cloudflare</li> <li>Point DNS to your server IP</li> <li>Enable proxy (orange cloud)</li> <li>SSL/TLS → Full (strict)</li> <li>Disable \"Universal SSL\" if using origin certificates</li> </ol>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#traditional-dns","level":3,"title":"Traditional DNS","text":"<pre><code>Type: A\nName: tunnel (or your subdomain)\nValue: your-server-ip\nTTL: 300\n</code></pre> <p>For wildcard subdomains:</p> <pre><code>Type: CNAME\nName: *\nValue: tunnel.yourdomain.com\nTTL: 300\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#reverse-proxy","level":2,"title":"Reverse Proxy","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#nginx","level":3,"title":"Nginx","text":"<pre><code>server {\n    listen 80;\n    server_name tunnel.yourdomain.com *.tunnel.yourdomain.com;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#caddy","level":3,"title":"Caddy","text":"<pre><code>tunnel.yourdomain.com, *.tunnel.yourdomain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#monitoring","level":2,"title":"Monitoring","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#health-checks","level":3,"title":"Health Checks","text":"<p>Configure health checks:</p> <pre><code># Check if server is responding\ncurl -f http://localhost:3000/health || echo \"Server down\"\n</code></pre> <p>Or via Caddy/Nginx reverse proxy: <pre><code>curl -f https://yourdomain.com/health || echo \"Server down\"\n</code></pre></p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#logging","level":3,"title":"Logging","text":"<pre><code># View logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Rotate logs\nlogrotate /etc/logrotate.d/sellia\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#metrics","level":3,"title":"Metrics","text":"<p>Consider integrating with:</p> <ul> <li>Prometheus + Grafana</li> <li>DataDog</li> <li>New Relic</li> <li>CloudWatch (AWS)</li> </ul>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#security","level":2,"title":"Security","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#firewall","level":3,"title":"Firewall","text":"<pre><code># Configure UFW\nufw default deny incoming\nufw default allow outgoing\nufw allow ssh\nufw allow 3000/tcp\nufw enable\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#ssltls","level":3,"title":"SSL/TLS","text":"<ul> <li>Always use HTTPS in production</li> <li>Keep certificates up to date</li> <li>Use strong ciphers</li> <li>Enable HSTS</li> </ul>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#authentication","level":3,"title":"Authentication","text":"<ul> <li>Always require authentication</li> <li>Use strong master key</li> <li>Rotate API keys regularly</li> <li>Monitor authentication attempts</li> </ul>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#backup","level":2,"title":"Backup","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#configuration-backup","level":3,"title":"Configuration Backup","text":"<pre><code># Backup script\n#!/bin/bash\nDATE=$(date +%Y%m%d)\ntar -czf sellia-backup-$DATE.tar.gz \\\n  .env \\\n  sellia.yml \\\n  certs/\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#automated-backup","level":3,"title":"Automated Backup","text":"<pre><code># Add to crontab\n0 2 * * * /path/to/backup-script.sh\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#scaling","level":2,"title":"Scaling","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#multiple-servers","level":3,"title":"Multiple Servers","text":"<p>For high availability:</p> <ol> <li>Deploy multiple Sellia servers</li> <li>Use load balancer (nginx, HAProxy)</li> <li>Configure shared storage</li> <li>Health checks for failover</li> </ol>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#load-balancer-example-nginx","level":3,"title":"Load Balancer Example (Nginx)","text":"<pre><code>upstream sellia_backend {\n    server sellia1.example.com:3000;\n    server sellia2.example.com:3000;\n    server sellia3.example.com:3000;\n}\n\nserver {\n    listen 80;\n    server_name tunnel.yourdomain.com;\n\n    location / {\n        proxy_pass http://sellia_backend;\n    }\n}\n</code></pre>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#certificate-issues","level":3,"title":"Certificate Issues","text":"<p>Problem: Certificate not loading</p> <p>Solutions: - Verify certificate files exist - Check file permissions (644) - Verify file format (PEM) - Check certificate expiration</p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#dns-issues","level":3,"title":"DNS Issues","text":"<p>Problem: Subdomains not resolving</p> <p>Solutions: - Verify DNS configuration - Check for wildcard DNS record - Wait for DNS propagation (up to 48 hours) - Use <code>dig</code> to verify DNS</p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#connection-issues","level":3,"title":"Connection Issues","text":"<p>Problem: Clients can't connect</p> <p>Solutions: - Check firewall rules - Verify server is running - Check DNS resolution - Verify port is accessible</p>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Admin Guide - Ongoing server administration</li> <li>Configuration - Detailed configuration options</li> <li>Security - Security best practices</li> </ul>","path":["User","Deployment"],"tags":[]},{"location":"user/deployment/caddy/","level":1,"title":"Caddy Reverse Proxy","text":"<p>Caddy is a modern, HTTPS-by-default reverse proxy that works well with Sellia. This guide covers configuring Caddy for production deployments.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#overview","level":2,"title":"Overview","text":"<p>Caddy handles:</p> <ul> <li>TLS termination - Automatic HTTPS with Let's Encrypt</li> <li>HTTP/2 to HTTP/1.1 - Downgrade for WebSocket compatibility</li> <li>Reverse proxy - Forward requests to Sellia server</li> <li>Wildcard subdomains - Handle all tunnel subdomains</li> <li>Static file serving - Health checks and status endpoints</li> </ul>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#quick-start","level":2,"title":"Quick Start","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#using-docker-compose-recommended","level":3,"title":"Using Docker Compose (Recommended)","text":"<p>The easiest way to deploy Sellia with Caddy:</p> <pre><code># docker-compose.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    environment:\n      - SELLIA_USE_HTTPS=true\n      - SELLIA_REQUIRE_AUTH=true\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n    env_file: .env\n    networks:\n      - sellia-internal\n    restart: unless-stopped\n\n  caddy:\n    image: caddy:2-alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/Caddyfile:/etc/caddy/Caddyfile:ro\n      - ./certs:/certs:ro\n      - caddy-data:/data\n      - caddy-config:/config\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN}\n    networks:\n      - sellia-internal\n    depends_on:\n      - sellia-server\n    restart: unless-stopped\n\nvolumes:\n  caddy-data:\n  caddy_config:\n\nnetworks:\n  sellia-internal:\n    driver: bridge\n</code></pre> <p>Run:</p> <pre><code># Create .env file\ncat &gt; .env &lt;&lt;EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=your-master-key\nEOF\n\n# Create certs directory and add certificates\nmkdir -p certs\n# Place cert.pem and key.pem in certs/\n\n# Start\ndocker compose up -d\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#caddyfile-configuration","level":2,"title":"Caddyfile Configuration","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#with-custom-certificates","level":3,"title":"With Custom Certificates","text":"<p>Use this when you have your own TLS certificates (e.g., Cloudflare Origin Certificate):</p> <pre><code># /path/to/Caddyfile\n{\n    # Disable HTTP/3 - it can cause request cancellation issues with tunneled traffic\n    servers {\n        protocols h1 h2\n    }\n}\n\n# HTTP to HTTPS redirect\n:80 {\n    respond /health 200\n\n    # Redir all other HTTP requests to HTTPS\n    @host {\n        host {args.0}\n        not {args.0} :8080\n    }\n    redir @host https://{host}{uri}\n}\n\n# Wildcard for all tunnel subdomains\n*.{$SELLIA_DOMAIN} {\n    reverse_proxy sellia-server:3000 {\n        # Force HTTP/1.1 for backend connection (required for WebSocket)\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    tls /certs/cert.pem /certs/key.pem\n\n    log {\n        output file /var/log/caddy/tunnels.log\n        format json\n    }\n}\n\n# Base domain for WebSocket connections and health checks\n{$SELLIA_DOMAIN} {\n    reverse_proxy sellia-server:3000 {\n        # Force HTTP/1.1 for backend connection (required for WebSocket)\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    tls /certs/cert.pem /certs/key.pem\n\n    log {\n        output file /var/log/caddy/sellia.log\n        format json\n    }\n}\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#with-lets-encrypt-automatic-https","level":3,"title":"With Let's Encrypt (Automatic HTTPS)","text":"<p>For automatic TLS certificate management:</p> <pre><code>{\n    # Disable HTTP/3\n    servers {\n        protocols h1 h2\n    }\n\n    # Email for Let's Encrypt notifications\n    email admin@yourdomain.com\n}\n\n# HTTP to HTTPS redirect\n:80 {\n    respond /health 200\n\n    @host {\n        host {args.0}\n        not {args.0} :8080\n    }\n    redir @host https://{host}{uri}\n}\n\n# Base domain\nyourdomain.com {\n    reverse_proxy sellia-server:3000 {\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    log {\n        output file /var/log/caddy/sellia.log\n        format json\n    }\n}\n\n# Wildcard subdomains\n*.yourdomain.com {\n    reverse_proxy sellia-server:3000 {\n        transport http {\n            versions h1c1\n        }\n        header_up Host {host}\n        header_up X-Real-IP {remote_host}\n        header_up X-Forwarded-For {remote_host}\n        header_up X-Forwarded-Proto {scheme}\n        flush_interval -1\n    }\n\n    log {\n        output file /var/log/caddy/tunnels.log\n        format json\n    }\n}\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#certificate-setup","level":2,"title":"Certificate Setup","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#cloudflare-origin-certificate","level":3,"title":"Cloudflare Origin Certificate","text":"<p>Recommended for use with Cloudflare CDN:</p> <ol> <li>Generate certificate in Cloudflare:</li> <li>Go to SSL/TLS &gt; Origin Server &gt; Create Certificate</li> <li>Select wildcard: <code>*.yourdomain.com</code></li> <li> <p>Copy certificate and key</p> </li> <li> <p>Save certificate files:</p> </li> </ol> <pre><code>mkdir -p certs\nnano certs/cert.pem   # Paste certificate\nnano certs/key.pem    # Paste private key\n</code></pre> <ol> <li>Set permissions:</li> </ol> <pre><code>chmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre> <ol> <li>Update Caddyfile:</li> </ol> <pre><code>tls /certs/cert.pem /certs/key.pem\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#lets-encrypt-automatic-certificates","level":3,"title":"Let's Encrypt Automatic Certificates","text":"<p>Caddy will automatically obtain and renew certificates from Let's Encrypt:</p> <p>Requirements: - DNS A record for <code>yourdomain.com</code> → your server IP - DNS A record for <code>*.yourdomain.com</code> → your server IP (if supported) - Port 80 and 443 accessible from internet</p> <p>No configuration needed - Caddy handles everything.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#http3-disabled","level":3,"title":"HTTP/3 Disabled","text":"<pre><code>servers {\n    protocols h1 h2\n}\n</code></pre> <p>Why: HTTP/3 (QUIC) can cause WebSocket connection issues with tunneled traffic.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#http11-backend","level":3,"title":"HTTP/1.1 Backend","text":"<pre><code>transport http {\n    versions h1c1\n}\n</code></pre> <p>Why: Sellia's WebSocket server uses HTTP/1.1. HTTP/2 can cause issues with WebSocket upgrades.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#headers","level":3,"title":"Headers","text":"<pre><code>header_up Host {host}\nheader_up X-Real-IP {remote_host}\nheader_up X-Forwarded-For {remote_host}\nheader_up X-Forwarded-Proto {scheme}\n</code></pre> <p>Why: Pass original client information to Sellia server for logging and authentication.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#no-buffering","level":3,"title":"No Buffering","text":"<pre><code>flush_interval -1\n</code></pre> <p>Why: Disable buffering for real-time WebSocket traffic and large file uploads.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#logging","level":2,"title":"Logging","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#json-format","level":3,"title":"JSON Format","text":"<pre><code>log {\n    output file /var/log/caddy/tunnels.log\n    format json\n}\n</code></pre> <p>Benefits: - Structured logs for parsing - Easy integration with log aggregators (ELK, Splunk, etc.) - Includes timestamps, status codes, response times</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#log-rotation","level":3,"title":"Log Rotation","text":"<p>Configure logrotate:</p> <pre><code># /etc/logrotate.d/caddy\n/var/log/caddy/*.log {\n    daily\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 caddy caddy\n    sharedscripts\n    postrotate\n        systemctl reload caddy &gt; /dev/null 2&gt;&amp;1 || true\n    endscript\n}\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#health-checks","level":2,"title":"Health Checks","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#simple-health-check","level":3,"title":"Simple Health Check","text":"<pre><code>:80 {\n    respond /health 200\n}\n</code></pre> <p>Returns 200 OK at <code>http://your-domain.com/health</code>.</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#docker-healthcheck","level":3,"title":"Docker Healthcheck","text":"<pre><code># docker-compose.yml\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--spider\", \"-q\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 5s\n      retries: 3\n      start_period: 5s\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#performance-tuning","level":2,"title":"Performance Tuning","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#connection-limits","level":3,"title":"Connection Limits","text":"<pre><code>{\n    servers {\n        protocols h1 h2\n        max_conns 1000\n    }\n}\n</code></pre>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#timeouts","level":3,"title":"Timeouts","text":"<pre><code>reverse_proxy sellia-server:3000 {\n    transport http {\n        read_timeout 300s\n        write_timeout 300s\n        dial_timeout 10s\n    }\n}\n</code></pre> <p>Recommended for Sellia: - <code>read_timeout</code>: 300s (5 minutes) - For long-lived WebSocket connections - <code>write_timeout</code>: 300s (5 minutes) - For large uploads - <code>dial_timeout</code>: 10s - Backend connection timeout</p>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#websocket-connection-failures","level":3,"title":"WebSocket Connection Failures","text":"<p>Symptoms: Tunnels connect but immediately disconnect.</p> <p>Solutions:</p> <ol> <li> <p>Verify HTTP/1.1 transport: <pre><code>transport http {\n    versions h1c1\n}\n</code></pre></p> </li> <li> <p>Disable HTTP/3: <pre><code>servers {\n    protocols h1 h2\n}\n</code></pre></p> </li> <li> <p>Check for buffering: <pre><code>flush_interval -1\n</code></pre></p> </li> </ol>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#tls-certificate-errors","level":3,"title":"TLS Certificate Errors","text":"<p>Symptoms: <code>502 Bad Gateway</code> or certificate warnings.</p> <p>Solutions:</p> <ol> <li> <p>Verify certificate files exist: <pre><code>ls -la certs/\n</code></pre></p> </li> <li> <p>Check certificate validity: <pre><code>openssl x509 -in certs/cert.pem -text -noout\n</code></pre></p> </li> <li> <p>Check Caddy logs: <pre><code>docker-compose logs caddy\n</code></pre></p> </li> </ol>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#dns-issues","level":3,"title":"DNS Issues","text":"<p>Symptoms: Tunnels not accessible via subdomain.</p> <p>Solutions:</p> <ol> <li> <p>Verify DNS A record: <pre><code>dig yourdomain.com\ndig myapp.yourdomain.com\n</code></pre></p> </li> <li> <p>For wildcard DNS:</p> </li> <li>Add A record: <code>*.yourdomain.com</code> → your server IP</li> <li> <p>Or use CNAME: <code>*.yourdomain.com</code> → <code>yourdomain.com</code></p> </li> <li> <p>Check Cloudflare proxy (orange cloud):</p> </li> <li>Disable for Sellia subdomains if using WebSocket</li> <li>Or use \"DNS only\" (grey cloud)</li> </ol>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#port-conflicts","level":3,"title":"Port Conflicts","text":"<p>Symptoms: Caddy fails to start.</p> <p>Solutions:</p> <ol> <li> <p>Check ports in use: <pre><code>sudo lsof -i :80\nsudo lsof -i :443\n</code></pre></p> </li> <li> <p>Stop conflicting services: <pre><code>sudo systemctl stop nginx\nsudo systemctl stop apache\n</code></pre></p> </li> <li> <p>Use different ports (not recommended): <pre><code>:8080 {\n    # ...\n}\n</code></pre></p> </li> </ol>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#production-checklist","level":2,"title":"Production Checklist","text":"<ul> <li> TLS certificates configured (Let's Encrypt or custom)</li> <li> DNS records pointing to server (A records)</li> <li> Wildcard DNS for subdomains (or individual records)</li> <li> HTTP/3 disabled in Caddyfile</li> <li> HTTP/1.1 transport for backend</li> <li> Log rotation configured</li> <li> Health check endpoint accessible</li> <li> Firewall allows ports 80 and 443</li> <li> SELinux/AppArmor configured (if applicable)</li> <li> Caddy service auto-start on boot</li> <li> Backup strategy for Caddy data</li> </ul>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/caddy/#see-also","level":2,"title":"See Also","text":"<ul> <li>Nginx Configuration - Alternative to Caddy</li> <li>Production Checklist - Complete production guide</li> <li>Server Auth - Authentication setup</li> <li>Database Configuration - Database setup</li> </ul>","path":["User","Deployment","Caddy Reverse Proxy"],"tags":[]},{"location":"user/deployment/docker/","level":1,"title":"Docker Deployment","text":"<p>Deploy Sellia using Docker or Docker Compose for production. Containerization provides isolation, easy deployment, and consistent environments across development, staging, and production.</p>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#prerequisites","level":2,"title":"Prerequisites","text":"<ul> <li>Docker &gt;= 20.10</li> <li>Docker Compose &gt;= 2.0</li> <li>Domain name with DNS configured</li> <li>TLS certificates (see TLS Certificates guide)</li> </ul>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#quick-start","level":2,"title":"Quick Start","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#using-docker-compose-recommended","level":3,"title":"Using Docker Compose (Recommended)","text":"<p>The fastest way to deploy Sellia:</p> <pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Create environment file\ncat &gt; .env &lt;&lt; EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nEOF\n\n# Create certs directory and add your certificates\nmkdir -p certs\n# Place cert.pem and key.pem in the certs directory\n\n# Start the server\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#verify-deployment","level":3,"title":"Verify Deployment","text":"<pre><code># Check logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Check status\ndocker compose -f docker-compose.prod.yml ps\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#docker-compose-configuration","level":2,"title":"Docker Compose Configuration","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#production-docker-compose","level":3,"title":"Production Docker Compose","text":"<p>The <code>docker-compose.prod.yml</code> file:</p> <pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    container_name: sellia-server\n    restart: unless-stopped\n    env_file: .env\n    networks:\n      - sellia-internal\n    environment:\n      - SELLIA_USE_HTTPS=true\n      - SELLIA_REQUIRE_AUTH=true\n\n  caddy:\n    image: caddy:2-alpine\n    container_name: sellia-caddy\n    restart: unless-stopped\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/Caddyfile:/etc/caddy/Caddyfile:ro\n      - ./certs:/certs:ro\n      - caddy_data:/data\n      - caddy_config:/config\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN:-localhost}\n    networks:\n      - sellia-internal\n    depends_on:\n      - sellia-server\n\nnetworks:\n  sellia-internal:\n    driver: bridge\n\nvolumes:\n  caddy_data:\n  caddy_config:\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#environment-file","level":3,"title":"Environment File","text":"<p>Create <code>.env</code> file:</p> <pre><code># .env\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#building-the-docker-image","level":2,"title":"Building the Docker Image","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#build-from-source","level":3,"title":"Build from Source","text":"<pre><code># Clone repository\ngit clone https://github.com/watzon/sellia.git\ncd sellia\n\n# Build image\ndocker build -t sellia:latest .\n\n# Or with build arguments\ndocker build \\\n  --build-arg VERSION=1.0.0 \\\n  --build-arg BUILD_DATE=$(date -u +'%Y-%m-%dT%H:%M:%SZ') \\\n  -t sellia:latest .\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#dockerfile","level":3,"title":"Dockerfile","text":"<p>The official Dockerfile:</p> <pre><code># Sellia Server - Multi-stage Docker build for minimal production image\n\n# =============================================================================\n# Stage 1: Build Crystal server binary\n# =============================================================================\nFROM 84codes/crystal:1.18.2-alpine AS builder\n\n# Install build dependencies\nRUN apk add --no-cache --update \\\n    yaml-static \\\n    openssl-libs-static \\\n    openssl-dev \\\n    zlib-static \\\n    sqlite-dev \\\n    sqlite-static \\\n    pcre-dev \\\n    gc-dev \\\n    libevent-static \\\n    libxml2-dev\n\nWORKDIR /app\n\n# Copy shard files first for layer caching\nCOPY shard.yml shard.lock ./\nRUN shards install --production\n\n# Copy source code\nCOPY src/ src/\n\n# Build server binary (static for Alpine)\nRUN mkdir -p bin &amp;&amp; crystal build src/server/main.cr -o bin/sellia-server \\\n    --release --static --no-debug\n\n# =============================================================================\n# Stage 2: Minimal runtime image\n# =============================================================================\nFROM alpine:3.20 AS runtime\n\n# Add CA certificates for HTTPS and create non-root user\nRUN apk add --no-cache ca-certificates tzdata \\\n    &amp;&amp; addgroup -g 1000 sellia \\\n    &amp;&amp; adduser -u 1000 -G sellia -s /bin/sh -D sellia\n\nWORKDIR /app\n\n# Copy server binary from builder\nCOPY --from=builder /app/bin/sellia-server /usr/local/bin/sellia-server\n\n# Set ownership\nRUN chown -R sellia:sellia /app\n\nUSER sellia\n\n# Default environment variables\nENV SELLIA_HOST=0.0.0.0 \\\n    SELLIA_PORT=3000 \\\n    SELLIA_DOMAIN=localhost\n\nEXPOSE 3000\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=5s --start-period=5s --retries=3 \\\n    CMD wget --no-verbose --tries=1 --spider http://localhost:${SELLIA_PORT}/health || exit 1\n\nENTRYPOINT [\"sellia-server\"]\nCMD [\"--host\", \"0.0.0.0\"]\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#docker-run-commands","level":2,"title":"Docker Run Commands","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#basic-server","level":3,"title":"Basic Server","text":"<pre><code>docker run -d \\\n  --name sellia-server \\\n  -p 3000:3000 \\\n  -e SELLIA_DOMAIN=yourdomain.com \\\n  -e SELLIA_MASTER_KEY=$(openssl rand -hex 32) \\\n  -e SELLIA_REQUIRE_AUTH=true \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#with-environment-file","level":3,"title":"With Environment File","text":"<pre><code>docker run -d \\\n  --name sellia-server \\\n  --env-file .env \\\n  -p 3000:3000 \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#interactive-testing","level":3,"title":"Interactive Testing","text":"<pre><code>docker run -it \\\n  --rm \\\n  -p 3000:3000 \\\n  -e SELLIA_DOMAIN=yourdomain.com \\\n  ghcr.io/watzon/sellia:latest\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#docker-compose-workflows","level":2,"title":"Docker Compose Workflows","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#start-server","level":3,"title":"Start Server","text":"<pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#stop-server","level":3,"title":"Stop Server","text":"<pre><code>docker compose -f docker-compose.prod.yml down\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#view-logs","level":3,"title":"View Logs","text":"<pre><code># Follow logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Last 100 lines\ndocker compose -f docker-compose.prod.yml logs --tail 100\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#restart-server","level":3,"title":"Restart Server","text":"<pre><code>docker compose -f docker-compose.prod.yml restart\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#update-deployment","level":3,"title":"Update Deployment","text":"<pre><code># Pull latest changes\ngit pull\n\n# Rebuild image\ndocker compose -f docker-compose.prod.yml build\n\n# Restart with new image\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#multi-stage-deployment","level":2,"title":"Multi-Stage Deployment","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#development-staging-production","level":3,"title":"Development, Staging, Production","text":"<p>Create multiple compose files:</p> <pre><code># docker-compose.dev.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    ports:\n      - \"3000:3000\"\n    environment:\n      - SELLIA_DOMAIN=localhost\n      - SELLIA_USE_HTTPS=false\n      - LOG_LEVEL=debug\n</code></pre> <pre><code># docker-compose.staging.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    environment:\n      - SELLIA_DOMAIN=staging.yourdomain.com\n      - SELLIA_USE_HTTPS=true\n      - LOG_LEVEL=debug\n</code></pre> <pre><code># docker-compose.prod.yml\nversion: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n      - SELLIA_USE_HTTPS=true\n      - LOG_LEVEL=warn\n</code></pre> <p>Deploy to each environment:</p> <pre><code># Development\ndocker compose -f docker-compose.dev.yml up -d\n\n# Staging\ndocker compose -f docker-compose.staging.yml up -d\n\n# Production\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#reverse-proxy-setup","level":2,"title":"Reverse Proxy Setup","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#with-nginx","level":3,"title":"With Nginx","text":"<pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    expose:\n      - \"3000\"\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n    restart: unless-stopped\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./certs:/etc/nginx/certs:ro\n    depends_on:\n      - sellia-server\n    restart: unless-stopped\n</code></pre> <p>Nginx configuration (<code>nginx.conf</code>):</p> <pre><code>events {\n    worker_connections 1024;\n}\n\nhttp {\n    upstream sellia {\n        server sellia-server:3000;\n    }\n\n    server {\n        listen 80;\n        server_name yourdomain.com *.yourdomain.com;\n        return 301 https://$server_name$request_uri;\n    }\n\n    server {\n        listen 443 ssl http2;\n        server_name yourdomain.com *.yourdomain.com;\n\n        ssl_certificate /etc/nginx/certs/cert.pem;\n        ssl_certificate_key /etc/nginx/certs/key.pem;\n\n        location / {\n            proxy_pass http://sellia;\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection \"upgrade\";\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }\n    }\n}\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#with-traefik","level":3,"title":"With Traefik","text":"<pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    expose:\n      - \"3000\"\n    environment:\n      - SELLIA_DOMAIN=yourdomain.com\n    labels:\n      - \"traefik.enable=true\"\n      - \"traefik.http.routers.sellia.rule=HostRegexp(`{subdomain:.+}.yourdomain.com`)\"\n      - \"traefik.http.routers.sellia.entrypoints=websecure\"\n      - \"traefik.http.routers.sellia.tls.certresolver=letsencrypt\"\n    networks:\n      - traefik-network\n\n  traefik:\n    image: traefik:v2.10\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n      - ./traefik.yml:/etc/traefik/traefik.yml\n      - ./acme.json:/acme.json\n    networks:\n      - traefik-network\n\nnetworks:\n  traefik-network:\n    external: true\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#health-checks","level":2,"title":"Health Checks","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#docker-healthcheck","level":3,"title":"Docker Healthcheck","text":"<pre><code>services:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--spider\", \"-q\", \"http://localhost:3000/health\"]\n      interval: 30s\n      timeout: 5s\n      retries: 3\n      start_period: 5s\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#manual-health-check","level":3,"title":"Manual Health Check","text":"<pre><code># Check if container is healthy\ndocker inspect --format='{{.State.Health.Status}}' sellia-server\n\n# Check health endpoint\ncurl http://localhost:3000/health\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#volume-management","level":2,"title":"Volume Management","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#tls-certificates","level":3,"title":"TLS Certificates","text":"<p>In production with Caddy/Nginx reverse proxy, certificates are mounted to the reverse proxy container, not Sellia:</p> <pre><code># For Caddy (docker-compose.prod.yml)\nvolumes:\n  - ./certs:/certs:ro\n\n# For Nginx\nvolumes:\n  - ./certs:/etc/nginx/certs:ro\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#persistent-data","level":3,"title":"Persistent Data","text":"<p>Sellia uses SQLite for tunnel registry and reserved subdomains. Persist the database:</p> <pre><code>volumes:\n  - sellia-data:/var/lib/sellia\n\nvolumes:\n  sellia-data:\n    driver: local\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#resource-limits","level":2,"title":"Resource Limits","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#cpu-and-memory-limits","level":3,"title":"CPU and Memory Limits","text":"<pre><code>services:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    deploy:\n      resources:\n        limits:\n          cpus: '1.0'\n          memory: 1G\n        reservations:\n          cpus: '0.5'\n          memory: 512M\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#logging","level":2,"title":"Logging","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#view-logs_1","level":3,"title":"View Logs","text":"<pre><code># All logs\ndocker compose logs -f\n\n# Specific service\ndocker compose logs -f sellia-server\n\n# Last 100 lines\ndocker compose logs --tail 100 sellia-server\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#log-rotation","level":3,"title":"Log Rotation","text":"<p>Configure Docker daemon for log rotation (<code>/etc/docker/daemon.json</code>):</p> <pre><code>{\n  \"log-driver\": \"json-file\",\n  \"log-opts\": {\n    \"max-size\": \"10m\",\n    \"max-file\": \"3\"\n  }\n}\n</code></pre> <p>Restart Docker:</p> <pre><code>sudo systemctl restart docker\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#1-read-only-certificates","level":3,"title":"1. Read-Only Certificates","text":"<p>Mount certificates as read-only:</p> <pre><code>volumes:\n  - ./certs:/app/certs:ro\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#2-non-root-user","level":3,"title":"2. Non-Root User","text":"<p>Run as non-root user (if supported by image):</p> <pre><code>services:\n  sellia-server:\n    user: \"1000:1000\"\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#3-drop-capabilities","level":3,"title":"3. Drop Capabilities","text":"<pre><code>services:\n  sellia-server:\n    cap_drop:\n      - ALL\n    cap_add:\n      - NET_BIND_SERVICE\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#4-network-isolation","level":3,"title":"4. Network Isolation","text":"<p>Use dedicated network:</p> <pre><code>services:\n  sellia-server:\n    networks:\n      - sellia-net\n\nnetworks:\n  sellia-net:\n    driver: bridge\n    internal: false\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#5-secrets-management","level":3,"title":"5. Secrets Management","text":"<p>Use Docker secrets (Swarm mode):</p> <pre><code>version: '3.8'\n\nsecrets:\n  master_key:\n    external: true\n\nservices:\n  sellia-server:\n    image: sellia:latest\n    secrets:\n      - master_key\n    environment:\n      - SELLIA_MASTER_KEY_FILE=/run/secrets/master_key\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#cicd-integration","level":2,"title":"CI/CD Integration","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#github-actions","level":3,"title":"GitHub Actions","text":"<pre><code>name: Deploy Sellia\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Deploy to server\n        uses: appleboy/ssh-action@master\n        with:\n          host: ${{ secrets.HOST }}\n          username: ${{ secrets.USERNAME }}\n          key: ${{ secrets.SSH_KEY }}\n          script: |\n            cd /opt/sellia\n            git pull\n            docker compose -f docker-compose.prod.yml up -d --build\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#gitlab-ci","level":3,"title":"GitLab CI","text":"<pre><code>deploy:\n  stage: deploy\n  script:\n    - ssh user@server \"cd /opt/sellia &amp;&amp; docker compose -f docker-compose.prod.yml up -d --build\"\n  only:\n    - main\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#monitoring","level":2,"title":"Monitoring","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#metrics-endpoint","level":3,"title":"Metrics Endpoint","text":"<p>Sellia may expose metrics (future feature):</p> <pre><code>services:\n  sellia-server:\n    ports:\n      - \"9090:9090\"  # Metrics port\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#prometheus-integration","level":3,"title":"Prometheus Integration","text":"<pre><code>services:\n  prometheus:\n    image: prom/prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n    ports:\n      - \"9091:9090\"\n</code></pre> <p>Prometheus config:</p> <pre><code>scrape_configs:\n  - job_name: 'sellia'\n    static_configs:\n      - targets: ['sellia-server:9090']\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#container-wont-start","level":3,"title":"Container Won't Start","text":"<pre><code># Check logs\ndocker compose logs sellia-server\n\n# Check container status\ndocker compose ps\n\n# Inspect container\ndocker inspect sellia-server\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#permission-issues","level":3,"title":"Permission Issues","text":"<pre><code># Check file permissions\nls -la certs/\n\n# Fix permissions\nchmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<pre><code># Check what's using the port\nlsof -i :80\nlsof -i :443\n\n# Stop conflicting service\nsudo systemctl stop nginx\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#dns-issues","level":3,"title":"DNS Issues","text":"<pre><code># Verify DNS configuration\ndig yourdomain.com\ndig *.yourdomain.com\n\n# Check Cloudflare/SaaS DNS settings\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#backup-and-restore","level":2,"title":"Backup and Restore","text":"","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#backup","level":3,"title":"Backup","text":"<pre><code># Backup certificates and configuration\ntar -czf sellia-backup-$(date +%Y%m%d).tar.gz \\\n  .env \\\n  docker-compose.prod.yml \\\n  certs/\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#restore","level":3,"title":"Restore","text":"<pre><code># Extract backup\ntar -xzf sellia-backup-20241230.tar.gz\n\n# Restart server\ndocker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>TLS Certificates - Certificate setup</li> <li>Configuration - Configuration files</li> <li>Self-Hosting - Server setup</li> </ul>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/docker/#quick-reference","level":2,"title":"Quick Reference","text":"Task Command Start server <code>docker compose up -d</code> Stop server <code>docker compose down</code> View logs <code>docker compose logs -f</code> Rebuild <code>docker compose build</code> Update <code>git pull &amp;&amp; docker compose up -d --build</code> Status <code>docker compose ps</code> Health check <code>curl http://localhost/health</code>","path":["User","Deployment","Docker Deployment"],"tags":[]},{"location":"user/deployment/nginx/","level":1,"title":"Nginx Reverse Proxy","text":"<p>Nginx is a high-performance reverse proxy that works well with Sellia. This guide covers configuring Nginx for production deployments.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#overview","level":2,"title":"Overview","text":"<p>Nginx handles:</p> <ul> <li>TLS termination - HTTPS with your certificates</li> <li>HTTP/2 to HTTP/1.1 - Downgrade for WebSocket compatibility</li> <li>Reverse proxy - Forward requests to Sellia server</li> <li>Wildcard subdomains - Handle all tunnel subdomains</li> <li>Static file serving - Health checks and status endpoints</li> </ul>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#quick-start","level":2,"title":"Quick Start","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#prerequisites","level":3,"title":"Prerequisites","text":"<pre><code># Install Nginx\nsudo apt update\nsudo apt install nginx\n\n# Install Certbot for Let's Encrypt\nsudo apt install certbot python3-certbot-nginx\n\n# Ensure Nginx is running\nsudo systemctl enable nginx\nsudo systemctl start nginx\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#configuration","level":2,"title":"Configuration","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#full-configuration-file","level":3,"title":"Full Configuration File","text":"<p>This configuration is available at <code>/deploy/nginx.conf</code> in the Sellia repository. Replace <code>YOUR_DOMAIN</code> with your actual domain:</p> <pre><code># Upstream for Sellia server\nupstream sellia_backend {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name yourdomain.com *.yourdomain.com;\n\n    location /.well-known/acme-challenge/ {\n        root /var/www/certbot;\n    }\n\n    location / {\n        return 301 https://$host$request_uri;\n    }\n}\n\n# HTTPS server - handles both main domain and subdomains\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name yourdomain.com *.yourdomain.com;\n\n    # SSL Configuration\n    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;\n    ssl_session_timeout 1d;\n    ssl_session_cache shared:SSL:50m;\n    ssl_session_tickets off;\n\n    # Modern TLS configuration\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;\n    ssl_prefer_server_ciphers off;\n\n    # HSTS (uncomment after testing)\n    # add_header Strict-Transport-Security \"max-age=63072000\" always;\n\n    # Proxy settings\n    proxy_http_version 1.1;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header X-Forwarded-Proto $scheme;\n\n    # WebSocket support\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n\n    # Timeouts for long-lived connections\n    proxy_connect_timeout 60s;\n    proxy_send_timeout 300s;\n    proxy_read_timeout 300s;\n\n    # Buffering settings\n    proxy_buffering off;\n    proxy_request_buffering off;\n\n    # Main location\n    location / {\n        proxy_pass http://sellia_backend;\n    }\n\n    # Health check endpoint\n    location /health {\n        proxy_pass http://sellia_backend;\n        access_log off;\n    }\n\n    # WebSocket endpoint for tunnels\n    location /ws {\n        proxy_pass http://sellia_backend;\n\n        # Extended timeout for WebSocket connections\n        proxy_read_timeout 86400s;\n        proxy_send_timeout 86400s;\n    }\n}\n\n# Optional: Status endpoint for monitoring\nserver {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n\n    location /nginx_status {\n        stub_status on;\n        access_log off;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#deploying-configuration","level":3,"title":"Deploying Configuration","text":"<ol> <li>Copy and modify configuration:</li> </ol> <pre><code>sudo cp deploy/nginx.conf /etc/nginx/sites-available/sellia\nsudo nano /etc/nginx/sites-available/sellia\n\n# Replace 'YOUR_DOMAIN' with your actual domain (e.g., sellia.me)\n</code></pre> <ol> <li>Enable site:</li> </ol> <pre><code>sudo ln -s /etc/nginx/sites-available/sellia /etc/nginx/sites-enabled/\n</code></pre> <ol> <li>Test configuration:</li> </ol> <pre><code>sudo nginx -t\n</code></pre> <ol> <li>Reload Nginx:</li> </ol> <pre><code>sudo systemctl reload nginx\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#certificate-setup","level":2,"title":"Certificate Setup","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#lets-encrypt-certificates","level":3,"title":"Let's Encrypt Certificates","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#obtain-wildcard-certificate","level":4,"title":"Obtain Wildcard Certificate","text":"<pre><code># Obtain wildcard certificate (requires DNS challenge)\nsudo certbot certonly --manual --preferred-challenges dns -d yourdomain.com -d *.yourdomain.com\n\n# Follow instructions to add DNS TXT record\n# Wait for DNS propagation, then press Enter\n</code></pre> <p>Alternative: HTTP validation (no wildcard)</p> <pre><code>sudo certbot --nginx -d yourdomain.com\n</code></pre> <p>Note: HTTP validation only works for the base domain, not wildcard subdomains.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#auto-renewal","level":4,"title":"Auto-Renewal","text":"<p>Certbot sets up auto-renewal automatically. Verify:</p> <pre><code>sudo certbot renew --dry-run\n</code></pre> <p>Cron job is created at <code>/etc/cron.d/certbot</code>.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#custom-certificates","level":3,"title":"Custom Certificates","text":"<p>For Cloudflare Origin Certificate or other custom certificates:</p> <ol> <li>Place certificate files:</li> </ol> <pre><code>sudo cp cert.pem /etc/ssl/certs/sellia.crt\nsudo cp key.pem /etc/ssl/private/sellia.key\nsudo chmod 644 /etc/ssl/certs/sellia.crt\nsudo chmod 600 /etc/ssl/private/sellia.key\n</code></pre> <ol> <li>Update Nginx config:</li> </ol> <pre><code>ssl_certificate /etc/ssl/certs/sellia.crt;\nssl_certificate_key /etc/ssl/private/sellia.key;\n</code></pre> <ol> <li>Reload Nginx:</li> </ol> <pre><code>sudo systemctl reload nginx\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#configuration-options-explained","level":2,"title":"Configuration Options Explained","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#upstream-configuration","level":3,"title":"Upstream Configuration","text":"<pre><code>upstream sellia_backend {\n    server 127.0.0.1:3000;\n    keepalive 64;\n}\n</code></pre> <p>Why: - <code>keepalive 64</code> - Keep 64 connections open to backend for better performance - Reduces TCP handshake overhead</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#http2","level":3,"title":"HTTP/2","text":"<pre><code>listen 443 ssl http2;\n</code></pre> <p>Why: - HTTP/2 is faster for clients - Nginx handles HTTP/2 to backend - Backend still uses HTTP/1.1 for WebSocket compatibility</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#websocket-support","level":3,"title":"WebSocket Support","text":"<pre><code>proxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\n</code></pre> <p>Why: - Required for WebSocket protocol upgrade - Without this, tunnel connections fail</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#timeouts","level":3,"title":"Timeouts","text":"<pre><code>proxy_connect_timeout 60s;\nproxy_send_timeout 300s;\nproxy_read_timeout 300s;\n</code></pre> <p>For <code>/ws</code> endpoint:</p> <pre><code>proxy_read_timeout 86400s;\nproxy_send_timeout 86400s;\n</code></pre> <p>Why: - Tunnel WebSocket connections are long-lived - 86400s = 24 hours (practically unlimited) - Prevents premature disconnection</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#no-buffering","level":3,"title":"No Buffering","text":"<pre><code>proxy_buffering off;\nproxy_request_buffering off;\n</code></pre> <p>Why: - Real-time data flow for WebSocket - Large file uploads don't consume memory - Lower latency</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#http11-to-backend","level":3,"title":"HTTP/1.1 to Backend","text":"<pre><code>proxy_http_version 1.1;\n</code></pre> <p>Why: - Required for WebSocket support - Backend server speaks HTTP/1.1</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#performance-tuning","level":2,"title":"Performance Tuning","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#worker-processes","level":3,"title":"Worker Processes","text":"<pre><code># /etc/nginx/nginx.conf\nworker_processes auto;\n\nevents {\n    worker_connections 1024;\n}\n</code></pre> <p>Recommendations: - <code>worker_processes auto</code> - One worker per CPU core - <code>worker_connections 1024</code> - Adjust based on load</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#connection-limits","level":3,"title":"Connection Limits","text":"<pre><code># /etc/nginx/nginx.conf\nlimit_conn_zone $binary_remote_addr zone=addr:10m;\n\nserver {\n    limit_conn addr 10;\n}\n</code></pre> <p>Why: Prevent abuse from single IP addresses.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#rate-limiting","level":3,"title":"Rate Limiting","text":"<pre><code># /etc/nginx/nginx.conf\nlimit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;\n\nserver {\n    location /api/ {\n        limit_req zone=api burst=20;\n    }\n}\n</code></pre> <p>Why: Protect API endpoints from abuse.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#gzip-compression","level":3,"title":"Gzip Compression","text":"<pre><code># /etc/nginx/nginx.conf\ngzip on;\ngzip_vary on;\ngzip_min_length 1024;\ngzip_types text/plain text/css text/xml text/javascript application/json application/javascript application/xml+rss application/rss+xml font/truetype font/opentype application/vnd.ms-fontobject image/svg+xml;\n</code></pre> <p>Why: Reduce bandwidth usage for text-based responses.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#logging","level":2,"title":"Logging","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#access-logs","level":3,"title":"Access Logs","text":"<pre><code>access_log /var/log/nginx/sellia-access.log;\n</code></pre> <p>JSON format for log aggregation:</p> <pre><code>log_format json_combined escape=json '{'\n    '\"time_local\":\"$time_local\",'\n    '\"remote_addr\":\"$remote_addr\",'\n    '\"remote_user\":\"$remote_user\",'\n    '\"request\":\"$request\",'\n    '\"status\": \"$status\",'\n    '\"body_bytes_sent\":\"$body_bytes_sent\",'\n    '\"request_time\":\"$request_time\",'\n    '\"http_referrer\":\"$http_referer\",'\n    '\"http_user_agent\":\"$http_user_agent\"'\n'}';\n\naccess_log /var/log/nginx/sellia-access.log json_combined;\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#error-logs","level":3,"title":"Error Logs","text":"<pre><code>error_log /var/log/nginx/sellia-error.log warn;\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#log-rotation","level":3,"title":"Log Rotation","text":"<pre><code># /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 www-data adm\n    sharedscripts\n    prerotate\n        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\\n            run-parts /etc/logrotate.d/httpd-prerotate; \\\n        fi\n    endscript\n    postrotate\n        invoke-rc.d nginx rotate &gt;/dev/null 2&gt;&amp;1 || true\n    endscript\n}\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#monitoring","level":2,"title":"Monitoring","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#nginx-status-module","level":3,"title":"Nginx Status Module","text":"<pre><code>server {\n    listen 127.0.0.1:8080;\n    server_name localhost;\n\n    location /nginx_status {\n        stub_status on;\n        access_log off;\n        allow 127.0.0.1;\n        deny all;\n    }\n}\n</code></pre> <p>Check status:</p> <pre><code>curl http://127.0.0.1:8080/nginx_status\n</code></pre> <p>Output:</p> <pre><code>Active connections: 10\nserver accepts handled requests\n 1000 1000 5000\nReading: 0 Writing: 2 Waiting: 8\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#security-hardening","level":2,"title":"Security Hardening","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#hsts","level":3,"title":"HSTS","text":"<pre><code>add_header Strict-Transport-Security \"max-age=63072000\" always;\n</code></pre> <p>Enable only after: - TLS is working correctly - No mixed content issues - Tested thoroughly</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#disable-server-tokens","level":3,"title":"Disable Server Tokens","text":"<pre><code># /etc/nginx/nginx.conf\nserver_tokens off;\n</code></pre> <p>Why: Hide Nginx version from HTTP headers.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#limit-request-size","level":3,"title":"Limit Request Size","text":"<pre><code>client_max_body_size 100M;\n</code></pre> <p>Adjust based on your needs.</p>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#ip-whitelisting-optional","level":3,"title":"IP Whitelisting (Optional)","text":"<p>For admin endpoints:</p> <pre><code>location /api/admin {\n    allow 192.168.1.0/24;\n    deny all;\n    proxy_pass http://sellia_backend;\n}\n</code></pre>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#websocket-disconnections","level":3,"title":"WebSocket Disconnections","text":"<p>Symptoms: Tunnels connect but immediately disconnect.</p> <p>Solutions:</p> <ol> <li> <p>Verify WebSocket headers: <pre><code>proxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection \"upgrade\";\n</code></pre></p> </li> <li> <p>Check timeouts: <pre><code>proxy_read_timeout 86400s;\nproxy_send_timeout 86400s;\n</code></pre></p> </li> <li> <p>Verify HTTP/1.1: <pre><code>proxy_http_version 1.1;\n</code></pre></p> </li> </ol>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#502-bad-gateway","level":3,"title":"502 Bad Gateway","text":"<p>Symptoms: Nginx can't connect to Sellia server.</p> <p>Solutions:</p> <ol> <li> <p>Check Sellia server is running: <pre><code>sudo systemctl status sellia-server\n</code></pre></p> </li> <li> <p>Verify upstream address: <pre><code>curl http://127.0.0.1:3000/health\n</code></pre></p> </li> <li> <p>Check SELinux: <pre><code>sudo setsebool -P httpd_can_network_connect 1\n</code></pre></p> </li> </ol>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#certificate-errors","level":3,"title":"Certificate Errors","text":"<p>Symptoms: Browser warnings or connection failures.</p> <p>Solutions:</p> <ol> <li> <p>Verify certificate files exist: <pre><code>ls -la /etc/letsencrypt/live/yourdomain.com/\n</code></pre></p> </li> <li> <p>Check certificate validity: <pre><code>sudo certbot certificates\n</code></pre></p> </li> <li> <p>Reload Nginx after renewal: <pre><code>sudo systemctl reload nginx\n</code></pre></p> </li> </ol>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#dns-configuration","level":3,"title":"DNS Configuration","text":"<p>Symptoms: Subdomains not accessible.</p> <p>Solutions:</p> <ol> <li> <p>Verify DNS records: <pre><code>dig yourdomain.com\ndig myapp.yourdomain.com\n</code></pre></p> </li> <li> <p>For wildcard subdomains:</p> </li> <li>Add A record: <code>*.yourdomain.com</code> → your server IP</li> <li> <p>Or use CNAME: <code>*.yourdomain.com</code> → <code>yourdomain.com</code></p> </li> <li> <p>Check Nginx server_name: <pre><code>server_name yourdomain.com *.yourdomain.com;\n</code></pre></p> </li> </ol>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#production-checklist","level":2,"title":"Production Checklist","text":"<ul> <li> TLS certificates installed and valid</li> <li> DNS records configured (A records for base and wildcard)</li> <li> Nginx configuration tested (<code>nginx -t</code>)</li> <li> HTTP to HTTPS redirect working</li> <li> WebSocket connections successful</li> <li> Log rotation configured</li> <li> HSTS enabled (after testing)</li> <li> Server tokens disabled</li> <li> Firewall allows ports 80 and 443</li> <li> SELinux/AppArmor configured</li> <li> Monitor Nginx status endpoint</li> <li> Backup Nginx configuration</li> <li> Auto-renewal of Let's Encrypt certificates verified</li> </ul>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/nginx/#see-also","level":2,"title":"See Also","text":"<ul> <li>Caddy Configuration - Alternative to Nginx</li> <li>Production Checklist - Complete production guide</li> <li>Server Auth - Authentication setup</li> <li>Database Configuration - Database setup</li> </ul>","path":["User","Deployment","Nginx Reverse Proxy"],"tags":[]},{"location":"user/deployment/production-checklist/","level":1,"title":"Production Deployment Checklist","text":"<p>A comprehensive security and production hardening checklist for deploying Sellia servers.</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#pre-deployment-planning","level":2,"title":"Pre-Deployment Planning","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#requirements-gathering","level":3,"title":"Requirements Gathering","text":"<ul> <li> Define expected concurrent tunnel count</li> <li> Estimate bandwidth requirements</li> <li> Identify authentication requirements (public vs private)</li> <li> Determine backup and recovery strategy</li> <li> Plan for monitoring and alerting</li> <li> Define disaster recovery procedures</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#resource-planning","level":3,"title":"Resource Planning","text":"<p>Minimum Requirements (Small Deployment): - [ ] CPU: 2 cores - [ ] RAM: 2 GB - [ ] Storage: 20 GB SSD - [ ] Network: 100 Mbps - [ ] Concurrent tunnels: Up to 50</p> <p>Recommended (Production): - [ ] CPU: 4+ cores - [ ] RAM: 4+ GB - [ ] Storage: 50+ GB SSD - [ ] Network: 1+ Gbps - [ ] Concurrent tunnels: 100+</p> <p>High Availability: - [ ] Load balancer (HAProxy, ALB, etc.) - [ ] Multiple Sellia server instances - [ ] Shared database (PostgreSQL instead of SQLite) - [ ] Health checks and failover</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#server-configuration","level":2,"title":"Server Configuration","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#operating-system","level":3,"title":"Operating System","text":"<p>Linux Distribution: - [ ] Ubuntu 22.04 LTS or 24.04 LTS - [ ] Debian 12 (Bookworm) - [ ] Rocky Linux 9 or AlmaLinux 9</p> <p>System Updates:</p> <pre><code># Update system packages\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Enable automatic security updates\nsudo apt install unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#firewall-configuration","level":3,"title":"Firewall Configuration","text":"<pre><code># UFW (Ubuntu/Debian)\nsudo ufw default deny incoming\nsudo ufw default allow outgoing\nsudo ufw allow 22/tcp    # SSH\nsudo ufw allow 80/tcp    # HTTP\nsudo ufw allow 443/tcp   # HTTPS\nsudo ufw enable\n\n# Firewalld (RHEL/CentOS/Rocky)\nsudo firewall-cmd --permanent --add-service=ssh\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n</code></pre> <p>Additional hardening: - [ ] Disable password authentication for SSH (use keys only) - [ ] Change default SSH port (optional, security through obscurity) - [ ] Install fail2ban for SSH protection - [ ] Limit SSH access to specific IP ranges (if possible)</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#time-synchronization","level":3,"title":"Time Synchronization","text":"<pre><code># Install and configure NTP\nsudo apt install chrony\nsudo systemctl enable chrony\nsudo systemctl start chrony\n\n# Verify time sync\ntimedatectl\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#ssltls-configuration","level":2,"title":"SSL/TLS Configuration","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#certificate-setup","level":3,"title":"Certificate Setup","text":"<p>Option 1: Let's Encrypt (Automated) - [ ] Certbot installed - [ ] DNS A records configured - [ ] Wildcard DNS for subdomains (optional) - [ ] Auto-renewal configured - [ ] Test renewal: <code>sudo certbot renew --dry-run</code></p> <p>Option 2: Custom Certificates - [ ] Certificate files in <code>/etc/ssl/certs/</code> - [ ] Private key files in <code>/etc/ssl/private/</code> - [ ] Permissions: 644 for certs, 600 for keys - [ ] Certificate chain complete - [ ] Expiry monitoring configured</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#tls-configuration","level":3,"title":"TLS Configuration","text":"<p>Reverse Proxy (Caddy or Nginx): - [ ] HTTP/2 enabled - [ ] Strong cipher suites - [ ] TLS 1.2 and 1.3 only (no SSLv3, TLS 1.0, 1.1) - [ ] HSTS enabled (after testing) - [ ] OCSP stapling (optional) - [ ] Perfect Forward Secrecy (Ephemeral Diffie-Hellman)</p> <p>Test TLS configuration:</p> <pre><code># Test SSL configuration\nopenssl s_client -connect yourdomain.com:443 -tls1_2\nopenssl s_client -connect yourdomain.com:443 -tls1_3\n\n# Online test\n# Visit: https://www.ssllabs.com/ssltest/\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#authentication-setup","level":2,"title":"Authentication Setup","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#server-side-authentication","level":3,"title":"Server-Side Authentication","text":"<p>Enable Authentication: - [ ] <code>SELLIA_REQUIRE_AUTH=true</code> set - [ ] <code>SELLIA_MASTER_KEY</code> configured (cryptographically random, use <code>openssl rand -hex 32</code>) - [ ] Database enabled by default (disabled with <code>SELLIA_NO_DB=true</code>) - [ ] Optional: <code>SELLIA_DB_PATH=/var/lib/sellia/sellia.db</code> for custom database location - [ ] Database directory created with proper permissions - [ ] Initial admin API key created (using master key)</p> <p>Generate Master Key:</p> <pre><code># Generate secure 32-byte key\nopenssl rand -hex 32\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#api-key-management","level":3,"title":"API Key Management","text":"<p>Initial Setup: - [ ] Master key stored in secure password manager - [ ] Master key not committed to version control - [ ] Separate keys for dev/staging/production - [ ] Key rotation policy documented - [ ] Key revocation process tested</p> <p>Environment Variables: <pre><code>SELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=\"your-generated-key\"\n# Optional - defaults are shown\n# SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n# SELLIA_NO_DB=false  # Set to true to disable database\n</code></pre></p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#database-configuration","level":2,"title":"Database Configuration","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#sqlite-setup","level":3,"title":"SQLite Setup","text":"<p>Directory Structure: - [ ] Database directory: <code>/var/lib/sellia/</code> - [ ] Directory owned by <code>sellia</code> user - [ ] Directory permissions: <code>755</code> - [ ] Database file permissions: <code>640</code> - [ ] Automatic backups configured</p> <p>Backup Script:</p> <pre><code>#!/bin/bash\n# /opt/sellia/scripts/backup.sh\n\nBACKUP_DIR=\"/backup/sellia\"\nDATE=$(date +%Y%m%d_%H%M%S)\nmkdir -p \"$BACKUP_DIR\"\n\n# Online backup\nsqlite3 /var/lib/sellia/sellia.db \".backup $BACKUP_DIR/sellia.db.$DATE\"\n\n# Compress older backups\nfind \"$BACKUP_DIR\" -name \"sellia.db.*\" -mtime +7 -exec gzip {} \\;\n\n# Delete backups older than 30 days\nfind \"$BACKUP_DIR\" -name \"sellia.db.*.gz\" -mtime +30 -delete\n</code></pre> <p>Add to crontab:</p> <pre><code># Daily backup at 2 AM\n0 2 * * * /opt/sellia/scripts/backup.sh\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#reserved-subdomains","level":2,"title":"Reserved Subdomains","text":"<p>Initial Setup: - [ ] Server started successfully (seeds default reserved subdomains) - [ ] Company-specific subdomains reserved - [ ] Service subdomains reserved (api, admin, dashboard, etc.) - [ ] Document reasons for custom reservations</p> <p>Example:</p> <pre><code>sellia admin reserved add mycompany --reason \"Company brand\"\nsellia admin reserved add api --reason \"API gateway\"\nsellia admin reserved add billing --reason \"Payment system\"\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#application-configuration","level":2,"title":"Application Configuration","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#environment-variables","level":3,"title":"Environment Variables","text":"<p>Required: <pre><code>SELLIA_REQUIRE_AUTH=true\nSELLIA_MASTER_KEY=\"generated-key\"\n</code></pre></p> <p>Optional (with defaults shown): <pre><code># Host configuration\nSELLIA_HOST=0.0.0.0\nSELLIA_PORT=3000\nSELLIA_DOMAIN=localhost\n\n# HTTPS configuration (set by reverse proxy automatically)\nSELLIA_USE_HTTPS=true\n\n# Database (defaults to ~/.sellia/sellia.db)\nSELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nSELLIA_NO_DB=false  # Set to true to disable database\n\n# Feature flags\nSELLIA_RATE_LIMITING=true  # Set to false to disable\nSELLIA_DISABLE_LANDING=false  # Set to true to disable landing page\n</code></pre></p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#config-file-optional","level":3,"title":"Config File (Optional)","text":"<p>Create <code>/opt/sellia/sellia-server.yml</code>:</p> <pre><code>server:\n  require_auth: true\n  master_key: ${SELLIA_MASTER_KEY}\n  host: 0.0.0.0\n  port: 3000\n  domain: yourdomain.com\n  use_https: true\n  rate_limiting: true\n  landing_enabled: true\n\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#service-configuration","level":3,"title":"Service Configuration","text":"<p>Systemd Service:</p> <pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nGroup=sellia\nWorkingDirectory=/opt/sellia\nEnvironment=\"SELLIA_REQUIRE_AUTH=true\"\nEnvironment=\"SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\"\nEnvironment=\"SELLIA_USE_HTTPS=true\"\nExecStart=/opt/sellia/bin/sellia-server\nRestart=always\nRestartSec=10\n\n# Security\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/var/lib/sellia\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable and start:</p> <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable sellia\nsudo systemctl start sellia\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#reverse-proxy-configuration","level":2,"title":"Reverse Proxy Configuration","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#choose-your-proxy","level":3,"title":"Choose Your Proxy","text":"<ul> <li> Caddy (automatic HTTPS, easier setup)</li> <li> Nginx (more configurable, widely used)</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#caddy-configuration","level":3,"title":"Caddy Configuration","text":"<ul> <li> Caddyfile configured with your domain</li> <li> TLS certificates (Let's Encrypt or custom)</li> <li> HTTP/3 disabled (for WebSocket compatibility)</li> <li> HTTP/1.1 transport to backend</li> <li> Wildcard subdomain handling</li> <li> Logging configured</li> </ul> <p>Reference: Caddy Deployment Guide</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#nginx-configuration","level":3,"title":"Nginx Configuration","text":"<ul> <li> Nginx installed and enabled</li> <li> Virtual host configured for your domain</li> <li> TLS certificates configured</li> <li> HTTP/2 enabled</li> <li> WebSocket headers configured</li> <li> Proper timeouts for long-lived connections</li> <li> Logging configured</li> <li> Log rotation configured</li> </ul> <p>Reference: Nginx Deployment Guide</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#monitoring-and-logging","level":2,"title":"Monitoring and Logging","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#application-logs","level":3,"title":"Application Logs","text":"<p>Log Locations: - [ ] Sellia server logs: <code>/var/log/sellia/server.log</code> - [ ] Reverse proxy logs: <code>/var/log/nginx/</code> or <code>/var/log/caddy/</code> - [ ] System logs: <code>journalctl -u sellia</code></p> <p>Log Rotation: - [ ] logrotate configured for Sellia logs - [ ] Retention policy defined (e.g., 30 days) - [ ] Compress old logs - [ ] Regular cleanup</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#monitoring-setup","level":3,"title":"Monitoring Setup","text":"<p>Basic Monitoring: - [ ] Server process monitoring (systemd) - [ ] Disk space monitoring - [ ] Memory usage monitoring - [ ] CPU usage monitoring - [ ] Network traffic monitoring</p> <p>Advanced Monitoring (Optional): - [ ] Prometheus metrics exporter - [ ] Grafana dashboards - [ ] Alertmanager alerts - [ ] Uptime monitoring (Pingdom, UptimeRobot, etc.)</p> <p>Health Checks:</p> <pre><code># Simple health check script\n#!/bin/bash\n# /opt/sellia/scripts/health-check.sh\n\n# Check Sellia server\ncurl -f http://localhost:3000/health || exit 1\n\n# Check database\nsqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\" | grep -q \"ok\" || exit 1\n\n# Check disk space\ndf /var/lib/sellia | tail -1 | awk '{ if ($5+0 &gt; 90) exit 1; }'\n\necho \"All checks passed\"\n</code></pre> <p>Add to crontab:</p> <pre><code># Run every 5 minutes\n*/5 * * * * /opt/sellia/scripts/health-check.sh\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#security-hardening","level":2,"title":"Security Hardening","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#selinux-configuration-rhelcentosfedora","level":3,"title":"SELinux Configuration (RHEL/CentOS/Fedora)","text":"<pre><code># Check SELinux status\nsestatus\n\n# Allow Sellia to connect to network\nsudo setsebool -P httpd_can_network_connect 1\n\n# Context for database directory\nsudo semanage fcontext -a -t httpd_sys_rw_content_t \"/var/lib/sellia(/.*)?\"\nsudo restorecon -Rv /var/lib/sellia\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#apparmor-configuration-ubuntudebian","level":3,"title":"AppArmor Configuration (Ubuntu/Debian)","text":"<pre><code># Check AppArmor status\nsudo aa-status\n\n# Create Sellia profile\nsudo nano /etc/apparmor.d/opt.sellia.bin.sellia-server\n\n# Reload profiles\nsudo apparmor_parser -r /etc/apparmor.d/opt.sellia.bin.sellia-server\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#file-permissions","level":3,"title":"File Permissions","text":"<pre><code># Sellia user and group\nsudo adduser --system --group --home /opt/sellia sellia\n\n# Directory permissions\nsudo chown -R sellia:sellia /opt/sellia\nsudo chmod 755 /opt/sellia\n\n# Database permissions\nsudo chown -R sellia:sellia /var/lib/sellia\nsudo chmod 755 /var/lib/sellia\nsudo chmod 640 /var/lib/sellia/sellia.db\n\n# Log permissions\nsudo chown -R sellia:adm /var/log/sellia\nsudo chmod 750 /var/log/sellia\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#system-hardening","level":3,"title":"System Hardening","text":"<pre><code># Disable unused services\nsudo systemctl disable bluetooth\nsudo systemctl disable cups\n\n# Install security updates automatically\nsudo apt install unattended-upgrades\nsudo dpkg-reconfigure -plow unattended-upgrades\n\n# Install fail2ban\nsudo apt install fail2ban\nsudo systemctl enable fail2ban\nsudo systemctl start fail2ban\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#dns-configuration","level":2,"title":"DNS Configuration","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#required-dns-records","level":3,"title":"Required DNS Records","text":"<pre><code># Base domain\nA     yourdomain.com          →  your-server-ip\n\n# Wildcard for subdomains\nA     *.yourdomain.com        →  your-server-ip\n\n# Optional: WWW\nCNAME www.yourdomain.com      →  yourdomain.com\n</code></pre> <p>Cloudflare-Specific: - [ ] If using Cloudflare proxy (orange cloud), set WebSocket to \"Full\" or \"Off\" - [ ] Or use DNS-only (grey cloud) for Sellia subdomains - [ ] Create Cloudflare Origin Certificate for better security</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#dns-verification","level":3,"title":"DNS Verification","text":"<pre><code># Check DNS propagation\ndig yourdomain.com\ndig *.yourdomain.com\ndig myapp.yourdomain.com\n\n# Check from multiple locations\n# Visit: https://www.whatsmydns.net/\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#testing","level":2,"title":"Testing","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#pre-launch-testing","level":3,"title":"Pre-Launch Testing","text":"<p>Functionality Tests: - [ ] Create tunnel with API key - [ ] Verify tunnel is accessible via HTTPS - [ ] Test WebSocket connection - [ ] Create tunnel with reserved subdomain (should fail) - [ ] Create tunnel with path routing - [ ] Test inspector UI</p> <p>Load Testing: - [ ] Test with expected concurrent tunnel count - [ ] Monitor CPU and memory usage - [ ] Check database performance - [ ] Verify no connection drops</p> <p>Security Tests: - [ ] Test without API key (should fail) - [ ] Test with invalid API key (should fail) - [ ] Test with standard key (should work for tunnels) - [ ] Test admin API with standard key (should fail) - [ ] Test admin API with master key (should work) - [ ] Verify TLS configuration (SSL Labs)</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#monitoring-verification","level":3,"title":"Monitoring Verification","text":"<ul> <li> Check logs are being written</li> <li> Verify log rotation works</li> <li> Test health check script</li> <li> Verify backup script runs</li> <li> Test monitoring alerts (if configured)</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#disaster-recovery","level":2,"title":"Disaster Recovery","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#backup-strategy","level":3,"title":"Backup Strategy","text":"<p>What to Backup: - [ ] Database: <code>/var/lib/sellia/sellia.db</code> - [ ] Configuration: <code>/opt/sellia/sellia-server.yml</code> - [ ] Environment variables - [ ] TLS certificates (if not using Let's Encrypt) - [ ] Nginx/Caddy configuration</p> <p>Backup Locations: - [ ] Local backup directory - [ ] Off-site backup (S3, GCS, etc.) - [ ] Backup encryption (for off-site)</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#restore-procedure","level":3,"title":"Restore Procedure","text":"<p>Document restore process:</p> <pre><code>#!/bin/bash\n# /opt/sellia/scripts/restore.sh\n\nBACKUP_FILE=$1\n\nif [ -z \"$BACKUP_FILE\" ]; then\n    echo \"Usage: $0 &lt;backup-file&gt;\"\n    exit 1\nfi\n\n# Stop Sellia\nsudo systemctl stop sellia\n\n# Restore database\ncp \"$BACKUP_FILE\" /var/lib/sellia/sellia.db\nchown sellia:sellia /var/lib/sellia/sellia.db\nchmod 640 /var/lib/sellia/sellia.db\n\n# Start Sellia\nsudo systemctl start sellia\n\necho \"Restore complete\"\n</code></pre>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#failover-planning","level":3,"title":"Failover Planning","text":"<p>For High Availability: - [ ] Document failover procedure - [ ] Test failover procedure - [ ] DNS failover configured (if using multiple servers) - [ ] Load balancer health checks configured - [ ] Data replication configured (if using PostgreSQL)</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#documentation","level":2,"title":"Documentation","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#runbook","level":3,"title":"Runbook","text":"<p>Create and maintain runbook with: - [ ] Common issues and solutions - [ ] Escalation procedures - [ ] Contact information for team members - [ ] Vendor contacts (DNS provider, hosting provider, etc.) - [ ] Login credentials stored securely (password manager) - [ ] Diagrams of architecture</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#change-management","level":3,"title":"Change Management","text":"<ul> <li> Document all configuration changes</li> <li> Use version control for configuration files</li> <li> Test changes in staging first</li> <li> Rollback procedure documented</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#post-deployment","level":2,"title":"Post-Deployment","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#performance-tuning","level":3,"title":"Performance Tuning","text":"<ul> <li> Monitor resource usage for first week</li> <li> Adjust worker connections if needed</li> <li> Tune database cache size</li> <li> Adjust reverse proxy timeouts based on usage</li> <li> Set up alerts for resource thresholds</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#regular-maintenance","level":3,"title":"Regular Maintenance","text":"<p>Weekly: - [ ] Review logs for errors - [ ] Check disk space - [ ] Verify backups are running</p> <p>Monthly: - [ ] Review and update reserved subdomains - [ ] Audit API keys (revoke unused) - [ ] Review security updates - [ ] Test restore procedure</p> <p>Quarterly: - [ ] Security audit - [ ] Performance review - [ ] Capacity planning - [ ] Disaster recovery test</p>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#compliance","level":2,"title":"Compliance","text":"","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#data-protection","level":3,"title":"Data Protection","text":"<ul> <li> GDPR compliance (if storing EU data)</li> <li> CCPA compliance (if storing California data)</li> <li> Data retention policy documented</li> <li> Data deletion procedure documented</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#audit-trail","level":3,"title":"Audit Trail","text":"<ul> <li> Enable audit logging</li> <li> Log all admin operations</li> <li> Log all tunnel creations</li> <li> Protect logs from tampering</li> <li> Regular log reviews</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#final-verification","level":2,"title":"Final Verification","text":"<p>Before going live:</p> <ul> <li> All tests passed</li> <li> Monitoring configured and verified</li> <li> Backups running successfully</li> <li> Documentation complete</li> <li> Team trained on operations</li> <li> Incident response plan created</li> <li> Communication plan for outages</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/production-checklist/#see-also","level":2,"title":"See Also","text":"<ul> <li>Caddy Deployment - Caddy reverse proxy setup</li> <li>Nginx Deployment - Nginx reverse proxy setup</li> <li>Server Auth - Authentication configuration</li> <li>Database Configuration - Database setup</li> </ul>","path":["User","Deployment","Production Deployment Checklist"],"tags":[]},{"location":"user/deployment/tls-certificates/","level":1,"title":"TLS Certificates","text":"<p>Sellia requires TLS certificates to serve HTTPS tunnels. This guide covers certificate setup for production deployments.</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#why-tls-certificates","level":2,"title":"Why TLS Certificates?","text":"<p>HTTPS tunnels require valid TLS certificates to: - Encrypt traffic between clients and the tunnel server - Enable secure WebSocket connections - Provide trust to browsers and API clients - Meet modern security standards</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#certificate-sources","level":2,"title":"Certificate Sources","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#1-cloudflare-origin-certificate-recommended","level":3,"title":"1. Cloudflare Origin Certificate (Recommended)","text":"<p>Free, long-lasting certificates from Cloudflare.</p> <p>Pros: - Free for Cloudflare customers - 15-year validity - Wildcard certificates supported - Easy generation</p> <p>Cons: - Requires Cloudflare account - Only works with Cloudflare proxy</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#2-lets-encrypt","level":3,"title":"2. Let's Encrypt","text":"<p>Free, automated certificates via ACME.</p> <p>Pros: - Free - Automated renewal - Publicly trusted - Works with any setup</p> <p>Cons: - 90-day validity (requires automation) - Rate limited - Requires domain validation</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#3-self-signed-certificates","level":3,"title":"3. Self-Signed Certificates","text":"<p>Generated by you for testing.</p> <p>Pros: - Quick to generate - No external dependencies - Good for local testing</p> <p>Cons: - Not publicly trusted - Browser warnings - Not suitable for production</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#4-commercial-ca","level":3,"title":"4. Commercial CA","text":"<p>Purchased certificates from authorities.</p> <p>Pros: - Publicly trusted - Various validation levels - Insurance options</p> <p>Cons: - Cost (annual fees) - Shorter validity (1-2 years) - Manual renewal process</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#cloudflare-origin-certificate","level":2,"title":"Cloudflare Origin Certificate","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-1-add-domain-to-cloudflare","level":3,"title":"Step 1: Add Domain to Cloudflare","text":"<ol> <li>Sign up for Cloudflare (free tier works)</li> <li>Add your domain: *Sites* → Add a Site</li> <li>Follow instructions to update nameservers</li> <li>Wait for DNS propagation (usually &lt;24 hours)</li> </ol>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-2-generate-origin-certificate","level":3,"title":"Step 2: Generate Origin Certificate","text":"<ol> <li>Go to SSL/TLS → Origin Server → Create Certificate</li> <li>Select options:</li> <li>Hostnames: <code>*.yourdomain.com</code> and <code>yourdomain.com</code></li> <li>Validity: 15 years</li> <li>Key format: PEM (default)</li> <li>Click Create</li> </ol>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-3-download-certificates","level":3,"title":"Step 3: Download Certificates","text":"<ol> <li>Click Download Certificate to get <code>origin.pem</code></li> <li>Click Download Private Key to get <code>origin.key</code></li> </ol>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-4-place-certificates","level":3,"title":"Step 4: Place Certificates","text":"<p>Create <code>certs/</code> directory and place certificates:</p> <pre><code>mkdir -p certs\nmv ~/Downloads/origin.pem certs/cert.pem\nmv ~/Downloads/origin.key certs/key.pem\n</code></pre> <p>Structure: <pre><code>certs/\n├── cert.pem  # Origin certificate\n└── key.pem   # Private key\n</code></pre></p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-5-set-permissions","level":3,"title":"Step 5: Set Permissions","text":"<p>Secure the private key:</p> <pre><code>chmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-6-start-server","level":3,"title":"Step 6: Start Server","text":"<pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre> <p>The docker-compose.prod.yml file automatically sets <code>SELLIA_USE_HTTPS=true</code> for the Sellia server.</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#lets-encrypt-certificates","level":2,"title":"Let's Encrypt Certificates","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#using-certbot","level":3,"title":"Using Certbot","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-1-install-certbot","level":4,"title":"Step 1: Install Certbot","text":"<pre><code># Ubuntu/Debian\nsudo apt-get install certbot\n\n# macOS\nbrew install certbot\n\n# Docker\ndocker run -it --rm \\\n  -v /etc/letsencrypt:/etc/letsencrypt \\\n  certbot/certbot certonly --manual\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-2-generate-certificate","level":4,"title":"Step 2: Generate Certificate","text":"<p>HTTP-01 Challenge (requires port 80):</p> <pre><code>sudo certbot certonly \\\n  --standalone \\\n  -d yourdomain.com \\\n  -d *.yourdomain.com\n</code></pre> <p>DNS-01 Challenge (wildcard):</p> <pre><code>sudo certbot certonly \\\n  --manual \\\n  --preferred-challenges dns \\\n  -d yourdomain.com \\\n  -d *.yourdomain.com\n</code></pre> <p>Follow prompts for DNS validation.</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-3-copy-certificates","level":4,"title":"Step 3: Copy Certificates","text":"<pre><code>mkdir -p certs\nsudo cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem certs/cert.pem\nsudo cp /etc/letsencrypt/live/yourdomain.com/privkey.pem certs/key.pem\nsudo chown $USER:$USER certs/*.pem\nchmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-4-set-up-auto-renewal","level":4,"title":"Step 4: Set Up Auto-Renewal","text":"<p>Certbot automatically sets up renewal:</p> <pre><code># Test renewal\nsudo certbot renew --dry-run\n\n# Renewal runs automatically via cron/systemd\n</code></pre> <p>For Docker, mount certificates:</p> <pre><code>volumes:\n  - /etc/letsencrypt:/etc/letsencrypt:ro\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#using-caddy","level":3,"title":"Using Caddy","text":"<p>Caddy can automatically obtain and renew certificates:</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-1-create-caddyfile","level":4,"title":"Step 1: Create Caddyfile","text":"<pre><code># Caddyfile\nyourdomain.com, *.yourdomain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#step-2-run-caddy","level":4,"title":"Step 2: Run Caddy","text":"<pre><code>docker run -d \\\n  --name caddy \\\n  -p 80:80 \\\n  -p 443:443 \\\n  -v $(pwd)/Caddyfile:/etc/caddy/Caddyfile \\\n  caddy:latest\n</code></pre> <p>Caddy automatically handles HTTPS.</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#self-signed-certificates-testing","level":2,"title":"Self-Signed Certificates (Testing)","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#generate-with-openssl","level":3,"title":"Generate with OpenSSL","text":"<pre><code>mkdir -p certs\n\n# Generate private key\nopenssl genrsa -out certs/key.pem 2048\n\n# Generate certificate\nopenssl req -new -x509 \\\n  -key certs/key.pem \\\n  -out certs/cert.pem \\\n  -days 365 \\\n  -subj \"/CN=*.yourdomain.com\"\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#generate-with-one-command","level":3,"title":"Generate with One Command","text":"<pre><code>openssl req -x509 -newkey rsa:2048 \\\n  -keyout certs/key.pem \\\n  -out certs/cert.pem \\\n  -days 365 \\\n  -nodes \\\n  -subj \"/CN=*.yourdomain.com\"\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#use-for-testing","level":3,"title":"Use for Testing","text":"<pre><code># .env\nSELLIA_DOMAIN=localhost\nSELLIA_USE_HTTPS=true\n</code></pre> <p>Warning: Browsers will show security warnings. Only for local testing.</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#docker-deployment-with-certificates","level":2,"title":"Docker Deployment with Certificates","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#directory-structure","level":3,"title":"Directory Structure","text":"<pre><code>project/\n├── docker-compose.prod.yml\n├── .env\n└── certs/\n    ├── cert.pem\n    └── key.pem\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#docker-compose-configuration","level":3,"title":"Docker Compose Configuration","text":"<pre><code>version: '3.8'\n\nservices:\n  sellia-server:\n    image: ghcr.io/watzon/sellia:latest\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN}\n      - SELLIA_MASTER_KEY=${SELLIA_MASTER_KEY}\n      - SELLIA_REQUIRE_AUTH=true\n    env_file: .env\n    restart: unless-stopped\n    networks:\n      - sellia-internal\n\n  caddy:\n    image: caddy:2-alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./deploy/Caddyfile:/etc/caddy/Caddyfile:ro\n      - ./certs:/certs:ro\n      - caddy_data:/data\n      - caddy_config:/config\n    environment:\n      - SELLIA_DOMAIN=${SELLIA_DOMAIN}\n    networks:\n      - sellia-internal\n    depends_on:\n      - sellia-server\n    restart: unless-stopped\n\nnetworks:\n  sellia-internal:\n    driver: bridge\n\nvolumes:\n  caddy_data:\n  caddy_config:\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#environment-file","level":3,"title":"Environment File","text":"<pre><code># .env\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#certificate-validation","level":2,"title":"Certificate Validation","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#check-certificate","level":3,"title":"Check Certificate","text":"<pre><code># View certificate details\nopenssl x509 -in certs/cert.pem -text -noout\n\n# Check validity\nopenssl x509 -in certs/cert.pem -noout -dates\n\n# Verify certificate matches key\nopenssl x509 -noout -modulus -in certs/cert.pem | openssl md5\nopenssl rsa -noout -modulus -in certs/key.pem | openssl md5\n# Both MD5 hashes should match\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#test-https-connection","level":3,"title":"Test HTTPS Connection","text":"<pre><code># Test with curl\ncurl -I https://yourdomain.com\n\n# Test with OpenSSL\nopenssl s_client -connect yourdomain.com:443 -servername yourdomain.com\n\n# Check certificate chain\nopenssl s_client -connect yourdomain.com:443 -showcerts\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#reverse-proxy-setup","level":2,"title":"Reverse Proxy Setup","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#nginx-with-tls","level":3,"title":"Nginx with TLS","text":"<pre><code>server {\n    listen 80;\n    server_name yourdomain.com *.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl http2;\n    server_name yourdomain.com *.yourdomain.com;\n\n    ssl_certificate /path/to/certs/cert.pem;\n    ssl_certificate_key /path/to/certs/key.pem;\n\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers HIGH:!aNULL:!MD5;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#caddy-with-tls","level":3,"title":"Caddy with TLS","text":"<p>Caddy handles TLS automatically:</p> <pre><code>yourdomain.com, *.yourdomain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#certificate-renewal","level":2,"title":"Certificate Renewal","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#lets-encrypt-renewal","level":3,"title":"Let's Encrypt Renewal","text":"<p>Automatic via cron/systemd:</p> <pre><code># Test renewal\nsudo certbot renew --dry-run\n\n# View renewal timer\nsudo systemctl status certbot.timer\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#cloudflare-renewal","level":3,"title":"Cloudflare Renewal","text":"<p>Cloudflare Origin certificates are valid for 15 years - no renewal needed.</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#manual-renewal","level":3,"title":"Manual Renewal","text":"<p>For other certificates:</p> <pre><code># Generate new certificates\n# Copy to certs directory\n# Restart Sellia\ndocker compose restart\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#certificate-not-found","level":3,"title":"Certificate Not Found","text":"<p>Error: <code>Failed to load certificate</code></p> <p>Solution: <pre><code># Verify files exist\nls -la certs/\n\n# Check permissions\nchmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n\n# Verify file content\ncat certs/cert.pem\ncat certs/key.pem\n</code></pre></p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#domain-mismatch","level":3,"title":"Domain Mismatch","text":"<p>Error: <code>Certificate does not match domain</code></p> <p>Solution: <pre><code># Check certificate domain\nopenssl x509 -in certs/cert.pem -noout -subject\n\n# Should show: CN = *.yourdomain.com\n</code></pre></p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#browser-warnings","level":3,"title":"Browser Warnings","text":"<p>Self-signed certificates: - Expected for local testing - Add exception in browser - Not for production use</p> <p>Cloudflare certificates: - Ensure Cloudflare proxy is enabled (orange cloud) - Check DNS propagation</p>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<pre><code># Check what's using port 443\nlsof -i :443\n\n# Stop conflicting service\nsudo systemctl stop nginx\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#1-file-permissions","level":3,"title":"1. File Permissions","text":"<pre><code># Certificate: readable by all\nchmod 644 certs/cert.pem\n\n# Private key: readable only by owner\nchmod 600 certs/key.pem\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#2-dont-commit-certificates","level":3,"title":"2. Don't Commit Certificates","text":"<p>Add to <code>.gitignore</code>:</p> <pre><code># .gitignore\ncerts/\n*.pem\n*.key\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#3-use-strong-keys","level":3,"title":"3. Use Strong Keys","text":"<pre><code># Generate 2048-bit or 4096-bit keys\nopenssl genrsa -out certs/key.pem 4096\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#4-monitor-expiration","level":3,"title":"4. Monitor Expiration","text":"<pre><code># Check expiration\nopenssl x509 -in certs/cert.pem -noout -enddate\n\n# Set up expiration alerts\n# (monitoring system integration)\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#5-separate-environments","level":3,"title":"5. Separate Environments","text":"<p>Use different certificates per environment:</p> <pre><code>certs/dev/cert.pem\ncerts/dev/key.pem\n\ncerts/staging/cert.pem\ncerts/staging/key.pem\n\ncerts/prod/cert.pem\ncerts/prod/key.pem\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#certificate-comparison","level":2,"title":"Certificate Comparison","text":"Method Cost Validity Automation Trust Best For Cloudflare Origin Free 15 years No Cloudflare only Production with Cloudflare Let's Encrypt Free 90 days Yes Public Production (any setup) Self-Signed Free Custom No None Local testing only Commercial CA $$ 1-2 years Partial Public Enterprise requirements","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Docker Deployment - Full Docker setup</li> <li>Self-Hosting - Server configuration</li> <li>Configuration - Config files</li> </ul>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#quick-reference","level":2,"title":"Quick Reference","text":"","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#generate-self-signed-cert","level":3,"title":"Generate Self-Signed Cert","text":"<pre><code>openssl req -x509 -newkey rsa:2048 \\\n  -keyout certs/key.pem \\\n  -out certs/cert.pem \\\n  -days 365 \\\n  -nodes \\\n  -subj \"/CN=*.yourdomain.com\"\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#check-certificate_1","level":3,"title":"Check Certificate","text":"<pre><code>openssl x509 -in certs/cert.pem -text -noout\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#verify-key-match","level":3,"title":"Verify Key Match","text":"<pre><code>openssl x509 -noout -modulus -in certs/cert.pem | openssl md5\nopenssl rsa -noout -modulus -in certs/key.pem | openssl md5\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#test-https","level":3,"title":"Test HTTPS","text":"<pre><code>curl -I https://yourdomain.com\nopenssl s_client -connect yourdomain.com:443\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/deployment/tls-certificates/#permissions","level":3,"title":"Permissions","text":"<pre><code>chmod 644 certs/cert.pem\nchmod 600 certs/key.pem\n</code></pre>","path":["User","Deployment","TLS Certificates"],"tags":[]},{"location":"user/getting-started/","level":1,"title":"Getting Started","text":"<p>Get up and running with Sellia in minutes.</p>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#overview","level":2,"title":"Overview","text":"<p>This section guides you through installing Sellia and creating your first tunnel.</p>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#installation","level":2,"title":"Installation","text":"","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#from-source","level":3,"title":"From Source","text":"<p>Requires Crystal &gt;= 1.10.0.</p> <pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\nshards build --release\n</code></pre> <p>Binaries will be in <code>./bin/</code>:</p> <ul> <li><code>sellia</code> - CLI client for creating tunnels</li> <li><code>sellia-server</code> - Tunnel server</li> </ul>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#pre-built-binaries","level":3,"title":"Pre-built Binaries","text":"<p>Coming soon.</p>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#quick-start","level":2,"title":"Quick Start","text":"","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#1-start-the-server","level":3,"title":"1. Start the Server","text":"<p>Or use a hosted instance at sellia.me.</p> <pre><code>./bin/sellia-server --port 3000 --domain your-domain.com\n</code></pre>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#2-create-a-tunnel","level":3,"title":"2. Create a Tunnel","text":"<p>Expose your local server on port 8080:</p> <pre><code>./bin/sellia http 8080 --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#3-access-your-server","level":3,"title":"3. Access Your Server","text":"<p>Sellia will provide a URL like <code>http://abc123.your-domain.com</code>.</p>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Quick Start - Common tunnel creation patterns</li> <li>Configuration - Set up config files</li> <li>Authentication - Secure your tunnels</li> <li>Inspector - Debug requests in real-time</li> </ul>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#example-workflows","level":2,"title":"Example Workflows","text":"","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#webhook-development","level":3,"title":"Webhook Development","text":"<pre><code># Start your webhook receiver\n./bin/sellia http 3000 --subdomain webhooks --open --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#mobile-development","level":3,"title":"Mobile Development","text":"<pre><code># Expose your API with authentication\n./bin/sellia http 8080 --auth api:secret --subdomain myapp-api --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#multiple-services","level":3,"title":"Multiple Services","text":"<pre><code># Terminal 1: Web app\n./bin/sellia http 3000 --subdomain myapp --server http://localhost:3000\n\n# Terminal 2: API\n./bin/sellia http 8080 --subdomain myapp-api --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/#help","level":2,"title":"Help","text":"<ul> <li>CLI Reference - Complete command documentation</li> <li>Troubleshooting - Common issues and solutions</li> <li>GitHub Issues - Report bugs</li> </ul>","path":["User","Getting started","Getting Started"],"tags":[]},{"location":"user/getting-started/installation/","level":1,"title":"Installing Sellia","text":"<p>Sellia can be installed from source or using pre-built binaries. Choose the method that best fits your workflow.</p>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before installing Sellia, ensure you have the following dependencies:</p> <ul> <li>Crystal &gt;= 1.10.0 - Install Crystal</li> <li>Git (for building from source)</li> </ul>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#installation-from-source","level":2,"title":"Installation from Source","text":"<p>Building from source gives you the latest features and allows you to modify the code.</p>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#step-1-clone-the-repository","level":3,"title":"Step 1: Clone the Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#step-2-install-dependencies","level":3,"title":"Step 2: Install Dependencies","text":"<p>Sellia uses Shards, Crystal's built-in dependency manager.</p> <pre><code>shards install\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#step-3-build-binaries","level":3,"title":"Step 3: Build Binaries","text":"<p>For development/testing (faster compilation):</p> <pre><code>shards build\n</code></pre> <p>For production use (optimized binaries):</p> <pre><code>shards build --release\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#step-4-verify-installation","level":3,"title":"Step 4: Verify Installation","text":"<p>The build process creates two binaries in the <code>./bin/</code> directory:</p> <ul> <li><code>sellia</code> - CLI client for creating tunnels</li> <li><code>sellia-server</code> - Tunnel server for self-hosting</li> </ul> <p>Check that the binaries are built:</p> <pre><code>ls -lh ./bin/\n</code></pre> <p>You should see: <pre><code>sellia\nsellia-server\n</code></pre></p>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#step-5-make-binaries-available-optional","level":3,"title":"Step 5: Make Binaries Available (Optional)","text":"<p>To use <code>sellia</code> from anywhere, add the binaries to your PATH:</p> <pre><code># Temporary (current session only)\nexport PATH=\"$PATH:$(pwd)/bin\"\n\n# Permanent (add to ~/.bashrc, ~/.zshrc, or equivalent)\necho 'export PATH=\"$PATH:'$(pwd)'/bin\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\n</code></pre> <p>Verify the installation:</p> <pre><code>sellia version\nsellia-server --help\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#pre-built-binaries","level":2,"title":"Pre-built Binaries","text":"<p>Pre-built binaries are coming soon. This will allow you to download and install Sellia without needing to compile from source.</p>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#planned-availability","level":3,"title":"Planned Availability","text":"<ul> <li>macOS (Intel and Apple Silicon)</li> <li>Linux (x86_64, ARM64)</li> <li>Windows (x86_64)</li> </ul>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#installation-via-package-manager","level":2,"title":"Installation via Package Manager","text":"<p>Package manager installation is planned for future releases:</p> <ul> <li>Homebrew (macOS/Linux)</li> <li>AUR (Arch Linux)</li> <li>Snap Store (Linux)</li> <li>Chocolatey (Windows)</li> </ul>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#verifying-your-installation","level":2,"title":"Verifying Your Installation","text":"<p>After installing Sellia, verify that everything is working correctly:</p> <pre><code># Check CLI version\nsellia version\n\n# View CLI help\nsellia help\n\n# View server help\nsellia-server --help\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#next-steps","level":2,"title":"Next Steps","text":"<p>After installation, you can:</p> <ol> <li>Quick Start Guide - Get up and running in 5 minutes</li> <li>Self-Hosting Quick Start - Set up your own tunnel server</li> <li>Configuration Guide - Configure Sellia for your needs</li> </ol>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#crystal-version-issues","level":3,"title":"Crystal Version Issues","text":"<p>If you encounter issues with Crystal version, ensure you're using Crystal &gt;= 1.10.0:</p> <pre><code>crystal --version\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#build-failures","level":3,"title":"Build Failures","text":"<p>If the build fails, try:</p> <pre><code># Clean build directory\nrm -rf ./bin\n\n# Try again\nshards build --release\n\n# Or update dependencies first\nshards update\nshards build --release\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#permission-issues","level":3,"title":"Permission Issues","text":"<p>If you get permission errors when running binaries:</p> <pre><code># Make binaries executable\nchmod +x ./bin/sellia\nchmod +x ./bin/sellia-server\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#system-requirements","level":2,"title":"System Requirements","text":"","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#minimum-requirements","level":3,"title":"Minimum Requirements","text":"<ul> <li>CPU: x86_64 or ARM64</li> <li>RAM: 512 MB</li> <li>Disk: 50 MB for binaries</li> </ul>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#recommended-for-server","level":3,"title":"Recommended for Server","text":"<ul> <li>CPU: 2+ cores</li> <li>RAM: 2 GB+</li> <li>Disk: 100 MB+</li> <li>Network: Stable internet connection with sufficient bandwidth</li> </ul>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/installation/#development-installation","level":2,"title":"Development Installation","text":"<p>If you're planning to contribute to Sellia or modify the code:</p> <ol> <li>Follow the \"Installation from Source\" steps above</li> <li>Install Node.js &gt;= 18 for inspector UI development</li> <li>See the Development Guide</li> </ol> <p>For inspector UI development:</p> <pre><code>cd web\nnpm install\nnpm run dev\n</code></pre>","path":["User","Getting started","Installing Sellia"],"tags":[]},{"location":"user/getting-started/quickstart/","level":1,"title":"Quick Start Guide","text":"<p>Get up and running with Sellia in 5 minutes. This guide will show you how to expose a local server to the internet using secure tunnels.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#what-youll-learn","level":2,"title":"What You'll Learn","text":"<p>By the end of this guide, you'll be able to: - Create a secure tunnel to a local web server - Access your local server from the internet - Monitor incoming requests in real-time - Use custom subdomains for your tunnels</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before starting, ensure you have: - Sellia installed (Installation Guide) - A local web server running (or create a simple one for testing) - Terminal access</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#step-1-start-a-local-server","level":2,"title":"Step 1: Start a Local Server","text":"<p>First, let's create a simple local server to tunnel. If you already have a server running, skip to Step 2.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#example-python-http-server","level":3,"title":"Example: Python HTTP Server","text":"<pre><code># Create a test directory\nmkdir sellia-test\ncd sellia-test\n\n# Start a simple HTTP server on port 8080\npython3 -m http.server 8080\n</code></pre> <p>Or with Node.js:</p> <pre><code># Create a simple server\necho \"const http = require('http'); http.createServer((req, res) =&gt; res.end('Hello from Sellia!')).listen(8080);\" &gt; server.js\nnode server.js\n</code></pre> <p>Keep this server running in a terminal window.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#step-2-create-a-tunnel","level":2,"title":"Step 2: Create a Tunnel","text":"<p>Open a new terminal window and create a tunnel to your local server:</p> <pre><code>sellia http 8080 --server http://localhost:3000\n</code></pre> <p>You'll see output like:</p> <pre><code>Sellia v0.4.0\nForwarding to localhost:8080\n\nPublic URL: http://abc123.your-domain.com -&gt; localhost:8080\n\nInspector:  http://127.0.0.1:4040\n\nPress Ctrl+C to stop\n</code></pre> <p>That's it! Your local server is now accessible from the internet.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#step-3-test-your-tunnel","level":2,"title":"Step 3: Test Your Tunnel","text":"<p>Open the tunnel URL in your browser or use curl:</p> <pre><code>curl http://abc123.your-domain.com\n</code></pre> <p>You should see the response from your local server.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#step-4-monitor-requests","level":2,"title":"Step 4: Monitor Requests","text":"<p>Sellia includes a real-time request inspector. Open your browser and navigate to:</p> <pre><code>http://localhost:4040\n</code></pre> <p>Make a few requests to your tunnel URL and watch them appear in the inspector in real-time.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#inspector-features","level":3,"title":"Inspector Features","text":"<ul> <li>Live request streaming - See requests as they arrive</li> <li>Request details - View headers, body, and timing information</li> <li>Copy as cURL - Reproduce requests with one click</li> <li>Clear history - Reset the request log</li> </ul>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#step-5-use-a-custom-subdomain","level":2,"title":"Step 5: Use a Custom Subdomain","text":"<p>Instead of a random subdomain, you can request a specific one:</p> <pre><code>sellia http 8080 --subdomain myapp --server http://localhost:3000\n</code></pre> <p>Now your tunnel is accessible at:</p> <pre><code>http://myapp.your-domain.com\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#common-use-cases","level":2,"title":"Common Use Cases","text":"","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#webhook-development","level":3,"title":"Webhook Development","text":"<p>Test webhooks from services like Stripe, GitHub, or Slack:</p> <pre><code># Start your webhook handler\nnode webhook-handler.js &amp;\n\n# Create a tunnel\nsellia http 3000 --subdomain webhooks --server http://localhost:3000\n\n# Use the provided URL in your webhook configuration\n# http://webhooks.your-domain.com/webhook\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#mobile-app-development","level":3,"title":"Mobile App Development","text":"<p>Test mobile apps against a local API:</p> <pre><code># Start your API server\nrails server -p 4000 &amp;\n\n# Create a tunnel\nsellia http 4000 --subdomain api-dev --server http://localhost:3000\n\n# Point your mobile app to http://api-dev.your-domain.com\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#client-demos","level":3,"title":"Client Demos","text":"<p>Share work-in-progress with clients:</p> <pre><code># Start your frontend dev server\nnpm run dev &amp;\n\n# Create a tunnel with a memorable subdomain\nsellia http 5173 --subdomain demo-acme --server http://localhost:3000\n\n# Share http://demo-acme.your-domain.com with your client\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#oauth-callback-testing","level":3,"title":"OAuth Callback Testing","text":"<p>Test OAuth callbacks locally:</p> <pre><code># Start your OAuth callback handler\nnode oauth-server.js &amp;\n\n# Create a tunnel\nsellia http 5000 --subdomain oauth-test --server http://localhost:3000\n\n# Use http://oauth-test.your-domain.com/callback in your OAuth app settings\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#advanced-options","level":2,"title":"Advanced Options","text":"","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#basic-authentication","level":3,"title":"Basic Authentication","text":"<p>Protect your tunnel with basic auth:</p> <pre><code>sellia http 8080 --auth admin:secret123 --server http://localhost:3000\n</code></pre> <p>Users will be prompted for credentials when accessing the tunnel.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#disable-inspector","level":3,"title":"Disable Inspector","text":"<p>If you don't need the request inspector:</p> <pre><code>sellia http 8080 --no-inspector --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#custom-inspector-port","level":3,"title":"Custom Inspector Port","text":"<p>Change the inspector port if 4040 is in use:</p> <pre><code>sellia http 8080 --inspector-port 5000 --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#open-inspector-automatically","level":3,"title":"Open Inspector Automatically","text":"<p>Open the inspector in your browser when the tunnel starts:</p> <pre><code>sellia http 8080 --open --server http://localhost:3000\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#configuration-file","level":2,"title":"Configuration File","text":"<p>For multiple tunnels or persistent settings, use a configuration file:</p> <p>Create <code>sellia.yml</code> in your project directory:</p> <pre><code>server: http://localhost:3000\n\ntunnels:\n  web:\n    port: 8080\n    subdomain: myapp\n  api:\n    port: 3000\n    subdomain: myapp-api\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#stopping-tunnels","level":2,"title":"Stopping Tunnels","text":"<p>To stop a tunnel, press <code>Ctrl+C</code> in the terminal where it's running.</p> <p>All tunnels will be automatically closed when you stop the Sellia client.</p>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#connection-refused-error","level":3,"title":"\"Connection Refused\" Error","text":"<p>Ensure your local server is running:</p> <pre><code># Check if port is in use\nlsof -i :8080\n\n# Or with netstat\nnetstat -an | grep 8080\n</code></pre>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#tunnel-url-not-accessible","level":3,"title":"Tunnel URL Not Accessible","text":"<ol> <li>Verify the server is running</li> <li>Check your network connection</li> <li>Ensure the server URL is correct</li> </ol>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#inspector-not-loading","level":3,"title":"Inspector Not Loading","text":"<ol> <li>Check if the inspector port is already in use</li> <li>Try disabling the inspector with <code>--no-inspector</code></li> <li>Verify the tunnel is running</li> </ol>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#whats-next","level":2,"title":"What's Next?","text":"<p>Now that you've got the basics down, explore more features:</p> <ul> <li>Self-Hosting - Run your own tunnel server</li> <li>Configuration Guide - Set up config files</li> <li>Authentication - Secure your tunnels</li> <li>Docker Deployment - Deploy Sellia with Docker</li> </ul>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/quickstart/#need-help","level":2,"title":"Need Help?","text":"<ul> <li>Check the main README</li> <li>Open an issue on GitHub</li> <li>Join the community discussions</li> </ul>","path":["User","Getting started","Quick Start Guide"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/","level":1,"title":"Self-Hosting Quick Start","text":"<p>Run your own Sellia tunnel server for full control, privacy, and customization. This guide will get you up and running in 10 minutes.</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#why-self-host","level":2,"title":"Why Self-Host?","text":"<p>Self-hosting gives you: - Privacy: Full control over your data - Customization: Configure domains, auth, and features - Cost savings: No subscription fees - Reliability: No dependencies on external services - Security: Manage your own TLS certificates</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#prerequisites","level":2,"title":"Prerequisites","text":"<p>Before starting, ensure you have: - Sellia installed (Installation Guide) - A domain name (or subdomain) with DNS configured - A server with public IP (VPS, cloud server, or local machine with port forwarding) - Basic knowledge of DNS and networking</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#quick-start-docker-compose-recommended","level":2,"title":"Quick Start: Docker Compose (Recommended)","text":"<p>The fastest way to self-host Sellia is with Docker Compose.</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-1-clone-the-repository","level":3,"title":"Step 1: Clone the Repository","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-2-configure-environment-variables","level":3,"title":"Step 2: Configure Environment Variables","text":"<p>Create a <code>.env</code> file:</p> <pre><code>cat &gt; .env &lt;&lt; EOF\nSELLIA_DOMAIN=yourdomain.com\nSELLIA_MASTER_KEY=$(openssl rand -hex 32)\nSELLIA_REQUIRE_AUTH=true\nSELLIA_USE_HTTPS=true\nEOF\n</code></pre> <p>Replace <code>yourdomain.com</code> with your actual domain.</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-3-prepare-tls-certificates","level":3,"title":"Step 3: Prepare TLS Certificates","text":"<p>Sellia requires TLS certificates. The quickest option is using Cloudflare Origin Certificates (free):</p> <ol> <li>Add your domain to Cloudflare</li> <li>Go to SSL/TLS → Origin Server → Create Certificate</li> <li>Select:</li> <li>Hostnames: <code>*.yourdomain.com</code> and <code>yourdomain.com</code></li> <li>Validity: 15 years</li> <li>Download the certificate and key</li> <li>Place them in <code>./certs/</code>:    <pre><code>certs/\n├── cert.pem\n└── key.pem\n</code></pre></li> </ol>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-4-start-the-server","level":3,"title":"Step 4: Start the Server","text":"<pre><code>docker compose -f docker-compose.prod.yml up -d\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-5-verify-deployment","level":3,"title":"Step 5: Verify Deployment","text":"<p>Check that the server is running:</p> <pre><code>docker compose -f docker-compose.prod.yml ps\ndocker compose -f docker-compose.prod.yml logs -f\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-6-create-your-first-tunnel","level":3,"title":"Step 6: Create Your First Tunnel","text":"<p>On your local machine:</p> <pre><code>sellia http 8080 --server https://yourdomain.com --api-key YOUR_MASTER_KEY\n</code></pre> <p>Your tunnel is now accessible at: <pre><code>https://abc123.yourdomain.com\n</code></pre></p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#manual-setup-running-from-source","level":2,"title":"Manual Setup: Running from Source","text":"<p>If you prefer to run Sellia directly without Docker:</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-1-build-sellia","level":3,"title":"Step 1: Build Sellia","text":"<pre><code>git clone https://github.com/watzon/sellia.git\ncd sellia\nshards build --release\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-2-prepare-tls-certificates","level":3,"title":"Step 2: Prepare TLS Certificates","text":"<p>As with Docker, you need TLS certificates. Place them in <code>./certs/</code>: <pre><code>certs/\n├── cert.pem\n└── key.pem\n</code></pre></p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-3-start-the-server","level":3,"title":"Step 3: Start the Server","text":"<pre><code>./bin/sellia-server \\\n  --port 3000 \\\n  --domain yourdomain.com \\\n  --require-auth \\\n  --master-key $(openssl rand -hex 32) \\\n  --https\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-4-configure-reverse-proxy-recommended","level":3,"title":"Step 4: Configure Reverse Proxy (Recommended)","text":"<p>For production, use a reverse proxy like Nginx or Caddy. Here's a basic Nginx config:</p> <pre><code>server {\n    listen 80;\n    server_name yourdomain.com *.yourdomain.com;\n    return 301 https://$server_name$request_uri;\n}\n\nserver {\n    listen 443 ssl;\n    server_name yourdomain.com *.yourdomain.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#step-5-create-tunnels","level":3,"title":"Step 5: Create Tunnels","text":"<pre><code>sellia http 8080 --server https://yourdomain.com --api-key YOUR_MASTER_KEY\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#server-configuration-options","level":2,"title":"Server Configuration Options","text":"<p>The <code>sellia-server</code> binary supports several options:</p> <pre><code>sellia-server [options]\n\nOptions:\n  --host HOST           Host to bind to (default: 0.0.0.0)\n  --port PORT           Port to listen on (default: 3000)\n  --domain DOMAIN       Base domain for subdomains (default: localhost)\n  --require-auth        Require API key authentication\n  --master-key KEY      Master API key (enables auth)\n  --https               Generate HTTPS URLs for tunnels\n  --no-rate-limit       Disable rate limiting\n  --no-landing          Disable the landing page\n  --db-path PATH        Path to SQLite database\n  --no-db               Disable database (use in-memory defaults)\n  -h, --help            Show help\n  -v, --version         Show version\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#environment-variables","level":3,"title":"Environment Variables","text":"<p>You can also configure the server using environment variables:</p> Variable Description Default <code>SELLIA_HOST</code> Host to bind to <code>0.0.0.0</code> <code>SELLIA_PORT</code> Port to listen on <code>3000</code> <code>SELLIA_DOMAIN</code> Base domain for subdomains <code>localhost</code> <code>SELLIA_REQUIRE_AUTH</code> Require authentication <code>false</code> <code>SELLIA_MASTER_KEY</code> Master API key - <code>SELLIA_USE_HTTPS</code> Generate HTTPS URLs <code>false</code> <code>SELLIA_RATE_LIMITING</code> Enable rate limiting <code>true</code> <code>SELLIA_DISABLE_LANDING</code> Disable the landing page <code>false</code> <code>SELLIA_DB_PATH</code> Path to SQLite database <code>~/.sellia/sellia.db</code> <code>SELLIA_NO_DB</code> Disable database (use in-memory defaults) <code>false</code>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#dns-configuration","level":2,"title":"DNS Configuration","text":"<p>Your domain's DNS should point to your server:</p> <pre><code>A    yourdomain.com        -&gt; YOUR_SERVER_IP\nA    *.yourdomain.com      -&gt; YOUR_SERVER_IP\n</code></pre> <p>If using Cloudflare, enable proxy mode (orange cloud icon) for DDoS protection.</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#1-use-strong-api-keys","level":3,"title":"1. Use Strong API Keys","text":"<p>Generate secure random keys:</p> <pre><code>openssl rand -hex 32\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#2-enable-authentication","level":3,"title":"2. Enable Authentication","text":"<p>Always require authentication in production:</p> <pre><code>sellia-server --require-auth --master-key $(openssl rand -hex 32)\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#3-use-https","level":3,"title":"3. Use HTTPS","text":"<p>Enable HTTPS for secure tunnel URLs:</p> <pre><code>sellia-server --https\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#4-enable-rate-limiting","level":3,"title":"4. Enable Rate Limiting","text":"<p>Keep rate limiting enabled (default) to prevent abuse:</p> <pre><code># Default: enabled\nsellia-server\n\n# Disable only if needed\nsellia-server --no-rate-limit\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#5-monitor-logs","level":3,"title":"5. Monitor Logs","text":"<p>Regularly check server logs for suspicious activity:</p> <pre><code># With Docker\ndocker compose -f docker-compose.prod.yml logs -f\n\n# Manual\n./bin/sellia-server\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#managing-api-keys","level":2,"title":"Managing API Keys","text":"<p>The master API key created during setup can be used to create tunnels. For better security, create individual keys for each user or application.</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#using-api-keys","level":3,"title":"Using API Keys","text":"<p>Store your API key securely:</p> <pre><code># In environment variable\nexport SELLIA_API_KEY=\"your-api-key\"\n\n# Use with tunnel\nsellia http 8080 --server https://yourdomain.com\n</code></pre> <p>Or in <code>sellia.yml</code>:</p> <pre><code>server: https://yourdomain.com\napi_key: your-api-key\n</code></pre> <p>Then use:</p> <pre><code>sellia http 8080\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#production-deployment","level":2,"title":"Production Deployment","text":"<p>For production deployment, consider:</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#1-use-a-process-manager","level":3,"title":"1. Use a Process Manager","text":"<p>Keep the server running with systemd, supervisord, or Docker:</p> <pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nWorkingDirectory=/opt/sellia\nExecStart=/opt/sellia/bin/sellia-server --port 3000 --domain yourdomain.com\nRestart=always\nEnvironmentFile=/opt/sellia/.env\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#2-configure-firewall","level":3,"title":"2. Configure Firewall","text":"<p>Open necessary ports:</p> <pre><code># Allow HTTP and HTTPS\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# Allow Sellia server port (if not behind reverse proxy)\nsudo ufw allow 3000/tcp\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#3-set-up-monitoring","level":3,"title":"3. Set Up Monitoring","text":"<p>Monitor server health with tools like: - Prometheus + Grafana - Datadog - New Relic - Custom health checks</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#4-configure-backups","level":3,"title":"4. Configure Backups","text":"<p>Back up your configuration and TLS certificates:</p> <pre><code># Backup script\ntar -czf sellia-backup-$(date +%Y%m%d).tar.gz \\\n  /opt/sellia/.env \\\n  /opt/sellia/certs/ \\\n  /opt/sellia/sellia.yml\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#scaling-considerations","level":2,"title":"Scaling Considerations","text":"<p>For high-traffic deployments:</p> <ol> <li>Load Balancing: Run multiple Sellia instances behind a load balancer</li> <li>Caching: Add caching for static content</li> <li>Database: For persistent tunnel registry, consider adding a database backend</li> <li>Monitoring: Implement comprehensive monitoring and alerting</li> </ol>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#server-wont-start","level":3,"title":"Server Won't Start","text":"<p>Check port availability:</p> <pre><code>lsof -i :3000\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#tls-certificate-errors","level":3,"title":"TLS Certificate Errors","text":"<p>Verify certificate paths and permissions:</p> <pre><code>ls -la ./certs/\ncat ./certs/cert.pem\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#dns-not-resolving","level":3,"title":"DNS Not Resolving","text":"<p>Check DNS propagation:</p> <pre><code>dig yourdomain.com\ndig *.yourdomain.com\n</code></pre>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#tunnel-connection-failures","level":3,"title":"Tunnel Connection Failures","text":"<p>Verify: 1. Server is running 2. API key is correct 3. Network connectivity 4. Firewall rules</p>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#next-steps","level":2,"title":"Next Steps","text":"<p>Now that your server is running:</p> <ul> <li>Configuration Guide - Advanced configuration</li> <li>TLS Certificates - Certificate management</li> <li>Docker Deployment - Container deployment</li> <li>Multiple Tunnels - Manage multiple tunnels</li> </ul>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/getting-started/self-hosting-quickstart/#support","level":2,"title":"Support","text":"<ul> <li>Documentation</li> <li>GitHub Issues</li> <li>Community Discussions</li> </ul>","path":["User","Getting started","Self-Hosting Quick Start"],"tags":[]},{"location":"user/inspector/disabling-inspector/","level":1,"title":"Disabling the Inspector","text":"<p>The Sellia Inspector is enabled by default for debugging, but you can disable it to save resources or for production deployments. This guide explains when and how to disable the inspector.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#why-disable-the-inspector","level":2,"title":"Why Disable the Inspector?","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#resource-usage","level":3,"title":"Resource Usage","text":"<p>The inspector uses: - Memory: ~1-5 KB per request for history - CPU: Minimal overhead for request logging - File Descriptor: One for the inspector UI</p> <p>For high-traffic scenarios, this can add up.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#production-deployments","level":3,"title":"Production Deployments","text":"<p>In production, you typically: - Use application-level logging instead - Don't need real-time request inspection - Want minimal resource overhead - Have centralized monitoring</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#security-considerations","level":3,"title":"Security Considerations","text":"<p>The inspector exposes: - All request headers including auth tokens - Request/response bodies - Sensitive data in transit</p> <p>Disable to prevent accidental exposure.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#performance-optimization","level":3,"title":"Performance Optimization","text":"<p>For maximum tunnel performance: - Eliminate any overhead - Reduce memory footprint - Minimize CPU usage</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#how-to-disable-the-inspector","level":2,"title":"How to Disable the Inspector","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#command-line-flag","level":3,"title":"Command Line Flag","text":"<p>Use the <code>--no-inspector</code> flag:</p> <pre><code>sellia http 8080 --no-inspector --server https://sellia.me\n</code></pre> <p>Output: <pre><code>[Sellia] Tunnel established at: https://abc123.sellia.me\n# No inspector URL shown\n</code></pre></p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#configuration-and-environment","level":3,"title":"Configuration and Environment","text":"<p>There is no config or environment variable to toggle the inspector. Use <code>--no-inspector</code> with <code>sellia http</code>. The <code>sellia start</code> command does not run the inspector.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#when-to-disable","level":2,"title":"When to Disable","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#1-production-tunnels","level":3,"title":"1. Production Tunnels","text":"<p>Always disable in production:</p> <pre><code>sellia http 8080 --no-inspector --server https://prod.sellia.me\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#2-high-traffic-scenarios","level":3,"title":"2. High-Traffic Scenarios","text":"<p>For expected high load:</p> <pre><code>sellia http 8080 --no-inspector --server https://sellia.me\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#3-sensitive-data","level":3,"title":"3. Sensitive Data","text":"<p>When handling sensitive information:</p> <pre><code>sellia http 8080 --no-inspector --auth secure:secret\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#4-resource-constrained-environments","level":3,"title":"4. Resource-Constrained Environments","text":"<p>Limited memory/CPU:</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#5-backgroundservice-tunnels","level":3,"title":"5. Background/Service Tunnels","text":"<p>If you run a long-lived tunnel, use <code>sellia http --no-inspector</code> to avoid inspector overhead.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#when-to-keep-inspector-enabled","level":2,"title":"When to Keep Inspector Enabled","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#1-development","level":3,"title":"1. Development","text":"<p>Always enable during development:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#2-debugging","level":3,"title":"2. Debugging","text":"<p>When troubleshooting issues:</p> <pre><code>sellia http 8080  # Inspector enabled by default\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#3-testing","level":3,"title":"3. Testing","text":"<p>During API testing:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#4-webhook-development","level":3,"title":"4. Webhook Development","text":"<p>For webhook testing:</p> <pre><code>sellia http 3000 --subdomain webhooks --open\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#5-low-traffic-personal-tunnels","level":3,"title":"5. Low-Traffic Personal Tunnels","text":"<p>Personal use with low traffic:</p> <pre><code>sellia http 8080  # Fine to keep enabled\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#alternatives-to-inspector","level":2,"title":"Alternatives to Inspector","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#application-logging","level":3,"title":"Application Logging","text":"<p>Use your application's logging instead:</p> <pre><code>// Express example\napp.use((req, res, next) =&gt; {\n  console.log({\n    method: req.method,\n    path: req.path,\n    headers: req.headers,\n    body: req.body\n  });\n  next();\n});\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#http-logging-libraries","level":3,"title":"HTTP Logging Libraries","text":"<p>Use dedicated logging middleware:</p> <pre><code>// Node.js - morgan\nconst morgan = require('morgan');\napp.use(morgan('combined'));\n\n// Python - logging\nimport logging\nlogging.basicConfig(level=logging.INFO)\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#centralized-logging","level":3,"title":"Centralized Logging","text":"<p>Send logs to logging services:</p> <pre><code>// Send to Datadog, Loggly, etc.\nconst winston = require('winston');\nrequire('winston-datadog-logs-transport');\n\nconst logger = winston.createLogger({\n  transports: [\n    new DatadogLogsTransport({\n      apiKey: process.env.DD_API_KEY\n    })\n  ]\n});\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#apm-tools","level":3,"title":"APM Tools","text":"<p>Use Application Performance Monitoring:</p> <ul> <li>Datadog: Full request tracing</li> <li>New Relic: Performance monitoring</li> <li>Prometheus + Grafana: Metrics and dashboards</li> <li>CloudWatch: AWS integrated monitoring</li> </ul>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#performance-impact","level":2,"title":"Performance Impact","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#memory-usage","level":3,"title":"Memory Usage","text":"<p>With inspector (1000 requests): <pre><code>Memory: ~5 MB\n  - Request history: ~3 MB\n  - UI overhead: ~2 MB\n</code></pre></p> <p>Without inspector: <pre><code>Memory: ~0 MB (no additional overhead)\n</code></pre></p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#cpu-overhead","level":3,"title":"CPU Overhead","text":"<p>With inspector: <pre><code>CPU: +1-2% per 1000 req/min\n</code></pre></p> <p>Without inspector: <pre><code>CPU: No overhead\n</code></pre></p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#request-latency","level":3,"title":"Request Latency","text":"<p>Inspector adds minimal latency: <pre><code>Without inspector: 50ms average\nWith inspector: 51ms average (+1ms)\n</code></pre></p> <p>Disable to eliminate this overhead.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#cli-examples","level":2,"title":"CLI Examples","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#development-inspector-on","level":3,"title":"Development (inspector on)","text":"<pre><code>sellia http 3000 --open --server https://dev.sellia.me\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#production-inspector-off","level":3,"title":"Production (inspector off)","text":"<pre><code>sellia http 3000 --no-inspector --server https://prod.sellia.me\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#temporary-debugging","level":3,"title":"Temporary debugging","text":"<pre><code>sellia http 3000 --open\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#inspector-still-running","level":3,"title":"Inspector Still Running","text":"<p>If the inspector appears when you expect it to be disabled:</p> <ol> <li>Confirm the command includes <code>--no-inspector</code>.</li> <li>Ensure you are running <code>sellia http</code> (the inspector is not used by <code>sellia start</code>).</li> <li>Check that an older <code>sellia http</code> process isn’t still running.</li> </ol>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#need-inspector-temporarily","level":3,"title":"Need Inspector Temporarily","text":"<p>If inspector is disabled but you need it:</p> <ol> <li> <p>Enable temporarily:    <pre><code>sellia http 8080  # Remove --no-inspector flag\n</code></pre></p> </li> <li> <p>Use different tunnel for debugging:    <pre><code># Main tunnel (no inspector)\nsellia http 3000 --subdomain app-prod --no-inspector &amp;\n\n# Debug tunnel (with inspector)\nsellia http 3001 --subdomain app-debug --open\n</code></pre></p> </li> <li> <p>If you need the inspector temporarily, run <code>sellia http</code> without <code>--no-inspector</code>.</p> </li> </ol>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#port-already-in-use","level":3,"title":"Port Already in Use","text":"<p>If inspector port (4040) is in use:</p> <ol> <li> <p>Use custom port:    <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre></p> </li> <li> <p>Disable inspector:    <pre><code>sellia http 8080 --no-inspector\n</code></pre></p> </li> </ol>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#1-environment-based-commands","level":3,"title":"1. Environment-Based Commands","text":"<p>Use shell aliases or scripts for consistent behavior:</p> <pre><code># Development\nalias sellia-dev='sellia http 3000 --open'\n\n# Production\nalias sellia-prod='sellia http 3000 --no-inspector'\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#2-explicit-in-production","level":3,"title":"2. Explicit in Production","text":"<p>Always include <code>--no-inspector</code> in production commands or service definitions.</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#3-document-decision","level":3,"title":"3. Document Decision","text":"<p>Note in runbooks or deployment scripts why the inspector is disabled (e.g., security or performance).</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#4-use-alternatives","level":3,"title":"4. Use Alternatives","text":"<p>Set up proper monitoring before disabling (e.g., centralized logging and APM).</p>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#migration-guide","level":2,"title":"Migration Guide","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#from-inspector-to-logging","level":3,"title":"From Inspector to Logging","text":"<ol> <li> <p>Keep inspector during development <pre><code>sellia http 8080 --open\n</code></pre></p> </li> <li> <p>Add application logging <pre><code>app.use(morgan('combined'));\n</code></pre></p> </li> <li> <p>Test with both enabled <pre><code># Compare inspector vs. application logs\n</code></pre></p> </li> <li> <p>Deploy with logging only    Use <code>sellia http --no-inspector</code> in production.</p> </li> <li> <p>Monitor logs in production <pre><code>tail -f /var/log/app.log\n</code></pre></p> </li> </ol>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#verification","level":2,"title":"Verification","text":"","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#verify-inspector-is-disabled","level":3,"title":"Verify Inspector is Disabled","text":"<pre><code># Start tunnel with --no-inspector\nsellia http 8080 --no-inspector\n\n# Output should NOT show:\n# [Sellia] Inspector available at: http://localhost:4040\n\n# Verify port not in use\nlsof -i :4040\n# Should return nothing\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#verify-inspector-is-enabled","level":3,"title":"Verify Inspector is Enabled","text":"<pre><code># Start tunnel without flag\nsellia http 8080\n\n# Output should show:\n# [Sellia] Inspector available at: http://localhost:4040\n\n# Verify port is in use\nlsof -i :4040\n# Should show sellia process\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#decision-tree","level":2,"title":"Decision Tree","text":"<pre><code>Is this a production tunnel?\n├─ Yes → Disable inspector (--no-inspector)\n│        Use application logging instead\n│\n└─ No (development/testing)\n    ├─ Need to debug requests?\n    │  ├─ Yes → Enable inspector (--open)\n    │  └─ No → Optional (enabled by default)\n    │\n    └─ High traffic expected (&gt;1000 req/min)?\n       ├─ Yes → Consider disabling\n       └─ No → Keep enabled\n</code></pre>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Live Monitoring - Using the inspector</li> <li>Application Logging - Alternative logging</li> <li>Production Deployment - Production setup</li> </ul>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#quick-reference","level":2,"title":"Quick Reference","text":"Scenario Command Disable inspector <code>sellia http 8080 --no-inspector</code> Enable inspector <code>sellia http 8080</code> (default) Auto-open inspector <code>sellia http 8080 --open</code> Custom inspector port <code>sellia http 8080 --inspector-port 5000</code>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/disabling-inspector/#checklist","level":2,"title":"Checklist","text":"<p>Before disabling inspector in production:</p> <ul> <li> Application logging configured</li> <li> Centralized logging set up (optional)</li> <li> Team knows how to access logs</li> <li> Monitoring/alerting configured</li> <li> Debug procedures documented</li> <li> Can reproduce issues with logs only</li> <li> Performance metrics being collected</li> <li> Tested without inspector in staging</li> </ul>","path":["User","Inspector","Disabling the Inspector"],"tags":[]},{"location":"user/inspector/live-monitoring/","level":1,"title":"Live Request Monitoring","text":"<p>The Sellia Inspector provides real-time visibility into all HTTP requests flowing through your tunnels. Debug issues, analyze traffic, and understand your application's behavior without adding any logging code.</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#what-is-the-inspector","level":2,"title":"What is the Inspector?","text":"<p>The inspector is a web-based UI that shows: - All incoming requests to your tunnels - Request details (headers, body, timing) - Response information (status, headers, body) - Real-time streaming of new requests - Request history and search</p> <p>Access it at <code>http://localhost:4040</code> when a tunnel is running.</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#starting-the-inspector","level":2,"title":"Starting the Inspector","text":"<p>The inspector starts automatically when you create a tunnel:</p> <pre><code>sellia http 8080 --server https://sellia.me\n</code></pre> <p>Output: <pre><code>[Sellia] Tunnel established at: https://abc123.sellia.me\n[Sellia] Inspector available at: http://localhost:4040\n</code></pre></p> <p>Open <code>http://localhost:4040</code> in your browser to see the inspector.</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-interface","level":2,"title":"Inspector Interface","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#main-view","level":3,"title":"Main View","text":"<p>The main inspector interface shows:</p> <ol> <li>Request List - Stream of incoming requests</li> <li>Request Details - Click any request to see full details</li> <li>Status Bar - Active tunnel info and connection status</li> <li>Toolbar - Search, filter, and clear options</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#request-entry","level":3,"title":"Request Entry","text":"<p>Each request in the list shows: - Method - GET, POST, PUT, DELETE, etc. - Path - Request path and query string - Status - HTTP status code with color coding - Time - Timestamp of request - Duration - Request processing time - Source IP - Client IP address</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#status-code-colors","level":3,"title":"Status Code Colors","text":"<ul> <li>2xx (Green) - Successful responses</li> <li>3xx (Yellow) - Redirects</li> <li>4xx (Orange) - Client errors</li> <li>5xx (Red) - Server errors</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#real-time-streaming","level":2,"title":"Real-Time Streaming","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#automatic-updates","level":3,"title":"Automatic Updates","text":"<p>Requests appear in the inspector as they arrive:</p> <ol> <li>Make a request to your tunnel</li> <li>Request appears instantly in the inspector</li> <li>No page refresh needed</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#example","level":3,"title":"Example","text":"<pre><code># Terminal 1: Start tunnel\nsellia http 8080 --open\n\n# Terminal 2: Make requests\ncurl https://abc123.sellia.me/api/users\ncurl https://abc123.sellia.me/api/products\ncurl -X POST https://abc123.sellia.me/api/data\n</code></pre> <p>Watch all three requests appear in real-time in the inspector.</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-features","level":2,"title":"Inspector Features","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#1-live-streaming","level":3,"title":"1. Live Streaming","text":"<p>Watch requests as they happen:</p> <pre><code>10:23:45  GET    /api/users          200  45ms\n10:23:47  POST   /api/data           201  123ms\n10:23:50  GET    /api/products       200  38ms\n10:23:55  DELETE /api/users/123      204  52ms\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#2-request-details","level":3,"title":"2. Request Details","text":"<p>Click any request to see full details:</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#request-information","level":4,"title":"Request Information","text":"<ul> <li>Full URL</li> <li>Method and path</li> <li>Query parameters</li> <li>Request headers</li> <li>Request body (if present)</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#response-information","level":4,"title":"Response Information","text":"<ul> <li>Status code and message</li> <li>Response headers</li> <li>Response body (if present)</li> <li>Response size</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#timing-information","level":4,"title":"Timing Information","text":"<ul> <li>Total duration</li> <li>Time to first byte</li> <li>Processing time</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#3-search-and-filter","level":3,"title":"3. Search and Filter","text":"<p>Find specific requests:</p> <pre><code># In the inspector UI\n# Search box in top right\n\n# Search by path\n/api/users\n\n# Search by method\nPOST\n\n# Search by status\n404\n\n# Search by content type\napplication/json\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#4-clear-history","level":3,"title":"4. Clear History","text":"<p>Reset the request log:</p> <pre><code># Click \"Clear\" button in toolbar\n# Or use keyboard shortcut (Ctrl/Cmd + K)\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#5-copy-as-curl","level":3,"title":"5. Copy as cURL","text":"<p>Reproduce any request:</p> <pre><code># Click on a request\n# Click \"Copy as cURL\" button\n# Paste in terminal to reproduce\n</code></pre> <p>See Copy as cURL for details.</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-options","level":2,"title":"Inspector Options","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#automatic-browser-opening","level":3,"title":"Automatic Browser Opening","text":"<p>Open inspector automatically when tunnel starts:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#custom-inspector-port","level":3,"title":"Custom Inspector Port","text":"<p>Change the default port (4040) if needed:</p> <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre> <p>Access at <code>http://localhost:5000</code></p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#disable-inspector","level":3,"title":"Disable Inspector","text":"<p>If you don't need the inspector:</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre> <p>This saves resources and is useful for production tunnels.</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#use-cases","level":2,"title":"Use Cases","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#1-debugging-webhooks","level":3,"title":"1. Debugging Webhooks","text":"<p>See exactly what webhook payloads you're receiving:</p> <pre><code># Start tunnel with inspector\nsellia http 3000 --subdomain webhooks --open\n\n# Configure webhook URL in service\n# https://webhooks.sellia.me/callback\n\n# Watch webhook requests appear in real-time\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#2-api-development","level":3,"title":"2. API Development","text":"<p>Monitor API calls during development:</p> <pre><code>sellia http 4000 --subdomain api-dev --open\n\n# Test your API from frontend\n# See all requests in inspector\n# Debug authentication, headers, responses\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#3-performance-analysis","level":3,"title":"3. Performance Analysis","text":"<p>Identify slow requests:</p> <pre><code>sellia http 3000 --open\n\n# Use your application\n# Watch for requests with high duration\n# Optimize slow endpoints\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#4-testing-integrations","level":3,"title":"4. Testing Integrations","text":"<p>Verify third-party service integrations:</p> <pre><code>sellia http 5000 --subdomain stripe-test --open\n\n# Configure Stripe webhook\n# Make a test payment\n# Inspect the webhook payload\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#5-mobile-app-development","level":3,"title":"5. Mobile App Development","text":"<p>Debug mobile app API calls:</p> <pre><code>sellia http 4000 --subdomain mobile-api --open\n\n# Point mobile app to tunnel URL\n# See all API requests from app\n# Debug headers, auth, payloads\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-vs-application-logging","level":2,"title":"Inspector vs. Application Logging","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-advantages","level":3,"title":"Inspector Advantages","text":"<ul> <li>No code changes needed</li> <li>See all requests, including ones your app doesn't log</li> <li>Real-time streaming</li> <li>Easy search and filtering</li> <li>Visual request details</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#application-logging-advantages","level":3,"title":"Application Logging Advantages","text":"<ul> <li>Persistent across restarts</li> <li>Can log application-specific data</li> <li>Can log to files/services</li> <li>Custom formatting</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#best-practice","level":3,"title":"Best Practice","text":"<p>Use both: - Inspector for real-time debugging - Application logs for persistent records and production</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#performance-impact","level":2,"title":"Performance Impact","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#minimal-overhead","level":3,"title":"Minimal Overhead","text":"<p>The inspector adds negligible overhead: - ~1-2ms per request - No impact on tunnel performance - Can be disabled with <code>--no-inspector</code></p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#memory-usage","level":3,"title":"Memory Usage","text":"<p>Inspector maintains request history in memory: - Each request: ~1-5 KB depending on size - Typical usage: &lt;100 MB for thousands of requests - Clear history to free memory</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#disabling-for-production","level":3,"title":"Disabling for Production","text":"<p>For high-traffic production tunnels, consider disabling:</p> <pre><code>sellia http 8080 --no-inspector\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-workflows","level":2,"title":"Inspector Workflows","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#debugging-a-404-error","level":3,"title":"Debugging a 404 Error","text":"<ol> <li>Start inspector: <code>sellia http 8080 --open</code></li> <li>Make request that returns 404</li> <li>Click request in inspector</li> <li>Check:</li> <li>Request path is correct</li> <li>Query parameters are present</li> <li>Headers are correct</li> <li>Compare to working requests</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#debugging-authentication","level":3,"title":"Debugging Authentication","text":"<ol> <li>Start inspector</li> <li>Make authenticated request</li> <li>Click request in inspector</li> <li>Check headers:</li> <li>Authorization header format</li> <li>Cookie values</li> <li>Custom auth headers</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#debugging-postput-data","level":3,"title":"Debugging POST/PUT Data","text":"<ol> <li>Start inspector</li> <li>Make POST/PUT request</li> <li>Click request in inspector</li> <li>Check request body:</li> <li>JSON format</li> <li>Form data</li> <li>File uploads</li> <li>Content-Type header</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#performance-debugging","level":3,"title":"Performance Debugging","text":"<ol> <li>Start inspector</li> <li>Use your application</li> <li>Sort requests by duration</li> <li>Investigate slowest requests:</li> <li>Check response size</li> <li>Look at database queries</li> <li>Profile application code</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#tips-and-tricks","level":2,"title":"Tips and Tricks","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#1-keep-inspector-open","level":3,"title":"1. Keep Inspector Open","text":"<p>Leave the inspector open while developing: - See all requests in real-time - No need to refresh - Instant feedback</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#2-use-multiple-monitors","level":3,"title":"2. Use Multiple Monitors","text":"<p>If you have multiple monitors: - Monitor 1: Your application - Monitor 2: Inspector - Watch requests as you interact with app</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#3-search-by-status-code","level":3,"title":"3. Search by Status Code","text":"<p>Quickly find errors:</p> <pre><code># Search for server errors\n500\n\n# Search for client errors\n404\n\n# Search for redirects\n302\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#4-compare-requests","level":3,"title":"4. Compare Requests","text":"<p>Open multiple requests in tabs: - Compare working vs. broken requests - Spot differences in headers/body - Identify what changed</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#5-clear-before-testing","level":3,"title":"5. Clear Before Testing","text":"<p>Clear history before specific test:</p> <pre><code># Click \"Clear\" button\n# Run specific test scenario\n# Only see test requests\n</code></pre>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#limitations","level":2,"title":"Limitations","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#request-history","level":3,"title":"Request History","text":"<ul> <li>Stored in memory only</li> <li>Lost when tunnel stops</li> <li>Use application logging for persistence</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#large-bodies","level":3,"title":"Large Bodies","text":"<p>Very large request/response bodies may be truncated: - Maximum display size: ~1 MB - Full data still forwarded through tunnel - Check application logs for complete data</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#concurrent-tunnels","level":3,"title":"Concurrent Tunnels","text":"<p>Each <code>sellia http</code> process has its own inspector: - Use different <code>--inspector-port</code> values when running multiple processes - There is no single view that aggregates multiple tunnels</p>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-not-loading","level":3,"title":"Inspector Not Loading","text":"<p>If inspector won't load:</p> <ol> <li> <p>Verify tunnel is running:    <pre><code>ps aux | grep sellia\n</code></pre></p> </li> <li> <p>Check inspector port:    <pre><code>lsof -i :4040\n</code></pre></p> </li> <li> <p>Try different port:    <pre><code>sellia http 8080 --inspector-port 5000\n</code></pre></p> </li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#no-requests-showing","level":3,"title":"No Requests Showing","text":"<p>If inspector is empty:</p> <ol> <li> <p>Make a test request:    <pre><code>curl https://your-tunnel.sellia.me\n</code></pre></p> </li> <li> <p>Check tunnel is active:    <pre><code># Should see \"Tunnel established\"\n</code></pre></p> </li> <li> <p>Verify browser console for errors</p> </li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#inspector-slow","level":3,"title":"Inspector Slow","text":"<p>If inspector is slow:</p> <ol> <li>Clear request history</li> <li>Close other browser tabs</li> <li>Check system resources</li> <li>Consider disabling for high-traffic scenarios</li> </ol>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Request Details - Deep dive into request information</li> <li>Copy as cURL - Reproduce requests</li> <li>Disabling Inspector - When to disable</li> <li>HTTP Tunnels - Tunnel basics</li> </ul>","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/inspector/live-monitoring/#keyboard-shortcuts","level":2,"title":"Keyboard Shortcuts","text":"Shortcut Action <code>Ctrl/Cmd + K</code> Clear history <code>Ctrl/Cmd + F</code> Focus search <code>Escape</code> Close request details <code>↑</code> / <code>↓</code> Navigate requests <code>Enter</code> Open request details","path":["User","Inspector","Live Request Monitoring"],"tags":[]},{"location":"user/storage/","level":1,"title":"Storage","text":"<p>Data persistence and storage options for Sellia.</p>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#overview","level":2,"title":"Overview","text":"<p>Sellia can store various types of data including tunnel registrations, authentication information, and request logs. This section covers storage configuration and options.</p>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#storage-types","level":2,"title":"Storage Types","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#in-memory-default","level":3,"title":"In-Memory (Default)","text":"<p>By default, Sellia stores data in memory:</p> <ul> <li>Pros: Fast, no setup required</li> <li>Cons: Data lost on restart, limited by available memory</li> <li>Use Case: Development, testing, temporary deployments</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#sqlite","level":3,"title":"SQLite","text":"<p>Persistent storage using SQLite database:</p> <ul> <li>Pros: Persistent, lightweight, single file</li> <li>Cons: Single-server only</li> <li>Use Case: Production deployments with single server</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#postgresql-future","level":3,"title":"PostgreSQL (Future)","text":"<p>PostgreSQL support planned for:</p> <ul> <li>Pros: Scalable, concurrent access, backups</li> <li>Cons: Requires separate database server</li> <li>Use Case: Multi-server deployments, high-availability</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#configuration","level":2,"title":"Configuration","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#sqlite-setup","level":3,"title":"SQLite Setup","text":"<p>Enable SQLite storage:</p> <pre><code># Environment variable\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n\n# Or disable database\nexport SELLIA_NO_DB=\"true\"\n\n# Or in configuration (note: database.enabled=false disables the database)\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#postgresql-setup-future","level":3,"title":"PostgreSQL Setup (Future)","text":"<pre><code># Connection string\nexport SELLIA_DATABASE=postgresql://user:password@localhost:5432/sellia\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#data-stored","level":2,"title":"Data Stored","text":"<p>Sellia stores the following data:</p>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<ul> <li>Subdomain names that cannot be claimed by tunnel clients</li> <li>Reasons/documentation for reservations</li> <li>Default vs. custom reservations</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#authentication-data","level":3,"title":"Authentication Data","text":"<ul> <li>API keys (hashed)</li> <li>Key prefix for identification</li> <li>Master key designation</li> <li>Active/inactive status</li> <li>Creation and last-used timestamps</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#storage-paths","level":2,"title":"Storage Paths","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#default-locations","level":3,"title":"Default Locations","text":"<pre><code>/var/lib/sellia/\n├── sellia.db           # SQLite database\n├── tunnels/            # Tunnel data\n└── logs/               # Request logs\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#custom-paths","level":3,"title":"Custom Paths","text":"<p>Configure custom storage paths:</p> <pre><code># Environment variable\nexport SELLIA_STORAGE_PATH=/custom/path\n\n# Or in configuration\nstorage:\n  path: /custom/path\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#docker-volumes","level":2,"title":"Docker Volumes","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#named-volume","level":3,"title":"Named Volume","text":"<pre><code>services:\n  sellia-server:\n    volumes:\n      - sellia-data:/var/lib/sellia\n\nvolumes:\n  sellia-data:\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#bind-mount","level":3,"title":"Bind Mount","text":"<pre><code>services:\n  sellia-server:\n    volumes:\n      - ./data:/var/lib/sellia\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#docker-compose-example","level":3,"title":"Docker Compose Example","text":"<pre><code>version: '3.8'\nservices:\n  sellia-server:\n    image: sellia-server\n    environment:\n      - SELLIA_DATABASE=sqlite:///var/lib/sellia/sellia.db\n    volumes:\n      - sellia-data:/var/lib/sellia\n    ports:\n      - \"3000:3000\"\n\nvolumes:\n  sellia-data:\n    driver: local\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#backup","level":2,"title":"Backup","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#sqlite-backup","level":3,"title":"SQLite Backup","text":"<pre><code># Backup database\ncp /var/lib/sellia/sellia.db /backup/sellia-$(date +%Y%m%d).db\n\n# Or using sqlite3\nsqlite3 /var/lib/sellia/sellia.db \".backup /backup/sellia.db\"\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#automated-backup","level":3,"title":"Automated Backup","text":"<pre><code>#!/bin/bash\n# backup-sellia.sh\n\nBACKUP_DIR=\"/backup/sellia\"\nDATE=$(date +%Y%m%d_%H%M%S)\n\nmkdir -p \"$BACKUP_DIR\"\n\n# Backup database\ncp /var/lib/sellia/sellia.db \"$BACKUP_DIR/sellia-$DATE.db\"\n\n# Backup configuration\ntar -czf \"$BACKUP_DIR/config-$DATE.tar.gz\" /etc/sellia/\n\n# Remove old backups (keep last 30 days)\nfind \"$BACKUP_DIR\" -name \"sellia-*.db\" -mtime +30 -delete\nfind \"$BACKUP_DIR\" -name \"config-*.tar.gz\" -mtime +30 -delete\n</code></pre> <p>Add to crontab:</p> <pre><code># Daily backup at 2 AM\n0 2 * * * /path/to/backup-sellia.sh\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#docker-volume-backup","level":3,"title":"Docker Volume Backup","text":"<pre><code># Backup volume\ndocker run --rm \\\n  -v sellia-data:/data \\\n  -v $(pwd):/backup \\\n  alpine tar czf /backup/sellia-backup-$(date +%Y%m%d).tar.gz /data\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#restore","level":2,"title":"Restore","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#sqlite-restore","level":3,"title":"SQLite Restore","text":"<pre><code># Stop server\ndocker compose down\n\n# Restore database\ncp /backup/sellia-20250130.db /var/lib/sellia/sellia.db\n\n# Restart server\ndocker compose up -d\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#docker-volume-restore","level":3,"title":"Docker Volume Restore","text":"<pre><code># Restore volume\ndocker run --rm \\\n  -v sellia-data:/data \\\n  -v $(pwd):/backup \\\n  alpine tar xzf /backup/sellia-backup-20250130.tar.gz -C /\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#performance","level":2,"title":"Performance","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#sqlite-optimization","level":3,"title":"SQLite Optimization","text":"<pre><code># Optimize database\nsqlite3 /var/lib/sellia/sellia.db \"VACUUM;\"\n\n# Analyze for query optimization\nsqlite3 /var/lib/sellia/sellia.db \"ANALYZE;\"\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#storage-maintenance","level":3,"title":"Storage Maintenance","text":"<p>Regular maintenance tasks:</p> <pre><code># Rebuild database\nsqlite3 /var/lib/sellia/sellia.db \"VACUUM;\"\n\n# Analyze for query optimization\nsqlite3 /var/lib/sellia/sellia.db \"ANALYZE;\"\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#monitoring","level":2,"title":"Monitoring","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#disk-space","level":3,"title":"Disk Space","text":"<p>Monitor storage usage:</p> <pre><code># Check database size\nls -lh /var/lib/sellia/sellia.db\n\n# Check disk usage\ndu -sh /var/lib/sellia/\n\n# Alert if low on space\nDISK_USAGE=$(df /var/lib/sellia | tail -1 | awk '{print $5}' | sed 's/%//')\nif [ $DISK_USAGE -gt 80 ]; then\n    echo \"Warning: Disk usage is ${DISK_USAGE}%\"\nfi\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#database-statistics","level":3,"title":"Database Statistics","text":"<pre><code># API keys in database\nsqlite3 /var/lib/sellia/sellia.db \"SELECT COUNT(*) FROM api_keys WHERE active = 1;\"\n\n# Reserved subdomains\nsqlite3 /var/lib/sellia/sellia.db \"SELECT COUNT(*) FROM reserved_subdomains;\"\n\n# Database version\nsqlite3 /var/lib/sellia/sellia.db \"SELECT MAX(version) FROM schema_migrations;\"\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#security","level":2,"title":"Security","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#file-permissions","level":3,"title":"File Permissions","text":"<p>Set appropriate permissions:</p> <pre><code># Database directory\nchmod 750 /var/lib/sellia/\nchown sellia:sellia /var/lib/sellia/\n\n# Database file\nchmod 640 /var/lib/sellia/sellia.db\nchown sellia:sellia /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#encryption","level":3,"title":"Encryption","text":"<p>For sensitive data, consider:</p> <ul> <li>Full disk encryption (LUKS)</li> <li>Encrypted backup archives</li> <li>Secure backup storage (S3 with encryption, etc.)</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#scaling","level":2,"title":"Scaling","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#when-to-upgrade-storage","level":3,"title":"When to Upgrade Storage","text":"<p>Consider upgrading when:</p> <ul> <li>Database size &gt; 1GB</li> <li>High request volume</li> <li>Multiple servers needed</li> <li>Complex queries needed</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#migration-path","level":3,"title":"Migration Path","text":"<p>SQLite → PostgreSQL migration (when supported):</p> <ol> <li>Export SQLite data</li> <li>Import to PostgreSQL</li> <li>Update configuration</li> <li>Test thoroughly</li> <li>Switch over</li> </ol>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#development","level":3,"title":"Development","text":"<ul> <li>Use in-memory storage</li> <li>No backup needed</li> <li>Fast iteration</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#production","level":3,"title":"Production","text":"<ul> <li>Always use persistent storage</li> <li>Regular automated backups</li> <li>Monitor disk usage</li> <li>Test restore procedure</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#high-availability","level":3,"title":"High Availability","text":"<ul> <li>Use PostgreSQL with replication</li> <li>Regular backups</li> <li>Failover procedures</li> <li>Monitoring and alerts</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Storage"],"tags":[]},{"location":"user/storage/#database-locked","level":3,"title":"Database Locked","text":"<p>Problem: \"Database is locked\" error</p> <p>Solutions: - Check for multiple instances - Restart server - Check file permissions - Enable WAL mode</p>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#disk-full","level":3,"title":"Disk Full","text":"<p>Problem: Out of disk space</p> <p>Solutions: - Clean old logs - Archive old data - Expand disk capacity - Implement log rotation</p>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#slow-queries","level":3,"title":"Slow Queries","text":"<p>Problem: Database operations slow</p> <p>Solutions: - Run <code>VACUUM</code> and <code>ANALYZE</code> - Check database size - Consider upgrading to PostgreSQL - Optimize queries</p>","path":["User","Storage"],"tags":[]},{"location":"user/storage/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Deployment - Production deployment with storage</li> <li>Admin Guide - Ongoing maintenance</li> <li>Configuration - Storage configuration options</li> </ul>","path":["User","Storage"],"tags":[]},{"location":"user/storage/database-config/","level":1,"title":"Database Configuration","text":"<p>Configure SQLite database settings for your Sellia server including path, enable/disable, and connection options.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#environment-variables","level":3,"title":"Environment Variables","text":"<p>The primary way to configure the database is via environment variables:</p> <pre><code># Enable/disable database (default: auto-detect based on path)\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n\n# Explicitly disable database\nexport SELLIA_NO_DB=\"true\"\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#config-file","level":3,"title":"Config File","text":"<p>Alternatively, use a YAML config file:</p> <pre><code># sellia-server.yml\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#command-line","level":3,"title":"Command Line","text":"<p>When starting the server:</p> <pre><code>sellia-server start --db-path /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#enabledisable-database","level":2,"title":"Enable/Disable Database","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#enable-database","level":3,"title":"Enable Database","text":"<p>Method 1: Set path (enables automatically):</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server\n</code></pre> <p>Method 2: Config file:</p> <pre><code>database:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre> <p>Method 3: Command line:</p> <pre><code>sellia-server --db-path /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#disable-database","level":3,"title":"Disable Database","text":"<p>Method 1: Environment variable:</p> <pre><code>export SELLIA_NO_DB=\"true\"\nsellia-server\n</code></pre> <p>Method 2: Config file:</p> <pre><code>database:\n  enabled: false\n</code></pre> <p>Method 3: Command line flag:</p> <pre><code>sellia-server --no-db\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#priority-order","level":3,"title":"Priority Order","text":"<p>When multiple sources are set, priority is:</p> <ol> <li><code>SELLIA_NO_DB=\"true\"</code> (explicit disable)</li> <li><code>SELLIA_DB_PATH</code> (explicit enable)</li> <li>Config file <code>database.enabled</code></li> <li>Config file <code>database.path</code></li> </ol>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#path-configuration","level":2,"title":"Path Configuration","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#absolute-path","level":3,"title":"Absolute Path","text":"<p>Recommended for production:</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#relative-path","level":3,"title":"Relative Path","text":"<p>Resolved relative to server's working directory:</p> <pre><code>export SELLIA_DB_PATH=\"./data/sellia.db\"\n</code></pre> <p>Note: Relative paths can be confusing. Use absolute paths in production.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#in-memory-database","level":3,"title":"In-Memory Database","text":"<p>For testing only:</p> <pre><code>export SELLIA_DB_PATH=\":memory:\"\n</code></pre> <p>Warning: Data is lost when server stops. Only for development/testing.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#shared-cache-in-memory","level":3,"title":"Shared-Cache In-Memory","text":"<p>For tests that need multiple connections:</p> <pre><code>export SELLIA_DB_PATH=\":memory:?mode=memory&amp;cache=shared\"\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#connection-options","level":2,"title":"Connection Options","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#sqlite-configuration-string","level":3,"title":"SQLite Configuration String","text":"<p>The server uses this connection string:</p> <pre><code>sqlite3://&lt;path&gt;?journal_mode=WAL&amp;synchronous=NORMAL&amp;cache_size=-64000&amp;foreign_keys=true&amp;max_pool_size=1\n</code></pre> <p>These options are hardcoded and optimal for Sellia's workload.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#wal-mode-write-ahead-logging","level":3,"title":"WAL Mode (Write-Ahead Logging)","text":"<p>What it does: - Allows concurrent reads and writes - Better performance for authentication queries - Multiple readers don't block writers</p> <p>Cannot be changed - hardcoded to WAL mode.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#synchronous-mode","level":3,"title":"Synchronous Mode","text":"<p>What it does: - Controls how often data is flushed to disk - <code>NORMAL</code> = Safe but faster - Full durability risk: Low (acceptable for this use case)</p> <p>Cannot be changed - hardcoded to NORMAL.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#cache-size","level":3,"title":"Cache Size","text":"<p>What it does: - <code>-64000</code> = 64MB cache - Reduces disk I/O for frequent queries</p> <p>Cannot be changed - hardcoded to 64MB.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#connection-pool","level":3,"title":"Connection Pool","text":"<p>What it does: - <code>max_pool_size=1</code> = Single connection for all queries - Required for SQLite (multiple connections can cause locks)</p> <p>Cannot be changed - hardcoded to 1.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#directory-permissions","level":2,"title":"Directory Permissions","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#creating-directory","level":3,"title":"Creating Directory","text":"<pre><code># Create directory\nsudo mkdir -p /var/lib/sellia\n\n# Set ownership\nsudo chown sellia:sellia /var/lib/sellia\n\n# Set permissions\nsudo chmod 755 /var/lib/sellia\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#database-file-permissions","level":3,"title":"Database File Permissions","text":"<p>The server creates the database with <code>0640</code> permissions:</p> <ul> <li>Owner (sellia): read/write</li> <li>Group (sellia): read</li> <li>Others: no access</li> </ul> <p>Manual permission fix:</p> <pre><code>sudo chmod 640 /var/lib/sellia/sellia.db\nsudo chown sellia:sellia /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#selinux-configuration","level":3,"title":"SELinux Configuration","text":"<p>If using SELinux, may need to label the database:</p> <pre><code># Check current context\nls -Z /var/lib/sellia/sellia.db\n\n# Set context (adjust as needed)\nsudo semanage fcontext -a -t httpd_sys_rw_content_t \"/var/lib/sellia(/.*)?\"\nsudo restorecon -Rv /var/lib/sellia\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#development","level":3,"title":"Development","text":"<pre><code># Use local file for development\nexport SELLIA_DB_PATH=\"$HOME/dev/sellia/sellia.db\"\nsellia-server\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#production","level":3,"title":"Production","text":"<pre><code># Use system directory with proper permissions\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsudo mkdir -p /var/lib/sellia\nsudo chown sellia:sellia /var/lib/sellia\nsudo chmod 755 /var/lib/sellia\nsellia-server\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#docker","level":3,"title":"Docker","text":"<pre><code># docker-compose.yml\nversion: '3'\nservices:\n  sellia-server:\n    image: sellia/server:latest\n    environment:\n      - SELLIA_DB_PATH=/data/sellia.db\n    volumes:\n      - sellia-data:/data\n    ports:\n      - \"3000:3000\"\n\nvolumes:\n  sellia-data:\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#kubernetes","level":3,"title":"Kubernetes","text":"<pre><code># deployment.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: sellia-config\ndata:\n  SELLIA_DB_PATH: \"/data/sellia.db\"\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: sellia-data\nspec:\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: sellia-server\nspec:\n  template:\n    spec:\n      containers:\n      - name: sellia\n        image: sellia/server:latest\n        envFrom:\n          - configMapRef:\n              name: sellia-config\n        volumeMounts:\n          - name: data\n            mountPath: /data\n      volumes:\n        - name: data\n          persistentVolumeClaim:\n            claimName: sellia-data\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#systemd-service","level":3,"title":"Systemd Service","text":"<pre><code># /etc/systemd/system/sellia.service\n[Unit]\nDescription=Sellia Tunnel Server\nAfter=network.target\n\n[Service]\nType=simple\nUser=sellia\nGroup=sellia\nWorkingDirectory=/opt/sellia\nEnvironment=\"SELLIA_DB_PATH=/var/lib/sellia/sellia.db\"\nEnvironment=\"SELLIA_REQUIRE_AUTH=true\"\nEnvironment=\"SELLIA_MASTER_KEY=your-master-key\"\nExecStart=/opt/sellia/bin/sellia-server start\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable and start:</p> <pre><code>sudo systemctl enable sellia\nsudo systemctl start sellia\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#environment-variables-reference","level":2,"title":"Environment Variables Reference","text":"Variable Type Default Description <code>SELLIA_DB_PATH</code> string (none) Path to SQLite database file <code>SELLIA_NO_DB</code> boolean false Explicitly disable database","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#config-file-reference","level":2,"title":"Config File Reference","text":"<pre><code>database:\n  enabled: true          # Enable/disable database\n  path: /var/lib/sellia/sellia.db  # Database file path\n</code></pre> <p>Priority: Environment variables override config file.</p>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#database-not-created","level":3,"title":"Database Not Created","text":"<p>Server starts but no database file exists.</p> <p>Cause: Database path not set or invalid.</p> <p>Solution:</p> <pre><code># Check if path is set\necho $SELLIA_DB_PATH\n\n# Set path and restart\nexport SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n# Stop and restart the server\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#permission-denied","level":3,"title":"Permission Denied","text":"<pre><code>Error: Permission denied: /var/lib/sellia/sellia.db\n</code></pre> <p>Cause: Wrong permissions on directory or file.</p> <p>Solution:</p> <pre><code># Fix directory permissions\nsudo chmod 755 /var/lib/sellia\n\n# Fix file permissions\nsudo chmod 640 /var/lib/sellia/sellia.db\nsudo chown sellia:sellia /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#database-in-read-only-mode","level":3,"title":"Database in Read-Only Mode","text":"<pre><code>Error: attempt to write a readonly database\n</code></pre> <p>Cause: File or directory is read-only, or disk is full.</p> <p>Solution:</p> <pre><code># Check disk space\ndf -h /var/lib/sellia\n\n# Check file permissions\nls -la /var/lib/sellia/sellia.db\n\n# Remount read-write if necessary\nsudo mount -o remount,rw /var\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#database-locked","level":3,"title":"Database Locked","text":"<pre><code>Error: database is locked\n</code></pre> <p>Cause: Multiple server instances running.</p> <p>Solution:</p> <pre><code># Check for running servers\nps aux | grep sellia-server\n\n# Kill duplicate instances\npkill sellia-server\n\n# Start single instance\nsellia-server\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#path-contains-spaces","level":3,"title":"Path Contains Spaces","text":"<p>If database path has spaces, quote it:</p> <pre><code># Wrong\nexport SELLIA_DB_PATH=/path/with spaces/sellia.db\n\n# Right\nexport SELLIA_DB_PATH=\"/path/with spaces/sellia.db\"\n</code></pre>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#production_1","level":3,"title":"Production","text":"<ol> <li> <p>Use absolute paths <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre></p> </li> <li> <p>Dedicated directory <pre><code>/var/lib/sellia/\n</code></pre></p> </li> <li> <p>Proper permissions <pre><code>sudo chown sellia:sellia /var/lib/sellia/sellia.db\nsudo chmod 640 /var/lib/sellia/sellia.db\n</code></pre></p> </li> <li> <p>Persistent storage</p> </li> <li>Use Docker volumes</li> <li>Use Kubernetes PVCs</li> <li>Don't store in ephemeral locations</li> </ol>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#development_1","level":3,"title":"Development","text":"<ol> <li> <p>Use relative path in project directory <pre><code>export SELLIA_DB_PATH=\"./dev/sellia.db\"\n</code></pre></p> </li> <li> <p>Add to .gitignore <pre><code>echo \"dev/*.db\" &gt;&gt; .gitignore\necho \"dev/*.db-wal\" &gt;&gt; .gitignore\n</code></pre></p> </li> <li> <p>Clean slate testing <pre><code>rm ./dev/sellia.db\nsellia-server  # Creates fresh database\n</code></pre></p> </li> </ol>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#testing","level":3,"title":"Testing","text":"<ol> <li> <p>Use in-memory database <pre><code>export SELLIA_DB_PATH=\":memory:\"\n</code></pre></p> </li> <li> <p>Each test gets fresh database</p> </li> <li>No cleanup required</li> <li>Fast initialization</li> <li>Isolated tests</li> </ol>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/database-config/#see-also","level":2,"title":"See Also","text":"<ul> <li>SQLite Persistence - Database overview and operations</li> <li>Migrations - Schema versions</li> <li>Server Auth - Authentication setup</li> </ul>","path":["User","Storage","Database Configuration"],"tags":[]},{"location":"user/storage/migrations/","level":1,"title":"Database Migrations","text":"<p>Database migrations define and evolve the Sellia database schema over time. Migrations are applied automatically when the server starts.</p>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#overview","level":2,"title":"Overview","text":"<p>Sellia uses a versioned migration system:</p> <ul> <li>Each migration has a version number and name</li> <li>Migrations are applied in order when the server starts</li> <li>Applied migrations are tracked in <code>schema_migrations</code> table</li> <li>Rollback support is available (manual operation)</li> </ul>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#current-migrations","level":2,"title":"Current Migrations","text":"","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#migration-1-initial-schema","level":3,"title":"Migration 1: Initial Schema","text":"<p>Version: 1 Name: <code>initial_schema</code></p> <p>Creates:</p> <ol> <li><code>schema_migrations</code> table - Track migration history</li> <li><code>reserved_subdomains</code> table - Reserved subdomain list</li> <li><code>api_keys</code> table - API key storage</li> <li>Indexes for performance</li> </ol> <p>SQL:</p> <pre><code>CREATE TABLE IF NOT EXISTS schema_migrations (\n    version INTEGER PRIMARY KEY,\n    applied_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n\nCREATE TABLE IF NOT EXISTS reserved_subdomains (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    subdomain TEXT NOT NULL UNIQUE,\n    reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    is_default BOOLEAN NOT NULL DEFAULT 0\n);\n\nCREATE TABLE IF NOT EXISTS api_keys (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    key_hash TEXT NOT NULL UNIQUE,\n    key_prefix TEXT NOT NULL,\n    name TEXT,\n    is_master BOOLEAN NOT NULL DEFAULT 0,\n    active BOOLEAN NOT NULL DEFAULT 1,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_used_at TEXT\n);\n\nCREATE INDEX IF NOT EXISTS idx_api_keys_prefix ON api_keys(key_prefix);\nCREATE INDEX IF NOT EXISTS idx_api_keys_active ON api_keys(active) WHERE active = 1;\n</code></pre> <p>Rollback SQL:</p> <pre><code>DROP INDEX IF EXISTS idx_api_keys_active;\nDROP INDEX IF EXISTS idx_api_keys_prefix;\nDROP TABLE IF EXISTS api_keys;\nDROP TABLE IF EXISTS reserved_subdomains;\nDROP TABLE IF EXISTS schema_migrations;\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#default-data-seeding","level":2,"title":"Default Data Seeding","text":"","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#reserved-subdomains","level":3,"title":"Reserved Subdomains","text":"<p>Along with the initial schema, 50 default reserved subdomains are seeded:</p> <pre><code>api, www, admin, app, dashboard, console,\nmail, smtp, imap, pop, ftp, ssh, sftp,\ncdn, static, assets, media, images, files,\nauth, login, oauth, sso, account, accounts,\nbilling, pay, payment, payments, subscribe,\nhelp, support, docs, documentation, status,\nblog, news, forum, community, dev, developer,\ntest, staging, demo, sandbox, preview,\nws, wss, socket, websocket, stream,\ngit, svn, repo, registry, npm, pypi,\ninternal, private, public, local, localhost,\nroot, system, server, servers, node, nodes,\nsellia, tunnel, tunnels, proxy\n</code></pre> <p>These are marked with <code>is_default = true</code> and cannot be removed.</p>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#migration-system","level":2,"title":"Migration System","text":"","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#automatic-migration","level":3,"title":"Automatic Migration","text":"<p>Migrations run automatically when the server starts:</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server\n\n# Output:\n# [INFO] Database opened: /var/lib/sellia/sellia.db\n# [INFO] Current version: 0\n# [INFO] Pending migrations: [1]\n# [INFO] Running 1 migration(s)\n# [INFO] Applying migration 1: initial_schema\n# [INFO] Seeded 50 default reserved subdomains\n# [INFO] Migrations complete. Current version: 1\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#checking-migration-status","level":3,"title":"Checking Migration Status","text":"<pre><code># Query schema_migrations table\nsqlite3 /var/lib/sellia/sellia.db \"SELECT * FROM schema_migrations;\"\n\n# Output:\n# 1|2024-01-15 10:30:00\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#pending-migrations","level":3,"title":"Pending Migrations","text":"<p>Pending migrations are those not yet applied:</p> <pre><code>-- Get current version\nSELECT COALESCE(MAX(version), 0) FROM schema_migrations;\n\n-- Get pending migrations\n-- (Any migration with version &gt; current version)\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#manual-migration-operations","level":2,"title":"Manual Migration Operations","text":"","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#check-current-version","level":3,"title":"Check Current Version","text":"<pre><code>sqlite3 /var/lib/sellia/sellia.db \"SELECT COALESCE(MAX(version), 0) FROM schema_migrations;\"\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#list-applied-migrations","level":3,"title":"List Applied Migrations","text":"<pre><code>sqlite3 /var/lib/sellia/sellia.db \"SELECT version, applied_at FROM schema_migrations ORDER BY version;\"\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#rollback-migrations","level":3,"title":"Rollback Migrations","text":"<p>Warning: Rollback is a manual operation and not exposed via CLI. Only use this if you know what you're doing.</p> <pre><code># Open database\nsqlite3 /var/lib/sellia/sellia.db\n\n# Inside SQLite CLI\nBEGIN TRANSACTION;\n\n-- Rollback migration 1\nDROP INDEX IF EXISTS idx_api_keys_active;\nDROP INDEX IF EXISTS idx_api_keys_prefix;\nDROP TABLE IF EXISTS api_keys;\nDROP TABLE IF EXISTS reserved_subdomains;\nDELETE FROM schema_migrations WHERE version = 1;\n\nCOMMIT;\n\n-- Verify\nSELECT * FROM schema_migrations;\n-- Should be empty\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#future-migrations","level":2,"title":"Future Migrations","text":"<p>When adding new features, new migrations will be added to the migrations list.</p>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#example-adding-a-table","level":3,"title":"Example: Adding a Table","text":"<p>Hypothetical migration for tunnel tracking:</p> <pre><code>-- Migration 2: add_tunnel_tracking\nCREATE TABLE IF NOT EXISTS tunnels (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    api_key_id INTEGER,\n    subdomain TEXT NOT NULL,\n    connected_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_ping_at TEXT,\n    FOREIGN KEY (api_key_id) REFERENCES api_keys(id)\n);\n\nCREATE INDEX IF NOT EXISTS idx_tunnels_subdomain ON tunnels(subdomain);\nCREATE INDEX IF NOT EXISTS idx_tunnels_api_key ON tunnels(api_key_id);\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#migration-guidelines","level":3,"title":"Migration Guidelines","text":"<p>When writing new migrations:</p> <ol> <li>Version numbers - Increment by 1</li> <li>Up SQL - DDL statements (CREATE, ALTER)</li> <li>Down SQL - Reverse operations (DROP)</li> <li>Idempotent - Use <code>IF NOT EXISTS</code>, <code>IF EXISTS</code></li> <li>Indexes - Create after tables</li> <li>Foreign keys - Add after all tables exist</li> <li>Data migrations - Separate from schema changes</li> </ol>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#migration-failed-during-start","level":3,"title":"Migration Failed During Start","text":"<p>Server fails to start with migration error.</p> <p>Symptoms:</p> <pre><code>[ERROR] Migration failed: database disk image is malformed\n</code></pre> <p>Solutions:</p> <ol> <li>Check database integrity:</li> </ol> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\"\n</code></pre> <ol> <li>Restore from backup:</li> </ol> <pre><code>cp /backup/sellia.db.latest /var/lib/sellia/sellia.db\nsellia-server\n</code></pre> <ol> <li>Delete and reinitialize (last resort):</li> </ol> <pre><code>rm /var/lib/sellia/sellia.db\nsellia-server  # Creates fresh database\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#migration-already-applied","level":3,"title":"Migration Already Applied","text":"<p>Attempt to apply already-applied migration.</p> <p>Symptoms:</p> <pre><code>[WARN] Migration 1 already applied, skipping\n</code></pre> <p>Cause: Normal behavior - migrations are idempotent.</p> <p>Solution: No action needed. Server continues normally.</p>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#schema-migrations-table-missing","level":3,"title":"Schema Migrations Table Missing","text":"<p><code>schema_migrations</code> table doesn't exist.</p> <p>Cause: Database created manually without migrations.</p> <p>Solution:</p> <pre><code># Re-run migrations\nsqlite3 /var/lib/sellia/sellia.db &lt;&lt;EOF\nCREATE TABLE IF NOT EXISTS schema_migrations (\n    version INTEGER PRIMARY KEY,\n    applied_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\nEOF\n\n# Restart server\n# (Stop and restart the server process)\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#wrong-migration-version","level":3,"title":"Wrong Migration Version","text":"<p>Database shows unexpected migration version.</p> <p>Cause: Manual schema changes outside migration system.</p> <p>Solution:</p> <pre><code># Check what migrations are applied\nsqlite3 /var/lib/sellia/sellia.db \"SELECT * FROM schema_migrations;\"\n\n# If version is wrong, update manually\nsqlite3 /var/lib/sellia/sellia.db \"UPDATE schema_migrations SET version = 1 WHERE version = 2;\"\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#database-schema-reference","level":2,"title":"Database Schema Reference","text":"","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#schema-migrations-table","level":3,"title":"Schema Migrations Table","text":"Column Type Description <code>version</code> INTEGER Migration version number (primary key) <code>applied_at</code> TEXT Timestamp when migration was applied","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#reserved-subdomains-table","level":3,"title":"Reserved Subdomains Table","text":"Column Type Description <code>id</code> INTEGER Auto-increment primary key <code>subdomain</code> TEXT Reserved subdomain (unique) <code>reason</code> TEXT Optional reason/documentation <code>created_at</code> TEXT Timestamp when reserved <code>is_default</code> BOOLEAN True if seeded by default (cannot remove)","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#api-keys-table","level":3,"title":"API Keys Table","text":"Column Type Description <code>id</code> INTEGER Auto-increment primary key <code>key_hash</code> TEXT SHA-256 hash of API key (unique) <code>key_prefix</code> TEXT First 8 characters (for identification) <code>name</code> TEXT Optional friendly name <code>is_master</code> BOOLEAN True if master key (admin access) <code>active</code> BOOLEAN False if revoked <code>created_at</code> TEXT Timestamp when created <code>last_used_at</code> TEXT Timestamp of last tunnel creation","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#exporting-schema","level":2,"title":"Exporting Schema","text":"<p>To export the current database schema:</p> <pre><code># Full schema with indexes\nsqlite3 /var/lib/sellia/sellia.db \".schema\"\n\n# Specific table schema\nsqlite3 /var/lib/sellia/sellia.db \".schema api_keys\"\n\n# Schema with CREATE statements only\nsqlite3 /var/lib/sellia/sellia.db \".schema\" | grep \"^CREATE\"\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#backup-before-migrations","level":2,"title":"Backup Before Migrations","text":"<p>Always backup before manual schema changes:</p> <pre><code># Backup before migration\ncp /var/lib/sellia/sellia.db /var/lib/sellia/sellia.db.pre-migration\n\n# Apply migration\n# ... migration operations ...\n\n# Verify\nsqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\"\n\n# Rollback if needed\ncp /var/lib/sellia/sellia.db.pre-migration /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/migrations/#see-also","level":2,"title":"See Also","text":"<ul> <li>SQLite Persistence - Database operations</li> <li>Database Configuration - Configuration options</li> <li>API Key Management - Managing API keys</li> </ul>","path":["User","Storage","Database Migrations"],"tags":[]},{"location":"user/storage/sqlite/","level":1,"title":"SQLite Persistence","text":"<p>Sellia uses SQLite for persistent storage of API keys, reserved subdomains, and schema migrations. This enables features like per-user authentication, admin operations, and subdomain reservations.</p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#overview","level":2,"title":"Overview","text":"<p>SQLite is ideal for Sellia because:</p> <ul> <li>Zero configuration - No separate database server required</li> <li>Embedded - Database is just a file</li> <li>Fast - Optimized for the read-heavy workload of tunnel authentication</li> <li>Reliable - ACID compliant, atomic writes</li> <li>Portable - Single file backup/restore</li> <li>Cross-platform - Works everywhere Sellia runs</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#when-to-enable-sqlite","level":2,"title":"When to Enable SQLite","text":"<p>Enable SQLite persistence when you need:</p> <ol> <li>Per-user authentication - Multiple users with their own API keys</li> <li>Admin operations - Create/revoke API keys, manage reserved subdomains</li> <li>Usage tracking - Track when keys were last used</li> <li>Accountability - Audit trail of who created tunnels</li> <li>Production deployment - Anything beyond personal use</li> </ol> <p>You don't need SQLite if:</p> <ul> <li>Single-user development server</li> <li>Testing locally without authentication</li> <li>Short-lived tunnels behind a firewall</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#database-location","level":2,"title":"Database Location","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#default-path","level":3,"title":"Default Path","text":"<pre><code>/var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#configuring-path","level":3,"title":"Configuring Path","text":"<p>Environment variable:</p> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\n</code></pre> <p>Config file:</p> <pre><code># sellia-server.yml\ndatabase:\n  enabled: true\n  path: /var/lib/sellia/sellia.db\n</code></pre> <p>Command line:</p> <pre><code>sellia-server start --db-path /custom/path/sellia.db\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#directory-permissions","level":3,"title":"Directory Permissions","text":"<p>The database directory must be writable by the server process:</p> <pre><code># Create directory\nsudo mkdir -p /var/lib/sellia\n\n# Set ownership\nsudo chown sellia:sellia /var/lib/sellia\n\n# Set permissions\nsudo chmod 755 /var/lib/sellia\n</code></pre> <p>The database file will be created with mode <code>0640</code> (owner read/write, group read).</p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#database-initialization","level":2,"title":"Database Initialization","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#automatic-initialization","level":3,"title":"Automatic Initialization","text":"<p>When you start the server with database enabled:</p> <ol> <li>Database file is created if it doesn't exist</li> <li>Migrations are run automatically</li> <li>Default reserved subdomains are seeded</li> <li>Server starts accepting connections</li> </ol> <pre><code>export SELLIA_DB_PATH=\"/var/lib/sellia/sellia.db\"\nsellia-server\n\n# Output:\n# [INFO] Database opened: /var/lib/sellia/sellia.db\n# [INFO] Running 1 migration(s)\n# [INFO] Applying migration 1: initial_schema\n# [INFO] Migrations complete. Current version: 1\n# [INFO] Seeded 50 default reserved subdomains\n# [INFO] Server started on port 3000\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#manual-initialization","level":3,"title":"Manual Initialization","text":"<p>If you need to initialize the database separately (not recommended - server does this automatically):</p> <pre><code># This is handled by the server\n# No manual initialization needed\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#schema","level":2,"title":"Schema","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#tables","level":3,"title":"Tables","text":"<p>schema_migrations</p> <p>Tracks which database migrations have been applied.</p> <pre><code>CREATE TABLE schema_migrations (\n    version INTEGER PRIMARY KEY,\n    applied_at TEXT NOT NULL DEFAULT (datetime('now'))\n);\n</code></pre> <p>reserved_subdomains</p> <p>Subdomains that cannot be claimed by tunnel clients.</p> <pre><code>CREATE TABLE reserved_subdomains (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    subdomain TEXT NOT NULL UNIQUE,\n    reason TEXT,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    is_default BOOLEAN NOT NULL DEFAULT 0\n);\n</code></pre> <p>api_keys</p> <p>API keys for tunnel authentication and admin operations.</p> <pre><code>CREATE TABLE api_keys (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    key_hash TEXT NOT NULL UNIQUE,\n    key_prefix TEXT NOT NULL,\n    name TEXT,\n    is_master BOOLEAN NOT NULL DEFAULT 0,\n    active BOOLEAN NOT NULL DEFAULT 1,\n    created_at TEXT NOT NULL DEFAULT (datetime('now')),\n    last_used_at TEXT\n);\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#indexes","level":3,"title":"Indexes","text":"<pre><code>CREATE INDEX idx_api_keys_prefix ON api_keys(key_prefix);\nCREATE INDEX idx_api_keys_active ON api_keys(active) WHERE active = 1;\n</code></pre> <p>These indexes optimize common queries: - Finding a key by prefix during authentication - Listing only active keys</p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#performance","level":2,"title":"Performance","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#optimization-settings","level":3,"title":"Optimization Settings","text":"<p>Sellia configures SQLite with these optimizations:</p> <pre><code>-- WAL mode for better concurrency\nPRAGMA journal_mode=WAL;\n\n-- Faster writes with acceptable safety\nPRAGMA synchronous=NORMAL;\n\n-- Larger cache (64MB)\nPRAGMA cache_size=-64000;\n\n-- Foreign key constraints\nPRAGMA foreign_keys=true;\n</code></pre> <p>Why these settings:</p> <ul> <li>WAL mode - Readers don't block writers, better for concurrent tunnel auth</li> <li>synchronous=NORMAL - Faster than FULL, safe enough for this workload</li> <li>64MB cache - Reduces disk I/O for frequent auth lookups</li> <li>foreign_keys - Ensures referential integrity (for future schema additions)</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#expected-performance","level":3,"title":"Expected Performance","text":"<p>On typical hardware:</p> <ul> <li>Authentication query: &lt; 1ms</li> <li>Tunnel registration: &lt; 5ms</li> <li>API key creation: &lt; 10ms</li> <li>Concurrent connections: 100+ without issues</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#monitoring-performance","level":3,"title":"Monitoring Performance","text":"<pre><code># Check database file size\nls -lh /var/lib/sellia/sellia.db\n\n# Monitor locks\nlsof /var/lib/sellia/sellia.db\n\n# Check WAL files\nls -lh /var/lib/sellia/sellia.db-wal\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#backup-and-restore","level":2,"title":"Backup and Restore","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#backup","level":3,"title":"Backup","text":"<p>Simple file copy:</p> <pre><code># Stop server first (to ensure consistency)\n# (Stop the server process manually)\n\n# Copy database file\ncp /var/lib/sellia/sellia.db /backup/sellia.db.$(date +%Y%m%d)\n\n# Restart server\nsellia-server\n</code></pre> <p>Online backup with SQLite (no downtime):</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \".backup /backup/sellia.db.$(date +%Y%m%d)\"\n</code></pre> <p>Automated backup script:</p> <pre><code>#!/bin/bash\n# /etc/cron.daily/sellia-backup\n\nBACKUP_DIR=\"/backup/sellia\"\nDATE=$(date +%Y%m%d)\n\nmkdir -p \"$BACKUP_DIR\"\n\n# Online backup\nsqlite3 /var/lib/sellia/sellia.db \".backup $BACKUP_DIR/sellia.db.$DATE\"\n\n# Compress older backups\nfind \"$BACKUP_DIR\" -name \"sellia.db.*\" -mtime +7 -exec gzip {} \\;\n\n# Delete backups older than 30 days\nfind \"$BACKUP_DIR\" -name \"sellia.db.*.gz\" -mtime +30 -delete\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#restore","level":3,"title":"Restore","text":"<pre><code># Stop server\n# (Stop the server process manually)\n\n# Restore from backup\ncp /backup/sellia.db.20240115 /var/lib/sellia/sellia.db\n\n# Fix permissions\nchown sellia:sellia /var/lib/sellia/sellia.db\nchmod 640 /var/lib/sellia/sellia.db\n\n# Restart server\nsellia-server\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#maintenance","level":2,"title":"Maintenance","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#vacuum","level":3,"title":"Vacuum","text":"<p>Reclaim space and optimize database:</p> <pre><code># Stop server\n# (Stop the server process manually)\n\n# Vacuum database\nsqlite3 /var/lib/sellia/sellia.db \"VACUUM;\"\n\n# Restart server\nsellia-server\n</code></pre> <p>When to vacuum:</p> <ul> <li>After revoking many API keys</li> <li>Database file grew significantly</li> <li>Scheduled maintenance (monthly recommended)</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#wal-checkpoint","level":3,"title":"WAL Checkpoint","text":"<p>Manually checkpoint WAL to main database:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA wal_checkpoint(TRUNCATE);\"\n</code></pre> <p>Note: SQLite auto-checkpoints during normal operation. Manual checkpointing is rarely needed.</p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#integrity-check","level":3,"title":"Integrity Check","text":"<p>Verify database integrity:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA integrity_check;\"\n</code></pre> <p>Expected output: <code>ok</code></p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#analyze","level":3,"title":"Analyze","text":"<p>Update query planner statistics:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"ANALYZE;\"\n</code></pre> <p>Run this after: - Large data changes (bulk inserts/deletes) - Database restore - Every few months for maintenance</p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#database-locked","level":3,"title":"Database Locked","text":"<pre><code>Error: database is locked\n</code></pre> <p>Causes: - Multiple server instances running - Another process has the database open - Insufficient permissions</p> <p>Solutions:</p> <pre><code># Check for multiple servers\nps aux | grep sellia-server\n\n# Check file locks\nlsof /var/lib/sellia/sellia.db\n\n# Check permissions\nls -la /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#database-disk-image-malformed","level":3,"title":"Database Disk Image Malformed","text":"<pre><code>Error: database disk image is malformed\n</code></pre> <p>Causes: - Disk corruption - Incomplete write - Hardware failure</p> <p>Solutions:</p> <ol> <li>Attempt recovery:</li> </ol> <pre><code>sqlite3 /var/lib/sellia/sellia.db \".recover\" | sqlite3 /var/lib/sellia/sellia-recovered.db\n</code></pre> <ol> <li>Restore from backup:</li> </ol> <pre><code># Stop server manually\ncp /backup/sellia.db.latest /var/lib/sellia/sellia.db\nsellia-server\n</code></pre> <ol> <li>If all else fails, reinitialize:</li> </ol> <pre><code>rm /var/lib/sellia/sellia.db\nsellia-server\n# Will create fresh database\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#wal-file-too-large","level":3,"title":"WAL File Too Large","text":"<pre><code># Check WAL size\nls -lh /var/lib/sellia/sellia.db-wal\n</code></pre> <p>If WAL is &gt; 100MB, force checkpoint:</p> <pre><code>sqlite3 /var/lib/sellia/sellia.db \"PRAGMA wal_checkpoint(TRUNCATE);\"\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#slow-queries","level":3,"title":"Slow Queries","text":"<p>Enable query logging:</p> <pre><code>export SQLITE_DEBUG=1\nsellia-server start\n</code></pre> <p>Check for slow queries in logs. Common causes: - Missing indexes (unlikely in Sellia's schema) - Very large api_keys table (&gt; 100,000 rows) - Disk I/O bottleneck</p>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#security","level":2,"title":"Security","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#file-permissions","level":3,"title":"File Permissions","text":"<p>Recommended permissions:</p> <pre><code># Directory\ndrwxr-xr-x  sellia  sellia  /var/lib/sellia/\n\n# Database file\n-rw-r-----  sellia  sellia  /var/lib/sellia/sellia.db\n</code></pre> <p>Set permissions:</p> <pre><code>sudo chown -R sellia:sellia /var/lib/sellia/\nsudo chmod 755 /var/lib/sellia/\nsudo chmod 640 /var/lib/sellia/sellia.db\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#encryption","level":3,"title":"Encryption","text":"<p>SQLite database is not encrypted by default. For sensitive deployments:</p> <ol> <li>Full disk encryption - Encrypt the entire disk/partition</li> <li>SQLCipher extension - Compile with SQLCipher for database-level encryption</li> <li>File system encryption - Use encrypted filesystems (eCryptfs, EncFS)</li> </ol>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#access-control","level":3,"title":"Access Control","text":"<p>Only the Sellia server process should access the database:</p> <pre><code># Check who can read the database\nnamei -l /var/lib/sellia/sellia.db\n\n# Should show only owner (sellia) has read access\n</code></pre>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#scaling-considerations","level":2,"title":"Scaling Considerations","text":"","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#when-to-outgrow-sqlite","level":3,"title":"When to Outgrow SQLite","text":"<p>Consider PostgreSQL or MySQL if:</p> <ul> <li>More than 1000 API keys</li> <li>More than 10,000 reserved subdomains</li> <li>More than 1000 concurrent tunnel authentications per second</li> <li>Need for distributed/replicated databases</li> <li>Need for complex queries/JOINS not supported by SQLite</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#migration-path","level":3,"title":"Migration Path","text":"<p>Sellia doesn't currently support other databases, but the schema is simple enough to migrate manually:</p> <ol> <li>Dump SQLite database</li> <li>Transform schema for target database</li> <li>Load data</li> <li>Modify Sellia code to use different DB driver</li> </ol>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/storage/sqlite/#see-also","level":2,"title":"See Also","text":"<ul> <li>Database Configuration - Configuration options</li> <li>Migrations - Schema versions and changes</li> <li>Server Auth - Authentication with database</li> </ul>","path":["User","Storage","SQLite Persistence"],"tags":[]},{"location":"user/troubleshooting/","level":1,"title":"Troubleshooting","text":"<p>Solutions to common issues when using Sellia.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#overview","level":2,"title":"Overview","text":"<p>This section covers common problems and their solutions when working with Sellia.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#installation-issues","level":2,"title":"Installation Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#build-failures","level":3,"title":"Build Failures","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#crystal-version-too-old","level":4,"title":"Crystal Version Too Old","text":"<p>Problem: \"Crystal version &gt;= 1.10.0 required\"</p> <p>Solution: <pre><code># Check Crystal version\ncrystal --version\n\n# Update Crystal\n# See https://crystal-lang.org/install/\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#dependency-errors","level":4,"title":"Dependency Errors","text":"<p>Problem: \"Could not find dependency\"</p> <p>Solution: <pre><code># Update shards\nshards update\n\n# Clear cache and reinstall\nrm -rf lib/\nshards install\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#compilation-errors","level":4,"title":"Compilation Errors","text":"<p>Problem: Compilation fails with errors</p> <p>Solutions: - Ensure Crystal &gt;= 1.10.0 - Run <code>shards update</code> - Check for conflicting shard versions - Try <code>shards build --release</code> for production build</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#connection-issues","level":2,"title":"Connection Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#cant-connect-to-server","level":3,"title":"Can't Connect to Server","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#server-not-running","level":4,"title":"Server Not Running","text":"<p>Problem: \"Connection refused\" when creating tunnel</p> <p>Solutions: <pre><code># Check if server is running\nps aux | grep sellia\n\n# Start server\nsellia server --port 3000 --domain yourdomain.com\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#wrong-server-address","level":4,"title":"Wrong Server Address","text":"<p>Problem: Can't connect to tunnel server</p> <p>Solutions: <pre><code># Verify server URL\nsellia http 3000 --server ws://localhost:3000\n\n# Check server is listening\nnetstat -an | grep :3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#firewall-blocking","level":4,"title":"Firewall Blocking","text":"<p>Problem: Connection times out</p> <p>Solutions: <pre><code># Check firewall status\nsudo ufw status\n\n# Allow port (Ubuntu/Debian)\nsudo ufw allow 3000/tcp\n\n# Check firewall (CentOS/RHEL)\nsudo firewall-cmd --list-all\nsudo firewall-cmd --add-port=3000/tcp --permanent\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#tunnel-connection-drops","level":3,"title":"Tunnel Connection Drops","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#automatic-reconnection","level":4,"title":"Automatic Reconnection","text":"<p>Problem: Tunnel disconnects intermittently</p> <p>Solution: Sellia auto-reconnects with linear backoff (3s, 6s, 9s... up to 30s max, 10 attempts). If it doesn't reconnect:</p> <pre><code># Check server logs for errors\n# Verify network stability\n# Check for rate limiting\n# Note: Client gives up after 10 failed attempts\n</code></pre>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#network-changes","level":4,"title":"Network Changes","text":"<p>Problem: Tunnel drops when network changes</p> <p>Solutions: - Sellia should auto-reconnect - If not, restart the tunnel - Check for IP changes</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#tunnel-issues","level":2,"title":"Tunnel Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#subdomain-already-taken","level":3,"title":"Subdomain Already Taken","text":"<p>Problem: \"Subdomain already in use\"</p> <p>Solutions: <pre><code># Use a different subdomain\nsellia http 3000 --subdomain myapp2\n\n# Let Sellia assign random subdomain\nsellia http 3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#local-service-not-accessible","level":3,"title":"Local Service Not Accessible","text":"<p>Problem: Tunnel works but returns connection errors</p> <p>Solutions: <pre><code># Verify local service is running\nlsof -i :3000\n\n# Check correct host (default: localhost)\nsellia http 3000 --host 127.0.0.1\n\n# Test local access\ncurl http://localhost:3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#wrong-local-port","level":3,"title":"Wrong Local Port","text":"<p>Problem: Tunnel created but can't reach service</p> <p>Solutions: <pre><code># Verify port number\nsellia http 8080  # correct port\n\n# Check what's listening\nnetstat -an | grep LISTEN\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#authentication-issues","level":2,"title":"Authentication Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#api-key-authentication-failed","level":3,"title":"API Key Authentication Failed","text":"<p>Problem: \"Authentication failed\" error</p> <p>Solutions: <pre><code># Verify API key\nsellia http 3000 --api-key your-key\n\n# Check server requires auth\nsellia-server --require-auth --master-key your-key\n\n# Regenerate key if needed\nopenssl rand -hex 32\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#basic-auth-not-working","level":3,"title":"Basic Auth Not Working","text":"<p>Problem: \"Unauthorized\" when accessing tunnel</p> <p>Solutions: <pre><code># Verify auth format (username:password)\nsellia http 3000 --auth admin:secret\n\n# Test with curl\ncurl -u admin:secret http://abc123.yourdomain.com\n\n# Check for special characters (use quotes)\nsellia http 3000 --auth \"admin:p@ssw0rd\"\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#inspector-issues","level":2,"title":"Inspector Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#inspector-not-loading","level":3,"title":"Inspector Not Loading","text":"<p>Problem: Can't access inspector at localhost:4040</p> <p>Solutions: <pre><code># Check if inspector is enabled\nsellia http 3000  # inspector enabled by default\n\n# Check firewall\nsudo ufw allow 4040/tcp\n\n# Try different port\nsellia http 3000 --inspector-port 5000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#inspector-shows-no-requests","level":3,"title":"Inspector Shows No Requests","text":"<p>Problem: Inspector loads but no requests appear</p> <p>Solutions: <pre><code># Verify tunnel is working\ncurl http://your-subdomain.yourdomain.com\n\n# Check tunnel is still running\n# Look for errors in terminal\n\n# Try disabling and re-enabling\nsellia http 3000 --no-inspector\nsellia http 3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#performance-issues","level":2,"title":"Performance Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#slow-connection","level":3,"title":"Slow Connection","text":"<p>Problem: Tunnels are slow</p> <p>Solutions: - Check network bandwidth - Verify server resources - Check for rate limiting - Try different server region</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#high-memory-usage","level":3,"title":"High Memory Usage","text":"<p>Problem: CLI or server using too much memory</p> <p>Solutions: <pre><code># Disable inspector\nsellia http 3000 --no-inspector\n\n# Clear request history regularly\n# Restart tunnel periodically\n\n# Check memory usage\nps aux | grep sellia\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#tlsssl-issues","level":2,"title":"TLS/SSL Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#certificate-errors","level":3,"title":"Certificate Errors","text":"<p>Problem: \"SSL certificate error\"</p> <p>Solutions: <pre><code># Verify certificate files exist\nls -l certs/cert.pem certs/key.pem\n\n# Check certificate not expired\nopenssl x509 -in certs/cert.pem -noout -dates\n\n# Verify certificate matches domain\nopenssl x509 -in certs/cert.pem -noout -text | grep DNS\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#https-not-working","level":3,"title":"HTTPS Not Working","text":"<p>Problem: HTTPS URLs not generated</p> <p>Solutions: <pre><code># Enable HTTPS on server\nsellia-server --https --domain yourdomain.com\n\n# Set environment variable\nexport SELLIA_USE_HTTPS=true\n\n# Verify certificates are in place\nls certs/\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#docker-issues","level":2,"title":"Docker Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#container-wont-start","level":3,"title":"Container Won't Start","text":"<p>Problem: Docker container fails to start</p> <p>Solutions: <pre><code># Check logs\ndocker compose -f docker-compose.prod.yml logs\n\n# Verify environment variables\ncat .env\n\n# Check port conflicts\ndocker ps\nnetstat -an | grep :3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#volume-mount-issues","level":3,"title":"Volume Mount Issues","text":"<p>Problem: Can't access files in container</p> <p>Solutions: <pre><code># Verify volume configuration\ndocker compose config\n\n# Check volume exists\ndocker volume ls\n\n# Inspect volume\ndocker volume inspect sellia-data\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#dns-issues","level":2,"title":"DNS Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#subdomain-not-resolving","level":3,"title":"Subdomain Not Resolving","text":"<p>Problem: Tunnel URL doesn't resolve</p> <p>Solutions: <pre><code># Check DNS configuration\ndig yoursubdomain.yourdomain.com\n\n# Verify DNS has propagated (can take 48 hours)\n# Check for wildcard DNS record\n\n# Test with IP directly\ncurl http://your-server-ip:3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#cloudflare-dns","level":3,"title":"Cloudflare DNS","text":"<p>Problem: Cloudflare DNS not working</p> <p>Solutions: - Verify DNS record in Cloudflare dashboard - Check proxy status (orange cloud) - Verify SSL/TLS mode - Wait for propagation</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#development-issues","level":2,"title":"Development Issues","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#changes-not-reflected","level":3,"title":"Changes Not Reflected","text":"<p>Problem: Code changes don't affect running Sellia</p> <p>Solutions: <pre><code># Rebuild\nshards build --release\n\n# Restart server\nkill $(pgrep sellia-server)\nsellia-server\n\n# Clear cache if needed\nrm -rf .crystal/\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#inspector-ui-not-updating","level":3,"title":"Inspector UI Not Updating","text":"<p>Problem: UI changes not showing</p> <p>Solutions: <pre><code># For development\ncd web\nnpm run dev\n\n# Rebuild embedded assets\ncd web\nnpm run build\ncd ..\nshards build --release\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#debug-mode","level":2,"title":"Debug Mode","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#enable-debug-logging","level":3,"title":"Enable Debug Logging","text":"<p>Problem: Need more information to diagnose issue</p> <p>Solution: <pre><code># Enable debug logging\nLOG_LEVEL=debug sellia-server --port 3000 --domain localhost\n\n# Or for client\nLOG_LEVEL=debug sellia http 3000\n</code></pre></p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#check-logs","level":3,"title":"Check Logs","text":"<pre><code># Docker logs\ndocker compose -f docker-compose.prod.yml logs -f\n\n# System logs\njournalctl -u sellia -f\n\n# Server logs to file\nsellia-server 2&gt;&amp;1 | tee server.log\n</code></pre>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#getting-help","level":2,"title":"Getting Help","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#report-issues","level":3,"title":"Report Issues","text":"<p>If you can't solve your issue:</p> <ol> <li>Check GitHub Issues</li> <li>Search for similar problems</li> <li>Create new issue with:</li> <li>Sellia version</li> <li>OS and version</li> <li>Crystal version</li> <li>Full error message</li> <li>Steps to reproduce</li> </ol>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#useful-information-for-bug-reports","level":3,"title":"Useful Information for Bug Reports","text":"<pre><code># Sellia version\nsellia version\n\n# Crystal version\ncrystal --version\n\n# OS version\nuname -a\n\n# Docker version (if applicable)\ndocker --version\n\n# Copy exact error message\n</code></pre>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#community-resources","level":3,"title":"Community Resources","text":"<ul> <li>GitHub Issues</li> <li>GitHub Discussions</li> <li>Documentation</li> </ul>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#common-error-messages","level":2,"title":"Common Error Messages","text":"","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#address-already-in-use","level":3,"title":"\"Address already in use\"","text":"<p>Port is already in use by another process.</p> <p>Solution: Kill existing process or use different port.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#connection-refused","level":3,"title":"\"Connection refused\"","text":"<p>Server is not running or not accessible.</p> <p>Solution: Start server or check firewall.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#authentication-failed","level":3,"title":"\"Authentication failed\"","text":"<p>Invalid or missing API key.</p> <p>Solution: Verify API key or check server auth settings.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#subdomain-already-taken_1","level":3,"title":"\"Subdomain already taken\"","text":"<p>Requested subdomain is in use.</p> <p>Solution: Use different subdomain or random one.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#certificate-not-found","level":3,"title":"\"Certificate not found\"","text":"<p>TLS certificate files missing.</p> <p>Solution: Place <code>cert.pem</code> and <code>key.pem</code> in <code>certs/</code> directory.</p>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Getting Started - Setup verification</li> <li>Configuration - Configuration help</li> <li>GitHub Issues - Report bugs</li> </ul>","path":["User","Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/","level":1,"title":"Connection Issues Troubleshooting","text":"<p>Guide to diagnosing and fixing connection problems with Sellia tunnels.</p>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#common-problems","level":2,"title":"Common Problems","text":"","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#failed-to-connect-to-server","level":3,"title":"\"Failed to Connect to Server\"","text":"<p>Symptoms: - Error: \"Connection refused\" - Error: \"Connection timeout\" - Client exits immediately</p> <p>Diagnosis:</p> <ol> <li> <p>Check server is running: <pre><code># Check if server process is running\nps aux | grep sellia\n\n# Check server port is listening\nnetstat -an | grep 3000  # Replace with your server port\n</code></pre></p> </li> <li> <p>Test server connectivity: <pre><code># Test HTTP endpoint\ncurl http://your-server.com/health\n\n# Expected output:\n# {\"status\":\"ok\",\"tunnels\":0}\n</code></pre></p> </li> <li> <p>Check firewall rules: <pre><code># Server - check firewall allows connections\nsudo ufw status\nsudo firewall-cmd --list-all\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Start the server: <pre><code>sellia server\n</code></pre></p> </li> <li> <p>Check server URL: <pre><code># Wrong\nsellia http --server ws://localhost:3000\n\n# Correct (if server is remote)\nsellia http --server wss://your-server.com\n</code></pre></p> </li> <li> <p>Configure firewall: <pre><code># UFW (Ubuntu)\nsudo ufw allow 3000/tcp\n\n# firewalld (CentOS/RHEL)\nsudo firewall-cmd --add-port=3000/tcp --permanent\nsudo firewall-cmd --reload\n</code></pre></p> </li> <li> <p>Check reverse proxy (if using Caddy/Nginx): <pre><code># Caddy\ncurl http://localhost/health\n\n# Nginx\ncurl http://localhost:8080/health\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#authentication-failed","level":3,"title":"\"Authentication Failed\"","text":"<p>Symptoms: - Error: \"Authentication failed: Invalid API key\" - Server immediately closes connection</p> <p>Diagnosis:</p> <ol> <li> <p>Check if auth is required: <pre><code># Check server config\nsellia server --help\n</code></pre></p> </li> <li> <p>Verify API key: <pre><code># List keys (if using database)\nsellia admin api-keys list\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Don't require auth (development): <pre><code>sellia server --no-auth\n</code></pre></p> </li> <li> <p>Provide correct API key: <pre><code>sellia http --api-key key_abc123...\n</code></pre></p> </li> <li> <p>Create new API key: <pre><code>sellia admin api-keys create --name \"My Key\"\n\n# Output: Created API key: key_abc123...\n</code></pre></p> </li> <li> <p>Set master key (simple deployment): <pre><code>export SELLIA_MASTER_KEY=\"your-secret-key\"\nsellia server\n\n# Client\nsellia http --api-key \"your-secret-key\"\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#tunnel-client-disconnected","level":3,"title":"\"Tunnel Client Disconnected\"","text":"<p>Symptoms: - Tunnel works initially then stops - Error: \"Tunnel client disconnected\" - Intermittent 502 errors</p> <p>Diagnosis:</p> <ol> <li> <p>Check client logs: <pre><code>sellia http --verbose\n</code></pre></p> </li> <li> <p>Check for network instability: <pre><code># Ping server\nping -c 100 your-server.com\n\n# Check for packet loss\n# Look for \"packet loss\" percentage\n</code></pre></p> </li> <li> <p>Check keep-alive settings: <pre><code># Check ping interval (default 30s)\n# Check timeout (default 60s)\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Auto-reconnect is enabled by default:</li> <li>Linear backoff: 3s, 6s, 9s, ... up to 30s</li> <li>Max attempts: 10 (configurable in code)</li> <li> <p>Client will automatically reconnect if connection drops</p> </li> <li> <p>Check network stability: <pre><code># Use wired connection instead of WiFi\n# Check router logs for drops\n# Contact ISP if issues persist\n</code></pre></p> </li> <li> <p>Default timeout settings (WSGateway):</p> </li> <li>PING_INTERVAL = 30 seconds (server sends ping)</li> <li>PING_TIMEOUT = 60 seconds (server marks client stale)</li> <li> <p>Request timeout = 30 seconds (HTTPIngress)</p> </li> <li> <p>Check for NAT timeouts: <pre><code># Some routers kill idle connections after 5 minutes\n# Solution: Keep-alive should prevent this\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#max-reconnection-attempts-exceeded","level":3,"title":"\"Max Reconnection Attempts Exceeded\"","text":"<p>Symptoms: - Error: \"Max reconnection attempts exceeded\" - Client gives up trying to reconnect</p> <p>Diagnosis:</p> <ol> <li> <p>Check if server is down: <pre><code>curl http://your-server.com/health\n</code></pre></p> </li> <li> <p>Check for IP blocks: <pre><code># Check server logs for ban messages\ntail -f /var/log/sellia/server.log\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Fix server issues: <pre><code># Start/restart server\nsystemctl restart sellia\n</code></pre></p> </li> <li> <p>Wait and retry: <pre><code># Linear backoff means delays increase by a fixed step\n# Just wait a few minutes and try again\n</code></pre></p> </li> <li> <p>Increase max attempts: <pre><code>client.max_reconnect_attempts = 20  # Default is 10\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#connection-intermittently-drops","level":3,"title":"Connection Intermittently Drops","text":"<p>Symptoms: - Connection works, drops, reconnects - Pattern repeats every few minutes</p> <p>Diagnosis:</p> <ol> <li> <p>Check for NAT issues: <pre><code># Many routers have 5-minute timeout for idle connections\n# Sellia sends ping every 30s to prevent this\n</code></pre></p> </li> <li> <p>Check for ISP interference: <pre><code># Some ISPs reset connections periodically\n# Check with ISP for connection stability\n</code></pre></p> </li> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep \"timeout\"\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Understanding keep-alive:</li> <li>Server sends ping every 30 seconds (PING_INTERVAL)</li> <li>Server marks client stale after 60 seconds of no activity (PING_TIMEOUT)</li> <li> <p>This prevents NAT timeout issues automatically</p> </li> <li> <p>Use wired connection: <pre><code>WiFi is more prone to interference and drops\n</code></pre></p> </li> <li> <p>Check router settings: <pre><code>Disable: SIP ALG, Flood Protection, Port Scan Detection\nEnable: Keep-alive, NAT Loopback\n</code></pre></p> </li> <li> <p>Use stable network: <pre><code>Avoid: Public WiFi, cellular data\nPrefer: Wired ethernet, stable WiFi\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#websocket-connection-fails","level":3,"title":"WebSocket Connection Fails","text":"<p>Symptoms: - HTTP works but WebSocket fails - Error: \"WebSocket handshake failed\" - HMR not working in development</p> <p>Diagnosis:</p> <ol> <li> <p>Check WebSocket upgrade headers: <pre><code># Should see:\n# Upgrade: websocket\n# Connection: upgrade\n</code></pre></p> </li> <li> <p>Check reverse proxy configuration: <pre><code># Caddy Caddyfile\nyour-domain.com {\n    reverse_proxy localhost:3000 {\n        # WebSocket support is automatic\n    }\n}\n</code></pre></p> </li> <li> <p>Test WebSocket directly: <pre><code># Bypass proxy and test directly\ncurl -i -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  http://localhost:3000/ws\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Configure reverse proxy for WebSocket:</li> </ol> <p>Caddy (automatic): <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> <p>Nginx: <pre><code>location / {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $host;\n    proxy_read_timeout 86400;\n}\n</code></pre></p> <ol> <li> <p>Check firewall allows WebSocket: <pre><code># Should allow established connections\nsudo iptables -L -n | grep ESTABLISHED\n</code></pre></p> </li> <li> <p>Increase timeouts: <pre><code># In TunnelClient\nclient.connect_timeout = 10.seconds\nclient.request_timeout = 60.seconds\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#connection-refused-immediately","level":3,"title":"\"Connection Refused\" Immediately","text":"<p>Symptoms: - Error occurs instantly (&lt; 1 second) - No delay before error</p> <p>Diagnosis:</p> <pre><code># This confirms nothing is listening\nnc -zv localhost 3000\n\n# Output: Connection refused\n</code></pre> <p>Causes: 1. Server not running 2. Wrong port 3. Server bound to different interface</p> <p>Solutions:</p> <ol> <li> <p>Start server: <pre><code>sellia server --port 3000\n</code></pre></p> </li> <li> <p>Check correct port: <pre><code># Server\nsellia server --port 3000\n\n# Client\nsellia http --server ws://localhost:3000\n</code></pre></p> </li> <li> <p>Check binding address: <pre><code># Server binds to 127.0.0.1 - localhost only\nsellia server --bind 127.0.0.1\n\n# Server binds to 0.0.0.0 - all interfaces\nsellia server --bind 0.0.0.0\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#connection-timeout","level":3,"title":"\"Connection Timeout\"","text":"<p>Symptoms: - Error after 30+ seconds - Network request hangs</p> <p>Diagnosis:</p> <pre><code># Test TCP connectivity\ntelnet your-server.com 3000\n\n# Or with nc\nnc -zv your-server.com 3000\n</code></pre> <p>Causes: 1. Firewall blocking 2. Server overloaded 3. Network routing issue</p> <p>Solutions:</p> <ol> <li> <p>Check firewall: <pre><code># Server\nsudo ufw allow 3000/tcp\n\n# Client (if outgoing blocked)\nsudo ufw allow out 3000/tcp\n</code></pre></p> </li> <li> <p>Check server health: <pre><code># Check CPU/memory\nhtop\n\n# Check connection count\nnetstat -an | grep 3000 | wc -l\n</code></pre></p> </li> <li> <p>Test from different network: <pre><code># Try from mobile hotspot\n# Try from different location\n# If works: ISP or local network issue\n</code></pre></p> </li> <li> <p>Check reverse proxy: <pre><code># If behind proxy, check proxy is running\nsystemctl status caddy\nsystemctl status nginx\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#diagnostic-commands","level":2,"title":"Diagnostic Commands","text":"","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#test-server-health","level":3,"title":"Test Server Health","text":"<pre><code># Health endpoint\ncurl http://your-server.com/health\n\n# Expected output\n{\"status\":\"ok\",\"tunnels\":5}\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#test-websocket","level":3,"title":"Test WebSocket","text":"<pre><code># Using websocat\nwebsocat ws://your-server.com/ws\n\n# Or with wscat\nwscat -c ws://your-server.com/ws\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#check-network-path","level":3,"title":"Check Network Path","text":"<pre><code># Trace route to server\ntraceroute your-server.com\n\n# Check DNS\nnslookup your-server.com\ndig your-server.com\n\n# Check MTU\nping -c 1 -M do -s 1472 your-server.com\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#monitor-connection","level":3,"title":"Monitor Connection","text":"<pre><code># Watch connection count\nwatch 'netstat -an | grep :3000 | wc -l'\n\n# Monitor with tcpdump\nsudo tcpdump -i any -n host your-server.com\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#prevention","level":2,"title":"Prevention","text":"","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#use-stable-network","level":3,"title":"Use Stable Network","text":"<ul> <li>Prefer wired ethernet over WiFi</li> <li>Avoid public WiFi</li> <li>Check router logs for drops</li> </ul>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#configure-timeouts-appropriately","level":3,"title":"Configure Timeouts Appropriately","text":"<pre><code># Server\nPING_INTERVAL = 30.seconds   # Keep-alive frequency\nPING_TIMEOUT = 60.seconds    # Time before disconnect\n\n# Client\nclient.auto_reconnect = true\nclient.reconnect_delay = 3.seconds\nclient.max_reconnect_attempts = 10\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#monitor-health","level":3,"title":"Monitor Health","text":"<pre><code># Use health endpoint in monitoring\ncurl http://your-server.com/health\n\n# Set up alerting\n# Alert if status != \"ok\"\n# Alert if tunnels drop unexpectedly\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#use-reverse-proxy","level":3,"title":"Use Reverse Proxy","text":"<p>For production, use Caddy or Nginx: - Handles TLS termination - Better connection management - Built-in retry logic</p>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/connection-issues/#log-everything","level":3,"title":"Log Everything","text":"<pre><code># Enable verbose logging\nsellia server --log-level debug\nsellia http --verbose\n\n# Send to log file\nsellia server 2&gt;&amp;1 | tee /var/log/sellia/server.log\n</code></pre>","path":["User","Troubleshooting","Connection Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/","level":1,"title":"Subdomain Conflicts Troubleshooting","text":"<p>Guide to resolving \"subdomain already in use\" errors.</p>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#common-problems","level":2,"title":"Common Problems","text":"","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#subdomain-already-in-use","level":3,"title":"\"Subdomain Already in Use\"","text":"<p>Symptoms: - Error: \"Subdomain 'myapp' is not available\" - Tunnel creation fails - Server sends <code>TunnelClose</code> with \"not available\" reason</p> <p>Diagnosis:</p> <ol> <li> <p>Check if tunnel exists: <pre><code>curl http://your-server.com/health\n\n# Expected output:\n# {\"status\":\"ok\",\"tunnels\":5}\n</code></pre></p> </li> <li> <p>Try to access subdomain: <pre><code>curl http://myapp.your-domain.com\n</code></pre></p> </li> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep \"myapp\"\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Use different subdomain: <pre><code>sellia http 8080 --subdomain myapp2\n</code></pre></p> </li> <li> <p>Wait for existing tunnel to close: <pre><code># Tunnels automatically close when client disconnects\n# Press Ctrl+C to close the tunnel client\n</code></pre></p> </li> <li> <p>Check for zombie tunnels: <pre><code># If client crashed, tunnel may still be registered\n# Restart server to clear all tunnels\nsystemctl restart sellia\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#subdomain-is-reserved","level":3,"title":"\"Subdomain is Reserved\"","text":"<p>Symptoms: - Error: \"Subdomain 'www' is reserved\" - Cannot use certain subdomains</p> <p>Diagnosis:</p> <ol> <li>Check reserved subdomains: <pre><code>sellia admin reserved-subdomains list\n</code></pre></li> </ol> <p>Default Reserved Subdomains (from storage/migrations.cr): - <code>www</code> - Common web server subdomain - <code>api</code> - API endpoints - <code>admin</code> - Admin panel - <code>mail</code> - Email services - <code>ftp</code> - File transfer - <code>localhost</code> - Localhost</p> <p>Note: These defaults are seeded into the database and can be managed via <code>sellia admin reserved</code> commands.</p> <p>Solutions:</p> <ol> <li> <p>Use different subdomain: <pre><code># Instead of\nsellia http --subdomain www\n\n# Use\nsellia http --subdomain myapp\n</code></pre></p> </li> <li> <p>Remove reservation (if you control server): <pre><code>sellia admin reserved-subdomains delete www\n</code></pre></p> </li> <li> <p>Check reserved list: <pre><code>sellia admin reserved-subdomains list\n\n# Output:\n# Reserved Subdomains:\n# - www (System)\n# - api (System: API endpoints)\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#subdomain-format-validation-errors","level":3,"title":"Subdomain Format Validation Errors","text":"<p>Symptoms: - Error: \"Subdomain must be at least 3 characters\" - Error: \"Subdomain can only contain lowercase letters, numbers, and hyphens\" - Error: \"Subdomain cannot start or end with a hyphen\"</p> <p>Diagnosis:</p> <pre><code># Check your subdomain\necho \"myapp\" | grep -E '^[a-z0-9][a-z0-9-]*[a-z0-9]$'\n</code></pre> <p>Validation Rules (from tunnel_registry.cr): 1. Length: 3-63 characters 2. Characters: lowercase letters, numbers, hyphens only 3. Must start and end with alphanumeric character 4. Cannot contain consecutive hyphens 5. Cannot be a reserved subdomain 6. Must not already be in use</p> <p>Solutions:</p> <ol> <li> <p>Fix subdomain format: <pre><code># BAD - too short\nsellia http --subdomain ab\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - uppercase\nsellia http --subdomain MyApp\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - starts with hyphen\nsellia http --subdomain -myapp\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - ends with hyphen\nsellia http --subdomain myapp-\n\n# GOOD\nsellia http --subdomain myapp\n\n# BAD - consecutive hyphens\nsellia http --subdomain my--app\n\n# GOOD\nsellia http --subdomain my-app\n</code></pre></p> </li> <li> <p>Use generated subdomain: <pre><code># Let server generate random subdomain\nsellia http\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#race-condition-subdomain-taken","level":3,"title":"Race Condition - Subdomain Taken","text":"<p>Symptoms: - Multiple clients trying to get same subdomain - One succeeds, others fail - Error intermittent</p> <p>Diagnosis:</p> <ol> <li> <p>Check if multiple clients are using same config: <pre><code># Multiple processes with same subdomain\nps aux | grep \"sellia.*myapp\"\n</code></pre></p> </li> <li> <p>Check timing: <pre><code># If clients start at same time (e.g., system reboot)\n# They may race for the same subdomain\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Use unique subdomains per client: <pre><code># Client 1\nsellia http --subdomain myapp-client1\n\n# Client 2\nsellia http --subdomain myapp-client2\n</code></pre></p> </li> <li> <p>Add identifier: <pre><code># Use hostname or identifier\nHOST=$(hostname)\nsellia http --subdomain \"myapp-${HOST}\"\n</code></pre></p> </li> <li> <p>Use random subdomain: <pre><code># No conflicts possible\nsellia http\n</code></pre></p> </li> <li> <p>Implement retry logic: <pre><code># In client code\nmax_attempts = 3\nattempt = 0\n\nwhile attempt &lt; max_attempts\n  result = try_open_tunnel(subdomain)\n  if result.success?\n    break\n  elsif result.error.includes?(\"not available\")\n    attempt += 1\n    sleep 1\n    subdomain = \"#{subdomain}#{attempt}\"\n  else\n    break\n  end\nend\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#zombie-tunnel-holding-subdomain","level":3,"title":"Zombie Tunnel Holding Subdomain","text":"<p>Symptoms: - Client disconnected but tunnel still registered - Cannot reuse subdomain - Server shows tunnel active</p> <p>Diagnosis:</p> <ol> <li> <p>Check server health: <pre><code>curl http://your-server.com/health\n\n# Note: tunnels count includes zombies\n</code></pre></p> </li> <li> <p>Try to access subdomain: <pre><code># If returns 502 \"Tunnel client disconnected\"\n# Tunnel is registered but client is gone\ncurl http://myapp.your-domain.com\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Wait for cleanup: <pre><code># Server may have stale connection detection\n# Waits 60 seconds before marking as stale\n</code></pre></p> </li> <li> <p>Restart server: <pre><code># Clears all tunnels\nsystemctl restart sellia\n</code></pre></p> </li> <li> <p>Implement server-side cleanup: <pre><code># In WSGateway#check_connections\nif client.stale?(PING_TIMEOUT)\n  Log.warn { \"Client #{client.id} timed out\" }\n  client.close(\"Connection timeout\")\n  handle_disconnect(client)\nend\n</code></pre></p> </li> <li> <p>Add keep-alive: <pre><code># Ensure ping/pong is working\n# Server sends ping every 30s\n# Client responds with pong\n# If no pong for 60s, client is stale\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#subdomain-management","level":2,"title":"Subdomain Management","text":"","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#list-active-tunnels","level":3,"title":"List Active Tunnels","text":"<pre><code># Via health endpoint\ncurl http://your-server.com/health\n\n# Via admin API\ncurl -u admin:password http://your-server.com/admin/tunnels\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#force-close-tunnel","level":3,"title":"Force Close Tunnel","text":"<pre><code># Via admin API\ncurl -X POST \\\n  -u admin:password \\\n  http://your-server.com/admin/tunnels/{tunnel_id}/close\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#clear-all-tunnels","level":3,"title":"Clear All Tunnels","text":"<pre><code># Restart server\nsystemctl restart sellia\n\n# Or via admin API (if implemented)\ncurl -X POST \\\n  -u admin:password \\\n  http://your-server.com/admin/tunnels/clear-all\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#add-reserved-subdomain","level":3,"title":"Add Reserved Subdomain","text":"<pre><code># Prevent subdomain from being used\nsellia admin reserved-subdomains create myapp --reason \"Reserved for production\"\n\n# Make it default (system)\nsellia admin reserved-subdomains create www --reason \"Web server\" --default\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#remove-reserved-subdomain","level":3,"title":"Remove Reserved Subdomain","text":"<pre><code>sellia admin reserved-subdomains delete myapp\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#use-descriptive-subdomains","level":3,"title":"Use Descriptive Subdomains","text":"<pre><code># GOOD - descriptive\nsellia http --subdomain dev-myapp\nsellia http --subdomain staging-myapp\nsellia http --subdomain prod-myapp\n\n# BAD - random, hard to remember\nsellia http --subdomain a1b2c3d4\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#use-environment-suffix","level":3,"title":"Use Environment Suffix","text":"<pre><code># Development\nENV=dev\nsellia http --subdomain \"myapp-${ENV}\"\n\n# Staging\nENV=staging\nsellia http --subdomain \"myapp-${ENV}\"\n\n# Production\nENV=prod\nsellia http --subdomain \"myapp-${ENV}\"\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#use-consistent-naming","level":3,"title":"Use Consistent Naming","text":"<pre><code># Pattern: {app}-{service}-{env}\n# Examples:\nsellia http --subdomain myapp-api-dev\nsellia http --subdomain myapp-web-prod\nsellia http --subdomain myapp-admin-staging\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#avoid-reserved-words","level":3,"title":"Avoid Reserved Words","text":"<p>Avoid these subdomains: - <code>www</code>, <code>api</code>, <code>admin</code>, <code>mail</code>, <code>ftp</code>, <code>localhost</code>, <code>smtp</code>, <code>pop</code>, <code>imap</code> - Any system service you might run</p>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#document-subdomain-usage","level":3,"title":"Document Subdomain Usage","text":"<pre><code># Keep track of subdomain assignments\n# Subdomain | Purpose | Owner | Date\n# myapp-dev | Development | Alice | 2024-01-15\n# myapp-prod | Production | Bob | 2024-01-16\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#testing","level":2,"title":"Testing","text":"","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#test-subdomain-availability","level":3,"title":"Test Subdomain Availability","text":"<pre><code># Check if subdomain is taken\ncurl -I http://myapp.your-domain.com\n\n# 404 = Available (no tunnel)\n# 200/502 = Taken (tunnel exists or zombie)\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#test-subdomain-format","level":3,"title":"Test Subdomain Format","text":"<pre><code># Validation function\nvalidate_subdomain() {\n  local subdomain=\"$1\"\n\n  if [[ ${#subdomain} -lt 3 ]]; then\n    echo \"Error: Subdomain must be at least 3 characters\"\n    return 1\n  fi\n\n  if [[ ${#subdomain} -gt 63 ]]; then\n    echo \"Error: Subdomain must be at most 63 characters\"\n    return 1\n  fi\n\n  if [[ ! \"$subdomain\" =~ ^[a-z0-9]([a-z0-9-]*[a-z0-9])?$ ]]; then\n    echo \"Error: Invalid subdomain format\"\n    return 1\n  fi\n\n  echo \"Subdomain '$subdomain' is valid\"\n}\n\n# Test\nvalidate_subdomain \"myapp\"  # Valid\nvalidate_subdomain \"ab\"     # Too short\nvalidate_subdomain \"MyApp\"  # Uppercase\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#test-race-conditions","level":3,"title":"Test Race Conditions","text":"<pre><code># Test multiple clients trying same subdomain\nfor i in {1..5}; do\n  sellia http --subdomain race-test &amp;\ndone\n\n# Wait and check results\nsleep 5\ncurl http://race-test.your-domain.com\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#prevention","level":2,"title":"Prevention","text":"","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#reserve-system-subdomains-early","level":3,"title":"Reserve System Subdomains Early","text":"<pre><code># During setup\nsellia admin reserved-subdomains create www --reason \"Web server\" --default\nsellia admin reserved-subdomains create api --reason \"API server\" --default\nsellia admin reserved-subdomains create admin --reason \"Admin panel\" --default\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#use-unique-identifiers","level":3,"title":"Use Unique Identifiers","text":"<pre><code># Include hostname/user in subdomain\nsellia http --subdomain \"myapp-${USER}\"\nsellia http --subdomain \"myapp-$(hostname)\"\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#implement-cleanup-logic","level":3,"title":"Implement Cleanup Logic","text":"<pre><code># Server-side cleanup\n# 1. Detect stale connections\n# 2. Close stale connections\n# 3. Clean up tunnels\n# 4. Reset rate limits\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/subdomain-conflicts/#monitor-subdomain-usage","level":3,"title":"Monitor Subdomain Usage","text":"<pre><code># Regularly check for stale tunnels\nwhile true; do\n  tunnels=$(curl -s http://your-server.com/health | jq '.tunnels')\n  echo \"Active tunnels: $tunnels\"\n  sleep 60\ndone\n</code></pre>","path":["User","Troubleshooting","Subdomain Conflicts Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/","level":1,"title":"TLS and Certificate Errors Troubleshooting","text":"<p>Guide to fixing HTTPS/TLS issues with Sellia tunnels.</p>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#common-problems","level":2,"title":"Common Problems","text":"","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#certificate-not-found-error","level":3,"title":"\"Certificate Not Found\" Error","text":"<p>Symptoms: - Browser shows \"NET::ERR_CERT_AUTHORITY_INVALID\" - Error: \"certificate not found for domain\" - Caddy fails to get certificate</p> <p>Diagnosis:</p> <ol> <li> <p>Check Caddy TLS verification endpoint: <pre><code>curl \"http://your-server.com/tunnel/verify?domain=myapp.your-domain.com\"\n</code></pre></p> </li> <li> <p>Check Caddy logs: <pre><code>journalctl -u caddy -f\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Ensure tunnel is active: <pre><code># Certificate is only issued for active tunnels\nsellia http --subdomain myapp\n\n# Then test verification\ncurl \"http://your-server.com/tunnel/verify?domain=myapp.your-domain.com\"\n</code></pre></p> </li> <li> <p>Check DNS is pointing correctly: <pre><code># Should be CNAME or A record to your server\ndig myapp.your-domain.com\n\n# Expected: points to your server IP\n</code></pre></p> </li> <li> <p>Wait for DNS propagation: <pre><code># DNS can take up to 24 hours to propagate\n# But usually takes 5-10 minutes\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#cannot-verify-domain-error","level":3,"title":"\"Cannot Verify Domain\" Error","text":"<p>Symptoms: - Caddy log: \"verifying domain availability\" - Certificate issuance fails - HTTP works but HTTPS doesn't</p> <p>Diagnosis:</p> <ol> <li>Check <code>/tunnel/verify</code> endpoint: <pre><code>curl -v \"http://your-server.com/tunnel/verify?domain=test.your-domain.com\"\n</code></pre></li> </ol> <p>Expected response: - <code>200 OK</code> if tunnel active - <code>404 Not Found</code> if no tunnel</p> <p>Solutions:</p> <ol> <li> <p>Check base domain is allowed: <pre><code># In HTTPIngress#verify_tunnel_for_tls (actual implementation)\n# Returns 200 if:\n# 1. domain_param == base domain (for WebSocket connections from clients)\n# 2. subdomain exists and has an active tunnel\n# Otherwise returns 404\n</code></pre></p> </li> <li> <p>Ensure tunnel is created before HTTPS request: <pre><code># Start tunnel\nsellia http --subdomain myapp &amp;\n\n# Wait for \"Tunnel ready\" message\n# Then access via HTTPS\ncurl https://myapp.your-domain.com\n</code></pre></p> </li> <li> <p>Check Caddy on-demand TLS config: <pre><code># Caddyfile\n{\n  # Enable on-demand TLS\n  on_demand_tls {\n    ask http://localhost:3000/tunnel/verify\n  }\n}\n\nyour-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#mixed-content-warnings","level":3,"title":"Mixed Content Warnings","text":"<p>Symptoms: - Browser console shows \"Mixed Content\" errors - Some resources fail to load - Error: \"was loaded over HTTPS, but requested an insecure resource\"</p> <p>Diagnosis:</p> <p>Check browser console for: <pre><code>The page at 'https://myapp.your-domain.com' was loaded over HTTPS, \nbut requested an insecure resource 'http://myapp.your-domain.com/api'.\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Fix absolute URLs in your app: <pre><code>&lt;!-- BAD --&gt;\n&lt;script src=\"http://myapp.your-domain.com/app.js\"&gt;&lt;/script&gt;\n\n&lt;!-- GOOD --&gt;\n&lt;script src=\"/app.js\"&gt;&lt;/script&gt;\n\n&lt;!-- GOOD --&gt;\n&lt;script src=\"https://myapp.your-domain.com/app.js\"&gt;&lt;/script&gt;\n</code></pre></p> </li> <li> <p>Use protocol-relative URLs (deprecated): <pre><code>&lt;script src=\"//myapp.your-domain.com/app.js\"&gt;&lt;/script&gt;\n</code></pre></p> </li> <li> <p>Update API calls: <pre><code>// BAD\nfetch('http://api.example.com/data')\n\n// GOOD - use relative path\nfetch('/api/data')\n\n// GOOD - use HTTPS\nfetch('https://api.example.com/data')\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#ssl_error_bad_cert_domain","level":3,"title":"\"SSL_ERROR_BAD_CERT_DOMAIN\"","text":"<p>Symptoms: - Browser error: \"SSL_ERROR_BAD_CERT_DOMAIN\" - Error: \"certificate does not match domain name\"</p> <p>Diagnosis:</p> <ol> <li> <p>Check certificate: <pre><code>openssl s_client -connect myapp.your-domain.com:443 -servername myapp.your-domain.com\n</code></pre></p> </li> <li> <p>Check certificate CN/SAN: <pre><code># Look for:\n# subject=CN = myapp.your-domain.com\n# subjectAltName=DNS:myapp.your-domain.com\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Clear browser cache: <pre><code>Sometimes browsers cache old certificates\n</code></pre></p> </li> <li> <p>Wait for certificate renewal: <pre><code># Caddy will retry every few minutes\n# Check logs for progress\njournalctl -u caddy -f | grep certificate\n</code></pre></p> </li> <li> <p>Force certificate renewal: <pre><code># Restart Caddy\nsystemctl restart caddy\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#hsts-pkix-errors","level":3,"title":"HSTS / PKIX Errors","text":"<p>Symptoms: - Browser: \"HSTS policy\" - Error: \"PKIX path building failed\" - Cannot access even after fixing certificate</p> <p>Diagnosis:</p> <p>Check if site has HSTS: <pre><code>curl -I https://myapp.your-domain.com | grep Strict-Transport-Security\n</code></pre></p> <p>Solutions:</p> <ol> <li>Clear HSTS in browser:</li> </ol> <p>Chrome: 1. Go to chrome://net-internals/#hsts 2. Enter domain under \"Delete domain security policies\" 3. Click Delete</p> <p>Firefox: 1. Clear browser history 2. Or wait for HSTS to expire (max-age)</p> <ol> <li> <p>Use private/incognito window: <pre><code>HSTS not enforced in private browsing\n</code></pre></p> </li> <li> <p>Check HSTS header: <pre><code># Your app should not set HSTS if using dynamic certificates\n# Or set max-age appropriately\nresponse.headers[\"Strict-Transport-Security\"] = \"max-age=31536000\"\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#caddy-cannot-obtain-certificate","level":3,"title":"Caddy Cannot Obtain Certificate","text":"<p>Symptoms: - Caddy log: \"obtaining certificate\" - Caddy log: \"no solution found\" - HTTPS works after delay (1-2 minutes)</p> <p>Diagnosis:</p> <ol> <li> <p>Check Caddy logs: <pre><code>journalctl -u caddy -n 50 | grep -i certificate\n</code></pre></p> </li> <li> <p>Check Let's Encrypt rate limits: <pre><code># Check if you hit rate limits\n# https://letsencrypt.net/docs/rate-limits/\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Wait for rate limit reset: <pre><code>Let's Encrypt limit: 50 certificates per domain per week\n</code></pre></p> </li> <li> <p>Use staging environment for testing: <pre><code>{\n  acme_ca https://acme-staging-v02.api.letsencrypt.org/directory\n}\n</code></pre></p> </li> <li> <p>Reduce certificate requests: <pre><code># Don't recreate tunnels frequently\n# Use same subdomain for testing\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#certificate-expired-error","level":3,"title":"\"Certificate Expired\" Error","text":"<p>Symptoms: - Browser: \"certificate has expired\" - Connection refused</p> <p>Diagnosis:</p> <pre><code># Check certificate expiration\necho | openssl s_client -servername myapp.your-domain.com -connect myapp.your-domain.com:443 2&gt;/dev/null | openssl x509 -noout -dates\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Caddy auto-renews: <pre><code>Certificates are automatically renewed 30 days before expiration\n</code></pre></p> </li> <li> <p>Force renewal if needed: <pre><code>systemctl restart caddy\n</code></pre></p> </li> <li> <p>Check system time: <pre><code># Wrong system time can cause certificate validation to fail\ntimedatectl status\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#tls-handshake-timeout","level":3,"title":"TLS Handshake Timeout","text":"<p>Symptoms: - Connection hangs - Error: \"TLS handshake timeout\" - No response from server</p> <p>Diagnosis:</p> <pre><code># Test TLS handshake\ntimeout 10 openssl s_client -connect myapp.your-domain.com:443\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Check firewall allows port 443: <pre><code>sudo ufw allow 443/tcp\nsudo firewall-cmd --add-port=443/tcp --permanent\n</code></pre></p> </li> <li> <p>Check reverse proxy is running: <pre><code>systemctl status caddy\nsystemctl status nginx\n</code></pre></p> </li> <li> <p>Increase timeout: <pre><code>your-domain.com {\n    reverse_proxy localhost:3000 {\n        transport http {\n            read_timeout 30s\n            write_timeout 30s\n        }\n    }\n}\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#configuration-examples","level":2,"title":"Configuration Examples","text":"","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#caddy-with-on-demand-tls","level":3,"title":"Caddy with On-Demand TLS","text":"<pre><code># Caddyfile\n{\n    # On-demand TLS configuration\n    on_demand_tls {\n        # Ask Sellia server if domain should get certificate\n        ask http://localhost:3000/tunnel/verify\n    }\n}\n\nyour-domain.com {\n    # Reverse proxy to Sellia server\n    reverse_proxy localhost:3000 {\n        # WebSocket support (automatic in Caddy)\n    }\n}\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#caddy-with-rate-limiting","level":3,"title":"Caddy with Rate Limiting","text":"<pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n\n    # Rate limit certificate issuance\n    @on_demand_tls {\n        rate_limit {\n            zone tls {\n                key {tls_on_demand}\n                events 100\n                window 1m\n            }\n        }\n    }\n}\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#nginx-with-ssl","level":3,"title":"Nginx with SSL","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    # SSL certificate (use Let's Encrypt/Certbot)\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n\n    # Reverse proxy\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n\n# HTTP to HTTPS redirect\nserver {\n    listen 80;\n    server_name your-domain.com;\n    return 301 https://$server_name$request_uri;\n}\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#prevention","level":2,"title":"Prevention","text":"","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#use-stable-subdomains","level":3,"title":"Use Stable Subdomains","text":"<pre><code># In production, don't use random subdomains\n# They change each time, requiring new certificates\n\n# BAD - random subdomain\nsellia http\n\n# GOOD - fixed subdomain\nsellia http --subdomain myapp-prod\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#monitor-certificate-expiration","level":3,"title":"Monitor Certificate Expiration","text":"<pre><code># Check certificate expiration\necho | openssl s_client -servername myapp.your-domain.com -connect myapp.your-domain.com:443 2&gt;/dev/null | openssl x509 -noout -dates\n\n# Set up monitoring to alert at 30 days\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#test-certificate-configuration","level":3,"title":"Test Certificate Configuration","text":"<pre><code># Use SSL Labs to test configuration\n# https://www.ssllabs.com/ssltest/analyze.html?d=myapp.your-domain.com\n\n# Should get A or A+ grade\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#use-proper-dns","level":3,"title":"Use Proper DNS","text":"<pre><code># Wildcard DNS (simple)\n*.your-domain.com A 1.2.3.4\n\n# Or individual subdomains\nmyapp.your-domain.com A 1.2.3.4\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#lets-encrypt-limits","level":2,"title":"Let's Encrypt Limits","text":"","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#rate-limits","level":3,"title":"Rate Limits","text":"<ul> <li>Certificates per Registered Domain: 50 per week</li> <li>Certificates per Certificate Name: 5 per week</li> <li>Duplicate Certificate limit: 1 per 3 days</li> </ul>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#check-limits","level":3,"title":"Check Limits","text":"<pre><code># Check staging environment first\n{\n  acme_ca https://acme-staging-v02.api.letsencrypt.org/directory\n}\n\n# Use production after testing\n{\n  acme_ca https://acme-v02.api.letsencrypt.org/directory\n}\n</code></pre>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/tls-errors/#failed-attempts-count","level":3,"title":"Failed Attempts Count","text":"<p>Failed validation attempts count against rate limits. Ensure: - DNS is correct - Server is accessible - Firewall allows connections</p>","path":["User","Troubleshooting","TLS and Certificate Errors Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/","level":1,"title":"WebSocket Issues Troubleshooting","text":"<p>Guide to fixing WebSocket and HMR (Hot Module Replacement) problems.</p>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#common-problems","level":2,"title":"Common Problems","text":"","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#websocket-connection-fails","level":3,"title":"WebSocket Connection Fails","text":"<p>Symptoms: - Error: \"WebSocket upgrade failed\" - Error: \"502 Bad Gateway\" - HMR not working in development</p> <p>Diagnosis:</p> <ol> <li>Check WebSocket upgrade headers: <pre><code>curl -I -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  http://myapp.your-domain.com/socket\n</code></pre></li> </ol> <p>Expected: <pre><code>HTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\n</code></pre></p> <ol> <li> <p>Check browser console: <pre><code>// Look for WebSocket errors\n// \"WebSocket connection to 'ws://...' failed\"\n</code></pre></p> </li> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep -i websocket\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>Configure reverse proxy for WebSocket:</li> </ol> <p>Caddy (automatic): <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> <p>Nginx: <pre><code>location / {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n    proxy_set_header Host $host;\n}\n</code></pre></p> <ol> <li> <p>Check local service supports WebSocket: <pre><code># Test direct connection\nwscat -c ws://localhost:3000/socket\n\n# If this fails, issue is with local service, not Sellia\n</code></pre></p> </li> <li> <p>Check WebSocket frame forwarding: <pre><code>// In TunnelClient\n@on_websocket do |path, request_id|\n  puts \"WebSocket connected: #{path} (#{request_id})\"\nend\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#hmr-not-working-in-development","level":3,"title":"HMR Not Working in Development","text":"<p>Symptoms: - File changes not reflected in browser - Error: \"WebSocket connection closed\" - Dev server shows disconnected client</p> <p>Diagnosis:</p> <ol> <li> <p>Check Vite/Webpack dev server is running: <pre><code># Vite\ncd web\nnpm run dev\n\n# Should see: \"Local: http://localhost:5173\"\n</code></pre></p> </li> <li> <p>Check WebSocket connection in browser: <pre><code>// Browser console\n// Look for: \"[HMR] Connected\" or \"[HMR] Waiting for update signal...\"\n</code></pre></p> </li> <li> <p>Test WebSocket directly: <pre><code># Test Vite HMR endpoint\nwscat -c ws://localhost:5173\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Start Vite dev server: <pre><code>cd web\nnpm run dev\n</code></pre></p> </li> <li> <p>Check Vite configuration: <pre><code>// vite.config.js\nexport default {\n  server: {\n    hmr: {\n      protocol: 'ws',\n      host: 'localhost',\n    },\n    ws: {\n      port: 5173,\n    },\n  },\n}\n</code></pre></p> </li> <li> <p>Configure inspector proxy: <pre><code># In Inspector#proxy_to_vite\n# Vite HMR WebSocket proxying is NOT supported\n# Use direct connection to Vite instead\n</code></pre></p> </li> <li> <p>Use production build instead: <pre><code># Build frontend\ncd web\nnpm run build\n\n# Build Sellia with baked assets\nshards build --release\n\n# HMR not needed in production\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#websocket-frame-dropping","level":3,"title":"WebSocket Frame Dropping","text":"<p>Symptoms: - WebSocket connects but messages lost - Intermittent communication - Frames arrive out of order</p> <p>Diagnosis:</p> <ol> <li> <p>Check for buffer overflows: <pre><code># Check message sizes\n# Large messages may be dropped\n</code></pre></p> </li> <li> <p>Check for congestion: <pre><code># Too many concurrent WebSocket connections\nnetstat -an | grep :3000 | grep ESTABLISHED | wc -l\n</code></pre></p> </li> <li> <p>Monitor frame loop: <pre><code>// In HTTPIngress#run_websocket_frame_loop\nLog.debug { \"WebSocket #{request_id}: received frame opcode=#{info.opcode}, size=#{info.size}\" }\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Increase buffer size: <pre><code>// In HTTPIngress\nbuffer = Bytes.new(16384)  # Increase from 8192\n</code></pre></p> </li> <li> <p>Implement backpressure: <pre><code>// Don't send frames if congestion detected\nif pending_ws.congestion?\n  // Queue or drop frames\n  next\nend\n</code></pre></p> </li> <li> <p>Use multiple tunnels: <pre><code># Spread WebSocket connections across tunnels\n# One tunnel for HTTP, one for WebSocket\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#websocket-timeout-errors","level":3,"title":"WebSocket Timeout Errors","text":"<p>Symptoms: - Error: \"WebSocket upgrade timeout\" - Connection closes after 30 seconds - Intermittent failures</p> <p>Diagnosis:</p> <ol> <li> <p>Check timeout settings: <pre><code>// In HTTPIngress\n@property request_timeout : Time::Span = 30.seconds\n</code></pre></p> </li> <li> <p>Check for slow local service: <pre><code># Time WebSocket connection\ntime curl -i -N \\\n  -H \"Connection: Upgrade\" \\\n  -H \"Upgrade: websocket\" \\\n  http://localhost:3000/socket\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li>WebSocket timeout settings:</li> <li>HTTPIngress request_timeout: 30 seconds (default)</li> <li>WSGateway PING_INTERVAL: 30 seconds</li> <li>WSGateway PING_TIMEOUT: 60 seconds</li> <li> <p>These are hardcoded in the server implementation</p> </li> <li> <p>Optimize local service: <pre><code># Reduce WebSocket handshake time\n# Optimize database queries\n# Use connection pooling\n</code></pre></p> </li> <li> <p>Check for blocking operations: <pre><code>// Ensure handshake is non-blocking\n// Don't block in WebSocket frame loop\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#websocket-close-errors","level":3,"title":"WebSocket Close Errors","text":"<p>Symptoms: - Error: \"WebSocket closed unexpectedly\" - Error code: 1006 (abnormal closure) - Connection drops randomly</p> <p>Diagnosis:</p> <ol> <li>Check close codes: <pre><code>// Browser console\nwebsocket.onclose = (event) =&gt; {\n  console.log('Close code:', event.code);\n  console.log('Close reason:', event.reason);\n};\n</code></pre></li> </ol> <p>Common codes: - <code>1000</code> - Normal closure - <code>1001</code> - Endpoint going away - <code>1006</code> - Abnormal closure (network issue) - <code>1008</code> - Policy violation - <code>1011</code> - Internal error</p> <ol> <li> <p>Check server logs: <pre><code>tail -f /var/log/sellia/server.log | grep -i \"websocket.*close\"\n</code></pre></p> </li> <li> <p>Test network stability: <pre><code># Ping server\nping -c 100 your-server.com\n\n# Look for packet loss\n</code></pre></p> </li> </ol> <p>Solutions:</p> <ol> <li> <p>Fix network issues: <pre><code># Use wired connection\n# Check router logs\n# Contact ISP if issues persist\n</code></pre></p> </li> <li> <p>Implement graceful close: <pre><code>// Send close frame before closing\nws_protocol.close\n\n// Then close connection\npending_ws.close\n</code></pre></p> </li> <li> <p>Handle close in client: <pre><code>websocket.onclose = (event) =&gt; {\n  if (event.code === 1006) {\n    // Abnormal closure - reconnect\n    setTimeout(() =&gt; reconnect(), 1000);\n  }\n};\n</code></pre></p> </li> <li> <p>Increase ping interval: <pre><code>// More frequent keep-alive\nPING_INTERVAL = 15.seconds  // Reduce from 30s\n</code></pre></p> </li> </ol>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#mixed-content-with-websocket","level":3,"title":"Mixed Content with WebSocket","text":"<p>Symptoms: - Error: \"Mixed Content: WebSocket connection from HTTPS page\" - Browser blocks WebSocket</p> <p>Diagnosis:</p> <p>Check browser console: <pre><code>Mixed Content: The page at 'https://myapp.your-domain.com' \nwas loaded over HTTPS, but attempted to connect to \nws://myapp.your-domain.com/socket (insecure WebSocket)\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Use WSS instead of WS: <pre><code>// BAD\nconst ws = new WebSocket('ws://myapp.your-domain.com/socket');\n\n// GOOD\nconst ws = new WebSocket('wss://myapp.your-domain.com/socket');\n</code></pre></p> </li> <li> <p>Let browser choose: <pre><code>// Use protocol-relative URL\nconst ws = new WebSocket(`//${window.location.host}/socket`);\n\n// Or use current protocol\nconst protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\nconst ws = new WebSocket(`${protocol}//${window.location.host}/socket`);\n</code></pre></p> </li> <li> <p>Configure reverse proxy for WSS:</p> </li> </ol> <p>Caddy (automatic): <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p> <p>Nginx: <pre><code>location /socket {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection \"upgrade\";\n\n    # WSS support\n    proxy_set_header X-Forwarded-Proto $scheme;\n}\n</code></pre></p>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#reverse-proxy-configuration","level":2,"title":"Reverse Proxy Configuration","text":"","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#caddy-recommended","level":3,"title":"Caddy (Recommended)","text":"<pre><code>your-domain.com {\n    # WebSocket support is automatic\n    reverse_proxy localhost:3000 {\n        # Increase timeouts for long-running connections\n        transport http {\n            read_timeout 120s\n            write_timeout 120s\n            dial_timeout 10s\n        }\n    }\n}\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#nginx","level":3,"title":"Nginx","text":"<pre><code>server {\n    listen 443 ssl http2;\n    server_name your-domain.com;\n\n    # SSL certificates\n    ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;\n\n    # WebSocket upgrade\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n\n        # Timeouts for long-running WebSockets\n        proxy_read_timeout 86400;\n        proxy_send_timeout 86400;\n    }\n\n    # For specific WebSocket path\n    location /socket {\n        proxy_pass http://localhost:3000;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n        proxy_set_header Host $host;\n        proxy_read_timeout 86400;\n    }\n}\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#testing","level":2,"title":"Testing","text":"","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#test-websocket-connection","level":3,"title":"Test WebSocket Connection","text":"<pre><code># Using wscat\nwscat -c ws://myapp.your-domain.com/socket\n\n# Using websocat\nwebsocat ws://myapp.your-domain.com/socket\n\n# Send message\necho \"hello\" | websocat ws://myapp.your-domain.com/socket\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#test-with-script","level":3,"title":"Test with Script","text":"<pre><code>// test-websocket.js\nconst WebSocket = require('ws');\n\nconst ws = new WebSocket('ws://localhost:3000/socket');\n\nws.on('open', () =&gt; {\n  console.log('Connected');\n  ws.send('Hello from test');\n});\n\nws.on('message', (data) =&gt; {\n  console.log('Received:', data.toString());\n  ws.close();\n});\n\nws.on('close', () =&gt; {\n  console.log('Disconnected');\n});\n\nws.on('error', (error) =&gt; {\n  console.error('Error:', error.message);\n});\n</code></pre> <p>Run: <pre><code>node test-websocket.js\n</code></pre></p>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#monitor-websocket-traffic","level":3,"title":"Monitor WebSocket Traffic","text":"<pre><code># Using tcpdump\nsudo tcpdump -i any -A -s 0 'tcp port 3000 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'\n\n# Or use tshark\ntshark -f \"tcp port 3000\" -V\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#prevention","level":2,"title":"Prevention","text":"","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#use-caddy-for-automatic-websocket-support","level":3,"title":"Use Caddy for Automatic WebSocket Support","text":"<p>Caddy automatically handles WebSocket upgrades: <pre><code>your-domain.com {\n    reverse_proxy localhost:3000\n}\n</code></pre></p>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#set-appropriate-timeouts","level":3,"title":"Set Appropriate Timeouts","text":"<pre><code>// Server\nPING_INTERVAL = 30.seconds\nPING_TIMEOUT = 60.seconds\n\n// Client\nclient.request_timeout = 60.seconds\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#monitor-websocket-connections","level":3,"title":"Monitor WebSocket Connections","text":"<pre><code># Track active WebSocket connections\nwatch 'netstat -an | grep :3000 | grep ESTABLISHED | wc -l'\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#implement-heartbeat","level":3,"title":"Implement Heartbeat","text":"<pre><code>// Client-side heartbeat\nsetInterval(() =&gt; {\n  if (ws.readyState === WebSocket.OPEN) {\n    ws.ping();\n  }\n}, 30000); // Every 30 seconds\n</code></pre>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#use-connection-pooling","level":3,"title":"Use Connection Pooling","text":"<p>For applications with many WebSocket connections: <pre><code># Use multiple tunnels\n# Distribute connections across tunnels\n</code></pre></p>","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/troubleshooting/websocket-issues/#common-error-codes","level":2,"title":"Common Error Codes","text":"Code Name Meaning Solution 1000 Normal Normal closure None expected 1001 Going Away Server shutting down Reconnect when server back 1006 Abnormal Network issue Check network, reconnect 1008 Policy Violation of policy Check authentication 1009 Too Big Message too large Reduce message size 1010 Missing Extension Required extension missing Check client configuration 1011 Internal Server error Check server logs 1012 Service Restart Server restarting Reconnect when ready","path":["User","Troubleshooting","WebSocket Issues Troubleshooting"],"tags":[]},{"location":"user/tunnels/","level":1,"title":"Tunnels","text":"<p>Everything about creating and managing tunnels with Sellia.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#overview","level":2,"title":"Overview","text":"<p>Tunnels are secure connections from the public internet to your local development server. Sellia makes it easy to expose local services through custom subdomains.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#creating-tunnels","level":2,"title":"Creating Tunnels","text":"","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#basic-tunnel","level":3,"title":"Basic Tunnel","text":"<p>Expose a local service on port 3000:</p> <pre><code>sellia http 3000\n</code></pre>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#custom-subdomain","level":3,"title":"Custom Subdomain","text":"<p>Reserve a specific subdomain:</p> <pre><code>sellia http 3000 --subdomain myapp\n</code></pre> <p>Access at <code>http://myapp.your-domain.com</code></p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#basic-authentication","level":3,"title":"Basic Authentication","text":"<p>Protect your tunnel with username/password:</p> <pre><code>sellia http 3000 --auth admin:secret\n</code></pre>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#advanced-options","level":3,"title":"Advanced Options","text":"<pre><code># Specify local host\nsellia http 3000 --host 127.0.0.1\n\n# Use specific server\nsellia http 3000 --server https://sellia.me\n\n# Auto-open inspector\nsellia http 3000 --open\n\n# Custom inspector port\nsellia http 3000 --inspector-port 5000\n\n# Disable inspector\nsellia http 3000 --no-inspector\n</code></pre>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#managing-tunnels","level":2,"title":"Managing Tunnels","text":"","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#configuration-file","level":3,"title":"Configuration File","text":"<p>Define multiple tunnels in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\napi_key: your-api-key\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n  api:\n    port: 8080\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#tunnel-features","level":2,"title":"Tunnel Features","text":"","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#subdomain-routing","level":3,"title":"Subdomain Routing","text":"<p>Each tunnel gets a unique subdomain for easy access:</p> <ul> <li>Random: <code>abc123.your-domain.com</code></li> <li>Custom: <code>myapp.your-domain.com</code></li> </ul>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#automatic-reconnection","level":3,"title":"Automatic Reconnection","text":"<p>Sellia automatically reconnects with linear backoff if the connection drops.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#basic-auth-protection","level":3,"title":"Basic Auth Protection","text":"<p>Secure tunnels with HTTP basic authentication:</p> <pre><code>sellia http 3000 --auth user:pass\n</code></pre>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Server-side rate limiting prevents abuse (configurable on server).</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#use-cases","level":2,"title":"Use Cases","text":"","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#webhook-development","level":3,"title":"Webhook Development","text":"<pre><code>sellia http 3000 --subdomain webhooks --open\n</code></pre> <p>Use the inspector to debug webhook payloads in real-time.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#api-development","level":3,"title":"API Development","text":"<pre><code>sellia http 8080 --subdomain api --auth api:secret\n</code></pre> <p>Secure your API endpoint with authentication.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#mobile-development","level":3,"title":"Mobile Development","text":"<pre><code>sellia http 3000 --subdomain mobile-app\n</code></pre> <p>Test mobile apps against your local development server.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#client-demos","level":3,"title":"Client Demos","text":"<pre><code>sellia http 3000 --subdomain demo --auth client:preview123\n</code></pre> <p>Share password-protected previews with clients.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#use-configuration-files","level":3,"title":"Use Configuration Files","text":"<p>For multiple tunnels, use <code>sellia.yml</code> instead of CLI flags.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#reserve-subdomains","level":3,"title":"Reserve Subdomains","text":"<p>Use consistent subdomains in config to avoid conflicts.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#add-authentication","level":3,"title":"Add Authentication","text":"<p>Always use <code>--auth</code> for sensitive development work.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#monitor-with-inspector","level":3,"title":"Monitor with Inspector","text":"<p>Use <code>--open</code> to automatically open the inspector UI.</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#subdomain-taken","level":3,"title":"Subdomain Taken","text":"<p>If your custom subdomain is taken:</p> <ul> <li>Use a different subdomain</li> <li>Let Sellia assign a random one</li> </ul>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#connection-refused","level":3,"title":"Connection Refused","text":"<p>Check: - Local server is running - Correct port specified - Server is accessible</p>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#inspector-not-working","level":3,"title":"Inspector Not Working","text":"<ul> <li>Check firewall rules for inspector port</li> <li>Try <code>--inspector-port</code> with a different port</li> <li>Verify no other service is using the port</li> </ul>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Inspector - Debug your tunnels</li> <li>Configuration - Set up tunnel configs</li> <li>Authentication - Secure your tunnels</li> </ul>","path":["User","Tunnels"],"tags":[]},{"location":"user/tunnels/basic-auth/","level":1,"title":"Basic Authentication","text":"<p>Protect your tunnels with username and password authentication using basic auth. This ensures only authorized users can access your tunneled services.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#what-is-basic-authentication","level":2,"title":"What is Basic Authentication?","text":"<p>Basic authentication adds a username/password requirement to your tunnel. When someone tries to access your tunnel URL, they're prompted for credentials before the request is forwarded to your local server.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#how-it-works","level":3,"title":"How It Works","text":"<pre><code>User Request → Sellia Server → Check Credentials → If Valid: Forward to Local Server\n                                                       → If Invalid: Return 401 Unauthorized\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#enabling-basic-authentication","level":2,"title":"Enabling Basic Authentication","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#command-line","level":3,"title":"Command Line","text":"<p>Use the <code>--auth</code> flag when creating a tunnel:</p> <pre><code>sellia http 8080 --auth username:password\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#example-protected-webhook-endpoint","level":3,"title":"Example: Protected Webhook Endpoint","text":"<pre><code># Start your webhook handler\nnode webhook-server.js &amp;\n\n# Create protected tunnel\nsellia http 3000 --subdomain webhooks --auth admin:webhook-secret\n</code></pre> <p>Now anyone accessing your tunnel URL must provide credentials. The URL depends on your server configuration.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#authentication-flow","level":2,"title":"Authentication Flow","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#1-client-access-attempt","level":3,"title":"1. Client Access Attempt","text":"<p>When a client (browser, curl, API client) tries to access the tunnel:</p> <pre><code>curl https://webhooks.sellia.me\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#2-server-challenges","level":3,"title":"2. Server Challenges","text":"<p>Sellia responds with <code>401 Unauthorized</code> and a <code>WWW-Authenticate</code> header:</p> <pre><code>HTTP/1.1 401 Unauthorized\nWWW-Authenticate: Basic realm=\"Sellia Tunnel\"\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#3-client-provides-credentials","level":3,"title":"3. Client Provides Credentials","text":"<p>The client resends the request with credentials:</p> <pre><code>curl -u admin:webhook-secret https://webhooks.sellia.me\n</code></pre> <p>Or in a browser, a dialog prompts for username and password.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#4-request-forwarded","level":3,"title":"4. Request Forwarded","text":"<p>If credentials match, the request is forwarded to your local server.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#using-basic-auth-with-different-clients","level":2,"title":"Using Basic Auth with Different Clients","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#browser-access","level":3,"title":"Browser Access","text":"<p>When accessing via browser: 1. Navigate to the tunnel URL 2. Browser shows authentication dialog 3. Enter username and password 4. Browser caches credentials for the session</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#curl","level":3,"title":"cURL","text":"<pre><code># With -u flag\ncurl -u username:password https://tunnel.sellia.me\n\n# Or include in URL (not recommended for production)\ncurl https://username:password@tunnel.sellia.me\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#wget","level":3,"title":"wget","text":"<pre><code>wget --user=username --password=password https://tunnel.sellia.me\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#javascript-fetch-api","level":3,"title":"JavaScript (Fetch API)","text":"<pre><code>fetch('https://tunnel.sellia.me', {\n  headers: {\n    'Authorization': 'Basic ' + btoa('username:password')\n  }\n})\n.then(response =&gt; response.json())\n.then(data =&gt; console.log(data));\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#javascript-axios","level":3,"title":"JavaScript (Axios)","text":"<pre><code>axios.get('https://tunnel.sellia.me', {\n  auth: {\n    username: 'username',\n    password: 'password'\n  }\n})\n.then(response =&gt; console.log(response.data));\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#python-requests","level":3,"title":"Python (requests)","text":"<pre><code>import requests\n\nresponse = requests.get('https://tunnel.sellia.me', auth=('username', 'password'))\nprint(response.text)\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#python-urllib","level":3,"title":"Python (urllib)","text":"<pre><code>import urllib.request\nimport base64\n\nurl = 'https://tunnel.sellia.me'\ncredentials = base64.b64encode(b'username:password').decode('utf-8')\n\nrequest = urllib.request.Request(url)\nrequest.add_header('Authorization', f'Basic {credentials}')\n\nwith urllib.request.urlopen(request) as response:\n    print(response.read().decode())\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#nodejs-https","level":3,"title":"Node.js (https)","text":"<pre><code>const https = require('https');\nconst auth = 'Basic ' + Buffer.from('username:password').toString('base64');\n\nconst options = {\n  hostname: 'tunnel.sellia.me',\n  path: '/',\n  headers: { 'Authorization': auth }\n};\n\nhttps.get(options, (res) =&gt; {\n  let data = '';\n  res.on('data', (chunk) =&gt; data += chunk);\n  res.on('end', () =&gt; console.log(data));\n});\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#configuration-file","level":2,"title":"Configuration File","text":"<p>Set basic auth in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\n\ntunnels:\n  web:\n    port: 3000\n    subdomain: myapp\n    auth: admin:secret123\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n    auth: apiuser:apipass\n\n  public:\n    port: 5000\n    subdomain: public-site\n    # No auth - public tunnel\n</code></pre> <p>Start tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#security-best-practices","level":2,"title":"Security Best Practices","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#1-use-strong-passwords","level":3,"title":"1. Use Strong Passwords","text":"<p>Generate secure random passwords:</p> <pre><code># Generate 32-character random password\nopenssl rand -base64 32\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#2-unique-credentials-per-tunnel","level":3,"title":"2. Unique Credentials per Tunnel","text":"<p>Don't reuse credentials:</p> <pre><code>tunnels:\n  staging:\n    port: 3000\n    auth: staging-user:$(openssl rand -base64 32)\n\n  production:\n    port: 3001\n    auth: prod-user:$(openssl rand -base64 32)\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#3-environment-variables","level":3,"title":"3. Environment Variables","text":"<p>Store credentials in environment variables, not in config files:</p> <pre><code># .env\nSELLIA_WEB_AUTH=user:pass\nSELLIA_API_AUTH=apiuser:apipass\n</code></pre> <pre><code># sellia.yml\ntunnels:\n  web:\n    port: 3000\n    auth: ${SELLIA_WEB_AUTH}\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#4-rotate-credentials-regularly","level":3,"title":"4. Rotate Credentials Regularly","text":"<p>Change passwords periodically, especially after: - Team member changes - Suspected unauthorized access - Regular security cycles</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#5-use-https","level":3,"title":"5. Use HTTPS","text":"<p>Always use a tunnel server with HTTPS enabled for production to prevent credentials from being sent in plaintext:</p> <pre><code># The server should be configured with --https flag\nsellia server --https --domain yourdomain.com\n\n# Client will automatically use HTTPS URLs\nsellia http 3000 --auth user:pass --server https://yourdomain.com\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#6-log-access-attempts","level":3,"title":"6. Log Access Attempts","text":"<p>Monitor your server logs for authentication failures:</p> <pre><code># Check for failed auth attempts\ngrep \"401\" /var/log/sellia/access.log\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#use-cases","level":2,"title":"Use Cases","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#1-protected-webhook-testing","level":3,"title":"1. Protected Webhook Testing","text":"<p>Test webhooks without exposing them publicly:</p> <pre><code>sellia http 3000 --subdomain stripe-webhooks --auth stripe-test:secret-key\n</code></pre> <p>Only you can access the webhook endpoint for testing.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#2-private-api-development","level":3,"title":"2. Private API Development","text":"<p>Work on private APIs securely:</p> <pre><code>sellia http 4000 --subdomain private-api --auth dev-team:team-secret\n</code></pre> <p>Share credentials only with authorized team members.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#3-client-demos-with-access-control","level":3,"title":"3. Client Demos with Access Control","text":"<p>Give clients access to demos with control:</p> <pre><code>sellia http 5000 --subdomain demo-acme --auth acme-client:demo-pass\n</code></pre> <p>Provide unique credentials for each client.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#4-staging-environment-protection","level":3,"title":"4. Staging Environment Protection","text":"<p>Protect staging environments:</p> <pre><code>sellia http 3000 --subdomain staging-app --auth staging:staging-pass\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#5-internal-tools-access","level":3,"title":"5. Internal Tools Access","text":"<p>Securely access internal tools remotely:</p> <pre><code>sellia http 8080 --subdomain admin-tools --auth admin:admin-pass\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#401-unauthorized-error","level":3,"title":"\"401 Unauthorized\" Error","text":"<p>Check that: 1. Username and password are correct 2. No extra spaces in credentials: <code>user:pass</code> (not <code>user: pass</code>) 3. Credentials are properly URL-encoded if in URL</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#credentials-not-working","level":3,"title":"Credentials Not Working","text":"<p>Verify the auth string format:</p> <pre><code># Correct\nsellia http 8080 --auth user:pass\n\n# Incorrect (missing colon)\nsellia http 8080 --auth userpass\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#browser-keeps-prompting","level":3,"title":"Browser Keeps Prompting","text":"<p>If browser repeatedly prompts for credentials: 1. Check username/password are correct 2. Try in incognito/private mode 3. Clear browser cache for that site</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#api-clients-cant-authenticate","level":3,"title":"API Clients Can't Authenticate","text":"<p>Ensure credentials are base64-encoded in Authorization header:</p> <pre><code>// Correct\n'Authorization': 'Basic ' + btoa('user:pass')\n\n// Incorrect\n'Authorization': 'user:pass'\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#limitations","level":2,"title":"Limitations","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#security-considerations","level":3,"title":"Security Considerations","text":"<p>Basic authentication: - Sends credentials with every request (base64 encoded) - Should only be used over HTTPS - Credentials can be intercepted if not using TLS - No built-in session management</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#when-not-to-use-basic-auth","level":3,"title":"When Not to Use Basic Auth","text":"<p>Consider alternatives for: - High-security applications (use OAuth2, JWT) - Complex permission systems (use application-level auth) - Public APIs (use API keys instead) - Mobile apps (use token-based auth)</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#alternatives","level":2,"title":"Alternatives","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#application-level-authentication","level":3,"title":"Application-Level Authentication","text":"<p>Instead of tunnel auth, implement auth in your application:</p> <pre><code>// Express middleware\napp.use((req, res, next) =&gt; {\n  const auth = req.headers['authorization'];\n  if (!auth || !validateAuth(auth)) {\n    return res.status(401).send('Unauthorized');\n  }\n  next();\n});\n</code></pre> <p>This gives you more control but requires application changes.</p>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#token-based-authentication","level":3,"title":"Token-Based Authentication","text":"<p>Use API tokens or JWT:</p> <pre><code>const token = 'your-api-token';\nfetch('https://tunnel.sellia.me', {\n  headers: { 'X-API-Token': token }\n});\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#ip-whitelisting","level":3,"title":"IP Whitelisting","text":"<p>Restrict access by IP at the server level (configure in reverse proxy):</p> <pre><code># Nginx example\nallow 1.2.3.4;\ndeny all;\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#advanced-examples","level":2,"title":"Advanced Examples","text":"","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#example-1-multiple-authenticated-environments","level":3,"title":"Example 1: Multiple Authenticated Environments","text":"<pre><code>tunnels:\n  dev:\n    port: 3000\n    subdomain: dev-app\n    auth: dev-team:dev-pass\n\n  staging:\n    port: 3001\n    subdomain: staging-app\n    auth: qa-team:qa-pass\n\n  prod-mirror:\n    port: 3002\n    subdomain: prod-mirror\n    auth: admins:admin-pass\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#example-2-webhook-testing-with-services","level":3,"title":"Example 2: Webhook Testing with Services","text":"<pre><code># Test webhooks from multiple services\ntunnels:\n  stripe:\n    port: 3000\n    subdomain: stripe-test\n    auth: stripe-test:${STRIPE_TEST_TOKEN}\n\n  github:\n    port: 3001\n    subdomain: github-test\n    auth: github-test:${GITHUB_TEST_TOKEN}\n\n  slack:\n    port: 3002\n    subdomain: slack-test\n    auth: slack-test:${SLACK_TEST_TOKEN}\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#example-3-client-specific-credentials","level":3,"title":"Example 3: Client-Specific Credentials","text":"<pre><code># Generate unique credentials per client\nfor client in acme corp startup; do\n  password=$(openssl rand -base64 16)\n  echo \"$client:$password\" &gt;&gt; clients.txt\ndone\n\n# Use in config or CLI\nwhile read client pass; do\n  sellia http 3000 --subdomain demo-$client --auth $client:$pass &amp;\ndone &lt; clients.txt\n</code></pre>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>Subdomain Management - Custom URLs</li> <li>HTTP Tunnels - Basic tunnel usage</li> <li>Configuration File - Persistent config</li> <li>Deployment - Production deployment</li> </ul>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/basic-auth/#security-checklist","level":2,"title":"Security Checklist","text":"<p>Before using basic auth in production:</p> <ul> <li> Using HTTPS for all tunnels</li> <li> Strong, unique passwords (16+ characters)</li> <li> Credentials stored in environment variables</li> <li> Regular credential rotation</li> <li> Monitoring authentication logs</li> <li> Team knows security procedures</li> <li> Alternative auth methods considered</li> <li> Documented credential recovery process</li> </ul>","path":["User","Tunnels","Basic Authentication"],"tags":[]},{"location":"user/tunnels/http-tunnels/","level":1,"title":"HTTP Tunnels","text":"<p>HTTP tunnels are the primary way to expose local web servers to the internet through Sellia. This guide covers the basics of creating and managing HTTP tunnels.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#what-are-http-tunnels","level":2,"title":"What are HTTP Tunnels?","text":"<p>HTTP tunnels create a secure pathway from a public URL to your local development server. When requests come to your tunnel URL, Sellia forwards them to your local machine and returns the response to the requester.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#how-it-works","level":3,"title":"How It Works","text":"<pre><code>Internet Request → Sellia Server → Your Local Sellia Client → Your Local Server → Response → Back Through Tunnel\n</code></pre> <ol> <li>You create a tunnel from port 8080 on your machine</li> <li>Sellia provides a public URL like <code>http://abc123.domain.com</code></li> <li>When someone requests that URL, Sellia forwards the request to your local port 8080</li> <li>Your application responds, and Sellia sends it back</li> </ol>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#creating-your-first-http-tunnel","level":2,"title":"Creating Your First HTTP Tunnel","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#basic-tunnel","level":3,"title":"Basic Tunnel","text":"<p>The simplest tunnel forwards a local port to a random subdomain:</p> <pre><code>sellia http 8080\n</code></pre> <p>This will output: <pre><code>Sellia v0.x.x\nForwarding to localhost:8080\n\nPublic URL: http://xyz789.your-domain.com:3000 -&gt; localhost:8080\n\nInspector:  http://127.0.0.1:4040\n\nPress Ctrl+C to stop\n</code></pre></p> <p>Your local server on port 8080 is now accessible via the provided URL.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#tunnel-to-specific-server","level":3,"title":"Tunnel to Specific Server","text":"<p>By default, Sellia connects to the server configured in your config file (or <code>https://sellia.me</code>). To specify a different server:</p> <pre><code>sellia http 8080 --server ws://localhost:3000\n\n# Or for a remote server with HTTPS\nsellia http 8080 --server https://your-server.com\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#custom-local-host","level":3,"title":"Custom Local Host","text":"<p>If your local server is running on a different host (not localhost):</p> <pre><code>sellia http 8080 --host 192.168.1.100\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#common-use-cases","level":2,"title":"Common Use Cases","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#webhook-development","level":3,"title":"Webhook Development","text":"<p>Test webhooks from Stripe, GitHub, Slack, etc.:</p> <pre><code># Start your webhook handler\npython webhook_server.py &amp;\n\n# Create tunnel\nsellia http 5000 --subdomain webhooks\n\n# Use the URL in your webhook configuration\n# The URL format depends on your server configuration\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#api-development","level":3,"title":"API Development","text":"<p>Test mobile apps or frontend against a local API:</p> <pre><code># Start your API\nrails server -p 4000 &amp;\n\n# Create tunnel\nsellia http 4000 --subdomain api-dev\n\n# Your mobile app can now access the tunnel URL\n# URL format depends on server configuration\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#frontend-development","level":3,"title":"Frontend Development","text":"<p>Share your frontend work with clients or team members:</p> <pre><code># Start your dev server\nnpm run dev &amp;\n\n# Create tunnel\nsellia http 5173 --subdomain preview\n\n# Share the tunnel URL for review\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#microservices-testing","level":3,"title":"Microservices Testing","text":"<p>Test multiple services at once:</p> <pre><code># Terminal 1 - Service A\nsellia http 8001 --subdomain service-a &amp;\n\n# Terminal 2 - Service B\nsellia http 8002 --subdomain service-b &amp;\n\n# Terminal 3 - Service C\nsellia http 8003 --subdomain service-c &amp;\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#request-and-response-behavior","level":2,"title":"Request and Response Behavior","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#preserving-headers","level":3,"title":"Preserving Headers","text":"<p>Sellia preserves most HTTP headers through the tunnel, including: - <code>Content-Type</code> - <code>User-Agent</code> - <code>Authorization</code> - Custom headers</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#websocket-support","level":3,"title":"WebSocket Support","text":"<p>HTTP tunnels automatically support WebSocket connections. The tunnel upgrades connections seamlessly:</p> <pre><code># Your WebSocket server on port 8080\nsellia http 8080 --subdomain ws-server\n\n# Clients can connect to wss://ws-server.your-domain.com:3000\n</code></pre> <p>See WebSocket Support for more details.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#httpstls","level":3,"title":"HTTPS/TLS","text":"<p>The tunnel itself is encrypted using WebSocket over TLS. Your application can use HTTP or HTTPS locally - Sellia handles the secure connection to the server.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#connection-management","level":2,"title":"Connection Management","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#automatic-reconnection","level":3,"title":"Automatic Reconnection","text":"<p>Sellia automatically reconnects to the tunnel server if the connection drops, using linear backoff:</p> <ul> <li>Initial retry: 3 seconds</li> <li>Maximum retry: 30 seconds (after 10 attempts)</li> <li>Max attempts: 10</li> <li>Delay formula: <code>3s × attempt_number</code> (3s, 6s, 9s, 12s...)</li> </ul> <p>You'll see log messages like: <pre><code>[Sellia] Connection lost, reconnecting in 1s...\n[Sellia] Reconnected successfully\n</code></pre></p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#manual-reconnection","level":3,"title":"Manual Reconnection","text":"<p>If you need to force a reconnection, press <code>Ctrl+C</code> to stop the tunnel and restart it.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#connection-health","level":3,"title":"Connection Health","text":"<p>Monitor your connection status:</p> <pre><code># Watch the tunnel logs\nsellia http 8080 --server https://sellia.me\n</code></pre> <p>Healthy connections show: <pre><code>[Sellia] Tunnel established at: http://xyz789.your-domain.com:3000\n[Sellia] Connection active\n</code></pre></p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#url-formats","level":2,"title":"URL Formats","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#http-urls","level":3,"title":"HTTP URLs","text":"<pre><code>sellia http 8080 --server http://localhost:3000\n# Output: http://xyz789.localhost:3000\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#https-urls","level":3,"title":"HTTPS URLs","text":"<p>When using a server with HTTPS:</p> <pre><code>sellia http 8080 --server https://sellia.me\n# Output: https://xyz789.sellia.me\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#port-specification","level":3,"title":"Port Specification","text":"<p>The tunnel URL port depends on the server configuration: - Default: Port 3000 or 443 (for HTTPS) - Custom: Whatever port your server uses</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#tunnel-options","level":2,"title":"Tunnel Options","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#subdomain","level":3,"title":"Subdomain","text":"<p>Request a specific subdomain (if available):</p> <pre><code>sellia http 8080 --subdomain myapp\n# Output: http://myapp.your-domain.com:3000 (or https:// with --https server)\n</code></pre> <p>See Subdomain Management for details.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#basic-authentication","level":3,"title":"Basic Authentication","text":"<p>Protect your tunnel with username/password:</p> <pre><code>sellia http 8080 --auth admin:secret123\n</code></pre> <p>See Basic Auth for details.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#inspector-control","level":3,"title":"Inspector Control","text":"<p>Enable or disable the request inspector:</p> <pre><code># Enable inspector (default)\nsellia http 8080\n\n# Disable inspector\nsellia http 8080 --no-inspector\n\n# Custom inspector port\nsellia http 8080 --inspector-port 5000\n\n# Open inspector in browser\nsellia http 8080 --open\n</code></pre> <p>See Request Inspector for details.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#bandwidth","level":3,"title":"Bandwidth","text":"<p>Tunnel speed depends on: - Your local internet upload speed - Server bandwidth - Distance between you and the server - Number of concurrent connections</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#latency","level":3,"title":"Latency","text":"<p>Typical tunnel latency: - Same server: 5-15ms - Different regions: 50-200ms - International: 200-500ms</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#concurrent-connections","level":3,"title":"Concurrent Connections","text":"<p>Sellia handles multiple concurrent connections efficiently. For high-traffic scenarios: - Use a server close to your users - Enable server-side caching if applicable - Monitor performance using the inspector</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#connection-refused","level":3,"title":"\"Connection Refused\"","text":"<p>Your local server isn't running:</p> <pre><code># Check if port is in use\nlsof -i :8080\n\n# Start your server\npython -m http.server 8080\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#tunnel-not-accessible","level":3,"title":"Tunnel Not Accessible","text":"<ol> <li>Verify the tunnel is running</li> <li>Check the tunnel URL is correct</li> <li>Ensure your local server is responding</li> <li>Check firewall settings</li> </ol>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#slow-response-times","level":3,"title":"Slow Response Times","text":"<ol> <li>Check your internet connection</li> <li>Verify server location (use a closer server)</li> <li>Check if your local server is slow</li> <li>Monitor using the inspector</li> </ol>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#intermittent-connections","level":3,"title":"Intermittent Connections","text":"<ol> <li>Check your network stability</li> <li>Verify server uptime</li> <li>Check for rate limiting</li> <li>Review server logs</li> </ol>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#1-use-meaningful-subdomains","level":3,"title":"1. Use Meaningful Subdomains","text":"<p>Choose subdomains that identify your project:</p> <pre><code># Good\nsellia http 8080 --subdomain acme-webhooks\nsellia http 8080 --subdomain feature-auth-test\n\n# Avoid\nsellia http 8080 --subdomain test\nsellia http 8080 --subdomain temp\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#2-protect-sensitive-tunnels","level":3,"title":"2. Protect Sensitive Tunnels","text":"<p>Use basic authentication for sensitive applications:</p> <pre><code>sellia http 8080 --auth user:secure-password\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#3-monitor-requests","level":3,"title":"3. Monitor Requests","text":"<p>Use the inspector to debug issues:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#4-clean-up","level":3,"title":"4. Clean Up","text":"<p>Stop tunnels when not needed to free server resources:</p> <pre><code># Press Ctrl+C to stop the tunnel\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#5-use-configuration-files","level":3,"title":"5. Use Configuration Files","text":"<p>For persistent setups, use a configuration file:</p> <pre><code># sellia.yml\nserver: https://sellia.me\n\ntunnels:\n  web:\n    port: 8080\n    subdomain: myapp\n  api:\n    port: 4000\n    subdomain: myapp-api\n    auth: admin:secret\n</code></pre> <p>Start with:</p> <pre><code>sellia start\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>WebSocket Support - Real-time connections</li> <li>Basic Authentication - Secure your tunnels</li> <li>Subdomain Management - Custom URLs</li> <li>Request Inspector - Debug requests</li> <li>Multiple Tunnels - Manage several tunnels</li> </ul>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#examples","level":2,"title":"Examples","text":"","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#example-1-development-workflow","level":3,"title":"Example 1: Development Workflow","text":"<pre><code># Terminal 1: Start your app\nnpm run dev\n\n# Terminal 2: Create tunnel\nsellia http 5173 --subdomain dev-$(git rev-parse --short HEAD) --open\n\n# Share the URL with your team\n# Output: https://dev-abc1234.sellia.me\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#example-2-testing-multiple-environments","level":3,"title":"Example 2: Testing Multiple Environments","text":"<pre><code># Staging\nsellia http 3000 --subdomain myapp-staging &amp;\n\n# Production (local)\nsellia http 3000 --subdomain myapp-prod &amp;\n</code></pre>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/http-tunnels/#example-3-api-and-frontend","level":3,"title":"Example 3: API and Frontend","text":"<pre><code># API tunnel\nsellia http 4000 --subdomain api &amp;\n\n# Frontend tunnel\nsellia http 5173 --subdomain app &amp;\n</code></pre> <p>Now your frontend at <code>https://app.sellia.me</code> can talk to your API at <code>https://api.sellia.me</code>.</p>","path":["User","Tunnels","HTTP Tunnels"],"tags":[]},{"location":"user/tunnels/path-routing/","level":1,"title":"Path-Based Routing","text":"<p>Path-based routing is a Tier 2 feature that allows you to route multiple paths from a single tunnel URL to different local ports. This is useful for serving multiple services from a single subdomain.</p>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#overview","level":2,"title":"Overview","text":"<p>Path-based routing allows you to route multiple paths from a single tunnel URL to different local ports. This is useful for serving multiple services from a single subdomain.</p> <p>Important: This feature is only available via configuration file (<code>sellia.yml</code>), not via command-line flags.</p> <p>Instead of creating multiple tunnels (one for each service), you can define routes that forward requests based on the request path. For example:</p> <ul> <li><code>https://myapp.sellia.me/api</code> -&gt; localhost:8080</li> <li><code>https://myapp.sellia.me/web</code> -&gt; localhost:3000</li> <li><code>https://myapp.sellia.me/*</code> -&gt; localhost:3000 (fallback)</li> </ul>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#how-it-works","level":2,"title":"How It Works","text":"<p>The router matches paths in the order defined in your configuration:</p> <ol> <li>Exact matches: <code>/api</code> matches only <code>/api</code></li> <li>Prefix matches: <code>/api/*</code> matches <code>/api</code>, <code>/api/users</code>, <code>/api/v1/resources</code>, etc.</li> <li>Glob patterns: <code>/static/*</code> matches any path starting with <code>/static/</code></li> <li>Wildcard fallback: <code>/*</code> matches everything (usually defined last as a catch-all)</li> </ol>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#configuration","level":2,"title":"Configuration","text":"","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#command-line","level":3,"title":"Command Line","text":"<p>Note: Path routing is only available via configuration file, not command-line flags.</p> <p>To use path routing, define routes in <code>sellia.yml</code>:</p>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#config-file","level":3,"title":"Config File","text":"<p>Create a <code>sellia.yml</code> with route definitions:</p> <pre><code>tunnels:\n  myapp:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 8080\n        host: localhost\n      - path: /admin\n        port: 9000\n      - path: /static/*\n        port: 3001\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#examples","level":2,"title":"Examples","text":"","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#multi-service-application","level":3,"title":"Multi-Service Application","text":"<p>Route API and frontend from a single URL:</p> <pre><code>tunnels:\n  fullstack:\n    port: 3000\n    subdomain: myapp\n    routes:\n      - path: /api\n        port: 8080  # Backend API\n      - path: /graphql\n        port: 8080  # GraphQL endpoint\n      - path: /*\n        port: 3000  # Frontend (fallback)\n</code></pre> <p>Result: - <code>https://myapp.sellia.me/api/users</code> -&gt; localhost:8080 - <code>https://myapp.sellia.me/graphql</code> -&gt; localhost:8080 - <code>https://myapp.sellia.me/</code> -&gt; localhost:3000</p>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#microservices-architecture","level":3,"title":"Microservices Architecture","text":"<p>Route to multiple microservices:</p> <pre><code>tunnels:\n  gateway:\n    port: 3000\n    subdomain: gateway\n    routes:\n      - path: /users\n        port: 8001\n      - path: /orders\n        port: 8002\n      - path: /payments\n        port: 8003\n      - path: /auth\n        port: 8004\n      - path: /*\n        port: 3000\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#static-assets-server","level":3,"title":"Static Assets Server","text":"<p>Offload static files to a dedicated server:</p> <pre><code>tunnels:\n  app:\n    port: 3000\n    subdomain: app\n    routes:\n      - path: /static/*\n        port: 3001  # nginx or CDN\n      - path: /uploads/*\n        port: 3001\n      - path: /*\n        port: 3000  # Application server\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#pattern-matching","level":2,"title":"Pattern Matching","text":"","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#exact-match","level":3,"title":"Exact Match","text":"<pre><code>routes:\n  - path: /health\n    port: 9090\n</code></pre> <p>Matches only: <code>https://myapp.sellia.me/health</code></p>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#prefix-match","level":3,"title":"Prefix Match","text":"<pre><code>routes:\n  - path: /api/*\n  ```\nMatches:\n- `https://myapp.sellia.me/api`\n- `https://myapp.sellia.me/api/users`\n- `https://myapp.sellia.me/api/v1/resources`\n\n### Wildcard (Catch-All)\n\n```yaml\nroutes:\n  - path: /*\n    port: 3000\n</code></pre> <p>Matches all paths not matched by previous routes.</p>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#advanced-usage","level":2,"title":"Advanced Usage","text":"","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#custom-host-per-route","level":3,"title":"Custom Host per Route","text":"<p>Route to different hosts:</p> <pre><code>tunnels:\n  multi-host:\n    port: 3000\n    subdomain: app\n    routes:\n      - path: /api\n        port: 8080\n        host: api-server.local  # Custom host\n      - path: /admin\n        port: 9000\n        host: admin.local\n      - path: /*\n        port: 3000\n        host: localhost  # Default\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#path-based-microfrontends","level":3,"title":"Path-Based Microfrontends","text":"<pre><code>tunnels:\n  microfrontends:\n    port: 3000\n    subdomain: app\n    routes:\n      - path: /dashboard\n        port: 3001  # Dashboard app\n      - path: /settings\n        port: 3002  # Settings app\n      - path: /billing\n        port: 3003  # Billing app\n      - path: /*\n        port: 3000  # Shell app\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#route-order-matters","level":3,"title":"Route Order Matters","text":"<p>Define more specific routes before general ones:</p> <pre><code>routes:\n  - path: /api/v2\n    port: 8081  # Must be first\n  - path: /api/*\n    port: 8080  # Catches everything else under /api\n  - path: /*\n    port: 3000  # Catch-all fallback\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#use-fallback-for-root","level":3,"title":"Use Fallback for Root","text":"<p>Always define a catch-all route for unmatched paths:</p> <pre><code>routes:\n  - path: /api\n    port: 8080\n  - path: /admin\n    port: 9000\n  - path: /*\n    port: 3000  # Default fallback\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#test-your-routes","level":3,"title":"Test Your Routes","text":"<p>Use curl to verify routing:</p> <pre><code># Test API route\ncurl https://myapp.sellia.me/api/users\n\n# Test admin route\ncurl https://myapp.sellia.me/admin/settings\n\n# Test fallback\ncurl https://myapp.sellia.me/\n</code></pre>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#limitations","level":2,"title":"Limitations","text":"<ul> <li>Routes are evaluated in order (first match wins)</li> <li>Path matching is prefix-based with glob patterns (<code>/api/*</code> matches <code>/api</code> and anything under <code>/api</code>)</li> <li>No regex support</li> <li>WebSocket connections work with path routing</li> <li>Headers and query strings don't affect routing</li> <li>Only available via configuration file (not CLI flags)</li> <li>Routes match exact path or prefix pattern:</li> <li>Exact: <code>/api</code> matches only <code>/api</code></li> <li>Glob: <code>/api/*</code> matches <code>/api</code>, <code>/api/users</code>, <code>/api/v1/resources</code>, etc.</li> <li>If no routes match and no fallback port exists, returns 502 \"No route matched path\"</li> </ul>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#route-not-matching","level":3,"title":"Route Not Matching","text":"<p>If a route isn't working:</p> <ol> <li>Check the route order (specific routes first)</li> <li>Verify the path includes leading slash: <code>/api</code> not <code>api</code></li> <li>Check for trailing slashes (they matter): <code>/api/</code> != <code>/api</code></li> <li>Use the inspector to see which route matched</li> </ol>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#all-requests-go-to-fallback","level":3,"title":"All Requests Go to Fallback","text":"<p>This usually means:</p> <ol> <li>A catch-all (<code>/*</code>) is defined before specific routes</li> <li>Path doesn't match any pattern (check typos)</li> <li>Missing leading slash in path definition</li> </ol>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#websocket-issues","level":3,"title":"WebSocket Issues","text":"<p>WebSocket connections work with path routing, but ensure:</p> <ol> <li>The backend handles the WebSocket upgrade</li> <li>No HTTP/2 interference between proxy and backend</li> <li>Long-lived connection timeouts are configured</li> </ol>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/path-routing/#see-also","level":2,"title":"See Also","text":"<ul> <li>Configuration - Full config reference</li> <li>Inspector - Debug routing issues</li> <li>API Keys - Secure your tunnels</li> </ul>","path":["User","Tunnels","Path-Based Routing"],"tags":[]},{"location":"user/tunnels/subdomains/","level":1,"title":"Subdomain Management","text":"<p>Custom subdomains make your tunnel URLs memorable and professional. Instead of random subdomains like <code>abc123.sellia.me</code>, use meaningful names like <code>myapp.sellia.me</code> or <code>project-staging.sellia.me</code>.</p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#what-are-subdomains","level":2,"title":"What are Subdomains?","text":"<p>Sellia routes tunnels using subdomains. When you create a tunnel, you get:</p> <pre><code>&lt;SUBDOMAIN&gt;.&lt;DOMAIN&gt;.&lt;PORT&gt;\n</code></pre> <p>For example: <code>myapp.sellia.me</code> or <code>api-staging.localhost:3000</code></p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#default-behavior","level":3,"title":"Default Behavior","text":"<p>Without specifying a subdomain, Sellia assigns a random 8-character hex string:</p> <pre><code>sellia http 8080\n# Output: https://a1b2c3d4.your-domain.com\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#requesting-custom-subdomains","level":2,"title":"Requesting Custom Subdomains","text":"<p>Use the <code>--subdomain</code> flag to request a specific subdomain:</p> <pre><code>sellia http 8080 --subdomain myapp\n# Output: http://myapp.your-domain.com:3000 (or https://myapp.your-domain.com if server has --https)\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-requirements","level":3,"title":"Subdomain Requirements","text":"<p>Valid subdomains: - Length: 3-63 characters - Characters: Lowercase letters, numbers, hyphens - Format: Must start and end with letter or number - No: Spaces, special characters, or consecutive hyphens</p> <p>Examples: <pre><code>✅ myapp\n✅ api-v2\n✅ project123\n✅ test-environment\n\n❌ MyApp (uppercase)\n❡ api_v2 (underscores)\n❡ -test (starts with hyphen)\n❡ test- (ends with hyphen)\n❡ api--v2 (consecutive hyphens)\n</code></pre></p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-availability","level":2,"title":"Subdomain Availability","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#first-come-first-served","level":3,"title":"First-Come, First-Served","text":"<p>Subdomains are assigned on a first-come, first-served basis:</p> <pre><code># User 1 creates tunnel\nsellia http 8080 --subdomain myapp\n# Success: http://myapp.your-domain.com:3000\n\n# User 2 tries same subdomain\nsellia http 8080 --subdomain myapp\n# Error: Subdomain 'myapp' is not available\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#conflict-resolution","level":3,"title":"Conflict Resolution","text":"<p>If your requested subdomain is taken: 1. Sellia returns an error and closes the connection 2. Client will not reconnect (to prevent infinite loops) 3. Try a different subdomain or use a naming convention</p> <pre><code># Try variations\nsellia http 8080 --subdomain myapp-backup\nsellia http 8080 --subdomain myapp-v2\nsellia http 8080 --subdomain myapp-test\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#naming-strategies","level":2,"title":"Naming Strategies","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#1-project-based","level":3,"title":"1. Project-Based","text":"<p>Name subdomains after your project:</p> <pre><code>sellia http 3000 --subdomain blog-cms\nsellia http 4000 --subdomain blog-api\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#2-environment-based","level":3,"title":"2. Environment-Based","text":"<p>Include the environment:</p> <pre><code>sellia http 3000 --subdomain app-dev\nsellia http 3000 --subdomain app-staging\nsellia http 3000 --subdomain app-prod-like\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#3-feature-based","level":3,"title":"3. Feature-Based","text":"<p>Name after specific features:</p> <pre><code>sellia http 3000 --subdomain auth-service\nsellia http 4000 --subdomain payment-gateway\nsellia http 5000 --subdomain notification-system\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#4-user-based","level":3,"title":"4. User-Based","text":"<p>For personal tunnels:</p> <pre><code>sellia http 3000 --subdomain john-dev\nsellia http 3000 --subdomain sarah-test\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#5-branch-based","level":3,"title":"5. Branch-Based","text":"<p>For Git branch workflows:</p> <pre><code># Current git branch as subdomain\nBRANCH=$(git rev-parse --abbrev-ref HEAD)\nsellia http 3000 --subdomain \"app-$BRANCH\"\n\n# Or short commit hash\nHASH=$(git rev-parse --short HEAD)\nsellia http 3000 --subdomain \"app-$HASH\"\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#configuration-file","level":2,"title":"Configuration File","text":"<p>Define subdomains in <code>sellia.yml</code>:</p> <pre><code>server: https://sellia.me\n\ntunnels:\n  # Multiple services\n  web:\n    port: 3000\n    subdomain: myapp\n\n  api:\n    port: 4000\n    subdomain: myapp-api\n\n  admin:\n    port: 5000\n    subdomain: myapp-admin\n\n  # Multiple environments\n  staging:\n    port: 3000\n    subdomain: app-staging\n\n  dev:\n    port: 3001\n    subdomain: app-dev\n</code></pre> <p>Start all tunnels:</p> <pre><code>sellia start\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#multiple-tunnels-with-subdomains","level":2,"title":"Multiple Tunnels with Subdomains","text":"<p>Run multiple tunnels simultaneously, each with its own subdomain:</p> <pre><code># Terminal 1\nsellia http 3000 --subdomain frontend --server https://sellia.me &amp;\n\n# Terminal 2\nsellia http 4000 --subdomain backend --server https://sellia.me &amp;\n\n# Terminal 3\nsellia http 5000 --subdatabase --server https://sellia.me &amp;\n</code></pre> <p>Now you have: - <code>https://frontend.sellia.me</code> → Frontend app - <code>https://backend.sellia.me</code> → API backend - <code>https://database.sellia.me</code> → Database interface</p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#wildcard-subdomains","level":2,"title":"Wildcard Subdomains","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#for-self-hosted-servers","level":3,"title":"For Self-Hosted Servers","text":"<p>When running your own server, configure DNS to accept all subdomains:</p> <pre><code>*.yourdomain.com  →  YOUR_SERVER_IP\n</code></pre> <p>Now any subdomain works: - <code>app1.yourdomain.com</code> - <code>app2.yourdomain.com</code> - <code>test-environment.yourdomain.com</code></p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#cloudflare-configuration","level":3,"title":"Cloudflare Configuration","text":"<p>For Cloudflare-hosted domains:</p> <ol> <li>Add domain to Cloudflare</li> <li>Go to DNS → Records</li> <li>Add CNAME record:</li> <li>Name: <code>*</code></li> <li>Target: <code>your-server.com</code></li> <li>Proxy: Enabled (orange cloud)</li> </ol>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#url-formats","level":2,"title":"URL Formats","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#http-urls","level":3,"title":"HTTP URLs","text":"<pre><code>sellia http 8080 --subdomain myapp --server http://localhost:3000\n# Output: http://myapp.localhost:3000\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#https-urls","level":3,"title":"HTTPS URLs","text":"<pre><code>sellia http 8080 --subdomain myapp --server https://sellia.me\n# Output: https://myapp.sellia.me\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#with-custom-ports","level":3,"title":"With Custom Ports","text":"<p>If your server uses a non-standard port:</p> <pre><code>sellia http 8080 --subdomain myapp --server https://sellia.me:8443\n# Output: https://myapp.sellia.me:8443\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-best-practices","level":2,"title":"Subdomain Best Practices","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#1-use-meaningful-names","level":3,"title":"1. Use Meaningful Names","text":"<p>Choose subdomains that identify the purpose:</p> <pre><code># Good\nsellia http 3000 --subdomain stripe-webhook-test\nsellia http 4000 --subdomain github-integration-dev\n\n# Less clear\nsellia http 3000 --subdomain test1\nsellia http 4000 --subdomain temp\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#2-consistent-naming-convention","level":3,"title":"2. Consistent Naming Convention","text":"<p>Use a consistent pattern:</p> <pre><code># Pattern: &lt;app&gt;-&lt;environment&gt;-&lt;type&gt;\nsellia http 3000 --subdomain shopify-staging-webhook\nsellia http 4000 --subdomain shopify-staging-api\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#3-include-environment","level":3,"title":"3. Include Environment","text":"<p>Always specify the environment:</p> <pre><code># Production-like\nsellia http 3000 --subdomain app-staging\nsellia http 3000 --subdomain app-dev\n\n# Avoid confusion\nsellia http 3000 --subdomain app  # Which environment?\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#4-avoid-reserved-words","level":3,"title":"4. Avoid Reserved Words","text":"<p>Some words might be reserved for system use:</p> <pre><code># Potentially problematic\nwww\nmail\nftp\nlocalhost\napi (if reserved for main API)\nadmin (if reserved)\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#5-use-hyphens-for-readability","level":3,"title":"5. Use Hyphens for Readability","text":"<p>Separate words with hyphens:</p> <pre><code># Good\nmyapp-staging-api\nwebhook-tester-v2\n\n# Harder to read\nmyappstagingapi\nwebhooktesterv2\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#6-keep-it-short","level":3,"title":"6. Keep It Short","text":"<p>Shorter subdomains are easier to remember:</p> <pre><code># Good\napp-dev\napi-test\n\n# Long\napplication-development-environment\napi-testing-server\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#dynamic-subdomains","level":2,"title":"Dynamic Subdomains","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#based-on-git-branch","level":3,"title":"Based on Git Branch","text":"<pre><code># Automatically use current branch\nBRANCH=$(git rev-parse --abbrev-ref HEAD | sed 's/sl_/g/' | tr '/' '-')\nsellia http 3000 --subdomain \"app-$BRANCH\"\n\n# Examples:\n# feature/new-ui → app-feature-new-ui\n# bugfix/login-issue → app-bugfix-login-issue\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#based-on-environment-variable","level":3,"title":"Based on Environment Variable","text":"<pre><code># Use environment-specific subdomain\nsellia http 3000 --subdomain \"app-${RAILS_ENV:-development}\"\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#based-on-timestamp","level":3,"title":"Based on Timestamp","text":"<pre><code># Include date or timestamp\nDATE=$(date +%Y%m%d)\nsellia http 3000 --subdomain \"deploy-$DATE\"\n# Output: deploy-20241230\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-validation","level":2,"title":"Subdomain Validation","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#check-subdomain-availability","level":3,"title":"Check Subdomain Availability","text":"<p>Before creating a tunnel, check if the subdomain is available:</p> <pre><code># Try to access the subdomain\ncurl -I https://myapp.sellia.me\n\n# If 404 or connection refused, likely available\n# If 200 or similar, subdomain is in use\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#dns-verification","level":3,"title":"DNS Verification","text":"<p>Verify DNS is configured correctly:</p> <pre><code>dig myapp.yourdomain.com\nnslookup myapp.yourdomain.com\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-already-taken","level":3,"title":"Subdomain Already Taken","text":"<p>Error: \"Subdomain already in use\"</p> <p>Solutions: 1. Use a different subdomain 2. Add a suffix: <code>-v2</code>, <code>-backup</code>, <code>-alt</code> 3. Include your name/initials</p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-not-resolving","level":3,"title":"Subdomain Not Resolving","text":"<p>If your subdomain doesn't work:</p> <ol> <li> <p>Verify DNS is configured:    <pre><code>dig yourdomain.com\ndig *.yourdomain.com\n</code></pre></p> </li> <li> <p>Check server is running:    <pre><code>sellia-server --domain yourdomain.com\n</code></pre></p> </li> <li> <p>Ensure wildcard DNS is set up</p> </li> </ol>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#mixed-case-issues","level":3,"title":"Mixed Case Issues","text":"<p>Subdomains are case-insensitive but should be lowercase:</p> <pre><code># Sellia converts to lowercase\nsellia http 3000 --subdomain MyApp\n# Actually creates: myapp.sellia.me\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#examples","level":2,"title":"Examples","text":"","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#example-1-full-stack-application","level":3,"title":"Example 1: Full-Stack Application","text":"<pre><code>tunnels:\n  # Frontend\n  web:\n    port: 3000\n    subdomain: shopify-staging-web\n\n  # API\n  api:\n    port: 4000\n    subdomain: shopify-staging-api\n\n  # Webhook receiver\n  webhooks:\n    port: 5000\n    subdomain: shopify-staging-webhooks\n    auth: webhook-tester:secret\n</code></pre> <p>Access: - <code>https://shopify-staging-web.sellia.me</code> - Frontend - <code>https://shopify-staging-api.sellia.me</code> - API - <code>https://shopify-staging-webhooks.sellia.me</code> - Webhooks</p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#example-2-developer-workflow","level":3,"title":"Example 2: Developer Workflow","text":"<pre><code># Automatically use branch name\ncreate_tunnel() {\n  BRANCH=$(git rev-parse --abbrev-ref HEAD)\n  SAFE_NAME=$(echo \"$BRANCH\" | tr '/' '-' | tr '[:upper:]' '[:lower:]')\n  sellia http 3000 --subdomain \"app-$SAFE_NAME\" --server https://sellia.me\n}\n\n# Usage\ngit checkout feature/new-dashboard\ncreate_tunnel\n# Creates: app-feature-new-dashboard.sellia.me\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#example-3-client-demos","level":3,"title":"Example 3: Client Demos","text":"<pre><code># Unique subdomain per client\nCLIENTS=(\"acme\" \"globex\" \"initech\")\n\nfor client in \"${CLIENTS[@]}\"; do\n  sellia http 3000 \\\n    --subdomain \"demo-$client\" \\\n    --auth \"$client-client:$(openssl rand -base64 16)\" \\\n    --server https://sellia.me &amp;\ndone\n</code></pre> <p>Creates: - <code>demo-acme.sellia.me</code> (with client-specific auth) - <code>demo-globex.sellia.me</code> - <code>demo-initech.sellia.me</code></p>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#example-4-microservices","level":3,"title":"Example 4: Microservices","text":"<pre><code># Microservice architecture\ntunnels:\n  # Services\n  user-service:\n    port: 8001\n    subdomain: svc-users\n\n  auth-service:\n    port: 8002\n    subdomain: svc-auth\n\n  payment-service:\n    port: 8003\n    subdomain: svc-payments\n\n  notification-service:\n    port: 8004\n    subdomain: svc-notifications\n\n  # Frontends\n  web-app:\n    port: 3000\n    subdomain: app-web\n\n  admin-app:\n    port: 3001\n    subdomain: app-admin\n</code></pre>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>HTTP Tunnels - Basic tunnel usage</li> <li>Basic Authentication - Secure tunnels</li> <li>Configuration File - Multiple tunnels</li> <li>Self-Hosting - Your own server</li> </ul>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#quick-reference","level":2,"title":"Quick Reference","text":"Command Description <code>sellia http 8080</code> Random subdomain <code>sellia http 8080 --subdomain myapp</code> Custom subdomain <code>--subdomain app-dev</code> Environment-specific <code>--subdomain svc-name</code> Service naming <code>--subdomain demo-client</code> Client-specific","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/subdomains/#subdomain-checklist","level":2,"title":"Subdomain Checklist","text":"<p>Before creating a production tunnel:</p> <ul> <li> Subdomain is meaningful and descriptive</li> <li> Follows naming convention</li> <li> Includes environment identifier</li> <li> Checked for availability</li> <li> DNS is properly configured</li> <li> Documented in team wiki</li> <li> Added to monitoring/config</li> <li> Considered future conflicts</li> </ul>","path":["User","Tunnels","Subdomain Management"],"tags":[]},{"location":"user/tunnels/websockets/","level":1,"title":"WebSocket Support","text":"<p>Sellia provides full WebSocket support through HTTP tunnels, allowing real-time bidirectional communication between clients and your local WebSocket servers.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#how-websocket-tunnels-work","level":2,"title":"How WebSocket Tunnels Work","text":"<p>When a client initiates a WebSocket connection through a Sellia tunnel:</p> <pre><code>Client → Sellia Server → WebSocket Upgrade → Your Local WebSocket Server\n</code></pre> <ol> <li>Client sends HTTP request with <code>Upgrade: websocket</code> header</li> <li>Sellia forwards the upgrade request to your local server</li> <li>Your server accepts the WebSocket connection</li> <li>Bidirectional communication flows through the tunnel</li> </ol>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#creating-websocket-tunnels","level":2,"title":"Creating WebSocket Tunnels","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#basic-websocket-tunnel","level":3,"title":"Basic WebSocket Tunnel","text":"<p>Create a tunnel to your WebSocket server just like any HTTP tunnel:</p> <pre><code>sellia http 8080 --subdomain ws-app\n</code></pre> <p>Your WebSocket server is now accessible at the tunnel URL (format depends on server configuration): <pre><code>wss://ws-app.your-domain.com  (if server has --https)\nws://ws-app.your-domain.com:3000  (otherwise)\n</code></pre></p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#example-nodejs-websocket-server","level":3,"title":"Example: Node.js WebSocket Server","text":"<pre><code>// ws-server.js\nconst WebSocket = require('ws');\n\nconst wss = new WebSocket.Server({ port: 8080 });\n\nwss.on('connection', (ws) =&gt; {\n  console.log('Client connected');\n\n  ws.on('message', (message) =&gt; {\n    console.log('Received:', message.toString());\n    ws.send(`Echo: ${message}`);\n  });\n\n  ws.on('close', () =&gt; {\n    console.log('Client disconnected');\n  });\n});\n\nconsole.log('WebSocket server running on port 8080');\n</code></pre> <p>Start the server:</p> <pre><code>node ws-server.js\n</code></pre> <p>Create the tunnel:</p> <pre><code>sellia http 8080 --subdomain ws-app\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#example-python-websocket-server","level":3,"title":"Example: Python WebSocket Server","text":"<pre><code># ws-server.py\nimport asyncio\nimport websockets\n\nasync def echo(websocket):\n    print(\"Client connected\")\n    try:\n        async for message in websocket:\n            print(f\"Received: {message}\")\n            await websocket.send(f\"Echo: {message}\")\n    finally:\n        print(\"Client disconnected\")\n\nasync def main():\n    async with websockets.serve(echo, \"localhost\", 8080):\n        print(\"WebSocket server running on port 8080\")\n        await asyncio.Future()\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>Start the server:</p> <pre><code>python ws-server.py\n</code></pre> <p>Create the tunnel:</p> <pre><code>sellia http 8080 --subdomain ws-app\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#connecting-to-websocket-tunnels","level":2,"title":"Connecting to WebSocket Tunnels","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#javascript-client","level":3,"title":"JavaScript Client","text":"<pre><code>const ws = new WebSocket('wss://ws-app.sellia.me');\n\nws.onopen = () =&gt; {\n  console.log('Connected to WebSocket server');\n  ws.send('Hello, Server!');\n};\n\nws.onmessage = (event) =&gt; {\n  console.log('Received:', event.data);\n};\n\nws.onerror = (error) =&gt; {\n  console.error('WebSocket error:', error);\n};\n\nws.onclose = () =&gt; {\n  console.log('WebSocket connection closed');\n};\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#python-client","level":3,"title":"Python Client","text":"<pre><code>import asyncio\nimport websockets\n\nasync def test_websocket():\n    uri = \"wss://ws-app.sellia.me\"\n    async with websockets.connect(uri) as websocket:\n        print(\"Connected to WebSocket server\")\n\n        await websocket.send(\"Hello, Server!\")\n        response = await websocket.recv()\n        print(f\"Received: {response}\")\n\nasyncio.run(test_websocket())\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#browser-client","level":3,"title":"Browser Client","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;WebSocket Test&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;WebSocket Test&lt;/h1&gt;\n    &lt;button onclick=\"connect()\"&gt;Connect&lt;/button&gt;\n    &lt;button onclick=\"sendMessage()\"&gt;Send Message&lt;/button&gt;\n    &lt;div id=\"output\"&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n        let ws;\n\n        function connect() {\n            ws = new WebSocket('wss://ws-app.sellia.me');\n\n            ws.onopen = () =&gt; {\n                log('Connected to WebSocket server');\n            };\n\n            ws.onmessage = (event) =&gt; {\n                log(`Received: ${event.data}`);\n            };\n\n            ws.onerror = (error) =&gt; {\n                log(`Error: ${error}`);\n            };\n\n            ws.onclose = () =&gt; {\n                log('WebSocket connection closed');\n            };\n        }\n\n        function sendMessage() {\n            if (ws &amp;&amp; ws.readyState === WebSocket.OPEN) {\n                ws.send('Hello, Server!');\n            }\n        }\n\n        function log(message) {\n            const output = document.getElementById('output');\n            output.innerHTML += `&lt;p&gt;${message}&lt;/p&gt;`;\n        }\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#websocket-features","level":2,"title":"WebSocket Features","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#automatic-upgrade-handling","level":3,"title":"Automatic Upgrade Handling","text":"<p>Sellia automatically handles the WebSocket upgrade protocol:</p> <ul> <li>Properly forwards <code>Upgrade: websocket</code> headers</li> <li>Maintains the <code>Connection: Upgrade</code> header</li> <li>Passes through <code>Sec-WebSocket-Key</code> and other handshake headers</li> <li>Supports WebSocket subprotocols</li> </ul>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#full-duplex-communication","level":3,"title":"Full-Duplex Communication","text":"<p>Both client and server can send messages at any time:</p> <pre><code>// Server can push messages anytime\nsetInterval(() =&gt; {\n  ws.send(`Server time: ${new Date().toISOString()}`);\n}, 1000);\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#connection-persistence","level":3,"title":"Connection Persistence","text":"<p>WebSocket connections remain open as long as: - The client maintains the connection - Your local server is running - The Sellia tunnel is active</p> <p>If the connection drops, the client should reconnect:</p> <pre><code>let reconnectAttempts = 0;\nconst maxReconnectAttempts = 5;\n\nfunction connect() {\n  ws = new WebSocket('wss://ws-app.sellia.me');\n\n  ws.onclose = () =&gt; {\n    if (reconnectAttempts &lt; maxReconnectAttempts) {\n      reconnectAttempts++;\n      setTimeout(() =&gt; connect(), 1000 * reconnectAttempts);\n    }\n  };\n\n  ws.onopen = () =&gt; {\n    reconnectAttempts = 0;\n  };\n}\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#use-cases","level":2,"title":"Use Cases","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#1-real-time-chat","level":3,"title":"1. Real-Time Chat","text":"<pre><code># Start chat server\nnode chat-server.js\n\n# Create tunnel\nsellia http 3000 --subdomain chat-app\n</code></pre> <p>Now users can connect via WebSocket to your local chat server from anywhere.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#2-live-collaboration","level":3,"title":"2. Live Collaboration","text":"<pre><code># Start collaborative editing server\nnode collab-server.js\n\n# Create tunnel\nsellia http 4000 --subdomain collab-edit\n</code></pre> <p>Multiple users can collaborate in real-time through the tunnel.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#3-live-data-streaming","level":3,"title":"3. Live Data Streaming","text":"<pre><code># Start data streaming server\npython stream-server.py\n\n# Create tunnel\nsellia http 5000 --subdomain live-data\n</code></pre> <p>Stream real-time data (sensor readings, stock prices, etc.) to clients.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#4-online-gaming","level":3,"title":"4. Online Gaming","text":"<pre><code># Start game server\nnode game-server.js\n\n# Create tunnel\nsellia http 8080 --subdomain multiplayer-game\n</code></pre> <p>Enable multiplayer gameplay with WebSocket-based game server.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#5-real-time-notifications","level":3,"title":"5. Real-Time Notifications","text":"<pre><code># Start notification server\nnode notify-server.js\n\n# Create tunnel\nsellia http 6000 --subdomain push-notifications\n</code></pre> <p>Push real-time notifications to connected clients.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#websocket-inspector","level":2,"title":"WebSocket Inspector","text":"<p>The Sellia inspector can monitor WebSocket connections:</p> <pre><code>sellia http 8080 --open --server https://sellia.me\n</code></pre> <p>View at <code>http://localhost:4040</code>: - See WebSocket upgrade requests - Monitor connection lifecycle - View message count and timing</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#monitoring-websocket-messages","level":3,"title":"Monitoring WebSocket Messages","text":"<p>While Sellia shows connection details, actual WebSocket message content isn't logged (to avoid overhead). Use your server's logging for message debugging.</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#configuration-options","level":2,"title":"Configuration Options","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#subprotocols","level":3,"title":"Subprotocols","text":"<p>Specify WebSocket subprotocols if needed:</p> <pre><code>const ws = new WebSocket('wss://ws-app.sellia.me', ['chat', 'superchat']);\n</code></pre> <p>Your server will receive the protocol in the handshake:</p> <pre><code>wss.on('connection', (ws, request) =&gt; {\n  const protocol = request.headers['sec-websocket-protocol'];\n  console.log('Subprotocol:', protocol);\n});\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#custom-headers","level":3,"title":"Custom Headers","text":"<p>WebSocket doesn't support custom headers in the initial request, but you can send them in the first message:</p> <pre><code>ws.onopen = () =&gt; {\n  ws.send(JSON.stringify({\n    type: 'auth',\n    token: 'your-token'\n  }));\n};\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#performance-considerations","level":2,"title":"Performance Considerations","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#connection-limits","level":3,"title":"Connection Limits","text":"<ul> <li>Each WebSocket connection uses a persistent connection</li> <li>Monitor active connections in the inspector</li> <li>Consider connection pooling for many clients</li> </ul>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#bandwidth-usage","level":3,"title":"Bandwidth Usage","text":"<p>WebSocket tunnels use minimal overhead: - No HTTP headers per message - Binary message framing is efficient - Compression can be enabled at application level</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#latency","level":3,"title":"Latency","text":"<p>WebSocket tunnel latency is typically: - Same as HTTP: 5-200ms depending on location - No additional overhead for established connections - Suitable for real-time applications</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#troubleshooting","level":2,"title":"Troubleshooting","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#connection-not-upgrading","level":3,"title":"Connection Not Upgrading","text":"<p>If WebSocket connections don't upgrade:</p> <ol> <li>Check your server logs for errors</li> <li>Verify the tunnel is running:    <pre><code>sellia http 8080 --open\n</code></pre></li> <li>Inspect the upgrade request in the inspector</li> <li>Ensure no intermediate proxy blocks WebSocket</li> </ol>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#frequent-disconnections","level":3,"title":"Frequent Disconnections","text":"<p>If connections drop frequently:</p> <ol> <li>Check your internet connection stability</li> <li>Verify server uptime and logs</li> <li>Implement client-side reconnection logic</li> <li>Check for rate limiting</li> </ol>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#messages-not-arriving","level":3,"title":"Messages Not Arriving","text":"<p>If messages don't reach their destination:</p> <ol> <li>Verify both ends are connected</li> <li>Check server logs for errors</li> <li>Ensure message format is correct</li> <li>Test with a simple echo server first</li> </ol>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#high-latency","level":3,"title":"High Latency","text":"<p>If WebSocket latency is high:</p> <ol> <li>Use a geographically closer server</li> <li>Check your network speed</li> <li>Monitor server performance</li> <li>Consider message batching if appropriate</li> </ol>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#best-practices","level":2,"title":"Best Practices","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#1-implement-heartbeats","level":3,"title":"1. Implement Heartbeats","text":"<p>Keep connections alive and detect dead connections:</p> <pre><code>// Server\nconst heartbeatInterval = setInterval(() =&gt; {\n  ws.isAlive = false;\n  ws.ping();\n}, 30000);\n\nws.on('pong', () =&gt; {\n  ws.isAlive = true;\n});\n\n// Client\nsetInterval(() =&gt; {\n  if (ws.readyState === WebSocket.OPEN) {\n    ws.send(JSON.stringify({ type: 'ping' }));\n  }\n}, 30000);\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#2-handle-reconnection","level":3,"title":"2. Handle Reconnection","text":"<p>Always implement reconnection logic:</p> <pre><code>let ws;\nconst connect = () =&gt; {\n  ws = new WebSocket('wss://ws-app.sellia.me');\n  ws.onclose = () =&gt; setTimeout(connect, 1000);\n};\nconnect();\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#3-use-message-queues","level":3,"title":"3. Use Message Queues","text":"<p>Buffer messages when disconnected:</p> <pre><code>const messageQueue = [];\n\nfunction sendOrQueue(message) {\n  if (ws &amp;&amp; ws.readyState === WebSocket.OPEN) {\n    ws.send(message);\n  } else {\n    messageQueue.push(message);\n  }\n}\n\nws.onopen = () =&gt; {\n  messageQueue.forEach(msg =&gt; ws.send(msg));\n  messageQueue.length = 0;\n};\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#4-monitor-connections","level":3,"title":"4. Monitor Connections","text":"<p>Use the inspector to monitor connection health:</p> <pre><code>sellia http 8080 --open\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#5-graceful-shutdown","level":3,"title":"5. Graceful Shutdown","text":"<p>Handle connection closure properly:</p> <pre><code>window.addEventListener('beforeunload', () =&gt; {\n  if (ws) {\n    ws.close(1000, 'Page closing');\n  }\n});\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#security-considerations","level":2,"title":"Security Considerations","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#authentication","level":3,"title":"Authentication","text":"<p>Implement authentication after connection:</p> <pre><code>ws.onopen = () =&gt; {\n  ws.send(JSON.stringify({\n    type: 'auth',\n    token: getUserToken()\n  }));\n};\n\n// Server\nws.on('message', (data) =&gt; {\n  const msg = JSON.parse(data);\n  if (msg.type === 'auth') {\n    if (validateToken(msg.token)) {\n      ws.authenticated = true;\n    } else {\n      ws.close(4001, 'Authentication failed');\n    }\n  }\n});\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#origin-validation","level":3,"title":"Origin Validation","text":"<p>Validate the <code>Origin</code> header on the server:</p> <pre><code>const allowedOrigins = ['https://yourdomain.com'];\n\nwss.on('connection', (ws, request) =&gt; {\n  const origin = request.headers['origin'];\n  if (!allowedOrigins.includes(origin)) {\n    ws.close(4003, 'Origin not allowed');\n    return;\n  }\n  // ... rest of connection logic\n});\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#rate-limiting","level":3,"title":"Rate Limiting","text":"<p>Implement message rate limiting to prevent abuse:</p> <pre><code>const rateLimiter = new Map();\n\nwss.on('connection', (ws) =&gt; {\n  const clientId = generateId();\n  rateLimiter.set(clientId, { count: 0, lastReset: Date.now() });\n\n  ws.on('message', () =&gt; {\n    const client = rateLimiter.get(clientId);\n    if (Date.now() - client.lastReset &gt; 60000) {\n      client.count = 0;\n      client.lastReset = Date.now();\n    }\n    client.count++;\n\n    if (client.count &gt; 100) {\n      ws.close(4002, 'Rate limit exceeded');\n      return;\n    }\n    // ... process message\n  });\n});\n</code></pre>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#next-steps","level":2,"title":"Next Steps","text":"<ul> <li>HTTP Tunnels - Basic tunnel usage</li> <li>Basic Authentication - Secure your tunnels</li> <li>Request Inspector - Monitor connections</li> <li>Advanced Configuration - Multiple tunnels</li> </ul>","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#examples","level":2,"title":"Examples","text":"","path":["User","Tunnels","WebSocket Support"],"tags":[]},{"location":"user/tunnels/websockets/#complete-example-real-time-dashboard","level":3,"title":"Complete Example: Real-Time Dashboard","text":"<p>Server:</p> <pre><code>const WebSocket = require('ws');\nconst express = require('express');\nconst http = require('http');\n\nconst app = express();\nconst server = http.createServer(app);\nconst wss = new WebSocket.Server({ server });\n\n// Serve static files\napp.use(express.static('public'));\n\n// Broadcast to all clients\nconst broadcast = (data) =&gt; {\n  wss.clients.forEach((client) =&gt; {\n    if (client.readyState === WebSocket.OPEN) {\n      client.send(JSON.stringify(data));\n    }\n  });\n};\n\n// Generate random metrics\nsetInterval(() =&gt; {\n  broadcast({\n    type: 'metrics',\n    cpu: Math.random() * 100,\n    memory: Math.random() * 100,\n    timestamp: Date.now()\n  });\n}, 1000);\n\nserver.listen(3000, () =&gt; {\n  console.log('Server running on port 3000');\n});\n</code></pre> <p>Client (<code>public/index.html</code>):</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Real-Time Dashboard&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Live Metrics&lt;/h1&gt;\n    &lt;div&gt;\n        &lt;p&gt;CPU: &lt;span id=\"cpu\"&gt;0&lt;/span&gt;%&lt;/p&gt;\n        &lt;p&gt;Memory: &lt;span id=\"memory\"&gt;0&lt;/span&gt;%&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;script&gt;\n        const ws = new WebSocket(`wss://metrics.${window.location.hostname}`);\n\n        ws.onmessage = (event) =&gt; {\n            const data = JSON.parse(event.data);\n            if (data.type === 'metrics') {\n                document.getElementById('cpu').textContent = data.cpu.toFixed(2);\n                document.getElementById('memory').textContent = data.memory.toFixed(2);\n            }\n        };\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>Create tunnel:</p> <pre><code>sellia http 3000 --subdomain metrics --server https://sellia.me\n</code></pre> <p>Now you have a real-time dashboard accessible from anywhere!</p>","path":["User","Tunnels","WebSocket Support"],"tags":[]}]}